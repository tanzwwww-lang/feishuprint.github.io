(() => { // webpackBootstrap
"use strict";
var __webpack_modules__ = ({
"./lib/globals/tinymce/core/api/Env.js": 
/*!*********************************************!*\
  !*** ./lib/globals/tinymce/core/api/Env.js ***!
  \*********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Env: () => (Env),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.Env');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Env = global;


}),
"./lib/globals/tinymce/core/api/PluginManager.js": 
/*!*******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/PluginManager.js ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PluginManager: () => (PluginManager),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.PluginManager');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var PluginManager = global;


}),
"./lib/globals/tinymce/core/api/dom/DOMUtils.js": 
/*!******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/dom/DOMUtils.js ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DOMUtils: () => (DOMUtils),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var DOMUtils = global;


}),
"./lib/globals/tinymce/core/api/html/DomParser.js": 
/*!********************************************************!*\
  !*** ./lib/globals/tinymce/core/api/html/DomParser.js ***!
  \********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DomParser: () => (DomParser),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.html.DomParser');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var DomParser = global;


}),
"./lib/globals/tinymce/core/api/html/Node.js": 
/*!***************************************************!*\
  !*** ./lib/globals/tinymce/core/api/html/Node.js ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Node: () => (Node),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.html.Node');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Node = global;


}),
"./lib/globals/tinymce/core/api/html/Serializer.js": 
/*!*********************************************************!*\
  !*** ./lib/globals/tinymce/core/api/html/Serializer.js ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Serializer: () => (Serializer),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.html.Serializer');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Serializer = global;


}),
"./lib/globals/tinymce/core/api/util/Tools.js": 
/*!****************************************************!*\
  !*** ./lib/globals/tinymce/core/api/util/Tools.js ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Tools: () => (Tools),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.util.Tools');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Tools = global;


}),
"../katamari/src/main/ts/ephox/katamari/api/Arr.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Arr.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bind: () => (bind),
  chunk: () => (chunk),
  contains: () => (contains),
  difference: () => (difference),
  each: () => (each),
  eachr: () => (eachr),
  equal: () => (equal),
  exists: () => (exists),
  filter: () => (filter),
  find: () => (find),
  findIndex: () => (findIndex),
  findLastIndex: () => (findLastIndex),
  findMap: () => (findMap),
  findUntil: () => (findUntil),
  flatten: () => (flatten),
  foldl: () => (foldl),
  foldr: () => (foldr),
  forall: () => (forall),
  from: () => (from),
  get: () => (get),
  groupBy: () => (groupBy),
  head: () => (head),
  indexOf: () => (indexOf),
  last: () => (last),
  map: () => (map),
  mapToObject: () => (mapToObject),
  partition: () => (partition),
  pure: () => (pure),
  range: () => (range),
  reverse: () => (reverse),
  sort: () => (sort),
  unique: () => (unique)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");




const nativeSlice = Array.prototype.slice;
const nativeIndexOf = Array.prototype.indexOf;
const nativePush = Array.prototype.push;
const rawIndexOf = (ts, t)=>nativeIndexOf.call(ts, t);
const indexOf = (xs, x)=>{
    // The rawIndexOf method does not wrap up in an option. This is for performance reasons.
    const r = rawIndexOf(xs, x);
    return r === -1 ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(r);
};
const contains = (xs, x)=>rawIndexOf(xs, x) > -1;
const exists = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return true;
        }
    }
    return false;
};
const range = (num, f)=>{
    const r = [];
    for(let i = 0; i < num; i++){
        r.push(f(i));
    }
    return r;
};
// It's a total micro optimisation, but these do make some difference.
// Particularly for browsers other than Chrome.
// - length caching
// http://jsperf.com/browser-diet-jquery-each-vs-for-loop/69
// - not using push
// http://jsperf.com/array-direct-assignment-vs-push/2
const chunk = (array, size)=>{
    const r = [];
    for(let i = 0; i < array.length; i += size){
        const s = nativeSlice.call(array, i, i + size);
        r.push(s);
    }
    return r;
};
const map = (xs, f)=>{
    // pre-allocating array size when it's guaranteed to be known
    // http://jsperf.com/push-allocated-vs-dynamic/22
    const len = xs.length;
    const r = new Array(len);
    for(let i = 0; i < len; i++){
        const x = xs[i];
        r[i] = f(x, i);
    }
    return r;
};
// Unwound implementing other functions in terms of each.
// The code size is roughly the same, and it should allow for better optimisation.
// const each = function<T, U>(xs: T[], f: (x: T, i?: number, xs?: T[]) => void): void {
const each = (xs, f)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        f(x, i);
    }
};
const eachr = (xs, f)=>{
    for(let i = xs.length - 1; i >= 0; i--){
        const x = xs[i];
        f(x, i);
    }
};
const partition = (xs, pred)=>{
    const pass = [];
    const fail = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        const arr = pred(x, i) ? pass : fail;
        arr.push(x);
    }
    return {
        pass,
        fail
    };
};
const filter = (xs, pred)=>{
    const r = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            r.push(x);
        }
    }
    return r;
};
/*
 * Groups an array into contiguous arrays of like elements. Whether an element is like or not depends on f.
 *
 * f is a function that derives a value from an element - e.g. true or false, or a string.
 * Elements are like if this function generates the same value for them (according to ===).
 *
 *
 * Order of the elements is preserved. Arr.flatten() on the result will return the original list, as with Haskell groupBy function.
 *  For a good explanation, see the group function (which is a special case of groupBy)
 *  http://hackage.haskell.org/package/base-4.7.0.0/docs/Data-List.html#v:group
 */ const groupBy = (xs, f)=>{
    if (xs.length === 0) {
        return [];
    } else {
        let wasType = f(xs[0]); // initial case for matching
        const r = [];
        let group = [];
        for(let i = 0, len = xs.length; i < len; i++){
            const x = xs[i];
            const type = f(x);
            if (type !== wasType) {
                r.push(group);
                group = [];
            }
            wasType = type;
            group.push(x);
        }
        if (group.length !== 0) {
            r.push(group);
        }
        return r;
    }
};
const foldr = (xs, f, acc)=>{
    eachr(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const foldl = (xs, f, acc)=>{
    each(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const findUntil = (xs, pred, until)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(x);
        } else if (until(x, i)) {
            break;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const find = (xs, pred)=>{
    return findUntil(xs, pred, _Fun__WEBPACK_IMPORTED_MODULE_1__.never);
};
const findIndex = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const findLastIndex = (arr, pred)=>{
    for(let i = arr.length - 1; i >= 0; i--){
        if (pred(arr[i], i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const flatten = (xs)=>{
    // Note, this is possible because push supports multiple arguments:
    // http://jsperf.com/concat-push/6
    // Note that in the past, concat() would silently work (very slowly) for array-like objects.
    // With this change it will throw an error.
    const r = [];
    for(let i = 0, len = xs.length; i < len; ++i){
        // Ensure that each value is an array itself
        if (!_Type__WEBPACK_IMPORTED_MODULE_2__.isArray(xs[i])) {
            throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);
        }
        nativePush.apply(r, xs[i]);
    }
    return r;
};
const bind = (xs, f)=>flatten(map(xs, f));
const forall = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; ++i){
        const x = xs[i];
        if (pred(x, i) !== true) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqArray(eq).eq(a1, a2);
const reverse = (xs)=>{
    const r = nativeSlice.call(xs, 0);
    r.reverse();
    return r;
};
const difference = (a1, a2)=>filter(a1, (x)=>!contains(a2, x));
const mapToObject = (xs, f)=>{
    const r = {};
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        r[String(x)] = f(x, i);
    }
    return r;
};
const pure = (x)=>[
        x
    ];
const sort = (xs, comparator)=>{
    const copy = nativeSlice.call(xs, 0);
    copy.sort(comparator);
    return copy;
};
const get = (xs, i)=>i >= 0 && i < xs.length ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(xs[i]) : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
const head = (xs)=>get(xs, 0);
const last = (xs)=>get(xs, xs.length - 1);
const from = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(Array.from) ? Array.from : (x)=>nativeSlice.call(x);
const findMap = (arr, f)=>{
    for(let i = 0; i < arr.length; i++){
        const r = f(arr[i], i);
        if (r.isSome()) {
            return r;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const unique = (xs, comparator)=>{
    const r = [];
    const isDuplicated = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(comparator) ? (x)=>exists(r, (i)=>comparator(i, x)) : (x)=>contains(r, x);
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (!isDuplicated(x)) {
            r.push(x);
        }
    }
    return r;
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Cell.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Cell.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Cell: () => (Cell)
});
const Cell = (initial)=>{
    let value = initial;
    const get = ()=>{
        return value;
    };
    const set = (v)=>{
        value = v;
    };
    return {
        get,
        set
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Fun.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Fun.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  always: () => (always),
  apply: () => (apply),
  call: () => (call),
  compose: () => (compose),
  compose1: () => (compose1),
  constant: () => (constant),
  curry: () => (curry),
  die: () => (die),
  identity: () => (identity),
  never: () => (never),
  noarg: () => (noarg),
  noop: () => (noop),
  not: () => (not),
  pipe: () => (pipe),
  tripleEquals: () => (tripleEquals),
  weaken: () => (weaken)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

const noop = ()=>{};
const noarg = (f)=>()=>f();
/** Compose a unary function with an n-ary function */ const compose = (fa, fb)=>{
    return (...args)=>{
        return fa(fb.apply(null, args));
    };
};
/** Compose two unary functions. Similar to compose, but avoids using Function.prototype.apply. */ const compose1 = (fbc, fab)=>(a)=>fbc(fab(a));
const constant = (value)=>{
    return ()=>{
        return value;
    };
};
const identity = (x)=>{
    return x;
};
const tripleEquals = (a, b)=>{
    return a === b;
};
function curry(fn, ...initialArgs) {
    return (...restArgs)=>{
        const all = initialArgs.concat(restArgs);
        return fn.apply(null, all);
    };
}
const not = (f)=>(t)=>!f(t);
const die = (msg)=>{
    return ()=>{
        throw new Error(msg);
    };
};
const apply = (f)=>{
    return f();
};
const call = (f)=>{
    f();
};
const never = constant(false);
const always = constant(true);
/* Used to weaken types */ const weaken = (b)=>b;
const pipe = (a, ab, bc, cd, de, ef, fg, gh)=>{
    const b = ab(a);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(bc)) {
        return b;
    }
    const c = bc(b);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(cd)) {
        return c;
    }
    const d = cd(c);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(de)) {
        return d;
    }
    const e = de(d);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(ef)) {
        return e;
    }
    const f = ef(e);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(fg)) {
        return f;
    }
    const g = fg(f);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(gh)) {
        return g;
    }
    return gh(g);
};



}),
"../katamari/src/main/ts/ephox/katamari/api/Obj.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Obj.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bifilter: () => (bifilter),
  each: () => (each),
  equal: () => (equal),
  filter: () => (filter),
  find: () => (find),
  get: () => (get),
  has: () => (has),
  hasNonNullableKey: () => (hasNonNullableKey),
  hasOwnProperty: () => (hasOwnProperty),
  isEmpty: () => (isEmpty),
  keys: () => (keys),
  map: () => (map),
  mapToArray: () => (mapToArray),
  size: () => (size),
  tupleMap: () => (tupleMap),
  values: () => (values)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



// There are many variations of Object iteration that are faster than the 'for-in' style:
// http://jsperf.com/object-keys-iteration/107
//
// Use the native keys if it is available (IE9+), otherwise fall back to manually filtering
const keys = Object.keys;
const hasOwnProperty = Object.hasOwnProperty;
const each = (obj, f)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        f(x, i);
    }
};
const map = (obj, f)=>{
    return tupleMap(obj, (x, i)=>({
            k: i,
            v: f(x, i)
        }));
};
const tupleMap = (obj, f)=>{
    const r = {};
    each(obj, (x, i)=>{
        const tuple = f(x, i);
        r[tuple.k] = tuple.v;
    });
    return r;
};
const objAcc = (r)=>(x, i)=>{
        r[i] = x;
    };
const internalFilter = (obj, pred, onTrue, onFalse)=>{
    each(obj, (x, i)=>{
        (pred(x, i) ? onTrue : onFalse)(x, i);
    });
};
const bifilter = (obj, pred)=>{
    const t = {};
    const f = {};
    internalFilter(obj, pred, objAcc(t), objAcc(f));
    return {
        t,
        f
    };
};
const filter = (obj, pred)=>{
    const t = {};
    internalFilter(obj, pred, objAcc(t), _Fun__WEBPACK_IMPORTED_MODULE_0__.noop);
    return t;
};
const mapToArray = (obj, f)=>{
    const r = [];
    each(obj, (value, name)=>{
        r.push(f(value, name));
    });
    return r;
};
const find = (obj, pred)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        if (pred(x, i, obj)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(x);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const values = (obj)=>{
    return mapToArray(obj, _Fun__WEBPACK_IMPORTED_MODULE_0__.identity);
};
const size = (obj)=>{
    return keys(obj).length;
};
const get = (obj, key)=>{
    return has(obj, key) ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.from(obj[key]) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const has = (obj, key)=>hasOwnProperty.call(obj, key);
const hasNonNullableKey = (obj, key)=>has(obj, key) && obj[key] !== undefined && obj[key] !== null;
const isEmpty = (r)=>{
    for(const x in r){
        if (hasOwnProperty.call(r, x)) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqRecord(eq).eq(a1, a2);


}),
"../katamari/src/main/ts/ephox/katamari/api/Optional.ts": 
/*!**************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Optional.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Optional: () => (Optional)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

/**
 * The `Optional` type represents a value (of any type) that potentially does
 * not exist. Any `Optional<T>` can either be a `Some<T>` (in which case the
 * value does exist) or a `None` (in which case the value does not exist). This
 * module defines a whole lot of FP-inspired utility functions for dealing with
 * `Optional` objects.
 *
 * Comparison with null or undefined:
 * - We don't get fancy null coalescing operators with `Optional`
 * - We do get fancy helper functions with `Optional`
 * - `Optional` support nesting, and allow for the type to still be nullable (or
 * another `Optional`)
 * - There is no option to turn off strict-optional-checks like there is for
 * strict-null-checks
 */ class Optional {
    tag;
    value;
    // Sneaky optimisation: every instance of Optional.none is identical, so just
    // reuse the same object
    static singletonNone = new Optional(false);
    // The internal representation has a `tag` and a `value`, but both are
    // private: able to be console.logged, but not able to be accessed by code
    constructor(tag, value){
        this.tag = tag;
        this.value = value;
    }
    // --- Identities ---
    /**
   * Creates a new `Optional<T>` that **does** contain a value.
   */ static some(value) {
        return new Optional(true, value);
    }
    /**
   * Create a new `Optional<T>` that **does not** contain a value. `T` can be
   * any type because we don't actually have a `T`.
   */ static none() {
        return Optional.singletonNone;
    }
    /**
   * Perform a transform on an `Optional` type. Regardless of whether this
   * `Optional` contains a value or not, `fold` will return a value of type `U`.
   * If this `Optional` does not contain a value, the `U` will be created by
   * calling `onNone`. If this `Optional` does contain a value, the `U` will be
   * created by calling `onSome`.
   *
   * For the FP enthusiasts in the room, this function:
   * 1. Could be used to implement all of the functions below
   * 2. Forms a catamorphism
   */ fold(onNone, onSome) {
        if (this.tag) {
            return onSome(this.value);
        } else {
            return onNone();
        }
    }
    /**
   * Determine if this `Optional` object contains a value.
   */ isSome() {
        return this.tag;
    }
    /**
   * Determine if this `Optional` object **does not** contain a value.
   */ isNone() {
        return !this.tag;
    }
    // --- Functor (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value. If
   * you provide a function to turn a T into a U, this is the function you use
   * to turn an `Optional<T>` into an `Optional<U>`. If this **does** contain
   * a value then the output will also contain a value (that value being the
   * output of `mapper(this.value)`), and if this **does not** contain a value
   * then neither will the output.
   */ map(mapper) {
        if (this.tag) {
            return Optional.some(mapper(this.value));
        } else {
            return Optional.none();
        }
    }
    // --- Monad (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value.
   * Unlike `map`, here the transform itself also returns an `Optional`.
   */ bind(binder) {
        if (this.tag) {
            return binder(this.value);
        } else {
            return Optional.none();
        }
    }
    // --- Traversable (name stolen from Haskell / maths) ---
    /**
   * For a given predicate, this function finds out if there **exists** a value
   * inside this `Optional` object that meets the predicate. In practice, this
   * means that for `Optional`s that do not contain a value it returns false (as
   * no predicate-meeting value exists).
   */ exists(predicate) {
        return this.tag && predicate(this.value);
    }
    /**
   * For a given predicate, this function finds out if **all** the values inside
   * this `Optional` object meet the predicate. In practice, this means that
   * for `Optional`s that do not contain a value it returns true (as all 0
   * objects do meet the predicate).
   */ forall(predicate) {
        return !this.tag || predicate(this.value);
    }
    filter(predicate) {
        if (!this.tag || predicate(this.value)) {
            return this;
        } else {
            return Optional.none();
        }
    }
    // --- Getters ---
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.
   */ getOr(replacement) {
        return this.tag ? this.value : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.  Unlike `getOr`, in this method the `replacement` object is also
   * `Optional` - meaning that this method will always return an `Optional`.
   */ or(replacement) {
        return this.tag ? this : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value. Unlike `getOr`, in this method the `replacement` value is
   * "thunked" - that is to say that you don't pass a value to `getOrThunk`, you
   * pass a function which (if called) will **return** the `value` you want to
   * use.
   */ getOrThunk(thunk) {
        return this.tag ? this.value : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided Optional object does not contain a
   * value.
   *
   * Unlike `or`, in this method the `replacement` value is "thunked" - that is
   * to say that you don't pass a value to `orThunk`, you pass a function which
   * (if called) will **return** the `value` you want to use.
   *
   * Unlike `getOrThunk`, in this method the `replacement` value is also
   * `Optional`, meaning that this method will always return an `Optional`.
   */ orThunk(thunk) {
        return this.tag ? this : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, throwing an
   * exception if the provided `Optional` object does not contain a value.
   *
   * WARNING:
   * You should only be using this function if you know that the `Optional`
   * object **is not** empty (otherwise you're throwing exceptions in production
   * code, which is bad).
   *
   * In tests this is more acceptable.
   *
   * Prefer other methods to this, such as `.each`.
   */ getOrDie(message) {
        if (!this.tag) {
            throw new Error(message ?? 'Called getOrDie on None');
        } else {
            return this.value;
        }
    }
    // --- Interop with null and undefined ---
    /**
   * Creates an `Optional` value from a nullable (or undefined-able) input.
   * Null, or undefined, is converted to `None`, and anything else is converted
   * to `Some`.
   */ static from(value) {
        return _Type__WEBPACK_IMPORTED_MODULE_0__.isNonNullable(value) ? Optional.some(value) : Optional.none();
    }
    /**
   * Converts an `Optional` to a nullable type, by getting the value if it
   * exists, or returning `null` if it does not.
   */ getOrNull() {
        return this.tag ? this.value : null;
    }
    /**
   * Converts an `Optional` to an undefined-able type, by getting the value if
   * it exists, or returning `undefined` if it does not.
   */ getOrUndefined() {
        return this.value;
    }
    // --- Utilities ---
    /**
   * If the `Optional` contains a value, perform an action on that value.
   * Unlike the rest of the methods on this type, `.each` has side-effects. If
   * you want to transform an `Optional<T>` **into** something, then this is not
   * the method for you. If you want to use an `Optional<T>` to **do**
   * something, then this is the method for you - provided you're okay with not
   * doing anything in the case where the `Optional` doesn't have a value inside
   * it. If you're not sure whether your use-case fits into transforming
   * **into** something or **doing** something, check whether it has a return
   * value. If it does, you should be performing a transform.
   */ each(worker) {
        if (this.tag) {
            worker(this.value);
        }
    }
    /**
   * Turn the `Optional` object into an array that contains all of the values
   * stored inside the `Optional`. In practice, this means the output will have
   * either 0 or 1 elements.
   */ toArray() {
        return this.tag ? [
            this.value
        ] : [];
    }
    /**
   * Turn the `Optional` object into a string for debugging or printing. Not
   * recommended for production code, but good for debugging. Also note that
   * these days an `Optional` object can be logged to the console directly, and
   * its inner value (if it exists) will be visible.
   */ toString() {
        return this.tag ? `some(${this.value})` : 'none()';
    }
}


}),
"../katamari/src/main/ts/ephox/katamari/api/Strings.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Strings.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  capitalize: () => (capitalize),
  contains: () => (contains),
  endsWith: () => (endsWith),
  ensureLeading: () => (ensureLeading),
  ensureTrailing: () => (ensureTrailing),
  fromCodePoint: () => (fromCodePoint),
  isEmpty: () => (isEmpty),
  isNotEmpty: () => (isNotEmpty),
  lTrim: () => (lTrim),
  rTrim: () => (rTrim),
  removeLeading: () => (removeLeading),
  removeTrailing: () => (removeTrailing),
  repeat: () => (repeat),
  startsWith: () => (startsWith),
  supplant: () => (supplant),
  toFloat: () => (toFloat),
  toInt: () => (toInt),
  trim: () => (trim)
});
/* ESM import */var _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../str/StrAppend */ "../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");



const checkRange = (str, substr, start)=>substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;
/** Given a string and object, perform template-replacements on the string, as specified by the object.
 * Any template fields of the form ${name} are replaced by the string or number specified as obj["name"]
 * Based on Douglas Crockford's 'supplant' method for template-replace of strings. Uses different template format.
 */ const supplant = (str, obj)=>{
    const isStringOrNumber = (a)=>{
        const t = typeof a;
        return t === 'string' || t === 'number';
    };
    return str.replace(/\$\{([^{}]*)\}/g, (fullMatch, key)=>{
        const value = obj[key];
        return isStringOrNumber(value) ? value.toString() : fullMatch;
    });
};
const removeLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromStart(str, prefix.length) : str;
};
const removeTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromEnd(str, suffix.length) : str;
};
const ensureLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToStart(str, prefix);
};
const ensureTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToEnd(str, suffix);
};
const contains = (str, substr, start = 0, end)=>{
    const idx = str.indexOf(substr, start);
    if (idx !== -1) {
        return _Type__WEBPACK_IMPORTED_MODULE_1__.isUndefined(end) ? true : idx + substr.length <= end;
    } else {
        return false;
    }
};
const capitalize = (str)=>{
    return str === '' ? '' : str.charAt(0).toUpperCase() + str.substring(1);
};
/** Does 'str' start with 'prefix'?
 *  Note: all strings start with the empty string.
 *        More formally, for all strings x, startsWith(x, "").
 *        This is so that for all strings x and y, startsWith(y + x, y)
 */ const startsWith = (str, prefix)=>{
    return checkRange(str, prefix, 0);
};
/** Does 'str' end with 'suffix'?
 *  Note: all strings end with the empty string.
 *        More formally, for all strings x, endsWith(x, "").
 *        This is so that for all strings x and y, endsWith(x + y, y)
 */ const endsWith = (str, suffix)=>{
    return checkRange(str, suffix, str.length - suffix.length);
};
const blank = (r)=>(s)=>s.replace(r, '');
/** removes all leading and trailing spaces */ const trim = blank(/^\s+|\s+$/g);
const lTrim = blank(/^\s+/g);
const rTrim = blank(/\s+$/g);
const isNotEmpty = (s)=>s.length > 0;
const isEmpty = (s)=>!isNotEmpty(s);
const repeat = (s, count)=>count <= 0 ? '' : new Array(count + 1).join(s);
const fromCodePoint = String.fromCodePoint;
const toInt = (value, radix = 10)=>{
    const num = parseInt(value, radix);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};
const toFloat = (value)=>{
    const num = parseFloat(value);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Type.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Type.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  is: () => (is),
  isArray: () => (isArray),
  isArrayOf: () => (isArrayOf),
  isBoolean: () => (isBoolean),
  isFunction: () => (isFunction),
  isNonNullable: () => (isNonNullable),
  isNull: () => (isNull),
  isNullable: () => (isNullable),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isPlainObject: () => (isPlainObject),
  isPromiseLike: () => (isPromiseLike),
  isString: () => (isString),
  isUndefined: () => (isUndefined)
});
/* eslint-disable @typescript-eslint/no-wrapper-object-types */ const getPrototypeOf = Object.getPrototypeOf;
const hasProto = (v, constructor, predicate)=>{
    if (predicate(v, constructor.prototype)) {
        return true;
    } else {
        // String-based fallback time
        return v.constructor?.name === constructor.name;
    }
};
const typeOf = (x)=>{
    const t = typeof x;
    if (x === null) {
        return 'null';
    } else if (t === 'object' && Array.isArray(x)) {
        return 'array';
    } else if (t === 'object' && hasProto(x, String, (o, proto)=>proto.isPrototypeOf(o))) {
        return 'string';
    } else {
        return t;
    }
};
const isType = (type)=>(value)=>typeOf(value) === type;
const isSimpleType = (type)=>(value)=>typeof value === type;
const eq = (t)=>(a)=>t === a;
const is = (value, constructor)=>isObject(value) && hasProto(value, constructor, (o, proto)=>getPrototypeOf(o) === proto);
const isString = isType('string');
const isObject = isType('object');
const isPlainObject = (value)=>is(value, Object);
const isArray = isType('array');
const isNull = eq(null);
const isBoolean = isSimpleType('boolean');
const isUndefined = eq(undefined);
const isNullable = (a)=>a === null || a === undefined;
const isNonNullable = (a)=>!isNullable(a);
const isFunction = isSimpleType('function');
const isNumber = isSimpleType('number');
const isArrayOf = (value, pred)=>{
    if (isArray(value)) {
        for(let i = 0, len = value.length; i < len; ++i){
            if (!pred(value[i])) {
                return false;
            }
        }
        return true;
    }
    return false;
};
const isPromiseLike = (x)=>isObject(x) && isFunction(x.then) && isFunction(x.catch);


}),
"../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addToEnd: () => (addToEnd),
  addToStart: () => (addToStart),
  removeFromEnd: () => (removeFromEnd),
  removeFromStart: () => (removeFromStart)
});
const addToStart = (str, prefix)=>{
    return prefix + str;
};
const addToEnd = (str, suffix)=>{
    return str + suffix;
};
const removeFromStart = (str, numChars)=>{
    return str.substring(numChars);
};
const removeFromEnd = (str, numChars)=>{
    return str.substring(0, str.length - numChars);
};


}),
"./src/plugins/media/main/ts/Plugin.ts": 
/*!*********************************************!*\
  !*** ./src/plugins/media/main/ts/Plugin.ts ***!
  \*********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var tinymce_core_api_PluginManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/PluginManager */ "./lib/globals/tinymce/core/api/PluginManager.js");
/* ESM import */var _api_Api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api/Api */ "./src/plugins/media/main/ts/api/Api.ts");
/* ESM import */var _api_Commands__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./api/Commands */ "./src/plugins/media/main/ts/api/Commands.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _core_FilterContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/FilterContent */ "./src/plugins/media/main/ts/core/FilterContent.ts");
/* ESM import */var _core_ResolveName__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/ResolveName */ "./src/plugins/media/main/ts/core/ResolveName.ts");
/* ESM import */var _core_Selection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/Selection */ "./src/plugins/media/main/ts/core/Selection.ts");
/* ESM import */var _ui_Buttons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ui/Buttons */ "./src/plugins/media/main/ts/ui/Buttons.ts");








/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{
    tinymce_core_api_PluginManager__WEBPACK_IMPORTED_MODULE_0__["default"].add('media', (editor)=>{
        _api_Options__WEBPACK_IMPORTED_MODULE_3__.register(editor);
        _api_Commands__WEBPACK_IMPORTED_MODULE_2__.register(editor);
        _ui_Buttons__WEBPACK_IMPORTED_MODULE_7__.register(editor);
        _core_ResolveName__WEBPACK_IMPORTED_MODULE_5__.setup(editor);
        _core_FilterContent__WEBPACK_IMPORTED_MODULE_4__.setup(editor);
        _core_Selection__WEBPACK_IMPORTED_MODULE_6__.setup(editor);
        return _api_Api__WEBPACK_IMPORTED_MODULE_1__.get(editor);
    });
});


}),
"./src/plugins/media/main/ts/api/Api.ts": 
/*!**********************************************!*\
  !*** ./src/plugins/media/main/ts/api/Api.ts ***!
  \**********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get)
});
/* ESM import */var _ui_Dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ui/Dialog */ "./src/plugins/media/main/ts/ui/Dialog.ts");

const get = (editor)=>{
    const showDialog = ()=>{
        _ui_Dialog__WEBPACK_IMPORTED_MODULE_0__.showDialog(editor);
    };
    return {
        showDialog
    };
};



}),
"./src/plugins/media/main/ts/api/Commands.ts": 
/*!***************************************************!*\
  !*** ./src/plugins/media/main/ts/api/Commands.ts ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  register: () => (register)
});
/* ESM import */var _ui_Dialog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ui/Dialog */ "./src/plugins/media/main/ts/ui/Dialog.ts");

const register = (editor)=>{
    const showDialog = ()=>{
        _ui_Dialog__WEBPACK_IMPORTED_MODULE_0__.showDialog(editor);
    };
    editor.addCommand('mceMedia', showDialog);
};



}),
"./src/plugins/media/main/ts/api/Options.ts": 
/*!**************************************************!*\
  !*** ./src/plugins/media/main/ts/api/Options.ts ***!
  \**************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAudioTemplateCallback: () => (getAudioTemplateCallback),
  getIframeTemplateCallback: () => (getIframeTemplateCallback),
  getUrlResolver: () => (getUrlResolver),
  getVideoTemplateCallback: () => (getVideoTemplateCallback),
  hasAltSource: () => (hasAltSource),
  hasDimensions: () => (hasDimensions),
  hasLiveEmbeds: () => (hasLiveEmbeds),
  hasPoster: () => (hasPoster),
  register: () => (register),
  shouldFilterHtml: () => (shouldFilterHtml)
});
const option = (name)=>(editor)=>editor.options.get(name);
const register = (editor)=>{
    const registerOption = editor.options.register;
    registerOption('audio_template_callback', {
        processor: 'function'
    });
    registerOption('video_template_callback', {
        processor: 'function'
    });
    registerOption('iframe_template_callback', {
        processor: 'function'
    });
    registerOption('media_live_embeds', {
        processor: 'boolean',
        default: true
    });
    registerOption('media_filter_html', {
        processor: 'boolean',
        default: true
    });
    registerOption('media_url_resolver', {
        processor: 'function'
    });
    registerOption('media_alt_source', {
        processor: 'boolean',
        default: true
    });
    registerOption('media_poster', {
        processor: 'boolean',
        default: true
    });
    registerOption('media_dimensions', {
        processor: 'boolean',
        default: true
    });
};
const getAudioTemplateCallback = option('audio_template_callback');
const getVideoTemplateCallback = option('video_template_callback');
const getIframeTemplateCallback = option('iframe_template_callback');
const hasLiveEmbeds = option('media_live_embeds');
const shouldFilterHtml = option('media_filter_html');
const getUrlResolver = option('media_url_resolver');
const hasAltSource = option('media_alt_source');
const hasPoster = option('media_poster');
const hasDimensions = option('media_dimensions');



}),
"./src/plugins/media/main/ts/core/DataToHtml.ts": 
/*!******************************************************!*\
  !*** ./src/plugins/media/main/ts/core/DataToHtml.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  dataToHtml: () => (dataToHtml)
});
/* ESM import */var tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/util/Tools */ "./lib/globals/tinymce/core/api/util/Tools.js");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _HtmlToData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HtmlToData */ "./src/plugins/media/main/ts/core/HtmlToData.ts");
/* ESM import */var _Mime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Mime */ "./src/plugins/media/main/ts/core/Mime.ts");
/* ESM import */var _UpdateHtml__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UpdateHtml */ "./src/plugins/media/main/ts/core/UpdateHtml.ts");
/* ESM import */var _UrlPatterns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./UrlPatterns */ "./src/plugins/media/main/ts/core/UrlPatterns.ts");






const getIframeHtml = (data, iframeTemplateCallback)=>{
    if (iframeTemplateCallback) {
        return iframeTemplateCallback(data);
    } else {
        const allowFullscreen = data.allowfullscreen ? ' allowFullscreen="1"' : '';
        return '<iframe src="' + data.source + '" width="' + data.width + '" height="' + data.height + '"' + allowFullscreen + '></iframe>';
    }
};
const getFlashHtml = (data)=>{
    let html = '<object data="' + data.source + '" width="' + data.width + '" height="' + data.height + '" type="application/x-shockwave-flash">';
    if (data.poster) {
        html += '<img src="' + data.poster + '" width="' + data.width + '" height="' + data.height + '" />';
    }
    html += '</object>';
    return html;
};
const getAudioHtml = (data, audioTemplateCallback)=>{
    if (audioTemplateCallback) {
        return audioTemplateCallback(data);
    } else {
        return '<audio controls="controls" src="' + data.source + '">' + (data.altsource ? '\n<source src="' + data.altsource + '"' + (data.altsourcemime ? ' type="' + data.altsourcemime + '"' : '') + ' />\n' : '') + '</audio>';
    }
};
const getVideoHtml = (data, videoTemplateCallback)=>{
    if (videoTemplateCallback) {
        return videoTemplateCallback(data);
    } else {
        return '<video width="' + data.width + '" height="' + data.height + '"' + (data.poster ? ' poster="' + data.poster + '"' : '') + ' controls="controls">\n' + '<source src="' + data.source + '"' + (data.sourcemime ? ' type="' + data.sourcemime + '"' : '') + ' />\n' + (data.altsource ? '<source src="' + data.altsource + '"' + (data.altsourcemime ? ' type="' + data.altsourcemime + '"' : '') + ' />\n' : '') + '</video>';
    }
};
const dataToHtml = (editor, dataIn)=>{
    const data = tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].extend({}, dataIn);
    if (!data.source) {
        tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].extend(data, _HtmlToData__WEBPACK_IMPORTED_MODULE_2__.htmlToData(data.embed ?? '', editor.schema));
        if (!data.source) {
            return '';
        }
    }
    if (!data.altsource) {
        data.altsource = '';
    }
    if (!data.poster) {
        data.poster = '';
    }
    data.source = editor.convertURL(data.source, 'source');
    data.altsource = editor.convertURL(data.altsource, 'source');
    data.sourcemime = _Mime__WEBPACK_IMPORTED_MODULE_3__.guess(data.source);
    data.altsourcemime = _Mime__WEBPACK_IMPORTED_MODULE_3__.guess(data.altsource);
    data.poster = editor.convertURL(data.poster, 'poster');
    const pattern = _UrlPatterns__WEBPACK_IMPORTED_MODULE_5__.matchPattern(data.source);
    if (pattern) {
        data.source = pattern.url;
        data.type = pattern.type;
        data.allowfullscreen = pattern.allowFullscreen;
        data.width = data.width || String(pattern.w);
        data.height = data.height || String(pattern.h);
    }
    if (data.embed) {
        return _UpdateHtml__WEBPACK_IMPORTED_MODULE_4__.updateHtml(data.embed, data, true, editor.schema);
    } else {
        const audioTemplateCallback = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getAudioTemplateCallback(editor);
        const videoTemplateCallback = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getVideoTemplateCallback(editor);
        const iframeTemplateCallback = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getIframeTemplateCallback(editor);
        data.width = data.width || '300';
        data.height = data.height || '150';
        tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].each(data, (value, key)=>{
            data[key] = editor.dom.encode('' + value);
        });
        if (data.type === 'iframe') {
            return getIframeHtml(data, iframeTemplateCallback);
        } else if (data.sourcemime === 'application/x-shockwave-flash') {
            return getFlashHtml(data);
        } else if (data.sourcemime.indexOf('audio') !== -1) {
            return getAudioHtml(data, audioTemplateCallback);
        } else {
            return getVideoHtml(data, videoTemplateCallback);
        }
    }
};



}),
"./src/plugins/media/main/ts/core/FilterContent.ts": 
/*!*********************************************************!*\
  !*** ./src/plugins/media/main/ts/core/FilterContent.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  setup: () => (setup)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/html/Node */ "./lib/globals/tinymce/core/api/html/Node.js");
/* ESM import */var _Nodes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Nodes */ "./src/plugins/media/main/ts/core/Nodes.ts");
/* ESM import */var _Sanitize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sanitize */ "./src/plugins/media/main/ts/core/Sanitize.ts");




const setup = (editor)=>{
    editor.on('PreInit', ()=>{
        const { schema, serializer, parser } = editor;
        // Set browser specific allowFullscreen attribs as boolean
        const boolAttrs = schema.getBoolAttrs();
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each('webkitallowfullscreen mozallowfullscreen'.split(' '), (name)=>{
            boolAttrs[name] = {};
        });
        // Add some non-standard attributes to the schema
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.each({
            embed: [
                'wmode'
            ]
        }, (attrs, name)=>{
            const rule = schema.getElementRule(name);
            if (rule) {
                _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(attrs, (attr)=>{
                    rule.attributes[attr] = {};
                    rule.attributesOrder.push(attr);
                });
            }
        });
        // Converts iframe, video etc into placeholder images
        parser.addNodeFilter('iframe,video,audio,object,embed', _Nodes__WEBPACK_IMPORTED_MODULE_1__.placeHolderConverter(editor));
        // Replaces placeholder images with real elements for video, object, iframe etc
        serializer.addAttributeFilter('data-mce-object', (nodes, name)=>{
            let i = nodes.length;
            while(i--){
                const node = nodes[i];
                if (!node.parent) {
                    continue;
                }
                const realElmName = node.attr(name);
                const realElm = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_0__["default"](realElmName, 1);
                // Add width/height to everything but audio
                if (realElmName !== 'audio') {
                    const className = node.attr('class');
                    if (className && className.indexOf('mce-preview-object') !== -1 && node.firstChild) {
                        realElm.attr({
                            width: node.firstChild.attr('width'),
                            height: node.firstChild.attr('height')
                        });
                    } else {
                        realElm.attr({
                            width: node.attr('width'),
                            height: node.attr('height')
                        });
                    }
                }
                realElm.attr({
                    style: node.attr('style')
                });
                // Unprefix all placeholder attributes
                const attribs = node.attributes ?? [];
                let ai = attribs.length;
                while(ai--){
                    const attrName = attribs[ai].name;
                    if (attrName.indexOf('data-mce-p-') === 0) {
                        realElm.attr(attrName.substr(11), attribs[ai].value);
                    }
                }
                // Inject innerhtml
                const innerHtml = node.attr('data-mce-html');
                if (innerHtml) {
                    const fragment = _Sanitize__WEBPACK_IMPORTED_MODULE_2__.parseAndSanitize(editor, realElmName, unescape(innerHtml));
                    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(fragment.children(), (child)=>realElm.append(child));
                }
                node.replace(realElm);
            }
        });
    });
    editor.on('SetContent', ()=>{
        // TODO: This shouldn't be needed there should be a way to mark bogus
        // elements so they are never removed except external save
        const dom = editor.dom;
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(dom.select('span.mce-preview-object'), (elm)=>{
            if (dom.select('span.mce-shim', elm).length === 0) {
                dom.add(elm, 'span', {
                    class: 'mce-shim'
                });
            }
        });
    });
};



}),
"./src/plugins/media/main/ts/core/HtmlToData.ts": 
/*!******************************************************!*\
  !*** ./src/plugins/media/main/ts/core/HtmlToData.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  htmlToData: () => (htmlToData)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var tinymce_core_api_dom_DOMUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/dom/DOMUtils */ "./lib/globals/tinymce/core/api/dom/DOMUtils.js");
/* ESM import */var tinymce_core_api_html_DomParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tinymce/core/api/html/DomParser */ "./lib/globals/tinymce/core/api/html/DomParser.js");
/* ESM import */var tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tinymce/core/api/util/Tools */ "./lib/globals/tinymce/core/api/util/Tools.js");




const DOM = tinymce_core_api_dom_DOMUtils__WEBPACK_IMPORTED_MODULE_0__["default"].DOM;
const trimPx = (value)=>value.replace(/px$/, '');
const getEphoxEmbedData = (node)=>{
    const style = node.attr('style');
    const styles = style ? DOM.parseStyle(style) : {};
    return {
        type: 'ephox-embed-iri',
        source: node.attr('data-ephox-embed-iri'),
        altsource: '',
        poster: '',
        width: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.get(styles, 'max-width').map(trimPx).getOr(''),
        height: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.get(styles, 'max-height').map(trimPx).getOr('')
    };
};
const htmlToData = (html, schema)=>{
    let data = {};
    const parser = (0,tinymce_core_api_html_DomParser__WEBPACK_IMPORTED_MODULE_1__["default"])({
        validate: false,
        forced_root_block: false
    }, schema);
    const rootNode = parser.parse(html);
    for(let node = rootNode; node; node = node.walk()){
        if (node.type === 1) {
            const name = node.name;
            if (node.attr('data-ephox-embed-iri')) {
                data = getEphoxEmbedData(node);
                break;
            } else {
                if (!data.source && name === 'param') {
                    data.source = node.attr('movie');
                }
                if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {
                    if (!data.type) {
                        data.type = name;
                    }
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                    data = tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_2__["default"].extend(node.attributes.map, data);
                }
                if (name === 'source') {
                    if (!data.source) {
                        data.source = node.attr('src');
                    } else if (!data.altsource) {
                        data.altsource = node.attr('src');
                    }
                }
                if (name === 'img' && !data.poster) {
                    data.poster = node.attr('src');
                }
            }
        }
    }
    data.source = data.source || data.src || '';
    data.altsource = data.altsource || '';
    data.poster = data.poster || '';
    return data;
};



}),
"./src/plugins/media/main/ts/core/Mime.ts": 
/*!************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Mime.ts ***!
  \************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  guess: () => (guess)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");

const guess = (url)=>{
    const mimes = {
        mp3: 'audio/mpeg',
        m4a: 'audio/x-m4a',
        wav: 'audio/wav',
        mp4: 'video/mp4',
        webm: 'video/webm',
        ogg: 'video/ogg',
        swf: 'application/x-shockwave-flash'
    };
    const fileEnd = url.toLowerCase().split('.').pop() ?? '';
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.get(mimes, fileEnd).getOr('');
};



}),
"./src/plugins/media/main/ts/core/Nodes.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Nodes.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  createPlaceholderNode: () => (createPlaceholderNode),
  createPreviewNode: () => (createPreviewNode),
  placeHolderConverter: () => (placeHolderConverter)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var tinymce_core_api_Env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/Env */ "./lib/globals/tinymce/core/api/Env.js");
/* ESM import */var tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tinymce/core/api/html/Node */ "./lib/globals/tinymce/core/api/html/Node.js");
/* ESM import */var tinymce_core_api_html_Serializer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tinymce/core/api/html/Serializer */ "./lib/globals/tinymce/core/api/html/Serializer.js");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _Parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Parser */ "./src/plugins/media/main/ts/core/Parser.ts");






const isLiveEmbedNode = (node)=>{
    const name = node.name;
    return name === 'iframe' || name === 'video' || name === 'audio';
};
const getDimension = (node, styles, dimension, defaultValue = null)=>{
    const value = node.attr(dimension);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isNonNullable(value)) {
        return value;
    } else if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.has(styles, dimension)) {
        return defaultValue;
    } else {
        return null;
    }
};
const setDimensions = (node, previewNode, styles)=>{
    // Apply dimensions for video elements to maintain legacy behaviour
    const useDefaults = previewNode.name === 'img' || node.name === 'video';
    // Determine the defaults
    const defaultWidth = useDefaults ? '300' : null;
    const fallbackHeight = node.name === 'audio' ? '30' : '150';
    const defaultHeight = useDefaults ? fallbackHeight : null;
    previewNode.attr({
        width: getDimension(node, styles, 'width', defaultWidth),
        height: getDimension(node, styles, 'height', defaultHeight)
    });
};
const appendNodeContent = (editor, nodeName, previewNode, html)=>{
    const newNode = (0,_Parser__WEBPACK_IMPORTED_MODULE_4__.Parser)(editor.schema).parse(html, {
        context: nodeName
    });
    while(newNode.firstChild){
        previewNode.append(newNode.firstChild);
    }
};
const createPlaceholderNode = (editor, node)=>{
    const name = node.name;
    const placeHolder = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('img', 1);
    retainAttributesAndInnerHtml(editor, node, placeHolder);
    setDimensions(node, placeHolder, {});
    placeHolder.attr({
        'style': node.attr('style'),
        'src': tinymce_core_api_Env__WEBPACK_IMPORTED_MODULE_0__["default"].transparentSrc,
        'data-mce-object': name,
        'class': 'mce-object mce-object-' + name
    });
    return placeHolder;
};
const createPreviewNode = (editor, node)=>{
    const name = node.name;
    const previewWrapper = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('span', 1);
    previewWrapper.attr({
        'contentEditable': 'false',
        'style': node.attr('style'),
        'data-mce-object': name,
        'class': 'mce-preview-object mce-object-' + name
    });
    retainAttributesAndInnerHtml(editor, node, previewWrapper);
    const styles = editor.dom.parseStyle(node.attr('style') ?? '');
    const previewNode = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"](name, 1);
    setDimensions(node, previewNode, styles);
    previewNode.attr({
        src: node.attr('src'),
        style: node.attr('style'),
        class: node.attr('class')
    });
    if (name === 'iframe') {
        previewNode.attr({
            allowfullscreen: node.attr('allowfullscreen'),
            frameborder: '0',
            sandbox: node.attr('sandbox'),
            referrerpolicy: node.attr('referrerpolicy')
        });
    } else {
        // Exclude autoplay as we don't want video/audio to play by default
        const attrs = [
            'controls',
            'crossorigin',
            'currentTime',
            'loop',
            'muted',
            'poster',
            'preload'
        ];
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.each(attrs, (attrName)=>{
            previewNode.attr(attrName, node.attr(attrName));
        });
        // Recreate the child nodes using the sanitized inner HTML
        const sanitizedHtml = previewWrapper.attr('data-mce-html');
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isNonNullable(sanitizedHtml)) {
            appendNodeContent(editor, name, previewNode, unescape(sanitizedHtml));
        }
    }
    const shimNode = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('span', 1);
    shimNode.attr('class', 'mce-shim');
    previewWrapper.append(previewNode);
    previewWrapper.append(shimNode);
    return previewWrapper;
};
const retainAttributesAndInnerHtml = (editor, sourceNode, targetNode)=>{
    // Prefix all attributes except internal (data-mce-*), width, height and style since we
    // will add these to the placeholder
    const attribs = sourceNode.attributes ?? [];
    let ai = attribs.length;
    while(ai--){
        const attrName = attribs[ai].name;
        let attrValue = attribs[ai].value;
        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style' && !_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.startsWith(attrName, 'data-mce-')) {
            if (attrName === 'data' || attrName === 'src') {
                attrValue = editor.convertURL(attrValue, attrName);
            }
            targetNode.attr('data-mce-p-' + attrName, attrValue);
        }
    }
    // Place the inner HTML contents inside an escaped attribute
    // This enables us to copy/paste the fake object
    const serializer = (0,tinymce_core_api_html_Serializer__WEBPACK_IMPORTED_MODULE_2__["default"])({
        inner: true
    }, editor.schema);
    const tempNode = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('div', 1);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.each(sourceNode.children(), (child)=>tempNode.append(child));
    const innerHtml = serializer.serialize(tempNode);
    if (innerHtml) {
        targetNode.attr('data-mce-html', escape(innerHtml));
        targetNode.empty();
    }
};
const isPageEmbedWrapper = (node)=>{
    const nodeClass = node.attr('class');
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isString(nodeClass) && /\btiny-pageembed\b/.test(nodeClass);
};
const isWithinEmbedWrapper = (node)=>{
    let tempNode = node;
    while(tempNode = tempNode.parent){
        if (tempNode.attr('data-ephox-embed-iri') || isPageEmbedWrapper(tempNode)) {
            return true;
        }
    }
    return false;
};
const placeHolderConverter = (editor)=>(nodes)=>{
        let i = nodes.length;
        let node;
        while(i--){
            node = nodes[i];
            if (!node.parent) {
                continue;
            }
            if (node.parent.attr('data-mce-object')) {
                continue;
            }
            if (isLiveEmbedNode(node) && _api_Options__WEBPACK_IMPORTED_MODULE_3__.hasLiveEmbeds(editor)) {
                if (!isWithinEmbedWrapper(node)) {
                    node.replace(createPreviewNode(editor, node));
                }
            } else {
                if (!isWithinEmbedWrapper(node)) {
                    node.replace(createPlaceholderNode(editor, node));
                }
            }
        }
    };



}),
"./src/plugins/media/main/ts/core/Parser.ts": 
/*!**************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Parser.ts ***!
  \**************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Parser: () => (Parser)
});
/* ESM import */var tinymce_core_api_html_DomParser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/html/DomParser */ "./lib/globals/tinymce/core/api/html/DomParser.js");

const Parser = (schema, settings = {})=>(0,tinymce_core_api_html_DomParser__WEBPACK_IMPORTED_MODULE_0__["default"])({
        forced_root_block: false,
        validate: false,
        allow_conditional_comments: true,
        ...settings
    }, schema);


}),
"./src/plugins/media/main/ts/core/ResolveName.ts": 
/*!*******************************************************!*\
  !*** ./src/plugins/media/main/ts/core/ResolveName.ts ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  setup: () => (setup)
});
const setup = (editor)=>{
    editor.on('ResolveName', (e)=>{
        let name;
        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {
            e.name = name;
        }
    });
};



}),
"./src/plugins/media/main/ts/core/Sanitize.ts": 
/*!****************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Sanitize.ts ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  parseAndSanitize: () => (parseAndSanitize)
});
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _Parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Parser */ "./src/plugins/media/main/ts/core/Parser.ts");


const parseAndSanitize = (editor, context, html)=>{
    const getEditorOption = editor.options.get;
    const sanitize = getEditorOption('xss_sanitization');
    const validate = _api_Options__WEBPACK_IMPORTED_MODULE_0__.shouldFilterHtml(editor);
    return (0,_Parser__WEBPACK_IMPORTED_MODULE_1__.Parser)(editor.schema, {
        sanitize,
        validate
    }).parse(html, {
        context
    });
};



}),
"./src/plugins/media/main/ts/core/Selection.ts": 
/*!*****************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Selection.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isMediaElement: () => (isMediaElement),
  setup: () => (setup)
});
/* ESM import */var _UpdateHtml__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UpdateHtml */ "./src/plugins/media/main/ts/core/UpdateHtml.ts");

const isMediaElement = (element)=>element.hasAttribute('data-mce-object') || element.hasAttribute('data-ephox-embed-iri');
const setup = (editor)=>{
    // TINY-10774: On Safari all events bubble out even if you click on the video play button on other browsers the video element doesn't bubble the event
    editor.on('mousedown', (e)=>{
        const previewObj = editor.dom.getParent(e.target, '.mce-preview-object');
        if (previewObj && editor.dom.getAttrib(previewObj, 'data-mce-selected') === '2') {
            e.stopImmediatePropagation();
        }
    });
    editor.on('click keyup touchend', ()=>{
        const selectedNode = editor.selection.getNode();
        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {
            if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {
                selectedNode.setAttribute('data-mce-selected', '2');
            }
        }
    });
    editor.on('ObjectResized', (e)=>{
        const target = e.target;
        if (target.getAttribute('data-mce-object')) {
            let html = target.getAttribute('data-mce-html');
            if (html) {
                html = unescape(html);
                target.setAttribute('data-mce-html', escape(_UpdateHtml__WEBPACK_IMPORTED_MODULE_0__.updateHtml(html, {
                    width: String(e.width),
                    height: String(e.height)
                }, false, editor.schema)));
            }
        }
    });
};



}),
"./src/plugins/media/main/ts/core/Service.ts": 
/*!***************************************************!*\
  !*** ./src/plugins/media/main/ts/core/Service.ts ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getEmbedHtml: () => (getEmbedHtml),
  isCached: () => (isCached)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _DataToHtml__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataToHtml */ "./src/plugins/media/main/ts/core/DataToHtml.ts");



const cache = {};
const embedPromise = (data, dataToHtml, handler)=>{
    return new Promise((res, rej)=>{
        const wrappedResolve = (response)=>{
            if (response.html) {
                cache[data.source] = response;
            }
            return res({
                url: data.source,
                html: response.html ? response.html : dataToHtml(data)
            });
        };
        if (cache[data.source]) {
            wrappedResolve(cache[data.source]);
        } else {
            handler({
                url: data.source
            }).then(wrappedResolve).catch(rej);
        }
    });
};
const defaultPromise = (data, dataToHtml)=>Promise.resolve({
        html: dataToHtml(data),
        url: data.source
    });
const loadedData = (editor)=>(data)=>_DataToHtml__WEBPACK_IMPORTED_MODULE_1__.dataToHtml(editor, data);
const getEmbedHtml = (editor, data)=>{
    const embedHandler = _api_Options__WEBPACK_IMPORTED_MODULE_0__.getUrlResolver(editor);
    return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));
};
const isCached = (url)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.has(cache, url);



}),
"./src/plugins/media/main/ts/core/UpdateHtml.ts": 
/*!******************************************************!*\
  !*** ./src/plugins/media/main/ts/core/UpdateHtml.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  updateHtml: () => (updateHtml)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var tinymce_core_api_dom_DOMUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/dom/DOMUtils */ "./lib/globals/tinymce/core/api/dom/DOMUtils.js");
/* ESM import */var tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tinymce/core/api/html/Node */ "./lib/globals/tinymce/core/api/html/Node.js");
/* ESM import */var tinymce_core_api_html_Serializer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tinymce/core/api/html/Serializer */ "./lib/globals/tinymce/core/api/html/Serializer.js");
/* ESM import */var _Parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Parser */ "./src/plugins/media/main/ts/core/Parser.ts");





const DOM = tinymce_core_api_dom_DOMUtils__WEBPACK_IMPORTED_MODULE_0__["default"].DOM;
const addPx = (value)=>/^[0-9.]+$/.test(value) ? value + 'px' : value;
const updateEphoxEmbed = (data, node)=>{
    const style = node.attr('style');
    const styleMap = style ? DOM.parseStyle(style) : {};
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.isNonNullable(data.width)) {
        styleMap['max-width'] = addPx(data.width);
    }
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.isNonNullable(data.height)) {
        styleMap['max-height'] = addPx(data.height);
    }
    node.attr('style', DOM.serializeStyle(styleMap));
};
const sources = [
    'source',
    'altsource'
];
const updateHtml = (html, data, updateAll, schema)=>{
    let numSources = 0;
    let sourceCount = 0;
    const parser = (0,_Parser__WEBPACK_IMPORTED_MODULE_3__.Parser)(schema);
    parser.addNodeFilter('source', (nodes)=>numSources = nodes.length);
    const rootNode = parser.parse(html);
    for(let node = rootNode; node; node = node.walk()){
        if (node.type === 1) {
            const name = node.name;
            if (node.attr('data-ephox-embed-iri')) {
                updateEphoxEmbed(data, node);
                break;
            } else {
                switch(name){
                    case 'video':
                    case 'object':
                    case 'embed':
                    case 'img':
                    case 'iframe':
                        if (data.height !== undefined && data.width !== undefined) {
                            node.attr('width', data.width);
                            node.attr('height', data.height);
                        }
                        break;
                }
                if (updateAll) {
                    switch(name){
                        case 'video':
                            node.attr('poster', data.poster);
                            node.attr('src', null);
                            // Add <source> child elements
                            for(let index = numSources; index < 2; index++){
                                if (data[sources[index]]) {
                                    const source = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('source', 1);
                                    source.attr('src', data[sources[index]]);
                                    source.attr('type', data[sources[index] + 'mime'] || null);
                                    node.append(source);
                                }
                            }
                            break;
                        case 'iframe':
                            node.attr('src', data.source);
                            break;
                        case 'object':
                            const hasImage = node.getAll('img').length > 0;
                            if (data.poster && !hasImage) {
                                node.attr('src', data.poster);
                                const img = new tinymce_core_api_html_Node__WEBPACK_IMPORTED_MODULE_1__["default"]('img', 1);
                                img.attr('src', data.poster);
                                img.attr('width', data.width);
                                img.attr('height', data.height);
                                node.append(img);
                            }
                            break;
                        case 'source':
                            if (sourceCount < 2) {
                                node.attr('src', data[sources[sourceCount]]);
                                node.attr('type', data[sources[sourceCount] + 'mime'] || null);
                                if (!data[sources[sourceCount]]) {
                                    node.remove();
                                    continue;
                                }
                            }
                            sourceCount++;
                            break;
                        case 'img':
                            if (!data.poster) {
                                node.remove();
                            }
                            break;
                    }
                }
            }
        }
    }
    return (0,tinymce_core_api_html_Serializer__WEBPACK_IMPORTED_MODULE_2__["default"])({}, schema).serialize(rootNode);
};



}),
"./src/plugins/media/main/ts/core/UrlPatterns.ts": 
/*!*******************************************************!*\
  !*** ./src/plugins/media/main/ts/core/UrlPatterns.ts ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  matchPattern: () => (matchPattern)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/util/Tools */ "./lib/globals/tinymce/core/api/util/Tools.js");


const urlPatterns = [
    {
        regex: /youtu\.be\/([\w\-_\?&=.]+)/i,
        type: 'iframe',
        w: 560,
        h: 314,
        url: 'www.youtube.com/embed/$1',
        allowFullscreen: true
    },
    {
        regex: /youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,
        type: 'iframe',
        w: 560,
        h: 314,
        url: 'www.youtube.com/embed/$2?$4',
        allowFullscreen: true
    },
    {
        regex: /youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,
        type: 'iframe',
        w: 560,
        h: 314,
        url: 'www.youtube.com/embed/$1',
        allowFullscreen: true
    },
    {
        regex: /vimeo\.com\/([0-9]+)\?h=(\w+)/,
        type: 'iframe',
        w: 425,
        h: 350,
        url: 'player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc',
        allowFullscreen: true
    },
    {
        regex: /vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,
        type: 'iframe',
        w: 425,
        h: 350,
        url: 'player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0',
        allowFullscreen: true
    },
    {
        regex: /vimeo\.com\/([0-9]+)/,
        type: 'iframe',
        w: 425,
        h: 350,
        url: 'player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',
        allowFullscreen: true
    },
    {
        regex: /vimeo\.com\/(.*)\/([0-9]+)/,
        type: 'iframe',
        w: 425,
        h: 350,
        url: 'player.vimeo.com/video/$2?title=0&amp;byline=0',
        allowFullscreen: true
    },
    {
        regex: /maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,
        type: 'iframe',
        w: 425,
        h: 350,
        url: 'maps.google.com/maps/ms?msid=$2&output=embed"',
        allowFullscreen: false
    },
    {
        regex: /dailymotion\.com\/video\/([^_]+)/,
        type: 'iframe',
        w: 480,
        h: 270,
        url: 'www.dailymotion.com/embed/video/$1',
        allowFullscreen: true
    },
    {
        regex: /dai\.ly\/([^_]+)/,
        type: 'iframe',
        w: 480,
        h: 270,
        url: 'www.dailymotion.com/embed/video/$1',
        allowFullscreen: true
    }
];
const getProtocol = (url)=>{
    const protocolMatches = url.match(/^(https?:\/\/|www\.)(.+)$/i);
    if (protocolMatches && protocolMatches.length > 1) {
        return protocolMatches[1] === 'www.' ? 'https://' : protocolMatches[1];
    } else {
        return 'https://';
    }
};
const getUrl = (pattern, url)=>{
    const protocol = getProtocol(url);
    const match = pattern.regex.exec(url);
    let newUrl = protocol + pattern.url;
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(match)) {
        for(let i = 0; i < match.length; i++){
            newUrl = newUrl.replace('$' + i, ()=>match[i] ? match[i] : '');
        }
    }
    return newUrl.replace(/\?$/, '');
};
const matchPattern = (url)=>{
    const patterns = urlPatterns.filter((pattern)=>pattern.regex.test(url));
    if (patterns.length > 0) {
        return tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].extend({}, patterns[0], {
            url: getUrl(patterns[0], url)
        });
    } else {
        return null;
    }
};



}),
"./src/plugins/media/main/ts/ui/Buttons.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/media/main/ts/ui/Buttons.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  register: () => (register)
});
/* ESM import */var _core_Selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Selection */ "./src/plugins/media/main/ts/core/Selection.ts");

const onSetupEditable = (editor)=>(api)=>{
        const nodeChanged = ()=>{
            api.setEnabled(editor.selection.isEditable());
        };
        editor.on('NodeChange', nodeChanged);
        nodeChanged();
        return ()=>{
            editor.off('NodeChange', nodeChanged);
        };
    };
const register = (editor)=>{
    const onAction = ()=>editor.execCommand('mceMedia');
    editor.ui.registry.addToggleButton('media', {
        tooltip: 'Insert/edit media',
        icon: 'embed',
        onAction,
        onSetup: (buttonApi)=>{
            const selection = editor.selection;
            buttonApi.setActive((0,_core_Selection__WEBPACK_IMPORTED_MODULE_0__.isMediaElement)(selection.getNode()));
            const unbindSelectorChanged = selection.selectorChangedWithUnbind('img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]', buttonApi.setActive).unbind;
            const unbindEditable = onSetupEditable(editor)(buttonApi);
            return ()=>{
                unbindSelectorChanged();
                unbindEditable();
            };
        }
    });
    editor.ui.registry.addMenuItem('media', {
        icon: 'embed',
        text: 'Media...',
        onAction,
        onSetup: onSetupEditable(editor)
    });
};



}),
"./src/plugins/media/main/ts/ui/Dialog.ts": 
/*!************************************************!*\
  !*** ./src/plugins/media/main/ts/ui/Dialog.ts ***!
  \************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  showDialog: () => (showDialog),
  unwrap: () => (unwrap)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Cell.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/media/main/ts/api/Options.ts");
/* ESM import */var _core_DataToHtml__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/DataToHtml */ "./src/plugins/media/main/ts/core/DataToHtml.ts");
/* ESM import */var _core_HtmlToData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/HtmlToData */ "./src/plugins/media/main/ts/core/HtmlToData.ts");
/* ESM import */var _core_Selection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Selection */ "./src/plugins/media/main/ts/core/Selection.ts");
/* ESM import */var _core_Service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Service */ "./src/plugins/media/main/ts/core/Service.ts");
/* ESM import */var _core_UpdateHtml__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/UpdateHtml */ "./src/plugins/media/main/ts/core/UpdateHtml.ts");
/* ESM import */var _core_UrlPatterns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/UrlPatterns */ "./src/plugins/media/main/ts/core/UrlPatterns.ts");








const extractMeta = (sourceInput, data)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, sourceInput).bind((mainData)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(mainData, 'meta'));
const getValue = (data, metaData, sourceInput)=>(prop)=>{
        // Cases:
        // 1. Get the nested value prop (component is the executed urlinput)
        // 2. Get from metadata (a urlinput was executed but urlinput != this component)
        // 3. Not a urlinput so just get string
        // If prop === sourceInput do 1, 2 then 3, else do 2 then 1 or 3
        // ASSUMPTION: we only want to get values for props that already exist in data
        const getFromData = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, prop);
        const getFromMetaData = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(metaData, prop);
        const getNonEmptyValue = (c)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(c, 'value').bind((v)=>v.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.some(v) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.none());
        const getFromValueFirst = ()=>getFromData().bind((child)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isObject(child) ? getNonEmptyValue(child).orThunk(getFromMetaData) : getFromMetaData().orThunk(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.from(child)));
        const getFromMetaFirst = ()=>getFromMetaData().orThunk(()=>getFromData().bind((child)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isObject(child) ? getNonEmptyValue(child) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.from(child)));
        return {
            [prop]: (prop === sourceInput ? getFromValueFirst() : getFromMetaFirst()).getOr('')
        };
    };
const getDimensions = (data, metaData)=>{
    const dimensions = {};
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, 'dimensions').each((dims)=>{
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each([
            'width',
            'height'
        ], (prop)=>{
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(metaData, prop).orThunk(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(dims, prop)).each((value)=>dimensions[prop] = value);
        });
    });
    return dimensions;
};
const unwrap = (data, sourceInput)=>{
    const metaData = sourceInput && sourceInput !== 'dimensions' ? extractMeta(sourceInput, data).getOr({}) : {};
    const get = getValue(data, metaData, sourceInput);
    return {
        ...get('source'),
        ...get('altsource'),
        ...get('poster'),
        ...get('embed'),
        ...getDimensions(data, metaData)
    };
};
const wrap = (data)=>{
    const wrapped = {
        ...data,
        source: {
            value: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, 'source').getOr('')
        },
        altsource: {
            value: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, 'altsource').getOr('')
        },
        poster: {
            value: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, 'poster').getOr('')
        }
    };
    // Add additional size values that may or may not have been in the html
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each([
        'width',
        'height'
    ], (prop)=>{
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.get(data, prop).each((value)=>{
            const dimensions = wrapped.dimensions || {};
            dimensions[prop] = value;
            wrapped.dimensions = dimensions;
        });
    });
    return wrapped;
};
const handleError = (editor)=>(error)=>{
        const errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';
        editor.notificationManager.open({
            type: 'error',
            text: errorMessage
        });
    };
const getEditorData = (editor)=>{
    const element = editor.selection.getNode();
    const snippet = (0,_core_Selection__WEBPACK_IMPORTED_MODULE_3__.isMediaElement)(element) ? editor.serializer.serialize(element, {
        selection: true
    }) : '';
    const data = _core_HtmlToData__WEBPACK_IMPORTED_MODULE_2__.htmlToData(snippet, editor.schema);
    const getDimensionsOfElement = ()=>{
        if (isEmbedIframe(data.source, data.type)) {
            const rect = editor.dom.getRect(element);
            return {
                width: rect.w.toString().replace(/px$/, ''),
                height: rect.h.toString().replace(/px$/, '')
            };
        } else {
            return {};
        }
    };
    const dimensions = getDimensionsOfElement();
    return {
        embed: snippet,
        ...data,
        ...dimensions
    };
};
const addEmbedHtml = (api, editor)=>(response)=>{
        // Only set values if a URL has been defined
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isString(response.url) && response.url.trim().length > 0) {
            const html = response.html;
            const snippetData = _core_HtmlToData__WEBPACK_IMPORTED_MODULE_2__.htmlToData(html, editor.schema);
            const nuData = {
                ...snippetData,
                source: response.url,
                embed: html
            };
            api.setData(wrap(nuData));
        }
    };
const selectPlaceholder = (editor, beforeObjects)=>{
    const afterObjects = editor.dom.select('*[data-mce-object]');
    // Find new image placeholder so we can select it
    for(let i = 0; i < beforeObjects.length; i++){
        for(let y = afterObjects.length - 1; y >= 0; y--){
            if (beforeObjects[i] === afterObjects[y]) {
                afterObjects.splice(y, 1);
            }
        }
    }
    editor.selection.select(afterObjects[0]);
};
const handleInsert = (editor, html)=>{
    const beforeObjects = editor.dom.select('*[data-mce-object]');
    editor.insertContent(html);
    selectPlaceholder(editor, beforeObjects);
    editor.nodeChanged();
};
const isEmbedIframe = (url, mediaDataType)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isNonNullable(mediaDataType) && mediaDataType === 'ephox-embed-iri' && _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isNonNullable(_core_UrlPatterns__WEBPACK_IMPORTED_MODULE_6__.matchPattern(url));
const shouldInsertAsNewIframe = (prevData, newData)=>{
    const hasDimensionsChanged = (prevData, newData)=>prevData.width !== newData.width || prevData.height !== newData.height;
    return hasDimensionsChanged(prevData, newData) && isEmbedIframe(newData.source, prevData.type);
};
const submitForm = (prevData, newData, editor)=>{
    newData.embed = shouldInsertAsNewIframe(prevData, newData) && _api_Options__WEBPACK_IMPORTED_MODULE_0__.hasDimensions(editor) ? (0,_core_DataToHtml__WEBPACK_IMPORTED_MODULE_1__.dataToHtml)(editor, {
        ...newData,
        embed: ''
    }) : _core_UpdateHtml__WEBPACK_IMPORTED_MODULE_5__.updateHtml(newData.embed ?? '', newData, false, editor.schema);
    // Only fetch the embed HTML content if the URL has changed from what it previously was
    if (newData.embed && (prevData.source === newData.source || _core_Service__WEBPACK_IMPORTED_MODULE_4__.isCached(newData.source))) {
        handleInsert(editor, newData.embed);
    } else {
        _core_Service__WEBPACK_IMPORTED_MODULE_4__.getEmbedHtml(editor, newData).then((response)=>{
            handleInsert(editor, response.html);
        }).catch(handleError(editor));
    }
};
const showDialog = (editor)=>{
    const editorData = getEditorData(editor);
    const currentData = (0,_ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.Cell)(editorData);
    const initialData = wrap(editorData);
    const handleSource = (prevData, api)=>{
        const serviceData = unwrap(api.getData(), 'source');
        // If a new URL is entered, then clear the embed html and fetch the new data
        if (prevData.source !== serviceData.source) {
            addEmbedHtml(win, editor)({
                url: serviceData.source,
                html: ''
            });
            _core_Service__WEBPACK_IMPORTED_MODULE_4__.getEmbedHtml(editor, serviceData).then(addEmbedHtml(win, editor)).catch(handleError(editor));
        }
    };
    const handleEmbed = (api)=>{
        const data = unwrap(api.getData());
        const dataFromEmbed = _core_HtmlToData__WEBPACK_IMPORTED_MODULE_2__.htmlToData(data.embed ?? '', editor.schema);
        api.setData(wrap(dataFromEmbed));
    };
    const handleUpdate = (api, sourceInput, prevData)=>{
        const dialogData = unwrap(api.getData(), sourceInput);
        const data = shouldInsertAsNewIframe(prevData, dialogData) && _api_Options__WEBPACK_IMPORTED_MODULE_0__.hasDimensions(editor) ? {
            ...dialogData,
            embed: ''
        } : dialogData;
        const embed = (0,_core_DataToHtml__WEBPACK_IMPORTED_MODULE_1__.dataToHtml)(editor, data);
        api.setData(wrap({
            ...data,
            embed
        }));
    };
    const mediaInput = [
        {
            name: 'source',
            type: 'urlinput',
            filetype: 'media',
            label: 'Source',
            picker_text: 'Browse files'
        }
    ];
    const sizeInput = !_api_Options__WEBPACK_IMPORTED_MODULE_0__.hasDimensions(editor) ? [] : [
        {
            type: 'sizeinput',
            name: 'dimensions',
            label: 'Constrain proportions',
            constrain: true
        }
    ];
    const generalTab = {
        title: 'General',
        name: 'general',
        items: _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.flatten([
            mediaInput,
            sizeInput
        ])
    };
    const embedTextarea = {
        type: 'textarea',
        name: 'embed',
        label: 'Paste your embed code below:'
    };
    const embedTab = {
        title: 'Embed',
        items: [
            embedTextarea
        ]
    };
    const advancedFormItems = [];
    if (_api_Options__WEBPACK_IMPORTED_MODULE_0__.hasAltSource(editor)) {
        advancedFormItems.push({
            name: 'altsource',
            type: 'urlinput',
            filetype: 'media',
            label: 'Alternative source URL'
        });
    }
    if (_api_Options__WEBPACK_IMPORTED_MODULE_0__.hasPoster(editor)) {
        advancedFormItems.push({
            name: 'poster',
            type: 'urlinput',
            filetype: 'image',
            label: 'Media poster (Image URL)'
        });
    }
    const advancedTab = {
        title: 'Advanced',
        name: 'advanced',
        items: advancedFormItems
    };
    const tabs = [
        generalTab,
        embedTab
    ];
    if (advancedFormItems.length > 0) {
        tabs.push(advancedTab);
    }
    const body = {
        type: 'tabpanel',
        tabs
    };
    const win = editor.windowManager.open({
        title: 'Insert/Edit Media',
        size: 'normal',
        body,
        buttons: [
            {
                type: 'cancel',
                name: 'cancel',
                text: 'Cancel'
            },
            {
                type: 'submit',
                name: 'save',
                text: 'Save',
                primary: true
            }
        ],
        onSubmit: (api)=>{
            const serviceData = unwrap(api.getData());
            submitForm(currentData.get(), serviceData, editor);
            api.close();
        },
        onChange: (api, detail)=>{
            switch(detail.name){
                case 'source':
                    handleSource(currentData.get(), api);
                    break;
                case 'embed':
                    handleEmbed(api);
                    break;
                case 'dimensions':
                case 'altsource':
                case 'poster':
                    handleUpdate(api, detail.name, currentData.get());
                    break;
                default:
                    break;
            }
            currentData.set(unwrap(api.getData()));
        },
        initialData
    });
};



}),
"../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js": 
/*!***************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js ***!
  \***************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  contramap: () => (contramap),
  eq: () => (eq),
  eqAny: () => (eqAny),
  eqArray: () => (eqArray),
  eqBoolean: () => (eqBoolean),
  eqNull: () => (eqNull),
  eqNumber: () => (eqNumber),
  eqRecord: () => (eqRecord),
  eqString: () => (eqString),
  eqUndefined: () => (eqUndefined),
  tripleEq: () => (tripleEq)
});
/* ESM import */var _core_Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Type */ "../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js");
/* ESM import */var _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ArrayUtil */ "../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js");


var contramap = function (eqa, f) {
    return eq(function (x, y) { return eqa.eq(f(x), f(y)); });
};
var eq = function (f) {
    return ({ eq: f });
};
var tripleEq = eq(function (x, y) { return x === y; });
var eqString = tripleEq;
var eqBoolean = tripleEq;
var eqNumber = tripleEq;
var eqUndefined = tripleEq;
var eqNull = tripleEq;
var eqArray = function (eqa) { return eq(function (x, y) {
    if (x.length !== y.length) {
        return false;
    }
    var len = x.length;
    for (var i = 0; i < len; i++) {
        if (!eqa.eq(x[i], y[i])) {
            return false;
        }
    }
    return true;
}); };
// TODO: Make an Ord typeclass
var eqSortedArray = function (eqa, compareFn) {
    return contramap(eqArray(eqa), function (xs) { return _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__.sort(xs, compareFn); });
};
var eqRecord = function (eqa) { return eq(function (x, y) {
    var kx = Object.keys(x);
    var ky = Object.keys(y);
    if (!eqSortedArray(eqString).eq(kx, ky)) {
        return false;
    }
    var len = kx.length;
    for (var i = 0; i < len; i++) {
        var q = kx[i];
        if (!eqa.eq(x[q], y[q])) {
            return false;
        }
    }
    return true;
}); };
var eqAny = eq(function (x, y) {
    if (x === y) {
        return true;
    }
    var tx = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(x);
    var ty = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(y);
    if (tx !== ty) {
        return false;
    }
    if (_core_Type__WEBPACK_IMPORTED_MODULE_1__.isEquatableType(tx)) {
        return x === y;
    }
    else if (tx === 'array') {
        return eqArray(eqAny).eq(x, y);
    }
    else if (tx === 'object') {
        return eqRecord(eqAny).eq(x, y);
    }
    return false;
});


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js": 
/*!***********************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js ***!
  \***********************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  map: () => (map),
  mapDelimit: () => (mapDelimit),
  sort: () => (sort)
});
var map = function (xs, f) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len; i++) {
        var x = xs[i];
        r[i] = f(x);
    }
    return r;
};
/** map a function over an array, then map another function over every item except the last */
var mapDelimit = function (xs, f, delimit) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len - 1; i++) {
        var x = xs[i];
        r[i] = delimit(f(x));
    }
    if (len > 0) {
        r[len - 1] = (f(xs[len - 1]));
    }
    return r;
};
var sort = function (xs, compareFn) {
    var clone = Array.prototype.slice.call(xs);
    return clone.sort(compareFn);
};


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js": 
/*!******************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js ***!
  \******************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isArray: () => (isArray),
  isBoolean: () => (isBoolean),
  isEquatableType: () => (isEquatableType),
  isFunction: () => (isFunction),
  isNull: () => (isNull),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isString: () => (isString),
  isUndefined: () => (isUndefined),
  typeOf: () => (typeOf)
});
var typeOf = function (x) {
    if (x === null) {
        return 'null';
    }
    if (x === undefined) {
        return 'undefined';
    }
    var t = typeof x;
    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {
        return 'array';
    }
    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {
        return 'string';
    }
    return t;
};
var isType = function (type) { return function (value) { return typeOf(value) === type; }; };
var isString = isType('string');
var isObject = isType('object');
var isArray = isType('array');
var isNull = isType('null');
var isBoolean = isType('boolean');
var isUndefined = isType('undefined');
var isFunction = isType('function');
var isNumber = isType('number');
var isEquatableType = function (x) {
    return ['undefined', 'boolean', 'number', 'string', 'function', 'xml', 'null'].indexOf(x) !== -1;
};


}),

});
/************************************************************************/
// The module cache
var __webpack_module_cache__ = {};

// The require function
function __webpack_require__(moduleId) {

// Check if module is in cache
var cachedModule = __webpack_module_cache__[moduleId];
if (cachedModule !== undefined) {
return cachedModule.exports;
}
// Create a new module (and put it into the cache)
var module = (__webpack_module_cache__[moduleId] = {
exports: {}
});
// Execute the module function
__webpack_modules__[moduleId](module, module.exports, __webpack_require__);

// Return the exports of the module
return module.exports;

}

/************************************************************************/
// webpack/runtime/define_property_getters
(() => {
__webpack_require__.d = (exports, definition) => {
	for(var key in definition) {
        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
        }
    }
};
})();
// webpack/runtime/has_own_property
(() => {
__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
})();
// webpack/runtime/make_namespace_object
(() => {
// define __esModule on exports
__webpack_require__.r = (exports) => {
	if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
		Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
	}
	Object.defineProperty(exports, '__esModule', { value: true });
};
})();
// webpack/runtime/rspack_version
(() => {
__webpack_require__.rv = () => ("1.5.2")
})();
// webpack/runtime/rspack_unique_id
(() => {
__webpack_require__.ruid = "bundler=rspack@1.5.2";

})();
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {

/*!*******************************************!*\
  !*** ./src/plugins/media/main/ts/Main.ts ***!
  \*******************************************/
__webpack_require__.r(__webpack_exports__);
/* ESM import */var _Plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Plugin */ "./src/plugins/media/main/ts/Plugin.ts");

(0,_Plugin__WEBPACK_IMPORTED_MODULE_0__["default"])(); /** *****
 * DO NOT EXPORT ANYTHING
 *
 * IF YOU DO ROLLUP WILL LEAVE A GLOBAL ON THE PAGE
 *******/ 

})();

})()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvdGlueW1jZS9wbHVnaW5zL21lZGlhL3BsdWdpbi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL3RpbnltY2UvLi9saWIvZ2xvYmFscy90aW55bWNlL2NvcmUvYXBpL0Vudi5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4vbGliL2dsb2JhbHMvdGlueW1jZS9jb3JlL2FwaS9QbHVnaW5NYW5hZ2VyLmpzIiwid2VicGFjazovL3RpbnltY2UvLi9saWIvZ2xvYmFscy90aW55bWNlL2NvcmUvYXBpL2RvbS9ET01VdGlscy5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4vbGliL2dsb2JhbHMvdGlueW1jZS9jb3JlL2FwaS9odG1sL0RvbVBhcnNlci5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4vbGliL2dsb2JhbHMvdGlueW1jZS9jb3JlL2FwaS9odG1sL05vZGUuanMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL2xpYi9nbG9iYWxzL3RpbnltY2UvY29yZS9hcGkvaHRtbC9TZXJpYWxpemVyLmpzIiwid2VicGFjazovL3RpbnltY2UvLi9saWIvZ2xvYmFscy90aW55bWNlL2NvcmUvYXBpL3V0aWwvVG9vbHMuanMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvQXJyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL0NlbGwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvRnVuLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL09iai50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9PcHRpb25hbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9TdHJpbmdzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1R5cGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9zdHIvU3RyQXBwZW5kLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL1BsdWdpbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9hcGkvQXBpLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL2FwaS9Db21tYW5kcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9hcGkvT3B0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9jb3JlL0RhdGFUb0h0bWwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL21lZGlhL21haW4vdHMvY29yZS9GaWx0ZXJDb250ZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL2NvcmUvSHRtbFRvRGF0YS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9jb3JlL01pbWUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL21lZGlhL21haW4vdHMvY29yZS9Ob2Rlcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9jb3JlL1BhcnNlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9jb3JlL1Jlc29sdmVOYW1lLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL2NvcmUvU2FuaXRpemUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL21lZGlhL21haW4vdHMvY29yZS9TZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL21lZGlhL21haW4vdHMvY29yZS9TZXJ2aWNlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL2NvcmUvVXBkYXRlSHRtbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9jb3JlL1VybFBhdHRlcm5zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy9tZWRpYS9tYWluL3RzL3VpL0J1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL21lZGlhL21haW4vdHMvdWkvRGlhbG9nLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vLi4vbm9kZV9tb2R1bGVzL0BlcGhveC9kaXNwdXRlL3NyYy9tYWluL3RzL2FwaS9FcS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uLy4uL25vZGVfbW9kdWxlcy9AZXBob3gvZGlzcHV0ZS9zcmMvbWFpbi90cy9jb3JlL0FycmF5VXRpbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uLy4uL25vZGVfbW9kdWxlcy9AZXBob3gvZGlzcHV0ZS9zcmMvbWFpbi90cy9jb3JlL1R5cGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lX3Byb3BlcnR5X2dldHRlcnMiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvaGFzX293bl9wcm9wZXJ0eSIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9tYWtlX25hbWVzcGFjZV9vYmplY3QiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvcnNwYWNrX3ZlcnNpb24iLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvcnNwYWNrX3VuaXF1ZV9pZCIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvbWVkaWEvbWFpbi90cy9NYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBnbG9iYWwgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgndGlueW1jZS5FbnYnKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBFbnYgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuUGx1Z2luTWFuYWdlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWw7XG5leHBvcnQgdmFyIFBsdWdpbk1hbmFnZXIgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuZG9tLkRPTVV0aWxzJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGdsb2JhbDtcbmV4cG9ydCB2YXIgRE9NVXRpbHMgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuaHRtbC5Eb21QYXJzZXInKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBEb21QYXJzZXIgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuaHRtbC5Ob2RlJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGdsb2JhbDtcbmV4cG9ydCB2YXIgTm9kZSA9IGdsb2JhbDtcbiIsInZhciBnbG9iYWwgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgndGlueW1jZS5odG1sLlNlcmlhbGl6ZXInKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBTZXJpYWxpemVyID0gZ2xvYmFsO1xuIiwidmFyIGdsb2JhbCA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCd0aW55bWNlLnV0aWwuVG9vbHMnKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBUb29scyA9IGdsb2JhbDtcbiIsImltcG9ydCB7IEVxIH0gZnJvbSAnQGVwaG94L2Rpc3B1dGUnO1xuXG5pbXBvcnQgKiBhcyBGdW4gZnJvbSAnLi9GdW4nO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxudHlwZSBBcnJheU1vcnBoaXNtPFQsIFU+ID0gKHg6IFQsIGk6IG51bWJlcikgPT4gVTtcbnR5cGUgQXJyYXlHdWFyZFByZWRpY2F0ZTxULCBVIGV4dGVuZHMgVD4gPSAoeDogVCwgaTogbnVtYmVyKSA9PiB4IGlzIFU7XG50eXBlIEFycmF5UHJlZGljYXRlPFQ+ID0gQXJyYXlNb3JwaGlzbTxULCBib29sZWFuPjtcbnR5cGUgQ29tcGFyYXRvcjxUPiA9IChhOiBULCBiOiBUKSA9PiBudW1iZXI7XG5cbmNvbnN0IG5hdGl2ZVNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuY29uc3QgbmF0aXZlSW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mO1xuY29uc3QgbmF0aXZlUHVzaCA9IEFycmF5LnByb3RvdHlwZS5wdXNoO1xuXG5jb25zdCByYXdJbmRleE9mID0gPFQ+ICh0czogQXJyYXlMaWtlPFQ+LCB0OiBUKTogbnVtYmVyID0+XG4gIG5hdGl2ZUluZGV4T2YuY2FsbCh0cywgdCk7XG5cbmV4cG9ydCBjb25zdCBpbmRleE9mID0gPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIHg6IFQpOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgLy8gVGhlIHJhd0luZGV4T2YgbWV0aG9kIGRvZXMgbm90IHdyYXAgdXAgaW4gYW4gb3B0aW9uLiBUaGlzIGlzIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICBjb25zdCByID0gcmF3SW5kZXhPZih4cywgeCk7XG4gIHJldHVybiByID09PSAtMSA/IE9wdGlvbmFsLm5vbmUoKSA6IE9wdGlvbmFsLnNvbWUocik7XG59O1xuXG5leHBvcnQgY29uc3QgY29udGFpbnMgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgeDogVCk6IGJvb2xlYW4gPT4gcmF3SW5kZXhPZih4cywgeCkgPiAtMTtcblxuZXhwb3J0IGNvbnN0IGV4aXN0cyA9IDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IGJvb2xlYW4gPT4ge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKHByZWQoeCwgaSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydCBjb25zdCByYW5nZSA9IDxUPihudW06IG51bWJlciwgZjogKGE6IG51bWJlcikgPT4gVCk6IFRbXSA9PiB7XG4gIGNvbnN0IHI6IFRbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bTsgaSsrKSB7XG4gICAgci5wdXNoKGYoaSkpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuLy8gSXQncyBhIHRvdGFsIG1pY3JvIG9wdGltaXNhdGlvbiwgYnV0IHRoZXNlIGRvIG1ha2Ugc29tZSBkaWZmZXJlbmNlLlxuLy8gUGFydGljdWxhcmx5IGZvciBicm93c2VycyBvdGhlciB0aGFuIENocm9tZS5cbi8vIC0gbGVuZ3RoIGNhY2hpbmdcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL2Jyb3dzZXItZGlldC1qcXVlcnktZWFjaC12cy1mb3ItbG9vcC82OVxuLy8gLSBub3QgdXNpbmcgcHVzaFxuLy8gaHR0cDovL2pzcGVyZi5jb20vYXJyYXktZGlyZWN0LWFzc2lnbm1lbnQtdnMtcHVzaC8yXG5cbmV4cG9ydCBjb25zdCBjaHVuayA9IDxUPihhcnJheTogQXJyYXlMaWtlPFQ+LCBzaXplOiBudW1iZXIpOiBUW11bXSA9PiB7XG4gIGNvbnN0IHI6IFRbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IHNpemUpIHtcbiAgICBjb25zdCBzOiBUW10gPSBuYXRpdmVTbGljZS5jYWxsKGFycmF5LCBpLCBpICsgc2l6ZSk7XG4gICAgci5wdXNoKHMpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IG1hcCA9IDxUID0gYW55LCBVID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBmOiBBcnJheU1vcnBoaXNtPFQsIFU+KTogVVtdID0+IHtcbiAgLy8gcHJlLWFsbG9jYXRpbmcgYXJyYXkgc2l6ZSB3aGVuIGl0J3MgZ3VhcmFudGVlZCB0byBiZSBrbm93blxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9wdXNoLWFsbG9jYXRlZC12cy1keW5hbWljLzIyXG4gIGNvbnN0IGxlbiA9IHhzLmxlbmd0aDtcbiAgY29uc3QgciA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIHJbaV0gPSBmKHgsIGkpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuLy8gVW53b3VuZCBpbXBsZW1lbnRpbmcgb3RoZXIgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGVhY2guXG4vLyBUaGUgY29kZSBzaXplIGlzIHJvdWdobHkgdGhlIHNhbWUsIGFuZCBpdCBzaG91bGQgYWxsb3cgZm9yIGJldHRlciBvcHRpbWlzYXRpb24uXG4vLyBjb25zdCBlYWNoID0gZnVuY3Rpb248VCwgVT4oeHM6IFRbXSwgZjogKHg6IFQsIGk/OiBudW1iZXIsIHhzPzogVFtdKSA9PiB2b2lkKTogdm9pZCB7XG5leHBvcnQgY29uc3QgZWFjaCA9IDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBmOiBBcnJheU1vcnBoaXNtPFQsIHZvaWQ+KTogdm9pZCA9PiB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBmKHgsIGkpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZWFjaHIgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgZjogQXJyYXlNb3JwaGlzbTxULCB2b2lkPik6IHZvaWQgPT4ge1xuICBmb3IgKGxldCBpID0geHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgZih4LCBpKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBhcnRpdGlvbiA9IDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IHsgcGFzczogVFtdOyBmYWlsOiBUW10gfSA9PiB7XG4gIGNvbnN0IHBhc3M6IFRbXSA9IFtdO1xuICBjb25zdCBmYWlsOiBUW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGNvbnN0IGFyciA9IHByZWQoeCwgaSkgPyBwYXNzIDogZmFpbDtcbiAgICBhcnIucHVzaCh4KTtcbiAgfVxuICByZXR1cm4geyBwYXNzLCBmYWlsIH07XG59O1xuXG5leHBvcnQgY29uc3QgZmlsdGVyOiB7XG4gIDxULCBVIGV4dGVuZHMgVD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlHdWFyZFByZWRpY2F0ZTxULCBVPik6IFVbXTtcbiAgPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogVFtdO1xufSA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IFRbXSA9PiB7XG4gIGNvbnN0IHI6IFRbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKHByZWQoeCwgaSkpIHtcbiAgICAgIHIucHVzaCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG4vKlxuICogR3JvdXBzIGFuIGFycmF5IGludG8gY29udGlndW91cyBhcnJheXMgb2YgbGlrZSBlbGVtZW50cy4gV2hldGhlciBhbiBlbGVtZW50IGlzIGxpa2Ugb3Igbm90IGRlcGVuZHMgb24gZi5cbiAqXG4gKiBmIGlzIGEgZnVuY3Rpb24gdGhhdCBkZXJpdmVzIGEgdmFsdWUgZnJvbSBhbiBlbGVtZW50IC0gZS5nLiB0cnVlIG9yIGZhbHNlLCBvciBhIHN0cmluZy5cbiAqIEVsZW1lbnRzIGFyZSBsaWtlIGlmIHRoaXMgZnVuY3Rpb24gZ2VuZXJhdGVzIHRoZSBzYW1lIHZhbHVlIGZvciB0aGVtIChhY2NvcmRpbmcgdG8gPT09KS5cbiAqXG4gKlxuICogT3JkZXIgb2YgdGhlIGVsZW1lbnRzIGlzIHByZXNlcnZlZC4gQXJyLmZsYXR0ZW4oKSBvbiB0aGUgcmVzdWx0IHdpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCBsaXN0LCBhcyB3aXRoIEhhc2tlbGwgZ3JvdXBCeSBmdW5jdGlvbi5cbiAqICBGb3IgYSBnb29kIGV4cGxhbmF0aW9uLCBzZWUgdGhlIGdyb3VwIGZ1bmN0aW9uICh3aGljaCBpcyBhIHNwZWNpYWwgY2FzZSBvZiBncm91cEJ5KVxuICogIGh0dHA6Ly9oYWNrYWdlLmhhc2tlbGwub3JnL3BhY2thZ2UvYmFzZS00LjcuMC4wL2RvY3MvRGF0YS1MaXN0Lmh0bWwjdjpncm91cFxuICovXG5leHBvcnQgY29uc3QgZ3JvdXBCeSA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBmOiAoYTogVCkgPT4gYW55KTogVFtdW10gPT4ge1xuICBpZiAoeHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2Uge1xuICAgIGxldCB3YXNUeXBlID0gZih4c1swXSk7IC8vIGluaXRpYWwgY2FzZSBmb3IgbWF0Y2hpbmdcbiAgICBjb25zdCByOiBUW11bXSA9IFtdO1xuICAgIGxldCBncm91cDogVFtdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICAgIGNvbnN0IHR5cGUgPSBmKHgpO1xuICAgICAgaWYgKHR5cGUgIT09IHdhc1R5cGUpIHtcbiAgICAgICAgci5wdXNoKGdyb3VwKTtcbiAgICAgICAgZ3JvdXAgPSBbXTtcbiAgICAgIH1cbiAgICAgIHdhc1R5cGUgPSB0eXBlO1xuICAgICAgZ3JvdXAucHVzaCh4KTtcbiAgICB9XG4gICAgaWYgKGdyb3VwLmxlbmd0aCAhPT0gMCkge1xuICAgICAgci5wdXNoKGdyb3VwKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmb2xkciA9IDxULCBVPih4czogQXJyYXlMaWtlPFQ+LCBmOiAoYWNjOiBVLCB4OiBULCBpOiBudW1iZXIpID0+IFUsIGFjYzogVSk6IFUgPT4ge1xuICBlYWNocih4cywgKHgsIGkpID0+IHtcbiAgICBhY2MgPSBmKGFjYywgeCwgaSk7XG4gIH0pO1xuICByZXR1cm4gYWNjO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvbGRsID0gPFQgPSBhbnksIFUgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIGY6IChhY2M6IFUsIHg6IFQsIGk6IG51bWJlcikgPT4gVSwgYWNjOiBVKTogVSA9PiB7XG4gIGVhY2goeHMsICh4LCBpKSA9PiB7XG4gICAgYWNjID0gZihhY2MsIHgsIGkpO1xuICB9KTtcbiAgcmV0dXJuIGFjYztcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kVW50aWw6IHtcbiAgPFQsIFUgZXh0ZW5kcyBUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheUd1YXJkUHJlZGljYXRlPFQsIFU+LCB1bnRpbDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxVPjtcbiAgPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+LCB1bnRpbDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxUPjtcbn0gPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4sIHVudGlsOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPFQ+ID0+IHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmIChwcmVkKHgsIGkpKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh4KTtcbiAgICB9IGVsc2UgaWYgKHVudGlsKHgsIGkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kOiB7XG4gIDxULCBVIGV4dGVuZHMgVD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlHdWFyZFByZWRpY2F0ZTxULCBVPik6IE9wdGlvbmFsPFU+O1xuICA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxUPjtcbn0gPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxUPiA9PiB7XG4gIHJldHVybiBmaW5kVW50aWwoeHMsIHByZWQsIEZ1bi5uZXZlcik7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZEluZGV4ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8bnVtYmVyPiA9PiB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAocHJlZCh4LCBpKSkge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoaSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kTGFzdEluZGV4ID0gPFQ+KGFycjogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHByZWQoYXJyW2ldLCBpKSkge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoaSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmbGF0dGVuID0gPFQ+KHhzOiBBcnJheUxpa2U8VFtdPik6IFRbXSA9PiB7XG4gIC8vIE5vdGUsIHRoaXMgaXMgcG9zc2libGUgYmVjYXVzZSBwdXNoIHN1cHBvcnRzIG11bHRpcGxlIGFyZ3VtZW50czpcbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vY29uY2F0LXB1c2gvNlxuICAvLyBOb3RlIHRoYXQgaW4gdGhlIHBhc3QsIGNvbmNhdCgpIHdvdWxkIHNpbGVudGx5IHdvcmsgKHZlcnkgc2xvd2x5KSBmb3IgYXJyYXktbGlrZSBvYmplY3RzLlxuICAvLyBXaXRoIHRoaXMgY2hhbmdlIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gIGNvbnN0IHI6IFRbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAvLyBFbnN1cmUgdGhhdCBlYWNoIHZhbHVlIGlzIGFuIGFycmF5IGl0c2VsZlxuICAgIGlmICghVHlwZS5pc0FycmF5KHhzW2ldKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcnIuZmxhdHRlbiBpdGVtICcgKyBpICsgJyB3YXMgbm90IGFuIGFycmF5LCBpbnB1dDogJyArIHhzKTtcbiAgICB9XG4gICAgbmF0aXZlUHVzaC5hcHBseShyLCB4c1tpXSk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3QgYmluZCA9IDxUID0gYW55LCBVID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBmOiBBcnJheU1vcnBoaXNtPFQsIFVbXT4pOiBVW10gPT5cbiAgZmxhdHRlbihtYXAoeHMsIGYpKTtcblxuZXhwb3J0IGNvbnN0IGZvcmFsbCA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IGJvb2xlYW4gPT4ge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKHByZWQoeCwgaSkgIT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgZXF1YWwgPSA8VD4oYTE6IEFycmF5TGlrZTxUPiwgYTI6IEFycmF5TGlrZTxUPiwgZXE6IEVxLkVxPFQ+ID0gRXEuZXFBbnkpOiBib29sZWFuID0+XG4gIEVxLmVxQXJyYXkoZXEpLmVxKGExLCBhMik7XG5cbmV4cG9ydCBjb25zdCByZXZlcnNlID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4pOiBUW10gPT4ge1xuICBjb25zdCByOiBUW10gPSBuYXRpdmVTbGljZS5jYWxsKHhzLCAwKTtcbiAgci5yZXZlcnNlKCk7XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpZmZlcmVuY2UgPSA8VD4oYTE6IEFycmF5TGlrZTxUPiwgYTI6IEFycmF5TGlrZTxUPik6IFRbXSA9PiBmaWx0ZXIoYTEsICh4KSA9PiAhY29udGFpbnMoYTIsIHgpKTtcblxuZXhwb3J0IGNvbnN0IG1hcFRvT2JqZWN0OiB7XG4gIDxUIGV4dGVuZHMgc3RyaW5nLCBVPih4czogQXJyYXlMaWtlPFQ+LCBmOiAoeDogVCwgaTogbnVtYmVyKSA9PiBVKTogUmVjb3JkPFQsIFU+O1xuICA8VCwgUiBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KHhzOiBBcnJheUxpa2U8VD4sIGY6ICh4OiBULCBpOiBudW1iZXIpID0+IFJba2V5b2YgUl0pOiBSO1xufSA9IDxULCBSIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oeHM6IEFycmF5TGlrZTxUPiwgZjogKHg6IFQsIGk6IG51bWJlcikgPT4gUltrZXlvZiBSXSk6IFIgPT4ge1xuICBjb25zdCByID0ge30gYXMgUjtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIHJbU3RyaW5nKHgpIGFzIGtleW9mIFJdID0gZih4LCBpKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBwdXJlID0gPFQ+KHg6IFQpOiBUW10gPT4gWyB4IF07XG5cbmV4cG9ydCBjb25zdCBzb3J0ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIGNvbXBhcmF0b3I/OiBDb21wYXJhdG9yPFQ+KTogVFtdID0+IHtcbiAgY29uc3QgY29weTogVFtdID0gbmF0aXZlU2xpY2UuY2FsbCh4cywgMCk7XG4gIGNvcHkuc29ydChjb21wYXJhdG9yKTtcbiAgcmV0dXJuIGNvcHk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIGk6IG51bWJlcik6IE9wdGlvbmFsPFQ+ID0+IGkgPj0gMCAmJiBpIDwgeHMubGVuZ3RoID8gT3B0aW9uYWwuc29tZSh4c1tpXSkgOiBPcHRpb25hbC5ub25lKCk7XG5cbmV4cG9ydCBjb25zdCBoZWFkID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4pOiBPcHRpb25hbDxUPiA9PiBnZXQoeHMsIDApO1xuXG5leHBvcnQgY29uc3QgbGFzdCA9IDxUPih4czogQXJyYXlMaWtlPFQ+KTogT3B0aW9uYWw8VD4gPT4gZ2V0KHhzLCB4cy5sZW5ndGggLSAxKTtcblxuZXhwb3J0IGNvbnN0IGZyb206IDxUPih4OiBBcnJheUxpa2U8VD4pID0+IFRbXSA9IFR5cGUuaXNGdW5jdGlvbihBcnJheS5mcm9tKSA/IEFycmF5LmZyb20gOiAoeCkgPT4gbmF0aXZlU2xpY2UuY2FsbCh4KTtcblxuZXhwb3J0IGNvbnN0IGZpbmRNYXAgPSA8QSwgQj4oYXJyOiBBcnJheUxpa2U8QT4sIGY6IChhOiBBLCBpbmRleDogbnVtYmVyKSA9PiBPcHRpb25hbDxCPik6IE9wdGlvbmFsPEI+ID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByID0gZihhcnJbaV0sIGkpO1xuICAgIGlmIChyLmlzU29tZSgpKSB7XG4gICAgICByZXR1cm4gcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8Qj4oKTtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlxdWUgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgY29tcGFyYXRvcj86IChhOiBULCBiOiBUKSA9PiBib29sZWFuKTogVFtdID0+IHtcbiAgY29uc3QgcjogVFtdID0gW107XG5cbiAgY29uc3QgaXNEdXBsaWNhdGVkID0gVHlwZS5pc0Z1bmN0aW9uKGNvbXBhcmF0b3IpID9cbiAgICAoeDogVCkgPT4gZXhpc3RzKHIsIChpKSA9PiBjb21wYXJhdG9yKGksIHgpKSA6XG4gICAgKHg6IFQpID0+IGNvbnRhaW5zKHIsIHgpO1xuXG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAoIWlzRHVwbGljYXRlZCh4KSkge1xuICAgICAgci5wdXNoKHgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByO1xufTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ2VsbDxUPiB7XG4gIHJlYWRvbmx5IGdldDogKCkgPT4gVDtcbiAgcmVhZG9ubHkgc2V0OiAodmFsdWU6IFQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBDZWxsID0gPFQ+KGluaXRpYWw6IFQpOiBDZWxsPFQ+ID0+IHtcbiAgbGV0IHZhbHVlID0gaW5pdGlhbDtcblxuICBjb25zdCBnZXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIGNvbnN0IHNldCA9ICh2OiBUKSA9PiB7XG4gICAgdmFsdWUgPSB2O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0LFxuICAgIHNldFxuICB9O1xufTtcbiIsImltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxuY29uc3Qgbm9vcDogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkXG49ICgpID0+IHsgfTtcblxuY29uc3Qgbm9hcmc6IDxUPihmOiAoKSA9PiBUKSA9PiAoLi4uYXJnczogYW55W10pID0+IHZvaWRcbj0gKGYpID0+ICgpID0+IGYoKTtcblxuLyoqIENvbXBvc2UgYSB1bmFyeSBmdW5jdGlvbiB3aXRoIGFuIG4tYXJ5IGZ1bmN0aW9uICovXG5jb25zdCBjb21wb3NlID0gPFQgZXh0ZW5kcyBhbnlbXSwgVSwgVj4oZmE6ICh2OiBVKSA9PiBWLCBmYjogKC4uLng6IFQpID0+IFUpOiAoLi4ueDogVCkgPT4gViA9PiB7XG4gIHJldHVybiAoLi4uYXJnczogVCkgPT4ge1xuICAgIHJldHVybiBmYShmYi5hcHBseShudWxsLCBhcmdzKSk7XG4gIH07XG59O1xuXG4vKiogQ29tcG9zZSB0d28gdW5hcnkgZnVuY3Rpb25zLiBTaW1pbGFyIHRvIGNvbXBvc2UsIGJ1dCBhdm9pZHMgdXNpbmcgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LiAqL1xuY29uc3QgY29tcG9zZTEgPSA8QSwgQiwgQz4gKGZiYzogKGI6IEIpID0+IEMsIGZhYjogKGE6IEEpID0+IEIpID0+IChhOiBBKTogQyA9PlxuICBmYmMoZmFiKGEpKTtcblxuY29uc3QgY29uc3RhbnQgPSA8VD4odmFsdWU6IFQpOiAoKSA9PiBUID0+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG59O1xuXG5jb25zdCBpZGVudGl0eSA9IDxUID0gYW55Pih4OiBUKTogVCA9PiB7XG4gIHJldHVybiB4O1xufTtcblxuY29uc3QgdHJpcGxlRXF1YWxzID0gPFQ+KGE6IFQsIGI6IFQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGEgPT09IGI7XG59O1xuXG5mdW5jdGlvbiBjdXJyeSA8UkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQyk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRik6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBGLCBHLCBILCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBILCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBIKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgRywgSCwgSSwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgsIEksIEosIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgsIGk6IEksIGo6IEosIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgsIGk6IEksIGo6IEopOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxPVVQ+KGZuOiAoLi4uYWxsQXJnczogYW55W10pID0+IE9VVCwgLi4uaW5pdGlhbEFyZ3M6IGFueVtdKTogKC4uLnJlc3RBcmdzOiBhbnlbXSkgPT4gT1VUIHtcbiAgcmV0dXJuICguLi5yZXN0QXJnczogYW55W10pID0+IHtcbiAgICBjb25zdCBhbGwgPSBpbml0aWFsQXJncy5jb25jYXQocmVzdEFyZ3MpO1xuICAgIHJldHVybiBmbi5hcHBseShudWxsLCBhbGwpO1xuICB9O1xufVxuXG5jb25zdCBub3QgPSA8VD4oZjogKHQ6IFQpID0+IGJvb2xlYW4pID0+ICh0OiBUKTogYm9vbGVhbiA9PlxuICAhZih0KTtcblxuY29uc3QgZGllID0gKG1zZzogc3RyaW5nKSA9PiB7XG4gIHJldHVybiAoKTogbmV2ZXIgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICB9O1xufTtcblxuY29uc3QgYXBwbHkgPSA8VD4oZjogKCkgPT4gVCk6IFQgPT4ge1xuICByZXR1cm4gZigpO1xufTtcblxuY29uc3QgY2FsbCA9IChmOiAoKSA9PiBhbnkpOiB2b2lkID0+IHtcbiAgZigpO1xufTtcblxuY29uc3QgbmV2ZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gZmFsc2UgPSBjb25zdGFudDxmYWxzZT4oZmFsc2UpO1xuY29uc3QgYWx3YXlzOiAoLi4uYXJnczogYW55W10pID0+IHRydWUgPSBjb25zdGFudDx0cnVlPih0cnVlKTtcblxuLyogVXNlZCB0byB3ZWFrZW4gdHlwZXMgKi9cbmNvbnN0IHdlYWtlbiA9IDxBLCBCIGV4dGVuZHMgQT4oYjogQik6IEEgPT4gYjtcblxudHlwZSBGdW48WCwgWT4gPSAoeDogWCkgPT4gWTtcbmNvbnN0IHBpcGU6IHtcbiAgPEEsIEI+KGE6IEEsIGFiOiBGdW48QSwgQj4pOiBCO1xuICA8QSwgQiwgQz4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPik6IEM7XG4gIDxBLCBCLCBDLCBEPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+LCBjZDogRnVuPEMsIEQ+KTogRDtcbiAgPEEsIEIsIEMsIEQsIEU+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4sIGRlOiBGdW48RCwgRT4pOiBFO1xuICA8QSwgQiwgQywgRCwgRSwgRj4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPiwgY2Q6IEZ1bjxDLCBEPiwgZGU6IEZ1bjxELCBFPiwgZWY6IEZ1bjxFLCBGPik6IEY7XG4gIDxBLCBCLCBDLCBELCBFLCBGLCBHPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+LCBjZDogRnVuPEMsIEQ+LCBkZTogRnVuPEQsIEU+LCBlZjogRnVuPEUsIEY+LCBmZzogRnVuPEYsIEc+KTogRztcbiAgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEg+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4sIGRlOiBGdW48RCwgRT4sIGVmOiBGdW48RSwgRj4sIGZnOiBGdW48RiwgRz4sIGdoOiBGdW48RywgSD4pOiBIO1xufSA9XG4gIDxBLCBCLCBDLCBELCBFLCBGLCBHLCBIPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYz86IEZ1bjxCLCBDPiwgY2Q/OiBGdW48QywgRD4sIGRlPzogRnVuPEQsIEU+LCBlZj86IEZ1bjxFLCBGPiwgZmc/OiBGdW48RiwgRz4sIGdoPzogRnVuPEcsIEg+KTogQiB8IEMgfCBEIHwgRSB8IEYgfCBHIHwgSCA9PiB7XG4gICAgY29uc3QgYiA9IGFiKGEpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoYmMpKSB7XG4gICAgICByZXR1cm4gYjtcbiAgICB9XG5cbiAgICBjb25zdCBjID0gYmMoYik7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShjZCkpIHtcbiAgICAgIHJldHVybiBjO1xuICAgIH1cblxuICAgIGNvbnN0IGQgPSBjZChjKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGRlKSkge1xuICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuXG4gICAgY29uc3QgZSA9IGRlKGQpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoZWYpKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG5cbiAgICBjb25zdCBmID0gZWYoZSk7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShmZykpIHtcbiAgICAgIHJldHVybiBmO1xuICAgIH1cblxuICAgIGNvbnN0IGcgPSBmZyhmKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGdoKSkge1xuICAgICAgcmV0dXJuIGc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdoKGcpO1xuICB9O1xuXG5leHBvcnQge1xuICBub29wLFxuICBub2FyZyxcbiAgY29tcG9zZSxcbiAgY29tcG9zZTEsXG4gIGNvbnN0YW50LFxuICBpZGVudGl0eSxcbiAgdHJpcGxlRXF1YWxzLFxuICBjdXJyeSxcbiAgbm90LFxuICBkaWUsXG4gIGFwcGx5LFxuICBjYWxsLFxuICBuZXZlcixcbiAgYWx3YXlzLFxuICB3ZWFrZW4sXG4gIHBpcGVcbn07XG4iLCJpbXBvcnQgeyBFcSB9IGZyb20gJ0BlcGhveC9kaXNwdXRlJztcblxuaW1wb3J0ICogYXMgRnVuIGZyb20gJy4vRnVuJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi9PcHRpb25hbCc7XG5cbnR5cGUgT2JqS2V5czxUIGV4dGVuZHMge30+ID0gRXh0cmFjdDxrZXlvZiBULCBzdHJpbmc+O1xudHlwZSBPYmpDYWxsYmFjazxUIGV4dGVuZHMge30+ID0gKHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IE9iaktleXM8VD4pID0+IHZvaWQ7XG50eXBlIE9iak1vcnBoaXNtPFQgZXh0ZW5kcyB7fSwgUj4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gUjtcbnR5cGUgT2JqR3VhcmRQcmVkaWNhdGU8VCBleHRlbmRzIHt9LCBVIGV4dGVuZHMgVFtrZXlvZiBUXT4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gdmFsdWUgaXMgVTtcbnR5cGUgT2JqUHJlZGljYXRlPFQgZXh0ZW5kcyB7fT4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gYm9vbGVhbjtcblxuLy8gVGhlcmUgYXJlIG1hbnkgdmFyaWF0aW9ucyBvZiBPYmplY3QgaXRlcmF0aW9uIHRoYXQgYXJlIGZhc3RlciB0aGFuIHRoZSAnZm9yLWluJyBzdHlsZTpcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL29iamVjdC1rZXlzLWl0ZXJhdGlvbi8xMDdcbi8vXG4vLyBVc2UgdGhlIG5hdGl2ZSBrZXlzIGlmIGl0IGlzIGF2YWlsYWJsZSAoSUU5KyksIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gbWFudWFsbHkgZmlsdGVyaW5nXG5leHBvcnQgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzO1xuXG5leHBvcnQgY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QuaGFzT3duUHJvcGVydHk7XG5cbmV4cG9ydCBjb25zdCBlYWNoID0gPFQgZXh0ZW5kcyB7fT4ob2JqOiBULCBmOiBPYmpDYWxsYmFjazxUPik6IHZvaWQgPT4ge1xuICBjb25zdCBwcm9wcyA9IGtleXMob2JqKSBhcyBBcnJheTxPYmpLZXlzPFQ+PjtcbiAgZm9yIChsZXQgayA9IDAsIGxlbiA9IHByb3BzLmxlbmd0aDsgayA8IGxlbjsgaysrKSB7XG4gICAgY29uc3QgaSA9IHByb3BzW2tdO1xuICAgIGNvbnN0IHggPSBvYmpbaV07XG4gICAgZih4LCBpKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IG1hcCA9IDxUIGV4dGVuZHMge30sIFI+KG9iajogVCwgZjogT2JqTW9ycGhpc208VCwgUj4pOiB7IFtrIGluIGtleW9mIFRdOiBSIH0gPT4ge1xuICByZXR1cm4gdHVwbGVNYXA8eyBbayBpbiBrZXlvZiBUXTogUiB9LCBUPihvYmosICh4LCBpKSA9PiAoe1xuICAgIGs6IGksXG4gICAgdjogZih4LCBpKVxuICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgdHVwbGVNYXAgPSA8UiBleHRlbmRzIHt9LCBUIGV4dGVuZHMge30+KG9iajogVCwgZjogT2JqTW9ycGhpc208VCwgeyBrOiBrZXlvZiBSOyB2OiBSW2tleW9mIFJdIH0+KTogUiA9PiB7XG4gIGNvbnN0IHIgPSB7fSBhcyBSO1xuICBlYWNoKG9iaiwgKHgsIGkpID0+IHtcbiAgICBjb25zdCB0dXBsZSA9IGYoeCwgaSk7XG4gICAgclt0dXBsZS5rXSA9IHR1cGxlLnY7XG4gIH0pO1xuICByZXR1cm4gcjtcbn07XG5cbmNvbnN0IG9iakFjYyA9IDxUIGV4dGVuZHMge30+KHI6IFQpID0+ICh4OiBUW2tleW9mIFRdLCBpOiBrZXlvZiBUKTogdm9pZCA9PiB7XG4gIHJbaV0gPSB4O1xufTtcblxuY29uc3QgaW50ZXJuYWxGaWx0ZXIgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPiwgb25UcnVlOiBPYmpDYWxsYmFjazxUPiwgb25GYWxzZTogT2JqQ2FsbGJhY2s8VD4pID0+IHtcbiAgZWFjaChvYmosICh4LCBpKSA9PiB7XG4gICAgKHByZWQoeCwgaSkgPyBvblRydWUgOiBvbkZhbHNlKSh4LCBpKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgYmlmaWx0ZXIgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPik6IHsgdDogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT47IGY6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+IH0gPT4ge1xuICBjb25zdCB0OiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBjb25zdCBmOiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBpbnRlcm5hbEZpbHRlcihvYmosIHByZWQsIG9iakFjYyh0KSwgb2JqQWNjKGYpKTtcbiAgcmV0dXJuIHsgdCwgZiB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbHRlcjoge1xuICA8VCBleHRlbmRzIHt9LCBVIGV4dGVuZHMgVFtrZXlvZiBUXT4ob2JqOiBULCBwcmVkOiBPYmpHdWFyZFByZWRpY2F0ZTxULCBVPik6IFJlY29yZDxzdHJpbmcsIFU+O1xuICA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPik6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+O1xufSA9IDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogT2JqUHJlZGljYXRlPFQ+KTogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT4gPT4ge1xuICBjb25zdCB0OiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBpbnRlcm5hbEZpbHRlcihvYmosIHByZWQsIG9iakFjYyh0KSwgRnVuLm5vb3ApO1xuICByZXR1cm4gdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXBUb0FycmF5ID0gPFQgZXh0ZW5kcyB7fSwgUj4ob2JqOiBULCBmOiBPYmpNb3JwaGlzbTxULCBSPik6IFJbXSA9PiB7XG4gIGNvbnN0IHI6IFJbXSA9IFtdO1xuICBlYWNoKG9iaiwgKHZhbHVlLCBuYW1lKSA9PiB7XG4gICAgci5wdXNoKGYodmFsdWUsIG5hbWUpKTtcbiAgfSk7XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmQgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBPYmpLZXlzPFQ+LCBvYmo6IFQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxUW2tleW9mIFRdPiA9PiB7XG4gIGNvbnN0IHByb3BzID0ga2V5cyhvYmopIGFzIEFycmF5PE9iaktleXM8VD4+O1xuICBmb3IgKGxldCBrID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcbiAgICBjb25zdCBpID0gcHJvcHNba107XG4gICAgY29uc3QgeCA9IG9ialtpXTtcbiAgICBpZiAocHJlZCh4LCBpLCBvYmopKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWx1ZXMgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQpOiBBcnJheTxUW2tleW9mIFRdPiA9PiB7XG4gIHJldHVybiBtYXBUb0FycmF5KG9iaiwgRnVuLmlkZW50aXR5KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaXplID0gKG9iajoge30pOiBudW1iZXIgPT4ge1xuICByZXR1cm4ga2V5cyhvYmopLmxlbmd0aDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXQgPSA8VCBleHRlbmRzIHt9LCBLIGV4dGVuZHMga2V5b2YgVD4ob2JqOiBULCBrZXk6IEspOiBPcHRpb25hbDxOb25OdWxsYWJsZTxUW0tdPj4gPT4ge1xuICByZXR1cm4gaGFzKG9iaiwga2V5KSA/IE9wdGlvbmFsLmZyb20ob2JqW2tleV0gYXMgTm9uTnVsbGFibGU8VFtLXT4pIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhcyA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvYmo6IFQsIGtleTogSyk6IGJvb2xlYW4gPT5cbiAgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cbmV4cG9ydCBjb25zdCBoYXNOb25OdWxsYWJsZUtleSA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvYmo6IFQsIGtleTogSyk6IG9iaiBpcyBUICYgUmVjb3JkPEssIE5vbk51bGxhYmxlPFRbS10+PiA9PlxuICBoYXMob2JqLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQgJiYgb2JqW2tleV0gIT09IG51bGw7XG5cbmV4cG9ydCBjb25zdCBpc0VtcHR5ID0gKHI6IFJlY29yZDxhbnksIGFueT4pOiByIGlzIHt9ID0+IHtcbiAgZm9yIChjb25zdCB4IGluIHIpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChyLCB4KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBlcXVhbCA9IDxUPihhMTogUmVjb3JkPHN0cmluZywgVD4sIGEyOiBSZWNvcmQ8c3RyaW5nLCBUPiwgZXE6IEVxLkVxPFQ+ID0gRXEuZXFBbnkpOiBib29sZWFuID0+XG4gIEVxLmVxUmVjb3JkKGVxKS5lcShhMSwgYTIpO1xuIiwiaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG4vKipcbiAqIFRoZSBgT3B0aW9uYWxgIHR5cGUgcmVwcmVzZW50cyBhIHZhbHVlIChvZiBhbnkgdHlwZSkgdGhhdCBwb3RlbnRpYWxseSBkb2VzXG4gKiBub3QgZXhpc3QuIEFueSBgT3B0aW9uYWw8VD5gIGNhbiBlaXRoZXIgYmUgYSBgU29tZTxUPmAgKGluIHdoaWNoIGNhc2UgdGhlXG4gKiB2YWx1ZSBkb2VzIGV4aXN0KSBvciBhIGBOb25lYCAoaW4gd2hpY2ggY2FzZSB0aGUgdmFsdWUgZG9lcyBub3QgZXhpc3QpLiBUaGlzXG4gKiBtb2R1bGUgZGVmaW5lcyBhIHdob2xlIGxvdCBvZiBGUC1pbnNwaXJlZCB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGVhbGluZyB3aXRoXG4gKiBgT3B0aW9uYWxgIG9iamVjdHMuXG4gKlxuICogQ29tcGFyaXNvbiB3aXRoIG51bGwgb3IgdW5kZWZpbmVkOlxuICogLSBXZSBkb24ndCBnZXQgZmFuY3kgbnVsbCBjb2FsZXNjaW5nIG9wZXJhdG9ycyB3aXRoIGBPcHRpb25hbGBcbiAqIC0gV2UgZG8gZ2V0IGZhbmN5IGhlbHBlciBmdW5jdGlvbnMgd2l0aCBgT3B0aW9uYWxgXG4gKiAtIGBPcHRpb25hbGAgc3VwcG9ydCBuZXN0aW5nLCBhbmQgYWxsb3cgZm9yIHRoZSB0eXBlIHRvIHN0aWxsIGJlIG51bGxhYmxlIChvclxuICogYW5vdGhlciBgT3B0aW9uYWxgKVxuICogLSBUaGVyZSBpcyBubyBvcHRpb24gdG8gdHVybiBvZmYgc3RyaWN0LW9wdGlvbmFsLWNoZWNrcyBsaWtlIHRoZXJlIGlzIGZvclxuICogc3RyaWN0LW51bGwtY2hlY2tzXG4gKi9cbmV4cG9ydCBjbGFzcyBPcHRpb25hbDxUPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGFnOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbHVlPzogVDtcblxuICAvLyBTbmVha3kgb3B0aW1pc2F0aW9uOiBldmVyeSBpbnN0YW5jZSBvZiBPcHRpb25hbC5ub25lIGlzIGlkZW50aWNhbCwgc28ganVzdFxuICAvLyByZXVzZSB0aGUgc2FtZSBvYmplY3RcbiAgcHJpdmF0ZSBzdGF0aWMgc2luZ2xldG9uTm9uZSA9IG5ldyBPcHRpb25hbDxhbnk+KGZhbHNlKTtcblxuICAvLyBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gaGFzIGEgYHRhZ2AgYW5kIGEgYHZhbHVlYCwgYnV0IGJvdGggYXJlXG4gIC8vIHByaXZhdGU6IGFibGUgdG8gYmUgY29uc29sZS5sb2dnZWQsIGJ1dCBub3QgYWJsZSB0byBiZSBhY2Nlc3NlZCBieSBjb2RlXG4gIHByaXZhdGUgY29uc3RydWN0b3IodGFnOiBib29sZWFuLCB2YWx1ZT86IFQpIHtcbiAgICB0aGlzLnRhZyA9IHRhZztcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICAvLyAtLS0gSWRlbnRpdGllcyAtLS1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBgT3B0aW9uYWw8VD5gIHRoYXQgKipkb2VzKiogY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzb21lPFQ+KHRoaXM6IHZvaWQsIHZhbHVlOiBUKTogT3B0aW9uYWw8VD4ge1xuICAgIHJldHVybiBuZXcgT3B0aW9uYWwodHJ1ZSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgT3B0aW9uYWw8VD5gIHRoYXQgKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZS4gYFRgIGNhbiBiZVxuICAgKiBhbnkgdHlwZSBiZWNhdXNlIHdlIGRvbid0IGFjdHVhbGx5IGhhdmUgYSBgVGAuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIG5vbmU8VCA9IG5ldmVyPih0aGlzOiB2b2lkKTogT3B0aW9uYWw8VD4ge1xuICAgIHJldHVybiBPcHRpb25hbC5zaW5nbGV0b25Ob25lO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYW4gYE9wdGlvbmFsYCB0eXBlLiBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpc1xuICAgKiBgT3B0aW9uYWxgIGNvbnRhaW5zIGEgdmFsdWUgb3Igbm90LCBgZm9sZGAgd2lsbCByZXR1cm4gYSB2YWx1ZSBvZiB0eXBlIGBVYC5cbiAgICogSWYgdGhpcyBgT3B0aW9uYWxgIGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSwgdGhlIGBVYCB3aWxsIGJlIGNyZWF0ZWQgYnlcbiAgICogY2FsbGluZyBgb25Ob25lYC4gSWYgdGhpcyBgT3B0aW9uYWxgIGRvZXMgY29udGFpbiBhIHZhbHVlLCB0aGUgYFVgIHdpbGwgYmVcbiAgICogY3JlYXRlZCBieSBjYWxsaW5nIGBvblNvbWVgLlxuICAgKlxuICAgKiBGb3IgdGhlIEZQIGVudGh1c2lhc3RzIGluIHRoZSByb29tLCB0aGlzIGZ1bmN0aW9uOlxuICAgKiAxLiBDb3VsZCBiZSB1c2VkIHRvIGltcGxlbWVudCBhbGwgb2YgdGhlIGZ1bmN0aW9ucyBiZWxvd1xuICAgKiAyLiBGb3JtcyBhIGNhdGFtb3JwaGlzbVxuICAgKi9cbiAgcHVibGljIGZvbGQ8VT4ob25Ob25lOiAoKSA9PiBVLCBvblNvbWU6ICh2YWx1ZTogVCkgPT4gVSk6IFUge1xuICAgIGlmICh0aGlzLnRhZykge1xuICAgICAgcmV0dXJuIG9uU29tZSh0aGlzLnZhbHVlIGFzIFQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb25Ob25lKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IGNvbnRhaW5zIGEgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgaXNTb21lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRhZztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhpcyBgT3B0aW9uYWxgIG9iamVjdCAqKmRvZXMgbm90KiogY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIGlzTm9uZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMudGFnO1xuICB9XG5cbiAgLy8gLS0tIEZ1bmN0b3IgKG5hbWUgc3RvbGVuIGZyb20gSGFza2VsbCAvIG1hdGhzKSAtLS1cblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhbiBgT3B0aW9uYWxgIG9iamVjdCwgKippZioqIHRoZXJlIGlzIGEgdmFsdWUuIElmXG4gICAqIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gdG8gdHVybiBhIFQgaW50byBhIFUsIHRoaXMgaXMgdGhlIGZ1bmN0aW9uIHlvdSB1c2VcbiAgICogdG8gdHVybiBhbiBgT3B0aW9uYWw8VD5gIGludG8gYW4gYE9wdGlvbmFsPFU+YC4gSWYgdGhpcyAqKmRvZXMqKiBjb250YWluXG4gICAqIGEgdmFsdWUgdGhlbiB0aGUgb3V0cHV0IHdpbGwgYWxzbyBjb250YWluIGEgdmFsdWUgKHRoYXQgdmFsdWUgYmVpbmcgdGhlXG4gICAqIG91dHB1dCBvZiBgbWFwcGVyKHRoaXMudmFsdWUpYCksIGFuZCBpZiB0aGlzICoqZG9lcyBub3QqKiBjb250YWluIGEgdmFsdWVcbiAgICogdGhlbiBuZWl0aGVyIHdpbGwgdGhlIG91dHB1dC5cbiAgICovXG4gIHB1YmxpYyBtYXA8VT4obWFwcGVyOiAodmFsdWU6IFQpID0+IFUpOiBPcHRpb25hbDxVPiB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShtYXBwZXIodGhpcy52YWx1ZSBhcyBUKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIE1vbmFkIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYW4gYE9wdGlvbmFsYCBvYmplY3QsICoqaWYqKiB0aGVyZSBpcyBhIHZhbHVlLlxuICAgKiBVbmxpa2UgYG1hcGAsIGhlcmUgdGhlIHRyYW5zZm9ybSBpdHNlbGYgYWxzbyByZXR1cm5zIGFuIGBPcHRpb25hbGAuXG4gICAqL1xuICBwdWJsaWMgYmluZDxVPihiaW5kZXI6ICh2YWx1ZTogVCkgPT4gT3B0aW9uYWw8VT4pOiBPcHRpb25hbDxVPiB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICByZXR1cm4gYmluZGVyKHRoaXMudmFsdWUgYXMgVCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIFRyYXZlcnNhYmxlIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgdGhlcmUgKipleGlzdHMqKiBhIHZhbHVlXG4gICAqIGluc2lkZSB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IHRoYXQgbWVldHMgdGhlIHByZWRpY2F0ZS4gSW4gcHJhY3RpY2UsIHRoaXNcbiAgICogbWVhbnMgdGhhdCBmb3IgYE9wdGlvbmFsYHMgdGhhdCBkbyBub3QgY29udGFpbiBhIHZhbHVlIGl0IHJldHVybnMgZmFsc2UgKGFzXG4gICAqIG5vIHByZWRpY2F0ZS1tZWV0aW5nIHZhbHVlIGV4aXN0cykuXG4gICAqL1xuICBwdWJsaWMgZXhpc3RzKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGFnICYmIHByZWRpY2F0ZSh0aGlzLnZhbHVlIGFzIFQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgKiphbGwqKiB0aGUgdmFsdWVzIGluc2lkZVxuICAgKiB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IG1lZXQgdGhlIHByZWRpY2F0ZS4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnMgdGhhdFxuICAgKiBmb3IgYE9wdGlvbmFsYHMgdGhhdCBkbyBub3QgY29udGFpbiBhIHZhbHVlIGl0IHJldHVybnMgdHJ1ZSAoYXMgYWxsIDBcbiAgICogb2JqZWN0cyBkbyBtZWV0IHRoZSBwcmVkaWNhdGUpLlxuICAgKi9cbiAgcHVibGljIGZvcmFsbChwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy50YWcgfHwgcHJlZGljYXRlKHRoaXMudmFsdWUgYXMgVCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gcHJlZGljYXRlLCBjcmVhdGUgYSBuZXcgYE9wdGlvbmFsYCBvYmplY3QgdGhhdCB3aWxsIHJldGFpblxuICAgKiBhbGwgdGhlIHZhbHVlcyBpbnNpZGUgdGhlIG9sZCBgT3B0aW9uYWxgIG9iamVjdCB0aGF0IG1lZXQgdGhlIHByZWRpY2F0ZS5cbiAgICogSW4gcHJhY3RpY2UsIHRoZSBgT3B0aW9uYWxgIG9iamVjdCBjb250YWlucyBlaXRoZXIgMCBvciAxIG9iamVjdHMsIGFuZFxuICAgKiB0aGUgb3V0cHV0IHdpbGwga2VlcCB0aGUgKHNpbmdsZSkgaW5wdXQgb2JqZWN0IChpZiBpdCBleGlzdHMpIGFzIGxvbmcgYXNcbiAgICogaXQgcGFzc2VzIHRoZSBwcmVkaWNhdGUuXG4gICAqL1xuICBwdWJsaWMgZmlsdGVyPFUgZXh0ZW5kcyBUPihwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gdmFsdWUgaXMgVSk6IE9wdGlvbmFsPFU+O1xuICBwdWJsaWMgZmlsdGVyKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogT3B0aW9uYWw8VD47XG4gIHB1YmxpYyBmaWx0ZXIocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxUPiB7XG4gICAgaWYgKCF0aGlzLnRhZyB8fCBwcmVkaWNhdGUodGhpcy52YWx1ZSBhcyBUKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIEdldHRlcnMgLS0tXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb3V0IG9mIHRoZSBpbnNpZGUgb2YgdGhlIGBPcHRpb25hbGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIGdldE9yPFUgPSBUPihyZXBsYWNlbWVudDogVSk6IFQgfCBVIHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyB0aGlzLnZhbHVlIGFzIFQgOiByZXBsYWNlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBPcHRpb25hbGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYVxuICAgKiB2YWx1ZS4gIFVubGlrZSBgZ2V0T3JgLCBpbiB0aGlzIG1ldGhvZCB0aGUgYHJlcGxhY2VtZW50YCBvYmplY3QgaXMgYWxzb1xuICAgKiBgT3B0aW9uYWxgIC0gbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhbiBgT3B0aW9uYWxgLlxuICAgKi9cbiAgcHVibGljIG9yPFUgPSBUPihyZXBsYWNlbWVudDogT3B0aW9uYWw8VT4pOiBPcHRpb25hbDxUIHwgVT4ge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMgOiByZXBsYWNlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBPcHRpb25hbGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYVxuICAgKiB2YWx1ZS4gVW5saWtlIGBnZXRPcmAsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIHZhbHVlIGlzXG4gICAqIFwidGh1bmtlZFwiIC0gdGhhdCBpcyB0byBzYXkgdGhhdCB5b3UgZG9uJ3QgcGFzcyBhIHZhbHVlIHRvIGBnZXRPclRodW5rYCwgeW91XG4gICAqIHBhc3MgYSBmdW5jdGlvbiB3aGljaCAoaWYgY2FsbGVkKSB3aWxsICoqcmV0dXJuKiogdGhlIGB2YWx1ZWAgeW91IHdhbnQgdG9cbiAgICogdXNlLlxuICAgKi9cbiAgcHVibGljIGdldE9yVGh1bms8VSA9IFQ+KHRodW5rOiAoKSA9PiBVKTogVCB8IFUge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMudmFsdWUgYXMgVCA6IHRodW5rKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYE9wdGlvbmFsYCBvYmplY3QsIHVzaW5nIGEgZGVmYXVsdFxuICAgKiBgcmVwbGFjZW1lbnRgIHZhbHVlIGlmIHRoZSBwcm92aWRlZCBPcHRpb25hbCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBVbmxpa2UgYG9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIGByZXBsYWNlbWVudGAgdmFsdWUgaXMgXCJ0aHVua2VkXCIgLSB0aGF0IGlzXG4gICAqIHRvIHNheSB0aGF0IHlvdSBkb24ndCBwYXNzIGEgdmFsdWUgdG8gYG9yVGh1bmtgLCB5b3UgcGFzcyBhIGZ1bmN0aW9uIHdoaWNoXG4gICAqIChpZiBjYWxsZWQpIHdpbGwgKipyZXR1cm4qKiB0aGUgYHZhbHVlYCB5b3Ugd2FudCB0byB1c2UuXG4gICAqXG4gICAqIFVubGlrZSBgZ2V0T3JUaHVua2AsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIHZhbHVlIGlzIGFsc29cbiAgICogYE9wdGlvbmFsYCwgbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhbiBgT3B0aW9uYWxgLlxuICAgKi9cbiAgcHVibGljIG9yVGh1bms8VSA9IFQ+KHRodW5rOiAoKSA9PiBPcHRpb25hbDxVPik6IE9wdGlvbmFsPFQgfCBVPiB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gdGhpcyA6IHRodW5rKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYE9wdGlvbmFsYCBvYmplY3QsIHRocm93aW5nIGFuXG4gICAqIGV4Y2VwdGlvbiBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKlxuICAgKiBXQVJOSU5HOlxuICAgKiBZb3Ugc2hvdWxkIG9ubHkgYmUgdXNpbmcgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB0aGF0IHRoZSBgT3B0aW9uYWxgXG4gICAqIG9iamVjdCAqKmlzIG5vdCoqIGVtcHR5IChvdGhlcndpc2UgeW91J3JlIHRocm93aW5nIGV4Y2VwdGlvbnMgaW4gcHJvZHVjdGlvblxuICAgKiBjb2RlLCB3aGljaCBpcyBiYWQpLlxuICAgKlxuICAgKiBJbiB0ZXN0cyB0aGlzIGlzIG1vcmUgYWNjZXB0YWJsZS5cbiAgICpcbiAgICogUHJlZmVyIG90aGVyIG1ldGhvZHMgdG8gdGhpcywgc3VjaCBhcyBgLmVhY2hgLlxuICAgKi9cbiAgcHVibGljIGdldE9yRGllKG1lc3NhZ2U/OiBzdHJpbmcpOiBUIHtcbiAgICBpZiAoIXRoaXMudGFnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSA/PyAnQ2FsbGVkIGdldE9yRGllIG9uIE5vbmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWUgYXMgVDtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gSW50ZXJvcCB3aXRoIG51bGwgYW5kIHVuZGVmaW5lZCAtLS1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBgT3B0aW9uYWxgIHZhbHVlIGZyb20gYSBudWxsYWJsZSAob3IgdW5kZWZpbmVkLWFibGUpIGlucHV0LlxuICAgKiBOdWxsLCBvciB1bmRlZmluZWQsIGlzIGNvbnZlcnRlZCB0byBgTm9uZWAsIGFuZCBhbnl0aGluZyBlbHNlIGlzIGNvbnZlcnRlZFxuICAgKiB0byBgU29tZWAuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb208VD4odGhpczogdm9pZCwgdmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogT3B0aW9uYWw8Tm9uTnVsbGFibGU8VD4+IHtcbiAgICByZXR1cm4gVHlwZS5pc05vbk51bGxhYmxlKHZhbHVlKSA/IE9wdGlvbmFsLnNvbWUodmFsdWUpIDogT3B0aW9uYWwubm9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIGBPcHRpb25hbGAgdG8gYSBudWxsYWJsZSB0eXBlLCBieSBnZXR0aW5nIHRoZSB2YWx1ZSBpZiBpdFxuICAgKiBleGlzdHMsIG9yIHJldHVybmluZyBgbnVsbGAgaWYgaXQgZG9lcyBub3QuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JOdWxsKCk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyB0aGlzLnZhbHVlIGFzIFQgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIGBPcHRpb25hbGAgdG8gYW4gdW5kZWZpbmVkLWFibGUgdHlwZSwgYnkgZ2V0dGluZyB0aGUgdmFsdWUgaWZcbiAgICogaXQgZXhpc3RzLCBvciByZXR1cm5pbmcgYHVuZGVmaW5lZGAgaWYgaXQgZG9lcyBub3QuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JVbmRlZmluZWQoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICAvLyAtLS0gVXRpbGl0aWVzIC0tLVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgYE9wdGlvbmFsYCBjb250YWlucyBhIHZhbHVlLCBwZXJmb3JtIGFuIGFjdGlvbiBvbiB0aGF0IHZhbHVlLlxuICAgKiBVbmxpa2UgdGhlIHJlc3Qgb2YgdGhlIG1ldGhvZHMgb24gdGhpcyB0eXBlLCBgLmVhY2hgIGhhcyBzaWRlLWVmZmVjdHMuIElmXG4gICAqIHlvdSB3YW50IHRvIHRyYW5zZm9ybSBhbiBgT3B0aW9uYWw8VD5gICoqaW50byoqIHNvbWV0aGluZywgdGhlbiB0aGlzIGlzIG5vdFxuICAgKiB0aGUgbWV0aG9kIGZvciB5b3UuIElmIHlvdSB3YW50IHRvIHVzZSBhbiBgT3B0aW9uYWw8VD5gIHRvICoqZG8qKlxuICAgKiBzb21ldGhpbmcsIHRoZW4gdGhpcyBpcyB0aGUgbWV0aG9kIGZvciB5b3UgLSBwcm92aWRlZCB5b3UncmUgb2theSB3aXRoIG5vdFxuICAgKiBkb2luZyBhbnl0aGluZyBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgYE9wdGlvbmFsYCBkb2Vzbid0IGhhdmUgYSB2YWx1ZSBpbnNpZGVcbiAgICogaXQuIElmIHlvdSdyZSBub3Qgc3VyZSB3aGV0aGVyIHlvdXIgdXNlLWNhc2UgZml0cyBpbnRvIHRyYW5zZm9ybWluZ1xuICAgKiAqKmludG8qKiBzb21ldGhpbmcgb3IgKipkb2luZyoqIHNvbWV0aGluZywgY2hlY2sgd2hldGhlciBpdCBoYXMgYSByZXR1cm5cbiAgICogdmFsdWUuIElmIGl0IGRvZXMsIHlvdSBzaG91bGQgYmUgcGVyZm9ybWluZyBhIHRyYW5zZm9ybS5cbiAgICovXG4gIHB1YmxpYyBlYWNoKHdvcmtlcjogKHZhbHVlOiBUKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICB3b3JrZXIodGhpcy52YWx1ZSBhcyBUKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHVybiB0aGUgYE9wdGlvbmFsYCBvYmplY3QgaW50byBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgdmFsdWVzXG4gICAqIHN0b3JlZCBpbnNpZGUgdGhlIGBPcHRpb25hbGAuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHRoZSBvdXRwdXQgd2lsbCBoYXZlXG4gICAqIGVpdGhlciAwIG9yIDEgZWxlbWVudHMuXG4gICAqL1xuICBwdWJsaWMgdG9BcnJheSgpOiBUW10ge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IFsgdGhpcy52YWx1ZSBhcyBUIF0gOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUdXJuIHRoZSBgT3B0aW9uYWxgIG9iamVjdCBpbnRvIGEgc3RyaW5nIGZvciBkZWJ1Z2dpbmcgb3IgcHJpbnRpbmcuIE5vdFxuICAgKiByZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbiBjb2RlLCBidXQgZ29vZCBmb3IgZGVidWdnaW5nLiBBbHNvIG5vdGUgdGhhdFxuICAgKiB0aGVzZSBkYXlzIGFuIGBPcHRpb25hbGAgb2JqZWN0IGNhbiBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUgZGlyZWN0bHksIGFuZFxuICAgKiBpdHMgaW5uZXIgdmFsdWUgKGlmIGl0IGV4aXN0cykgd2lsbCBiZSB2aXNpYmxlLlxuICAgKi9cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gYHNvbWUoJHt0aGlzLnZhbHVlfSlgIDogJ25vbmUoKSc7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFN0ckFwcGVuZCBmcm9tICcuLi9zdHIvU3RyQXBwZW5kJztcblxuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxuY29uc3QgY2hlY2tSYW5nZSA9IChzdHI6IHN0cmluZywgc3Vic3RyOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIpOiBib29sZWFuID0+XG4gIHN1YnN0ciA9PT0gJycgfHwgc3RyLmxlbmd0aCA+PSBzdWJzdHIubGVuZ3RoICYmIHN0ci5zdWJzdHIoc3RhcnQsIHN0YXJ0ICsgc3Vic3RyLmxlbmd0aCkgPT09IHN1YnN0cjtcblxuLyoqIEdpdmVuIGEgc3RyaW5nIGFuZCBvYmplY3QsIHBlcmZvcm0gdGVtcGxhdGUtcmVwbGFjZW1lbnRzIG9uIHRoZSBzdHJpbmcsIGFzIHNwZWNpZmllZCBieSB0aGUgb2JqZWN0LlxuICogQW55IHRlbXBsYXRlIGZpZWxkcyBvZiB0aGUgZm9ybSAke25hbWV9IGFyZSByZXBsYWNlZCBieSB0aGUgc3RyaW5nIG9yIG51bWJlciBzcGVjaWZpZWQgYXMgb2JqW1wibmFtZVwiXVxuICogQmFzZWQgb24gRG91Z2xhcyBDcm9ja2ZvcmQncyAnc3VwcGxhbnQnIG1ldGhvZCBmb3IgdGVtcGxhdGUtcmVwbGFjZSBvZiBzdHJpbmdzLiBVc2VzIGRpZmZlcmVudCB0ZW1wbGF0ZSBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBwbGFudCA9IChzdHI6IHN0cmluZywgb2JqOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogc3RyaW5nID0+IHtcbiAgY29uc3QgaXNTdHJpbmdPck51bWJlciA9IChhOiB1bmtub3duKTogYSBpcyBzdHJpbmcgfCBudW1iZXIgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgYTtcbiAgICByZXR1cm4gdCA9PT0gJ3N0cmluZycgfHwgdCA9PT0gJ251bWJlcic7XG4gIH07XG5cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXCRcXHsoW157fV0qKVxcfS9nLFxuICAgIChmdWxsTWF0Y2g6IHN0cmluZywga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07XG4gICAgICByZXR1cm4gaXNTdHJpbmdPck51bWJlcih2YWx1ZSkgPyB2YWx1ZS50b1N0cmluZygpIDogZnVsbE1hdGNoO1xuICAgIH1cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVMZWFkaW5nID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoKHN0ciwgcHJlZml4KSA/IFN0ckFwcGVuZC5yZW1vdmVGcm9tU3RhcnQoc3RyLCBwcmVmaXgubGVuZ3RoKSA6IHN0cjtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVUcmFpbGluZyA9IChzdHI6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZW5kc1dpdGgoc3RyLCBzdWZmaXgpID8gU3RyQXBwZW5kLnJlbW92ZUZyb21FbmQoc3RyLCBzdWZmaXgubGVuZ3RoKSA6IHN0cjtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVMZWFkaW5nID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoKHN0ciwgcHJlZml4KSA/IHN0ciA6IFN0ckFwcGVuZC5hZGRUb1N0YXJ0KHN0ciwgcHJlZml4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVUcmFpbGluZyA9IChzdHI6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZW5kc1dpdGgoc3RyLCBzdWZmaXgpID8gc3RyIDogU3RyQXBwZW5kLmFkZFRvRW5kKHN0ciwgc3VmZml4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb250YWlucyA9IChzdHI6IHN0cmluZywgc3Vic3RyOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ/OiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgY29uc3QgaWR4ID0gc3RyLmluZGV4T2Yoc3Vic3RyLCBzdGFydCk7XG4gIGlmIChpZHggIT09IC0xKSB7XG4gICAgcmV0dXJuIFR5cGUuaXNVbmRlZmluZWQoZW5kKSA/IHRydWUgOiBpZHggKyBzdWJzdHIubGVuZ3RoIDw9IGVuZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjYXBpdGFsaXplID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHN0ciA9PT0gJycgPyAnJyA6IHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHJpbmcoMSk7XG59O1xuXG4vKiogRG9lcyAnc3RyJyBzdGFydCB3aXRoICdwcmVmaXgnP1xuICogIE5vdGU6IGFsbCBzdHJpbmdzIHN0YXJ0IHdpdGggdGhlIGVtcHR5IHN0cmluZy5cbiAqICAgICAgICBNb3JlIGZvcm1hbGx5LCBmb3IgYWxsIHN0cmluZ3MgeCwgc3RhcnRzV2l0aCh4LCBcIlwiKS5cbiAqICAgICAgICBUaGlzIGlzIHNvIHRoYXQgZm9yIGFsbCBzdHJpbmdzIHggYW5kIHksIHN0YXJ0c1dpdGgoeSArIHgsIHkpXG4gKi9cbmV4cG9ydCBjb25zdCBzdGFydHNXaXRoID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gY2hlY2tSYW5nZShzdHIsIHByZWZpeCwgMCk7XG59O1xuXG4vKiogRG9lcyAnc3RyJyBlbmQgd2l0aCAnc3VmZml4Jz9cbiAqICBOb3RlOiBhbGwgc3RyaW5ncyBlbmQgd2l0aCB0aGUgZW1wdHkgc3RyaW5nLlxuICogICAgICAgIE1vcmUgZm9ybWFsbHksIGZvciBhbGwgc3RyaW5ncyB4LCBlbmRzV2l0aCh4LCBcIlwiKS5cbiAqICAgICAgICBUaGlzIGlzIHNvIHRoYXQgZm9yIGFsbCBzdHJpbmdzIHggYW5kIHksIGVuZHNXaXRoKHggKyB5LCB5KVxuICovXG5leHBvcnQgY29uc3QgZW5kc1dpdGggPSAoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBjaGVja1JhbmdlKHN0ciwgc3VmZml4LCBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCk7XG59O1xuXG5jb25zdCBibGFuayA9IChyOiBSZWdFeHApID0+IChzOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgcy5yZXBsYWNlKHIsICcnKTtcblxuLyoqIHJlbW92ZXMgYWxsIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcyAqL1xuZXhwb3J0IGNvbnN0IHRyaW06IChzOiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGJsYW5rKC9eXFxzK3xcXHMrJC9nKTtcblxuZXhwb3J0IGNvbnN0IGxUcmltOiAoczogc3RyaW5nKSA9PiBzdHJpbmcgPVxuICBibGFuaygvXlxccysvZyk7XG5cbmV4cG9ydCBjb25zdCByVHJpbTogKHM6IHN0cmluZykgPT4gc3RyaW5nID1cbiAgYmxhbmsoL1xccyskL2cpO1xuXG5leHBvcnQgY29uc3QgaXNOb3RFbXB0eSA9IChzOiBzdHJpbmcpOiBib29sZWFuID0+IHMubGVuZ3RoID4gMDtcblxuZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSAoczogc3RyaW5nKTogYm9vbGVhbiA9PiAhaXNOb3RFbXB0eShzKTtcblxuZXhwb3J0IGNvbnN0IHJlcGVhdCA9IChzOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpOiBzdHJpbmcgPT4gY291bnQgPD0gMCA/ICcnIDogbmV3IEFycmF5KGNvdW50ICsgMSkuam9pbihzKTtcblxuZXhwb3J0IGNvbnN0IGZyb21Db2RlUG9pbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuZXhwb3J0IGNvbnN0IHRvSW50ID0gKHZhbHVlOiBzdHJpbmcsIHJhZGl4OiBudW1iZXIgPSAxMCk6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgcmFkaXgpO1xuICByZXR1cm4gaXNOYU4obnVtKSA/IE9wdGlvbmFsLm5vbmUoKSA6IE9wdGlvbmFsLnNvbWUobnVtKTtcbn07XG5cbmV4cG9ydCBjb25zdCB0b0Zsb2F0ID0gKHZhbHVlOiBzdHJpbmcpOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIHJldHVybiBpc05hTihudW0pID8gT3B0aW9uYWwubm9uZSgpIDogT3B0aW9uYWwuc29tZShudW0pO1xufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby13cmFwcGVyLW9iamVjdC10eXBlcyAqL1xuY29uc3QgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbmludGVyZmFjZSBDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgT2JqZWN0PiB7XG4gIHJlYWRvbmx5IHByb3RvdHlwZTogVDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBoYXNQcm90byA9IDxUIGV4dGVuZHMgT2JqZWN0Pih2OiBPYmplY3QsIGNvbnN0cnVjdG9yOiBDb25zdHJ1Y3RvcjxUPiwgcHJlZGljYXRlOiAodjogT2JqZWN0LCBwcm90b3R5cGU6IFQpID0+IGJvb2xlYW4pOiBib29sZWFuID0+IHtcbiAgaWYgKHByZWRpY2F0ZSh2LCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgLy8gU3RyaW5nLWJhc2VkIGZhbGxiYWNrIHRpbWVcbiAgICByZXR1cm4gdi5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gY29uc3RydWN0b3IubmFtZTtcbiAgfVxufTtcblxuY29uc3QgdHlwZU9mID0gKHg6IGFueSk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHQgPSB0eXBlb2YgeDtcbiAgaWYgKHggPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9IGVsc2UgaWYgKHQgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfSBlbHNlIGlmICh0ID09PSAnb2JqZWN0JyAmJiBoYXNQcm90byh4LCBTdHJpbmcsIChvLCBwcm90bykgPT4gcHJvdG8uaXNQcm90b3R5cGVPZihvKSkpIHtcbiAgICByZXR1cm4gJ3N0cmluZyc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbn07XG5cbmNvbnN0IGlzVHlwZSA9IDxZb2xvPih0eXBlOiBzdHJpbmcpID0+ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgWW9sbyA9PlxuICB0eXBlT2YodmFsdWUpID09PSB0eXBlO1xuXG5jb25zdCBpc1NpbXBsZVR5cGUgPSA8WW9sbz4odHlwZTogc3RyaW5nKSA9PiAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFlvbG8gPT5cbiAgdHlwZW9mIHZhbHVlID09PSB0eXBlO1xuXG5jb25zdCBlcSA9IDxUPiAodDogVCkgPT4gKGE6IGFueSk6IGEgaXMgVCA9PlxuICB0ID09PSBhO1xuXG5leHBvcnQgY29uc3QgaXMgPSA8RSBleHRlbmRzIE9iamVjdD4odmFsdWU6IGFueSwgY29uc3RydWN0b3I6IENvbnN0cnVjdG9yPEU+KTogdmFsdWUgaXMgRSA9PlxuICBpc09iamVjdCh2YWx1ZSkgJiYgaGFzUHJvdG88RT4odmFsdWUsIGNvbnN0cnVjdG9yLCAobywgcHJvdG8pID0+IGdldFByb3RvdHlwZU9mKG8pID09PSBwcm90byk7XG5cbmV4cG9ydCBjb25zdCBpc1N0cmluZzogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIHN0cmluZyA9XG4gIGlzVHlwZSgnc3RyaW5nJyk7XG5cbmV4cG9ydCBjb25zdCBpc09iamVjdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE9iamVjdCA9XG4gIGlzVHlwZSgnb2JqZWN0Jyk7XG5cbmV4cG9ydCBjb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgT2JqZWN0ID0+XG4gIGlzKHZhbHVlLCBPYmplY3QpO1xuXG5leHBvcnQgY29uc3QgaXNBcnJheTogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEFycmF5PHVua25vd24+ID1cbiAgaXNUeXBlKCdhcnJheScpO1xuXG5leHBvcnQgY29uc3QgaXNOdWxsOiAoYTogYW55KSA9PiBhIGlzIG51bGwgPVxuICBlcShudWxsKTtcblxuZXhwb3J0IGNvbnN0IGlzQm9vbGVhbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIGJvb2xlYW4gPVxuICBpc1NpbXBsZVR5cGU8Ym9vbGVhbj4oJ2Jvb2xlYW4nKTtcblxuZXhwb3J0IGNvbnN0IGlzVW5kZWZpbmVkOiAoYTogYW55KSA9PiBhIGlzIHVuZGVmaW5lZCA9XG4gIGVxKHVuZGVmaW5lZCk7XG5cbmV4cG9ydCBjb25zdCBpc051bGxhYmxlID0gKGE6IGFueSk6IGEgaXMgbnVsbCB8IHVuZGVmaW5lZCA9PlxuICBhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZDtcblxuZXhwb3J0IGNvbnN0IGlzTm9uTnVsbGFibGUgPSA8QT4gKGE6IEEgfCBudWxsIHwgdW5kZWZpbmVkKTogYSBpcyBOb25OdWxsYWJsZTxBPiA9PlxuICAhaXNOdWxsYWJsZShhKTtcblxuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBGdW5jdGlvbiA9XG4gIGlzU2ltcGxlVHlwZTxGdW5jdGlvbj4oJ2Z1bmN0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBpc051bWJlcjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIG51bWJlciA9XG4gIGlzU2ltcGxlVHlwZTxudW1iZXI+KCdudW1iZXInKTtcblxuZXhwb3J0IGNvbnN0IGlzQXJyYXlPZiA9IDxFPih2YWx1ZTogYW55LCBwcmVkOiAoeDogYW55KSA9PiB4IGlzIEUpOiB2YWx1ZSBpcyBBcnJheTxFPiA9PiB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgaWYgKCEocHJlZCh2YWx1ZVtpXSkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUHJvbWlzZUxpa2UgPSAoeDogYW55KTogeCBpcyBQcm9taXNlPHVua25vd24+ID0+XG4gIGlzT2JqZWN0KHgpXG4gICYmIGlzRnVuY3Rpb24oeC50aGVuKVxuICAmJiBpc0Z1bmN0aW9uKHguY2F0Y2gpO1xuIiwiZXhwb3J0IGNvbnN0IGFkZFRvU3RhcnQgPSAoc3RyOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHByZWZpeCArIHN0cjtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRUb0VuZCA9IChzdHI6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gc3RyICsgc3VmZml4O1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUZyb21TdGFydCA9IChzdHI6IHN0cmluZywgbnVtQ2hhcnM6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdHIuc3Vic3RyaW5nKG51bUNoYXJzKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVGcm9tRW5kID0gKHN0cjogc3RyaW5nLCBudW1DaGFyczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCAtIG51bUNoYXJzKTtcbn07XG4iLCJpbXBvcnQgUGx1Z2luTWFuYWdlciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL1BsdWdpbk1hbmFnZXInO1xuXG5pbXBvcnQgKiBhcyBBcGkgZnJvbSAnLi9hcGkvQXBpJztcbmltcG9ydCAqIGFzIENvbW1hbmRzIGZyb20gJy4vYXBpL0NvbW1hbmRzJztcbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi9hcGkvT3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBGaWx0ZXJDb250ZW50IGZyb20gJy4vY29yZS9GaWx0ZXJDb250ZW50JztcbmltcG9ydCAqIGFzIFJlc29sdmVOYW1lIGZyb20gJy4vY29yZS9SZXNvbHZlTmFtZSc7XG5pbXBvcnQgKiBhcyBTZWxlY3Rpb24gZnJvbSAnLi9jb3JlL1NlbGVjdGlvbic7XG5pbXBvcnQgKiBhcyBCdXR0b25zIGZyb20gJy4vdWkvQnV0dG9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0ICgpOiB2b2lkID0+IHtcbiAgUGx1Z2luTWFuYWdlci5hZGQoJ21lZGlhJywgKGVkaXRvcikgPT4ge1xuICAgIE9wdGlvbnMucmVnaXN0ZXIoZWRpdG9yKTtcbiAgICBDb21tYW5kcy5yZWdpc3RlcihlZGl0b3IpO1xuICAgIEJ1dHRvbnMucmVnaXN0ZXIoZWRpdG9yKTtcbiAgICBSZXNvbHZlTmFtZS5zZXR1cChlZGl0b3IpO1xuICAgIEZpbHRlckNvbnRlbnQuc2V0dXAoZWRpdG9yKTtcbiAgICBTZWxlY3Rpb24uc2V0dXAoZWRpdG9yKTtcbiAgICByZXR1cm4gQXBpLmdldChlZGl0b3IpO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBEaWFsb2cgZnJvbSAnLi4vdWkvRGlhbG9nJztcblxuZXhwb3J0IGludGVyZmFjZSBBcGkge1xuICByZWFkb25seSBzaG93RGlhbG9nOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBnZXQgPSAoZWRpdG9yOiBFZGl0b3IpOiBBcGkgPT4ge1xuICBjb25zdCBzaG93RGlhbG9nID0gKCkgPT4ge1xuICAgIERpYWxvZy5zaG93RGlhbG9nKGVkaXRvcik7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzaG93RGlhbG9nXG4gIH07XG59O1xuXG5leHBvcnQge1xuICBnZXRcbn07XG4iLCJpbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBEaWFsb2cgZnJvbSAnLi4vdWkvRGlhbG9nJztcblxuY29uc3QgcmVnaXN0ZXIgPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgY29uc3Qgc2hvd0RpYWxvZyA9ICgpID0+IHtcbiAgICBEaWFsb2cuc2hvd0RpYWxvZyhlZGl0b3IpO1xuICB9O1xuXG4gIGVkaXRvci5hZGRDb21tYW5kKCdtY2VNZWRpYScsIHNob3dEaWFsb2cpO1xufTtcblxuZXhwb3J0IHtcbiAgcmVnaXN0ZXJcbn07XG4iLCJpbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBFZGl0b3JPcHRpb25zIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS9PcHRpb25UeXBlcyc7XG5cbmltcG9ydCB0eXBlIHsgRGF0YVRvSHRtbENhbGxiYWNrIH0gZnJvbSAnLi4vY29yZS9EYXRhVG9IdG1sJztcbmltcG9ydCB0eXBlIHsgTWVkaWFSZXNvbHZlciB9IGZyb20gJy4uL2NvcmUvU2VydmljZSc7XG5cbmNvbnN0IG9wdGlvbjoge1xuICA8SyBleHRlbmRzIGtleW9mIEVkaXRvck9wdGlvbnM+KG5hbWU6IEspOiAoZWRpdG9yOiBFZGl0b3IpID0+IEVkaXRvck9wdGlvbnNbS107XG4gIDxUPihuYW1lOiBzdHJpbmcpOiAoZWRpdG9yOiBFZGl0b3IpID0+IFQ7XG59ID0gKG5hbWU6IHN0cmluZykgPT4gKGVkaXRvcjogRWRpdG9yKSA9PlxuICBlZGl0b3Iub3B0aW9ucy5nZXQobmFtZSk7XG5cbmNvbnN0IHJlZ2lzdGVyID0gKGVkaXRvcjogRWRpdG9yKTogdm9pZCA9PiB7XG4gIGNvbnN0IHJlZ2lzdGVyT3B0aW9uID0gZWRpdG9yLm9wdGlvbnMucmVnaXN0ZXI7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ2F1ZGlvX3RlbXBsYXRlX2NhbGxiYWNrJywge1xuICAgIHByb2Nlc3NvcjogJ2Z1bmN0aW9uJ1xuICB9KTtcblxuICByZWdpc3Rlck9wdGlvbigndmlkZW9fdGVtcGxhdGVfY2FsbGJhY2snLCB7XG4gICAgcHJvY2Vzc29yOiAnZnVuY3Rpb24nXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdpZnJhbWVfdGVtcGxhdGVfY2FsbGJhY2snLCB7XG4gICAgcHJvY2Vzc29yOiAnZnVuY3Rpb24nXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdtZWRpYV9saXZlX2VtYmVkcycsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdtZWRpYV9maWx0ZXJfaHRtbCcsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdtZWRpYV91cmxfcmVzb2x2ZXInLCB7XG4gICAgcHJvY2Vzc29yOiAnZnVuY3Rpb24nXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdtZWRpYV9hbHRfc291cmNlJywge1xuICAgIHByb2Nlc3NvcjogJ2Jvb2xlYW4nLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ21lZGlhX3Bvc3RlcicsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCdtZWRpYV9kaW1lbnNpb25zJywge1xuICAgIHByb2Nlc3NvcjogJ2Jvb2xlYW4nLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRBdWRpb1RlbXBsYXRlQ2FsbGJhY2sgPSBvcHRpb248RGF0YVRvSHRtbENhbGxiYWNrIHwgdW5kZWZpbmVkPignYXVkaW9fdGVtcGxhdGVfY2FsbGJhY2snKTtcbmNvbnN0IGdldFZpZGVvVGVtcGxhdGVDYWxsYmFjayA9IG9wdGlvbjxEYXRhVG9IdG1sQ2FsbGJhY2sgfCB1bmRlZmluZWQ+KCd2aWRlb190ZW1wbGF0ZV9jYWxsYmFjaycpO1xuY29uc3QgZ2V0SWZyYW1lVGVtcGxhdGVDYWxsYmFjayA9IG9wdGlvbjxEYXRhVG9IdG1sQ2FsbGJhY2sgfCB1bmRlZmluZWQ+KCdpZnJhbWVfdGVtcGxhdGVfY2FsbGJhY2snKTtcbmNvbnN0IGhhc0xpdmVFbWJlZHMgPSBvcHRpb248Ym9vbGVhbj4oJ21lZGlhX2xpdmVfZW1iZWRzJyk7XG5jb25zdCBzaG91bGRGaWx0ZXJIdG1sID0gb3B0aW9uPGJvb2xlYW4+KCdtZWRpYV9maWx0ZXJfaHRtbCcpO1xuY29uc3QgZ2V0VXJsUmVzb2x2ZXIgPSBvcHRpb248TWVkaWFSZXNvbHZlciB8IHVuZGVmaW5lZD4oJ21lZGlhX3VybF9yZXNvbHZlcicpO1xuY29uc3QgaGFzQWx0U291cmNlID0gb3B0aW9uPGJvb2xlYW4+KCdtZWRpYV9hbHRfc291cmNlJyk7XG5jb25zdCBoYXNQb3N0ZXIgPSBvcHRpb248Ym9vbGVhbj4oJ21lZGlhX3Bvc3RlcicpO1xuY29uc3QgaGFzRGltZW5zaW9ucyA9IG9wdGlvbjxib29sZWFuPignbWVkaWFfZGltZW5zaW9ucycpO1xuXG5leHBvcnQge1xuICByZWdpc3RlcixcbiAgZ2V0QXVkaW9UZW1wbGF0ZUNhbGxiYWNrLFxuICBnZXRWaWRlb1RlbXBsYXRlQ2FsbGJhY2ssXG4gIGdldElmcmFtZVRlbXBsYXRlQ2FsbGJhY2ssXG4gIGhhc0xpdmVFbWJlZHMsXG4gIHNob3VsZEZpbHRlckh0bWwsXG4gIGdldFVybFJlc29sdmVyLFxuICBoYXNBbHRTb3VyY2UsXG4gIGhhc1Bvc3RlcixcbiAgaGFzRGltZW5zaW9uc1xufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgVG9vbHMgZnJvbSAndGlueW1jZS9jb3JlL2FwaS91dGlsL1Rvb2xzJztcblxuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuLi9hcGkvT3B0aW9ucyc7XG5cbmltcG9ydCAqIGFzIEh0bWxUb0RhdGEgZnJvbSAnLi9IdG1sVG9EYXRhJztcbmltcG9ydCAqIGFzIE1pbWUgZnJvbSAnLi9NaW1lJztcbmltcG9ydCB0eXBlIHsgTWVkaWFEYXRhIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgKiBhcyBVcGRhdGVIdG1sIGZyb20gJy4vVXBkYXRlSHRtbCc7XG5pbXBvcnQgKiBhcyBVcmxQYXR0ZXJucyBmcm9tICcuL1VybFBhdHRlcm5zJztcblxuZXhwb3J0IHR5cGUgRGF0YVRvSHRtbENhbGxiYWNrID0gKGRhdGE6IE1lZGlhRGF0YSkgPT4gc3RyaW5nO1xuXG5jb25zdCBnZXRJZnJhbWVIdG1sID0gKGRhdGE6IE1lZGlhRGF0YSwgaWZyYW1lVGVtcGxhdGVDYWxsYmFjazogRGF0YVRvSHRtbENhbGxiYWNrIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKGlmcmFtZVRlbXBsYXRlQ2FsbGJhY2spIHtcbiAgICByZXR1cm4gaWZyYW1lVGVtcGxhdGVDYWxsYmFjayhkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBhbGxvd0Z1bGxzY3JlZW4gPSBkYXRhLmFsbG93ZnVsbHNjcmVlbiA/ICcgYWxsb3dGdWxsc2NyZWVuPVwiMVwiJyA6ICcnO1xuICAgIHJldHVybiAnPGlmcmFtZSBzcmM9XCInICsgZGF0YS5zb3VyY2UgKyAnXCIgd2lkdGg9XCInICsgZGF0YS53aWR0aCArICdcIiBoZWlnaHQ9XCInICsgZGF0YS5oZWlnaHQgKyAnXCInICsgYWxsb3dGdWxsc2NyZWVuICsgJz48L2lmcmFtZT4nO1xuICB9XG59O1xuXG5jb25zdCBnZXRGbGFzaEh0bWwgPSAoZGF0YTogTWVkaWFEYXRhKTogc3RyaW5nID0+IHtcbiAgbGV0IGh0bWwgPSAnPG9iamVjdCBkYXRhPVwiJyArIGRhdGEuc291cmNlICsgJ1wiIHdpZHRoPVwiJyArIGRhdGEud2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIGRhdGEuaGVpZ2h0ICsgJ1wiIHR5cGU9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiPic7XG5cbiAgaWYgKGRhdGEucG9zdGVyKSB7XG4gICAgaHRtbCArPSAnPGltZyBzcmM9XCInICsgZGF0YS5wb3N0ZXIgKyAnXCIgd2lkdGg9XCInICsgZGF0YS53aWR0aCArICdcIiBoZWlnaHQ9XCInICsgZGF0YS5oZWlnaHQgKyAnXCIgLz4nO1xuICB9XG5cbiAgaHRtbCArPSAnPC9vYmplY3Q+JztcblxuICByZXR1cm4gaHRtbDtcbn07XG5cbmNvbnN0IGdldEF1ZGlvSHRtbCA9IChkYXRhOiBNZWRpYURhdGEsIGF1ZGlvVGVtcGxhdGVDYWxsYmFjazogRGF0YVRvSHRtbENhbGxiYWNrIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKGF1ZGlvVGVtcGxhdGVDYWxsYmFjaykge1xuICAgIHJldHVybiBhdWRpb1RlbXBsYXRlQ2FsbGJhY2soZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgICc8YXVkaW8gY29udHJvbHM9XCJjb250cm9sc1wiIHNyYz1cIicgKyBkYXRhLnNvdXJjZSArICdcIj4nICtcbiAgICAgIChcbiAgICAgICAgZGF0YS5hbHRzb3VyY2UgP1xuICAgICAgICAgICdcXG48c291cmNlIHNyYz1cIicgKyBkYXRhLmFsdHNvdXJjZSArICdcIicgK1xuICAgICAgICAgIChkYXRhLmFsdHNvdXJjZW1pbWUgPyAnIHR5cGU9XCInICsgZGF0YS5hbHRzb3VyY2VtaW1lICsgJ1wiJyA6ICcnKSArXG4gICAgICAgICAgJyAvPlxcbicgOiAnJykgK1xuICAgICAgJzwvYXVkaW8+J1xuICAgICk7XG4gIH1cbn07XG5cbmNvbnN0IGdldFZpZGVvSHRtbCA9IChkYXRhOiBNZWRpYURhdGEsIHZpZGVvVGVtcGxhdGVDYWxsYmFjazogRGF0YVRvSHRtbENhbGxiYWNrIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKHZpZGVvVGVtcGxhdGVDYWxsYmFjaykge1xuICAgIHJldHVybiB2aWRlb1RlbXBsYXRlQ2FsbGJhY2soZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgICc8dmlkZW8gd2lkdGg9XCInICsgZGF0YS53aWR0aCArXG4gICAgICAnXCIgaGVpZ2h0PVwiJyArIGRhdGEuaGVpZ2h0ICsgJ1wiJyArXG4gICAgICAoZGF0YS5wb3N0ZXIgPyAnIHBvc3Rlcj1cIicgKyBkYXRhLnBvc3RlciArICdcIicgOiAnJykgKyAnIGNvbnRyb2xzPVwiY29udHJvbHNcIj5cXG4nICtcbiAgICAgICc8c291cmNlIHNyYz1cIicgKyBkYXRhLnNvdXJjZSArICdcIicgK1xuICAgICAgKGRhdGEuc291cmNlbWltZSA/ICcgdHlwZT1cIicgKyBkYXRhLnNvdXJjZW1pbWUgKyAnXCInIDogJycpICsgJyAvPlxcbicgK1xuICAgICAgKGRhdGEuYWx0c291cmNlID8gJzxzb3VyY2Ugc3JjPVwiJyArIGRhdGEuYWx0c291cmNlICsgJ1wiJyArXG4gICAgICAgIChkYXRhLmFsdHNvdXJjZW1pbWUgPyAnIHR5cGU9XCInICsgZGF0YS5hbHRzb3VyY2VtaW1lICsgJ1wiJyA6ICcnKSArICcgLz5cXG4nIDogJycpICtcbiAgICAgICc8L3ZpZGVvPidcbiAgICApO1xuICB9XG59O1xuXG5jb25zdCBkYXRhVG9IdG1sID0gKGVkaXRvcjogRWRpdG9yLCBkYXRhSW46IE1lZGlhRGF0YSk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGRhdGE6IE1lZGlhRGF0YSA9IFRvb2xzLmV4dGVuZCh7fSwgZGF0YUluKTtcblxuICBpZiAoIWRhdGEuc291cmNlKSB7XG4gICAgVG9vbHMuZXh0ZW5kKGRhdGEsIEh0bWxUb0RhdGEuaHRtbFRvRGF0YShkYXRhLmVtYmVkID8/ICcnLCBlZGl0b3Iuc2NoZW1hKSk7XG4gICAgaWYgKCFkYXRhLnNvdXJjZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZGF0YS5hbHRzb3VyY2UpIHtcbiAgICBkYXRhLmFsdHNvdXJjZSA9ICcnO1xuICB9XG5cbiAgaWYgKCFkYXRhLnBvc3Rlcikge1xuICAgIGRhdGEucG9zdGVyID0gJyc7XG4gIH1cblxuICBkYXRhLnNvdXJjZSA9IGVkaXRvci5jb252ZXJ0VVJMKGRhdGEuc291cmNlLCAnc291cmNlJyk7XG4gIGRhdGEuYWx0c291cmNlID0gZWRpdG9yLmNvbnZlcnRVUkwoZGF0YS5hbHRzb3VyY2UsICdzb3VyY2UnKTtcbiAgZGF0YS5zb3VyY2VtaW1lID0gTWltZS5ndWVzcyhkYXRhLnNvdXJjZSk7XG4gIGRhdGEuYWx0c291cmNlbWltZSA9IE1pbWUuZ3Vlc3MoZGF0YS5hbHRzb3VyY2UpO1xuICBkYXRhLnBvc3RlciA9IGVkaXRvci5jb252ZXJ0VVJMKGRhdGEucG9zdGVyLCAncG9zdGVyJyk7XG5cbiAgY29uc3QgcGF0dGVybiA9IFVybFBhdHRlcm5zLm1hdGNoUGF0dGVybihkYXRhLnNvdXJjZSk7XG5cbiAgaWYgKHBhdHRlcm4pIHtcbiAgICBkYXRhLnNvdXJjZSA9IHBhdHRlcm4udXJsO1xuICAgIGRhdGEudHlwZSA9IHBhdHRlcm4udHlwZTtcbiAgICBkYXRhLmFsbG93ZnVsbHNjcmVlbiA9IHBhdHRlcm4uYWxsb3dGdWxsc2NyZWVuO1xuICAgIGRhdGEud2lkdGggPSBkYXRhLndpZHRoIHx8IFN0cmluZyhwYXR0ZXJuLncpO1xuICAgIGRhdGEuaGVpZ2h0ID0gZGF0YS5oZWlnaHQgfHwgU3RyaW5nKHBhdHRlcm4uaCk7XG4gIH1cblxuICBpZiAoZGF0YS5lbWJlZCkge1xuICAgIHJldHVybiBVcGRhdGVIdG1sLnVwZGF0ZUh0bWwoZGF0YS5lbWJlZCwgZGF0YSwgdHJ1ZSwgZWRpdG9yLnNjaGVtYSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYXVkaW9UZW1wbGF0ZUNhbGxiYWNrID0gT3B0aW9ucy5nZXRBdWRpb1RlbXBsYXRlQ2FsbGJhY2soZWRpdG9yKTtcbiAgICBjb25zdCB2aWRlb1RlbXBsYXRlQ2FsbGJhY2sgPSBPcHRpb25zLmdldFZpZGVvVGVtcGxhdGVDYWxsYmFjayhlZGl0b3IpO1xuICAgIGNvbnN0IGlmcmFtZVRlbXBsYXRlQ2FsbGJhY2sgPSBPcHRpb25zLmdldElmcmFtZVRlbXBsYXRlQ2FsbGJhY2soZWRpdG9yKTtcblxuICAgIGRhdGEud2lkdGggPSBkYXRhLndpZHRoIHx8ICczMDAnO1xuICAgIGRhdGEuaGVpZ2h0ID0gZGF0YS5oZWlnaHQgfHwgJzE1MCc7XG5cbiAgICBUb29scy5lYWNoKGRhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAoZGF0YSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KVtrZXldID0gZWRpdG9yLmRvbS5lbmNvZGUoJycgKyB2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAnaWZyYW1lJykge1xuICAgICAgcmV0dXJuIGdldElmcmFtZUh0bWwoZGF0YSwgaWZyYW1lVGVtcGxhdGVDYWxsYmFjayk7XG4gICAgfSBlbHNlIGlmIChkYXRhLnNvdXJjZW1pbWUgPT09ICdhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCcpIHtcbiAgICAgIHJldHVybiBnZXRGbGFzaEh0bWwoZGF0YSk7XG4gICAgfSBlbHNlIGlmIChkYXRhLnNvdXJjZW1pbWUuaW5kZXhPZignYXVkaW8nKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBnZXRBdWRpb0h0bWwoZGF0YSwgYXVkaW9UZW1wbGF0ZUNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldFZpZGVvSHRtbChkYXRhLCB2aWRlb1RlbXBsYXRlQ2FsbGJhY2spO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgZGF0YVRvSHRtbFxufTtcbiIsImltcG9ydCB7IEFyciwgT2JqIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCBBc3ROb2RlIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9Ob2RlJztcblxuaW1wb3J0ICogYXMgTm9kZXMgZnJvbSAnLi9Ob2Rlcyc7XG5pbXBvcnQgKiBhcyBTYW5pdGl6ZSBmcm9tICcuL1Nhbml0aXplJztcblxuZGVjbGFyZSBsZXQgdW5lc2NhcGU6IGFueTtcblxuY29uc3Qgc2V0dXAgPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgZWRpdG9yLm9uKCdQcmVJbml0JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgc2NoZW1hLCBzZXJpYWxpemVyLCBwYXJzZXIgfSA9IGVkaXRvcjtcbiAgICAvLyBTZXQgYnJvd3NlciBzcGVjaWZpYyBhbGxvd0Z1bGxzY3JlZW4gYXR0cmlicyBhcyBib29sZWFuXG4gICAgY29uc3QgYm9vbEF0dHJzID0gc2NoZW1hLmdldEJvb2xBdHRycygpO1xuICAgIEFyci5lYWNoKCd3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuJy5zcGxpdCgnICcpLCAobmFtZSkgPT4ge1xuICAgICAgYm9vbEF0dHJzW25hbWVdID0ge307XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgc29tZSBub24tc3RhbmRhcmQgYXR0cmlidXRlcyB0byB0aGUgc2NoZW1hXG4gICAgT2JqLmVhY2goe1xuICAgICAgZW1iZWQ6IFsgJ3dtb2RlJyBdXG4gICAgfSwgKGF0dHJzLCBuYW1lKSA9PiB7XG4gICAgICBjb25zdCBydWxlID0gc2NoZW1hLmdldEVsZW1lbnRSdWxlKG5hbWUpO1xuICAgICAgaWYgKHJ1bGUpIHtcbiAgICAgICAgQXJyLmVhY2goYXR0cnMsIChhdHRyKSA9PiB7XG4gICAgICAgICAgcnVsZS5hdHRyaWJ1dGVzW2F0dHJdID0ge307XG4gICAgICAgICAgcnVsZS5hdHRyaWJ1dGVzT3JkZXIucHVzaChhdHRyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDb252ZXJ0cyBpZnJhbWUsIHZpZGVvIGV0YyBpbnRvIHBsYWNlaG9sZGVyIGltYWdlc1xuICAgIHBhcnNlci5hZGROb2RlRmlsdGVyKCdpZnJhbWUsdmlkZW8sYXVkaW8sb2JqZWN0LGVtYmVkJywgTm9kZXMucGxhY2VIb2xkZXJDb252ZXJ0ZXIoZWRpdG9yKSk7XG5cbiAgICAvLyBSZXBsYWNlcyBwbGFjZWhvbGRlciBpbWFnZXMgd2l0aCByZWFsIGVsZW1lbnRzIGZvciB2aWRlbywgb2JqZWN0LCBpZnJhbWUgZXRjXG4gICAgc2VyaWFsaXplci5hZGRBdHRyaWJ1dGVGaWx0ZXIoJ2RhdGEtbWNlLW9iamVjdCcsIChub2RlcywgbmFtZSkgPT4ge1xuICAgICAgbGV0IGkgPSBub2Rlcy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKCFub2RlLnBhcmVudCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVhbEVsbU5hbWUgPSBub2RlLmF0dHIobmFtZSkgYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCByZWFsRWxtID0gbmV3IEFzdE5vZGUocmVhbEVsbU5hbWUsIDEpO1xuXG4gICAgICAgIC8vIEFkZCB3aWR0aC9oZWlnaHQgdG8gZXZlcnl0aGluZyBidXQgYXVkaW9cbiAgICAgICAgaWYgKHJlYWxFbG1OYW1lICE9PSAnYXVkaW8nKSB7XG4gICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gbm9kZS5hdHRyKCdjbGFzcycpO1xuICAgICAgICAgIGlmIChjbGFzc05hbWUgJiYgY2xhc3NOYW1lLmluZGV4T2YoJ21jZS1wcmV2aWV3LW9iamVjdCcpICE9PSAtMSAmJiBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHJlYWxFbG0uYXR0cih7XG4gICAgICAgICAgICAgIHdpZHRoOiBub2RlLmZpcnN0Q2hpbGQuYXR0cignd2lkdGgnKSxcbiAgICAgICAgICAgICAgaGVpZ2h0OiBub2RlLmZpcnN0Q2hpbGQuYXR0cignaGVpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWFsRWxtLmF0dHIoe1xuICAgICAgICAgICAgICB3aWR0aDogbm9kZS5hdHRyKCd3aWR0aCcpLFxuICAgICAgICAgICAgICBoZWlnaHQ6IG5vZGUuYXR0cignaGVpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlYWxFbG0uYXR0cih7XG4gICAgICAgICAgc3R5bGU6IG5vZGUuYXR0cignc3R5bGUnKVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVbnByZWZpeCBhbGwgcGxhY2Vob2xkZXIgYXR0cmlidXRlc1xuICAgICAgICBjb25zdCBhdHRyaWJzID0gbm9kZS5hdHRyaWJ1dGVzID8/IFtdO1xuICAgICAgICBsZXQgYWkgPSBhdHRyaWJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGFpLS0pIHtcbiAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IGF0dHJpYnNbYWldLm5hbWU7XG5cbiAgICAgICAgICBpZiAoYXR0ck5hbWUuaW5kZXhPZignZGF0YS1tY2UtcC0nKSA9PT0gMCkge1xuICAgICAgICAgICAgcmVhbEVsbS5hdHRyKGF0dHJOYW1lLnN1YnN0cigxMSksIGF0dHJpYnNbYWldLnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmplY3QgaW5uZXJodG1sXG4gICAgICAgIGNvbnN0IGlubmVySHRtbCA9IG5vZGUuYXR0cignZGF0YS1tY2UtaHRtbCcpO1xuICAgICAgICBpZiAoaW5uZXJIdG1sKSB7XG4gICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBTYW5pdGl6ZS5wYXJzZUFuZFNhbml0aXplKGVkaXRvciwgcmVhbEVsbU5hbWUsIHVuZXNjYXBlKGlubmVySHRtbCkpO1xuICAgICAgICAgIEFyci5lYWNoKGZyYWdtZW50LmNoaWxkcmVuKCksIChjaGlsZCkgPT4gcmVhbEVsbS5hcHBlbmQoY2hpbGQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUucmVwbGFjZShyZWFsRWxtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZWRpdG9yLm9uKCdTZXRDb250ZW50JywgKCkgPT4ge1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkbid0IGJlIG5lZWRlZCB0aGVyZSBzaG91bGQgYmUgYSB3YXkgdG8gbWFyayBib2d1c1xuICAgIC8vIGVsZW1lbnRzIHNvIHRoZXkgYXJlIG5ldmVyIHJlbW92ZWQgZXhjZXB0IGV4dGVybmFsIHNhdmVcbiAgICBjb25zdCBkb20gPSBlZGl0b3IuZG9tO1xuICAgIEFyci5lYWNoKGRvbS5zZWxlY3QoJ3NwYW4ubWNlLXByZXZpZXctb2JqZWN0JyksIChlbG0pID0+IHtcbiAgICAgIGlmIChkb20uc2VsZWN0KCdzcGFuLm1jZS1zaGltJywgZWxtKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZG9tLmFkZChlbG0sICdzcGFuJywgeyBjbGFzczogJ21jZS1zaGltJyB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBzZXR1cFxufTtcbiIsImltcG9ydCB7IE9iaiB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCBET01VdGlscyBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2RvbS9ET01VdGlscyc7XG5pbXBvcnQgRG9tUGFyc2VyIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9Eb21QYXJzZXInO1xuaW1wb3J0IHR5cGUgQXN0Tm9kZSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2h0bWwvTm9kZSc7XG5pbXBvcnQgdHlwZSBTY2hlbWEgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9odG1sL1NjaGVtYSc7XG5pbXBvcnQgVG9vbHMgZnJvbSAndGlueW1jZS9jb3JlL2FwaS91dGlsL1Rvb2xzJztcblxuaW1wb3J0IHR5cGUgeyBNZWRpYURhdGEgfSBmcm9tICcuL1R5cGVzJztcblxuY29uc3QgRE9NID0gRE9NVXRpbHMuRE9NO1xuXG5jb25zdCB0cmltUHggPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PlxuICB2YWx1ZS5yZXBsYWNlKC9weCQvLCAnJyk7XG5cbmNvbnN0IGdldEVwaG94RW1iZWREYXRhID0gKG5vZGU6IEFzdE5vZGUpOiBNZWRpYURhdGEgPT4ge1xuICBjb25zdCBzdHlsZSA9IG5vZGUuYXR0cignc3R5bGUnKTtcbiAgY29uc3Qgc3R5bGVzID0gc3R5bGUgPyBET00ucGFyc2VTdHlsZShzdHlsZSkgOiB7IH07XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2VwaG94LWVtYmVkLWlyaScsXG4gICAgc291cmNlOiBub2RlLmF0dHIoJ2RhdGEtZXBob3gtZW1iZWQtaXJpJykgYXMgc3RyaW5nLFxuICAgIGFsdHNvdXJjZTogJycsXG4gICAgcG9zdGVyOiAnJyxcbiAgICB3aWR0aDogT2JqLmdldChzdHlsZXMsICdtYXgtd2lkdGgnKS5tYXAodHJpbVB4KS5nZXRPcignJyksXG4gICAgaGVpZ2h0OiBPYmouZ2V0KHN0eWxlcywgJ21heC1oZWlnaHQnKS5tYXAodHJpbVB4KS5nZXRPcignJylcbiAgfTtcbn07XG5cbmNvbnN0IGh0bWxUb0RhdGEgPSAoaHRtbDogc3RyaW5nLCBzY2hlbWE/OiBTY2hlbWEpOiBNZWRpYURhdGEgPT4ge1xuICBsZXQgZGF0YSA9IHt9IGFzIFBhcnRpYWw8TWVkaWFEYXRhPjtcblxuICBjb25zdCBwYXJzZXIgPSBEb21QYXJzZXIoeyB2YWxpZGF0ZTogZmFsc2UsIGZvcmNlZF9yb290X2Jsb2NrOiBmYWxzZSB9LCBzY2hlbWEpO1xuICBjb25zdCByb290Tm9kZSA9IHBhcnNlci5wYXJzZShodG1sKTtcblxuICBmb3IgKGxldCBub2RlOiBBc3ROb2RlIHwgbnVsbCB8IHVuZGVmaW5lZCA9IHJvb3ROb2RlOyBub2RlOyBub2RlID0gbm9kZS53YWxrKCkpIHtcbiAgICBpZiAobm9kZS50eXBlID09PSAxKSB7XG4gICAgICBjb25zdCBuYW1lID0gbm9kZS5uYW1lO1xuXG4gICAgICBpZiAobm9kZS5hdHRyKCdkYXRhLWVwaG94LWVtYmVkLWlyaScpKSB7XG4gICAgICAgIGRhdGEgPSBnZXRFcGhveEVtYmVkRGF0YShub2RlKTtcbiAgICAgICAgLy8gRG9uJ3QgY29udGludWUgdG8gY29sbGVjdCBpZiB3ZSBmaW5kIGFuIEVNRSBlbWJlZFxuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZGF0YS5zb3VyY2UgJiYgbmFtZSA9PT0gJ3BhcmFtJykge1xuICAgICAgICAgIGRhdGEuc291cmNlID0gbm9kZS5hdHRyKCdtb3ZpZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWUgPT09ICdpZnJhbWUnIHx8IG5hbWUgPT09ICdvYmplY3QnIHx8IG5hbWUgPT09ICdlbWJlZCcgfHwgbmFtZSA9PT0gJ3ZpZGVvJyB8fCBuYW1lID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgaWYgKCFkYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIGRhdGEudHlwZSA9IG5hbWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICBkYXRhID0gVG9vbHMuZXh0ZW5kKG5vZGUuYXR0cmlidXRlcyEubWFwLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYW1lID09PSAnc291cmNlJykge1xuICAgICAgICAgIGlmICghZGF0YS5zb3VyY2UpIHtcbiAgICAgICAgICAgIGRhdGEuc291cmNlID0gbm9kZS5hdHRyKCdzcmMnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFkYXRhLmFsdHNvdXJjZSkge1xuICAgICAgICAgICAgZGF0YS5hbHRzb3VyY2UgPSBub2RlLmF0dHIoJ3NyYycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYW1lID09PSAnaW1nJyAmJiAhZGF0YS5wb3N0ZXIpIHtcbiAgICAgICAgICBkYXRhLnBvc3RlciA9IG5vZGUuYXR0cignc3JjJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkYXRhLnNvdXJjZSA9IGRhdGEuc291cmNlIHx8IGRhdGEuc3JjIHx8ICcnO1xuICBkYXRhLmFsdHNvdXJjZSA9IGRhdGEuYWx0c291cmNlIHx8ICcnO1xuICBkYXRhLnBvc3RlciA9IGRhdGEucG9zdGVyIHx8ICcnO1xuXG4gIHJldHVybiBkYXRhIGFzIE1lZGlhRGF0YTtcbn07XG5cbmV4cG9ydCB7XG4gIGh0bWxUb0RhdGFcbn07XG4iLCJpbXBvcnQgeyBPYmogfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCBndWVzcyA9ICh1cmw6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IG1pbWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIG1wMzogJ2F1ZGlvL21wZWcnLFxuICAgIG00YTogJ2F1ZGlvL3gtbTRhJyxcbiAgICB3YXY6ICdhdWRpby93YXYnLFxuICAgIG1wNDogJ3ZpZGVvL21wNCcsXG4gICAgd2VibTogJ3ZpZGVvL3dlYm0nLFxuICAgIG9nZzogJ3ZpZGVvL29nZycsXG4gICAgc3dmOiAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnXG4gIH07XG4gIGNvbnN0IGZpbGVFbmQgPSB1cmwudG9Mb3dlckNhc2UoKS5zcGxpdCgnLicpLnBvcCgpID8/ICcnO1xuICByZXR1cm4gT2JqLmdldChtaW1lcywgZmlsZUVuZCkuZ2V0T3IoJycpO1xufTtcblxuZXhwb3J0IHtcbiAgZ3Vlc3Ncbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9iaiwgU3RyaW5ncywgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgRW52IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRW52JztcbmltcG9ydCBBc3ROb2RlIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9Ob2RlJztcbmltcG9ydCBIdG1sU2VyaWFsaXplciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2h0bWwvU2VyaWFsaXplcic7XG5cbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuXG5pbXBvcnQgeyBQYXJzZXIgfSBmcm9tICcuL1BhcnNlcic7XG5cbmRlY2xhcmUgbGV0IGVzY2FwZTogYW55O1xuXG5jb25zdCBpc0xpdmVFbWJlZE5vZGUgPSAobm9kZTogQXN0Tm9kZSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBuYW1lID0gbm9kZS5uYW1lO1xuICByZXR1cm4gbmFtZSA9PT0gJ2lmcmFtZScgfHwgbmFtZSA9PT0gJ3ZpZGVvJyB8fCBuYW1lID09PSAnYXVkaW8nO1xufTtcblxuY29uc3QgZ2V0RGltZW5zaW9uID0gKG5vZGU6IEFzdE5vZGUsIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgZGltZW5zaW9uOiAnd2lkdGgnIHwgJ2hlaWdodCcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nIHwgbnVsbCA9IG51bGwpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgY29uc3QgdmFsdWUgPSBub2RlLmF0dHIoZGltZW5zaW9uKTtcbiAgaWYgKFR5cGUuaXNOb25OdWxsYWJsZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSBpZiAoIU9iai5oYXMoc3R5bGVzLCBkaW1lbnNpb24pKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuY29uc3Qgc2V0RGltZW5zaW9ucyA9IChub2RlOiBBc3ROb2RlLCBwcmV2aWV3Tm9kZTogQXN0Tm9kZSwgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCA9PiB7XG4gIC8vIEFwcGx5IGRpbWVuc2lvbnMgZm9yIHZpZGVvIGVsZW1lbnRzIHRvIG1haW50YWluIGxlZ2FjeSBiZWhhdmlvdXJcbiAgY29uc3QgdXNlRGVmYXVsdHMgPSBwcmV2aWV3Tm9kZS5uYW1lID09PSAnaW1nJyB8fCBub2RlLm5hbWUgPT09ICd2aWRlbyc7XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSBkZWZhdWx0c1xuICBjb25zdCBkZWZhdWx0V2lkdGggPSB1c2VEZWZhdWx0cyA/ICczMDAnIDogbnVsbDtcbiAgY29uc3QgZmFsbGJhY2tIZWlnaHQgPSBub2RlLm5hbWUgPT09ICdhdWRpbycgPyAnMzAnIDogJzE1MCc7XG4gIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSB1c2VEZWZhdWx0cyA/IGZhbGxiYWNrSGVpZ2h0IDogbnVsbDtcblxuICBwcmV2aWV3Tm9kZS5hdHRyKHtcbiAgICB3aWR0aDogZ2V0RGltZW5zaW9uKG5vZGUsIHN0eWxlcywgJ3dpZHRoJywgZGVmYXVsdFdpZHRoKSxcbiAgICBoZWlnaHQ6IGdldERpbWVuc2lvbihub2RlLCBzdHlsZXMsICdoZWlnaHQnLCBkZWZhdWx0SGVpZ2h0KVxuICB9KTtcbn07XG5cbmNvbnN0IGFwcGVuZE5vZGVDb250ZW50ID0gKGVkaXRvcjogRWRpdG9yLCBub2RlTmFtZTogc3RyaW5nLCBwcmV2aWV3Tm9kZTogQXN0Tm9kZSwgaHRtbDogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGNvbnN0IG5ld05vZGUgPSBQYXJzZXIoZWRpdG9yLnNjaGVtYSkucGFyc2UoaHRtbCwgeyBjb250ZXh0OiBub2RlTmFtZSB9KTtcbiAgd2hpbGUgKG5ld05vZGUuZmlyc3RDaGlsZCkge1xuICAgIHByZXZpZXdOb2RlLmFwcGVuZChuZXdOb2RlLmZpcnN0Q2hpbGQpO1xuICB9XG59O1xuXG5jb25zdCBjcmVhdGVQbGFjZWhvbGRlck5vZGUgPSAoZWRpdG9yOiBFZGl0b3IsIG5vZGU6IEFzdE5vZGUpOiBBc3ROb2RlID0+IHtcbiAgY29uc3QgbmFtZSA9IG5vZGUubmFtZTtcblxuICBjb25zdCBwbGFjZUhvbGRlciA9IG5ldyBBc3ROb2RlKCdpbWcnLCAxKTtcblxuICByZXRhaW5BdHRyaWJ1dGVzQW5kSW5uZXJIdG1sKGVkaXRvciwgbm9kZSwgcGxhY2VIb2xkZXIpO1xuXG4gIHNldERpbWVuc2lvbnMobm9kZSwgcGxhY2VIb2xkZXIsIHt9KTtcbiAgcGxhY2VIb2xkZXIuYXR0cih7XG4gICAgJ3N0eWxlJzogbm9kZS5hdHRyKCdzdHlsZScpLFxuICAgICdzcmMnOiBFbnYudHJhbnNwYXJlbnRTcmMsXG4gICAgJ2RhdGEtbWNlLW9iamVjdCc6IG5hbWUsXG4gICAgJ2NsYXNzJzogJ21jZS1vYmplY3QgbWNlLW9iamVjdC0nICsgbmFtZVxuICB9KTtcblxuICByZXR1cm4gcGxhY2VIb2xkZXI7XG59O1xuXG5jb25zdCBjcmVhdGVQcmV2aWV3Tm9kZSA9IChlZGl0b3I6IEVkaXRvciwgbm9kZTogQXN0Tm9kZSk6IEFzdE5vZGUgPT4ge1xuICBjb25zdCBuYW1lID0gbm9kZS5uYW1lO1xuXG4gIGNvbnN0IHByZXZpZXdXcmFwcGVyID0gbmV3IEFzdE5vZGUoJ3NwYW4nLCAxKTtcbiAgcHJldmlld1dyYXBwZXIuYXR0cih7XG4gICAgJ2NvbnRlbnRFZGl0YWJsZSc6ICdmYWxzZScsXG4gICAgJ3N0eWxlJzogbm9kZS5hdHRyKCdzdHlsZScpLFxuICAgICdkYXRhLW1jZS1vYmplY3QnOiBuYW1lLFxuICAgICdjbGFzcyc6ICdtY2UtcHJldmlldy1vYmplY3QgbWNlLW9iamVjdC0nICsgbmFtZVxuICB9KTtcblxuICByZXRhaW5BdHRyaWJ1dGVzQW5kSW5uZXJIdG1sKGVkaXRvciwgbm9kZSwgcHJldmlld1dyYXBwZXIpO1xuXG4gIGNvbnN0IHN0eWxlcyA9IGVkaXRvci5kb20ucGFyc2VTdHlsZShub2RlLmF0dHIoJ3N0eWxlJykgPz8gJycpO1xuICBjb25zdCBwcmV2aWV3Tm9kZSA9IG5ldyBBc3ROb2RlKG5hbWUsIDEpO1xuICBzZXREaW1lbnNpb25zKG5vZGUsIHByZXZpZXdOb2RlLCBzdHlsZXMpO1xuICBwcmV2aWV3Tm9kZS5hdHRyKHtcbiAgICBzcmM6IG5vZGUuYXR0cignc3JjJyksXG4gICAgc3R5bGU6IG5vZGUuYXR0cignc3R5bGUnKSxcbiAgICBjbGFzczogbm9kZS5hdHRyKCdjbGFzcycpXG4gIH0pO1xuXG4gIGlmIChuYW1lID09PSAnaWZyYW1lJykge1xuICAgIHByZXZpZXdOb2RlLmF0dHIoe1xuICAgICAgYWxsb3dmdWxsc2NyZWVuOiBub2RlLmF0dHIoJ2FsbG93ZnVsbHNjcmVlbicpLFxuICAgICAgZnJhbWVib3JkZXI6ICcwJyxcbiAgICAgIHNhbmRib3g6IG5vZGUuYXR0cignc2FuZGJveCcpLFxuICAgICAgcmVmZXJyZXJwb2xpY3k6IG5vZGUuYXR0cigncmVmZXJyZXJwb2xpY3knKVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIEV4Y2x1ZGUgYXV0b3BsYXkgYXMgd2UgZG9uJ3Qgd2FudCB2aWRlby9hdWRpbyB0byBwbGF5IGJ5IGRlZmF1bHRcbiAgICBjb25zdCBhdHRycyA9IFsgJ2NvbnRyb2xzJywgJ2Nyb3Nzb3JpZ2luJywgJ2N1cnJlbnRUaW1lJywgJ2xvb3AnLCAnbXV0ZWQnLCAncG9zdGVyJywgJ3ByZWxvYWQnIF07XG4gICAgQXJyLmVhY2goYXR0cnMsIChhdHRyTmFtZSkgPT4ge1xuICAgICAgcHJldmlld05vZGUuYXR0cihhdHRyTmFtZSwgbm9kZS5hdHRyKGF0dHJOYW1lKSk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWNyZWF0ZSB0aGUgY2hpbGQgbm9kZXMgdXNpbmcgdGhlIHNhbml0aXplZCBpbm5lciBIVE1MXG4gICAgY29uc3Qgc2FuaXRpemVkSHRtbCA9IHByZXZpZXdXcmFwcGVyLmF0dHIoJ2RhdGEtbWNlLWh0bWwnKTtcbiAgICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKHNhbml0aXplZEh0bWwpKSB7XG4gICAgICBhcHBlbmROb2RlQ29udGVudChlZGl0b3IsIG5hbWUsIHByZXZpZXdOb2RlLCB1bmVzY2FwZShzYW5pdGl6ZWRIdG1sKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2hpbU5vZGUgPSBuZXcgQXN0Tm9kZSgnc3BhbicsIDEpO1xuICBzaGltTm9kZS5hdHRyKCdjbGFzcycsICdtY2Utc2hpbScpO1xuXG4gIHByZXZpZXdXcmFwcGVyLmFwcGVuZChwcmV2aWV3Tm9kZSk7XG4gIHByZXZpZXdXcmFwcGVyLmFwcGVuZChzaGltTm9kZSk7XG5cbiAgcmV0dXJuIHByZXZpZXdXcmFwcGVyO1xufTtcblxuY29uc3QgcmV0YWluQXR0cmlidXRlc0FuZElubmVySHRtbCA9IChlZGl0b3I6IEVkaXRvciwgc291cmNlTm9kZTogQXN0Tm9kZSwgdGFyZ2V0Tm9kZTogQXN0Tm9kZSk6IHZvaWQgPT4ge1xuICAvLyBQcmVmaXggYWxsIGF0dHJpYnV0ZXMgZXhjZXB0IGludGVybmFsIChkYXRhLW1jZS0qKSwgd2lkdGgsIGhlaWdodCBhbmQgc3R5bGUgc2luY2Ugd2VcbiAgLy8gd2lsbCBhZGQgdGhlc2UgdG8gdGhlIHBsYWNlaG9sZGVyXG4gIGNvbnN0IGF0dHJpYnMgPSBzb3VyY2VOb2RlLmF0dHJpYnV0ZXMgPz8gW107XG4gIGxldCBhaSA9IGF0dHJpYnMubGVuZ3RoO1xuICB3aGlsZSAoYWktLSkge1xuICAgIGNvbnN0IGF0dHJOYW1lID0gYXR0cmlic1thaV0ubmFtZTtcbiAgICBsZXQgYXR0clZhbHVlID0gYXR0cmlic1thaV0udmFsdWU7XG5cbiAgICBpZiAoYXR0ck5hbWUgIT09ICd3aWR0aCcgJiYgYXR0ck5hbWUgIT09ICdoZWlnaHQnICYmIGF0dHJOYW1lICE9PSAnc3R5bGUnICYmICFTdHJpbmdzLnN0YXJ0c1dpdGgoYXR0ck5hbWUsICdkYXRhLW1jZS0nKSkge1xuICAgICAgaWYgKGF0dHJOYW1lID09PSAnZGF0YScgfHwgYXR0ck5hbWUgPT09ICdzcmMnKSB7XG4gICAgICAgIGF0dHJWYWx1ZSA9IGVkaXRvci5jb252ZXJ0VVJMKGF0dHJWYWx1ZSwgYXR0ck5hbWUpO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXROb2RlLmF0dHIoJ2RhdGEtbWNlLXAtJyArIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBsYWNlIHRoZSBpbm5lciBIVE1MIGNvbnRlbnRzIGluc2lkZSBhbiBlc2NhcGVkIGF0dHJpYnV0ZVxuICAvLyBUaGlzIGVuYWJsZXMgdXMgdG8gY29weS9wYXN0ZSB0aGUgZmFrZSBvYmplY3RcbiAgY29uc3Qgc2VyaWFsaXplciA9IEh0bWxTZXJpYWxpemVyKHsgaW5uZXI6IHRydWUgfSwgZWRpdG9yLnNjaGVtYSk7XG4gIGNvbnN0IHRlbXBOb2RlID0gbmV3IEFzdE5vZGUoJ2RpdicsIDEpO1xuICBBcnIuZWFjaChzb3VyY2VOb2RlLmNoaWxkcmVuKCksIChjaGlsZCkgPT4gdGVtcE5vZGUuYXBwZW5kKGNoaWxkKSk7XG4gIGNvbnN0IGlubmVySHRtbCA9IHNlcmlhbGl6ZXIuc2VyaWFsaXplKHRlbXBOb2RlKTtcbiAgaWYgKGlubmVySHRtbCkge1xuICAgIHRhcmdldE5vZGUuYXR0cignZGF0YS1tY2UtaHRtbCcsIGVzY2FwZShpbm5lckh0bWwpKTtcbiAgICB0YXJnZXROb2RlLmVtcHR5KCk7XG4gIH1cbn07XG5cbmNvbnN0IGlzUGFnZUVtYmVkV3JhcHBlciA9IChub2RlOiBBc3ROb2RlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IG5vZGVDbGFzcyA9IG5vZGUuYXR0cignY2xhc3MnKTtcbiAgcmV0dXJuIFR5cGUuaXNTdHJpbmcobm9kZUNsYXNzKSAmJiAvXFxidGlueS1wYWdlZW1iZWRcXGIvLnRlc3Qobm9kZUNsYXNzKTtcbn07XG5cbmNvbnN0IGlzV2l0aGluRW1iZWRXcmFwcGVyID0gKG5vZGU6IEFzdE5vZGUpOiBib29sZWFuID0+IHtcbiAgbGV0IHRlbXBOb2RlOiBBc3ROb2RlIHwgbnVsbCB8IHVuZGVmaW5lZCA9IG5vZGU7XG4gIHdoaWxlICgodGVtcE5vZGUgPSB0ZW1wTm9kZS5wYXJlbnQpKSB7XG4gICAgaWYgKHRlbXBOb2RlLmF0dHIoJ2RhdGEtZXBob3gtZW1iZWQtaXJpJykgfHwgaXNQYWdlRW1iZWRXcmFwcGVyKHRlbXBOb2RlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgcGxhY2VIb2xkZXJDb252ZXJ0ZXIgPSAoZWRpdG9yOiBFZGl0b3IpID0+IChub2RlczogQXN0Tm9kZVtdKTogdm9pZCA9PiB7XG4gIGxldCBpID0gbm9kZXMubGVuZ3RoO1xuICBsZXQgbm9kZTogQXN0Tm9kZTtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmICghbm9kZS5wYXJlbnQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChub2RlLnBhcmVudC5hdHRyKCdkYXRhLW1jZS1vYmplY3QnKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGlzTGl2ZUVtYmVkTm9kZShub2RlKSAmJiBPcHRpb25zLmhhc0xpdmVFbWJlZHMoZWRpdG9yKSkge1xuICAgICAgaWYgKCFpc1dpdGhpbkVtYmVkV3JhcHBlcihub2RlKSkge1xuICAgICAgICBub2RlLnJlcGxhY2UoY3JlYXRlUHJldmlld05vZGUoZWRpdG9yLCBub2RlKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghaXNXaXRoaW5FbWJlZFdyYXBwZXIobm9kZSkpIHtcbiAgICAgICAgbm9kZS5yZXBsYWNlKGNyZWF0ZVBsYWNlaG9sZGVyTm9kZShlZGl0b3IsIG5vZGUpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIGNyZWF0ZVByZXZpZXdOb2RlLFxuICBjcmVhdGVQbGFjZWhvbGRlck5vZGUsXG4gIHBsYWNlSG9sZGVyQ29udmVydGVyXG59O1xuIiwiaW1wb3J0IERvbVBhcnNlciwgeyB0eXBlIERvbVBhcnNlclNldHRpbmdzIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS9odG1sL0RvbVBhcnNlcic7XG5pbXBvcnQgdHlwZSBTY2hlbWEgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9odG1sL1NjaGVtYSc7XG5cbmV4cG9ydCBjb25zdCBQYXJzZXIgPSAoc2NoZW1hPzogU2NoZW1hLCBzZXR0aW5nczogRG9tUGFyc2VyU2V0dGluZ3MgPSB7fSk6IERvbVBhcnNlciA9PiBEb21QYXJzZXIoe1xuICBmb3JjZWRfcm9vdF9ibG9jazogZmFsc2UsXG4gIHZhbGlkYXRlOiBmYWxzZSxcbiAgYWxsb3dfY29uZGl0aW9uYWxfY29tbWVudHM6IHRydWUsXG4gIC4uLnNldHRpbmdzXG59LCBzY2hlbWEpO1xuIiwiaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcblxuY29uc3Qgc2V0dXAgPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgZWRpdG9yLm9uKCdSZXNvbHZlTmFtZScsIChlKSA9PiB7XG4gICAgbGV0IG5hbWU6IHN0cmluZztcblxuICAgIGlmIChlLnRhcmdldC5ub2RlVHlwZSA9PT0gMSAmJiAobmFtZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tY2Utb2JqZWN0JykpKSB7XG4gICAgICBlLm5hbWUgPSBuYW1lO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBzZXR1cFxufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSBBc3ROb2RlIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9Ob2RlJztcblxuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuLi9hcGkvT3B0aW9ucyc7XG5cbmltcG9ydCB7IFBhcnNlciB9IGZyb20gJy4vUGFyc2VyJztcblxuY29uc3QgcGFyc2VBbmRTYW5pdGl6ZSA9IChlZGl0b3I6IEVkaXRvciwgY29udGV4dDogc3RyaW5nLCBodG1sOiBzdHJpbmcpOiBBc3ROb2RlID0+IHtcbiAgY29uc3QgZ2V0RWRpdG9yT3B0aW9uID0gZWRpdG9yLm9wdGlvbnMuZ2V0O1xuICBjb25zdCBzYW5pdGl6ZSA9IGdldEVkaXRvck9wdGlvbigneHNzX3Nhbml0aXphdGlvbicpO1xuICBjb25zdCB2YWxpZGF0ZSA9IE9wdGlvbnMuc2hvdWxkRmlsdGVySHRtbChlZGl0b3IpO1xuICByZXR1cm4gUGFyc2VyKGVkaXRvci5zY2hlbWEsIHsgc2FuaXRpemUsIHZhbGlkYXRlIH0pLnBhcnNlKGh0bWwsIHsgY29udGV4dCB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIHBhcnNlQW5kU2FuaXRpemVcbn07XG4iLCJpbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBVcGRhdGVIdG1sIGZyb20gJy4vVXBkYXRlSHRtbCc7XG5cbmRlY2xhcmUgbGV0IGVzY2FwZTogYW55O1xuZGVjbGFyZSBsZXQgdW5lc2NhcGU6IGFueTtcblxuY29uc3QgaXNNZWRpYUVsZW1lbnQgPSAoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4gPT5cbiAgZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWNlLW9iamVjdCcpIHx8IGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWVwaG94LWVtYmVkLWlyaScpO1xuXG5jb25zdCBzZXR1cCA9IChlZGl0b3I6IEVkaXRvcik6IHZvaWQgPT4ge1xuICAvLyBUSU5ZLTEwNzc0OiBPbiBTYWZhcmkgYWxsIGV2ZW50cyBidWJibGUgb3V0IGV2ZW4gaWYgeW91IGNsaWNrIG9uIHRoZSB2aWRlbyBwbGF5IGJ1dHRvbiBvbiBvdGhlciBicm93c2VycyB0aGUgdmlkZW8gZWxlbWVudCBkb2Vzbid0IGJ1YmJsZSB0aGUgZXZlbnRcbiAgZWRpdG9yLm9uKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xuICAgIGNvbnN0IHByZXZpZXdPYmogPSBlZGl0b3IuZG9tLmdldFBhcmVudChlLnRhcmdldCwgJy5tY2UtcHJldmlldy1vYmplY3QnKTtcbiAgICBpZiAocHJldmlld09iaiAmJiBlZGl0b3IuZG9tLmdldEF0dHJpYihwcmV2aWV3T2JqLCAnZGF0YS1tY2Utc2VsZWN0ZWQnKSA9PT0gJzInKSB7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfSk7XG5cbiAgZWRpdG9yLm9uKCdjbGljayBrZXl1cCB0b3VjaGVuZCcsICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldE5vZGUoKTtcbiAgICBpZiAoc2VsZWN0ZWROb2RlICYmIGVkaXRvci5kb20uaGFzQ2xhc3Moc2VsZWN0ZWROb2RlLCAnbWNlLXByZXZpZXctb2JqZWN0JykpIHtcbiAgICAgIGlmIChlZGl0b3IuZG9tLmdldEF0dHJpYihzZWxlY3RlZE5vZGUsICdkYXRhLW1jZS1zZWxlY3RlZCcpKSB7XG4gICAgICAgIHNlbGVjdGVkTm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWNlLXNlbGVjdGVkJywgJzInKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGVkaXRvci5vbignT2JqZWN0UmVzaXplZCcsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG5cbiAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tY2Utb2JqZWN0JykpIHtcbiAgICAgIGxldCBodG1sID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tY2UtaHRtbCcpO1xuICAgICAgaWYgKGh0bWwpIHtcbiAgICAgICAgaHRtbCA9IHVuZXNjYXBlKGh0bWwpO1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLW1jZS1odG1sJywgZXNjYXBlKFxuICAgICAgICAgIFVwZGF0ZUh0bWwudXBkYXRlSHRtbChodG1sLCB7XG4gICAgICAgICAgICB3aWR0aDogU3RyaW5nKGUud2lkdGgpLFxuICAgICAgICAgICAgaGVpZ2h0OiBTdHJpbmcoZS5oZWlnaHQpXG4gICAgICAgICAgfSwgZmFsc2UsIGVkaXRvci5zY2hlbWEpXG4gICAgICAgICkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBzZXR1cCxcbiAgaXNNZWRpYUVsZW1lbnRcbn07XG4iLCJpbXBvcnQgeyBPYmogfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcblxuaW1wb3J0ICogYXMgRGF0YVRvSHRtbCBmcm9tICcuL0RhdGFUb0h0bWwnO1xuaW1wb3J0IHR5cGUgeyBNZWRpYURhdGEgfSBmcm9tICcuL1R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBFbWJlZFJlc3VsdCB7XG4gIHJlYWRvbmx5IHVybDogc3RyaW5nO1xuICByZWFkb25seSBodG1sOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBFbWJlZFJlc3BvbnNlIHtcbiAgcmVhZG9ubHkgaHRtbD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgTWVkaWFSZXNvbHZlciA9IChkYXRhOiB7IHVybDogc3RyaW5nIH0pID0+IFByb21pc2U8RW1iZWRSZXNwb25zZT47XG5cbmNvbnN0IGNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBFbWJlZFJlc3BvbnNlPiA9IHt9O1xuXG5jb25zdCBlbWJlZFByb21pc2UgPSAoZGF0YTogTWVkaWFEYXRhLCBkYXRhVG9IdG1sOiBEYXRhVG9IdG1sLkRhdGFUb0h0bWxDYWxsYmFjaywgaGFuZGxlcjogTWVkaWFSZXNvbHZlcik6IFByb21pc2U8RW1iZWRSZXN1bHQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgIGNvbnN0IHdyYXBwZWRSZXNvbHZlID0gKHJlc3BvbnNlOiBFbWJlZFJlc3BvbnNlKSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2UuaHRtbCkge1xuICAgICAgICBjYWNoZVtkYXRhLnNvdXJjZV0gPSByZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMoe1xuICAgICAgICB1cmw6IGRhdGEuc291cmNlLFxuICAgICAgICBodG1sOiByZXNwb25zZS5odG1sID8gcmVzcG9uc2UuaHRtbCA6IGRhdGFUb0h0bWwoZGF0YSlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKGNhY2hlW2RhdGEuc291cmNlXSkge1xuICAgICAgd3JhcHBlZFJlc29sdmUoY2FjaGVbZGF0YS5zb3VyY2VdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlcih7IHVybDogZGF0YS5zb3VyY2UgfSkudGhlbih3cmFwcGVkUmVzb2x2ZSkuY2F0Y2gocmVqKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgZGVmYXVsdFByb21pc2UgPSAoZGF0YTogTWVkaWFEYXRhLCBkYXRhVG9IdG1sOiBEYXRhVG9IdG1sLkRhdGFUb0h0bWxDYWxsYmFjayk6IFByb21pc2U8RW1iZWRSZXN1bHQ+ID0+XG4gIFByb21pc2UucmVzb2x2ZSh7IGh0bWw6IGRhdGFUb0h0bWwoZGF0YSksIHVybDogZGF0YS5zb3VyY2UgfSk7XG5cbmNvbnN0IGxvYWRlZERhdGEgPSAoZWRpdG9yOiBFZGl0b3IpID0+IChkYXRhOiBNZWRpYURhdGEpOiBzdHJpbmcgPT5cbiAgRGF0YVRvSHRtbC5kYXRhVG9IdG1sKGVkaXRvciwgZGF0YSk7XG5cbmNvbnN0IGdldEVtYmVkSHRtbCA9IChlZGl0b3I6IEVkaXRvciwgZGF0YTogTWVkaWFEYXRhKTogUHJvbWlzZTxFbWJlZFJlc3VsdD4gPT4ge1xuICBjb25zdCBlbWJlZEhhbmRsZXIgPSBPcHRpb25zLmdldFVybFJlc29sdmVyKGVkaXRvcik7XG5cbiAgcmV0dXJuIGVtYmVkSGFuZGxlciA/IGVtYmVkUHJvbWlzZShkYXRhLCBsb2FkZWREYXRhKGVkaXRvciksIGVtYmVkSGFuZGxlcikgOiBkZWZhdWx0UHJvbWlzZShkYXRhLCBsb2FkZWREYXRhKGVkaXRvcikpO1xufTtcblxuY29uc3QgaXNDYWNoZWQgPSAodXJsOiBzdHJpbmcpOiBib29sZWFuID0+XG4gIE9iai5oYXMoY2FjaGUsIHVybCk7XG5cbmV4cG9ydCB7XG4gIGdldEVtYmVkSHRtbCxcbiAgaXNDYWNoZWRcbn07XG4iLCJpbXBvcnQgeyBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IERPTVV0aWxzIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvZG9tL0RPTVV0aWxzJztcbmltcG9ydCBBc3ROb2RlIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9Ob2RlJztcbmltcG9ydCB0eXBlIFNjaGVtYSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2h0bWwvU2NoZW1hJztcbmltcG9ydCBIdG1sU2VyaWFsaXplciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2h0bWwvU2VyaWFsaXplcic7XG5cbmltcG9ydCB7IFBhcnNlciB9IGZyb20gJy4vUGFyc2VyJztcbmltcG9ydCB0eXBlIHsgTWVkaWFEYXRhIH0gZnJvbSAnLi9UeXBlcyc7XG5cbmNvbnN0IERPTSA9IERPTVV0aWxzLkRPTTtcblxuY29uc3QgYWRkUHggPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PlxuICAvXlswLTkuXSskLy50ZXN0KHZhbHVlKSA/ICh2YWx1ZSArICdweCcpIDogdmFsdWU7XG5cbmNvbnN0IHVwZGF0ZUVwaG94RW1iZWQgPSAoZGF0YTogUGFydGlhbDxNZWRpYURhdGE+LCBub2RlOiBBc3ROb2RlKSA9PiB7XG4gIGNvbnN0IHN0eWxlID0gbm9kZS5hdHRyKCdzdHlsZScpO1xuICBjb25zdCBzdHlsZU1hcCA9IHN0eWxlID8gRE9NLnBhcnNlU3R5bGUoc3R5bGUpIDogeyB9O1xuICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKGRhdGEud2lkdGgpKSB7XG4gICAgc3R5bGVNYXBbJ21heC13aWR0aCddID0gYWRkUHgoZGF0YS53aWR0aCk7XG4gIH1cbiAgaWYgKFR5cGUuaXNOb25OdWxsYWJsZShkYXRhLmhlaWdodCkpIHtcbiAgICBzdHlsZU1hcFsnbWF4LWhlaWdodCddID0gYWRkUHgoZGF0YS5oZWlnaHQpO1xuICB9XG4gIG5vZGUuYXR0cignc3R5bGUnLCBET00uc2VyaWFsaXplU3R5bGUoc3R5bGVNYXApKTtcbn07XG5cbmNvbnN0IHNvdXJjZXMgPSBbICdzb3VyY2UnLCAnYWx0c291cmNlJyBdIGFzIGNvbnN0O1xuXG50eXBlIFNvdXJjZSA9IHR5cGVvZiBzb3VyY2VzW251bWJlcl07XG50eXBlIFNvdXJjZU1pbWUgPSBgJHtTb3VyY2V9bWltZWA7XG5cbmNvbnN0IHVwZGF0ZUh0bWwgPSAoaHRtbDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPE1lZGlhRGF0YT4sIHVwZGF0ZUFsbD86IGJvb2xlYW4sIHNjaGVtYT86IFNjaGVtYSk6IHN0cmluZyA9PiB7XG4gIGxldCBudW1Tb3VyY2VzID0gMDtcbiAgbGV0IHNvdXJjZUNvdW50ID0gMDtcblxuICBjb25zdCBwYXJzZXIgPSBQYXJzZXIoc2NoZW1hKTtcbiAgcGFyc2VyLmFkZE5vZGVGaWx0ZXIoJ3NvdXJjZScsIChub2RlcykgPT4gbnVtU291cmNlcyA9IG5vZGVzLmxlbmd0aCk7XG4gIGNvbnN0IHJvb3ROb2RlID0gcGFyc2VyLnBhcnNlKGh0bWwpO1xuXG4gIGZvciAobGV0IG5vZGU6IEFzdE5vZGUgfCBudWxsIHwgdW5kZWZpbmVkID0gcm9vdE5vZGU7IG5vZGU7IG5vZGUgPSBub2RlLndhbGsoKSkge1xuICAgIGlmIChub2RlLnR5cGUgPT09IDEpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBub2RlLm5hbWU7XG5cbiAgICAgIGlmIChub2RlLmF0dHIoJ2RhdGEtZXBob3gtZW1iZWQtaXJpJykpIHtcbiAgICAgICAgdXBkYXRlRXBob3hFbWJlZChkYXRhLCBub2RlKTtcbiAgICAgICAgLy8gRG9uJ3QgY29udGludWUgdG8gdXBkYXRlIGlmIHdlIGZpbmQgYW4gRU1FIGVtYmVkXG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgY2FzZSAnZW1iZWQnOlxuICAgICAgICAgIGNhc2UgJ2ltZyc6XG4gICAgICAgICAgY2FzZSAnaWZyYW1lJzpcbiAgICAgICAgICAgIGlmIChkYXRhLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIGRhdGEud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBub2RlLmF0dHIoJ3dpZHRoJywgZGF0YS53aWR0aCk7XG4gICAgICAgICAgICAgIG5vZGUuYXR0cignaGVpZ2h0JywgZGF0YS5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXBkYXRlQWxsKSB7XG4gICAgICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgICAgICBjYXNlICd2aWRlbyc6XG4gICAgICAgICAgICAgIG5vZGUuYXR0cigncG9zdGVyJywgZGF0YS5wb3N0ZXIpO1xuICAgICAgICAgICAgICBub2RlLmF0dHIoJ3NyYycsIG51bGwpO1xuXG4gICAgICAgICAgICAgIC8vIEFkZCA8c291cmNlPiBjaGlsZCBlbGVtZW50c1xuICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IG51bVNvdXJjZXM7IGluZGV4IDwgMjsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhW3NvdXJjZXNbaW5kZXhdXSkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gbmV3IEFzdE5vZGUoJ3NvdXJjZScsIDEpO1xuICAgICAgICAgICAgICAgICAgc291cmNlLmF0dHIoJ3NyYycsIGRhdGFbc291cmNlc1tpbmRleF1dKTtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZS5hdHRyKCd0eXBlJywgZGF0YVtzb3VyY2VzW2luZGV4XSArICdtaW1lJyBhcyBTb3VyY2VNaW1lXSB8fCBudWxsKTtcbiAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgICAgICAgICBub2RlLmF0dHIoJ3NyYycsIGRhdGEuc291cmNlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgIGNvbnN0IGhhc0ltYWdlID0gbm9kZS5nZXRBbGwoJ2ltZycpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgIGlmIChkYXRhLnBvc3RlciAmJiAhaGFzSW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBub2RlLmF0dHIoJ3NyYycsIGRhdGEucG9zdGVyKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBBc3ROb2RlKCdpbWcnLCAxKTtcbiAgICAgICAgICAgICAgICBpbWcuYXR0cignc3JjJywgZGF0YS5wb3N0ZXIpO1xuICAgICAgICAgICAgICAgIGltZy5hdHRyKCd3aWR0aCcsIGRhdGEud2lkdGgpO1xuICAgICAgICAgICAgICAgIGltZy5hdHRyKCdoZWlnaHQnLCBkYXRhLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmQoaW1nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICAgICAgaWYgKHNvdXJjZUNvdW50IDwgMikge1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cignc3JjJywgZGF0YVtzb3VyY2VzW3NvdXJjZUNvdW50XV0pO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cigndHlwZScsIGRhdGFbc291cmNlc1tzb3VyY2VDb3VudF0gKyAnbWltZScgYXMgU291cmNlTWltZV0gfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFbc291cmNlc1tzb3VyY2VDb3VudF1dKSB7XG4gICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNvdXJjZUNvdW50Kys7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdpbWcnOlxuICAgICAgICAgICAgICBpZiAoIWRhdGEucG9zdGVyKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gSHRtbFNlcmlhbGl6ZXIoe30sIHNjaGVtYSkuc2VyaWFsaXplKHJvb3ROb2RlKTtcbn07XG5cbmV4cG9ydCB7XG4gIHVwZGF0ZUh0bWxcbn07XG4iLCJpbXBvcnQgeyBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IFRvb2xzIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvdXRpbC9Ub29scyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXJsUGF0dGVybiB7XG4gIHJlYWRvbmx5IHJlZ2V4OiBSZWdFeHA7XG4gIHJlYWRvbmx5IHR5cGU6ICdpZnJhbWUnO1xuICByZWFkb25seSB3OiBudW1iZXI7XG4gIHJlYWRvbmx5IGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgdXJsOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGFsbG93RnVsbHNjcmVlbjogYm9vbGVhbjtcbn1cblxuY29uc3QgdXJsUGF0dGVybnM6IFVybFBhdHRlcm5bXSA9IFtcbiAge1xuICAgIHJlZ2V4OiAveW91dHVcXC5iZVxcLyhbXFx3XFwtX1xcPyY9Ll0rKS9pLFxuICAgIHR5cGU6ICdpZnJhbWUnLCB3OiA1NjAsIGg6IDMxNCxcbiAgICB1cmw6ICd3d3cueW91dHViZS5jb20vZW1iZWQvJDEnLFxuICAgIGFsbG93RnVsbHNjcmVlbjogdHJ1ZVxuICB9LFxuICB7XG4gICAgcmVnZXg6IC95b3V0dWJlXFwuY29tKC4rKXY9KFteJl0rKSgmKFthLXowLTkmPVxcLV9dKykpPy9pLFxuICAgIHR5cGU6ICdpZnJhbWUnLCB3OiA1NjAsIGg6IDMxNCxcbiAgICB1cmw6ICd3d3cueW91dHViZS5jb20vZW1iZWQvJDI/JDQnLFxuICAgIGFsbG93RnVsbHNjcmVlbjogdHJ1ZVxuICB9LFxuICB7XG4gICAgcmVnZXg6IC95b3V0dWJlLmNvbVxcL2VtYmVkXFwvKFthLXowLTlcXD8mPVxcLV9dKykvaSxcbiAgICB0eXBlOiAnaWZyYW1lJywgdzogNTYwLCBoOiAzMTQsXG4gICAgdXJsOiAnd3d3LnlvdXR1YmUuY29tL2VtYmVkLyQxJyxcbiAgICBhbGxvd0Z1bGxzY3JlZW46IHRydWVcbiAgfSxcbiAge1xuICAgIHJlZ2V4OiAvdmltZW9cXC5jb21cXC8oWzAtOV0rKVxcP2g9KFxcdyspLyxcbiAgICB0eXBlOiAnaWZyYW1lJywgdzogNDI1LCBoOiAzNTAsXG4gICAgdXJsOiAncGxheWVyLnZpbWVvLmNvbS92aWRlby8kMT9oPSQyJnRpdGxlPTAmYnlsaW5lPTAmcG9ydHJhaXQ9MCZjb2xvcj04ZGM3ZGMnLFxuICAgIGFsbG93RnVsbHNjcmVlbjogdHJ1ZVxuICB9LFxuICB7XG4gICAgcmVnZXg6IC92aW1lb1xcLmNvbVxcLyguKilcXC8oWzAtOV0rKVxcP2g9KFxcdyspLyxcbiAgICB0eXBlOiAnaWZyYW1lJywgdzogNDI1LCBoOiAzNTAsXG4gICAgdXJsOiAncGxheWVyLnZpbWVvLmNvbS92aWRlby8kMj9oPSQzJnRpdGxlPTAmYW1wO2J5bGluZT0wJyxcbiAgICBhbGxvd0Z1bGxzY3JlZW46IHRydWVcbiAgfSxcbiAge1xuICAgIHJlZ2V4OiAvdmltZW9cXC5jb21cXC8oWzAtOV0rKS8sXG4gICAgdHlwZTogJ2lmcmFtZScsIHc6IDQyNSwgaDogMzUwLFxuICAgIHVybDogJ3BsYXllci52aW1lby5jb20vdmlkZW8vJDE/dGl0bGU9MCZieWxpbmU9MCZwb3J0cmFpdD0wJmNvbG9yPThkYzdkYycsXG4gICAgYWxsb3dGdWxsc2NyZWVuOiB0cnVlXG4gIH0sXG4gIHtcbiAgICByZWdleDogL3ZpbWVvXFwuY29tXFwvKC4qKVxcLyhbMC05XSspLyxcbiAgICB0eXBlOiAnaWZyYW1lJywgdzogNDI1LCBoOiAzNTAsXG4gICAgdXJsOiAncGxheWVyLnZpbWVvLmNvbS92aWRlby8kMj90aXRsZT0wJmFtcDtieWxpbmU9MCcsXG4gICAgYWxsb3dGdWxsc2NyZWVuOiB0cnVlXG4gIH0sXG4gIHtcbiAgICByZWdleDogL21hcHNcXC5nb29nbGVcXC4oW2Etel17MiwzfSlcXC9tYXBzXFwvKC4rKW1zaWQ9KC4rKS8sXG4gICAgdHlwZTogJ2lmcmFtZScsIHc6IDQyNSwgaDogMzUwLFxuICAgIHVybDogJ21hcHMuZ29vZ2xlLmNvbS9tYXBzL21zP21zaWQ9JDImb3V0cHV0PWVtYmVkXCInLFxuICAgIGFsbG93RnVsbHNjcmVlbjogZmFsc2VcbiAgfSxcbiAge1xuICAgIHJlZ2V4OiAvZGFpbHltb3Rpb25cXC5jb21cXC92aWRlb1xcLyhbXl9dKykvLFxuICAgIHR5cGU6ICdpZnJhbWUnLCB3OiA0ODAsIGg6IDI3MCxcbiAgICB1cmw6ICd3d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLyQxJyxcbiAgICBhbGxvd0Z1bGxzY3JlZW46IHRydWVcbiAgfSxcbiAge1xuICAgIHJlZ2V4OiAvZGFpXFwubHlcXC8oW15fXSspLyxcbiAgICB0eXBlOiAnaWZyYW1lJywgdzogNDgwLCBoOiAyNzAsXG4gICAgdXJsOiAnd3d3LmRhaWx5bW90aW9uLmNvbS9lbWJlZC92aWRlby8kMScsXG4gICAgYWxsb3dGdWxsc2NyZWVuOiB0cnVlXG4gIH1cbl07XG5cbmNvbnN0IGdldFByb3RvY29sID0gKHVybDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgcHJvdG9jb2xNYXRjaGVzID0gdXJsLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC98d3d3XFwuKSguKykkL2kpO1xuICBpZiAocHJvdG9jb2xNYXRjaGVzICYmIHByb3RvY29sTWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHByb3RvY29sTWF0Y2hlc1sxXSA9PT0gJ3d3dy4nID8gJ2h0dHBzOi8vJyA6IHByb3RvY29sTWF0Y2hlc1sxXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJ2h0dHBzOi8vJztcbiAgfVxufTtcblxuY29uc3QgZ2V0VXJsID0gKHBhdHRlcm46IFVybFBhdHRlcm4sIHVybDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuXG4gIGNvbnN0IG1hdGNoID0gcGF0dGVybi5yZWdleC5leGVjKHVybCk7XG4gIGxldCBuZXdVcmwgPSBwcm90b2NvbCArIHBhdHRlcm4udXJsO1xuICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKG1hdGNoKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5ld1VybCA9IG5ld1VybC5yZXBsYWNlKCckJyArIGksICgpID0+IG1hdGNoW2ldID8gbWF0Y2hbaV0gOiAnJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld1VybC5yZXBsYWNlKC9cXD8kLywgJycpO1xufTtcblxuY29uc3QgbWF0Y2hQYXR0ZXJuID0gKHVybDogc3RyaW5nKTogVXJsUGF0dGVybiB8IG51bGwgPT4ge1xuICBjb25zdCBwYXR0ZXJucyA9IHVybFBhdHRlcm5zLmZpbHRlcigocGF0dGVybikgPT4gcGF0dGVybi5yZWdleC50ZXN0KHVybCkpO1xuXG4gIGlmIChwYXR0ZXJucy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIFRvb2xzLmV4dGVuZCh7fSwgcGF0dGVybnNbMF0sIHsgdXJsOiBnZXRVcmwocGF0dGVybnNbMF0sIHVybCkgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIG1hdGNoUGF0dGVyblxufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IE1lbnUsIFRvb2xiYXIgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0IHsgaXNNZWRpYUVsZW1lbnQgfSBmcm9tICcuLi9jb3JlL1NlbGVjdGlvbic7XG5cbmNvbnN0IG9uU2V0dXBFZGl0YWJsZSA9IChlZGl0b3I6IEVkaXRvcikgPT4gKGFwaTogVG9vbGJhci5Ub29sYmFyQnV0dG9uSW5zdGFuY2VBcGkgfCBNZW51Lk1lbnVJdGVtSW5zdGFuY2VBcGkpOiBWb2lkRnVuY3Rpb24gPT4ge1xuICBjb25zdCBub2RlQ2hhbmdlZCA9ICgpID0+IHtcbiAgICBhcGkuc2V0RW5hYmxlZChlZGl0b3Iuc2VsZWN0aW9uLmlzRWRpdGFibGUoKSk7XG4gIH07XG5cbiAgZWRpdG9yLm9uKCdOb2RlQ2hhbmdlJywgbm9kZUNoYW5nZWQpO1xuICBub2RlQ2hhbmdlZCgpO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgZWRpdG9yLm9mZignTm9kZUNoYW5nZScsIG5vZGVDaGFuZ2VkKTtcbiAgfTtcbn07XG5cbmNvbnN0IHJlZ2lzdGVyID0gKGVkaXRvcjogRWRpdG9yKTogdm9pZCA9PiB7XG4gIGNvbnN0IG9uQWN0aW9uID0gKCkgPT4gZWRpdG9yLmV4ZWNDb21tYW5kKCdtY2VNZWRpYScpO1xuXG4gIGVkaXRvci51aS5yZWdpc3RyeS5hZGRUb2dnbGVCdXR0b24oJ21lZGlhJywge1xuICAgIHRvb2x0aXA6ICdJbnNlcnQvZWRpdCBtZWRpYScsXG4gICAgaWNvbjogJ2VtYmVkJyxcbiAgICBvbkFjdGlvbixcbiAgICBvblNldHVwOiAoYnV0dG9uQXBpKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uO1xuICAgICAgYnV0dG9uQXBpLnNldEFjdGl2ZShpc01lZGlhRWxlbWVudChzZWxlY3Rpb24uZ2V0Tm9kZSgpKSk7XG4gICAgICBjb25zdCB1bmJpbmRTZWxlY3RvckNoYW5nZWQgPSBzZWxlY3Rpb24uc2VsZWN0b3JDaGFuZ2VkV2l0aFVuYmluZCgnaW1nW2RhdGEtbWNlLW9iamVjdF0sc3BhbltkYXRhLW1jZS1vYmplY3RdLGRpdltkYXRhLWVwaG94LWVtYmVkLWlyaV0nLCBidXR0b25BcGkuc2V0QWN0aXZlKS51bmJpbmQ7XG4gICAgICBjb25zdCB1bmJpbmRFZGl0YWJsZSA9IG9uU2V0dXBFZGl0YWJsZShlZGl0b3IpKGJ1dHRvbkFwaSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB1bmJpbmRTZWxlY3RvckNoYW5nZWQoKTtcbiAgICAgICAgdW5iaW5kRWRpdGFibGUoKTtcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUl0ZW0oJ21lZGlhJywge1xuICAgIGljb246ICdlbWJlZCcsXG4gICAgdGV4dDogJ01lZGlhLi4uJyxcbiAgICBvbkFjdGlvbixcbiAgICBvblNldHVwOiBvblNldHVwRWRpdGFibGUoZWRpdG9yKVxuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIHJlZ2lzdGVyXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBDZWxsLCBPYmosIE9wdGlvbmFsLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgRGlhbG9nIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS91aS9VaSc7XG5cbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuaW1wb3J0IHsgZGF0YVRvSHRtbCB9IGZyb20gJy4uL2NvcmUvRGF0YVRvSHRtbCc7XG5pbXBvcnQgKiBhcyBIdG1sVG9EYXRhIGZyb20gJy4uL2NvcmUvSHRtbFRvRGF0YSc7XG5pbXBvcnQgeyBpc01lZGlhRWxlbWVudCB9IGZyb20gJy4uL2NvcmUvU2VsZWN0aW9uJztcbmltcG9ydCAqIGFzIFNlcnZpY2UgZnJvbSAnLi4vY29yZS9TZXJ2aWNlJztcbmltcG9ydCB0eXBlIHsgRGlhbG9nU3ViRGF0YSwgTWVkaWFEYXRhLCBNZWRpYURhdGFUeXBlLCBNZWRpYURpYWxvZ0RhdGEgfSBmcm9tICcuLi9jb3JlL1R5cGVzJztcbmltcG9ydCAqIGFzIFVwZGF0ZUh0bWwgZnJvbSAnLi4vY29yZS9VcGRhdGVIdG1sJztcbmltcG9ydCAqIGFzIFVybFBhdHRlcm5zIGZyb20gJy4uL2NvcmUvVXJsUGF0dGVybnMnO1xuXG50eXBlIFNvdXJjZUlucHV0ID0gJ3NvdXJjZScgfCAnYWx0c291cmNlJyB8ICdwb3N0ZXInIHwgJ2RpbWVuc2lvbnMnO1xuXG5jb25zdCBleHRyYWN0TWV0YSA9IChzb3VyY2VJbnB1dDogRXhjbHVkZTxTb3VyY2VJbnB1dCwgJ2RpbWVuc2lvbnMnPiwgZGF0YTogTWVkaWFEaWFsb2dEYXRhKTogT3B0aW9uYWw8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPT5cbiAgT2JqLmdldChkYXRhLCBzb3VyY2VJbnB1dCkuYmluZCgobWFpbkRhdGEpID0+IE9iai5nZXQobWFpbkRhdGEsICdtZXRhJykpO1xuXG5jb25zdCBnZXRWYWx1ZSA9IChkYXRhOiBNZWRpYURpYWxvZ0RhdGEsIG1ldGFEYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBzb3VyY2VJbnB1dD86IFNvdXJjZUlucHV0KSA9PiAocHJvcDoga2V5b2YgTWVkaWFEaWFsb2dEYXRhKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIC8vIENhc2VzOlxuICAvLyAxLiBHZXQgdGhlIG5lc3RlZCB2YWx1ZSBwcm9wIChjb21wb25lbnQgaXMgdGhlIGV4ZWN1dGVkIHVybGlucHV0KVxuICAvLyAyLiBHZXQgZnJvbSBtZXRhZGF0YSAoYSB1cmxpbnB1dCB3YXMgZXhlY3V0ZWQgYnV0IHVybGlucHV0ICE9IHRoaXMgY29tcG9uZW50KVxuICAvLyAzLiBOb3QgYSB1cmxpbnB1dCBzbyBqdXN0IGdldCBzdHJpbmdcbiAgLy8gSWYgcHJvcCA9PT0gc291cmNlSW5wdXQgZG8gMSwgMiB0aGVuIDMsIGVsc2UgZG8gMiB0aGVuIDEgb3IgM1xuICAvLyBBU1NVTVBUSU9OOiB3ZSBvbmx5IHdhbnQgdG8gZ2V0IHZhbHVlcyBmb3IgcHJvcHMgdGhhdCBhbHJlYWR5IGV4aXN0IGluIGRhdGFcbiAgY29uc3QgZ2V0RnJvbURhdGEgPSAoKTogT3B0aW9uYWw8c3RyaW5nIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IERpYWxvZ1N1YkRhdGE+ID0+IE9iai5nZXQoZGF0YSwgcHJvcCk7XG4gIGNvbnN0IGdldEZyb21NZXRhRGF0YSA9ICgpOiBPcHRpb25hbDxzdHJpbmc+ID0+IE9iai5nZXQobWV0YURhdGEsIHByb3ApO1xuICBjb25zdCBnZXROb25FbXB0eVZhbHVlID0gKGM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBPcHRpb25hbDxzdHJpbmc+ID0+IE9iai5nZXQoYywgJ3ZhbHVlJykuYmluZCgodjogc3RyaW5nKSA9PiB2Lmxlbmd0aCA+IDAgPyBPcHRpb25hbC5zb21lKHYpIDogT3B0aW9uYWwubm9uZSgpKTtcblxuICBjb25zdCBnZXRGcm9tVmFsdWVGaXJzdCA9ICgpID0+IGdldEZyb21EYXRhKCkuYmluZCgoY2hpbGQpID0+IFR5cGUuaXNPYmplY3QoY2hpbGQpXG4gICAgPyBnZXROb25FbXB0eVZhbHVlKGNoaWxkIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pLm9yVGh1bmsoZ2V0RnJvbU1ldGFEYXRhKVxuICAgIDogZ2V0RnJvbU1ldGFEYXRhKCkub3JUaHVuaygoKSA9PiBPcHRpb25hbC5mcm9tKGNoaWxkIGFzIHN0cmluZykpKTtcblxuICBjb25zdCBnZXRGcm9tTWV0YUZpcnN0ID0gKCkgPT4gZ2V0RnJvbU1ldGFEYXRhKCkub3JUaHVuaygoKSA9PiBnZXRGcm9tRGF0YSgpLmJpbmQoKGNoaWxkKSA9PiBUeXBlLmlzT2JqZWN0KGNoaWxkKVxuICAgID8gZ2V0Tm9uRW1wdHlWYWx1ZShjaGlsZCBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KVxuICAgIDogT3B0aW9uYWwuZnJvbShjaGlsZCBhcyBzdHJpbmcpKSk7XG5cbiAgcmV0dXJuIHsgW3Byb3BdOiAocHJvcCA9PT0gc291cmNlSW5wdXQgPyBnZXRGcm9tVmFsdWVGaXJzdCgpIDogZ2V0RnJvbU1ldGFGaXJzdCgpKS5nZXRPcignJykgfTtcbn07XG5cbmNvbnN0IGdldERpbWVuc2lvbnMgPSAoZGF0YTogTWVkaWFEaWFsb2dEYXRhLCBtZXRhRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IE1lZGlhRGlhbG9nRGF0YVsnZGltZW5zaW9ucyddID0+IHtcbiAgY29uc3QgZGltZW5zaW9uczogTWVkaWFEaWFsb2dEYXRhWydkaW1lbnNpb25zJ10gPSB7fTtcbiAgT2JqLmdldChkYXRhLCAnZGltZW5zaW9ucycpLmVhY2goKGRpbXMpID0+IHtcbiAgICBBcnIuZWFjaChbICd3aWR0aCcsICdoZWlnaHQnIF0gYXMgKCd3aWR0aCcgfCAnaGVpZ2h0JylbXSwgKHByb3ApID0+IHtcbiAgICAgIE9iai5nZXQobWV0YURhdGEsIHByb3ApLm9yVGh1bmsoKCkgPT4gT2JqLmdldChkaW1zLCBwcm9wKSkuZWFjaCgodmFsdWUpID0+IGRpbWVuc2lvbnNbcHJvcF0gPSB2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZGltZW5zaW9ucztcbn07XG5cbmNvbnN0IHVud3JhcCA9IChkYXRhOiBNZWRpYURpYWxvZ0RhdGEsIHNvdXJjZUlucHV0PzogU291cmNlSW5wdXQpOiBNZWRpYURhdGEgPT4ge1xuICBjb25zdCBtZXRhRGF0YSA9IHNvdXJjZUlucHV0ICYmIHNvdXJjZUlucHV0ICE9PSAnZGltZW5zaW9ucycgPyBleHRyYWN0TWV0YShzb3VyY2VJbnB1dCwgZGF0YSkuZ2V0T3Ioe30pIDoge307XG4gIGNvbnN0IGdldCA9IGdldFZhbHVlKGRhdGEsIG1ldGFEYXRhLCBzb3VyY2VJbnB1dCk7XG4gIHJldHVybiB7XG4gICAgLi4uZ2V0KCdzb3VyY2UnKSxcbiAgICAuLi5nZXQoJ2FsdHNvdXJjZScpLFxuICAgIC4uLmdldCgncG9zdGVyJyksXG4gICAgLi4uZ2V0KCdlbWJlZCcpLFxuICAgIC4uLmdldERpbWVuc2lvbnMoZGF0YSwgbWV0YURhdGEpXG4gIH0gYXMgTWVkaWFEYXRhO1xufTtcblxuY29uc3Qgd3JhcCA9IChkYXRhOiBNZWRpYURhdGEpOiBNZWRpYURpYWxvZ0RhdGEgPT4ge1xuICBjb25zdCB3cmFwcGVkOiBNZWRpYURpYWxvZ0RhdGEgPSB7XG4gICAgLi4uZGF0YSxcbiAgICBzb3VyY2U6IHsgdmFsdWU6IE9iai5nZXQoZGF0YSwgJ3NvdXJjZScpLmdldE9yKCcnKSB9LFxuICAgIGFsdHNvdXJjZTogeyB2YWx1ZTogT2JqLmdldChkYXRhLCAnYWx0c291cmNlJykuZ2V0T3IoJycpIH0sXG4gICAgcG9zdGVyOiB7IHZhbHVlOiBPYmouZ2V0KGRhdGEsICdwb3N0ZXInKS5nZXRPcignJykgfVxuICB9O1xuXG4gIC8vIEFkZCBhZGRpdGlvbmFsIHNpemUgdmFsdWVzIHRoYXQgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIGluIHRoZSBodG1sXG4gIEFyci5lYWNoKFsgJ3dpZHRoJywgJ2hlaWdodCcgXSBhcyBjb25zdCwgKHByb3ApID0+IHtcbiAgICBPYmouZ2V0KGRhdGEsIHByb3ApLmVhY2goKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBkaW1lbnNpb25zOiBNZWRpYURpYWxvZ0RhdGFbJ2RpbWVuc2lvbnMnXSA9IHdyYXBwZWQuZGltZW5zaW9ucyB8fCB7fTtcbiAgICAgIGRpbWVuc2lvbnNbcHJvcF0gPSB2YWx1ZTtcbiAgICAgIHdyYXBwZWQuZGltZW5zaW9ucyA9IGRpbWVuc2lvbnM7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiB3cmFwcGVkO1xufTtcblxuY29uc3QgaGFuZGxlRXJyb3IgPSAoZWRpdG9yOiBFZGl0b3IpID0+IChlcnJvcj86IHsgbXNnOiBzdHJpbmcgfSk6IHZvaWQgPT4ge1xuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciAmJiBlcnJvci5tc2cgP1xuICAgICdNZWRpYSBlbWJlZCBoYW5kbGVyIGVycm9yOiAnICsgZXJyb3IubXNnIDpcbiAgICAnTWVkaWEgZW1iZWQgaGFuZGxlciB0aHJldyB1bmtub3duIGVycm9yLic7XG4gIGVkaXRvci5ub3RpZmljYXRpb25NYW5hZ2VyLm9wZW4oeyB0eXBlOiAnZXJyb3InLCB0ZXh0OiBlcnJvck1lc3NhZ2UgfSk7XG59O1xuXG5jb25zdCBnZXRFZGl0b3JEYXRhID0gKGVkaXRvcjogRWRpdG9yKTogTWVkaWFEYXRhID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0Tm9kZSgpO1xuICBjb25zdCBzbmlwcGV0ID0gaXNNZWRpYUVsZW1lbnQoZWxlbWVudCkgPyBlZGl0b3Iuc2VyaWFsaXplci5zZXJpYWxpemUoZWxlbWVudCwgeyBzZWxlY3Rpb246IHRydWUgfSkgOiAnJztcbiAgY29uc3QgZGF0YSA9IEh0bWxUb0RhdGEuaHRtbFRvRGF0YShzbmlwcGV0LCBlZGl0b3Iuc2NoZW1hKTtcblxuICBjb25zdCBnZXREaW1lbnNpb25zT2ZFbGVtZW50ID0gKCk6IE1lZGlhRGlhbG9nRGF0YVsnZGltZW5zaW9ucyddID0+IHtcbiAgICBpZiAoaXNFbWJlZElmcmFtZShkYXRhLnNvdXJjZSwgZGF0YS50eXBlKSkge1xuICAgICAgY29uc3QgcmVjdCA9IGVkaXRvci5kb20uZ2V0UmVjdChlbGVtZW50KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiByZWN0LncudG9TdHJpbmcoKS5yZXBsYWNlKC9weCQvLCAnJyksXG4gICAgICAgIGhlaWdodDogcmVjdC5oLnRvU3RyaW5nKCkucmVwbGFjZSgvcHgkLywgJycpLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBkaW1lbnNpb25zID0gZ2V0RGltZW5zaW9uc09mRWxlbWVudCgpO1xuXG4gIHJldHVybiB7XG4gICAgZW1iZWQ6IHNuaXBwZXQsXG4gICAgLi4uZGF0YSxcbiAgICAuLi5kaW1lbnNpb25zXG4gIH07XG59O1xuXG5jb25zdCBhZGRFbWJlZEh0bWwgPSAoYXBpOiBEaWFsb2cuRGlhbG9nSW5zdGFuY2VBcGk8TWVkaWFEaWFsb2dEYXRhPiwgZWRpdG9yOiBFZGl0b3IpID0+IChyZXNwb25zZTogU2VydmljZS5FbWJlZFJlc3VsdCk6IHZvaWQgPT4ge1xuICAvLyBPbmx5IHNldCB2YWx1ZXMgaWYgYSBVUkwgaGFzIGJlZW4gZGVmaW5lZFxuICBpZiAoVHlwZS5pc1N0cmluZyhyZXNwb25zZS51cmwpICYmIHJlc3BvbnNlLnVybC50cmltKCkubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGh0bWwgPSByZXNwb25zZS5odG1sO1xuICAgIGNvbnN0IHNuaXBwZXREYXRhID0gSHRtbFRvRGF0YS5odG1sVG9EYXRhKGh0bWwsIGVkaXRvci5zY2hlbWEpO1xuICAgIGNvbnN0IG51RGF0YTogTWVkaWFEYXRhID0ge1xuICAgICAgLi4uc25pcHBldERhdGEsXG4gICAgICBzb3VyY2U6IHJlc3BvbnNlLnVybCxcbiAgICAgIGVtYmVkOiBodG1sXG4gICAgfTtcblxuICAgIGFwaS5zZXREYXRhKHdyYXAobnVEYXRhKSk7XG4gIH1cbn07XG5cbmNvbnN0IHNlbGVjdFBsYWNlaG9sZGVyID0gKGVkaXRvcjogRWRpdG9yLCBiZWZvcmVPYmplY3RzOiBIVE1MRWxlbWVudFtdKTogdm9pZCA9PiB7XG4gIGNvbnN0IGFmdGVyT2JqZWN0cyA9IGVkaXRvci5kb20uc2VsZWN0KCcqW2RhdGEtbWNlLW9iamVjdF0nKTtcblxuICAvLyBGaW5kIG5ldyBpbWFnZSBwbGFjZWhvbGRlciBzbyB3ZSBjYW4gc2VsZWN0IGl0XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmVmb3JlT2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IHkgPSBhZnRlck9iamVjdHMubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIGlmIChiZWZvcmVPYmplY3RzW2ldID09PSBhZnRlck9iamVjdHNbeV0pIHtcbiAgICAgICAgYWZ0ZXJPYmplY3RzLnNwbGljZSh5LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlZGl0b3Iuc2VsZWN0aW9uLnNlbGVjdChhZnRlck9iamVjdHNbMF0pO1xufTtcblxuY29uc3QgaGFuZGxlSW5zZXJ0ID0gKGVkaXRvcjogRWRpdG9yLCBodG1sOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgY29uc3QgYmVmb3JlT2JqZWN0cyA9IGVkaXRvci5kb20uc2VsZWN0KCcqW2RhdGEtbWNlLW9iamVjdF0nKTtcblxuICBlZGl0b3IuaW5zZXJ0Q29udGVudChodG1sKTtcbiAgc2VsZWN0UGxhY2Vob2xkZXIoZWRpdG9yLCBiZWZvcmVPYmplY3RzKTtcbiAgZWRpdG9yLm5vZGVDaGFuZ2VkKCk7XG59O1xuXG5jb25zdCBpc0VtYmVkSWZyYW1lID0gKHVybDogc3RyaW5nLCBtZWRpYURhdGFUeXBlPzogTWVkaWFEYXRhVHlwZSkgPT5cbiAgVHlwZS5pc05vbk51bGxhYmxlKG1lZGlhRGF0YVR5cGUpICYmIG1lZGlhRGF0YVR5cGUgPT09ICdlcGhveC1lbWJlZC1pcmknICYmIFR5cGUuaXNOb25OdWxsYWJsZShVcmxQYXR0ZXJucy5tYXRjaFBhdHRlcm4odXJsKSk7XG5cbmNvbnN0IHNob3VsZEluc2VydEFzTmV3SWZyYW1lID0gKHByZXZEYXRhOiBNZWRpYURhdGEsIG5ld0RhdGE6IE1lZGlhRGF0YSkgPT4ge1xuICBjb25zdCBoYXNEaW1lbnNpb25zQ2hhbmdlZCA9IChwcmV2RGF0YTogTWVkaWFEYXRhLCBuZXdEYXRhOiBNZWRpYURhdGEpID0+XG4gICAgcHJldkRhdGEud2lkdGggIT09IG5ld0RhdGEud2lkdGggfHwgcHJldkRhdGEuaGVpZ2h0ICE9PSBuZXdEYXRhLmhlaWdodDtcblxuICByZXR1cm4gaGFzRGltZW5zaW9uc0NoYW5nZWQocHJldkRhdGEsIG5ld0RhdGEpICYmIGlzRW1iZWRJZnJhbWUobmV3RGF0YS5zb3VyY2UsIHByZXZEYXRhLnR5cGUpO1xufTtcblxuY29uc3Qgc3VibWl0Rm9ybSA9IChwcmV2RGF0YTogTWVkaWFEYXRhLCBuZXdEYXRhOiBNZWRpYURhdGEsIGVkaXRvcjogRWRpdG9yKTogdm9pZCA9PiB7XG4gIG5ld0RhdGEuZW1iZWQgPVxuICAgIHNob3VsZEluc2VydEFzTmV3SWZyYW1lKHByZXZEYXRhLCBuZXdEYXRhKSAmJiBPcHRpb25zLmhhc0RpbWVuc2lvbnMoZWRpdG9yKVxuICAgICAgPyBkYXRhVG9IdG1sKGVkaXRvciwgeyAuLi5uZXdEYXRhLCBlbWJlZDogJycgfSApXG4gICAgICA6IFVwZGF0ZUh0bWwudXBkYXRlSHRtbChuZXdEYXRhLmVtYmVkID8/ICcnLCBuZXdEYXRhLCBmYWxzZSwgZWRpdG9yLnNjaGVtYSk7XG5cbiAgLy8gT25seSBmZXRjaCB0aGUgZW1iZWQgSFRNTCBjb250ZW50IGlmIHRoZSBVUkwgaGFzIGNoYW5nZWQgZnJvbSB3aGF0IGl0IHByZXZpb3VzbHkgd2FzXG4gIGlmIChuZXdEYXRhLmVtYmVkICYmIChwcmV2RGF0YS5zb3VyY2UgPT09IG5ld0RhdGEuc291cmNlIHx8IFNlcnZpY2UuaXNDYWNoZWQobmV3RGF0YS5zb3VyY2UpKSkge1xuICAgIGhhbmRsZUluc2VydChlZGl0b3IsIG5ld0RhdGEuZW1iZWQpO1xuICB9IGVsc2Uge1xuICAgIFNlcnZpY2UuZ2V0RW1iZWRIdG1sKGVkaXRvciwgbmV3RGF0YSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBoYW5kbGVJbnNlcnQoZWRpdG9yLCByZXNwb25zZS5odG1sKTtcbiAgICAgIH0pLmNhdGNoKGhhbmRsZUVycm9yKGVkaXRvcikpO1xuICB9XG59O1xuXG5jb25zdCBzaG93RGlhbG9nID0gKGVkaXRvcjogRWRpdG9yKTogdm9pZCA9PiB7XG4gIGNvbnN0IGVkaXRvckRhdGEgPSBnZXRFZGl0b3JEYXRhKGVkaXRvcik7XG4gIGNvbnN0IGN1cnJlbnREYXRhID0gQ2VsbDxNZWRpYURhdGE+KGVkaXRvckRhdGEpO1xuICBjb25zdCBpbml0aWFsRGF0YSA9IHdyYXAoZWRpdG9yRGF0YSk7XG5cbiAgY29uc3QgaGFuZGxlU291cmNlID0gKHByZXZEYXRhOiBNZWRpYURhdGEsIGFwaTogRGlhbG9nLkRpYWxvZ0luc3RhbmNlQXBpPE1lZGlhRGlhbG9nRGF0YT4pOiB2b2lkID0+IHtcbiAgICBjb25zdCBzZXJ2aWNlRGF0YSA9IHVud3JhcChhcGkuZ2V0RGF0YSgpLCAnc291cmNlJyk7XG5cbiAgICAvLyBJZiBhIG5ldyBVUkwgaXMgZW50ZXJlZCwgdGhlbiBjbGVhciB0aGUgZW1iZWQgaHRtbCBhbmQgZmV0Y2ggdGhlIG5ldyBkYXRhXG4gICAgaWYgKHByZXZEYXRhLnNvdXJjZSAhPT0gc2VydmljZURhdGEuc291cmNlKSB7XG4gICAgICBhZGRFbWJlZEh0bWwod2luLCBlZGl0b3IpKHsgdXJsOiBzZXJ2aWNlRGF0YS5zb3VyY2UsIGh0bWw6ICcnIH0pO1xuXG4gICAgICBTZXJ2aWNlLmdldEVtYmVkSHRtbChlZGl0b3IsIHNlcnZpY2VEYXRhKVxuICAgICAgICAudGhlbihhZGRFbWJlZEh0bWwod2luLCBlZGl0b3IpKVxuICAgICAgICAuY2F0Y2goaGFuZGxlRXJyb3IoZWRpdG9yKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUVtYmVkID0gKGFwaTogRGlhbG9nLkRpYWxvZ0luc3RhbmNlQXBpPE1lZGlhRGlhbG9nRGF0YT4pOiB2b2lkID0+IHtcbiAgICBjb25zdCBkYXRhID0gdW53cmFwKGFwaS5nZXREYXRhKCkpO1xuICAgIGNvbnN0IGRhdGFGcm9tRW1iZWQgPSBIdG1sVG9EYXRhLmh0bWxUb0RhdGEoZGF0YS5lbWJlZCA/PyAnJywgZWRpdG9yLnNjaGVtYSk7XG4gICAgYXBpLnNldERhdGEod3JhcChkYXRhRnJvbUVtYmVkKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVXBkYXRlID0gKGFwaTogRGlhbG9nLkRpYWxvZ0luc3RhbmNlQXBpPE1lZGlhRGlhbG9nRGF0YT4sIHNvdXJjZUlucHV0OiBTb3VyY2VJbnB1dCwgcHJldkRhdGE6IE1lZGlhRGF0YSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB1bndyYXAoYXBpLmdldERhdGEoKSwgc291cmNlSW5wdXQpO1xuICAgIGNvbnN0IGRhdGEgPVxuICAgICAgc2hvdWxkSW5zZXJ0QXNOZXdJZnJhbWUocHJldkRhdGEsIGRpYWxvZ0RhdGEpICYmIE9wdGlvbnMuaGFzRGltZW5zaW9ucyhlZGl0b3IpXG4gICAgICAgID8geyAuLi5kaWFsb2dEYXRhLCBlbWJlZDogJycgfVxuICAgICAgICA6IGRpYWxvZ0RhdGE7XG5cbiAgICBjb25zdCBlbWJlZCA9IGRhdGFUb0h0bWwoZWRpdG9yLCBkYXRhKTtcbiAgICBhcGkuc2V0RGF0YSh3cmFwKHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICBlbWJlZFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBtZWRpYUlucHV0OiBEaWFsb2cuVXJsSW5wdXRTcGVjW10gPSBbe1xuICAgIG5hbWU6ICdzb3VyY2UnLFxuICAgIHR5cGU6ICd1cmxpbnB1dCcsXG4gICAgZmlsZXR5cGU6ICdtZWRpYScsXG4gICAgbGFiZWw6ICdTb3VyY2UnLFxuICAgIHBpY2tlcl90ZXh0OiAnQnJvd3NlIGZpbGVzJ1xuICB9XTtcbiAgY29uc3Qgc2l6ZUlucHV0OiBEaWFsb2cuU2l6ZUlucHV0U3BlY1tdID0gIU9wdGlvbnMuaGFzRGltZW5zaW9ucyhlZGl0b3IpID8gW10gOiBbe1xuICAgIHR5cGU6ICdzaXplaW5wdXQnLFxuICAgIG5hbWU6ICdkaW1lbnNpb25zJyxcbiAgICBsYWJlbDogJ0NvbnN0cmFpbiBwcm9wb3J0aW9ucycsXG4gICAgY29uc3RyYWluOiB0cnVlXG4gIH1dO1xuXG4gIGNvbnN0IGdlbmVyYWxUYWIgPSB7XG4gICAgdGl0bGU6ICdHZW5lcmFsJyxcbiAgICBuYW1lOiAnZ2VuZXJhbCcsXG4gICAgaXRlbXM6IEFyci5mbGF0dGVuPERpYWxvZy5Cb2R5Q29tcG9uZW50U3BlYz4oWyBtZWRpYUlucHV0LCBzaXplSW5wdXQgXSlcbiAgfTtcblxuICBjb25zdCBlbWJlZFRleHRhcmVhOiBEaWFsb2cuVGV4dEFyZWFTcGVjID0ge1xuICAgIHR5cGU6ICd0ZXh0YXJlYScsXG4gICAgbmFtZTogJ2VtYmVkJyxcbiAgICBsYWJlbDogJ1Bhc3RlIHlvdXIgZW1iZWQgY29kZSBiZWxvdzonXG4gIH07XG4gIGNvbnN0IGVtYmVkVGFiID0ge1xuICAgIHRpdGxlOiAnRW1iZWQnLFxuICAgIGl0ZW1zOiBbXG4gICAgICBlbWJlZFRleHRhcmVhXG4gICAgXVxuICB9O1xuXG4gIGNvbnN0IGFkdmFuY2VkRm9ybUl0ZW1zOiBEaWFsb2cuQm9keUNvbXBvbmVudFNwZWNbXSA9IFtdO1xuXG4gIGlmIChPcHRpb25zLmhhc0FsdFNvdXJjZShlZGl0b3IpKSB7XG4gICAgYWR2YW5jZWRGb3JtSXRlbXMucHVzaCh7XG4gICAgICBuYW1lOiAnYWx0c291cmNlJyxcbiAgICAgIHR5cGU6ICd1cmxpbnB1dCcsXG4gICAgICBmaWxldHlwZTogJ21lZGlhJyxcbiAgICAgIGxhYmVsOiAnQWx0ZXJuYXRpdmUgc291cmNlIFVSTCdcbiAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGlmIChPcHRpb25zLmhhc1Bvc3RlcihlZGl0b3IpKSB7XG4gICAgYWR2YW5jZWRGb3JtSXRlbXMucHVzaCh7XG4gICAgICBuYW1lOiAncG9zdGVyJyxcbiAgICAgIHR5cGU6ICd1cmxpbnB1dCcsXG4gICAgICBmaWxldHlwZTogJ2ltYWdlJyxcbiAgICAgIGxhYmVsOiAnTWVkaWEgcG9zdGVyIChJbWFnZSBVUkwpJ1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgYWR2YW5jZWRUYWIgPSB7XG4gICAgdGl0bGU6ICdBZHZhbmNlZCcsXG4gICAgbmFtZTogJ2FkdmFuY2VkJyxcbiAgICBpdGVtczogYWR2YW5jZWRGb3JtSXRlbXNcbiAgfTtcblxuICBjb25zdCB0YWJzID0gW1xuICAgIGdlbmVyYWxUYWIsXG4gICAgZW1iZWRUYWJcbiAgXTtcblxuICBpZiAoYWR2YW5jZWRGb3JtSXRlbXMubGVuZ3RoID4gMCkge1xuICAgIHRhYnMucHVzaChhZHZhbmNlZFRhYik7XG4gIH1cblxuICBjb25zdCBib2R5OiBEaWFsb2cuVGFiUGFuZWxTcGVjID0ge1xuICAgIHR5cGU6ICd0YWJwYW5lbCcsXG4gICAgdGFic1xuICB9O1xuICBjb25zdCB3aW4gPSBlZGl0b3Iud2luZG93TWFuYWdlci5vcGVuPE1lZGlhRGlhbG9nRGF0YT4oe1xuICAgIHRpdGxlOiAnSW5zZXJ0L0VkaXQgTWVkaWEnLFxuICAgIHNpemU6ICdub3JtYWwnLFxuXG4gICAgYm9keSxcbiAgICBidXR0b25zOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdjYW5jZWwnLFxuICAgICAgICBuYW1lOiAnY2FuY2VsJyxcbiAgICAgICAgdGV4dDogJ0NhbmNlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICBuYW1lOiAnc2F2ZScsXG4gICAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgICAgcHJpbWFyeTogdHJ1ZVxuICAgICAgfVxuICAgIF0sXG4gICAgb25TdWJtaXQ6IChhcGkpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2VEYXRhID0gdW53cmFwKGFwaS5nZXREYXRhKCkpO1xuICAgICAgc3VibWl0Rm9ybShjdXJyZW50RGF0YS5nZXQoKSwgc2VydmljZURhdGEsIGVkaXRvcik7XG4gICAgICBhcGkuY2xvc2UoKTtcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiAoYXBpLCBkZXRhaWwpID0+IHtcbiAgICAgIHN3aXRjaCAoZGV0YWlsLm5hbWUpIHtcbiAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICBoYW5kbGVTb3VyY2UoY3VycmVudERhdGEuZ2V0KCksIGFwaSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZW1iZWQnOlxuICAgICAgICAgIGhhbmRsZUVtYmVkKGFwaSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZGltZW5zaW9ucyc6XG4gICAgICAgIGNhc2UgJ2FsdHNvdXJjZSc6XG4gICAgICAgIGNhc2UgJ3Bvc3Rlcic6XG4gICAgICAgICAgaGFuZGxlVXBkYXRlKGFwaSwgZGV0YWlsLm5hbWUsIGN1cnJlbnREYXRhLmdldCgpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY3VycmVudERhdGEuc2V0KHVud3JhcChhcGkuZ2V0RGF0YSgpKSk7XG4gICAgfSxcbiAgICBpbml0aWFsRGF0YVxuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIHNob3dEaWFsb2csXG4gIHVud3JhcFxufTtcbiIsImltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi4vY29yZS9UeXBlJztcbmltcG9ydCAqIGFzIEFycmF5VXRpbCBmcm9tICcuLi9jb3JlL0FycmF5VXRpbCc7XG5cbi8qKiBBIHdheSBvZiBjb21wYXJpbmcgdHdvIHZhbHVlcyBvZiB0aGUgc2FtZSB0eXBlIGZvciBlcXVhbGl0eS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXE8QT4ge1xuICBlcTogKHg6IEEsIHk6IEEpID0+IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBjb250cmFtYXAgPSA8QSwgQj4gKGVxYTogRXE8QT4sIGY6IChiOiBCKSA9PiBBKTogRXE8Qj4gPT5cbiAgZXEoKHgsIHkpID0+IGVxYS5lcShmKHgpLCBmKHkpKSk7XG5cbmV4cG9ydCBjb25zdCBlcSA9IDxBPiAoZjogKHg6IEEsIHk6IEEpID0+IGJvb2xlYW4pOiBFcTxBPiA9PlxuICAoeyBlcTogZiB9KTtcblxuZXhwb3J0IGNvbnN0IHRyaXBsZUVxOiBFcTxhbnk+ID0gZXEoKHgsIHkpID0+IHggPT09IHkpO1xuXG5leHBvcnQgY29uc3QgZXFTdHJpbmc6IEVxPHN0cmluZz4gPSB0cmlwbGVFcTtcblxuZXhwb3J0IGNvbnN0IGVxQm9vbGVhbjogRXE8Ym9vbGVhbj4gPSB0cmlwbGVFcTtcblxuZXhwb3J0IGNvbnN0IGVxTnVtYmVyOiBFcTxudW1iZXI+ID0gdHJpcGxlRXE7XG5cbmV4cG9ydCBjb25zdCBlcVVuZGVmaW5lZDogRXE8dW5kZWZpbmVkPiA9IHRyaXBsZUVxO1xuXG5leHBvcnQgY29uc3QgZXFOdWxsOiBFcTxudWxsPiA9IHRyaXBsZUVxO1xuXG5leHBvcnQgY29uc3QgZXFBcnJheSA9IDxBPiAoZXFhOiBFcTxBPik6IEVxPEFycmF5TGlrZTxBPj4gPT4gZXEoKHgsIHkpID0+IHtcbiAgaWYgKHgubGVuZ3RoICE9PSB5Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBsZW4gPSB4Lmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGlmICghZXFhLmVxKHhbaV0sIHlbaV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufSk7XG5cbi8vIFRPRE86IE1ha2UgYW4gT3JkIHR5cGVjbGFzc1xuY29uc3QgZXFTb3J0ZWRBcnJheSA9IDxBPihlcWE6IEVxPEE+LCBjb21wYXJlRm4/OiAoYTogQSwgYjogQSkgPT4gbnVtYmVyKTogRXE8QXJyYXlMaWtlPEE+PiA9PlxuICBjb250cmFtYXAoZXFBcnJheShlcWEpLCAoeHMpID0+IEFycmF5VXRpbC5zb3J0KHhzLCBjb21wYXJlRm4pKTtcblxuZXhwb3J0IGNvbnN0IGVxUmVjb3JkID0gPEE+IChlcWE6IEVxPEE+KTogRXE8UmVjb3JkPHN0cmluZywgQT4+ID0+IGVxKCh4LCB5KSA9PiB7XG4gIGNvbnN0IGt4ID0gT2JqZWN0LmtleXMoeCk7XG4gIGNvbnN0IGt5ID0gT2JqZWN0LmtleXMoeSk7XG4gIGlmICghZXFTb3J0ZWRBcnJheShlcVN0cmluZykuZXEoa3gsIGt5KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBsZW4gPSBreC5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCBxID0ga3hbaV07XG4gICAgaWYgKCFlcWEuZXEoeFtxXSwgeVtxXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59KTtcblxuZXhwb3J0IGNvbnN0IGVxQW55OiBFcTxhbnk+ID0gZXEoKHgsIHkpID0+IHtcbiAgaWYgKHggPT09IHkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IHR4ID0gVHlwZS50eXBlT2YoeCk7XG4gIGNvbnN0IHR5ID0gVHlwZS50eXBlT2YoeSk7XG4gIGlmICh0eCAhPT0gdHkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoVHlwZS5pc0VxdWF0YWJsZVR5cGUodHgpKSB7XG4gICAgcmV0dXJuIHggPT09IHk7XG5cbiAgfSBlbHNlIGlmICh0eCA9PT0gJ2FycmF5Jykge1xuICAgIHJldHVybiBlcUFycmF5KGVxQW55KS5lcSh4LCB5KTtcblxuICB9IGVsc2UgaWYgKHR4ID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBlcVJlY29yZChlcUFueSkuZXEoeCwgeSk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59KTtcbiIsImV4cG9ydCBjb25zdCBtYXAgPSA8QSwgQj4oeHM6IEFycmF5TGlrZTxBPiwgZjogKGE6IEEpID0+IEIpOiBCW10gPT4ge1xuICBjb25zdCBsZW4gPSB4cy5sZW5ndGg7XG4gIGNvbnN0IHIgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICByW2ldID0gZih4KTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbi8qKiBtYXAgYSBmdW5jdGlvbiBvdmVyIGFuIGFycmF5LCB0aGVuIG1hcCBhbm90aGVyIGZ1bmN0aW9uIG92ZXIgZXZlcnkgaXRlbSBleGNlcHQgdGhlIGxhc3QgKi9cbmV4cG9ydCBjb25zdCBtYXBEZWxpbWl0ID0gPEEsIEI+ICh4czogQXJyYXlMaWtlPEE+LCBmOiAoYTogQSkgPT4gQiwgZGVsaW1pdDogKGI6IEIpID0+IEIpOiBCW10gPT4ge1xuICBjb25zdCBsZW4gPSB4cy5sZW5ndGg7XG4gIGNvbnN0IHIgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW4gLSAxOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgcltpXSA9IGRlbGltaXQoZih4KSk7XG4gIH1cbiAgaWYgKGxlbiA+IDApIHtcbiAgICByW2xlbiAtIDFdID0gKGYoeHNbbGVuIC0gMV0pKTtcbiAgfVxuXG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IHNvcnQgPSA8QT4gKHhzOiBBcnJheUxpa2U8QT4sIGNvbXBhcmVGbj86IChhOiBBLCBiOiBBKSA9PiBudW1iZXIpOiBBW10gPT4ge1xuICBjb25zdCBjbG9uZTogQVtdID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoeHMpO1xuICByZXR1cm4gY2xvbmUuc29ydChjb21wYXJlRm4pO1xufTtcbiIsImV4cG9ydCBjb25zdCB0eXBlT2YgPSAoeDogYW55KSA9PiB7XG4gIGlmICh4ID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfVxuICBpZiAoeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICd1bmRlZmluZWQnO1xuICB9XG4gIGNvbnN0IHQgPSB0eXBlb2YgeDtcbiAgaWYgKHQgPT09ICdvYmplY3QnICYmIChBcnJheS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih4KSB8fCB4LmNvbnN0cnVjdG9yICYmIHguY29uc3RydWN0b3IubmFtZSA9PT0gJ0FycmF5JykpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfVxuICBpZiAodCA9PT0gJ29iamVjdCcgJiYgKFN0cmluZy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih4KSB8fCB4LmNvbnN0cnVjdG9yICYmIHguY29uc3RydWN0b3IubmFtZSA9PT0gJ1N0cmluZycpKSB7XG4gICAgcmV0dXJuICdzdHJpbmcnO1xuICB9XG4gIHJldHVybiB0O1xufTtcblxuY29uc3QgaXNUeXBlID0gPFQ+KHR5cGU6IHN0cmluZykgPT4gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBUID0+IHR5cGVPZih2YWx1ZSkgPT09IHR5cGU7XG5cbmV4cG9ydCBjb25zdCBpc1N0cmluZyA9IGlzVHlwZTxzdHJpbmc+KCdzdHJpbmcnKTtcbmV4cG9ydCBjb25zdCBpc09iamVjdCA9IGlzVHlwZTxPYmplY3Q+KCdvYmplY3QnKTtcbmV4cG9ydCBjb25zdCBpc0FycmF5ID0gaXNUeXBlPEFycmF5PHVua25vd24+PignYXJyYXknKTtcbmV4cG9ydCBjb25zdCBpc051bGwgPSBpc1R5cGU8bnVsbD4oJ251bGwnKTtcbmV4cG9ydCBjb25zdCBpc0Jvb2xlYW4gPSBpc1R5cGU8Ym9vbGVhbj4oJ2Jvb2xlYW4nKTtcbmV4cG9ydCBjb25zdCBpc1VuZGVmaW5lZCA9IGlzVHlwZTx1bmRlZmluZWQ+KCd1bmRlZmluZWQnKTtcbmV4cG9ydCBjb25zdCBpc0Z1bmN0aW9uID0gaXNUeXBlPEZ1bmN0aW9uPignZnVuY3Rpb24nKTtcbmV4cG9ydCBjb25zdCBpc051bWJlciA9IGlzVHlwZTxudW1iZXI+KCdudW1iZXInKTtcblxuZXhwb3J0IGNvbnN0IGlzRXF1YXRhYmxlVHlwZSA9ICh4OiBzdHJpbmcpOiBib29sZWFuID0+XG4gIFsgJ3VuZGVmaW5lZCcsICdib29sZWFuJywgJ251bWJlcicsICdzdHJpbmcnLCAnZnVuY3Rpb24nLCAneG1sJywgJ251bGwnIF0uaW5kZXhPZih4KSAhPT0gLTE7XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG4gICAgICAgIGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucnYgPSAoKSA9PiAoXCIxLjUuMlwiKSIsIl9fd2VicGFja19yZXF1aXJlX18ucnVpZCA9IFwiYnVuZGxlcj1yc3BhY2tAMS41LjJcIjtcbiIsImltcG9ydCBQbHVnaW4gZnJvbSAnLi9QbHVnaW4nO1xuXG5QbHVnaW4oKTtcblxuLyoqICoqKioqXG4gKiBETyBOT1QgRVhQT1JUIEFOWVRISU5HXG4gKlxuICogSUYgWU9VIERPIFJPTExVUCBXSUxMIExFQVZFIEEgR0xPQkFMIE9OIFRIRSBQQUdFXG4gKioqKioqKi9cbiJdLCJuYW1lcyI6WyJFcSIsIkZ1biIsIk9wdGlvbmFsIiwiVHlwZSIsIm5hdGl2ZVNsaWNlIiwiQXJyYXkiLCJuYXRpdmVJbmRleE9mIiwibmF0aXZlUHVzaCIsInJhd0luZGV4T2YiLCJ0cyIsInQiLCJpbmRleE9mIiwieHMiLCJ4IiwiciIsImNvbnRhaW5zIiwiZXhpc3RzIiwicHJlZCIsImkiLCJsZW4iLCJyYW5nZSIsIm51bSIsImYiLCJjaHVuayIsImFycmF5Iiwic2l6ZSIsInMiLCJtYXAiLCJlYWNoIiwiZWFjaHIiLCJwYXJ0aXRpb24iLCJwYXNzIiwiZmFpbCIsImFyciIsImZpbHRlciIsImdyb3VwQnkiLCJ3YXNUeXBlIiwiZ3JvdXAiLCJ0eXBlIiwiZm9sZHIiLCJhY2MiLCJmb2xkbCIsImZpbmRVbnRpbCIsInVudGlsIiwiZmluZCIsImZpbmRJbmRleCIsImZpbmRMYXN0SW5kZXgiLCJmbGF0dGVuIiwiRXJyb3IiLCJiaW5kIiwiZm9yYWxsIiwiZXF1YWwiLCJhMSIsImEyIiwiZXEiLCJyZXZlcnNlIiwiZGlmZmVyZW5jZSIsIm1hcFRvT2JqZWN0IiwiU3RyaW5nIiwicHVyZSIsInNvcnQiLCJjb21wYXJhdG9yIiwiY29weSIsImdldCIsImhlYWQiLCJsYXN0IiwiZnJvbSIsImZpbmRNYXAiLCJ1bmlxdWUiLCJpc0R1cGxpY2F0ZWQiLCJDZWxsIiwiaW5pdGlhbCIsInZhbHVlIiwic2V0IiwidiIsIm5vb3AiLCJub2FyZyIsImNvbXBvc2UiLCJmYSIsImZiIiwiYXJncyIsImNvbXBvc2UxIiwiZmJjIiwiZmFiIiwiYSIsImNvbnN0YW50IiwiaWRlbnRpdHkiLCJ0cmlwbGVFcXVhbHMiLCJiIiwiY3VycnkiLCJmbiIsImluaXRpYWxBcmdzIiwicmVzdEFyZ3MiLCJhbGwiLCJub3QiLCJkaWUiLCJtc2ciLCJhcHBseSIsImNhbGwiLCJuZXZlciIsImFsd2F5cyIsIndlYWtlbiIsInBpcGUiLCJhYiIsImJjIiwiY2QiLCJkZSIsImVmIiwiZmciLCJnaCIsImMiLCJkIiwiZSIsImciLCJrZXlzIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJwcm9wcyIsImsiLCJ0dXBsZU1hcCIsInR1cGxlIiwib2JqQWNjIiwiaW50ZXJuYWxGaWx0ZXIiLCJvblRydWUiLCJvbkZhbHNlIiwiYmlmaWx0ZXIiLCJtYXBUb0FycmF5IiwibmFtZSIsInZhbHVlcyIsImtleSIsImhhcyIsImhhc05vbk51bGxhYmxlS2V5IiwidW5kZWZpbmVkIiwiaXNFbXB0eSIsInRhZyIsIm9uTm9uZSIsIm9uU29tZSIsIm1hcHBlciIsImJpbmRlciIsInByZWRpY2F0ZSIsInJlcGxhY2VtZW50IiwidGh1bmsiLCJtZXNzYWdlIiwid29ya2VyIiwiU3RyQXBwZW5kIiwiY2hlY2tSYW5nZSIsInN0ciIsInN1YnN0ciIsInN0YXJ0Iiwic3VwcGxhbnQiLCJpc1N0cmluZ09yTnVtYmVyIiwiZnVsbE1hdGNoIiwicmVtb3ZlTGVhZGluZyIsInByZWZpeCIsInN0YXJ0c1dpdGgiLCJyZW1vdmVUcmFpbGluZyIsInN1ZmZpeCIsImVuZHNXaXRoIiwiZW5zdXJlTGVhZGluZyIsImVuc3VyZVRyYWlsaW5nIiwiZW5kIiwiaWR4IiwiY2FwaXRhbGl6ZSIsImJsYW5rIiwidHJpbSIsImxUcmltIiwiclRyaW0iLCJpc05vdEVtcHR5IiwicmVwZWF0IiwiY291bnQiLCJmcm9tQ29kZVBvaW50IiwidG9JbnQiLCJyYWRpeCIsInBhcnNlSW50IiwiaXNOYU4iLCJ0b0Zsb2F0IiwicGFyc2VGbG9hdCIsImdldFByb3RvdHlwZU9mIiwiaGFzUHJvdG8iLCJjb25zdHJ1Y3RvciIsInR5cGVPZiIsIm8iLCJwcm90byIsImlzVHlwZSIsImlzU2ltcGxlVHlwZSIsImlzIiwiaXNPYmplY3QiLCJpc1N0cmluZyIsImlzUGxhaW5PYmplY3QiLCJpc0FycmF5IiwiaXNOdWxsIiwiaXNCb29sZWFuIiwiaXNVbmRlZmluZWQiLCJpc051bGxhYmxlIiwiaXNOb25OdWxsYWJsZSIsImlzRnVuY3Rpb24iLCJpc051bWJlciIsImlzQXJyYXlPZiIsImlzUHJvbWlzZUxpa2UiLCJhZGRUb1N0YXJ0IiwiYWRkVG9FbmQiLCJyZW1vdmVGcm9tU3RhcnQiLCJudW1DaGFycyIsInJlbW92ZUZyb21FbmQiLCJQbHVnaW5NYW5hZ2VyIiwiQXBpIiwiQ29tbWFuZHMiLCJPcHRpb25zIiwiRmlsdGVyQ29udGVudCIsIlJlc29sdmVOYW1lIiwiU2VsZWN0aW9uIiwiQnV0dG9ucyIsImVkaXRvciIsIkRpYWxvZyIsInNob3dEaWFsb2ciLCJyZWdpc3RlciIsIm9wdGlvbiIsInJlZ2lzdGVyT3B0aW9uIiwiZ2V0QXVkaW9UZW1wbGF0ZUNhbGxiYWNrIiwiZ2V0VmlkZW9UZW1wbGF0ZUNhbGxiYWNrIiwiZ2V0SWZyYW1lVGVtcGxhdGVDYWxsYmFjayIsImhhc0xpdmVFbWJlZHMiLCJzaG91bGRGaWx0ZXJIdG1sIiwiZ2V0VXJsUmVzb2x2ZXIiLCJoYXNBbHRTb3VyY2UiLCJoYXNQb3N0ZXIiLCJoYXNEaW1lbnNpb25zIiwiVG9vbHMiLCJIdG1sVG9EYXRhIiwiTWltZSIsIlVwZGF0ZUh0bWwiLCJVcmxQYXR0ZXJucyIsImdldElmcmFtZUh0bWwiLCJkYXRhIiwiaWZyYW1lVGVtcGxhdGVDYWxsYmFjayIsImFsbG93RnVsbHNjcmVlbiIsImdldEZsYXNoSHRtbCIsImh0bWwiLCJnZXRBdWRpb0h0bWwiLCJhdWRpb1RlbXBsYXRlQ2FsbGJhY2siLCJnZXRWaWRlb0h0bWwiLCJ2aWRlb1RlbXBsYXRlQ2FsbGJhY2siLCJkYXRhVG9IdG1sIiwiZGF0YUluIiwicGF0dGVybiIsIkFyciIsIk9iaiIsIkFzdE5vZGUiLCJOb2RlcyIsIlNhbml0aXplIiwic2V0dXAiLCJzY2hlbWEiLCJzZXJpYWxpemVyIiwicGFyc2VyIiwiYm9vbEF0dHJzIiwiYXR0cnMiLCJydWxlIiwiYXR0ciIsIm5vZGVzIiwibm9kZSIsInJlYWxFbG1OYW1lIiwicmVhbEVsbSIsImNsYXNzTmFtZSIsImF0dHJpYnMiLCJhaSIsImF0dHJOYW1lIiwiaW5uZXJIdG1sIiwiZnJhZ21lbnQiLCJ1bmVzY2FwZSIsImNoaWxkIiwiZG9tIiwiZWxtIiwiRE9NVXRpbHMiLCJEb21QYXJzZXIiLCJET00iLCJ0cmltUHgiLCJnZXRFcGhveEVtYmVkRGF0YSIsInN0eWxlIiwic3R5bGVzIiwiaHRtbFRvRGF0YSIsInJvb3ROb2RlIiwiZ3Vlc3MiLCJ1cmwiLCJtaW1lcyIsImZpbGVFbmQiLCJTdHJpbmdzIiwiRW52IiwiSHRtbFNlcmlhbGl6ZXIiLCJQYXJzZXIiLCJpc0xpdmVFbWJlZE5vZGUiLCJnZXREaW1lbnNpb24iLCJkaW1lbnNpb24iLCJkZWZhdWx0VmFsdWUiLCJzZXREaW1lbnNpb25zIiwicHJldmlld05vZGUiLCJ1c2VEZWZhdWx0cyIsImRlZmF1bHRXaWR0aCIsImZhbGxiYWNrSGVpZ2h0IiwiZGVmYXVsdEhlaWdodCIsImFwcGVuZE5vZGVDb250ZW50Iiwibm9kZU5hbWUiLCJuZXdOb2RlIiwiY3JlYXRlUGxhY2Vob2xkZXJOb2RlIiwicGxhY2VIb2xkZXIiLCJyZXRhaW5BdHRyaWJ1dGVzQW5kSW5uZXJIdG1sIiwiY3JlYXRlUHJldmlld05vZGUiLCJwcmV2aWV3V3JhcHBlciIsInNhbml0aXplZEh0bWwiLCJzaGltTm9kZSIsInNvdXJjZU5vZGUiLCJ0YXJnZXROb2RlIiwiYXR0clZhbHVlIiwidGVtcE5vZGUiLCJlc2NhcGUiLCJpc1BhZ2VFbWJlZFdyYXBwZXIiLCJub2RlQ2xhc3MiLCJpc1dpdGhpbkVtYmVkV3JhcHBlciIsInBsYWNlSG9sZGVyQ29udmVydGVyIiwic2V0dGluZ3MiLCJwYXJzZUFuZFNhbml0aXplIiwiY29udGV4dCIsImdldEVkaXRvck9wdGlvbiIsInNhbml0aXplIiwidmFsaWRhdGUiLCJpc01lZGlhRWxlbWVudCIsImVsZW1lbnQiLCJwcmV2aWV3T2JqIiwic2VsZWN0ZWROb2RlIiwidGFyZ2V0IiwiRGF0YVRvSHRtbCIsImNhY2hlIiwiZW1iZWRQcm9taXNlIiwiaGFuZGxlciIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJ3cmFwcGVkUmVzb2x2ZSIsInJlc3BvbnNlIiwiZGVmYXVsdFByb21pc2UiLCJsb2FkZWREYXRhIiwiZ2V0RW1iZWRIdG1sIiwiZW1iZWRIYW5kbGVyIiwiaXNDYWNoZWQiLCJhZGRQeCIsInVwZGF0ZUVwaG94RW1iZWQiLCJzdHlsZU1hcCIsInNvdXJjZXMiLCJ1cGRhdGVIdG1sIiwidXBkYXRlQWxsIiwibnVtU291cmNlcyIsInNvdXJjZUNvdW50IiwiaW5kZXgiLCJzb3VyY2UiLCJoYXNJbWFnZSIsImltZyIsInVybFBhdHRlcm5zIiwiZ2V0UHJvdG9jb2wiLCJwcm90b2NvbE1hdGNoZXMiLCJnZXRVcmwiLCJwcm90b2NvbCIsIm1hdGNoIiwibmV3VXJsIiwibWF0Y2hQYXR0ZXJuIiwicGF0dGVybnMiLCJvblNldHVwRWRpdGFibGUiLCJhcGkiLCJub2RlQ2hhbmdlZCIsIm9uQWN0aW9uIiwiYnV0dG9uQXBpIiwic2VsZWN0aW9uIiwidW5iaW5kU2VsZWN0b3JDaGFuZ2VkIiwidW5iaW5kRWRpdGFibGUiLCJTZXJ2aWNlIiwiZXh0cmFjdE1ldGEiLCJzb3VyY2VJbnB1dCIsIm1haW5EYXRhIiwiZ2V0VmFsdWUiLCJtZXRhRGF0YSIsInByb3AiLCJnZXRGcm9tRGF0YSIsImdldEZyb21NZXRhRGF0YSIsImdldE5vbkVtcHR5VmFsdWUiLCJnZXRGcm9tVmFsdWVGaXJzdCIsImdldEZyb21NZXRhRmlyc3QiLCJnZXREaW1lbnNpb25zIiwiZGltZW5zaW9ucyIsImRpbXMiLCJ1bndyYXAiLCJ3cmFwIiwid3JhcHBlZCIsImhhbmRsZUVycm9yIiwiZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJnZXRFZGl0b3JEYXRhIiwic25pcHBldCIsImdldERpbWVuc2lvbnNPZkVsZW1lbnQiLCJpc0VtYmVkSWZyYW1lIiwicmVjdCIsImFkZEVtYmVkSHRtbCIsInNuaXBwZXREYXRhIiwibnVEYXRhIiwic2VsZWN0UGxhY2Vob2xkZXIiLCJiZWZvcmVPYmplY3RzIiwiYWZ0ZXJPYmplY3RzIiwieSIsImhhbmRsZUluc2VydCIsIm1lZGlhRGF0YVR5cGUiLCJzaG91bGRJbnNlcnRBc05ld0lmcmFtZSIsInByZXZEYXRhIiwibmV3RGF0YSIsImhhc0RpbWVuc2lvbnNDaGFuZ2VkIiwic3VibWl0Rm9ybSIsImVkaXRvckRhdGEiLCJjdXJyZW50RGF0YSIsImluaXRpYWxEYXRhIiwiaGFuZGxlU291cmNlIiwic2VydmljZURhdGEiLCJ3aW4iLCJoYW5kbGVFbWJlZCIsImRhdGFGcm9tRW1iZWQiLCJoYW5kbGVVcGRhdGUiLCJkaWFsb2dEYXRhIiwiZW1iZWQiLCJtZWRpYUlucHV0Iiwic2l6ZUlucHV0IiwiZ2VuZXJhbFRhYiIsImVtYmVkVGV4dGFyZWEiLCJlbWJlZFRhYiIsImFkdmFuY2VkRm9ybUl0ZW1zIiwiYWR2YW5jZWRUYWIiLCJ0YWJzIiwiYm9keSIsImRldGFpbCIsIlBsdWdpbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNINkI7QUFFUDtBQUNTO0FBQ1A7QUFPL0IsTUFBTUksY0FBY0MsTUFBTSxTQUFTLENBQUMsS0FBSztBQUN6QyxNQUFNQyxnQkFBZ0JELE1BQU0sU0FBUyxDQUFDLE9BQU87QUFDN0MsTUFBTUUsYUFBYUYsTUFBTSxTQUFTLENBQUMsSUFBSTtBQUV2QyxNQUFNRyxhQUFhLENBQUtDLElBQWtCQyxJQUN4Q0osY0FBYyxJQUFJLENBQUNHLElBQUlDO0FBRWxCLE1BQU1DLFVBQVUsQ0FBVUMsSUFBa0JDO0lBQ2pELHdGQUF3RjtJQUN4RixNQUFNQyxJQUFJTixXQUFXSSxJQUFJQztJQUN6QixPQUFPQyxNQUFNLENBQUMsSUFBSVosb0RBQWEsS0FBS0Esb0RBQWEsQ0FBQ1k7QUFDcEQsRUFBRTtBQUVLLE1BQU1DLFdBQVcsQ0FBSUgsSUFBa0JDLElBQWtCTCxXQUFXSSxJQUFJQyxLQUFLLENBQUMsRUFBRTtB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
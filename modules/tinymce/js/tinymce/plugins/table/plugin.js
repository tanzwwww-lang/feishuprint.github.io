(() => { // webpackBootstrap
"use strict";
var __webpack_modules__ = ({
"./lib/globals/tinymce/core/api/Env.js": 
/*!*********************************************!*\
  !*** ./lib/globals/tinymce/core/api/Env.js ***!
  \*********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Env: () => (Env),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.Env');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Env = global;


}),
"./lib/globals/tinymce/core/api/FakeClipboard.js": 
/*!*******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/FakeClipboard.js ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  FakeClipboard: () => (FakeClipboard),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.FakeClipboard');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var FakeClipboard = global;


}),
"./lib/globals/tinymce/core/api/PluginManager.js": 
/*!*******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/PluginManager.js ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PluginManager: () => (PluginManager),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.PluginManager');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var PluginManager = global;


}),
"./lib/globals/tinymce/core/api/util/Tools.js": 
/*!****************************************************!*\
  !*** ./lib/globals/tinymce/core/api/util/Tools.js ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Tools: () => (Tools),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.util.Tools');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var Tools = global;


}),
"../acid/src/main/ts/ephox/acid/api/colour/HexColour.ts": 
/*!**************************************************************!*\
  !*** ../acid/src/main/ts/ephox/acid/api/colour/HexColour.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  extractValues: () => (extractValues),
  fromRgba: () => (fromRgba),
  fromString: () => (fromString),
  hexColour: () => (hexColour),
  isHexString: () => (isHexString)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const hexColour = (value)=>({
        value: normalizeHex(value)
    });
const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
const longformRegex = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;
const isHexString = (hex)=>shorthandRegex.test(hex) || longformRegex.test(hex);
const normalizeHex = (hex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.removeLeading(hex, '#').toUpperCase();
const fromString = (hex)=>isHexString(hex) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
        value: normalizeHex(hex)
    }) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
// Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
const getLongForm = (hex)=>{
    const hexString = hex.value.replace(shorthandRegex, (m, r, g, b)=>r + r + g + g + b + b);
    return {
        value: hexString
    };
};
const extractValues = (hex)=>{
    const longForm = getLongForm(hex);
    const splitForm = longformRegex.exec(longForm.value);
    return splitForm === null ? [
        'FFFFFF',
        'FF',
        'FF',
        'FF'
    ] : splitForm;
};
const toHex = (component)=>{
    const hex = component.toString(16);
    return (hex.length === 1 ? '0' + hex : hex).toUpperCase();
};
const fromRgba = (rgbaColour)=>{
    const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);
    return hexColour(value);
};



}),
"../acid/src/main/ts/ephox/acid/api/colour/HsvColour.ts": 
/*!**************************************************************!*\
  !*** ../acid/src/main/ts/ephox/acid/api/colour/HsvColour.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromRgb: () => (fromRgb),
  hsvColour: () => (hsvColour)
});
const hsvColour = (hue, saturation, value)=>({
        hue,
        saturation,
        value
    });
const fromRgb = (rgbaColour)=>{
    let h = 0;
    let s = 0;
    let v = 0;
    const r = rgbaColour.red / 255;
    const g = rgbaColour.green / 255;
    const b = rgbaColour.blue / 255;
    const minRGB = Math.min(r, Math.min(g, b));
    const maxRGB = Math.max(r, Math.max(g, b));
    if (minRGB === maxRGB) {
        v = minRGB;
        return hsvColour(0, 0, v * 100);
    }
    /* eslint no-nested-ternary:0 */ const d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;
    h = r === minRGB ? 3 : b === minRGB ? 1 : 5;
    h = 60 * (h - d / (maxRGB - minRGB));
    s = (maxRGB - minRGB) / maxRGB;
    v = maxRGB;
    return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));
};



}),
"../acid/src/main/ts/ephox/acid/api/colour/RgbaColour.ts": 
/*!***************************************************************!*\
  !*** ../acid/src/main/ts/ephox/acid/api/colour/RgbaColour.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromHex: () => (fromHex),
  fromHsv: () => (fromHsv),
  fromString: () => (fromString),
  getColorFormat: () => (getColorFormat),
  isRgbaComponent: () => (isRgbaComponent),
  red: () => (red),
  rgbaColour: () => (rgbaColour),
  toString: () => (toString)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _HexColour__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HexColour */ "../acid/src/main/ts/ephox/acid/api/colour/HexColour.ts");


const min = Math.min;
const max = Math.max;
const round = Math.round;
const rgbRegex = /^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i;
// This regex will match rgba(0, 0, 0, 0.5) or rgba(0, 0, 0, 50%) , or without commas
const rgbaRegex = /^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i;
const rgbaColour = (red, green, blue, alpha)=>({
        red,
        green,
        blue,
        alpha
    });
const isRgbaComponent = (value)=>{
    const num = parseInt(value, 10);
    return num.toString() === value && num >= 0 && num <= 255;
};
const fromHsv = (hsv)=>{
    let r;
    let g;
    let b;
    const hue = (hsv.hue || 0) % 360;
    let saturation = hsv.saturation / 100;
    let brightness = hsv.value / 100;
    saturation = max(0, min(saturation, 1));
    brightness = max(0, min(brightness, 1));
    if (saturation === 0) {
        r = g = b = round(255 * brightness);
        return rgbaColour(r, g, b, 1);
    }
    const side = hue / 60;
    const chroma = brightness * saturation;
    const x = chroma * (1 - Math.abs(side % 2 - 1));
    const match = brightness - chroma;
    switch(Math.floor(side)){
        case 0:
            r = chroma;
            g = x;
            b = 0;
            break;
        case 1:
            r = x;
            g = chroma;
            b = 0;
            break;
        case 2:
            r = 0;
            g = chroma;
            b = x;
            break;
        case 3:
            r = 0;
            g = x;
            b = chroma;
            break;
        case 4:
            r = x;
            g = 0;
            b = chroma;
            break;
        case 5:
            r = chroma;
            g = 0;
            b = x;
            break;
        default:
            r = g = b = 0;
    }
    r = round(255 * (r + match));
    g = round(255 * (g + match));
    b = round(255 * (b + match));
    return rgbaColour(r, g, b, 1);
};
// Temporarily using: https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
const fromHex = (hexColour)=>{
    const result = _HexColour__WEBPACK_IMPORTED_MODULE_0__.extractValues(hexColour);
    const red = parseInt(result[1], 16);
    const green = parseInt(result[2], 16);
    const blue = parseInt(result[3], 16);
    return rgbaColour(red, green, blue, 1);
};
const fromStringValues = (red, green, blue, alpha)=>{
    const r = parseInt(red, 10);
    const g = parseInt(green, 10);
    const b = parseInt(blue, 10);
    const a = parseFloat(alpha);
    return rgbaColour(r, g, b, a);
};
const getColorFormat = (colorString)=>{
    if (rgbRegex.test(colorString)) {
        return 'rgb';
    } else if (rgbaRegex.test(colorString)) {
        return 'rgba';
    }
    return 'other';
};
const fromString = (rgbaString)=>{
    const rgbMatch = rgbRegex.exec(rgbaString);
    if (rgbMatch !== null) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));
    }
    const rgbaMatch = rgbaRegex.exec(rgbaString);
    if (rgbaMatch !== null) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const toString = (rgba)=>`rgba(${rgba.red},${rgba.green},${rgba.blue},${rgba.alpha})`;
const red = rgbaColour(255, 0, 0, 1);



}),
"../acid/src/main/ts/ephox/acid/api/colour/Transformations.ts": 
/*!********************************************************************!*\
  !*** ../acid/src/main/ts/ephox/acid/api/colour/Transformations.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  anyToHex: () => (anyToHex),
  hexToHsv: () => (hexToHsv),
  hsvToHex: () => (hsvToHex),
  rgbaToHexString: () => (rgbaToHexString)
});
/* ESM import */var _HexColour__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HexColour */ "../acid/src/main/ts/ephox/acid/api/colour/HexColour.ts");
/* ESM import */var _HsvColour__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./HsvColour */ "../acid/src/main/ts/ephox/acid/api/colour/HsvColour.ts");
/* ESM import */var _RgbaColour__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RgbaColour */ "../acid/src/main/ts/ephox/acid/api/colour/RgbaColour.ts");



const hexToHsv = (hex)=>_HsvColour__WEBPACK_IMPORTED_MODULE_0__.fromRgb(_RgbaColour__WEBPACK_IMPORTED_MODULE_1__.fromHex(hex));
const hsvToHex = (hsv)=>_HexColour__WEBPACK_IMPORTED_MODULE_2__.fromRgba(_RgbaColour__WEBPACK_IMPORTED_MODULE_1__.fromHsv(hsv));
const anyToHex = (color)=>_HexColour__WEBPACK_IMPORTED_MODULE_2__.fromString(color).orThunk(()=>_RgbaColour__WEBPACK_IMPORTED_MODULE_1__.fromString(color).map(_HexColour__WEBPACK_IMPORTED_MODULE_2__.fromRgba)).getOrThunk(()=>{
        // Not dealing with Hex or RGBA so use a canvas to parse the color
        const canvas = document.createElement('canvas');
        canvas.height = 1;
        canvas.width = 1;
        const canvasContext = canvas.getContext('2d');
        // all valid colors after this point
        canvasContext.clearRect(0, 0, canvas.width, canvas.height);
        // invalid colors will be shown as white - the first assignment will pass and the second may be ignored
        canvasContext.fillStyle = '#FFFFFF';
        canvasContext.fillStyle = color;
        canvasContext.fillRect(0, 0, 1, 1);
        const rgba = canvasContext.getImageData(0, 0, 1, 1).data;
        const r = rgba[0];
        const g = rgba[1];
        const b = rgba[2];
        const a = rgba[3];
        return _HexColour__WEBPACK_IMPORTED_MODULE_2__.fromRgba(_RgbaColour__WEBPACK_IMPORTED_MODULE_1__.rgbaColour(r, g, b, a));
    });
const rgbaToHexString = (color)=>_RgbaColour__WEBPACK_IMPORTED_MODULE_1__.fromString(color).map(_HexColour__WEBPACK_IMPORTED_MODULE_2__.fromRgba).map((h)=>'#' + h.value).getOr(color);



}),
"../boss/src/main/ts/ephox/boss/api/DomUniverse.ts": 
/*!*********************************************************!*\
  !*** ../boss/src/main/ts/ephox/boss/api/DomUniverse.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _common_TagBoundaries__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/TagBoundaries */ "../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts");



/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{
    const clone = (element)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(element.dom.cloneNode(false));
    };
    const document = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.documentOrOwner(element).dom;
    const isBoundary = (element)=>{
        if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
            return false;
        }
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element) === 'body') {
            return true;
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains(_common_TagBoundaries__WEBPACK_IMPORTED_MODULE_4__["default"], _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element));
    };
    const isEmptyTag = (element)=>{
        if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
            return false;
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains([
            'br',
            'img',
            'hr',
            'input'
        ], _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element));
    };
    const isNonEditable = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.get(element, 'contenteditable') === 'false';
    const comparePosition = (element, other)=>{
        return element.dom.compareDocumentPosition(other.dom);
    };
    const copyAttributesTo = (source, destination)=>{
        const as = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.clone(source);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.setAll(destination, as);
    };
    const isSpecial = (element)=>{
        const tag = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains([
            'script',
            'noscript',
            'iframe',
            'noframes',
            'noembed',
            'title',
            'style',
            'textarea',
            'xmp'
        ], tag);
    };
    const getLanguage = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.getOpt(element, 'lang') : _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.none();
    return {
        up: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            selector: _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.ancestor,
            closest: _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.closest,
            predicate: _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.ancestor,
            all: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parents
        }),
        down: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            selector: _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.descendants,
            predicate: _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.descendants
        }),
        styles: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            get: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.get,
            getRaw: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.getRaw,
            set: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.set,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.remove
        }),
        attrs: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            get: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.get,
            set: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.set,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove,
            copyTo: copyAttributesTo
        }),
        insert: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            before: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.before,
            after: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.after,
            afterAll: _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.after,
            append: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.append,
            appendAll: _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.append,
            prepend: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.prepend,
            wrap: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.wrap
        }),
        remove: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            unwrap: _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.unwrap,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.remove
        }),
        create: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            nu: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag,
            clone,
            text: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromText
        }),
        query: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            comparePosition,
            prevSibling: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.prevSibling,
            nextSibling: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.nextSibling
        }),
        property: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            children: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.children,
            name: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name,
            parent: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parent,
            document,
            isText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isText,
            isComment: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isComment,
            isElement: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement,
            isSpecial,
            getLanguage,
            getText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.get,
            setText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.set,
            isBoundary,
            isEmptyTag,
            isNonEditable
        }),
        eq: _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.eq,
        is: _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.is
    };
});


}),
"../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts": 
/*!**************************************************************!*\
  !*** ../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([
    'body',
    'p',
    'div',
    'article',
    'aside',
    'figcaption',
    'figure',
    'footer',
    'header',
    'nav',
    'section',
    'ol',
    'ul',
    'li',
    'table',
    'thead',
    'tbody',
    'tfoot',
    'caption',
    'tr',
    'td',
    'th',
    'h1',
    'h2',
    'h3',
    'h4',
    'h5',
    'h6',
    'blockquote',
    'pre',
    'address'
]);


}),
"../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts": 
/*!****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  retrieve: () => (retrieve),
  retrieveBox: () => (retrieveBox)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../selection/CellSelection */ "../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts");




// Explicitly calling CellSelection.retrieve so that we can see the API signature.
const retrieve = (container, selector)=>{
    return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__.retrieve(container, selector);
};
const retrieveBox = (container, firstSelectedSelector, lastSelectedSelector)=>{
    return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind((edges)=>{
        const isRoot = (ancestor)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(container, ancestor);
        };
        const sectionSelector = 'thead,tfoot,tbody,table';
        const firstAncestor = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.ancestor(edges.first, sectionSelector, isRoot);
        const lastAncestor = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.ancestor(edges.last, sectionSelector, isRoot);
        return firstAncestor.bind((fA)=>{
            return lastAncestor.bind((lA)=>{
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(fA, lA) ? _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.getBox(edges.table, edges.first, edges.last) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            });
        });
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  mergable: () => (mergable),
  selection: () => (selection),
  unmergable: () => (unmergable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/TableSelection */ "../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts");



const selection = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity;
const unmergable = (selectedCells)=>{
    const hasSpan = (elem, type)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getOpt(elem, type).exists((span)=>parseInt(span, 10) > 1);
    const hasRowOrColSpan = (elem)=>hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');
    return selectedCells.length > 0 && _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(selectedCells, hasRowOrColSpan) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(selectedCells) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
};
const mergable = (table, selectedCells, ephemera)=>{
    if (selectedCells.length <= 1) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    } else {
        return _api_TableSelection__WEBPACK_IMPORTED_MODULE_4__.retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map((bounds)=>({
                bounds,
                cells: selectedCells
            }));
    }
};



}),
"../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getEdges: () => (getEdges),
  identify: () => (identify),
  retrieve: () => (retrieve),
  shiftSelection: () => (shiftSelection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");




const lookupTable = (container)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.ancestor(container, 'table');
};
const identify = (start, finish, isRoot)=>{
    const getIsRoot = (rootTable)=>{
        return (element)=>{
            return isRoot !== undefined && isRoot(element) || _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, rootTable);
        };
    };
    // Optimisation: If the cells are equal, it's a single cell array
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(start, finish)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
            boxes: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some([
                start
            ]),
            start,
            finish
        });
    } else {
        return lookupTable(start).bind((startTable)=>{
            return lookupTable(finish).bind((finishTable)=>{
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(startTable, finishTable)) {
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.intercepts(startTable, start, finish),
                        start,
                        finish
                    });
                } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(startTable, finishTable)) {
                    const ancestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(finish, 'td,th', getIsRoot(startTable));
                    const finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(startTable, start, startTable, finish, finishTable),
                        start,
                        finish: finishCell
                    });
                } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(finishTable, startTable)) {
                    const ancestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(start, 'td,th', getIsRoot(finishTable));
                    const startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(finishTable, start, startTable, finish, finishTable),
                        start,
                        finish: startCell
                    });
                } else {
                    return _ephox_robin__WEBPACK_IMPORTED_MODULE_5__.ancestors(start, finish).shared.bind((lca)=>{
                        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.closest(lca, 'table', isRoot).bind((lcaTable)=>{
                            const finishAncestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(finish, 'td,th', getIsRoot(lcaTable));
                            const finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;
                            const startAncestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(start, 'td,th', getIsRoot(lcaTable));
                            const startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;
                            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                                boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),
                                start: startCell,
                                finish: finishCell
                            });
                        });
                    });
                }
            });
        });
    }
};
const retrieve = (container, selector)=>{
    const sels = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.descendants(container, selector);
    return sels.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(sels) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
};
const getLast = (boxes, lastSelectedSelector)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.find(boxes, (box)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.is(box, lastSelectedSelector);
    });
};
const getEdges = (container, firstSelectedSelector, lastSelectedSelector)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(container, firstSelectedSelector).bind((first)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(container, lastSelectedSelector).bind((last)=>{
            return _ephox_robin__WEBPACK_IMPORTED_MODULE_5__.sharedOne(lookupTable, [
                first,
                last
            ]).map((table)=>{
                return {
                    first,
                    last,
                    table
                };
            });
        });
    });
};
const expandTo = (finish, firstSelectedSelector)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.ancestor(finish, 'table').bind((table)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(table, firstSelectedSelector).bind((start)=>{
            return identify(start, finish).bind((identified)=>{
                return identified.boxes.map((boxes)=>{
                    return {
                        boxes,
                        start: identified.start,
                        finish: identified.finish
                    };
                });
            });
        });
    });
};
const shiftSelection = (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector)=>{
    return getLast(boxes, lastSelectedSelector).bind((last)=>{
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.moveBy(last, deltaRow, deltaColumn).bind((finish)=>{
            return expandTo(finish, firstSelectedSelector);
        });
    });
};



}),
"../katamari/src/main/ts/ephox/katamari/api/Adt.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Adt.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Adt: () => (Adt)
});
/* ESM import */var _Arr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Obj__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Obj */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");



/*
 * Generates a church encoded ADT (https://en.wikipedia.org/wiki/Church_encoding)
 * For syntax and use, look at the test code.
 */ const generate = (cases)=>{
    // validation
    if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isArray(cases)) {
        throw new Error('cases must be an array');
    }
    if (cases.length === 0) {
        throw new Error('there must be at least one case');
    }
    const constructors = [];
    // adt is mutated to add the individual cases
    const adt = {};
    _Arr__WEBPACK_IMPORTED_MODULE_1__.each(cases, (acase, count)=>{
        const keys = _Obj__WEBPACK_IMPORTED_MODULE_2__.keys(acase);
        // validation
        if (keys.length !== 1) {
            throw new Error('one and only one name per case');
        }
        const key = keys[0];
        const value = acase[key];
        // validation
        if (adt[key] !== undefined) {
            throw new Error('duplicate key detected:' + key);
        } else if (key === 'cata') {
            throw new Error('cannot have a case named cata (sorry)');
        } else if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isArray(value)) {
            // this implicitly checks if acase is an object
            throw new Error('case arguments must be an array');
        }
        constructors.push(key);
        //
        // constructor for key
        //
        adt[key] = (...args)=>{
            const argLength = args.length;
            // validation
            if (argLength !== value.length) {
                throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);
            }
            const match = (branches)=>{
                const branchKeys = _Obj__WEBPACK_IMPORTED_MODULE_2__.keys(branches);
                if (constructors.length !== branchKeys.length) {
                    throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\nActual: ' + branchKeys.join(','));
                }
                const allReqd = _Arr__WEBPACK_IMPORTED_MODULE_1__.forall(constructors, (reqKey)=>{
                    return _Arr__WEBPACK_IMPORTED_MODULE_1__.contains(branchKeys, reqKey);
                });
                if (!allReqd) {
                    throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\nRequired: ' + constructors.join(', '));
                }
                return branches[key].apply(null, args);
            };
            //
            // the fold function for key
            //
            return {
                fold: (...foldArgs)=>{
                    // runtime validation
                    if (foldArgs.length !== cases.length) {
                        throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);
                    }
                    const target = foldArgs[count];
                    return target.apply(null, args);
                },
                match,
                // NOTE: Only for debugging.
                log: (label)=>{
                    // eslint-disable-next-line no-console
                    console.log(label, {
                        constructors,
                        constructor: key,
                        params: args
                    });
                }
            };
        };
    });
    return adt;
};
const Adt = {
    generate
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Arr.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Arr.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bind: () => (bind),
  chunk: () => (chunk),
  contains: () => (contains),
  difference: () => (difference),
  each: () => (each),
  eachr: () => (eachr),
  equal: () => (equal),
  exists: () => (exists),
  filter: () => (filter),
  find: () => (find),
  findIndex: () => (findIndex),
  findLastIndex: () => (findLastIndex),
  findMap: () => (findMap),
  findUntil: () => (findUntil),
  flatten: () => (flatten),
  foldl: () => (foldl),
  foldr: () => (foldr),
  forall: () => (forall),
  from: () => (from),
  get: () => (get),
  groupBy: () => (groupBy),
  head: () => (head),
  indexOf: () => (indexOf),
  last: () => (last),
  map: () => (map),
  mapToObject: () => (mapToObject),
  partition: () => (partition),
  pure: () => (pure),
  range: () => (range),
  reverse: () => (reverse),
  sort: () => (sort),
  unique: () => (unique)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");




const nativeSlice = Array.prototype.slice;
const nativeIndexOf = Array.prototype.indexOf;
const nativePush = Array.prototype.push;
const rawIndexOf = (ts, t)=>nativeIndexOf.call(ts, t);
const indexOf = (xs, x)=>{
    // The rawIndexOf method does not wrap up in an option. This is for performance reasons.
    const r = rawIndexOf(xs, x);
    return r === -1 ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(r);
};
const contains = (xs, x)=>rawIndexOf(xs, x) > -1;
const exists = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return true;
        }
    }
    return false;
};
const range = (num, f)=>{
    const r = [];
    for(let i = 0; i < num; i++){
        r.push(f(i));
    }
    return r;
};
// It's a total micro optimisation, but these do make some difference.
// Particularly for browsers other than Chrome.
// - length caching
// http://jsperf.com/browser-diet-jquery-each-vs-for-loop/69
// - not using push
// http://jsperf.com/array-direct-assignment-vs-push/2
const chunk = (array, size)=>{
    const r = [];
    for(let i = 0; i < array.length; i += size){
        const s = nativeSlice.call(array, i, i + size);
        r.push(s);
    }
    return r;
};
const map = (xs, f)=>{
    // pre-allocating array size when it's guaranteed to be known
    // http://jsperf.com/push-allocated-vs-dynamic/22
    const len = xs.length;
    const r = new Array(len);
    for(let i = 0; i < len; i++){
        const x = xs[i];
        r[i] = f(x, i);
    }
    return r;
};
// Unwound implementing other functions in terms of each.
// The code size is roughly the same, and it should allow for better optimisation.
// const each = function<T, U>(xs: T[], f: (x: T, i?: number, xs?: T[]) => void): void {
const each = (xs, f)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        f(x, i);
    }
};
const eachr = (xs, f)=>{
    for(let i = xs.length - 1; i >= 0; i--){
        const x = xs[i];
        f(x, i);
    }
};
const partition = (xs, pred)=>{
    const pass = [];
    const fail = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        const arr = pred(x, i) ? pass : fail;
        arr.push(x);
    }
    return {
        pass,
        fail
    };
};
const filter = (xs, pred)=>{
    const r = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            r.push(x);
        }
    }
    return r;
};
/*
 * Groups an array into contiguous arrays of like elements. Whether an element is like or not depends on f.
 *
 * f is a function that derives a value from an element - e.g. true or false, or a string.
 * Elements are like if this function generates the same value for them (according to ===).
 *
 *
 * Order of the elements is preserved. Arr.flatten() on the result will return the original list, as with Haskell groupBy function.
 *  For a good explanation, see the group function (which is a special case of groupBy)
 *  http://hackage.haskell.org/package/base-4.7.0.0/docs/Data-List.html#v:group
 */ const groupBy = (xs, f)=>{
    if (xs.length === 0) {
        return [];
    } else {
        let wasType = f(xs[0]); // initial case for matching
        const r = [];
        let group = [];
        for(let i = 0, len = xs.length; i < len; i++){
            const x = xs[i];
            const type = f(x);
            if (type !== wasType) {
                r.push(group);
                group = [];
            }
            wasType = type;
            group.push(x);
        }
        if (group.length !== 0) {
            r.push(group);
        }
        return r;
    }
};
const foldr = (xs, f, acc)=>{
    eachr(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const foldl = (xs, f, acc)=>{
    each(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const findUntil = (xs, pred, until)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(x);
        } else if (until(x, i)) {
            break;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const find = (xs, pred)=>{
    return findUntil(xs, pred, _Fun__WEBPACK_IMPORTED_MODULE_1__.never);
};
const findIndex = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const findLastIndex = (arr, pred)=>{
    for(let i = arr.length - 1; i >= 0; i--){
        if (pred(arr[i], i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const flatten = (xs)=>{
    // Note, this is possible because push supports multiple arguments:
    // http://jsperf.com/concat-push/6
    // Note that in the past, concat() would silently work (very slowly) for array-like objects.
    // With this change it will throw an error.
    const r = [];
    for(let i = 0, len = xs.length; i < len; ++i){
        // Ensure that each value is an array itself
        if (!_Type__WEBPACK_IMPORTED_MODULE_2__.isArray(xs[i])) {
            throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);
        }
        nativePush.apply(r, xs[i]);
    }
    return r;
};
const bind = (xs, f)=>flatten(map(xs, f));
const forall = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; ++i){
        const x = xs[i];
        if (pred(x, i) !== true) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqArray(eq).eq(a1, a2);
const reverse = (xs)=>{
    const r = nativeSlice.call(xs, 0);
    r.reverse();
    return r;
};
const difference = (a1, a2)=>filter(a1, (x)=>!contains(a2, x));
const mapToObject = (xs, f)=>{
    const r = {};
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        r[String(x)] = f(x, i);
    }
    return r;
};
const pure = (x)=>[
        x
    ];
const sort = (xs, comparator)=>{
    const copy = nativeSlice.call(xs, 0);
    copy.sort(comparator);
    return copy;
};
const get = (xs, i)=>i >= 0 && i < xs.length ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(xs[i]) : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
const head = (xs)=>get(xs, 0);
const last = (xs)=>get(xs, xs.length - 1);
const from = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(Array.from) ? Array.from : (x)=>nativeSlice.call(x);
const findMap = (arr, f)=>{
    for(let i = 0; i < arr.length; i++){
        const r = f(arr[i], i);
        if (r.isSome()) {
            return r;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const unique = (xs, comparator)=>{
    const r = [];
    const isDuplicated = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(comparator) ? (x)=>exists(r, (i)=>comparator(i, x)) : (x)=>contains(r, x);
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (!isDuplicated(x)) {
            r.push(x);
        }
    }
    return r;
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Cell.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Cell.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Cell: () => (Cell)
});
const Cell = (initial)=>{
    let value = initial;
    const get = ()=>{
        return value;
    };
    const set = (v)=>{
        value = v;
    };
    return {
        get,
        set
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Fun.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Fun.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  always: () => (always),
  apply: () => (apply),
  call: () => (call),
  compose: () => (compose),
  compose1: () => (compose1),
  constant: () => (constant),
  curry: () => (curry),
  die: () => (die),
  identity: () => (identity),
  never: () => (never),
  noarg: () => (noarg),
  noop: () => (noop),
  not: () => (not),
  pipe: () => (pipe),
  tripleEquals: () => (tripleEquals),
  weaken: () => (weaken)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

const noop = ()=>{};
const noarg = (f)=>()=>f();
/** Compose a unary function with an n-ary function */ const compose = (fa, fb)=>{
    return (...args)=>{
        return fa(fb.apply(null, args));
    };
};
/** Compose two unary functions. Similar to compose, but avoids using Function.prototype.apply. */ const compose1 = (fbc, fab)=>(a)=>fbc(fab(a));
const constant = (value)=>{
    return ()=>{
        return value;
    };
};
const identity = (x)=>{
    return x;
};
const tripleEquals = (a, b)=>{
    return a === b;
};
function curry(fn, ...initialArgs) {
    return (...restArgs)=>{
        const all = initialArgs.concat(restArgs);
        return fn.apply(null, all);
    };
}
const not = (f)=>(t)=>!f(t);
const die = (msg)=>{
    return ()=>{
        throw new Error(msg);
    };
};
const apply = (f)=>{
    return f();
};
const call = (f)=>{
    f();
};
const never = constant(false);
const always = constant(true);
/* Used to weaken types */ const weaken = (b)=>b;
const pipe = (a, ab, bc, cd, de, ef, fg, gh)=>{
    const b = ab(a);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(bc)) {
        return b;
    }
    const c = bc(b);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(cd)) {
        return c;
    }
    const d = cd(c);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(de)) {
        return d;
    }
    const e = de(d);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(ef)) {
        return e;
    }
    const f = ef(e);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(fg)) {
        return f;
    }
    const g = fg(f);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(gh)) {
        return g;
    }
    return gh(g);
};



}),
"../katamari/src/main/ts/ephox/katamari/api/Global.ts": 
/*!************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Global.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Global: () => (Global)
});
// Use window object as the global if it's available since CSP will block script evals
// eslint-disable-next-line @typescript-eslint/no-implied-eval
const Global = typeof window !== 'undefined' ? window : Function('return this;')();


}),
"../katamari/src/main/ts/ephox/katamari/api/Obj.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Obj.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bifilter: () => (bifilter),
  each: () => (each),
  equal: () => (equal),
  filter: () => (filter),
  find: () => (find),
  get: () => (get),
  has: () => (has),
  hasNonNullableKey: () => (hasNonNullableKey),
  hasOwnProperty: () => (hasOwnProperty),
  isEmpty: () => (isEmpty),
  keys: () => (keys),
  map: () => (map),
  mapToArray: () => (mapToArray),
  size: () => (size),
  tupleMap: () => (tupleMap),
  values: () => (values)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



// There are many variations of Object iteration that are faster than the 'for-in' style:
// http://jsperf.com/object-keys-iteration/107
//
// Use the native keys if it is available (IE9+), otherwise fall back to manually filtering
const keys = Object.keys;
const hasOwnProperty = Object.hasOwnProperty;
const each = (obj, f)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        f(x, i);
    }
};
const map = (obj, f)=>{
    return tupleMap(obj, (x, i)=>({
            k: i,
            v: f(x, i)
        }));
};
const tupleMap = (obj, f)=>{
    const r = {};
    each(obj, (x, i)=>{
        const tuple = f(x, i);
        r[tuple.k] = tuple.v;
    });
    return r;
};
const objAcc = (r)=>(x, i)=>{
        r[i] = x;
    };
const internalFilter = (obj, pred, onTrue, onFalse)=>{
    each(obj, (x, i)=>{
        (pred(x, i) ? onTrue : onFalse)(x, i);
    });
};
const bifilter = (obj, pred)=>{
    const t = {};
    const f = {};
    internalFilter(obj, pred, objAcc(t), objAcc(f));
    return {
        t,
        f
    };
};
const filter = (obj, pred)=>{
    const t = {};
    internalFilter(obj, pred, objAcc(t), _Fun__WEBPACK_IMPORTED_MODULE_0__.noop);
    return t;
};
const mapToArray = (obj, f)=>{
    const r = [];
    each(obj, (value, name)=>{
        r.push(f(value, name));
    });
    return r;
};
const find = (obj, pred)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        if (pred(x, i, obj)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(x);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const values = (obj)=>{
    return mapToArray(obj, _Fun__WEBPACK_IMPORTED_MODULE_0__.identity);
};
const size = (obj)=>{
    return keys(obj).length;
};
const get = (obj, key)=>{
    return has(obj, key) ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.from(obj[key]) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const has = (obj, key)=>hasOwnProperty.call(obj, key);
const hasNonNullableKey = (obj, key)=>has(obj, key) && obj[key] !== undefined && obj[key] !== null;
const isEmpty = (r)=>{
    for(const x in r){
        if (hasOwnProperty.call(r, x)) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqRecord(eq).eq(a1, a2);


}),
"../katamari/src/main/ts/ephox/katamari/api/Optional.ts": 
/*!**************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Optional.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Optional: () => (Optional)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

/**
 * The `Optional` type represents a value (of any type) that potentially does
 * not exist. Any `Optional<T>` can either be a `Some<T>` (in which case the
 * value does exist) or a `None` (in which case the value does not exist). This
 * module defines a whole lot of FP-inspired utility functions for dealing with
 * `Optional` objects.
 *
 * Comparison with null or undefined:
 * - We don't get fancy null coalescing operators with `Optional`
 * - We do get fancy helper functions with `Optional`
 * - `Optional` support nesting, and allow for the type to still be nullable (or
 * another `Optional`)
 * - There is no option to turn off strict-optional-checks like there is for
 * strict-null-checks
 */ class Optional {
    tag;
    value;
    // Sneaky optimisation: every instance of Optional.none is identical, so just
    // reuse the same object
    static singletonNone = new Optional(false);
    // The internal representation has a `tag` and a `value`, but both are
    // private: able to be console.logged, but not able to be accessed by code
    constructor(tag, value){
        this.tag = tag;
        this.value = value;
    }
    // --- Identities ---
    /**
   * Creates a new `Optional<T>` that **does** contain a value.
   */ static some(value) {
        return new Optional(true, value);
    }
    /**
   * Create a new `Optional<T>` that **does not** contain a value. `T` can be
   * any type because we don't actually have a `T`.
   */ static none() {
        return Optional.singletonNone;
    }
    /**
   * Perform a transform on an `Optional` type. Regardless of whether this
   * `Optional` contains a value or not, `fold` will return a value of type `U`.
   * If this `Optional` does not contain a value, the `U` will be created by
   * calling `onNone`. If this `Optional` does contain a value, the `U` will be
   * created by calling `onSome`.
   *
   * For the FP enthusiasts in the room, this function:
   * 1. Could be used to implement all of the functions below
   * 2. Forms a catamorphism
   */ fold(onNone, onSome) {
        if (this.tag) {
            return onSome(this.value);
        } else {
            return onNone();
        }
    }
    /**
   * Determine if this `Optional` object contains a value.
   */ isSome() {
        return this.tag;
    }
    /**
   * Determine if this `Optional` object **does not** contain a value.
   */ isNone() {
        return !this.tag;
    }
    // --- Functor (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value. If
   * you provide a function to turn a T into a U, this is the function you use
   * to turn an `Optional<T>` into an `Optional<U>`. If this **does** contain
   * a value then the output will also contain a value (that value being the
   * output of `mapper(this.value)`), and if this **does not** contain a value
   * then neither will the output.
   */ map(mapper) {
        if (this.tag) {
            return Optional.some(mapper(this.value));
        } else {
            return Optional.none();
        }
    }
    // --- Monad (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value.
   * Unlike `map`, here the transform itself also returns an `Optional`.
   */ bind(binder) {
        if (this.tag) {
            return binder(this.value);
        } else {
            return Optional.none();
        }
    }
    // --- Traversable (name stolen from Haskell / maths) ---
    /**
   * For a given predicate, this function finds out if there **exists** a value
   * inside this `Optional` object that meets the predicate. In practice, this
   * means that for `Optional`s that do not contain a value it returns false (as
   * no predicate-meeting value exists).
   */ exists(predicate) {
        return this.tag && predicate(this.value);
    }
    /**
   * For a given predicate, this function finds out if **all** the values inside
   * this `Optional` object meet the predicate. In practice, this means that
   * for `Optional`s that do not contain a value it returns true (as all 0
   * objects do meet the predicate).
   */ forall(predicate) {
        return !this.tag || predicate(this.value);
    }
    filter(predicate) {
        if (!this.tag || predicate(this.value)) {
            return this;
        } else {
            return Optional.none();
        }
    }
    // --- Getters ---
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.
   */ getOr(replacement) {
        return this.tag ? this.value : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.  Unlike `getOr`, in this method the `replacement` object is also
   * `Optional` - meaning that this method will always return an `Optional`.
   */ or(replacement) {
        return this.tag ? this : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value. Unlike `getOr`, in this method the `replacement` value is
   * "thunked" - that is to say that you don't pass a value to `getOrThunk`, you
   * pass a function which (if called) will **return** the `value` you want to
   * use.
   */ getOrThunk(thunk) {
        return this.tag ? this.value : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided Optional object does not contain a
   * value.
   *
   * Unlike `or`, in this method the `replacement` value is "thunked" - that is
   * to say that you don't pass a value to `orThunk`, you pass a function which
   * (if called) will **return** the `value` you want to use.
   *
   * Unlike `getOrThunk`, in this method the `replacement` value is also
   * `Optional`, meaning that this method will always return an `Optional`.
   */ orThunk(thunk) {
        return this.tag ? this : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, throwing an
   * exception if the provided `Optional` object does not contain a value.
   *
   * WARNING:
   * You should only be using this function if you know that the `Optional`
   * object **is not** empty (otherwise you're throwing exceptions in production
   * code, which is bad).
   *
   * In tests this is more acceptable.
   *
   * Prefer other methods to this, such as `.each`.
   */ getOrDie(message) {
        if (!this.tag) {
            throw new Error(message ?? 'Called getOrDie on None');
        } else {
            return this.value;
        }
    }
    // --- Interop with null and undefined ---
    /**
   * Creates an `Optional` value from a nullable (or undefined-able) input.
   * Null, or undefined, is converted to `None`, and anything else is converted
   * to `Some`.
   */ static from(value) {
        return _Type__WEBPACK_IMPORTED_MODULE_0__.isNonNullable(value) ? Optional.some(value) : Optional.none();
    }
    /**
   * Converts an `Optional` to a nullable type, by getting the value if it
   * exists, or returning `null` if it does not.
   */ getOrNull() {
        return this.tag ? this.value : null;
    }
    /**
   * Converts an `Optional` to an undefined-able type, by getting the value if
   * it exists, or returning `undefined` if it does not.
   */ getOrUndefined() {
        return this.value;
    }
    // --- Utilities ---
    /**
   * If the `Optional` contains a value, perform an action on that value.
   * Unlike the rest of the methods on this type, `.each` has side-effects. If
   * you want to transform an `Optional<T>` **into** something, then this is not
   * the method for you. If you want to use an `Optional<T>` to **do**
   * something, then this is the method for you - provided you're okay with not
   * doing anything in the case where the `Optional` doesn't have a value inside
   * it. If you're not sure whether your use-case fits into transforming
   * **into** something or **doing** something, check whether it has a return
   * value. If it does, you should be performing a transform.
   */ each(worker) {
        if (this.tag) {
            worker(this.value);
        }
    }
    /**
   * Turn the `Optional` object into an array that contains all of the values
   * stored inside the `Optional`. In practice, this means the output will have
   * either 0 or 1 elements.
   */ toArray() {
        return this.tag ? [
            this.value
        ] : [];
    }
    /**
   * Turn the `Optional` object into a string for debugging or printing. Not
   * recommended for production code, but good for debugging. Also note that
   * these days an `Optional` object can be logged to the console directly, and
   * its inner value (if it exists) will be visible.
   */ toString() {
        return this.tag ? `some(${this.value})` : 'none()';
    }
}


}),
"../katamari/src/main/ts/ephox/katamari/api/Optionals.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Optionals.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bindFrom: () => (bindFrom),
  cat: () => (cat),
  equals: () => (equals),
  findMap: () => (findMap),
  flatten: () => (flatten),
  is: () => (is),
  lift2: () => (lift2),
  lift3: () => (lift3),
  lift4: () => (lift4),
  lift5: () => (lift5),
  mapFrom: () => (mapFrom),
  sequence: () => (sequence),
  someIf: () => (someIf),
  traverse: () => (traverse)
});
/* ESM import */var _Arr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



/**
 * **Is** the value stored inside this Optional object equal to `rhs`?
 */ const is = (lhs, rhs, comparator = _Fun__WEBPACK_IMPORTED_MODULE_0__.tripleEquals)=>lhs.exists((left)=>comparator(left, rhs));
/**
 * Are these two Optional objects equal? Equality here means either they're both
 * `Some` (and the values are equal under the comparator) or they're both `None`.
 */ const equals = (lhs, rhs, comparator = _Fun__WEBPACK_IMPORTED_MODULE_0__.tripleEquals)=>lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());
const cat = (arr)=>{
    const r = [];
    const push = (x)=>{
        r.push(x);
    };
    for(let i = 0; i < arr.length; i++){
        arr[i].each(push);
    }
    return r;
};
const sequence = (arr)=>{
    const r = [];
    for(let i = 0; i < arr.length; i++){
        const x = arr[i];
        if (x.isSome()) {
            r.push(x.getOrDie());
        } else {
            return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(r);
};
/** @deprecated Use Arr.findMap instead. */ const findMap = _Arr__WEBPACK_IMPORTED_MODULE_2__.findMap;
/** Map each element of an array to an Optional and collect the results.
 *  If all results are "some", return Optional.some of the results.
 *  If any result is "none", return Optional.none
 */ const traverse = (arr, f)=>sequence(_Arr__WEBPACK_IMPORTED_MODULE_2__.map(arr, f));
/*
Notes on the lift functions:
- We used to have a generic liftN, but we were concerned about its type-safety, and the below variants were faster in microbenchmarks.
- The getOrDie calls are partial functions, but are checked beforehand. This is faster and more convenient (but less safe) than folds.
- && is used instead of a loop for simplicity and performance.
*/ const lift2 = (oa, ob, f)=>oa.isSome() && ob.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift3 = (oa, ob, oc, f)=>oa.isSome() && ob.isSome() && oc.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift4 = (oa, ob, oc, od, f)=>oa.isSome() && ob.isSome() && oc.isSome() && od.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie(), od.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift5 = (oa, ob, oc, od, oe, f)=>oa.isSome() && ob.isSome() && oc.isSome() && od.isSome() && oe.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie(), od.getOrDie(), oe.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const mapFrom = (a, f)=>a !== undefined && a !== null ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(a)) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const bindFrom = (a, f)=>a !== undefined && a !== null ? f(a) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const flatten = (oot)=>oot.bind(_Fun__WEBPACK_IMPORTED_MODULE_0__.identity);
// This can help with type inference, by specifying the type param on the none case, so the caller doesn't have to.
const someIf = (b, a)=>b ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(a) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();


}),
"../katamari/src/main/ts/ephox/katamari/api/Resolve.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Resolve.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  forge: () => (forge),
  namespace: () => (namespace),
  path: () => (path),
  resolve: () => (resolve),
  step: () => (step)
});
/* ESM import */var _Global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global */ "../katamari/src/main/ts/ephox/katamari/api/Global.ts");

/** path :: ([String], JsObj?) -> JsObj */ const path = (parts, scope)=>{
    let o = scope !== undefined && scope !== null ? scope : _Global__WEBPACK_IMPORTED_MODULE_0__.Global;
    for(let i = 0; i < parts.length && o !== undefined && o !== null; ++i){
        o = o[parts[i]];
    }
    return o;
};
/** resolve :: (String, JsObj?) -> JsObj */ const resolve = (p, scope)=>{
    const parts = p.split('.');
    return path(parts, scope);
};
/** step :: (JsObj, String) -> JsObj */ const step = (o, part)=>{
    if (o[part] === undefined || o[part] === null) {
        o[part] = {};
    }
    return o[part];
};
/** forge :: ([String], JsObj?) -> JsObj */ const forge = (parts, target)=>{
    let o = target !== undefined ? target : _Global__WEBPACK_IMPORTED_MODULE_0__.Global;
    for(let i = 0; i < parts.length; ++i){
        o = step(o, parts[i]);
    }
    return o;
};
/** namespace :: (String, JsObj?) -> JsObj */ const namespace = (name, target)=>{
    const parts = name.split('.');
    return forge(parts, target);
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Result.ts": 
/*!************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Result.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Result: () => (Result)
});
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");


/**
 * Creates a new `Result<T, E>` that **does** contain a value.
 */ const value = (value)=>{
    const applyHelper = (fn)=>fn(value);
    const constHelper = _Fun__WEBPACK_IMPORTED_MODULE_0__.constant(value);
    const outputHelper = ()=>output;
    const output = {
        // Debug info
        tag: true,
        inner: value,
        // Actual Result methods
        fold: (_onError, onValue)=>onValue(value),
        isValue: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        isError: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        map: (mapper)=>Result.value(mapper(value)),
        mapError: outputHelper,
        bind: applyHelper,
        exists: applyHelper,
        forall: applyHelper,
        getOr: constHelper,
        or: outputHelper,
        getOrThunk: constHelper,
        orThunk: outputHelper,
        getOrDie: constHelper,
        each: (fn)=>{
            // Can't write the function inline because we don't want to return something by mistake
            fn(value);
        },
        toOptional: ()=>_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(value)
    };
    return output;
};
/**
 * Creates a new `Result<T, E>` that **does not** contain a value, and therefore
 * contains an error.
 */ const error = (error)=>{
    const outputHelper = ()=>output;
    const output = {
        // Debug info
        tag: false,
        inner: error,
        // Actual Result methods
        fold: (onError, _onValue)=>onError(error),
        isValue: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        isError: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        map: outputHelper,
        mapError: (mapper)=>Result.error(mapper(error)),
        bind: outputHelper,
        exists: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        forall: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        getOr: _Fun__WEBPACK_IMPORTED_MODULE_0__.identity,
        or: _Fun__WEBPACK_IMPORTED_MODULE_0__.identity,
        getOrThunk: _Fun__WEBPACK_IMPORTED_MODULE_0__.apply,
        orThunk: _Fun__WEBPACK_IMPORTED_MODULE_0__.apply,
        getOrDie: _Fun__WEBPACK_IMPORTED_MODULE_0__.die(String(error)),
        each: _Fun__WEBPACK_IMPORTED_MODULE_0__.noop,
        toOptional: _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none
    };
    return output;
};
/**
 * Creates a new `Result<T, E>` from an `Optional<T>` and an `E`. If the
 * `Optional` contains a value, so will the outputted `Result`. If it does not,
 * the outputted `Result` will contain an error (and that error will be the
 * error passed in).
 */ const fromOption = (optional, err)=>optional.fold(()=>error(err), value);
const Result = {
    value,
    error,
    fromOption
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Singleton.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Singleton.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  api: () => (api),
  destroyable: () => (destroyable),
  repeatable: () => (repeatable),
  unbindable: () => (unbindable),
  value: () => (value)
});
/* ESM import */var _Cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Cell */ "../katamari/src/main/ts/ephox/katamari/api/Cell.ts");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



const singleton = (doRevoke)=>{
    const subject = (0,_Cell__WEBPACK_IMPORTED_MODULE_0__.Cell)(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    const revoke = ()=>subject.get().each(doRevoke);
    const clear = ()=>{
        revoke();
        subject.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    };
    const isSet = ()=>subject.get().isSome();
    const get = ()=>subject.get();
    const set = (s)=>{
        revoke();
        subject.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(s));
    };
    return {
        clear,
        isSet,
        get,
        set
    };
};
const repeatable = (delay)=>{
    const intervalId = (0,_Cell__WEBPACK_IMPORTED_MODULE_0__.Cell)(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    const revoke = ()=>intervalId.get().each((id)=>clearInterval(id));
    const clear = ()=>{
        revoke();
        intervalId.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    };
    const isSet = ()=>intervalId.get().isSome();
    const get = ()=>intervalId.get();
    const set = (functionToRepeat)=>{
        revoke();
        intervalId.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(setInterval(functionToRepeat, delay)));
    };
    return {
        clear,
        isSet,
        get,
        set
    };
};
const destroyable = ()=>singleton((s)=>s.destroy());
const unbindable = ()=>singleton((s)=>s.unbind());
const api = ()=>{
    const subject = destroyable();
    const run = (f)=>subject.get().each(f);
    return {
        ...subject,
        run
    };
};
const value = ()=>{
    const subject = singleton(_Fun__WEBPACK_IMPORTED_MODULE_2__.noop);
    const on = (f)=>subject.get().each(f);
    return {
        ...subject,
        on
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Strings.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Strings.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  capitalize: () => (capitalize),
  contains: () => (contains),
  endsWith: () => (endsWith),
  ensureLeading: () => (ensureLeading),
  ensureTrailing: () => (ensureTrailing),
  fromCodePoint: () => (fromCodePoint),
  isEmpty: () => (isEmpty),
  isNotEmpty: () => (isNotEmpty),
  lTrim: () => (lTrim),
  rTrim: () => (rTrim),
  removeLeading: () => (removeLeading),
  removeTrailing: () => (removeTrailing),
  repeat: () => (repeat),
  startsWith: () => (startsWith),
  supplant: () => (supplant),
  toFloat: () => (toFloat),
  toInt: () => (toInt),
  trim: () => (trim)
});
/* ESM import */var _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../str/StrAppend */ "../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");



const checkRange = (str, substr, start)=>substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;
/** Given a string and object, perform template-replacements on the string, as specified by the object.
 * Any template fields of the form ${name} are replaced by the string or number specified as obj["name"]
 * Based on Douglas Crockford's 'supplant' method for template-replace of strings. Uses different template format.
 */ const supplant = (str, obj)=>{
    const isStringOrNumber = (a)=>{
        const t = typeof a;
        return t === 'string' || t === 'number';
    };
    return str.replace(/\$\{([^{}]*)\}/g, (fullMatch, key)=>{
        const value = obj[key];
        return isStringOrNumber(value) ? value.toString() : fullMatch;
    });
};
const removeLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromStart(str, prefix.length) : str;
};
const removeTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromEnd(str, suffix.length) : str;
};
const ensureLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToStart(str, prefix);
};
const ensureTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToEnd(str, suffix);
};
const contains = (str, substr, start = 0, end)=>{
    const idx = str.indexOf(substr, start);
    if (idx !== -1) {
        return _Type__WEBPACK_IMPORTED_MODULE_1__.isUndefined(end) ? true : idx + substr.length <= end;
    } else {
        return false;
    }
};
const capitalize = (str)=>{
    return str === '' ? '' : str.charAt(0).toUpperCase() + str.substring(1);
};
/** Does 'str' start with 'prefix'?
 *  Note: all strings start with the empty string.
 *        More formally, for all strings x, startsWith(x, "").
 *        This is so that for all strings x and y, startsWith(y + x, y)
 */ const startsWith = (str, prefix)=>{
    return checkRange(str, prefix, 0);
};
/** Does 'str' end with 'suffix'?
 *  Note: all strings end with the empty string.
 *        More formally, for all strings x, endsWith(x, "").
 *        This is so that for all strings x and y, endsWith(x + y, y)
 */ const endsWith = (str, suffix)=>{
    return checkRange(str, suffix, str.length - suffix.length);
};
const blank = (r)=>(s)=>s.replace(r, '');
/** removes all leading and trailing spaces */ const trim = blank(/^\s+|\s+$/g);
const lTrim = blank(/^\s+/g);
const rTrim = blank(/\s+$/g);
const isNotEmpty = (s)=>s.length > 0;
const isEmpty = (s)=>!isNotEmpty(s);
const repeat = (s, count)=>count <= 0 ? '' : new Array(count + 1).join(s);
const fromCodePoint = String.fromCodePoint;
const toInt = (value, radix = 10)=>{
    const num = parseInt(value, radix);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};
const toFloat = (value)=>{
    const num = parseFloat(value);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Thunk.ts": 
/*!***********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Thunk.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  cached: () => (cached)
});
const cached = (f)=>{
    let called = false;
    let r;
    return (...args)=>{
        if (!called) {
            called = true;
            r = f.apply(null, args);
        }
        return r;
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Type.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Type.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  is: () => (is),
  isArray: () => (isArray),
  isArrayOf: () => (isArrayOf),
  isBoolean: () => (isBoolean),
  isFunction: () => (isFunction),
  isNonNullable: () => (isNonNullable),
  isNull: () => (isNull),
  isNullable: () => (isNullable),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isPlainObject: () => (isPlainObject),
  isPromiseLike: () => (isPromiseLike),
  isString: () => (isString),
  isUndefined: () => (isUndefined)
});
/* eslint-disable @typescript-eslint/no-wrapper-object-types */ const getPrototypeOf = Object.getPrototypeOf;
const hasProto = (v, constructor, predicate)=>{
    if (predicate(v, constructor.prototype)) {
        return true;
    } else {
        // String-based fallback time
        return v.constructor?.name === constructor.name;
    }
};
const typeOf = (x)=>{
    const t = typeof x;
    if (x === null) {
        return 'null';
    } else if (t === 'object' && Array.isArray(x)) {
        return 'array';
    } else if (t === 'object' && hasProto(x, String, (o, proto)=>proto.isPrototypeOf(o))) {
        return 'string';
    } else {
        return t;
    }
};
const isType = (type)=>(value)=>typeOf(value) === type;
const isSimpleType = (type)=>(value)=>typeof value === type;
const eq = (t)=>(a)=>t === a;
const is = (value, constructor)=>isObject(value) && hasProto(value, constructor, (o, proto)=>getPrototypeOf(o) === proto);
const isString = isType('string');
const isObject = isType('object');
const isPlainObject = (value)=>is(value, Object);
const isArray = isType('array');
const isNull = eq(null);
const isBoolean = isSimpleType('boolean');
const isUndefined = eq(undefined);
const isNullable = (a)=>a === null || a === undefined;
const isNonNullable = (a)=>!isNullable(a);
const isFunction = isSimpleType('function');
const isNumber = isSimpleType('number');
const isArrayOf = (value, pred)=>{
    if (isArray(value)) {
        for(let i = 0, len = value.length; i < len; ++i){
            if (!pred(value[i])) {
                return false;
            }
        }
        return true;
    }
    return false;
};
const isPromiseLike = (x)=>isObject(x) && isFunction(x.then) && isFunction(x.catch);


}),
"../katamari/src/main/ts/ephox/katamari/api/Unicode.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Unicode.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ellipsis: () => (ellipsis),
  isZwsp: () => (isZwsp),
  nbsp: () => (nbsp),
  removeZwsp: () => (removeZwsp),
  softHyphen: () => (softHyphen),
  zeroWidth: () => (zeroWidth)
});
const zeroWidth = '\uFEFF';
const nbsp = '\u00A0';
const softHyphen = '\u00AD';
const ellipsis = '\u2026';
const isZwsp = (char)=>char === zeroWidth;
const removeZwsp = (s)=>s.replace(/\uFEFF/g, '');


}),
"../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addToEnd: () => (addToEnd),
  addToStart: () => (addToStart),
  removeFromEnd: () => (removeFromEnd),
  removeFromStart: () => (removeFromStart)
});
const addToStart = (str, prefix)=>{
    return prefix + str;
};
const addToEnd = (str, suffix)=>{
    return str + suffix;
};
const removeFromStart = (str, numChars)=>{
    return str.substring(numChars);
};
const removeFromEnd = (str, numChars)=>{
    return str.substring(0, str.length - numChars);
};


}),
"../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts": 
/*!*************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight),
  sharedOne: () => (sharedOne),
  subset: () => (subset)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Parent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Parent */ "../robin/src/main/ts/ephox/robin/api/general/Parent.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const sharedOne = (look, elements)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.sharedOne(universe, (_universe, element)=>{
        return look(element);
    }, elements);
};
const subset = (start, finish)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.subset(universe, start, finish);
};
const ancestors = (start, finish, isRoot)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.ancestors(universe, start, finish, isRoot);
};
const breakToLeft = (parent, child)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakToLeft(universe, parent, child);
};
const breakToRight = (parent, child)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakToRight(universe, parent, child);
};
const breakPath = (child, isTop, breaker)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakPath(universe, child, isTop, (u, p, c)=>{
        return breaker(p, c);
    });
};



}),
"../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts": 
/*!****************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isBlock: () => (isBlock),
  isContainer: () => (isContainer),
  isEmptyTag: () => (isEmptyTag),
  isFormatting: () => (isFormatting),
  isFrame: () => (isFrame),
  isHeading: () => (isHeading),
  isInline: () => (isInline),
  isList: () => (isList)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Structure */ "../robin/src/main/ts/ephox/robin/api/general/Structure.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const isBlock = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isBlock(universe, element);
};
const isList = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isList(universe, element);
};
const isFormatting = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isFormatting(universe, element);
};
const isHeading = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isHeading(universe, element);
};
const isContainer = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isContainer(universe, element);
};
const isEmptyTag = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isEmptyTag(universe, element);
};
const isFrame = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isFrame(universe, element);
};
const isInline = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isInline(universe, element);
};



}),
"../robin/src/main/ts/ephox/robin/api/general/Parent.ts": 
/*!**************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/general/Parent.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight),
  sharedOne: () => (sharedOne),
  subset: () => (subset)
});
/* ESM import */var _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../parent/Breaker */ "../robin/src/main/ts/ephox/robin/parent/Breaker.ts");
/* ESM import */var _parent_Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../parent/Shared */ "../robin/src/main/ts/ephox/robin/parent/Shared.ts");
/* ESM import */var _parent_Subset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../parent/Subset */ "../robin/src/main/ts/ephox/robin/parent/Subset.ts");



const sharedOne = _parent_Shared__WEBPACK_IMPORTED_MODULE_0__.oneAll;
const subset = _parent_Subset__WEBPACK_IMPORTED_MODULE_1__.subset;
const ancestors = _parent_Subset__WEBPACK_IMPORTED_MODULE_1__.ancestors;
const breakToLeft = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakToLeft;
const breakToRight = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakToRight;
const breakPath = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakPath;



}),
"../robin/src/main/ts/ephox/robin/api/general/Structure.ts": 
/*!*****************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/general/Structure.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isBlock: () => (isBlock),
  isContainer: () => (isContainer),
  isEmptyTag: () => (isEmptyTag),
  isFormatting: () => (isFormatting),
  isFrame: () => (isFrame),
  isHeading: () => (isHeading),
  isInline: () => (isInline),
  isList: () => (isList)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const blockList = [
    'body',
    'p',
    'div',
    'article',
    'aside',
    'figcaption',
    'figure',
    'footer',
    'header',
    'nav',
    'section',
    'ol',
    'ul',
    // --- NOTE, TagBoundaries has li here. That means universe.isBoundary => true for li tags.
    'table',
    'thead',
    'tfoot',
    'tbody',
    'caption',
    'tr',
    'td',
    'th',
    'h1',
    'h2',
    'h3',
    'h4',
    'h5',
    'h6',
    'blockquote',
    'pre',
    'address'
];
const isList = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'ol',
        'ul'
    ], tagName);
};
const isBlock = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(blockList, tagName);
};
const isFormatting = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'address',
        'pre',
        'p',
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6'
    ], tagName);
};
const isHeading = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6'
    ], tagName);
};
const isContainer = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'div',
        'li',
        'td',
        'th',
        'blockquote',
        'body',
        'caption'
    ], universe.property().name(item));
};
const isEmptyTag = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'br',
        'img',
        'hr',
        'input'
    ], universe.property().name(item));
};
const isFrame = (universe, item)=>{
    return universe.property().name(item) === 'iframe';
};
const isInline = (universe, item)=>{
    return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';
};



}),
"../robin/src/main/ts/ephox/robin/parent/Breaker.ts": 
/*!**********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Breaker.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const leftRight = (left, right)=>({
        left,
        right
    });
const brokenPath = (first, second, splits)=>({
        first,
        second,
        splits
    });
const bisect = (universe, parent, child)=>{
    const children = universe.property().children(parent);
    const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findIndex(children, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(universe.eq, child));
    return index.map((ind)=>{
        return {
            before: children.slice(0, ind),
            after: children.slice(ind + 1)
        };
    });
};
/**
 * Clone parent to the RIGHT and move everything after child in the parent element into
 * a clone of the parent (placed after parent).
 */ const breakToRight = (universe, parent, child)=>{
    return bisect(universe, parent, child).map((parts)=>{
        const second = universe.create().clone(parent);
        universe.insert().appendAll(second, parts.after);
        universe.insert().after(parent, second);
        return leftRight(parent, second);
    });
};
/**
 * Clone parent to the LEFT and move everything before and including child into
 * the a clone of the parent (placed before parent)
 */ const breakToLeft = (universe, parent, child)=>{
    return bisect(universe, parent, child).map((parts)=>{
        const prior = universe.create().clone(parent);
        universe.insert().appendAll(prior, parts.before.concat([
            child
        ]));
        universe.insert().appendAll(parent, parts.after);
        universe.insert().before(parent, prior);
        return leftRight(prior, parent);
    });
};
/*
 * Using the breaker, break from the child up to the top element defined by the predicate.
 * It returns three values:
 *   first: the top level element that completed the break
 *   second: the optional element representing second part of the top-level split if the breaking completed successfully to the top
 *   splits: a list of (Element, Element) pairs that represent the splits that have occurred on the way to the top.
 */ const breakPath = (universe, item, isTop, breaker)=>{
    const next = (child, group, splits)=>{
        const fallback = brokenPath(child, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none(), splits);
        // Found the top, so stop.
        if (isTop(child)) {
            return brokenPath(child, group, splits);
        } else {
            // Split the child at parent, and keep going
            return universe.property().parent(child).bind((parent)=>{
                return breaker(universe, parent, child).map((breakage)=>{
                    const extra = [
                        {
                            first: breakage.left,
                            second: breakage.right
                        }
                    ];
                    // Our isTop is based on the left-side parent, so keep it regardless of split.
                    const nextChild = isTop(parent) ? parent : breakage.left;
                    return next(nextChild, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(breakage.right), splits.concat(extra));
                });
            }).getOr(fallback);
        }
    };
    return next(item, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none(), []);
};



}),
"../robin/src/main/ts/ephox/robin/parent/Shared.ts": 
/*!*********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Shared.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  oneAll: () => (oneAll)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const all = (universe, look, elements, f)=>{
    const head = elements[0];
    const tail = elements.slice(1);
    return f(universe, look, head, tail);
};
/**
 * Check if look returns the same element for all elements, and return it if it exists.
 */ const oneAll = (universe, look, elements)=>{
    return elements.length > 0 ? all(universe, look, elements, unsafeOne) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const unsafeOne = (universe, look, head, tail)=>{
    const start = look(universe, head);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.foldr(tail, (b, a)=>{
        const current = look(universe, a);
        return commonElement(universe, b, current);
    }, start);
};
const commonElement = (universe, start, end)=>{
    return start.bind((s)=>{
        return end.filter(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.curry(universe.eq, s));
    });
};



}),
"../robin/src/main/ts/ephox/robin/parent/Subset.ts": 
/*!*********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Subset.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  subset: () => (subset)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const eq = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.curry(universe.eq, item);
};
const unsafeSubset = (universe, common, ps1, ps2)=>{
    const children = universe.property().children(common);
    if (universe.eq(common, ps1[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some([
            ps1[0]
        ]);
    }
    if (universe.eq(common, ps2[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some([
            ps2[0]
        ]);
    }
    const finder = (ps)=>{
        // ps is calculated bottom-up, but logically we're searching top-down
        const topDown = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.reverse(ps);
        // find the child of common in the ps array
        const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(topDown, eq(universe, common)).getOr(-1);
        const item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];
        // find the index of that child in the common children
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(children, eq(universe, item));
    };
    const startIndex = finder(ps1);
    const endIndex = finder(ps2);
    // Return all common children between first and last
    return startIndex.bind((sIndex)=>{
        return endIndex.map((eIndex)=>{
            // This is required because the range could be backwards.
            const first = Math.min(sIndex, eIndex);
            const last = Math.max(sIndex, eIndex);
            return children.slice(first, last + 1);
        });
    });
};
// Note: this can be exported if it is required in the future.
const ancestors = (universe, start, end, isRoot = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.never)=>{
    // Inefficient if no isRoot is supplied.
    // TODO: Andy knows there is a graph-based algorithm to find a common parent, but can't remember it
    //        This also includes something to get the subset after finding the common parent
    const ps1 = [
        start
    ].concat(universe.up().all(start));
    const ps2 = [
        end
    ].concat(universe.up().all(end));
    const prune = (path)=>{
        const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(path, isRoot);
        return index.fold(()=>{
            return path;
        }, (ind)=>{
            return path.slice(0, ind + 1);
        });
    };
    const pruned1 = prune(ps1);
    const pruned2 = prune(ps2);
    const shared = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(pruned1, (x)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(pruned2, eq(universe, x));
    });
    return {
        firstpath: pruned1,
        secondpath: pruned2,
        shared
    };
};
/**
 * Find the common element in the parents of start and end.
 *
 * Then return all children of the common element such that start and end are included.
 */ const subset = (universe, start, end)=>{
    const ancs = ancestors(universe, start, end);
    return ancs.shared.bind((shared)=>{
        return unsafeSubset(universe, shared, ancs.firstpath, ancs.secondpath);
    });
};



}),
"../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts": 
/*!***************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detect: () => (detect),
  override: () => (override)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Thunk.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _core_PlatformDetection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/PlatformDetection */ "../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts");


const mediaMatch = (query)=>window.matchMedia(query).matches;
// IMPORTANT: Must be in a thunk, otherwise rollup thinks calling this immediately
// causes side effects and won't tree shake this away
// Note: navigator.userAgentData is not part of the native typescript types yet
let platform = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.cached(()=>_core_PlatformDetection__WEBPACK_IMPORTED_MODULE_1__.PlatformDetection.detect(window.navigator.userAgent, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(window.navigator.userAgentData), mediaMatch));
const detect = ()=>platform();
const override = (overrides)=>{
    platform = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant({
        ...detect(),
        ...overrides
    });
};


}),
"../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts": 
/*!*************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isPrototypeOf: () => (isPrototypeOf)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Resolve.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _util_Global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/Global */ "../sand/src/main/ts/ephox/sand/util/Global.ts");


const getPrototypeOf = Object.getPrototypeOf;
/*
 * IE9 and above
 *
 * MDN no use on this one, but here's the link anyway:
 * https://developer.mozilla.org/en/docs/Web/API/HTMLElement
 */ const sandHTMLElement = (scope)=>{
    return _util_Global__WEBPACK_IMPORTED_MODULE_0__.getOrDie('HTMLElement', scope);
};
const isPrototypeOf = (x)=>{
    // use Resolve to get the window object for x and just return undefined if it can't find it.
    // undefined scope later triggers using the global window.
    const scope = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.resolve('ownerDocument.defaultView', x);
    // TINY-7374: We can't rely on looking at the owner window HTMLElement as the element may have
    // been constructed in a different window and then appended to the current window document.
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\w*Element$/.test(getPrototypeOf(x).constructor.name));
};



}),
"../sand/src/main/ts/ephox/sand/core/Browser.ts": 
/*!******************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/Browser.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Browser: () => (Browser)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _detect_Version__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../detect/Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const edge = 'Edge';
const chromium = 'Chromium';
const ie = 'IE';
const opera = 'Opera';
const firefox = 'Firefox';
const safari = 'Safari';
const unknown = ()=>{
    return nu({
        current: undefined,
        version: _detect_Version__WEBPACK_IMPORTED_MODULE_0__.Version.unknown()
    });
};
const nu = (info)=>{
    const current = info.current;
    const version = info.version;
    const isBrowser = (name)=>()=>current === name;
    return {
        current,
        version,
        isEdge: isBrowser(edge),
        isChromium: isBrowser(chromium),
        // NOTE: isIe just looks too weird
        isIE: isBrowser(ie),
        isOpera: isBrowser(opera),
        isFirefox: isBrowser(firefox),
        isSafari: isBrowser(safari)
    };
};
const Browser = {
    unknown,
    nu,
    edge: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(edge),
    chromium: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(chromium),
    ie: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(ie),
    opera: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(opera),
    firefox: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(firefox),
    safari: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(safari)
};


}),
"../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts": 
/*!**************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  OperatingSystem: () => (OperatingSystem)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _detect_Version__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../detect/Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const windows = 'Windows';
const ios = 'iOS';
const android = 'Android';
const linux = 'Linux';
const macos = 'macOS';
const solaris = 'Solaris';
const freebsd = 'FreeBSD';
const chromeos = 'ChromeOS';
// Though there is a bit of dupe with this and Browser, trying to
// reuse code makes it much harder to follow and change.
const unknown = ()=>{
    return nu({
        current: undefined,
        version: _detect_Version__WEBPACK_IMPORTED_MODULE_0__.Version.unknown()
    });
};
const nu = (info)=>{
    const current = info.current;
    const version = info.version;
    const isOS = (name)=>()=>current === name;
    return {
        current,
        version,
        isWindows: isOS(windows),
        // TODO: Fix capitalisation
        isiOS: isOS(ios),
        isAndroid: isOS(android),
        isMacOS: isOS(macos),
        isLinux: isOS(linux),
        isSolaris: isOS(solaris),
        isFreeBSD: isOS(freebsd),
        isChromeOS: isOS(chromeos)
    };
};
const OperatingSystem = {
    unknown,
    nu,
    windows: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(windows),
    ios: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(ios),
    android: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(android),
    linux: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(linux),
    macos: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(macos),
    solaris: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(solaris),
    freebsd: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(freebsd),
    chromeos: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(chromeos)
};


}),
"../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts": 
/*!****************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PlatformDetection: () => (PlatformDetection)
});
/* ESM import */var _detect_DeviceType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../detect/DeviceType */ "../sand/src/main/ts/ephox/sand/detect/DeviceType.ts");
/* ESM import */var _detect_UaData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../detect/UaData */ "../sand/src/main/ts/ephox/sand/detect/UaData.ts");
/* ESM import */var _detect_UaString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../detect/UaString */ "../sand/src/main/ts/ephox/sand/detect/UaString.ts");
/* ESM import */var _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../info/PlatformInfo */ "../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts");
/* ESM import */var _Browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Browser */ "../sand/src/main/ts/ephox/sand/core/Browser.ts");
/* ESM import */var _OperatingSystem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OperatingSystem */ "../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts");






const detect = (userAgent, userAgentDataOpt, mediaMatch)=>{
    const browsers = _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__.PlatformInfo.browsers();
    const oses = _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__.PlatformInfo.oses();
    const browser = userAgentDataOpt.bind((userAgentData)=>_detect_UaData__WEBPACK_IMPORTED_MODULE_1__.detectBrowser(browsers, userAgentData)).orThunk(()=>_detect_UaString__WEBPACK_IMPORTED_MODULE_2__.detectBrowser(browsers, userAgent)).fold(_Browser__WEBPACK_IMPORTED_MODULE_3__.Browser.unknown, _Browser__WEBPACK_IMPORTED_MODULE_3__.Browser.nu);
    const os = _detect_UaString__WEBPACK_IMPORTED_MODULE_2__.detectOs(oses, userAgent).fold(_OperatingSystem__WEBPACK_IMPORTED_MODULE_4__.OperatingSystem.unknown, _OperatingSystem__WEBPACK_IMPORTED_MODULE_4__.OperatingSystem.nu);
    const deviceType = (0,_detect_DeviceType__WEBPACK_IMPORTED_MODULE_5__.DeviceType)(os, browser, userAgent, mediaMatch);
    return {
        browser,
        os,
        deviceType
    };
};
const PlatformDetection = {
    detect
};


}),
"../sand/src/main/ts/ephox/sand/detect/DeviceType.ts": 
/*!***********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/DeviceType.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DeviceType: () => (DeviceType)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const DeviceType = (os, browser, userAgent, mediaMatch)=>{
    const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;
    const isiPhone = os.isiOS() && !isiPad;
    const isMobile = os.isiOS() || os.isAndroid();
    const isTouch = isMobile || mediaMatch('(pointer:coarse)');
    const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');
    const isPhone = isiPhone || isMobile && !isTablet;
    const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;
    const isDesktop = !isPhone && !isTablet && !iOSwebview;
    return {
        isiPad: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isiPad),
        isiPhone: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isiPhone),
        isTablet: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isTablet),
        isPhone: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isPhone),
        isTouch: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isTouch),
        isAndroid: os.isAndroid,
        isiOS: os.isiOS,
        isWebView: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(iOSwebview),
        isDesktop: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isDesktop)
    };
};


}),
"../sand/src/main/ts/ephox/sand/detect/UaData.ts": 
/*!*******************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/UaData.ts ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detectBrowser: () => (detectBrowser)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const detectBrowser = (browsers, userAgentData)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(userAgentData.brands, (uaBrand)=>{
        const lcBrand = uaBrand.brand.toLowerCase();
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.find(browsers, (browser)=>lcBrand === browser.brand?.toLowerCase()).map((info)=>({
                current: info.name,
                version: _Version__WEBPACK_IMPORTED_MODULE_1__.Version.nu(parseInt(uaBrand.version, 10), 0)
            }));
    });
};



}),
"../sand/src/main/ts/ephox/sand/detect/UaString.ts": 
/*!*********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/UaString.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detectBrowser: () => (detectBrowser),
  detectOs: () => (detectOs)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const detect = (candidates, userAgent)=>{
    const agent = String(userAgent).toLowerCase();
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.find(candidates, (candidate)=>{
        return candidate.search(agent);
    });
};
// They (browser and os) are the same at the moment, but they might
// not stay that way.
const detectBrowser = (browsers, userAgent)=>{
    return detect(browsers, userAgent).map((browser)=>{
        const version = _Version__WEBPACK_IMPORTED_MODULE_1__.Version.detect(browser.versionRegexes, userAgent);
        return {
            current: browser.name,
            version
        };
    });
};
const detectOs = (oses, userAgent)=>{
    return detect(oses, userAgent).map((os)=>{
        const version = _Version__WEBPACK_IMPORTED_MODULE_1__.Version.detect(os.versionRegexes, userAgent);
        return {
            current: os.name,
            version
        };
    });
};



}),
"../sand/src/main/ts/ephox/sand/detect/Version.ts": 
/*!********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/Version.ts ***!
  \********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Version: () => (Version)
});
const firstMatch = (regexes, s)=>{
    for(let i = 0; i < regexes.length; i++){
        const x = regexes[i];
        if (x.test(s)) {
            return x;
        }
    }
    return undefined;
};
const find = (regexes, agent)=>{
    const r = firstMatch(regexes, agent);
    if (!r) {
        return {
            major: 0,
            minor: 0
        };
    }
    const group = (i)=>{
        return Number(agent.replace(r, '$' + i));
    };
    return nu(group(1), group(2));
};
const detect = (versionRegexes, agent)=>{
    const cleanedAgent = String(agent).toLowerCase();
    if (versionRegexes.length === 0) {
        return unknown();
    }
    return find(versionRegexes, cleanedAgent);
};
const unknown = ()=>{
    return nu(0, 0);
};
const nu = (major, minor)=>{
    return {
        major,
        minor
    };
};
const Version = {
    nu,
    detect,
    unknown
};


}),
"../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts": 
/*!***********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PlatformInfo: () => (PlatformInfo)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const normalVersionRegex = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/;
const checkContains = (target)=>{
    return (uastring)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, target);
    };
};
const browsers = [
    // This is legacy Edge
    {
        name: 'Edge',
        versionRegexes: [
            /.*?edge\/ ?([0-9]+)\.([0-9]+)$/
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'edge/') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chrome') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'safari') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'applewebkit');
        }
    },
    // This is Google Chrome and Chromium Edge
    {
        name: 'Chromium',
        brand: 'Chromium',
        versionRegexes: [
            /.*?chrome\/([0-9]+)\.([0-9]+).*/,
            normalVersionRegex
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chrome') && !_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chromeframe');
        }
    },
    {
        name: 'IE',
        versionRegexes: [
            /.*?msie\ ?([0-9]+)\.([0-9]+).*/,
            /.*?rv:([0-9]+)\.([0-9]+).*/
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'msie') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'trident');
        }
    },
    // INVESTIGATE: Is this still the Opera user agent?
    {
        name: 'Opera',
        versionRegexes: [
            normalVersionRegex,
            /.*?opera\/([0-9]+)\.([0-9]+).*/
        ],
        search: checkContains('opera')
    },
    {
        name: 'Firefox',
        versionRegexes: [
            /.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/
        ],
        search: checkContains('firefox')
    },
    {
        name: 'Safari',
        versionRegexes: [
            normalVersionRegex,
            /.*?cpu os ([0-9]+)_([0-9]+).*/
        ],
        search: (uastring)=>{
            return (_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'safari') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'mobile/')) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'applewebkit');
        }
    }
];
const oses = [
    {
        name: 'Windows',
        search: checkContains('win'),
        versionRegexes: [
            /.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/
        ]
    },
    {
        name: 'iOS',
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'iphone') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'ipad');
        },
        versionRegexes: [
            /.*?version\/\ ?([0-9]+)\.([0-9]+).*/,
            /.*cpu os ([0-9]+)_([0-9]+).*/,
            /.*cpu iphone os ([0-9]+)_([0-9]+).*/
        ]
    },
    {
        name: 'Android',
        search: checkContains('android'),
        versionRegexes: [
            /.*?android\ ?([0-9]+)\.([0-9]+).*/
        ]
    },
    {
        name: 'macOS',
        search: checkContains('mac os x'),
        versionRegexes: [
            /.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/
        ]
    },
    {
        name: 'Linux',
        search: checkContains('linux'),
        versionRegexes: []
    },
    {
        name: 'Solaris',
        search: checkContains('sunos'),
        versionRegexes: []
    },
    {
        name: 'FreeBSD',
        search: checkContains('freebsd'),
        versionRegexes: []
    },
    {
        name: 'ChromeOS',
        search: checkContains('cros'),
        versionRegexes: [
            /.*?chrome\/([0-9]+)\.([0-9]+).*/
        ]
    }
];
const PlatformInfo = {
    browsers: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(browsers),
    oses: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(oses)
};


}),
"../sand/src/main/ts/ephox/sand/util/Global.ts": 
/*!*****************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/util/Global.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getOrDie: () => (getOrDie)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Resolve.ts");

const unsafe = (name, scope)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.resolve(name, scope);
};
const getOrDie = (name, scope)=>{
    const actual = unsafe(name, scope);
    if (actual === undefined || actual === null) {
        throw new Error(name + ' not available on this browser');
    }
    return actual;
};



}),
"../snooker/src/main/ts/ephox/snooker/api/Generators.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Generators.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Generators: () => (Generators)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");



const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const isColgroup = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('colgroup');
const isRow = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(element) === 'tr' || isColgroup(element);
const elementToData = (element)=>{
    const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_1__.getAttrValue)(element, 'colspan', 1);
    const rowspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_1__.getAttrValue)(element, 'rowspan', 1);
    return {
        element,
        colspan,
        rowspan
    };
};
// note that `toData` seems to be only for testing
const modification = (generators, toData = elementToData)=>{
    const nuCell = (data)=>isCol(data.element) ? generators.col(data) : generators.cell(data);
    const nuRow = (data)=>isColgroup(data.element) ? generators.colgroup(data) : generators.row(data);
    const add = (element)=>{
        if (isRow(element)) {
            return nuRow({
                element
            });
        } else {
            const cell = element;
            const replacement = nuCell(toData(cell));
            recent = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                item: cell,
                replacement
            });
            return replacement;
        }
    };
    let recent = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    const getOrInit = (element, comparator)=>{
        return recent.fold(()=>{
            return add(element);
        }, (p)=>{
            return comparator(element, p.item) ? p.replacement : add(element);
        });
    };
    return {
        getOrInit
    };
};
const transform = (tag)=>{
    return (generators)=>{
        const list = [];
        const find = (element, comparator)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.find(list, (x)=>{
                return comparator(x.item, element);
            });
        };
        const makeNew = (element)=>{
            // Ensure scope is never set on a td element as it's a deprecated attribute
            const attrs = tag === 'td' ? {
                scope: null
            } : {};
            const cell = generators.replace(element, tag, attrs);
            list.push({
                item: element,
                sub: cell
            });
            return cell;
        };
        const replaceOrInit = (element, comparator)=>{
            if (isRow(element) || isCol(element)) {
                return element;
            } else {
                const cell = element;
                return find(cell, comparator).fold(()=>{
                    return makeNew(cell);
                }, (p)=>{
                    return comparator(element, p.item) ? p.sub : makeNew(cell);
                });
            }
        };
        return {
            replaceOrInit
        };
    };
};
const getScopeAttribute = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getOpt(cell, 'scope').map(// Attribute can be col, colgroup, row, and rowgroup.
    // As col and colgroup are to be treated as if they are the same, lob off everything after the first three characters and there is no difference.
    (attribute)=>attribute.substr(0, 3));
const merging = (generators)=>{
    const unmerge = (cell)=>{
        const scope = getScopeAttribute(cell);
        scope.each((attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(cell, 'scope', attribute));
        return ()=>{
            const raw = generators.cell({
                element: cell,
                colspan: 1,
                rowspan: 1
            });
            // Remove any width calculations because they are no longer relevant.
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(raw, 'width');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(cell, 'width');
            scope.each((attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(raw, 'scope', attribute));
            return raw;
        };
    };
    const merge = (cells)=>{
        const getScopeProperty = ()=>{
            const stringAttributes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.cat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(cells, getScopeAttribute));
            if (stringAttributes.length === 0) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
            } else {
                const baseScope = stringAttributes[0];
                const scopes = [
                    'row',
                    'col'
                ];
                const isMixed = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(stringAttributes, (attribute)=>{
                    return attribute !== baseScope && _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains(scopes, attribute);
                });
                return isMixed ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(baseScope);
            }
        };
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(cells[0], 'width');
        getScopeProperty().fold(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(cells[0], 'scope'), (attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(cells[0], 'scope', attribute + 'group'));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant(cells[0]);
    };
    return {
        unmerge,
        merge
    };
};
const Generators = {
    modification,
    transform,
    merging
};


}),
"../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  preserveTable: () => (preserveTable),
  resizeTable: () => (resizeTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const zero = (array)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(array, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(0));
const surround = (sizes, startIndex, endIndex, results, f)=>f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));
// Clamp positive or negative delta so that a column/row cannot be reduced past its min size
const clampDeltaHelper = (predicate)=>(sizes, index, delta, minCellSize)=>{
        if (!predicate(delta)) {
            return delta;
        } else {
            const newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));
            const diff = Math.abs(newSize - sizes[index]);
            return delta >= 0 ? diff : -diff;
        }
    };
const clampNegativeDelta = clampDeltaHelper((delta)=>delta < 0);
const clampDelta = clampDeltaHelper(_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.always);
// Preserve the size of the columns/rows and adjust the table size
const resizeTable = ()=>{
    const calcFixedDeltas = (sizes, index, next, delta, minCellSize)=>{
        const clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);
        return surround(sizes, index, next + 1, [
            clampedDelta,
            0
        ], zero);
    };
    // Calculate delta for adjusted column
    // Also need to calculate deltas for all other columns/rows to ensure they stay at the same visual width/height
    // when the table width/height is adjusted
    const calcRelativeDeltas = (sizes, index, delta, minCellSize)=>{
        // ASSUMPTION: The delta will be a percentage. This may not be correct if other relative sizing is added, so we probably
        // need a better way to calc the ratio.
        const ratio = (100 + delta) / 100;
        const newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, (size, idx)=>{
            const newSize = idx === index ? newThis : size / ratio;
            return newSize - size;
        });
    };
    // Calculations for the inner columns/rows
    const calcLeftEdgeDeltas = (sizes, index, next, delta, minCellSize, isRelative)=>{
        if (isRelative) {
            return calcRelativeDeltas(sizes, index, delta, minCellSize);
        } else {
            return calcFixedDeltas(sizes, index, next, delta, minCellSize);
        }
    };
    const calcMiddleDeltas = (sizes, _prev, index, next, delta, minCellSize, isRelative)=>calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);
    const resizeTable = (resizer, delta)=>resizer(delta);
    // Calculations for the last column/row resizer
    const calcRightEdgeDeltas = (sizes, _prev, index, delta, minCellSize, isRelative)=>{
        if (isRelative) {
            return calcRelativeDeltas(sizes, index, delta, minCellSize);
        } else {
            const clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);
            return zero(sizes.slice(0, index)).concat([
                clampedDelta
            ]);
        }
    };
    const calcRedestributedWidths = (sizes, totalWidth, pixelDelta, isRelative)=>{
        if (isRelative) {
            const tableWidth = totalWidth + pixelDelta;
            const ratio = tableWidth / totalWidth;
            const newSizes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, (size)=>size / ratio);
            return {
                delta: ratio * 100 - 100,
                newSizes
            };
        } else {
            return {
                delta: pixelDelta,
                newSizes: sizes
            };
        }
    };
    return {
        resizeTable,
        clampTableDelta: clampNegativeDelta,
        calcLeftEdgeDeltas,
        calcMiddleDeltas,
        calcRightEdgeDeltas,
        calcRedestributedWidths
    };
};
// Distribute the column/rows and try to preserve the table size
const preserveTable = ()=>{
    // Calculations for the inner columns/rows
    const calcLeftEdgeDeltas = (sizes, index, next, delta, minCellSize)=>{
        const idx = delta >= 0 ? next : index;
        const clampedDelta = clampDelta(sizes, idx, delta, minCellSize);
        // negative delta -> deltas becomes [ neg, pos ], positive delta -> deltas becomes [ pos, neg ]
        return surround(sizes, index, next + 1, [
            clampedDelta,
            -clampedDelta
        ], zero);
    };
    const calcMiddleDeltas = (sizes, _prev, index, next, delta, minCellSize)=>calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);
    const resizeTable = (resizer, delta, isLastColumn)=>{
        if (isLastColumn) {
            resizer(delta);
        }
    };
    // Calculations for the last column/row resizer
    const calcRightEdgeDeltas = (sizes, _prev, _index, delta, _minCellSize, isRelative)=>{
        if (isRelative) {
            return zero(sizes);
        } else {
            // Distribute the delta amongst all of the columns/rows
            const diff = delta / sizes.length;
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(diff));
        }
    };
    const clampTableDelta = (sizes, index, delta, minCellSize, isLastColumn)=>{
        // Don't clamp the last resizer using normal methods
        // Need to allow table width to be reduced past the last column position to allow for distributive resizing
        if (isLastColumn) {
            if (delta >= 0) {
                return delta;
            } else {
                // Clamp delta so that none of the columns/rows can reduce below their min size
                const maxDelta = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldl(sizes, (a, b)=>a + b - minCellSize, 0);
                return Math.max(-maxDelta, delta);
            }
        } else {
            return clampNegativeDelta(sizes, index, delta, minCellSize);
        }
    };
    const calcRedestributedWidths = (sizes, _totalWidth, _pixelDelta, _isRelative)=>({
            delta: 0,
            newSizes: sizes
        });
    return {
        resizeTable,
        clampTableDelta,
        calcLeftEdgeDeltas,
        calcMiddleDeltas,
        calcRightEdgeDeltas,
        calcRedestributedWidths
    };
};



}),
"../snooker/src/main/ts/ephox/snooker/api/Structs.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Structs.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  address: () => (address),
  bounds: () => (bounds),
  colgroup: () => (colgroup),
  columnext: () => (columnext),
  coords: () => (coords),
  detail: () => (detail),
  detailnew: () => (detailnew),
  dimension: () => (dimension),
  dimensions: () => (dimensions),
  elementnew: () => (elementnew),
  extended: () => (extended),
  grid: () => (grid),
  isValidSection: () => (isValidSection),
  rowcells: () => (rowcells),
  rowdetail: () => (rowdetail),
  rowdetailnew: () => (rowdetailnew)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const validSectionList = [
    'tfoot',
    'thead',
    'tbody',
    'colgroup'
];
const isValidSection = (parentName)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(validSectionList, parentName);
const dimension = (width, height)=>({
        width,
        height
    });
const dimensions = (width, height)=>({
        width,
        height
    });
const grid = (rows, columns)=>({
        rows,
        columns
    });
const address = (row, column)=>({
        row,
        column
    });
const coords = (x, y)=>({
        x,
        y
    });
const detail = (element, rowspan, colspan)=>({
        element,
        rowspan,
        colspan
    });
const detailnew = (element, rowspan, colspan, isNew)=>({
        element,
        rowspan,
        colspan,
        isNew
    });
const extended = (element, rowspan, colspan, row, column, isLocked)=>({
        element,
        rowspan,
        colspan,
        row,
        column,
        isLocked
    });
const rowdetail = (element, cells, section)=>({
        element,
        cells,
        section
    });
const rowdetailnew = (element, cells, section, isNew)=>({
        element,
        cells,
        section,
        isNew
    });
const elementnew = (element, isNew, isLocked)=>({
        element,
        isNew,
        isLocked
    });
const rowcells = (element, cells, section, isNew)=>({
        element,
        cells,
        section,
        isNew
    });
const bounds = (startRow, startCol, finishRow, finishCol)=>({
        startRow,
        startCol,
        finishRow,
        finishCol
    });
const columnext = (element, colspan, column)=>({
        element,
        colspan,
        column
    });
const colgroup = (element, columns)=>({
        element,
        columns
    });



}),
"../snooker/src/main/ts/ephox/snooker/api/TableContent.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableContent.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  merge: () => (merge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");



const merge = (cells)=>{
    const isBr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('br');
    const advancedBr = (children)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(children, (c)=>{
            return isBr(c) || _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isText(c) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(c).trim().length === 0;
        });
    };
    const isListItem = (el)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(el) === 'li' || _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.ancestor(el, _ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isList).isSome();
    };
    const siblingIsBlock = (el)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.nextSibling(el).map((rightSibling)=>{
            if (_ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isBlock(rightSibling)) {
                return true;
            }
            if (_ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isEmptyTag(rightSibling)) {
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(rightSibling) === 'img' ? false : true;
            }
            return false;
        }).getOr(false);
    };
    const markCell = (cell)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.last(cell).bind((rightEdge)=>{
            const rightSiblingIsBlock = siblingIsBlock(rightEdge);
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.parent(rightEdge).map((parent)=>{
                return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || _ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isBlock(parent) && !_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.eq(cell, parent) ? [] : [
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.SugarElement.fromTag('br')
                ];
            });
        }).getOr([]);
    };
    const markContent = ()=>{
        const content = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(cells, (cell)=>{
            const children = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.children(cell);
            return advancedBr(children) ? [] : children.concat(markCell(cell));
        });
        return content.length === 0 ? [
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.SugarElement.fromTag('br')
        ] : content;
    };
    const contents = markContent();
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.empty(cells[0]);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.append(cells[0], contents);
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  attr: () => (attr),
  cell: () => (cell),
  cells: () => (cells),
  columnGroups: () => (columnGroups),
  columns: () => (columns),
  firstCell: () => (firstCell),
  grid: () => (grid),
  neighbourCells: () => (neighbourCells),
  neighbourRows: () => (neighbourRows),
  notCell: () => (notCell),
  row: () => (row),
  rows: () => (rows),
  table: () => (table)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/LayerSelector */ "../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");





// lookup inside this table
const lookup = (tags, element, isRoot = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.never)=>{
    // If the element we're inspecting is the root, we definitely don't want it.
    if (isRoot(element)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
    // This looks a lot like SelectorFind.closest, with one big exception - the isRoot check.
    // The code here will look for parents if passed a table, SelectorFind.closest with that specific isRoot check won't.
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains(tags, _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.name(element))) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(element);
    }
    const isRootOrUpperTable = (elm)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.is(elm, 'table') || isRoot(elm);
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.ancestor(element, tags.join(','), isRootOrUpperTable);
};
/*
 * Identify the optional cell that element represents.
 */ const cell = (element, isRoot)=>lookup([
        'td',
        'th'
    ], element, isRoot);
const cells = (ancestor)=>_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(ancestor, 'th,td');
const columns = (ancestor)=>{
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.is(ancestor, 'colgroup')) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(ancestor, 'col');
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.bind(columnGroups(ancestor), (columnGroup)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(columnGroup, 'col'));
    }
};
const notCell = (element, isRoot)=>lookup([
        'caption',
        'tr',
        'tbody',
        'tfoot',
        'thead'
    ], element, isRoot);
const neighbours = (selector)=>(element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.parent(element).map((parent)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(parent, selector));
const neighbourCells = neighbours('th,td');
const neighbourRows = neighbours('tr');
const firstCell = (ancestor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.descendant(ancestor, 'th,td');
const table = (element, isRoot)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.closest(element, 'table', isRoot);
const row = (element, isRoot)=>lookup([
        'tr'
    ], element, isRoot);
const rows = (ancestor)=>_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(ancestor, 'tr');
const columnGroups = (ancestor)=>table(ancestor).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant([]), (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(table, 'colgroup'));
const attr = (element, property)=>(0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_9__.getAttrValue)(element, property);
const grid = (element, rowProp, colProp)=>{
    const rowsCount = attr(element, rowProp);
    const cols = attr(element, colProp);
    return _Structs__WEBPACK_IMPORTED_MODULE_10__.grid(rowsCount, cols);
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  eraseColumns: () => (eraseColumns),
  eraseRows: () => (eraseRows),
  getCellsType: () => (getCellsType),
  getColumnsType: () => (getColumnsType),
  getRowsType: () => (getRowsType),
  insertColumnAfter: () => (insertColumnAfter),
  insertColumnBefore: () => (insertColumnBefore),
  insertColumnsAfter: () => (insertColumnsAfter),
  insertColumnsBefore: () => (insertColumnsBefore),
  insertRowAfter: () => (insertRowAfter),
  insertRowBefore: () => (insertRowBefore),
  insertRowsAfter: () => (insertRowsAfter),
  insertRowsBefore: () => (insertRowsBefore),
  makeCellHeader: () => (makeCellHeader),
  makeCellsHeader: () => (makeCellsHeader),
  makeColumnHeader: () => (makeColumnHeader),
  makeColumnsHeader: () => (makeColumnsHeader),
  makeRowBody: () => (makeRowBody),
  makeRowFooter: () => (makeRowFooter),
  makeRowHeader: () => (makeRowHeader),
  makeRowsBody: () => (makeRowsBody),
  makeRowsFooter: () => (makeRowsFooter),
  makeRowsHeader: () => (makeRowsHeader),
  mergeCells: () => (mergeCells),
  pasteCells: () => (pasteCells),
  pasteColsAfter: () => (pasteColsAfter),
  pasteColsBefore: () => (pasteColsBefore),
  pasteRowsAfter: () => (pasteRowsAfter),
  pasteRowsBefore: () => (pasteRowsBefore),
  splitCellIntoColumns: () => (splitCellIntoColumns),
  splitCellIntoRows: () => (splitCellIntoRows),
  unmakeCellHeader: () => (unmakeCellHeader),
  unmakeCellsHeader: () => (unmakeCellsHeader),
  unmakeColumnHeader: () => (unmakeColumnHeader),
  unmakeColumnsHeader: () => (unmakeColumnsHeader),
  unmergeCells: () => (unmergeCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _lookup_Blocks__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../lookup/Blocks */ "../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _model_DetailsList__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../model/DetailsList */ "../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../model/RunOperation */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../model/TableMerge */ "../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts");
/* ESM import */var _model_Transitions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../model/Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");
/* ESM import */var _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../operate/MergingOperations */ "../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts");
/* ESM import */var _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../operate/ModificationOperations */ "../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts");
/* ESM import */var _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../operate/TransformOperations */ "../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts");
/* ESM import */var _resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../resize/Adjustments */ "../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts");
/* ESM import */var _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/ColUtils */ "../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts");
/* ESM import */var _Generators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Generators */ "../snooker/src/main/ts/ephox/snooker/api/Generators.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _TableContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./TableContent */ "../snooker/src/main/ts/ephox/snooker/api/TableContent.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");



















// This uses a slight variation to the default `ContentEditable.isEditable` behaviour,
// as when the element is detached we assume it is editable because it is a new cell.
const isEditable = (elem)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isEditable(elem, true);
const prune = (table)=>{
    const cells = _TableLookup__WEBPACK_IMPORTED_MODULE_1__.cells(table);
    if (cells.length === 0) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.remove(table);
    }
};
const outcome = (grid, cursor)=>({
        grid,
        cursor
    });
const findEditableCursorPosition = (rows)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findMap(rows, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findMap(row.cells, (cell)=>{
            const elem = cell.element;
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.someIf(isEditable(elem), elem);
        }));
const elementFromGrid = (grid, row, column)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(rows[row]?.cells[column]?.element).filter(isEditable)// Fallback to the first valid position in the table
    .orThunk(()=>findEditableCursorPosition(rows));
};
const bundle = (grid, row, column)=>{
    const cursorElement = elementFromGrid(grid, row, column);
    return outcome(grid, cursorElement);
};
const uniqueRows = (details)=>{
    const rowCompilation = (rest, detail)=>{
        const rowExists = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(rest, (currentDetail)=>currentDetail.row === detail.row);
        return rowExists ? rest : rest.concat([
            detail
        ]);
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(details, rowCompilation, []).sort((detailA, detailB)=>detailA.row - detailB.row);
};
const opInsertRowBefore = (grid, detail, comparator, genWrappers)=>{
    const example = detail.row;
    const targetIndex = detail.row;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, targetIndex, detail.column);
};
const opInsertRowsBefore = (grid, details, comparator, genWrappers)=>{
    const targetIndex = details[0].row;
    const rows = uniqueRows(details);
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(rows, (acc, row)=>{
        const newG = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);
        return {
            grid: newG,
            delta: acc.delta + 1
        };
    }, {
        grid,
        delta: 0
    }).grid;
    return bundle(newGrid, targetIndex, details[0].column);
};
const opInsertRowAfter = (grid, detail, comparator, genWrappers)=>{
    const example = detail.row;
    const targetIndex = detail.row + detail.rowspan;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, targetIndex, detail.column);
};
const opInsertRowsAfter = (grid, details, comparator, genWrappers)=>{
    const rows = uniqueRows(details);
    const target = rows[rows.length - 1];
    const targetIndex = target.row + target.rowspan;
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(rows, (newG, row)=>{
        return _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);
    }, grid);
    return bundle(newGrid, targetIndex, details[0].column);
};
const opInsertColumnBefore = (grid, extractDetail, comparator, genWrappers)=>{
    const detail = extractDetail.detail;
    const example = detail.column;
    const targetIndex = detail.column;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, targetIndex);
};
const opInsertColumnsBefore = (grid, extractDetail, comparator, genWrappers)=>{
    const details = extractDetail.details;
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const targetIndex = columns[0].column;
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(columns, (acc, col)=>{
        const newG = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);
        return {
            grid: newG,
            delta: acc.delta + 1
        };
    }, {
        grid,
        delta: 0
    }).grid;
    return bundle(newGrid, details[0].row, targetIndex);
};
const opInsertColumnAfter = (grid, extractDetail, comparator, genWrappers)=>{
    const detail = extractDetail.detail;
    const example = detail.column;
    const targetIndex = detail.column + detail.colspan;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, targetIndex);
};
const opInsertColumnsAfter = (grid, extractDetail, comparator, genWrappers)=>{
    const details = extractDetail.details;
    const target = details[details.length - 1];
    const targetIndex = target.column + target.colspan;
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(columns, (newG, col)=>{
        return _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);
    }, grid);
    return bundle(newGrid, details[0].row, targetIndex);
};
const opMakeColumnHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumn(initialGrid, detail.column, true, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opMakeColumnsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const columnIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (detail)=>detail.column);
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumns(initialGrid, columnIndexes, true, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opMakeCellHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCell(initialGrid, detail, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opMakeCellsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opUnmakeColumnHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumn(initialGrid, detail.column, false, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opUnmakeColumnsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const columnIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (detail)=>detail.column);
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumns(initialGrid, columnIndexes, false, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opUnmakeCellHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCell(initialGrid, detail, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opUnmakeCellsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const makeRowSection = (section, applyScope)=>(grid, detail, comparator, genWrappers, tableSection)=>{
        const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceRow(grid, detail.row, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);
        return bundle(newGrid, detail.row, detail.column);
    };
const makeRowsSection = (section, applyScope)=>(initialGrid, details, comparator, genWrappers, tableSection)=>{
        const rows = uniqueRows(details);
        const rowIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(rows, (detail)=>detail.row);
        const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceRows(initialGrid, rowIndexes, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);
        return bundle(newGrid, details[0].row, details[0].column);
    };
const opMakeRowHeader = makeRowSection('thead', true);
const opMakeRowsHeader = makeRowsSection('thead', true);
const opMakeRowBody = makeRowSection('tbody', false);
const opMakeRowsBody = makeRowsSection('tbody', false);
const opMakeRowFooter = makeRowSection('tfoot', false);
const opMakeRowsFooter = makeRowsSection('tfoot', false);
const opSplitCellIntoColumns = (grid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.splitCellIntoColumns(grid, detail.row, detail.column, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opSplitCellIntoRows = (grid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.splitCellIntoRows(grid, detail.row, detail.column, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opEraseColumns = (grid, extractDetail, _comparator, _genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(extractDetail.details);
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.deleteColumnsAt(grid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (column)=>column.column));
    const maxColIndex = newGrid.length > 0 ? newGrid[0].cells.length - 1 : 0;
    return bundle(newGrid, columns[0].row, Math.min(columns[0].column, maxColIndex));
};
const opEraseRows = (grid, details, _comparator, _genWrappers)=>{
    const rows = uniqueRows(details);
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);
    const maxRowIndex = Math.max(_model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(newGrid).rows.length - 1, 0);
    return bundle(newGrid, Math.min(details[0].row, maxRowIndex), details[0].column);
};
const opMergeCells = (grid, mergable, comparator, genWrappers)=>{
    const cells = mergable.cells;
    _TableContent__WEBPACK_IMPORTED_MODULE_10__.merge(cells);
    const newGrid = _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__.merge(grid, mergable.bounds, comparator, genWrappers.merge(cells));
    return outcome(newGrid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(cells[0]));
};
const opUnmergeCells = (grid, unmergable, comparator, genWrappers)=>{
    const unmerge = (b, cell)=>_operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__.unmerge(b, cell, comparator, genWrappers.unmerge(cell));
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(unmergable, unmerge, grid);
    return outcome(newGrid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(unmergable[0]));
};
const opPasteCells = (grid, pasteDetails, comparator, _genWrappers)=>{
    const gridify = (table, generators)=>{
        const wh = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
        return _model_Transitions__WEBPACK_IMPORTED_MODULE_13__.toGrid(wh, generators, true);
    };
    const gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);
    const startAddress = _Structs__WEBPACK_IMPORTED_MODULE_14__.address(pasteDetails.row, pasteDetails.column);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.merge(startAddress, grid, gridB, pasteDetails.generators, comparator);
    return mergedGrid.fold(()=>outcome(grid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(pasteDetails.element)), (newGrid)=>{
        return bundle(newGrid, pasteDetails.row, pasteDetails.column);
    });
};
const gridifyRows = (rows, generators, context)=>{
    const pasteDetails = _model_DetailsList__WEBPACK_IMPORTED_MODULE_16__.fromPastedRows(rows, context.section);
    const wh = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.generate(pasteDetails);
    return _model_Transitions__WEBPACK_IMPORTED_MODULE_13__.toGrid(wh, generators, true);
};
const opPasteColsBefore = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[0].column;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertCols(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);
};
const opPasteColsAfter = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertCols(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, index);
};
const opPasteRowsBefore = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[0].row;
    const context = rows[index];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertRows(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);
};
const opPasteRowsAfter = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertRows(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, index, pasteDetails.cells[0].column);
};
const opGetColumnsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind((selectedCells)=>{
        const lastSelectedCell = selectedCells[selectedCells.length - 1];
        const minColRange = selectedCells[0].column;
        const maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;
        const selectedColumnCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.flatten(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(house.all, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(row.cells, (cell)=>cell.column >= minColRange && cell.column < maxColRange)));
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonCellType)(selectedColumnCells);
    }).getOr('');
};
const opGetCellsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind(_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonCellType).getOr('');
};
const opGetRowsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind((selectedCells)=>{
        const lastSelectedCell = selectedCells[selectedCells.length - 1];
        const minRowRange = selectedCells[0].row;
        const maxRowRange = lastSelectedCell.row + lastSelectedCell.rowspan;
        const selectedRows = house.all.slice(minRowRange, maxRowRange);
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonRowType)(selectedRows);
    }).getOr('');
};
// Only column modifications force a resizing. Everything else just tries to preserve the table as is.
const resize = (table, list, details, behaviours)=>_resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__.adjustWidthTo(table, list, details, behaviours.sizing);
const adjustAndRedistributeWidths = (table, list, details, behaviours)=>_resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__.adjustAndRedistributeWidths(table, list, details, behaviours.sizing, behaviours.resize);
// Custom selection extractors
const firstColumnIsLocked = (_warehouse, details)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(details, (detail)=>detail.column === 0 && detail.isLocked);
// TODO: Maybe have an Arr.existsR which would be more efficient for most cases below
const lastColumnIsLocked = (warehouse, details)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(details, (detail)=>detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked);
const getColumnsWidth = (warehouse, details)=>{
    const columns = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_20__.columns(warehouse);
    const uniqueCols = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(uniqueCols, (acc, detail)=>{
        const column = columns[detail.column];
        const colWidth = column.map(_ephox_sugar__WEBPACK_IMPORTED_MODULE_21__.getOuter).getOr(0);
        return acc + colWidth;
    }, 0);
};
const insertColumnExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell(warehouse, target).filter((detail)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, [
                detail
            ]);
        }).map((detail)=>({
                detail,
                pixelDelta: getColumnsWidth(warehouse, [
                    detail
                ])
            }));
const insertColumnsExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(warehouse, target).filter((details)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, details);
        }).map((details)=>({
                details,
                pixelDelta: getColumnsWidth(warehouse, details)
            }));
const eraseColumnsExtractor = (warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells(warehouse, target).map((details)=>({
            details,
            pixelDelta: -getColumnsWidth(warehouse, details)
        }));
const pasteColumnsExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor(warehouse, target).filter((details)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, details.cells);
        });
const headerCellGenerator = _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.transform('th');
const bodyCellGenerator = _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.transform('td');
const insertRowBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowsBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowsAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnBefore, insertColumnExtractor(true), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnAfter, insertColumnExtractor(false), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const splitCellIntoColumns = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opSplitCellIntoColumns, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const splitCellIntoRows = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opSplitCellIntoRows, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const eraseColumns = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths, prune, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const eraseRows = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opEraseRows, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, prune, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const makeColumnHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeColumnHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeColumnsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeColumnsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const unmakeColumnHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeColumnHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const unmakeColumnsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeColumnsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeRowsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeRowBody = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowBody, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowsBody = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsBody, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowFooter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowFooter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowsFooter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsFooter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeCellHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeCellHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeCellsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeCellsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const unmakeCellHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeCellHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const unmakeCellsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeCellsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const mergeCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMergeCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedMergable, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.merging, table, target, generators, behaviours);
const unmergeCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmergeCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedUnmergable, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.merging, table, target, generators, behaviours);
const pasteCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPaste, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteColsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteColsBefore, pasteColumnsExtractor(true), _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteColsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteColsAfter, pasteColumnsExtractor(false), _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteRowsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteRowsBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteRowsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteRowsAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const getColumnsType = opGetColumnsType;
const getCellsType = opGetCellsType;
const getRowsType = opGetRowsType;


}),
"../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getBox: () => (getBox),
  intercepts: () => (intercepts),
  moveBy: () => (moveBy),
  nestedIntercepts: () => (nestedIntercepts)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selection/CellFinder */ "../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts");
/* ESM import */var _selection_CellGroup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/CellGroup */ "../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");






const moveBy = (cell, deltaRow, deltaColumn)=>{
    return _TableLookup__WEBPACK_IMPORTED_MODULE_0__.table(cell).bind((table)=>{
        const warehouse = getWarehouse(table);
        return _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.moveBy(warehouse, cell, deltaRow, deltaColumn);
    });
};
const intercepts = (table, first, last)=>{
    const warehouse = getWarehouse(table);
    return _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.intercepts(warehouse, first, last);
};
const nestedIntercepts = (table, first, firstTable, last, lastTable)=>{
    const warehouse = getWarehouse(table);
    const optStartCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(table, firstTable) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(first) : _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.parentCell(warehouse, first);
    const optLastCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(table, lastTable) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(last) : _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.parentCell(warehouse, last);
    return optStartCell.bind((startCell)=>optLastCell.bind((lastCell)=>_selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.intercepts(warehouse, startCell, lastCell)));
};
const getBox = (table, first, last)=>{
    const warehouse = getWarehouse(table);
    return _selection_CellGroup__WEBPACK_IMPORTED_MODULE_4__.getBox(warehouse, first, last);
};
// Private method ... keep warehouse in snooker, please.
const getWarehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.fromTable;



}),
"../snooker/src/main/ts/ephox/snooker/api/TableSection.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableSection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableSection: () => (TableSection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");





const transformCell = (cell, comparator, substitution)=>_Structs__WEBPACK_IMPORTED_MODULE_0__.elementnew(substitution(cell.element, comparator), true, cell.isLocked);
const transformRow = (row, section)=>row.section !== section ? _Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(row.element, row.cells, section, row.isNew) : row;
const section = ()=>({
        transformRow,
        transformCell: (cell, comparator, substitution)=>{
            const newCell = substitution(cell.element, comparator);
            // Convert the cell to a td element as "section" should always use td element
            const fixedCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(newCell) !== 'td' ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.mutate(newCell, 'td') : newCell;
            return _Structs__WEBPACK_IMPORTED_MODULE_0__.elementnew(fixedCell, cell.isNew, cell.isLocked);
        }
    });
const sectionCells = ()=>({
        transformRow,
        transformCell
    });
const cells = ()=>({
        transformRow: (row, section)=>{
            // Ensure that cells are always within the tbody for headers
            const newSection = section === 'thead' ? 'tbody' : section;
            return transformRow(row, newSection);
        },
        transformCell
    });
// A fallback legacy type that won't adjust the row/section type
// and instead will only modify cells
const fallback = ()=>({
        transformRow: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.identity,
        transformCell
    });
const getTableSectionType = (table, fallback)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.fromTable(table);
    const type = (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_5__.findTableRowHeaderType)(warehouse).getOr(fallback);
    switch(type){
        case 'section':
            return section();
        case 'sectionCells':
            return sectionCells();
        case 'cells':
            return cells();
    }
};
const TableSection = {
    getTableSectionType,
    section,
    sectionCells,
    cells,
    fallback
};


}),
"../snooker/src/main/ts/ephox/snooker/api/TableSize.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableSize.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableSize: () => (TableSize)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../resize/ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../resize/Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");





const widthLookup = (table, getter)=>()=>{
        // Use the actual width if attached, otherwise fallback to the raw width
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.inBody(table)) {
            return getter(table);
        } else {
            return parseFloat(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getRaw(table, 'width').getOr('0'));
        }
    };
const noneSize = (table)=>{
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const zero = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(0);
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelWidths(warehouse, table, tableSize);
    // Note: The 3 delta functions below return 0 to signify a change shouldn't be made
    // however this is currently not used, so may need changing if ever used
    return {
        width: getWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta: zero,
        singleColumnWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant([
            0
        ]),
        minCellWidth: zero,
        setElementWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.noop,
        adjustTableWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.noop,
        isRelative: true,
        label: 'none'
    };
};
const percentageSize = (table)=>{
    const getFloatWidth = widthLookup(table, (elem)=>parseFloat(_resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.getPercentTableWidth(elem)));
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const getCellDelta = (delta)=>delta / getWidth() * 100;
    // If we have one column in a percent based table, that column should be 100% of the width of the table.
    const singleColumnWidth = (w, _delta)=>[
            100 - w
        ];
    // Get the width of a 10 pixel wide cell over the width of the table as a percentage
    const minCellWidth = ()=>_util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth() / getWidth() * 100;
    const adjustTableWidth = (delta)=>{
        const currentWidth = getFloatWidth();
        const change = delta / 100 * currentWidth;
        const newWidth = currentWidth + change;
        _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPercentageWidth(table, newWidth);
    };
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPercentageWidths(warehouse, table, tableSize);
    return {
        width: getFloatWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta,
        singleColumnWidth,
        minCellWidth,
        setElementWidth: _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPercentageWidth,
        adjustTableWidth,
        isRelative: true,
        label: 'percent'
    };
};
const pixelSize = (table)=>{
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const getCellDelta = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.identity;
    const singleColumnWidth = (w, delta)=>{
        const newNext = Math.max(_util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth(), w + delta);
        return [
            newNext - w
        ];
    };
    const adjustTableWidth = (delta)=>{
        const newWidth = getWidth() + delta;
        _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPixelWidth(table, newWidth);
    };
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelWidths(warehouse, table, tableSize);
    return {
        width: getWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta,
        singleColumnWidth,
        minCellWidth: _util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth,
        setElementWidth: _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPixelWidth,
        adjustTableWidth,
        isRelative: false,
        label: 'pixel'
    };
};
const chooseSize = (element, width)=>{
    const percentMatch = _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.percentageBasedSizeRegex().exec(width);
    if (percentMatch !== null) {
        return percentageSize(element);
    } else {
        return pixelSize(element);
    }
};
const getTableSize = (table)=>{
    const width = _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.getRawWidth(table);
    return width.fold(()=>noneSize(table), (w)=>chooseSize(table, w));
};
const TableSize = {
    getTableSize,
    pixelSize,
    percentageSize,
    noneSize
};


}),
"../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Warehouse: () => (Warehouse)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_DetailsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/DetailsList */ "../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");





const key = (row, column)=>{
    return row + ',' + column;
};
const getAt = (warehouse, row, column)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(warehouse.access[key(row, column)]);
const findItem = (warehouse, item, comparator)=>{
    const filtered = filterItems(warehouse, (detail)=>{
        return comparator(item, detail.element);
    });
    return filtered.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(filtered[0]) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const filterItems = (warehouse, predicate)=>{
    const all = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(warehouse.all, (r)=>{
        return r.cells;
    });
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(all, predicate);
};
const generateColumns = (rowData)=>{
    const columnsGroup = {};
    let index = 0;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rowData.cells, (column)=>{
        const colspan = column.colspan;
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(colspan, (columnIndex)=>{
            const colIndex = index + columnIndex;
            columnsGroup[colIndex] = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.columnext(column.element, colspan, colIndex);
        });
        index += colspan;
    });
    return columnsGroup;
};
/*
 * From a list of list of Detail, generate three pieces of information:
 *  1. the grid size
 *  2. a data structure which can efficiently identify which cell is in which row,column position
 *  3. a list of all cells in order left-to-right, top-to-bottom
 */ const generate = (list)=>{
    // list is an array of objects, made by cells and elements
    // elements: is the TR
    // cells: is an array of objects representing the cells in the row.
    //        It is made of:
    //          colspan (merge cell)
    //          element
    //          rowspan (merge cols)
    const access = {};
    const cells = [];
    const tableOpt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.head(list).map((rowData)=>rowData.element).bind(_TableLookup__WEBPACK_IMPORTED_MODULE_3__.table);
    const lockedColumns = tableOpt.bind(_util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_4__.getLockedColumnsFromTable).getOr({});
    let maxRows = 0;
    let maxColumns = 0;
    let rowCount = 0;
    const { pass: colgroupRows, fail: rows } = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.partition(list, (rowData)=>rowData.section === 'colgroup');
    // Handle rows first
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rows, (rowData)=>{
        const currentRow = [];
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rowData.cells, (rowCell)=>{
            let start = 0;
            // If this spot has been taken by a previous rowspan, skip it.
            while(access[key(rowCount, start)] !== undefined){
                start++;
            }
            const isLocked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.hasNonNullableKey(lockedColumns, start.toString());
            const current = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);
            // Occupy all the (row, column) positions that this cell spans for.
            for(let occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++){
                for(let occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++){
                    const rowPosition = rowCount + occupiedRowPosition;
                    const columnPosition = start + occupiedColumnPosition;
                    const newpos = key(rowPosition, columnPosition);
                    access[newpos] = current;
                    maxColumns = Math.max(maxColumns, columnPosition + 1);
                }
            }
            currentRow.push(current);
        });
        maxRows++;
        cells.push(_api_Structs__WEBPACK_IMPORTED_MODULE_2__.rowdetail(rowData.element, currentRow, rowData.section));
        rowCount++;
    });
    // Handle colgroups
    // Note: Currently only a single colgroup is supported so just use the last one
    const { columns, colgroups } = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.last(colgroupRows).map((rowData)=>{
        const columns = generateColumns(rowData);
        const colgroup = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.colgroup(rowData.element, _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.values(columns));
        return {
            colgroups: [
                colgroup
            ],
            columns
        };
    }).getOrThunk(()=>({
            colgroups: [],
            columns: {}
        }));
    const grid = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.grid(maxRows, maxColumns);
    return {
        grid,
        access,
        all: cells,
        columns,
        colgroups
    };
};
const fromTable = (table)=>{
    const list = _model_DetailsList__WEBPACK_IMPORTED_MODULE_6__.fromTable(table);
    return generate(list);
};
const justCells = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(warehouse.all, (w)=>w.cells);
const justColumns = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.values(warehouse.columns);
const hasColumns = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.keys(warehouse.columns).length > 0;
const getColumnAt = (warehouse, columnIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(warehouse.columns[columnIndex]);
const Warehouse = {
    fromTable,
    generate,
    getAt,
    findItem,
    filterItems,
    justCells,
    justColumns,
    hasColumns,
    getColumnAt
};


}),
"../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ColumnContext: () => (ColumnContext)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");

const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        none: []
    },
    {
        only: [
            'index'
        ]
    },
    {
        left: [
            'index',
            'next'
        ]
    },
    {
        middle: [
            'prev',
            'index',
            'next'
        ]
    },
    {
        right: [
            'prev',
            'index'
        ]
    }
]);
const ColumnContext = {
    ...adt
};


}),
"../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  determine: () => (determine)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ColumnContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ColumnContext */ "../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts");


/*
 * Based on the column index, identify the context
 */ const neighbours = (input, index)=>{
    if (input.length === 0) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.none();
    }
    if (input.length === 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.only(0);
    }
    if (index === 0) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.left(0, 1);
    }
    if (index === input.length - 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.right(index - 1, index);
    }
    if (index > 0 && index < input.length - 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.middle(index - 1, index, index + 1);
    }
    return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.none();
};
/*
 * Calculate the offsets to apply to each column width (not the absolute widths themselves)
 * based on a resize at column: column of step: step
 */ const determine = (input, column, step, tableSize, resize)=>{
    const result = input.slice(0);
    const context = neighbours(input, column);
    const onNone = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(result, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(0)));
    const onOnly = (index)=>tableSize.singleColumnWidth(result[index], step);
    const onLeft = (index, next)=>resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);
    const onMiddle = (prev, index, next)=>resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);
    // Applies to the last column bar
    const onRight = (prev, index)=>resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);
    return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);
};



}),
"../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  columns: () => (columns),
  rows: () => (rows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


/*
 * Identify for each column, a cell that has colspan 1. Note, this
 * may actually fail, and future work will be to calculate column
 * sizes that are only available through the difference of two
 * spanning columns.
 */ const columns = (warehouse, isValidCell = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.always)=>{
    const grid = warehouse.grid;
    const cols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.columns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    const rowsArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.rows, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(cols, (col)=>{
        const getBlock = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(rowsArr, (r)=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, r, col).filter((detail)=>detail.column === col).toArray());
        const isValid = (detail)=>detail.colspan === 1 && isValidCell(detail.element);
        const getFallback = ()=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, 0, col);
        return decide(getBlock, isValid, getFallback);
    });
};
const decide = (getBlock, isValid, getFallback)=>{
    const inBlock = getBlock();
    const validInBlock = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.find(inBlock, isValid);
    const detailOption = validInBlock.orThunk(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(inBlock[0]).orThunk(getFallback));
    return detailOption.map((detail)=>detail.element);
};
const rows = (warehouse)=>{
    const grid = warehouse.grid;
    const rowsArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.rows, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    const cols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.columns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rowsArr, (row)=>{
        const getBlock = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(cols, (c)=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, row, c).filter((detail)=>detail.row === row).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant([]), (detail)=>[
                        detail
                    ]));
        const isSingle = (detail)=>detail.rowspan === 1;
        const getFallback = ()=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, row, 0);
        return decide(getBlock, isSingle, getFallback);
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/lookup/Type.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/lookup/Type.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  findCommonCellType: () => (findCommonCellType),
  findCommonRowType: () => (findCommonRowType),
  findTableRowHeaderType: () => (findTableRowHeaderType),
  isHeaderCell: () => (isHeaderCell),
  isHeaderCells: () => (isHeaderCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const isHeaderCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('th');
const isHeaderCells = (cells)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(cells, (cell)=>isHeaderCell(cell.element));
const getRowHeaderType = (isHeaderRow, isHeaderCells)=>{
    if (isHeaderRow && isHeaderCells) {
        return 'sectionCells';
    } else if (isHeaderRow) {
        return 'section';
    } else {
        return 'cells';
    }
};
const getRowType = (row)=>{
    // Header rows can use a combination of theads and ths - want to detect the different combinations
    const isHeaderRow = row.section === 'thead';
    const isHeaderCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.is(findCommonCellType(row.cells), 'th');
    if (row.section === 'tfoot') {
        return {
            type: 'footer'
        };
    } else if (isHeaderRow || isHeaderCells) {
        return {
            type: 'header',
            subType: getRowHeaderType(isHeaderRow, isHeaderCells)
        };
    } else {
        return {
            type: 'body'
        };
    }
};
const findCommonCellType = (cells)=>{
    const headerCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(cells, (cell)=>isHeaderCell(cell.element));
    if (headerCells.length === 0) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('td');
    } else if (headerCells.length === cells.length) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('th');
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    }
};
const findCommonRowType = (rows)=>{
    const rowTypes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rows, (row)=>getRowType(row).type);
    const hasHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'header');
    const hasFooter = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'footer');
    if (!hasHeader && !hasFooter) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('body');
    } else {
        const hasBody = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'body');
        if (hasHeader && !hasBody && !hasFooter) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('header');
        } else if (!hasHeader && !hasBody && hasFooter) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('footer');
        } else {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
        }
    }
};
const findTableRowHeaderType = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.findMap(warehouse.all, (row)=>{
        const rowType = getRowType(row);
        return rowType.type === 'header' ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(rowType.subType) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    });



}),
"../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromPastedRows: () => (fromPastedRows),
  fromTable: () => (fromTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");





const fromRowsOrColGroups = (elems, getSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(elems, (row)=>{
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(row) === 'colgroup') {
            const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(_api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.columns(row), (column)=>{
                const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(column, 'span', 1);
                return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.detail(column, 1, colspan);
            });
            return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.rowdetail(row, cells, 'colgroup');
        } else {
            const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(_api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.cells(row), (cell)=>{
                const rowspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(cell, 'rowspan', 1);
                const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(cell, 'colspan', 1);
                return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.detail(cell, rowspan, colspan);
            });
            return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.rowdetail(row, cells, getSection(row));
        }
    });
const getParentSection = (group)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.parent(group).map((parent)=>{
        const parentName = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(parent);
        return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.isValidSection(parentName) ? parentName : 'tbody';
    }).getOr('tbody');
/*
 * Takes a DOM table and returns a list of list of:
   element: row element
   cells: (id, rowspan, colspan) structs
 */ const fromTable = (table)=>{
    const rows = _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.rows(table);
    const columnGroups = _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.columnGroups(table);
    const elems = [
        ...columnGroups,
        ...rows
    ];
    return fromRowsOrColGroups(elems, getParentSection);
};
const fromPastedRows = (elems, section)=>fromRowsOrColGroups(elems, ()=>section);



}),
"../snooker/src/main/ts/ephox/snooker/model/Fitment.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/Fitment.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  lockedColFill: () => (lockedColFill),
  measure: () => (measure),
  measureHeight: () => (measureHeight),
  measureWidth: () => (measureWidth),
  tailor: () => (tailor)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Result.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");




/*
  Fitment, is a module used to ensure that the Inserted table (gridB) can fit squareley within the Host table (gridA).
    - measure returns a delta of rows and cols, eg:
        - col: 3 means gridB can fit with 3 spaces to spare
        - row: -5 means gridB can needs 5 more rows to completely fit into gridA
        - col: 0, row: 0 depics perfect fitment

    - tailor, requires a delta and returns grid that is built to match the delta, tailored to fit.
      eg: 3x3 gridA, with a delta col: -3, row: 2 returns a new grid 3 rows x 6 cols

    - assumptions: All grids used by this module should be rectangular
*/ const measure = (startAddress, gridA, gridB)=>{
    if (startAddress.row >= gridA.length || startAddress.column > _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);
    }
    const rowRemainder = gridA.slice(startAddress.row);
    const colRemainder = rowRemainder[0].cells.slice(startAddress.column);
    const colRequired = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridB[0]);
    const rowRequired = gridB.length;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Result.value({
        rowDelta: rowRemainder.length - rowRequired,
        colDelta: colRemainder.length - colRequired
    });
};
const measureWidth = (gridA, gridB)=>{
    const colLengthA = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0]);
    const colLengthB = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridB[0]);
    return {
        rowDelta: 0,
        colDelta: colLengthA - colLengthB
    };
};
const measureHeight = (gridA, gridB)=>{
    const rowLengthA = gridA.length;
    const rowLengthB = gridB.length;
    return {
        rowDelta: rowLengthA - rowLengthB,
        colDelta: 0
    };
};
const generateElements = (amount, row, generators, isLocked)=>{
    const generator = row.section === 'colgroup' ? generators.col : generators.cell;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(amount, (idx)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generator(), true, isLocked(idx)));
};
const rowFill = (grid, amount, generators, lockedColumns)=>{
    const exampleRow = grid[grid.length - 1];
    return grid.concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(amount, ()=>{
        const generator = exampleRow.section === 'colgroup' ? generators.colgroup : generators.row;
        const row = _GridRow__WEBPACK_IMPORTED_MODULE_0__.clone(exampleRow, generator, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity);
        const elements = generateElements(row.cells.length, row, generators, (idx)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.has(lockedColumns, idx.toString()));
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.setCells(row, elements);
    }));
};
const colFill = (grid, amount, generators, startIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        const newChildren = generateElements(amount, row, generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.never);
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCells(row, startIndex, newChildren);
    });
const lockedColFill = (grid, generators, lockedColumns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(lockedColumns, (acc, colNum)=>{
            const newChild = generateElements(1, row, generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.always)[0];
            return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(acc, colNum, newChild);
        }, row);
    });
const tailor = (gridA, delta, generators)=>{
    const fillCols = delta.colDelta < 0 ? colFill : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity;
    const fillRows = delta.rowDelta < 0 ? rowFill : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity;
    const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__.getLockedColumnsFromGrid(gridA);
    const gridWidth = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0]);
    const isLastColLocked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(lockedColumns, (locked)=>locked === gridWidth - 1);
    const modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);
    // Need to recalculate locked column positions
    const newLockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__.getLockedColumnsFromGrid(modifiedCols);
    return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(newLockedColumns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.always));
};



}),
"../snooker/src/main/ts/ephox/snooker/model/GridRow.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/GridRow.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addCell: () => (addCell),
  addCells: () => (addCells),
  cellLength: () => (cellLength),
  clone: () => (clone),
  extractGridDetails: () => (extractGridDetails),
  getCell: () => (getCell),
  getCellElement: () => (getCellElement),
  mapCells: () => (mapCells),
  mutateCell: () => (mutateCell),
  setCells: () => (setCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");


const addCells = (gridRow, index, cells)=>{
    const existingCells = gridRow.cells;
    const before = existingCells.slice(0, index);
    const after = existingCells.slice(index);
    const newCells = before.concat(cells).concat(after);
    return setCells(gridRow, newCells);
};
const addCell = (gridRow, index, cell)=>addCells(gridRow, index, [
        cell
    ]);
const mutateCell = (gridRow, index, cell)=>{
    const cells = gridRow.cells;
    cells[index] = cell;
};
const setCells = (gridRow, cells)=>_api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(gridRow.element, cells, gridRow.section, gridRow.isNew);
const mapCells = (gridRow, f)=>{
    const cells = gridRow.cells;
    const r = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(cells, f);
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(gridRow.element, r, gridRow.section, gridRow.isNew);
};
const getCell = (gridRow, index)=>gridRow.cells[index];
const getCellElement = (gridRow, index)=>getCell(gridRow, index).element;
const cellLength = (gridRow)=>gridRow.cells.length;
const extractGridDetails = (grid)=>{
    const result = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.partition(grid, (row)=>row.section === 'colgroup');
    return {
        rows: result.fail,
        cols: result.pass
    };
};
const clone = (gridRow, cloneRow, cloneCell)=>{
    const newCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(gridRow.cells, cloneCell);
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(cloneRow(gridRow.element), newCells, gridRow.section, true);
};



}),
"../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  onCell: () => (onCell),
  onCells: () => (onCells),
  onMergable: () => (onMergable),
  onPaste: () => (onPaste),
  onPasteByEditor: () => (onPasteByEditor),
  onUnlockedCell: () => (onUnlockedCell),
  onUnlockedCells: () => (onUnlockedCells),
  onUnlockedMergable: () => (onUnlockedMergable),
  onUnlockedUnmergable: () => (onUnlockedUnmergable),
  onUnmergable: () => (onUnmergable),
  run: () => (run),
  toDetailList: () => (toDetailList)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_ResizeBehaviour__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../api/ResizeBehaviour */ "../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _api_TableSection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/TableSection */ "../snooker/src/main/ts/ephox/snooker/api/TableSection.ts");
/* ESM import */var _api_TableSize__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../api/TableSize */ "../snooker/src/main/ts/ephox/snooker/api/TableSize.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _operate_Redraw__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../operate/Redraw */ "../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _Transitions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");










const fromWarehouse = (warehouse, generators)=>_Transitions__WEBPACK_IMPORTED_MODULE_0__.toGrid(warehouse, generators, false);
const toDetailList = (grid)=>_Transitions__WEBPACK_IMPORTED_MODULE_0__.toDetails(grid, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq);
const findInWarehouse = (warehouse, element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findMap(warehouse.all, (r)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(r.cells, (e)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, e.element)));
const extractCells = (warehouse, target, predicate)=>{
    const details = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(target.selection, (cell)=>{
        return _api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(cell).bind((lc)=>findInWarehouse(warehouse, lc)).filter(predicate);
    });
    const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cat(details);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.someIf(cells.length > 0, cells);
};
const run = (operation, extract, adjustment, postAction, genWrappers, table, target, generators, behaviours)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.fromTable(table);
    const tableSection = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.section).getOrThunk(_api_TableSection__WEBPACK_IMPORTED_MODULE_7__.TableSection.fallback);
    const output = extract(warehouse, target).map((info)=>{
        const model = fromWarehouse(warehouse, generators);
        const result = operation(model, info, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq, genWrappers(generators), tableSection);
        const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.getLockedColumnsFromGrid(result.grid);
        const grid = toDetailList(result.grid);
        return {
            info,
            grid,
            cursor: result.cursor,
            lockedColumns
        };
    });
    return output.bind((out)=>{
        const newElements = _operate_Redraw__WEBPACK_IMPORTED_MODULE_9__.render(table, out.grid);
        const tableSizing = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.sizing).getOrThunk(()=>_api_TableSize__WEBPACK_IMPORTED_MODULE_10__.TableSize.getTableSize(table));
        const resizing = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.resize).getOrThunk(_api_ResizeBehaviour__WEBPACK_IMPORTED_MODULE_11__.preserveTable);
        adjustment(table, out.grid, out.info, {
            sizing: tableSizing,
            resize: resizing,
            section: tableSection
        });
        postAction(table);
        // Update locked cols attribute
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.remove(table, _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.LOCKED_COL_ATTR);
        if (out.lockedColumns.length > 0) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.set(table, _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.LOCKED_COL_ATTR, out.lockedColumns.join(','));
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some({
            cursor: out.cursor,
            newRows: newElements.newRows,
            newCells: newElements.newCells
        });
    });
};
const onCell = (warehouse, target)=>_api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(target.element).bind((cell)=>findInWarehouse(warehouse, cell));
const onPaste = (warehouse, target)=>_api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(target.element).bind((cell)=>findInWarehouse(warehouse, cell).map((details)=>{
            const value = {
                ...details,
                generators: target.generators,
                clipboard: target.clipboard
            };
            return value;
        }));
const onPasteByEditor = (warehouse, target)=>extractCells(warehouse, target, _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.always).map((cells)=>({
            cells,
            generators: target.generators,
            clipboard: target.clipboard
        }));
const onMergable = (_warehouse, target)=>target.mergable;
const onUnmergable = (_warehouse, target)=>target.unmergable;
const onCells = (warehouse, target)=>extractCells(warehouse, target, _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.always);
// Custom unlocked extractors
const onUnlockedCell = (warehouse, target)=>onCell(warehouse, target).filter((detail)=>!detail.isLocked);
const onUnlockedCells = (warehouse, target)=>extractCells(warehouse, target, (detail)=>!detail.isLocked);
const isUnlockedTableCell = (warehouse, cell)=>findInWarehouse(warehouse, cell).exists((detail)=>!detail.isLocked);
const allUnlocked = (warehouse, cells)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(cells, (cell)=>isUnlockedTableCell(warehouse, cell));
// If any locked columns are present in the selection, then don't want to be able to merge
const onUnlockedMergable = (warehouse, target)=>onMergable(warehouse, target).filter((mergeable)=>allUnlocked(warehouse, mergeable.cells));
// If any locked columns are present in the selection, then don't want to be able to unmerge
const onUnlockedUnmergable = (warehouse, target)=>onUnmergable(warehouse, target).filter((cells)=>allUnlocked(warehouse, cells));



}),
"../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  subgrid: () => (subgrid)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");


const getColumn = (grid, index)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row)=>{
        return _GridRow__WEBPACK_IMPORTED_MODULE_1__.getCell(row, index);
    });
};
const getRow = (grid, index)=>{
    return grid[index];
};
const findDiff = (xs, comp)=>{
    if (xs.length === 0) {
        return 0;
    }
    const first = xs[0];
    const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findIndex(xs, (x)=>{
        return !comp(first.element, x.element);
    });
    return index.getOr(xs.length);
};
/*
 * grid is the grid
 * row is the row index into the grid
 * column in the column index into the grid
 *
 * Return
 *   colspan: column span of the cell at (row, column)
 *   rowspan: row span of the cell at (row, column)
 */ const subgrid = (grid, row, column, comparator)=>{
    const gridRow = getRow(grid, row);
    const isColRow = gridRow.section === 'colgroup';
    const colspan = findDiff(gridRow.cells.slice(column), comparator);
    const rowspan = isColRow ? 1 : findDiff(getColumn(grid.slice(row), column), comparator);
    return {
        colspan,
        rowspan
    };
};



}),
"../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  insertCols: () => (insertCols),
  insertRows: () => (insertRows),
  merge: () => (merge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../operate/MergingOperations */ "../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _Fitment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Fitment */ "../snooker/src/main/ts/ephox/snooker/model/Fitment.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");






const isSpanning = (grid, row, col, comparator)=>{
    const candidate = _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(grid[row], col);
    const matching = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(comparator, candidate.element);
    const currentRow = grid[row];
    // sanity check, 1x1 has no spans
    return grid.length > 1 && _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(currentRow) > 1 && (// search left, if we're not on the left edge
    // search down, if we're not on the bottom edge
    col > 0 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(currentRow, col - 1)) || // search right, if we're not on the right edge
    col < currentRow.cells.length - 1 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(currentRow, col + 1)) || // search up, if we're not on the top edge
    row > 0 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[row + 1], col)));
};
const mergeTables = (startAddress, gridA, gridBRows, generator, comparator, lockedColumns)=>{
    // Assumes
    //  - gridA is square and gridB is square
    const startRow = startAddress.row;
    const startCol = startAddress.column;
    const mergeHeight = gridBRows.length;
    const mergeWidth = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridBRows[0]);
    const endRow = startRow + mergeHeight;
    const endCol = startCol + mergeWidth + lockedColumns.length;
    const lockedColumnObj = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(lockedColumns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.always);
    // embrace the mutation - I think this is easier to follow? To discuss.
    for(let r = startRow; r < endRow; r++){
        let skippedCol = 0;
        for(let c = startCol; c < endCol; c++){
            if (lockedColumnObj[c]) {
                skippedCol++;
                continue;
            }
            if (isSpanning(gridA, r, c, comparator)) {
                // mutation within mutation, it's mutatception
                _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.unmerge(gridA, _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(gridA[r], c), comparator, generator.cell);
            }
            const gridBColIndex = c - startCol - skippedCol;
            const newCell = _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(gridBRows[r - startRow], gridBColIndex);
            // This can't be a col element at this point so we can cast it to a cell
            const newCellElm = newCell.element;
            const replacement = generator.replace(newCellElm);
            _GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(gridA[r], c, _api_Structs__WEBPACK_IMPORTED_MODULE_4__.elementnew(replacement, true, newCell.isLocked));
        }
    }
    return gridA;
};
const getValidStartAddress = (currentStartAddress, grid, lockedColumns)=>{
    const gridColLength = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(grid[0]);
    /*
    When we paste from a table without colgroups to a table that has them, we need to ensure we are inserting them at
    the correct row index (the `col`s are treated as cells in the Structs.RowCells array).

    To do this, we get the number of `col`s in the destination table and add that to the startAddress row.
  */ const adjustedRowAddress = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).cols.length + currentStartAddress.row;
    const possibleColAddresses = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(gridColLength - currentStartAddress.column, (num)=>num + currentStartAddress.column);
    // Find a starting column address that isn't a locked column
    const validColAddress = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(possibleColAddresses, (num)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(lockedColumns, (col)=>col !== num)).getOr(gridColLength - 1);
    return {
        row: adjustedRowAddress,
        column: validColAddress
    };
};
const getLockedColumnsWithinBounds = (startAddress, rows, lockedColumns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.filter(lockedColumns, (colNum)=>colNum >= startAddress.column && colNum <= _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]) + startAddress.column);
const merge = (startAddress, gridA, gridB, generator, comparator)=>{
    const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(gridA);
    const validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);
    /*
    We always remove the cols (extract the rows) from the table being pasted. This ensures that if we are pasting from a table with colgroups into a table
    without them, we don't insert the `col` elements as if they were `td`s
  */ const gridBRows = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(gridB).rows;
    const lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, lockedColumns);
    const result = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measure(validStartAddress, gridA, gridBRows);
    /*
    Need to subtract extra delta for locked columns between startAddress and the startAddress + gridB column count as
    locked column cells cannot be merged into. Therefore, extra column cells need to be added to gridA to allow gridB cells to be merged
  */ return result.map((diff)=>{
        const delta = {
            ...diff,
            colDelta: diff.colDelta - lockedColumnsWithinBounds.length
        };
        const fittedGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, delta, generator);
        // Need to recalculate lockedColumnsWithinBounds as tailoring may have inserted columns before last locked column which changes the locked index
        const newLockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(fittedGrid);
        const newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, newLockedColumns);
        return mergeTables(validStartAddress, fittedGrid, gridBRows, generator, comparator, newLockedColumnsWithinBounds);
    });
};
const insertCols = (index, gridA, gridB, generator, comparator)=>{
    _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.splitCols(gridA, index, comparator, generator.cell);
    const delta = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureHeight(gridB, gridA);
    const fittedNewGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridB, delta, generator);
    const secondDelta = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureHeight(gridA, fittedNewGrid);
    const fittedOldGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, secondDelta, generator);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(fittedOldGrid, (gridRow, i)=>{
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCells(gridRow, index, fittedNewGrid[i].cells);
    });
};
/*
  Inserting rows with locked columns
  - Tailor gridA first (this needs to be done first as the position of the locked columns may change when tailoring gridA and the location of the locked columns needs to be stable before tailoring gridB)
    - measure delta between gridA and gridB (pasted rows) - if negative colDelta, gridA needs extra columns added to match gridB
    - need to calculate how many columns in gridB cannot be directly inserted into gridA - this is how many extra columns need to be added to gridA (this consideres the fact locked column cannot be inserted into)
      - nonLockedGridA + lockedGridA - gridB = colDelta (By subtracting locked column count, can get required diff)
    - tailor gridA by adding the required extra columns if necessary either at the end of gridA or before the last column depending on whether it is locked
  - Recalculate where the locked columns are in gridA after tailoring
  - Measure and determine if extra columns need to be added to gridB (locked columns should not count towards the delta as colFilling (adding extra columns) for locked columns is handled separately)
  - Do a lockedColFill on gridB
  - Tailor gridB by adding extra columns to end of gridB if required
*/ const insertRows = (index, gridA, gridB, generator, comparator)=>{
    _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.splitRows(gridA, index, comparator, generator.cell);
    const locked = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(gridA);
    const diff = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureWidth(gridA, gridB);
    const delta = {
        ...diff,
        colDelta: diff.colDelta - locked.length
    };
    const fittedOldGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, delta, generator);
    const { cols: oldCols, rows: oldRows } = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(fittedOldGrid);
    const newLocked = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(fittedOldGrid);
    const secondDiff = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureWidth(gridB, gridA);
    // Don't want the locked columns to count towards to the colDelta as column filling for locked columns is handled separately
    const secondDelta = {
        ...secondDiff,
        colDelta: secondDiff.colDelta + newLocked.length
    };
    const fittedGridB = _Fitment__WEBPACK_IMPORTED_MODULE_6__.lockedColFill(gridB, generator, newLocked);
    const fittedNewGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(fittedGridB, secondDelta, generator);
    return [
        ...oldCols,
        ...oldRows.slice(0, index),
        ...fittedNewGrid,
        ...oldRows.slice(index, oldRows.length)
    ];
};



}),
"../snooker/src/main/ts/ephox/snooker/model/Transitions.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/Transitions.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  toDetails: () => (toDetails),
  toGrid: () => (toGrid)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _TableGrid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableGrid */ "../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts");




const toDetails = (grid, comparator)=>{
    const seen = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(row.cells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.never));
    const updateSeen = (rowIndex, columnIndex, rowspan, colspan)=>{
        for(let row = rowIndex; row < rowIndex + rowspan; row++){
            for(let column = columnIndex; column < columnIndex + colspan; column++){
                seen[row][column] = true;
            }
        }
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row, rowIndex)=>{
        const details = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.bind(row.cells, (cell, columnIndex)=>{
            // if we have seen this one, then skip it.
            if (seen[rowIndex][columnIndex] === false) {
                const result = _TableGrid__WEBPACK_IMPORTED_MODULE_2__.subgrid(grid, rowIndex, columnIndex, comparator);
                updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);
                return [
                    _api_Structs__WEBPACK_IMPORTED_MODULE_3__.detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)
                ];
            } else {
                return [];
            }
        });
        return _api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowdetailnew(row.element, details, row.section, row.isNew);
    });
};
const toGrid = (warehouse, generators, isNew)=>{
    const grid = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(warehouse.colgroups, (colgroup)=>{
        const colgroupCols = [];
        // This will add missing cols as well as clamp the number of cols to the max number of actual columns
        // Note: Spans on cols are unsupported so clamping cols may result in a span on a col element being incorrect
        for(let columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++){
            const element = _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.getColumnAt(warehouse, columnIndex).map((column)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(column.element, isNew, false)).getOrThunk(()=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generators.colGap(), true, false));
            colgroupCols.push(element);
        }
        grid.push(_api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowcells(colgroup.element, colgroupCols, 'colgroup', isNew));
    });
    for(let rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++){
        const rowCells = [];
        for(let columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++){
            // The element is going to be the element at that position, or a newly generated gap.
            const element = _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.getAt(warehouse, rowIndex, columnIndex).map((item)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(item.element, isNew, item.isLocked)).getOrThunk(()=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generators.gap(), true, false));
            rowCells.push(element);
        }
        const rowDetail = warehouse.all[rowIndex];
        const row = _api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowcells(rowDetail.element, rowCells, rowDetail.section, isNew);
        grid.push(row);
    }
    return grid;
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts": 
/*!*************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts ***!
  \*************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  merge: () => (merge),
  splitCols: () => (splitCols),
  splitRows: () => (splitRows),
  unmerge: () => (unmerge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



// substitution: () -> item
const merge = (grid, bounds, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    // Mutating. Do we care about the efficiency gain?
    if (rows.length === 0) {
        return grid;
    }
    for(let i = bounds.startRow; i <= bounds.finishRow; i++){
        for(let j = bounds.startCol; j <= bounds.finishCol; j++){
            // We can probably simplify this again now that we aren't reusing merge.
            const row = rows[i];
            const isLocked = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j).isLocked;
            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(), false, isLocked));
        }
    }
    return grid;
};
// substitution: () -> item
const unmerge = (grid, target, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    // Mutating. Do we care about the efficiency gain?
    let first = true;
    // tslint:disable-next-line:prefer-for-of
    for(let i = 0; i < rows.length; i++){
        for(let j = 0; j < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]); j++){
            const row = rows[i];
            const currentCell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j);
            const currentCellElm = currentCell.element;
            const isToReplace = comparator(currentCellElm, target);
            if (isToReplace && !first) {
                _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(), true, currentCell.isLocked));
            } else if (isToReplace) {
                first = false;
            }
        }
    }
    return grid;
};
const uniqueCells = (row, comparator)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(row, (rest, cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(rest, (currentCell)=>{
            return comparator(currentCell.element, cell.element);
        }) ? rest : rest.concat([
            cell
        ]);
    }, []);
};
const splitCols = (grid, index, comparator, substitution)=>{
    // We don't need to split rows if we're inserting at the first or last row of the old table
    if (index > 0 && index < grid[0].cells.length) {
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(grid, (row)=>{
            const prevCell = row.cells[index - 1];
            let offset = 0;
            const substitute = substitution();
            while(row.cells.length > index + offset && comparator(prevCell.element, row.cells[index + offset].element)){
                _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, index + offset, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitute, true, row.cells[index + offset].isLocked));
                offset++;
            }
        });
    }
    return grid;
};
const splitRows = (grid, index, comparator, substitution)=>{
    // We don't need to split rows if we're inserting at the first or last row of the old table
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    if (index > 0 && index < rows.length) {
        const rowPrevCells = rows[index - 1].cells;
        const cells = uniqueCells(rowPrevCells, comparator);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(cells, (cell)=>{
            // only make a sub when we have to
            let replacement = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
            for(let i = index; i < rows.length; i++){
                for(let j = 0; j < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]); j++){
                    const row = rows[i];
                    const current = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j);
                    const isToReplace = comparator(current.element, cell.element);
                    if (isToReplace) {
                        if (replacement.isNone()) {
                            replacement = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(substitution());
                        }
                        replacement.each((sub)=>{
                            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(sub, true, current.isLocked));
                        });
                    }
                }
            }
        });
    }
    return grid;
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts": 
/*!******************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts ***!
  \******************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  deleteColumnsAt: () => (deleteColumnsAt),
  deleteRowsAt: () => (deleteRowsAt),
  insertColumnAt: () => (insertColumnAt),
  insertRowAt: () => (insertRowAt),
  splitCellIntoColumns: () => (splitCellIntoColumns),
  splitCellIntoRows: () => (splitCellIntoRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



const cloneRow = (row, cloneCell, comparator, substitution)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.clone(row, (elem)=>substitution(elem, comparator), cloneCell);
// substitution :: (item, comparator) -> item
// example is the location of the cursor (the row index)
// index is the insert position (at - or after - example) (the row index)
const insertRowAt = (grid, index, example, comparator, substitution)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const before = rows.slice(0, index);
    const after = rows.slice(index);
    const newRow = cloneRow(rows[example], (ex, c)=>{
        const withinSpan = index > 0 && index < rows.length && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(rows[index - 1], c), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(rows[index], c));
        const ret = withinSpan ? _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(rows[index], c) : _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(ex.element, comparator), true, ex.isLocked);
        return ret;
    }, comparator, substitution);
    return [
        ...cols,
        ...before,
        newRow,
        ...after
    ];
};
const getElementFor = (row, column, section, withinSpan, example, comparator, substitution)=>{
    if (section === 'colgroup' || !withinSpan) {
        const cell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, example);
        // locked is explicitly set to false so the newly inserted column doesn't inherit example column locked state
        return _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(cell.element, comparator), true, false);
    } else {
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, column);
    }
};
// substitution :: (item, comparator) -> item
// example is the location of the cursor (the column index)
// index is the insert position (at - or after - example) (the column index)
const insertColumnAt = (grid, index, example, comparator, substitution)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        const withinSpan = index > 0 && index < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(row) && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index - 1), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index));
        const sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(row, index, sub);
    });
// substitution :: (item, comparator) -> item
// Returns:
// - a new grid with the cell at coords [exampleRow, exampleCol] split into two cells (the
//   new cell follows, and is empty), and
// - the other cells in that column set to span the split cell.
const splitCellIntoColumns = (grid, exampleRow, exampleCol, comparator, substitution)=>{
    const index = exampleCol + 1; // insert after
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row, i)=>{
        const isTargetCell = i === exampleRow;
        const cell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, exampleCol);
        const sub = isTargetCell ? _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(cell.element, comparator), true, cell.isLocked) : cell;
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(row, index, sub);
    });
};
// substitution :: (item, comparator) -> item
// Returns:
// - a new grid with the cell at coords [exampleRow, exampleCol] split into two cells (the
//   new cell below, and is empty), and
// - the other cells in that row set to span the split cell.
const splitCellIntoRows = (grid, exampleRow, exampleCol, comparator, substitution)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const index = exampleRow + 1; // insert after
    const before = rows.slice(0, index);
    const after = rows.slice(index);
    const newRow = cloneRow(rows[exampleRow], (ex, i)=>{
        const isTargetCell = i === exampleCol;
        return isTargetCell ? _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(ex.element, comparator), true, ex.isLocked) : ex;
    }, comparator, substitution);
    return [
        ...cols,
        ...before,
        newRow,
        ...after
    ];
};
const deleteColumnsAt = (grid, columns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.bind(grid, (row)=>{
        const existingCells = row.cells;
        const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldr(columns, (acc, column)=>column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc, existingCells);
        return cells.length > 0 ? [
            _api_Structs__WEBPACK_IMPORTED_MODULE_1__.rowcells(row.element, cells, row.section, row.isNew)
        ] : [];
    });
const deleteRowsAt = (grid, start, finish)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    return [
        ...cols,
        ...rows.slice(0, start),
        ...rows.slice(finish + 1)
    ];
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  render: () => (render)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");


const setIfNot = (element, property, value, ignore)=>{
    if (value === ignore) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.remove(element, property);
    } else {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.set(element, property, value);
    }
};
const insert = (table, selector, element)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.last(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.children(table, selector)).fold(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.prepend(table, element), (child)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.after(child, element));
};
const generateSection = (table, sectionName)=>{
    const section = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.child(table, sectionName).getOrThunk(()=>{
        const newSection = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag(sectionName, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.owner(table).dom);
        if (sectionName === 'thead') {
            insert(table, 'caption,colgroup', newSection);
        } else if (sectionName === 'colgroup') {
            insert(table, 'caption', newSection);
        } else {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(table, newSection);
        }
        return newSection;
    });
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.empty(section);
    return section;
};
const render = (table, grid)=>{
    const newRows = [];
    const newCells = [];
    const syncRows = (gridSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(gridSection, (row)=>{
            if (row.isNew) {
                newRows.push(row.element);
            }
            const tr = row.element;
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.empty(tr);
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(row.cells, (cell)=>{
                if (cell.isNew) {
                    newCells.push(cell.element);
                }
                setIfNot(cell.element, 'colspan', cell.colspan, 1);
                setIfNot(cell.element, 'rowspan', cell.rowspan, 1);
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(tr, cell.element);
            });
            return tr;
        });
    // Assumption we should only ever have 1 colgroup. The spec allows for multiple, however it's currently unsupported
    const syncColGroup = (gridSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(gridSection, (colGroup)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(colGroup.cells, (col)=>{
                setIfNot(col.element, 'span', col.colspan, 1);
                return col.element;
            }));
    const renderSection = (gridSection, sectionName)=>{
        const section = generateSection(table, sectionName);
        const sync = sectionName === 'colgroup' ? syncColGroup : syncRows;
        const sectionElems = sync(gridSection);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.append(section, sectionElems);
    };
    const removeSection = (sectionName)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.child(table, sectionName).each(_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove);
    };
    const renderOrRemoveSection = (gridSection, sectionName)=>{
        if (gridSection.length > 0) {
            renderSection(gridSection, sectionName);
        } else {
            removeSection(sectionName);
        }
    };
    const headSection = [];
    const bodySection = [];
    const footSection = [];
    const columnGroupsSection = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(grid, (row)=>{
        switch(row.section){
            case 'thead':
                headSection.push(row);
                break;
            case 'tbody':
                bodySection.push(row);
                break;
            case 'tfoot':
                footSection.push(row);
                break;
            case 'colgroup':
                columnGroupsSection.push(row);
                break;
        }
    });
    renderOrRemoveSection(columnGroupsSection, 'colgroup');
    renderOrRemoveSection(headSection, 'thead');
    renderOrRemoveSection(bodySection, 'tbody');
    renderOrRemoveSection(footSection, 'tfoot');
    return {
        newRows,
        newCells
    };
};
const copy = (grid)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(grid, (row)=>{
        // Shallow copy the row element
        const tr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.shallow(row.element);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(row.cells, (cell)=>{
            const clonedCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.deep(cell.element);
            setIfNot(clonedCell, 'colspan', cell.colspan, 1);
            setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(tr, clonedCell);
        });
        return tr;
    });



}),
"../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts": 
/*!***************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts ***!
  \***************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  replaceCell: () => (replaceCell),
  replaceCells: () => (replaceCells),
  replaceColumn: () => (replaceColumn),
  replaceColumns: () => (replaceColumns),
  replaceRow: () => (replaceRow),
  replaceRows: () => (replaceRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");






const notInStartRow = (grid, rowIndex, colIndex, comparator)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex], colIndex) !== undefined && rowIndex > 0 && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex - 1], colIndex), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex], colIndex));
const notInStartColumn = (row, index, comparator)=>index > 0 && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index - 1), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index));
// This checks for cells that aren't in the "start" position as the model will create duplicate element references for
// each column/row that the cell spans. As an example, for a merged cell with rowspan="2", the cell in the second row is a duplicate
// of the cell in the first row.
const isDuplicatedCell = (grid, rowIndex, colIndex, comparator)=>notInStartRow(grid, rowIndex, colIndex, comparator) || notInStartColumn(grid[rowIndex], colIndex, comparator);
const rowReplacerPredicate = (targetRow, columnHeaders)=>{
    const entireTableIsHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(columnHeaders, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity) && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(targetRow.cells);
    return entireTableIsHeader ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always : (cell, _rowIndex, colIndex)=>{
        const type = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(cell.element);
        return !(type === 'th' && columnHeaders[colIndex]);
    };
};
const columnReplacePredicate = (targetColumn, rowHeaders)=>{
    const entireTableIsHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(rowHeaders, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity) && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(targetColumn);
    return entireTableIsHeader ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always : (cell, rowIndex, _colIndex)=>{
        const type = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(cell.element);
        return !(type === 'th' && rowHeaders[rowIndex]);
    };
};
const determineScope = (applyScope, cell, newScope, isInHeader)=>{
    const hasSpan = (scope)=>scope === 'row' ? _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.hasRowspan(cell) : _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.hasColspan(cell);
    const getScope = (scope)=>hasSpan(scope) ? `${scope}group` : scope;
    if (applyScope) {
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCell)(cell) ? getScope(newScope) : null;
    } else if (isInHeader && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCell)(cell)) {
        // The cell is still in a header row/column so ensure the right scope is reverted to
        const oppositeScope = newScope === 'row' ? 'col' : 'row';
        return getScope(oppositeScope);
    } else {
        // No longer a header so ensure the scope is removed
        return null;
    }
};
const rowScopeGenerator = (applyScope, columnHeaders)=>(cell, rowIndex, columnIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(determineScope(applyScope, cell.element, 'col', columnHeaders[columnIndex]));
const columnScopeGenerator = (applyScope, rowHeaders)=>(cell, rowIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(determineScope(applyScope, cell.element, 'row', rowHeaders[rowIndex]));
const replace = (cell, comparator, substitute)=>_api_Structs__WEBPACK_IMPORTED_MODULE_7__.elementnew(substitute(cell.element, comparator), true, cell.isLocked);
const replaceIn = (grid, targets, comparator, substitute, replacer, genScope, shouldReplace)=>{
    const isTarget = (cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.exists(targets, (target)=>{
            return comparator(cell.element, target.element);
        });
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(grid, (row, rowIndex)=>{
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mapCells(row, (cell, colIndex)=>{
            if (isTarget(cell)) {
                const newCell = shouldReplace(cell, rowIndex, colIndex) ? replacer(cell, comparator, substitute) : cell;
                // Update the scope
                genScope(newCell, rowIndex, colIndex).each((scope)=>{
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.setOptions(newCell.element, {
                        scope: _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(scope)
                    });
                });
                return newCell;
            } else {
                return cell;
            }
        });
    });
};
const getColumnCells = (rows, columnIndex, comparator)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(rows, (row, i)=>{
        // check if already added.
        return isDuplicatedCell(rows, i, columnIndex, comparator) ? [] : [
            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, columnIndex)
        ];
    });
const getRowCells = (rows, rowIndex, comparator)=>{
    const targetRow = rows[rowIndex];
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(targetRow.cells, (item, i)=>{
        // Check that we haven't already added this one.
        return isDuplicatedCell(rows, rowIndex, i, comparator) ? [] : [
            item
        ];
    });
};
const replaceColumn = (grid, index, applyScope, comparator, substitution)=>replaceColumns(grid, [
        index
    ], applyScope, comparator, substitution);
const replaceColumns = (grid, indexes, applyScope, comparator, substitution)=>{
    // Make this efficient later.
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    const targets = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(indexes, (index)=>getColumnCells(rows, index, comparator));
    const rowHeaders = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rows, (row)=>(0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(row.cells));
    const shouldReplaceCell = columnReplacePredicate(targets, rowHeaders);
    const scopeGenerator = columnScopeGenerator(applyScope, rowHeaders);
    return replaceIn(grid, targets, comparator, substitution, replace, scopeGenerator, shouldReplaceCell);
};
const replaceRow = (grid, index, section, applyScope, comparator, substitution, tableSection)=>replaceRows(grid, [
        index
    ], section, applyScope, comparator, substitution, tableSection);
const replaceRows = (grid, indexes, section, applyScope, comparator, substitution, tableSection)=>{
    const { cols, rows } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const targetRow = rows[indexes[0]];
    const targets = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(indexes, (index)=>getRowCells(rows, index, comparator));
    const columnHeaders = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(targetRow.cells, (_cell, index)=>(0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(getColumnCells(rows, index, comparator)));
    // Transform and replace the target row
    // TODO: TINY-7776: This doesn't deal with rowspans which can break the layout when moving to a new section
    const newRows = [
        ...rows
    ];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(indexes, (index)=>{
        newRows[index] = tableSection.transformRow(rows[index], section);
    });
    const newGrid = [
        ...cols,
        ...newRows
    ];
    const shouldReplaceCell = rowReplacerPredicate(targetRow, columnHeaders);
    const scopeGenerator = rowScopeGenerator(applyScope, columnHeaders);
    return replaceIn(newGrid, targets, comparator, substitution, tableSection.transformCell, scopeGenerator, shouldReplaceCell);
};
const replaceCell = (grid, detail, comparator, substitution)=>replaceCells(grid, [
        detail
    ], comparator, substitution);
const replaceCells = (grid, details, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    const targetCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(details, (detail)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(rows[detail.row], detail.column));
    return replaceIn(grid, targetCells, comparator, substitution, replace, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.none, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  adjustAndRedistributeWidths: () => (adjustAndRedistributeWidths),
  adjustHeight: () => (adjustHeight),
  adjustWidth: () => (adjustWidth),
  adjustWidthTo: () => (adjustWidthTo)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _calc_Deltas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../calc/Deltas */ "../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _ColumnSizes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _Recalculations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Recalculations */ "../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts");
/* ESM import */var _Sizes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");







const sumUp = (newSize)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldr(newSize, (b, a)=>b + a, 0);
const recalculate = (warehouse, widths)=>{
    if (_api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.hasColumns(warehouse)) {
        return _Recalculations__WEBPACK_IMPORTED_MODULE_2__.recalculateWidthForColumns(warehouse, widths);
    } else {
        return _Recalculations__WEBPACK_IMPORTED_MODULE_2__.recalculateWidthForCells(warehouse, widths);
    }
};
const recalculateAndApply = (warehouse, widths, tableSize)=>{
    // Set the width of each cell based on the column widths
    const newSizes = recalculate(warehouse, widths);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(newSizes, (cell)=>{
        tableSize.setElementWidth(cell.element, cell.width);
    });
};
const adjustWidth = (table, delta, index, resizing, tableSize)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.fromTable(table);
    const step = tableSize.getCellDelta(delta);
    const widths = tableSize.getWidths(warehouse, tableSize);
    const isLastColumn = index === warehouse.grid.columns - 1;
    const clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);
    // Calculate all of the new widths for columns
    const deltas = _calc_Deltas__WEBPACK_IMPORTED_MODULE_3__.determine(widths, index, clampedStep, tableSize, resizing);
    const newWidths = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(deltas, (dx, i)=>dx + widths[i]);
    recalculateAndApply(warehouse, newWidths, tableSize);
    resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);
};
const adjustHeight = (table, delta, index)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.fromTable(table);
    const heights = _ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelHeights(warehouse, table);
    const newHeights = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(heights, (dy, i)=>index === i ? Math.max(delta + dy, _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.minHeight()) : dy);
    const newRowSizes = _Recalculations__WEBPACK_IMPORTED_MODULE_2__.matchRowHeight(warehouse, newHeights);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(newRowSizes, (row)=>{
        _Sizes__WEBPACK_IMPORTED_MODULE_6__.setHeight(row.element, row.height);
    });
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(_api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.justCells(warehouse), (cell)=>{
        _Sizes__WEBPACK_IMPORTED_MODULE_6__.removeHeight(cell.element);
    });
    const total = sumUp(newHeights);
    _Sizes__WEBPACK_IMPORTED_MODULE_6__.setHeight(table, total);
};
// Using the width of the added/removed columns gathered on extraction (pixelDelta), get and apply the new column sizes and overall table width delta
const adjustAndRedistributeWidths = (_table, list, details, tableSize, resizeBehaviour)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.generate(list);
    const sizes = tableSize.getWidths(warehouse, tableSize);
    const tablePixelWidth = tableSize.pixelWidth();
    const { newSizes, delta } = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative);
    recalculateAndApply(warehouse, newSizes, tableSize);
    tableSize.adjustTableWidth(delta);
};
// Ensure that the width of table cells match the passed in table information.
const adjustWidthTo = (_table, list, _info, tableSize)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.generate(list);
    const widths = tableSize.getWidths(warehouse, tableSize);
    recalculateAndApply(warehouse, widths, tableSize);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  height: () => (height),
  ltr: () => (ltr),
  rtl: () => (rtl),
  width: () => (width)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts");


const rowInfo = (row, y)=>({
        row,
        y
    });
const colInfo = (col, x)=>({
        col,
        x
    });
const rtlEdge = (cell)=>{
    const pos = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell);
    return pos.left + _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getOuter(cell);
};
const ltrEdge = (cell)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell).left;
};
const getLeftEdge = (index, cell)=>{
    return colInfo(index, ltrEdge(cell));
};
const getRightEdge = (index, cell)=>{
    return colInfo(index, rtlEdge(cell));
};
const getTop = (cell)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell).top;
};
const getTopEdge = (index, cell)=>{
    return rowInfo(index, getTop(cell));
};
const getBottomEdge = (index, cell)=>{
    return rowInfo(index, getTop(cell) + _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getOuter(cell));
};
const findPositions = (getInnerEdge, getOuterEdge, array)=>{
    if (array.length === 0) {
        return [];
    }
    const lines = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(array.slice(1), (cellOption, index)=>{
        return cellOption.map((cell)=>{
            return getInnerEdge(index, cell);
        });
    });
    const lastLine = array[array.length - 1].map((cell)=>{
        return getOuterEdge(array.length - 1, cell);
    });
    return lines.concat([
        lastLine
    ]);
};
const negate = (step)=>{
    return -step;
};
const height = {
    delta: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity,
    positions: (optElements)=>findPositions(getTopEdge, getBottomEdge, optElements),
    edge: getTop
};
const ltr = {
    delta: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity,
    edge: ltrEdge,
    positions: (optElements)=>findPositions(getLeftEdge, getRightEdge, optElements)
};
const rtl = {
    delta: negate,
    edge: rtlEdge,
    positions: (optElements)=>findPositions(getRightEdge, getLeftEdge, optElements)
};
const detect = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.onDirection(ltr, rtl);
const width = {
    delta: (amount, table)=>detect(table).delta(amount, table),
    positions: (cols, table)=>detect(table).positions(cols, table),
    edge: (cell)=>detect(cell).edge(cell)
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getPercentageWidths: () => (getPercentageWidths),
  getPixelHeights: () => (getPixelHeights),
  getPixelWidths: () => (getPixelWidths),
  getRawHeights: () => (getRawHeights),
  getRawWidths: () => (getRawWidths)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lookup/Blocks */ "../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _util_Util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/Util */ "../snooker/src/main/ts/ephox/snooker/util/Util.ts");
/* ESM import */var _BarPositions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BarPositions */ "../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts");
/* ESM import */var _Sizes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");









const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const getRawW = (cell)=>{
    return _Sizes__WEBPACK_IMPORTED_MODULE_1__.getRawWidth(cell).getOrThunk(()=>_Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelWidth(cell) + 'px');
};
const getRawH = (cell)=>{
    return _Sizes__WEBPACK_IMPORTED_MODULE_1__.getRawHeight(cell).getOrThunk(()=>_Sizes__WEBPACK_IMPORTED_MODULE_1__.getHeight(cell) + 'px');
};
const justCols = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_api_Warehouse__WEBPACK_IMPORTED_MODULE_3__.Warehouse.justColumns(warehouse), (column)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.from(column.element));
// Col elements don't have valid computed widths/positions in all browsers, so treat them as invalid in that case
const isValidColumn = (cell)=>{
    const browser = _ephox_sand__WEBPACK_IMPORTED_MODULE_5__.detect().browser;
    const supportsColWidths = browser.isChromium() || browser.isFirefox();
    return isCol(cell) ? supportsColWidths : true;
};
const getDimension = (cellOpt, index, backups, filter, getter, fallback)=>cellOpt.filter(filter).fold(// Can't just read the width of a cell, so calculate.
    ()=>fallback(_util_Util__WEBPACK_IMPORTED_MODULE_6__.deduce(backups, index)), (cell)=>getter(cell));
const getWidthFrom = (warehouse, table, getWidth, fallback)=>{
    // Only treat a cell as being valid for a column representation if it has a raw width, otherwise we won't be able to calculate the expected width.
    // This is needed as one cell may have a width but others may not, so we need to try and use one with a specified width first.
    const columnCells = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__.columns(warehouse);
    const columns = _api_Warehouse__WEBPACK_IMPORTED_MODULE_3__.Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;
    const backups = [
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.width.edge(table))
    ].concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.width.positions(columnCells, table), (pos)=>pos.map((p)=>p.x)));
    // Only use the width of cells that have no column span (or colspan 1)
    const colFilter = _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.not(_util_CellUtils__WEBPACK_IMPORTED_MODULE_10__.hasColspan);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(columns, (cellOption, c)=>{
        return getDimension(cellOption, c, backups, colFilter, (column)=>{
            if (isValidColumn(column)) {
                return getWidth(column);
            } else {
                // Invalid column so fallback to trying to get the computed width from the cell
                const cell = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.bindFrom(columnCells[c], _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.identity);
                return getDimension(cell, c, backups, colFilter, (cell)=>fallback(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(Math.round(_ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.get(cell)))), fallback);
            }
        }, fallback);
    });
};
const getDeduced = (deduced)=>{
    return deduced.map((d)=>{
        return d + 'px';
    }).getOr('');
};
const getRawWidths = (warehouse, table)=>{
    return getWidthFrom(warehouse, table, getRawW, getDeduced);
};
const getPercentageWidths = (warehouse, table, tableSize)=>{
    return getWidthFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getPercentageWidth, (deduced)=>{
        return deduced.fold(()=>{
            return tableSize.minCellWidth();
        }, (cellWidth)=>{
            return cellWidth / tableSize.pixelWidth() * 100;
        });
    });
};
const getPixelWidths = (warehouse, table, tableSize)=>{
    return getWidthFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelWidth, (deduced)=>{
        // Minimum cell width when all else fails.
        return deduced.getOrThunk(tableSize.minCellWidth);
    });
};
const getHeightFrom = (warehouse, table, getHeight, fallback)=>{
    const rowCells = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__.rows(warehouse);
    const rows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(warehouse.all, (r)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(r.element));
    const backups = [
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.height.edge(table))
    ].concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.height.positions(rowCells, table), (pos)=>pos.map((p)=>p.y)));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(rows, (row, i)=>getDimension(row, i, backups, _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.always, getHeight, fallback));
};
const getPixelHeights = (warehouse, table)=>{
    return getHeightFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getHeight, (deduced)=>{
        return deduced.getOrThunk(_util_CellUtils__WEBPACK_IMPORTED_MODULE_10__.minHeight);
    });
};
const getRawHeights = (warehouse, table)=>{
    return getHeightFrom(warehouse, table, getRawH, getDeduced);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts": 
/*!*********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  matchRowHeight: () => (matchRowHeight),
  recalculateHeightForCells: () => (recalculateHeightForCells),
  recalculateWidthForCells: () => (recalculateWidthForCells),
  recalculateWidthForColumns: () => (recalculateWidthForColumns)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


// Returns the sum of elements of measures in the half-open range [start, end)
// Measures is in pixels, treated as an array of integers or integers in string format.
// NOTE: beware of accumulated rounding errors over multiple columns - could result in noticeable table width changes
const total = (start, end, measures)=>{
    let r = 0;
    for(let i = start; i < end; i++){
        r += measures[i] !== undefined ? measures[i] : 0;
    }
    return r;
};
// Returns an array of all cells in warehouse with updated cell-widths, using
// the array 'widths' of the representative widths of each column of the table 'warehouse'
const recalculateWidthForCells = (warehouse, widths)=>{
    const all = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justCells(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(all, (cell)=>{
        // width of a spanning cell is sum of widths of representative columns it spans
        const width = total(cell.column, cell.column + cell.colspan, widths);
        return {
            element: cell.element,
            width,
            colspan: cell.colspan
        };
    });
};
const recalculateWidthForColumns = (warehouse, widths)=>{
    const groups = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justColumns(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(groups, (column, index)=>({
            element: column.element,
            width: widths[index],
            colspan: column.colspan
        }));
};
const recalculateHeightForCells = (warehouse, heights)=>{
    const all = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justCells(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(all, (cell)=>{
        const height = total(cell.row, cell.row + cell.rowspan, heights);
        return {
            element: cell.element,
            height,
            rowspan: cell.rowspan
        };
    });
};
const matchRowHeight = (warehouse, heights)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(warehouse.all, (row, i)=>{
        return {
            element: row.element,
            height: heights[i]
        };
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts": 
/*!************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getGenericWidth: () => (getGenericWidth),
  getHeight: () => (getHeight),
  getPercentTableHeight: () => (getPercentTableHeight),
  getPercentTableWidth: () => (getPercentTableWidth),
  getPercentageWidth: () => (getPercentageWidth),
  getPixelTableHeight: () => (getPixelTableHeight),
  getPixelTableWidth: () => (getPixelTableWidth),
  getPixelWidth: () => (getPixelWidth),
  getRawHeight: () => (getRawHeight),
  getRawWidth: () => (getRawWidth),
  isNoneSizing: () => (isNoneSizing),
  isPercentSizing: () => (isPercentSizing),
  isPixelSizing: () => (isPixelSizing),
  percentageBasedSizeRegex: () => (percentageBasedSizeRegex),
  pixelBasedSizeRegex: () => (pixelBasedSizeRegex),
  removeHeight: () => (removeHeight),
  setGenericWidth: () => (setGenericWidth),
  setHeight: () => (setHeight),
  setPercentageWidth: () => (setPercentageWidth),
  setPixelWidth: () => (setPixelWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");




const rPercentageBasedSizeRegex = /(\d+(\.\d+)?)%/;
const rPixelBasedSizeRegex = /(\d+(\.\d+)?)px|em/;
const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const isRow = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('tr');
const getPercentSize = (elm, outerGetter, innerGetter)=>{
    const relativeParent = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parentElement(elm).getOrThunk(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getBody(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.owner(elm)));
    return outerGetter(elm) / innerGetter(relativeParent) * 100;
};
const setPixelWidth = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + 'px');
};
const setPercentageWidth = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + '%');
};
const setHeight = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'height', amount + 'px');
};
const removeHeight = (cell)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.remove(cell, 'height');
};
const getHeightValue = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getRuntime(cell) + 'px';
const convert = (cell, number, getter, setter)=>{
    const newSize = _api_TableLookup__WEBPACK_IMPORTED_MODULE_5__.table(cell).map((table)=>{
        const total = getter(table);
        return Math.floor(number / 100.0 * total);
    }).getOr(number);
    setter(cell, newSize);
    return newSize;
};
const normalizePixelSize = (value, cell, getter, setter)=>{
    const number = parseFloat(value);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.endsWith(value, '%') && _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;
};
const getTotalHeight = (cell)=>{
    const value = getHeightValue(cell);
    if (!value) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(cell);
    }
    return normalizePixelSize(value, cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get, setHeight);
};
const get = (cell, type, f)=>{
    const v = f(cell);
    const span = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_7__.getSpan)(cell, type);
    return v / span;
};
const getRaw = (element, prop)=>{
    // Try to use the style first, otherwise attempt to get the value from an attribute
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.getRaw(element, prop).orThunk(()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.getOpt(element, prop).map((val)=>val + 'px');
    });
};
const getRawWidth = (element)=>getRaw(element, 'width');
const getRawHeight = (element)=>getRaw(element, 'height');
// Get a percentage size for a percentage parent table
const getPercentageWidth = (cell)=>getPercentSize(cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getInner);
const getPixelWidth = (cell)=>// For col elements use the computed width as col elements aren't affected by borders, padding, etc...
    isCol(cell) ? Math.round(_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get(cell)) : _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getRuntime(cell);
const getHeight = (cell)=>{
    return isRow(cell) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(cell) : get(cell, 'rowspan', getTotalHeight);
};
const getGenericWidth = (cell)=>{
    const width = getRawWidth(cell);
    return width.bind((w)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.parse(w, [
            'fixed',
            'relative',
            'empty'
        ]));
};
const setGenericWidth = (cell, amount, unit)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + unit);
};
const getPixelTableWidth = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get(table) + 'px';
const getPixelTableHeight = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(table) + 'px';
const getPercentTableWidth = (table)=>getPercentSize(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getInner) + '%';
const getPercentTableHeight = (table)=>getPercentSize(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getInner) + '%';
const isPercentSizing = (table)=>getRawWidth(table).exists((size)=>rPercentageBasedSizeRegex.test(size));
const isPixelSizing = (table)=>getRawWidth(table).exists((size)=>rPixelBasedSizeRegex.test(size));
const isNoneSizing = (table)=>getRawWidth(table).isNone();
const percentageBasedSizeRegex = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.constant(rPercentageBasedSizeRegex);
const pixelBasedSizeRegex = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.constant(rPixelBasedSizeRegex);


}),
"../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts": 
/*!********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  inSelection: () => (inSelection),
  isRectangular: () => (isRectangular),
  isWithin: () => (isWithin)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


const inSelection = (bounds, detail)=>{
    const leftEdge = detail.column;
    const rightEdge = detail.column + detail.colspan - 1;
    const topEdge = detail.row;
    const bottomEdge = detail.row + detail.rowspan - 1;
    return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow;
};
// Note, something is *within* if it is completely contained within the bounds.
const isWithin = (bounds, detail)=>{
    return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;
};
const isRectangular = (warehouse, bounds)=>{
    let isRect = true;
    const detailIsWithin = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.curry(isWithin, bounds);
    for(let i = bounds.startRow; i <= bounds.finishRow; i++){
        for(let j = bounds.startCol; j <= bounds.finishCol; j++){
            isRect = isRect && _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);
        }
    }
    return isRect ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(bounds) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
};



}),
"../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts": 
/*!********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  intercepts: () => (intercepts),
  moveBy: () => (moveBy),
  parentCell: () => (parentCell)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _CellBounds__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CellBounds */ "../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts");
/* ESM import */var _CellGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CellGroup */ "../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts");





const moveBy = (warehouse, cell, row, column)=>{
    return _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.findItem(warehouse, cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq).bind((detail)=>{
        const startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;
        const startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;
        const dest = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.getAt(warehouse, startRow + row, startCol + column);
        return dest.map((d)=>{
            return d.element;
        });
    });
};
const intercepts = (warehouse, start, finish)=>{
    return _CellGroup__WEBPACK_IMPORTED_MODULE_2__.getAnyBox(warehouse, start, finish).map((bounds)=>{
        const inside = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.filterItems(warehouse, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.curry(_CellBounds__WEBPACK_IMPORTED_MODULE_4__.inSelection, bounds));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.map(inside, (detail)=>{
            return detail.element;
        });
    });
};
const parentCell = (warehouse, innerCell)=>{
    const isContainedBy = (c1, c2)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(c2, c1);
    };
    return _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.findItem(warehouse, innerCell, isContainedBy).map((detail)=>{
        return detail.element;
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAnyBox: () => (getAnyBox),
  getBox: () => (getBox)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _CellBounds__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CellBounds */ "../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts");




const getBounds = (detailA, detailB)=>{
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));
};
const getAnyBox = (warehouse, startCell, finishCell)=>{
    const startCoords = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.findItem(warehouse, startCell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq);
    const finishCoords = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.findItem(warehouse, finishCell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq);
    return startCoords.bind((sc)=>{
        return finishCoords.map((fc)=>{
            return getBounds(sc, fc);
        });
    });
};
const getBox = (warehouse, startCell, finishCell)=>{
    return getAnyBox(warehouse, startCell, finishCell).bind((bounds)=>{
        return _CellBounds__WEBPACK_IMPORTED_MODULE_3__.isRectangular(warehouse, bounds);
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAttrValue: () => (getAttrValue),
  getCssValue: () => (getCssValue),
  getSpan: () => (getSpan),
  hasColspan: () => (hasColspan),
  hasRowspan: () => (hasRowspan),
  minHeight: () => (minHeight),
  minWidth: () => (minWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");


const getAttrValue = (cell, name, fallback = 0)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getOpt(cell, name).map((value)=>parseInt(value, 10)).getOr(fallback);
const getSpan = (cell, type)=>getAttrValue(cell, type, 1);
const hasColspan = (cellOrCol)=>{
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.isTag('col')(cellOrCol)) {
        return getAttrValue(cellOrCol, 'span', 1) > 1;
    } else {
        return getSpan(cellOrCol, 'colspan') > 1;
    }
};
const hasRowspan = (cell)=>getSpan(cell, 'rowspan') > 1;
const getCssValue = (element, property)=>parseInt(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(element, property), 10);
const minWidth = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(10);
const minHeight = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(10);


}),
"../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  uniqueColumns: () => (uniqueColumns)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const uniqueColumns = (details)=>{
    const uniqueCheck = (rest, detail)=>{
        const columnExists = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(rest, (currentDetail)=>currentDetail.column === detail.column);
        return columnExists ? rest : rest.concat([
            detail
        ]);
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldl(details, uniqueCheck, []).sort((detailA, detailB)=>detailA.column - detailB.column);
};


}),
"../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  filterFirstLayer: () => (filterFirstLayer),
  firstLayer: () => (firstLayer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const firstLayer = (scope, selector)=>{
    return filterFirstLayer(scope, selector, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.always);
};
const filterFirstLayer = (scope, selector, predicate)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.children(scope), (x)=>{
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.is(x, selector)) {
            return predicate(x) ? [
                x
            ] : [];
        } else {
            return filterFirstLayer(x, selector, predicate);
        }
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts": 
/*!**********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  LOCKED_COL_ATTR: () => (LOCKED_COL_ATTR),
  getLockedColumnsFromGrid: () => (getLockedColumnsFromGrid),
  getLockedColumnsFromTable: () => (getLockedColumnsFromTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



const LOCKED_COL_ATTR = 'data-snooker-locked-cols';
const getLockedColumnsFromTable = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getOpt(table, LOCKED_COL_ATTR).bind((lockedColStr)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.from(lockedColStr.match(/\d+/g))).map((lockedCols)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(lockedCols, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.always));
// Need to check all of the cells to determine which columns are locked - reasoning is because rowspan and colspan cells where the same cell is used by multiple columns
const getLockedColumnsFromGrid = (grid)=>{
    const locked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(_model_GridRow__WEBPACK_IMPORTED_MODULE_4__.extractGridDetails(grid).rows, (acc, row)=>{
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(row.cells, (cell, idx)=>{
            if (cell.isLocked) {
                acc[idx] = true;
            }
        });
        return acc;
    }, {});
    const lockedArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.mapToArray(locked, (_val, key)=>parseInt(key, 10));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.sort(lockedArr);
};



}),
"../snooker/src/main/ts/ephox/snooker/util/Util.ts": 
/*!*********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/Util.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  deduce: () => (deduce),
  unique: () => (unique)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const unique = (xs, eq)=>{
    const result = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(xs, (x, i)=>{
        if (i < xs.length - 1 && !eq(x, xs[i + 1])) {
            result.push(x);
        } else if (i === xs.length - 1) {
            result.push(x);
        }
    });
    return result;
};
const deduce = (xs, index)=>{
    if (index < 0 || index >= xs.length - 1) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
    const current = xs[index].fold(()=>{
        const rest = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.reverse(xs.slice(0, index));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(rest, (a, i)=>a.map((aa)=>({
                    value: aa,
                    delta: i + 1
                })));
    }, (c)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
            value: c,
            delta: 0
        }));
    const next = xs[index + 1].fold(()=>{
        const rest = xs.slice(index + 1);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(rest, (a, i)=>a.map((aa)=>({
                    value: aa,
                    delta: i + 1
                })));
    }, (n)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
            value: n,
            delta: 1
        }));
    return current.bind((c)=>next.map((n)=>{
            const extras = n.delta + c.delta;
            return Math.abs(n.value - c.value) / extras;
        }));
};



}),
"../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts": 
/*!*********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  toArray: () => (toArray)
});
/**
 * Applies f repeatedly until it completes (by returning Optional.none()).
 *
 * Normally would just use recursion, but JavaScript lacks tail call optimisation.
 *
 * This is what recursion looks like when manually unravelled :)
 */ const toArray = (target, f)=>{
    const r = [];
    const recurse = (e)=>{
        r.push(e);
        return f(e);
    };
    let cur = f(target);
    do {
        cur = cur.bind(recurse);
    }while (cur.isSome())
    return r;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts": 
/*!***********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  contains: () => (contains),
  eq: () => (eq),
  is: () => (is),
  isEqualNode: () => (isEqualNode),
  member: () => (member)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _search_Selectors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const eq = (e1, e2)=>e1.dom === e2.dom;
const isEqualNode = (e1, e2)=>e1.dom.isEqualNode(e2.dom);
const member = (element, elements)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(elements, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(eq, element));
// Returns: true if node e1 contains e2, otherwise false.
// (returns false if e1===e2: A node does not contain itself).
const contains = (e1, e2)=>{
    const d1 = e1.dom;
    const d2 = e2.dom;
    return d1 === d2 ? false : d1.contains(d2);
};
const is = _search_Selectors__WEBPACK_IMPORTED_MODULE_2__.is;



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  append: () => (append),
  appendAt: () => (appendAt),
  before: () => (before),
  prepend: () => (prepend),
  wrap: () => (wrap)
});
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");

const before = (marker, element)=>{
    const parent = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.parent(marker);
    parent.each((v)=>{
        v.dom.insertBefore(element.dom, marker.dom);
    });
};
const after = (marker, element)=>{
    const sibling = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.nextSibling(marker);
    sibling.fold(()=>{
        const parent = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.parent(marker);
        parent.each((v)=>{
            append(v, element);
        });
    }, (v)=>{
        before(v, element);
    });
};
const prepend = (parent, element)=>{
    const firstChild = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.firstChild(parent);
    firstChild.fold(()=>{
        append(parent, element);
    }, (v)=>{
        parent.dom.insertBefore(element.dom, v.dom);
    });
};
const append = (parent, element)=>{
    parent.dom.appendChild(element.dom);
};
const appendAt = (parent, element, index)=>{
    _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.child(parent, index).fold(()=>{
        append(parent, element);
    }, (v)=>{
        before(v, element);
    });
};
const wrap = (element, wrapper)=>{
    before(element, wrapper);
    append(wrapper, element);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts": 
/*!*************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  append: () => (append),
  before: () => (before),
  prepend: () => (prepend)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Insert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");


const before = (marker, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.before(marker, x);
    });
};
const after = (marker, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x, i)=>{
        const e = i === 0 ? marker : elements[i - 1];
        _Insert__WEBPACK_IMPORTED_MODULE_1__.after(e, x);
    });
};
const prepend = (parent, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements.slice().reverse(), (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.prepend(parent, x);
    });
};
const append = (parent, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.append(parent, x);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  empty: () => (empty),
  remove: () => (remove),
  unwrap: () => (unwrap)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _InsertAll__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InsertAll */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");



const empty = (element)=>{
    // shortcut "empty node" trick. Requires IE 9.
    element.dom.textContent = '';
    // If the contents was a single empty text node, the above doesn't remove it. But, it's still faster in general
    // than removing every child node manually.
    // The following is (probably) safe for performance as 99.9% of the time the trick works and
    // Traverse.children will return an empty array.
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(_search_Traverse__WEBPACK_IMPORTED_MODULE_1__.children(element), (rogue)=>{
        remove(rogue);
    });
};
const remove = (element)=>{
    const dom = element.dom;
    if (dom.parentNode !== null) {
        dom.parentNode.removeChild(dom);
    }
};
const unwrap = (wrapper)=>{
    const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_1__.children(wrapper);
    if (children.length > 0) {
        _InsertAll__WEBPACK_IMPORTED_MODULE_2__.after(wrapper, children);
    }
    remove(wrapper);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  deep: () => (deep),
  mutate: () => (mutate),
  shallow: () => (shallow),
  shallowAs: () => (shallowAs)
});
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../properties/Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _Insert__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _InsertAll__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InsertAll */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _Remove__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Remove */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");






const clone = (original, isDeep)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(original.dom.cloneNode(isDeep));
/** Shallow clone - just the tag, no children */ const shallow = (original)=>clone(original, false);
/** Deep clone - everything copied including children */ const deep = (original)=>clone(original, true);
/** Shallow clone, with a new tag */ const shallowAs = (original, tag)=>{
    const nu = _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag(tag);
    const attributes = _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__.clone(original);
    _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__.setAll(nu, attributes);
    return nu;
};
/** Deep clone, with a new tag */ const copy = (original, tag)=>{
    const nu = shallowAs(original, tag);
    // NOTE
    // previously this used serialisation:
    // nu.dom.innerHTML = original.dom.innerHTML;
    //
    // Clone should be equivalent (and faster), but if TD <-> TH toggle breaks, put it back.
    const cloneChildren = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(deep(original));
    _InsertAll__WEBPACK_IMPORTED_MODULE_3__.append(nu, cloneChildren);
    return nu;
};
/** Change the tag name, but keep all children */ const mutate = (original, tag)=>{
    const nu = shallowAs(original, tag);
    _Insert__WEBPACK_IMPORTED_MODULE_4__.after(original, nu);
    const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(original);
    _InsertAll__WEBPACK_IMPORTED_MODULE_3__.append(nu, children);
    _Remove__WEBPACK_IMPORTED_MODULE_5__.remove(original);
    return nu;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ATTRIBUTE: () => (ATTRIBUTE),
  CDATA_SECTION: () => (CDATA_SECTION),
  COMMENT: () => (COMMENT),
  DOCUMENT: () => (DOCUMENT),
  DOCUMENT_FRAGMENT: () => (DOCUMENT_FRAGMENT),
  DOCUMENT_TYPE: () => (DOCUMENT_TYPE),
  ELEMENT: () => (ELEMENT),
  ENTITY: () => (ENTITY),
  ENTITY_REFERENCE: () => (ENTITY_REFERENCE),
  NOTATION: () => (NOTATION),
  PROCESSING_INSTRUCTION: () => (PROCESSING_INSTRUCTION),
  TEXT: () => (TEXT)
});
const ATTRIBUTE = 2;
const CDATA_SECTION = 4;
const COMMENT = 8;
const DOCUMENT = 9;
const DOCUMENT_TYPE = 10;
const DOCUMENT_FRAGMENT = 11;
const ELEMENT = 1;
const TEXT = 3;
const PROCESSING_INSTRUCTION = 7;
const ENTITY_REFERENCE = 5;
const ENTITY = 6;
const NOTATION = 12;



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  body: () => (body),
  getBody: () => (getBody),
  inBody: () => (inBody)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarShadowDom */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts");




// Node.contains() is very, very, very good performance
// http://jsperf.com/closest-vs-contains/5
const inBody = (element)=>{
    // Technically this is only required on IE, where contains() returns false for text nodes.
    // But it's cheap enough to run everywhere and Sugar doesn't have platform detection (yet).
    const dom = _SugarNode__WEBPACK_IMPORTED_MODULE_0__.isText(element) ? element.dom.parentNode : element.dom;
    // use ownerDocument.body to ensure this works inside iframes.
    // Normally contains is bad because an element "contains" itself, but here we want that.
    if (dom === undefined || dom === null || dom.ownerDocument === null) {
        return false;
    }
    const doc = dom.ownerDocument;
    return (0,_SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__.getShadowRoot)(_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(dom)).fold(()=>doc.body.contains(dom), _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.compose1(inBody, _SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__.getShadowHost));
};
const body = ()=>getBody(_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(document));
const getBody = (doc)=>{
    const b = doc.dom.body;
    if (b === null || b === undefined) {
        throw new Error('Body is not available yet');
    }
    return _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(b);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts": 
/*!*****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SugarElement: () => (SugarElement)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const fromHtml = (html, scope)=>{
    const doc = scope || document;
    const div = doc.createElement('div');
    div.innerHTML = html;
    if (!div.hasChildNodes() || div.childNodes.length > 1) {
        const message = 'HTML does not have a single root node';
        // eslint-disable-next-line no-console
        console.error(message, html);
        throw new Error(message);
    }
    return fromDom(div.childNodes[0]);
};
const fromTag = (tag, scope)=>{
    const doc = scope || document;
    const node = doc.createElement(tag);
    return fromDom(node);
};
const fromText = (text, scope)=>{
    const doc = scope || document;
    const node = doc.createTextNode(text);
    return fromDom(node);
};
const fromDom = (node)=>{
    // TODO: Consider removing this check, but left atm for safety
    if (node === null || node === undefined) {
        throw new Error('Node cannot be null or undefined');
    }
    return {
        dom: node
    };
};
const fromPoint = (docElm, x, y)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);
// tslint:disable-next-line:variable-name
const SugarElement = {
    fromHtml,
    fromTag,
    fromText,
    fromDom,
    fromPoint
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromDom: () => (fromDom),
  fromHtml: () => (fromHtml),
  fromTags: () => (fromTags),
  fromText: () => (fromText)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");



const fromHtml = (html, scope)=>{
    const doc = scope || document;
    const div = doc.createElement('div');
    div.innerHTML = html;
    return _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.children(_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(div));
};
const fromTags = (tags, scope)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(tags, (x)=>_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag(x, scope));
const fromText = (texts, scope)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(texts, (x)=>_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromText(x, scope));
const fromDom = (nodes)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(nodes, _SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom);



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getHead: () => (getHead),
  head: () => (head)
});
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");

const head = ()=>getHead(_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(document));
const getHead = (doc)=>{
    /*
   * IE9 and above per
   * https://developer.mozilla.org/en-US/docs/Web/API/Document/head
   */ const b = doc.dom.head;
    if (b === null || b === undefined) {
        throw new Error('Head is not available yet');
    }
    return _SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(b);
};


}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isComment: () => (isComment),
  isDocument: () => (isDocument),
  isDocumentFragment: () => (isDocumentFragment),
  isElement: () => (isElement),
  isHTMLElement: () => (isHTMLElement),
  isTag: () => (isTag),
  isText: () => (isText),
  name: () => (name),
  type: () => (type),
  value: () => (value)
});
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts");
/* ESM import */var _NodeTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NodeTypes */ "../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts");


const name = (element)=>{
    const r = element.dom.nodeName;
    return r.toLowerCase();
};
const type = (element)=>element.dom.nodeType;
const value = (element)=>element.dom.nodeValue;
const isType = (t)=>(element)=>type(element) === t;
const isComment = (element)=>type(element) === _NodeTypes__WEBPACK_IMPORTED_MODULE_0__.COMMENT || name(element) === '#comment';
const isHTMLElement = (element)=>isElement(element) && _ephox_sand__WEBPACK_IMPORTED_MODULE_1__.isPrototypeOf(element.dom);
const isElement = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT);
const isText = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.TEXT);
const isDocument = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT);
const isDocumentFragment = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_FRAGMENT);
const isTag = (tag)=>(e)=>isElement(e) && name(e) === tag;



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  createElement: () => (createElement),
  getContentContainer: () => (getContentContainer),
  getOriginalEventTarget: () => (getOriginalEventTarget),
  getRootNode: () => (getRootNode),
  getShadowHost: () => (getShadowHost),
  getShadowRoot: () => (getShadowRoot),
  getStyleContainer: () => (getStyleContainer),
  isClosedShadowRoot: () => (isClosedShadowRoot),
  isInShadowRoot: () => (isInShadowRoot),
  isOpenShadowHost: () => (isOpenShadowHost),
  isOpenShadowRoot: () => (isOpenShadowRoot),
  isShadowRoot: () => (isShadowRoot)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _SugarHead__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SugarHead */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");





/**
 * Is the element a ShadowRoot?
 *
 * Note: this is insufficient to test if any element is a shadow root, but it is sufficient to differentiate between
 * a Document and a ShadowRoot.
 */ const isShadowRoot = (dos)=>_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isDocumentFragment(dos) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(dos.dom.host);
const getRootNode = (e)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(e.dom.getRootNode());
/** Create an element, using the actual document. */ const createElement = (dos, tag)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromTag(tag, _search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos).dom);
/** Where style tags need to go. ShadowRoot or document head */ const getStyleContainer = (dos)=>isShadowRoot(dos) ? dos : _SugarHead__WEBPACK_IMPORTED_MODULE_4__.getHead(_search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos));
/** Where content needs to go. ShadowRoot or document body */ const getContentContainer = (dos)=>// Can't use SugarBody.body without causing a circular module reference (since SugarBody.inBody uses SugarShadowDom)
    isShadowRoot(dos) ? dos : _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(_search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos).dom.body);
/** Is this element either a ShadowRoot or a descendent of a ShadowRoot. */ const isInShadowRoot = (e)=>getShadowRoot(e).isSome();
/** If this element is in a ShadowRoot, return it. */ const getShadowRoot = (e)=>{
    const r = getRootNode(e);
    return isShadowRoot(r) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.some(r) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
};
/** Return the host of a ShadowRoot.
 *
 * This function will throw if Shadow DOM is unsupported in the browser, or if the host is null.
 * If you actually have a ShadowRoot, this shouldn't happen.
 */ const getShadowHost = (e)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(e.dom.host);
/**
 * When Events bubble up through a ShadowRoot, the browser changes the target to be the shadow host.
 * This function gets the "original" event target if possible.
 * This only works if the shadow tree is open - if the shadow tree is closed, event.target is returned.
 * See: https://developers.google.com/web/fundamentals/web-components/shadowdom#events
 */ const getOriginalEventTarget = (event)=>{
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(event.target)) {
        const el = _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(event.target);
        if (_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isElement(el) && isOpenShadowHost(el)) {
            // When target element is inside Shadow DOM we need to take first element from composedPath
            // otherwise we'll get Shadow Root parent, not actual target element.
            if (event.composed && event.composedPath) {
                const composedPath = event.composedPath();
                if (composedPath) {
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.head(composedPath);
                }
            }
        }
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.from(event.target);
};
const isOpenShadowRoot = (sr)=>sr.dom.mode === 'open';
const isClosedShadowRoot = (sr)=>sr.dom.mode === 'closed';
/** Return true if the element is a host of an open shadow root.
 *  Return false if the element is a host of a closed shadow root, or if the element is not a host.
 */ const isOpenShadowHost = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(element.dom.shadowRoot);


}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getOption: () => (getOption),
  set: () => (set)
});
/* ESM import */var _impl_NodeValue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/NodeValue */ "../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const api = (0,_impl_NodeValue__WEBPACK_IMPORTED_MODULE_0__.NodeValue)(_SugarNode__WEBPACK_IMPORTED_MODULE_1__.isText, 'text');
const get = (element)=>api.get(element);
const getOption = (element)=>api.getOption(element);
const set = (element, value)=>api.set(element, value);



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  clone: () => (clone),
  get: () => (get),
  getOpt: () => (getOpt),
  has: () => (has),
  hasNone: () => (hasNone),
  remove: () => (remove),
  set: () => (set),
  setAll: () => (setAll),
  setOptions: () => (setOptions),
  transfer: () => (transfer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const rawSet = (dom, key, value)=>{
    /*
   * JQuery coerced everything to a string, and silently did nothing on text node/null/undefined.
   *
   * We fail on those invalid cases, only allowing numbers and booleans.
   */ if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isString(value) || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isBoolean(value) || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isNumber(value)) {
        dom.setAttribute(key, value + '');
    } else {
        // eslint-disable-next-line no-console
        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);
        throw new Error('Attribute value was not simple');
    }
};
const set = (element, key, value)=>{
    rawSet(element.dom, key, value);
};
const setAll = (element, attrs)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(attrs, (v, k)=>{
        rawSet(dom, k, v);
    });
};
const setOptions = (element, attrs)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(attrs, (v, k)=>{
        v.fold(()=>{
            remove(element, k);
        }, (value)=>{
            rawSet(element.dom, k, value);
        });
    });
};
const get = (element, key)=>{
    const v = element.dom.getAttribute(key);
    // undefined is the more appropriate value for JS, and this matches JQuery
    return v === null ? undefined : v;
};
const getOpt = (element, key)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(get(element, key));
const has = (element, key)=>{
    const dom = element.dom;
    // return false for non-element nodes, no point in throwing an error
    return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;
};
const remove = (element, key)=>{
    element.dom.removeAttribute(key);
};
const hasNone = (element)=>{
    const attrs = element.dom.attributes;
    return attrs === undefined || attrs === null || attrs.length === 0;
};
const clone = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(element.dom.attributes, (acc, attr)=>{
        acc[attr.name] = attr.value;
        return acc;
    }, {});
const transferOne = (source, destination, attr)=>{
    // NOTE: We don't want to clobber any existing attributes
    if (!has(destination, attr)) {
        getOpt(source, attr).each((srcValue)=>set(destination, attr, srcValue));
    }
};
// Transfer attributes(attrs) from source to destination, unless they are already present
const transfer = (source, destination, attrs)=>{
    if (!_node_SugarNode__WEBPACK_IMPORTED_MODULE_4__.isElement(source) || !_node_SugarNode__WEBPACK_IMPORTED_MODULE_4__.isElement(destination)) {
        return;
    }
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(attrs, (attr)=>{
        transferOne(source, destination, attr);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts": 
/*!**************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts ***!
  \**************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  closest: () => (closest),
  get: () => (get),
  getRaw: () => (getRaw),
  isEditable: () => (isEditable),
  set: () => (set)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _search_SelectorFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/SelectorFind */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");



const closest = (target)=>_search_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.closest(target, '[contenteditable]');
const isEditable = (element, assumeEditable = false)=>{
    if (_node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element)) {
        return element.dom.isContentEditable;
    } else {
        // Find the closest contenteditable element and check if it's editable
        return closest(element).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(assumeEditable), (editable)=>getRaw(editable) === 'true');
    }
};
const getRaw = (element)=>element.dom.contentEditable;
const get = (element)=>isEditable(element, false);
const set = (element, editable)=>{
    element.dom.contentEditable = editable ? 'true' : 'false';
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  get: () => (get),
  getAllRaw: () => (getAllRaw),
  getRaw: () => (getRaw),
  isValidValue: () => (isValidValue),
  preserve: () => (preserve),
  reflow: () => (reflow),
  remove: () => (remove),
  set: () => (set),
  setAll: () => (setAll),
  setOptions: () => (setOptions),
  transfer: () => (transfer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _impl_Style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../impl/Style */ "../sugar/src/main/ts/ephox/sugar/impl/Style.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _Attribute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");






const internalSet = (dom, property, value)=>{
    // This is going to hurt. Apologies.
    // JQuery coerces numbers to pixels for certain property names, and other times lets numbers through.
    // we're going to be explicit; strings only.
    if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isString(value)) {
        // eslint-disable-next-line no-console
        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);
        throw new Error('CSS value must be a string: ' + value);
    }
    // removed: support for dom().style[property] where prop is camel case instead of normal property name
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        dom.style.setProperty(property, value);
    }
};
const internalRemove = (dom, property)=>{
    /*
   * IE9 and above - MDN doesn't have details, but here's a couple of random internet claims
   *
   * http://help.dottoro.com/ljopsjck.php
   * http://stackoverflow.com/a/7901886/7546
   */ if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        dom.style.removeProperty(property);
    }
};
const set = (element, property, value)=>{
    const dom = element.dom;
    internalSet(dom, property, value);
};
const setAll = (element, css)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(css, (v, k)=>{
        internalSet(dom, k, v);
    });
};
const setOptions = (element, css)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(css, (v, k)=>{
        v.fold(()=>{
            internalRemove(dom, k);
        }, (value)=>{
            internalSet(dom, k, value);
        });
    });
};
/*
 * NOTE: For certain properties, this returns the "used value" which is subtly different to the "computed value" (despite calling getComputedStyle).
 * Blame CSS 2.0.
 *
 * https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
 */ const get = (element, property)=>{
    const dom = element.dom;
    /*
   * IE9 and above per
   * https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle
   *
   * Not in numerosity, because it doesn't memoize and looking this up dynamically in performance critical code would be horrendous.
   *
   * JQuery has some magic here for IE popups, but we don't really need that.
   * It also uses element.ownerDocument.defaultView to handle iframes but that hasn't been required since FF 3.6.
   */ const styles = window.getComputedStyle(dom);
    const r = styles.getPropertyValue(property);
    // jquery-ism: If r is an empty string, check that the element is not in a document. If it isn't, return the raw value.
    // Turns out we do this a lot.
    return r === '' && !_node_SugarBody__WEBPACK_IMPORTED_MODULE_3__.inBody(element) ? getUnsafeProperty(dom, property) : r;
};
// removed: support for dom().style[property] where prop is camel case instead of normal property name
// empty string is what the browsers (IE11 and Chrome) return when the propertyValue doesn't exists.
const getUnsafeProperty = (dom, property)=>_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom) ? dom.style.getPropertyValue(property) : '';
/*
 * Gets the raw value from the style attribute. Useful for retrieving "used values" from the DOM:
 * https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
 *
 * Returns NONE if the property isn't set, or the value is an empty string.
 */ const getRaw = (element, property)=>{
    const dom = element.dom;
    const raw = getUnsafeProperty(dom, property);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.from(raw).filter((r)=>r.length > 0);
};
const getAllRaw = (element)=>{
    const css = {};
    const dom = element.dom;
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        for(let i = 0; i < dom.style.length; i++){
            const ruleName = dom.style.item(i);
            css[ruleName] = dom.style[ruleName];
        }
    }
    return css;
};
const isValidValue = (tag, property, value)=>{
    const element = _node_SugarElement__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag(tag);
    set(element, property, value);
    const style = getRaw(element, property);
    return style.isSome();
};
const remove = (element, property)=>{
    const dom = element.dom;
    internalRemove(dom, property);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.is(_Attribute__WEBPACK_IMPORTED_MODULE_7__.getOpt(element, 'style').map(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.trim), '')) {
        // No more styles left, remove the style attribute as well
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.remove(element, 'style');
    }
};
const preserve = (element, f)=>{
    const oldStyles = _Attribute__WEBPACK_IMPORTED_MODULE_7__.get(element, 'style');
    const result = f(element);
    if (oldStyles === undefined) {
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.remove(element, 'style');
    } else {
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.set(element, 'style', oldStyles);
    }
    return result;
};
const copy = (source, target)=>{
    const sourceDom = source.dom;
    const targetDom = target.dom;
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(sourceDom) && _impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(targetDom)) {
        targetDom.style.cssText = sourceDom.style.cssText;
    }
};
/* NOTE: This function is here for the side effect it triggers.
The value itself is not used.
Be sure to not use the return value, and that it is not removed by a minifier.
 */ const reflow = (e)=>e.dom.offsetWidth;
const transferOne = (source, destination, style)=>{
    getRaw(source, style).each((value)=>{
        // NOTE: We don't want to clobber any existing inline styles.
        if (getRaw(destination, style).isNone()) {
            set(destination, style, value);
        }
    });
};
const transfer = (source, destination, styles)=>{
    if (!_node_SugarNode__WEBPACK_IMPORTED_MODULE_9__.isElement(source) || !_node_SugarNode__WEBPACK_IMPORTED_MODULE_9__.isElement(destination)) {
        return;
    }
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each(styles, (style)=>{
        transferOne(source, destination, style);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getDirection: () => (getDirection),
  onDirection: () => (onDirection)
});
/* ESM import */var _Css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");

const onDirection = (isLtr, isRtl)=>(element)=>getDirection(element) === 'rtl' ? isRtl : isLtr;
const getDirection = (element)=>_Css__WEBPACK_IMPORTED_MODULE_0__.get(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';



}),
"../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  ancestors: () => (ancestors),
  children: () => (children),
  descendants: () => (descendants),
  siblings: () => (siblings)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");



// maybe TraverseWith, similar to traverse but with a predicate?
const all = (predicate)=>descendants(_node_SugarBody__WEBPACK_IMPORTED_MODULE_0__.body(), predicate);
const ancestors = (scope, predicate, isRoot)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.parents(scope, isRoot), predicate);
const siblings = (scope, predicate)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.siblings(scope), predicate);
const children = (scope, predicate)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(scope), predicate);
const descendants = (scope, predicate)=>{
    let result = [];
    // Recurse.toArray() might help here
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(scope), (x)=>{
        if (predicate(x)) {
            result = result.concat([
                x
            ]);
        }
        result = result.concat(descendants(x, predicate));
    });
    return result;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  first: () => (first),
  sibling: () => (sibling)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../impl/ClosestOrAncestor */ "../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");





const first = (predicate)=>descendant(_node_SugarBody__WEBPACK_IMPORTED_MODULE_0__.body(), predicate);
const ancestor = (scope, predicate, isRoot)=>{
    let element = scope.dom;
    const stop = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isFunction(isRoot) ? isRoot : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.never;
    while(element.parentNode){
        element = element.parentNode;
        const el = _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(element);
        if (predicate(el)) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(el);
        } else if (stop(el)) {
            break;
        }
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
};
const closest = (scope, predicate, isRoot)=>{
    // This is required to avoid ClosestOrAncestor passing the predicate to itself
    const is = (s, test)=>test(s);
    return (0,_impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_5__["default"])(is, ancestor, scope, predicate, isRoot);
};
const sibling = (scope, predicate)=>{
    const element = scope.dom;
    if (!element.parentNode) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
    }
    return child(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(element.parentNode), (x)=>!_dom_Compare__WEBPACK_IMPORTED_MODULE_6__.eq(scope, x) && predicate(x));
};
const child = (scope, predicate)=>{
    const pred = (node)=>predicate(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(node));
    const result = _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.find(scope.dom.childNodes, pred);
    return result.map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom);
};
const descendant = (scope, predicate)=>{
    const descend = (node)=>{
        // tslint:disable-next-line:prefer-for-of
        for(let i = 0; i < node.childNodes.length; i++){
            const child = _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(node.childNodes[i]);
            if (predicate(child)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(child);
            }
            const res = descend(node.childNodes[i]);
            if (res.isSome()) {
                return res;
            }
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
    };
    return descend(scope.dom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/SelectorExists.ts": 
/*!*********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/SelectorExists.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  any: () => (any),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  sibling: () => (sibling)
});
/* ESM import */var _SelectorFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SelectorFind */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");

const any = (selector)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.first(selector).isSome();
const ancestor = (scope, selector, isRoot)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.ancestor(scope, selector, isRoot).isSome();
const sibling = (scope, selector)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.sibling(scope, selector).isSome();
const child = (scope, selector)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.child(scope, selector).isSome();
const descendant = (scope, selector)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.descendant(scope, selector).isSome();
const closest = (scope, selector, isRoot)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.closest(scope, selector, isRoot).isSome();



}),
"../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts": 
/*!*********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  ancestors: () => (ancestors),
  children: () => (children),
  descendants: () => (descendants),
  siblings: () => (siblings)
});
/* ESM import */var _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PredicateFilter */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts");
/* ESM import */var _Selectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const all = (selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.all(selector);
// For all of the following:
//
// jQuery does siblings of firstChild. IE9+ supports scope.dom.children (similar to Traverse.children but elements only).
// Traverse should also do this (but probably not by default).
//
const ancestors = (scope, selector, isRoot)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all this wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.ancestors(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector), isRoot);
const siblings = (scope, selector)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all the wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.siblings(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const children = (scope, selector)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all the wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.children(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const descendants = (scope, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.all(selector, scope);



}),
"../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  first: () => (first),
  sibling: () => (sibling)
});
/* ESM import */var _impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/ClosestOrAncestor */ "../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts");
/* ESM import */var _PredicateFind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _Selectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");



// TODO: An internal SelectorFilter module that doesn't SugarElement.fromDom() everything
const first = (selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.one(selector);
const ancestor = (scope, selector, isRoot)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.ancestor(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector), isRoot);
const sibling = (scope, selector)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.sibling(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const child = (scope, selector)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.child(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const descendant = (scope, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.one(selector, scope);
// Returns Some(closest ancestor element (sugared)) matching 'selector' up to isRoot, or None() otherwise
const closest = (scope, selector, isRoot)=>{
    const is = (element, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(element, selector);
    return (0,_impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_2__["default"])(is, ancestor, scope, selector, isRoot);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts": 
/*!****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  is: () => (is),
  one: () => (one)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/NodeTypes */ "../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");



const is = (element, selector)=>{
    const dom = element.dom;
    if (dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT) {
        return false;
    } else {
        const elem = dom;
        if (elem.matches !== undefined) {
            return elem.matches(selector);
        } else if (elem.msMatchesSelector !== undefined) {
            return elem.msMatchesSelector(selector);
        } else if (elem.webkitMatchesSelector !== undefined) {
            return elem.webkitMatchesSelector(selector);
        } else if (elem.mozMatchesSelector !== undefined) {
            // cast to any as mozMatchesSelector doesn't exist in TS DOM lib
            return elem.mozMatchesSelector(selector);
        } else {
            throw new Error('Browser lacks native selectors');
        } // unfortunately we can't throw this on startup :(
    }
};
const bypassSelector = (dom)=>// Only elements, documents and shadow roots support querySelector
    // shadow root element type is DOCUMENT_FRAGMENT
    dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT && dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT && dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_FRAGMENT || // IE fix for complex queries on empty nodes: http://jsfiddle.net/spyder/fv9ptr5L/
    dom.childElementCount === 0;
const all = (selector, scope)=>{
    const base = scope === undefined ? document : scope.dom;
    return bypassSelector(base) ? [] : _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(base.querySelectorAll(selector), _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom);
};
const one = (selector, scope)=>{
    const base = scope === undefined ? document : scope.dom;
    return bypassSelector(base) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none() : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(base.querySelector(selector)).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  child: () => (child),
  childNodesCount: () => (childNodesCount),
  children: () => (children),
  defaultView: () => (defaultView),
  documentElement: () => (documentElement),
  documentOrOwner: () => (documentOrOwner),
  findIndex: () => (findIndex),
  firstChild: () => (firstChild),
  hasChildNodes: () => (hasChildNodes),
  lastChild: () => (lastChild),
  leaf: () => (leaf),
  nextSibling: () => (nextSibling),
  nextSiblings: () => (nextSiblings),
  offsetParent: () => (offsetParent),
  owner: () => (owner),
  parent: () => (parent),
  parentElement: () => (parentElement),
  parentNode: () => (parentNode),
  parents: () => (parents),
  prevSibling: () => (prevSibling),
  prevSiblings: () => (prevSiblings),
  siblings: () => (siblings)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _alien_Recurse__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../alien/Recurse */ "../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");





/**
 * The document associated with the current element
 * NOTE: this will throw if the owner is null.
 */ const owner = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(element.dom.ownerDocument);
/**
 * If the element is a document, return it. Otherwise, return its ownerDocument.
 * @param dos
 */ const documentOrOwner = (dos)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_1__.isDocument(dos) ? dos : owner(dos);
const documentElement = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(documentOrOwner(element).dom.documentElement);
/**
 * The window element associated with the element
 * NOTE: this will throw if the defaultView is null.
 */ const defaultView = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(documentOrOwner(element).dom.defaultView);
const parent = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.parentNode).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
// Cast down to just be SugarElement<Node>
const parentNode = (element)=>parent(element);
const parentElement = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.parentElement).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const findIndex = (element)=>parent(element).bind((p)=>{
        // TODO: Refactor out children so we can avoid the constant unwrapping
        const kin = children(p);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findIndex(kin, (elem)=>_dom_Compare__WEBPACK_IMPORTED_MODULE_4__.eq(element, elem));
    });
const parents = (element, isRoot)=>{
    const stop = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(isRoot) ? isRoot : _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.never;
    // This is used a *lot* so it needs to be performant, not recursive
    let dom = element.dom;
    const ret = [];
    while(dom.parentNode !== null && dom.parentNode !== undefined){
        const rawParent = dom.parentNode;
        const p = _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(rawParent);
        ret.push(p);
        if (stop(p) === true) {
            break;
        } else {
            dom = rawParent;
        }
    }
    return ret;
};
const siblings = (element)=>{
    // TODO: Refactor out children so we can just not add self instead of filtering afterwards
    const filterSelf = (elements)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(elements, (x)=>!_dom_Compare__WEBPACK_IMPORTED_MODULE_4__.eq(element, x));
    return parent(element).map(children).map(filterSelf).getOr([]);
};
const offsetParent = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.offsetParent).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const prevSibling = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.previousSibling).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const nextSibling = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.nextSibling).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
// This one needs to be reversed, so they're still in DOM order
const prevSiblings = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.reverse(_alien_Recurse__WEBPACK_IMPORTED_MODULE_7__.toArray(element, prevSibling));
const nextSiblings = (element)=>_alien_Recurse__WEBPACK_IMPORTED_MODULE_7__.toArray(element, nextSibling);
const children = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(element.dom.childNodes, _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const child = (element, index)=>{
    const cs = element.dom.childNodes;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(cs[index]).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
};
const firstChild = (element)=>child(element, 0);
const lastChild = (element)=>child(element, element.dom.childNodes.length - 1);
const childNodesCount = (element)=>element.dom.childNodes.length;
const hasChildNodes = (element)=>element.dom.hasChildNodes();
const spot = (element, offset)=>({
        element,
        offset
    });
const leaf = (element, offset)=>{
    const cs = children(element);
    return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getEnd: () => (getEnd),
  isCursorPosition: () => (isCursorPosition),
  isEnd: () => (isEnd),
  isStart: () => (isStart)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Unicode.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _node_SugarText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarText */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _properties_Attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../properties/Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");





const getEnd = (element)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.name(element) === 'img' ? 1 : _node_SugarText__WEBPACK_IMPORTED_MODULE_1__.getOption(element).fold(()=>_search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(element).length, (v)=>v.length);
const isEnd = (element, offset)=>getEnd(element) === offset;
const isStart = (element, offset)=>offset === 0;
const isTextNodeWithCursorPosition = (el)=>_node_SugarText__WEBPACK_IMPORTED_MODULE_1__.getOption(el).filter((text)=>// For the purposes of finding cursor positions only allow text nodes with content,
        // but trim removes &nbsp; and that's allowed
        text.trim().length !== 0 || text.indexOf(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.nbsp) > -1).isSome();
const isContentEditableFalse = (elem)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isHTMLElement(elem) && _properties_Attribute__WEBPACK_IMPORTED_MODULE_4__.get(elem, 'contenteditable') === 'false';
const elementsWithCursorPosition = [
    'img',
    'br'
];
const isCursorPosition = (elem)=>{
    const hasCursorPosition = isTextNodeWithCursorPosition(elem);
    return hasCursorPosition || _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.contains(elementsWithCursorPosition, _node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.name(elem)) || isContentEditableFalse(elem);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts": 
/*!************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts ***!
  \************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  first: () => (first),
  last: () => (last)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _search_PredicateFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _Awareness__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Awareness */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");




const first = (element)=>_search_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.descendant(element, _Awareness__WEBPACK_IMPORTED_MODULE_1__.isCursorPosition);
const last = (element)=>descendantRtl(element, _Awareness__WEBPACK_IMPORTED_MODULE_1__.isCursorPosition);
// Note, sugar probably needs some RTL traversals.
const descendantRtl = (scope, predicate)=>{
    const descend = (element)=>{
        const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(element);
        for(let i = children.length - 1; i >= 0; i--){
            const child = children[i];
            if (predicate(child)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(child);
            }
            const res = descend(child);
            if (res.isSome()) {
                return res;
            }
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    };
    return descend(scope);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  normalise: () => (normalise),
  parse: () => (parse)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const units = {
    // we don't really support all of these different ways to express a length
    unsupportedLength: [
        'em',
        'ex',
        'cap',
        'ch',
        'ic',
        'rem',
        'lh',
        'rlh',
        'vw',
        'vh',
        'vi',
        'vb',
        'vmin',
        'vmax',
        'cm',
        'mm',
        'Q',
        'in',
        'pc',
        'pt',
        'px'
    ],
    // these are the length values we do support
    fixed: [
        'px',
        'pt'
    ],
    relative: [
        '%'
    ],
    empty: [
        ''
    ]
};
// Built from https://tc39.es/ecma262/#prod-StrDecimalLiteral
// Matches a float followed by a trailing set of characters
const pattern = (()=>{
    const decimalDigits = '[0-9]+';
    const signedInteger = '[+-]?' + decimalDigits;
    const exponentPart = '[eE]' + signedInteger;
    const dot = '\\.';
    const opt = (input)=>`(?:${input})?`;
    const unsignedDecimalLiteral = [
        'Infinity',
        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),
        dot + decimalDigits + opt(exponentPart),
        decimalDigits + opt(exponentPart)
    ].join('|');
    const float = `[+-]?(?:${unsignedDecimalLiteral})`;
    return new RegExp(`^(${float})(.*)$`);
})();
const isUnit = (unit, accepted)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(accepted, (acc)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(units[acc], (check)=>unit === check));
const parse = (input, accepted)=>{
    const match = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.from(pattern.exec(input));
    return match.bind((array)=>{
        const value = Number(array[1]);
        const unitRaw = array[2];
        if (isUnit(unitRaw, accepted)) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
                value,
                unit: unitRaw
            });
        } else {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        }
    });
};
const normalise = (input, accepted)=>parse(input, accepted).map(({ value, unit })=>value + unit);


}),
"../sugar/src/main/ts/ephox/sugar/api/view/Height.ts": 
/*!***********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Height.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getInner: () => (getInner),
  getOuter: () => (getOuter),
  getRuntime: () => (getRuntime),
  set: () => (set),
  setMax: () => (setMax)
});
/* ESM import */var _impl_Dimension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/Dimension */ "../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts");
/* ESM import */var _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/RuntimeSize */ "../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _properties_Css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");




const api = (0,_impl_Dimension__WEBPACK_IMPORTED_MODULE_0__.Dimension)('height', (element)=>{
    // getBoundingClientRect gives better results than offsetHeight for tables with captions on Firefox
    const dom = element.dom;
    return _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;
});
const set = (element, h)=>api.set(element, h);
const get = (element)=>api.get(element);
const getOuter = (element)=>api.getOuter(element);
const getInner = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getInnerHeight;
const getRuntime = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getHeight;
const setMax = (element, value)=>{
    // These properties affect the absolute max-height, they are not counted natively, we want to include these properties.
    const inclusions = [
        'margin-top',
        'border-top-width',
        'padding-top',
        'padding-bottom',
        'border-bottom-width',
        'margin-bottom'
    ];
    const absMax = api.max(element, value, inclusions);
    _properties_Css__WEBPACK_IMPORTED_MODULE_3__.set(element, 'max-height', absMax + 'px');
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  absolute: () => (absolute),
  relative: () => (relative),
  viewport: () => (viewport)
});
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _SugarPosition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarPosition */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts");


const boxPosition = (dom)=>{
    const box = dom.getBoundingClientRect();
    return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(box.left, box.top);
};
// Avoids falsy false fallthrough
const firstDefinedOrZero = (a, b)=>{
    if (a !== undefined) {
        return a;
    } else {
        return b !== undefined ? b : 0;
    }
};
const absolute = (element)=>{
    const doc = element.dom.ownerDocument;
    const body = doc.body;
    const win = doc.defaultView;
    const html = doc.documentElement;
    if (body === element.dom) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(body.offsetLeft, body.offsetTop);
    }
    const scrollTop = firstDefinedOrZero(win?.pageYOffset, html.scrollTop);
    const scrollLeft = firstDefinedOrZero(win?.pageXOffset, html.scrollLeft);
    const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);
    const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);
    return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);
};
// This is the old $.position(), but JQuery does nonsense calculations.
// We're only 1 <-> 1 with the old value in the single place we use this function
// (ego.api.Dragging) so the rest can bite me.
const relative = (element)=>{
    const dom = element.dom;
    // jquery-ism: when style="position: fixed", this === boxPosition()
    // but tests reveal it returns the same thing anyway
    return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(dom.offsetLeft, dom.offsetTop);
};
const viewport = (element)=>{
    const dom = element.dom;
    const doc = dom.ownerDocument;
    const body = doc.body;
    if (body === dom) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(body.offsetLeft, body.offsetTop);
    }
    if (!(0,_node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody)(element)) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(0, 0);
    }
    return boxPosition(dom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SugarPosition: () => (SugarPosition)
});
const r = (left, top)=>{
    const translate = (x, y)=>r(left + x, top + y);
    return {
        left,
        top,
        translate
    };
};
// tslint:disable-next-line:variable-name
const SugarPosition = r;


}),
"../sugar/src/main/ts/ephox/sugar/api/view/Width.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Width.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getInner: () => (getInner),
  getOuter: () => (getOuter),
  getRuntime: () => (getRuntime),
  set: () => (set),
  setMax: () => (setMax)
});
/* ESM import */var _impl_Dimension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/Dimension */ "../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts");
/* ESM import */var _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/RuntimeSize */ "../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _properties_Css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");




const api = (0,_impl_Dimension__WEBPACK_IMPORTED_MODULE_0__.Dimension)('width', (element)=>{
    const dom = element.dom;
    return _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element) ? dom.getBoundingClientRect().width : dom.offsetWidth;
});
const set = (element, h)=>api.set(element, h);
const get = (element)=>api.get(element);
const getOuter = (element)=>api.getOuter(element);
const getInner = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getInnerWidth;
const getRuntime = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getWidth;
const setMax = (element, value)=>{
    // These properties affect the absolute max-height, they are not counted natively, we want to include these properties.
    const inclusions = [
        'margin-left',
        'border-left-width',
        'padding-left',
        'padding-right',
        'border-right-width',
        'margin-right'
    ];
    const absMax = api.max(element, value, inclusions);
    _properties_Css__WEBPACK_IMPORTED_MODULE_3__.set(element, 'max-width', absMax + 'px');
};



}),
"../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((is, ancestor, scope, a, isRoot)=>{
    if (is(scope, a)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(scope);
    } else if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isFunction(isRoot) && isRoot(scope)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    } else {
        return ancestor(scope, a, isRoot);
    }
});


}),
"../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Dimension: () => (Dimension)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _Style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Style */ "../sugar/src/main/ts/ephox/sugar/impl/Style.ts");



const Dimension = (name, getOffset)=>{
    const set = (element, h)=>{
        if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isNumber(h) && !h.match(/^[0-9]+$/)) {
            throw new Error(name + '.set accepts only positive integer values. Value was ' + h);
        }
        const dom = element.dom;
        if (_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
            dom.style[name] = h + 'px';
        }
    };
    /*
   * jQuery supports querying width and height on the document and window objects.
   *
   * TBIO doesn't do this, so the code is removed to save space, but left here just in case.
   */ /*
  var getDocumentWidth = (element) => {
    var dom = element.dom;
    if (Node.isDocument(element)) {
      var body = dom.body;
      var doc = dom.documentElement;
      return Math.max(
        body.scrollHeight,
        doc.scrollHeight,
        body.offsetHeight,
        doc.offsetHeight,
        doc.clientHeight
      );
    }
  };

  var getWindowWidth = (element) => {
    var dom = element.dom;
    if (dom.window === dom) {
      // There is no offsetHeight on a window, so use the clientHeight of the document
      return dom.document.documentElement.clientHeight;
    }
  };
*/ const get = (element)=>{
        const r = getOffset(element);
        // zero or null means non-standard or disconnected, fall back to CSS
        if (r <= 0 || r === null) {
            const css = _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__.get(element, name);
            // ugh this feels dirty, but it saves cycles
            return parseFloat(css) || 0;
        }
        return r;
    };
    // in jQuery, getOuter replicates (or uses) box-sizing: border-box calculations
    // although these calculations only seem relevant for quirks mode, and edge cases TBIO doesn't rely on
    const getOuter = get;
    const aggregate = (element, properties)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(properties, (acc, property)=>{
            const val = _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__.get(element, property);
            const value = val === undefined ? 0 : parseInt(val, 10);
            return isNaN(value) ? acc : acc + value;
        }, 0);
    const max = (element, value, properties)=>{
        const cumulativeInclusions = aggregate(element, properties);
        // if max-height is 100px and your cumulativeInclusions is 150px, there is no way max-height can be 100px, so we return 0.
        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;
        return absoluteMax;
    };
    return {
        set,
        get,
        getOuter,
        aggregate,
        max
    };
};


}),
"../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  NodeValue: () => (NodeValue)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const NodeValue = (is, name)=>{
    const get = (element)=>{
        if (!is(element)) {
            throw new Error('Can only get ' + name + ' value of a ' + name + ' node');
        }
        return getOption(element).getOr('');
    };
    const getOption = (element)=>is(element) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(element.dom.nodeValue) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    const set = (element, value)=>{
        if (!is(element)) {
            throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');
        }
        element.dom.nodeValue = value;
    };
    return {
        get,
        getOption,
        set
    };
};


}),
"../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts": 
/*!************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getHeight: () => (getHeight),
  getInnerHeight: () => (getInnerHeight),
  getInnerWidth: () => (getInnerWidth),
  getWidth: () => (getWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _api_properties_Css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");


const toNumber = (px, fallback)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.toFloat(px).getOr(fallback);
const getProp = (element, name, fallback)=>toNumber(_api_properties_Css__WEBPACK_IMPORTED_MODULE_1__.get(element, name), fallback);
const calcContentBoxSize = (element, size, upper, lower)=>{
    const paddingUpper = getProp(element, `padding-${upper}`, 0);
    const paddingLower = getProp(element, `padding-${lower}`, 0);
    const borderUpper = getProp(element, `border-${upper}-width`, 0);
    const borderLower = getProp(element, `border-${lower}-width`, 0);
    return size - paddingUpper - paddingLower - borderUpper - borderLower;
};
const getCalculatedHeight = (element, boxSizing)=>{
    const dom = element.dom;
    const height = dom.getBoundingClientRect().height || dom.offsetHeight;
    return boxSizing === 'border-box' ? height : calcContentBoxSize(element, height, 'top', 'bottom');
};
const getCalculatedWidth = (element, boxSizing)=>{
    const dom = element.dom;
    const width = dom.getBoundingClientRect().width || dom.offsetWidth;
    return boxSizing === 'border-box' ? width : calcContentBoxSize(element, width, 'left', 'right');
};
const getHeight = (element)=>getProp(element, 'height', element.dom.offsetHeight);
const getWidth = (element)=>getProp(element, 'width', element.dom.offsetWidth);
const getInnerHeight = (element)=>getCalculatedHeight(element, 'content-box');
const getInnerWidth = (element)=>getCalculatedWidth(element, 'content-box');



}),
"../sugar/src/main/ts/ephox/sugar/impl/Style.ts": 
/*!******************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/Style.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isSupported: () => (isSupported)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

// some elements, such as mathml, don't have style attributes
// others, such as angular elements, have style attributes that aren't a CSSStyleDeclaration
const isSupported = (dom)=>dom.style !== undefined && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isFunction(dom.style.getPropertyValue);



}),
"./src/plugins/table/main/ts/Plugin.ts": 
/*!*********************************************!*\
  !*** ./src/plugins/table/main/ts/Plugin.ts ***!
  \*********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var tinymce_core_api_PluginManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/PluginManager */ "./lib/globals/tinymce/core/api/PluginManager.js");
/* ESM import */var _api_Commands__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api/Commands */ "./src/plugins/table/main/ts/api/Commands.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./selection/SelectionTargets */ "./src/plugins/table/main/ts/selection/SelectionTargets.ts");
/* ESM import */var _ui_Buttons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui/Buttons */ "./src/plugins/table/main/ts/ui/Buttons.ts");
/* ESM import */var _ui_MenuItems__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui/MenuItems */ "./src/plugins/table/main/ts/ui/MenuItems.ts");






const Plugin = (editor)=>{
    const selectionTargets = (0,_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_3__.getSelectionTargets)(editor);
    _api_Options__WEBPACK_IMPORTED_MODULE_2__.register(editor);
    _api_Commands__WEBPACK_IMPORTED_MODULE_1__.registerCommands(editor);
    _ui_MenuItems__WEBPACK_IMPORTED_MODULE_5__.addMenuItems(editor, selectionTargets);
    _ui_Buttons__WEBPACK_IMPORTED_MODULE_4__.addButtons(editor, selectionTargets);
    _ui_Buttons__WEBPACK_IMPORTED_MODULE_4__.addToolbars(editor);
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{
    tinymce_core_api_PluginManager__WEBPACK_IMPORTED_MODULE_0__["default"].add('table', Plugin);
});


}),
"./src/plugins/table/main/ts/actions/Styles.ts": 
/*!*****************************************************!*\
  !*** ./src/plugins/table/main/ts/actions/Styles.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getTDTHOverallStyle: () => (getTDTHOverallStyle),
  setAlign: () => (setAlign),
  setVAlign: () => (setVAlign)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/util/Tools */ "./lib/globals/tinymce/core/api/util/Tools.js");


const getTDTHOverallStyle = (dom, elm, name)=>{
    const cells = dom.select('td,th', elm);
    let firstChildStyle;
    for(let i = 0; i < cells.length; i++){
        const currentStyle = dom.getStyle(cells[i], name);
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isUndefined(firstChildStyle)) {
            firstChildStyle = currentStyle;
        }
        if (firstChildStyle !== currentStyle) {
            return '';
        }
    }
    return firstChildStyle;
};
const setAlign = (editor, elm, name)=>{
    // Alignment formats may not use the same styles so ensure to remove any existing horizontal alignment format first
    tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].each('left center right'.split(' '), (align)=>{
        if (align !== name) {
            editor.formatter.remove('align' + align, {}, elm);
        }
    });
    if (name) {
        editor.formatter.apply('align' + name, {}, elm);
    }
};
const setVAlign = (editor, elm, name)=>{
    // Alignment formats may not use the same styles so ensure to remove any existing vertical alignment format first
    tinymce_core_api_util_Tools__WEBPACK_IMPORTED_MODULE_0__["default"].each('top middle bottom'.split(' '), (align)=>{
        if (align !== name) {
            editor.formatter.remove('valign' + align, {}, elm);
        }
    });
    if (name) {
        editor.formatter.apply('valign' + name, {}, elm);
    }
};



}),
"./src/plugins/table/main/ts/api/Clipboard.ts": 
/*!****************************************************!*\
  !*** ./src/plugins/table/main/ts/api/Clipboard.ts ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  clearColumns: () => (clearColumns),
  clearRows: () => (clearRows),
  getColumns: () => (getColumns),
  getRows: () => (getRows),
  setColumns: () => (setColumns),
  setRows: () => (setRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/FakeClipboard */ "./lib/globals/tinymce/core/api/FakeClipboard.js");
/*
 NOTE: This file is duplicated in the following locations:
  - models/dom/table/api/Clipboard.ts
 Make sure that if making changes to this file, the other files are updated as well
 */ 

const tableTypeBase = 'x-tinymce/dom-table-';
const tableTypeRow = tableTypeBase + 'rows';
const tableTypeColumn = tableTypeBase + 'columns';
const setData = (items)=>{
    const fakeClipboardItem = tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].FakeClipboardItem(items);
    tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].write([
        fakeClipboardItem
    ]);
};
const getData = (type)=>{
    const items = tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].read() ?? [];
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.findMap(items, (item)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(item.getType(type)));
};
const clearData = (type)=>{
    if (getData(type).isSome()) {
        tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].clear();
    }
};
const setRows = (rowsOpt)=>{
    rowsOpt.fold(clearRows, (rows)=>setData({
            [tableTypeRow]: rows
        }));
};
const getRows = ()=>getData(tableTypeRow);
const clearRows = ()=>clearData(tableTypeRow);
const setColumns = (columnsOpt)=>{
    columnsOpt.fold(clearColumns, (columns)=>setData({
            [tableTypeColumn]: columns
        }));
};
const getColumns = ()=>getData(tableTypeColumn);
const clearColumns = ()=>clearData(tableTypeColumn);



}),
"./src/plugins/table/main/ts/api/Commands.ts": 
/*!***************************************************!*\
  !*** ./src/plugins/table/main/ts/api/Commands.ts ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  registerCommands: () => (registerCommands)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");
/* ESM import */var _ui_CellDialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui/CellDialog */ "./src/plugins/table/main/ts/ui/CellDialog.ts");
/* ESM import */var _ui_RowDialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ui/RowDialog */ "./src/plugins/table/main/ts/ui/RowDialog.ts");
/* ESM import */var _ui_TableDialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/TableDialog */ "./src/plugins/table/main/ts/ui/TableDialog.ts");





const registerCommands = (editor)=>{
    const runAction = (f)=>{
        if (_core_Utils__WEBPACK_IMPORTED_MODULE_0__.isInEditableContext(_core_Utils__WEBPACK_IMPORTED_MODULE_0__.getSelectionStart(editor))) {
            f();
        }
    };
    // Register dialog commands
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.each({
        // AP-101 TableDialog.open renders a slightly different dialog if isNew is true
        mceTableProps: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.curry(_ui_TableDialog__WEBPACK_IMPORTED_MODULE_3__.open, editor, false),
        mceTableRowProps: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.curry(_ui_RowDialog__WEBPACK_IMPORTED_MODULE_2__.open, editor),
        mceTableCellProps: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.curry(_ui_CellDialog__WEBPACK_IMPORTED_MODULE_1__.open, editor),
        mceInsertTableDialog: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.curry(_ui_TableDialog__WEBPACK_IMPORTED_MODULE_3__.open, editor, true)
    }, (func, name)=>editor.addCommand(name, ()=>runAction(func)));
};



}),
"./src/plugins/table/main/ts/api/Events.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/table/main/ts/api/Events.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fireNewCell: () => (fireNewCell),
  fireNewRow: () => (fireNewRow),
  fireTableModified: () => (fireTableModified),
  structureModified: () => (structureModified),
  styleAndStructureModified: () => (styleAndStructureModified),
  styleModified: () => (styleModified)
});
/*
 NOTE: This file is duplicated in the following locations:
  - core/api/TableEvents.ts
  - models/dom/table/api/Events.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ const fireNewRow = (editor, row)=>editor.dispatch('NewRow', {
        node: row
    });
const fireNewCell = (editor, cell)=>editor.dispatch('NewCell', {
        node: cell
    });
const fireTableModified = (editor, table, data)=>{
    editor.dispatch('TableModified', {
        ...data,
        table
    });
};
const styleModified = {
    structure: false,
    style: true
};
const structureModified = {
    structure: true,
    style: false
};
const styleAndStructureModified = {
    structure: true,
    style: true
};



}),
"./src/plugins/table/main/ts/api/Options.ts": 
/*!**************************************************!*\
  !*** ./src/plugins/table/main/ts/api/Options.ts ***!
  \**************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getCellClassList: () => (getCellClassList),
  getDefaultAttributes: () => (getDefaultAttributes),
  getDefaultStyles: () => (getDefaultStyles),
  getRowClassList: () => (getRowClassList),
  getTableBackgroundColorMap: () => (getTableBackgroundColorMap),
  getTableBorderColorMap: () => (getTableBorderColorMap),
  getTableBorderStyles: () => (getTableBorderStyles),
  getTableBorderWidths: () => (getTableBorderWidths),
  getTableClassList: () => (getTableClassList),
  getToolbar: () => (getToolbar),
  hasAdvancedCellTab: () => (hasAdvancedCellTab),
  hasAdvancedRowTab: () => (hasAdvancedRowTab),
  hasAdvancedTableTab: () => (hasAdvancedTableTab),
  hasAppearanceOptions: () => (hasAppearanceOptions),
  hasTableGrid: () => (hasTableGrid),
  register: () => (register),
  shouldStyleWithCss: () => (shouldStyleWithCss)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var tinymce_core_api_Env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/Env */ "./lib/globals/tinymce/core/api/Env.js");



const defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';
const defaultCellBorderWidths = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(5, (i)=>{
    const size = `${i + 1}px`;
    return {
        title: size,
        value: size
    };
});
const defaultCellBorderStyles = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map([
    'Solid',
    'Dotted',
    'Dashed',
    'Double',
    'Groove',
    'Ridge',
    'Inset',
    'Outset',
    'None',
    'Hidden'
], (type)=>{
    return {
        title: type,
        value: type.toLowerCase()
    };
});
// Note: This is also contained in the core Options.ts file
const defaultWidth = '100%';
const getPixelForcedWidth = (editor)=>{
    // Determine the inner size of the parent block element where the table will be inserted
    const dom = editor.dom;
    const parentBlock = dom.getParent(editor.selection.getStart(), dom.isBlock) ?? editor.getBody();
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getInner(_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(parentBlock)) + 'px';
};
// Note: This is also contained in the core Options.ts file
const determineDefaultStyles = (editor, defaultStyles)=>{
    if (isResponsiveForced(editor) || !shouldStyleWithCss(editor)) {
        return defaultStyles;
    } else if (isPixelsForced(editor)) {
        return {
            ...defaultStyles,
            width: getPixelForcedWidth(editor)
        };
    } else {
        return {
            ...defaultStyles,
            width: defaultWidth
        };
    }
};
// Note: This is also contained in the core Options.ts file
const determineDefaultAttributes = (editor, defaultAttributes)=>{
    if (isResponsiveForced(editor) || shouldStyleWithCss(editor)) {
        return defaultAttributes;
    } else if (isPixelsForced(editor)) {
        return {
            ...defaultAttributes,
            width: getPixelForcedWidth(editor)
        };
    } else {
        return {
            ...defaultAttributes,
            width: defaultWidth
        };
    }
};
const option = (name)=>(editor)=>editor.options.get(name);
const register = (editor)=>{
    const registerOption = editor.options.register;
    registerOption('table_border_widths', {
        processor: 'object[]',
        default: defaultCellBorderWidths
    });
    registerOption('table_border_styles', {
        processor: 'object[]',
        default: defaultCellBorderStyles
    });
    registerOption('table_cell_advtab', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_row_advtab', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_advtab', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_appearance_options', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_grid', {
        processor: 'boolean',
        // Table grid relies on hover, which isn't available on touch devices so use the dialog instead
        default: !tinymce_core_api_Env__WEBPACK_IMPORTED_MODULE_0__["default"].deviceType.isTouch()
    });
    registerOption('table_cell_class_list', {
        processor: 'object[]',
        default: []
    });
    registerOption('table_row_class_list', {
        processor: 'object[]',
        default: []
    });
    registerOption('table_class_list', {
        processor: 'object[]',
        default: []
    });
    registerOption('table_toolbar', {
        processor: 'string',
        default: defaultTableToolbar
    });
    registerOption('table_background_color_map', {
        processor: 'object[]',
        default: []
    });
    registerOption('table_border_color_map', {
        processor: 'object[]',
        default: []
    });
};
const getTableSizingMode = option('table_sizing_mode');
const getTableBorderWidths = option('table_border_widths');
const getTableBorderStyles = option('table_border_styles');
const hasAdvancedCellTab = option('table_cell_advtab');
const hasAdvancedRowTab = option('table_row_advtab');
const hasAdvancedTableTab = option('table_advtab');
const hasAppearanceOptions = option('table_appearance_options');
const hasTableGrid = option('table_grid');
const shouldStyleWithCss = option('table_style_by_css');
const getCellClassList = option('table_cell_class_list');
const getRowClassList = option('table_row_class_list');
const getTableClassList = option('table_class_list');
const getToolbar = option('table_toolbar');
const getTableBackgroundColorMap = option('table_background_color_map');
const getTableBorderColorMap = option('table_border_color_map');
const isPixelsForced = (editor)=>getTableSizingMode(editor) === 'fixed';
const isResponsiveForced = (editor)=>getTableSizingMode(editor) === 'responsive';
const getDefaultStyles = (editor)=>{
    // Note: The we don't rely on the default here as we need to dynamically lookup the widths based on the current editor state
    const options = editor.options;
    const defaultStyles = options.get('table_default_styles');
    return options.isSet('table_default_styles') ? defaultStyles : determineDefaultStyles(editor, defaultStyles);
};
const getDefaultAttributes = (editor)=>{
    // Note: The we don't rely on the default here as we need to dynamically lookup the widths based on the current editor state
    const options = editor.options;
    const defaultAttributes = options.get('table_default_attributes');
    return options.isSet('table_default_attributes') ? defaultAttributes : determineDefaultAttributes(editor, defaultAttributes);
};



}),
"./src/plugins/table/main/ts/core/Utils.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/table/main/ts/core/Utils.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addPxSuffix: () => (addPxSuffix),
  getBody: () => (getBody),
  getIsRoot: () => (getIsRoot),
  getNodeName: () => (getNodeName),
  getSelectionEnd: () => (getSelectionEnd),
  getSelectionStart: () => (getSelectionStart),
  isInEditableContext: () => (isInEditableContext),
  removePxSuffix: () => (removePxSuffix)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - models/dom/table/core/TableUtils.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 
const getNodeName = (elm)=>elm.nodeName.toLowerCase();
const getBody = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.getBody());
const getIsRoot = (editor)=>(element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, getBody(editor));
const removePxSuffix = (size)=>size ? size.replace(/px$/, '') : '';
const addPxSuffix = (size)=>/^\d+(\.\d+)?$/.test(size) ? size + 'px' : size;
const getSelectionStart = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.selection.getStart());
const getSelectionEnd = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.selection.getEnd());
const isInEditableContext = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.closest(cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.isTag('table')).forall(_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.isEditable);



}),
"./src/plugins/table/main/ts/queries/TableTargets.ts": 
/*!***********************************************************!*\
  !*** ./src/plugins/table/main/ts/queries/TableTargets.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  forMenu: () => (forMenu),
  noMenu: () => (noMenu)
});
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _selection_Ephemera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../selection/Ephemera */ "./src/plugins/table/main/ts/selection/Ephemera.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - models/dom/table/queries/TableTargets.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 


const noMenu = (cell)=>({
        element: cell,
        mergable: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none(),
        unmergable: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none(),
        selection: [
            cell
        ]
    });
const forMenu = (selectedCells, table, cell)=>({
        element: cell,
        mergable: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.mergable(table, selectedCells, _selection_Ephemera__WEBPACK_IMPORTED_MODULE_0__.ephemera),
        unmergable: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.unmergable(selectedCells),
        selection: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.selection(selectedCells)
    });



}),
"./src/plugins/table/main/ts/selection/Ephemera.ts": 
/*!*********************************************************!*\
  !*** ./src/plugins/table/main/ts/selection/Ephemera.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  attributeSelector: () => (attributeSelector),
  ephemera: () => (ephemera)
});
/*
 NOTE: This file is duplicated in the following locations:
  - models/dom/table/selection/Ephemera.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ const strSelected = 'data-mce-selected';
const strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';
// used with not selectors
const strAttributeSelector = '[' + strSelected + ']';
const strFirstSelected = 'data-mce-first-selected';
const strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';
const strLastSelected = 'data-mce-last-selected';
const strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';
const attributeSelector = strAttributeSelector;
const ephemera = {
    selected: strSelected,
    selectedSelector: strSelectedSelector,
    firstSelected: strFirstSelected,
    firstSelectedSelector: strFirstSelectedSelector,
    lastSelected: strLastSelected,
    lastSelectedSelector: strLastSelectedSelector
};


}),
"./src/plugins/table/main/ts/selection/SelectionTargets.ts": 
/*!*****************************************************************!*\
  !*** ./src/plugins/table/main/ts/selection/SelectionTargets.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  LockedDisable: () => (LockedDisable),
  getSelectionTargets: () => (getSelectionTargets)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Cell.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Thunk.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorExists.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");
/* ESM import */var _queries_TableTargets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../queries/TableTargets */ "./src/plugins/table/main/ts/queries/TableTargets.ts");
/* ESM import */var _TableSelection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableSelection */ "./src/plugins/table/main/ts/selection/TableSelection.ts");






/*
 onAny - disable if any column in the selection is locked
 onFirst - disable if the first column in the table is selected and is locked
 onLast - disable if the the last column in the table is selected and is locked
 */ var LockedDisable = /*#__PURE__*/ function(LockedDisable) {
    LockedDisable["onAny"] = "onAny";
    LockedDisable["onFirst"] = "onFirst";
    LockedDisable["onLast"] = "onLast";
    return LockedDisable;
}({});
const getSelectionTargets = (editor)=>{
    const targets = (0,_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Cell)(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none());
    const changeHandlers = (0,_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Cell)([]);
    let selectionDetails = _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
    const isCaption = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.isTag('caption');
    const isDisabledForSelection = (key)=>selectionDetails.forall((details)=>!details[key]);
    const getStart = ()=>_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getSelectionCellOrCaption(_core_Utils__WEBPACK_IMPORTED_MODULE_0__.getSelectionStart(editor), _core_Utils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor));
    const getEnd = ()=>_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getSelectionCellOrCaption(_core_Utils__WEBPACK_IMPORTED_MODULE_0__.getSelectionEnd(editor), _core_Utils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor));
    const findTargets = ()=>getStart().bind((startCellOrCaption)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.flatten(_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.lift2(_ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(startCellOrCaption), getEnd().bind(_ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table), (startTable, endTable)=>{
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.eq(startTable, endTable)) {
                    if (isCaption(startCellOrCaption)) {
                        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_queries_TableTargets__WEBPACK_IMPORTED_MODULE_1__.noMenu(startCellOrCaption));
                    } else {
                        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_queries_TableTargets__WEBPACK_IMPORTED_MODULE_1__.forMenu(_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getCellsFromSelection(editor), startTable, startCellOrCaption));
                    }
                }
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            })));
    const getExtractedDetails = (targets)=>{
        const tableOpt = _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(targets.element);
        return tableOpt.map((table)=>{
            const warehouse = _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.Warehouse.fromTable(table);
            const selectedCells = _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__.onCells(warehouse, targets).getOr([]);
            const locked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.foldl(selectedCells, (acc, cell)=>{
                if (cell.isLocked) {
                    acc.onAny = true;
                    if (cell.column === 0) {
                        acc.onFirst = true;
                    } else if (cell.column + cell.colspan >= warehouse.grid.columns) {
                        acc.onLast = true;
                    }
                }
                return acc;
            }, {
                onAny: false,
                onFirst: false,
                onLast: false
            });
            return {
                mergeable: _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__.onUnlockedMergable(warehouse, targets).isSome(),
                unmergeable: _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__.onUnlockedUnmergable(warehouse, targets).isSome(),
                locked
            };
        });
    };
    const resetTargets = ()=>{
        // Reset the targets
        targets.set(_ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.cached(findTargets)());
        // Reset the selection details
        selectionDetails = targets.get().bind(getExtractedDetails);
        // Trigger change handlers
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.each(changeHandlers.get(), _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.call);
    };
    const setupHandler = (handler)=>{
        // Execute the handler to set the initial state
        handler();
        // Register the handler so we can update the state when resetting targets
        changeHandlers.set(changeHandlers.get().concat([
            handler
        ]));
        return ()=>{
            changeHandlers.set(_ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.filter(changeHandlers.get(), (h)=>h !== handler));
        };
    };
    const onSetup = (api, isDisabled)=>setupHandler(()=>targets.get().fold(()=>{
                api.setEnabled(false);
            }, (targets)=>{
                api.setEnabled(!isDisabled(targets) && editor.selection.isEditable());
            }));
    const onSetupWithToggle = (api, isDisabled, isActive)=>setupHandler(()=>targets.get().fold(()=>{
                api.setEnabled(false);
                api.setActive(false);
            }, (targets)=>{
                api.setEnabled(!isDisabled(targets) && editor.selection.isEditable());
                api.setActive(isActive(targets));
            }));
    const isDisabledFromLocked = (lockedDisable)=>selectionDetails.exists((details)=>details.locked[lockedDisable]);
    const onSetupTable = (api)=>onSetup(api, (_)=>false);
    const onSetupCellOrRow = (api)=>onSetup(api, (targets)=>isCaption(targets.element));
    const onSetupColumn = (lockedDisable)=>(api)=>onSetup(api, (targets)=>isCaption(targets.element) || isDisabledFromLocked(lockedDisable));
    const onSetupPasteable = (getClipboardData)=>(api)=>onSetup(api, (targets)=>isCaption(targets.element) || getClipboardData().isNone());
    const onSetupPasteableColumn = (getClipboardData, lockedDisable)=>(api)=>onSetup(api, (targets)=>isCaption(targets.element) || getClipboardData().isNone() || isDisabledFromLocked(lockedDisable));
    const onSetupMergeable = (api)=>onSetup(api, (_targets)=>isDisabledForSelection('mergeable'));
    const onSetupUnmergeable = (api)=>onSetup(api, (_targets)=>isDisabledForSelection('unmergeable'));
    const onSetupTableWithCaption = (api)=>{
        return onSetupWithToggle(api, _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.never, (targets)=>{
            const tableOpt = _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(targets.element, _core_Utils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor));
            return tableOpt.exists((table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.child(table, 'caption'));
        });
    };
    const onSetupTableHeaders = (command, headerType)=>(api)=>{
            return onSetupWithToggle(api, (targets)=>isCaption(targets.element), ()=>editor.queryCommandValue(command) === headerType);
        };
    const onSetupTableRowHeaders = onSetupTableHeaders('mceTableRowType', 'header');
    const onSetupTableColumnHeaders = onSetupTableHeaders('mceTableColType', 'th');
    editor.on('NodeChange ExecCommand TableSelectorChange', resetTargets);
    return {
        onSetupTable,
        onSetupCellOrRow,
        onSetupColumn,
        onSetupPasteable,
        onSetupPasteableColumn,
        onSetupMergeable,
        onSetupUnmergeable,
        resetTargets,
        onSetupTableWithCaption,
        onSetupTableRowHeaders,
        onSetupTableColumnHeaders,
        targets: targets.get
    };
};


}),
"./src/plugins/table/main/ts/selection/TableSelection.ts": 
/*!***************************************************************!*\
  !*** ./src/plugins/table/main/ts/selection/TableSelection.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getCellsFromSelection: () => (getCellsFromSelection),
  getRowsFromSelection: () => (getRowsFromSelection),
  getSelectionCell: () => (getSelectionCell),
  getSelectionCellOrCaption: () => (getSelectionCellOrCaption)
});
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _Ephemera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ephemera */ "./src/plugins/table/main/ts/selection/Ephemera.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - models/dom/table/selection/TableSelection.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 




const getSelectionCellFallback = (element)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.table(element).bind((table)=>_ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.retrieve(table, _Ephemera__WEBPACK_IMPORTED_MODULE_0__.ephemera.firstSelectedSelector)).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(element), (cells)=>cells[0]);
const getSelectionFromSelector = (selector)=>(initCell, isRoot)=>{
        const cellName = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(initCell);
        const cell = cellName === 'col' || cellName === 'colgroup' ? getSelectionCellFallback(initCell) : initCell;
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.closest(cell, selector, isRoot);
    };
const getSelectionCellOrCaption = getSelectionFromSelector('th,td,caption');
const getSelectionCell = getSelectionFromSelector('th,td');
const getCellsFromSelection = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.fromDom(editor.model.table.getSelectedCells());
const getRowsFromSelection = (selected, selector)=>{
    const cellOpt = getSelectionCell(selected);
    const rowsOpt = cellOpt.bind((cell)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.table(cell)).map((table)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.rows(table));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.lift2(cellOpt, rowsOpt, (cell, rows)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.filter(rows, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.exists(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.fromDom(row.dom.cells), (rowCell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get(rowCell, selector) === '1' || _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.eq(rowCell, cell)))).getOr([]);
};



}),
"./src/plugins/table/main/ts/ui/Buttons.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/Buttons.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addButtons: () => (addButtons),
  addToolbars: () => (addToolbars)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _api_Clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Clipboard */ "./src/plugins/table/main/ts/api/Clipboard.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../selection/SelectionTargets */ "./src/plugins/table/main/ts/selection/SelectionTargets.ts");
/* ESM import */var _CellAlignValues__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CellAlignValues */ "./src/plugins/table/main/ts/ui/CellAlignValues.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");






const onSetupEditable = (editor)=>(api)=>{
        const nodeChanged = ()=>{
            api.setEnabled(editor.selection.isEditable());
        };
        editor.on('NodeChange', nodeChanged);
        nodeChanged();
        return ()=>{
            editor.off('NodeChange', nodeChanged);
        };
    };
const addButtons = (editor, selectionTargets)=>{
    editor.ui.registry.addMenuButton('table', {
        tooltip: 'Table',
        icon: 'table',
        onSetup: onSetupEditable(editor),
        fetch: (callback)=>callback('inserttable | cell row column | advtablesort | tableprops deletetable')
    });
    const cmd = (command)=>()=>editor.execCommand(command);
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    const addButtonIfRegistered = (name, spec)=>{
        if (editor.queryCommandSupported(spec.command)) {
            editor.ui.registry.addButton(name, {
                ...spec,
                onAction: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(spec.onAction) ? spec.onAction : cmd(spec.command)
            });
        }
    };
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    const addToggleButtonIfRegistered = (name, spec)=>{
        if (editor.queryCommandSupported(spec.command)) {
            editor.ui.registry.addToggleButton(name, {
                ...spec,
                onAction: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(spec.onAction) ? spec.onAction : cmd(spec.command)
            });
        }
    };
    addButtonIfRegistered('tableprops', {
        tooltip: 'Table properties',
        command: 'mceTableProps',
        icon: 'table',
        onSetup: selectionTargets.onSetupTable
    });
    addButtonIfRegistered('tabledelete', {
        tooltip: 'Delete table',
        command: 'mceTableDelete',
        icon: 'table-delete-table',
        onSetup: selectionTargets.onSetupTable
    });
    addButtonIfRegistered('tablecellprops', {
        tooltip: 'Cell properties',
        command: 'mceTableCellProps',
        icon: 'table-cell-properties',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tablemergecells', {
        tooltip: 'Merge cells',
        command: 'mceTableMergeCells',
        icon: 'table-merge-cells',
        onSetup: selectionTargets.onSetupMergeable
    });
    addButtonIfRegistered('tablesplitcells', {
        tooltip: 'Split cell',
        command: 'mceTableSplitCells',
        icon: 'table-split-cells',
        onSetup: selectionTargets.onSetupUnmergeable
    });
    addButtonIfRegistered('tableinsertrowbefore', {
        tooltip: 'Insert row before',
        command: 'mceTableInsertRowBefore',
        icon: 'table-insert-row-above',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tableinsertrowafter', {
        tooltip: 'Insert row after',
        command: 'mceTableInsertRowAfter',
        icon: 'table-insert-row-after',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tabledeleterow', {
        tooltip: 'Delete row',
        command: 'mceTableDeleteRow',
        icon: 'table-delete-row',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tablerowprops', {
        tooltip: 'Row properties',
        command: 'mceTableRowProps',
        icon: 'table-row-properties',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tableinsertcolbefore', {
        tooltip: 'Insert column before',
        command: 'mceTableInsertColBefore',
        icon: 'table-insert-column-before',
        onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onFirst)
    });
    addButtonIfRegistered('tableinsertcolafter', {
        tooltip: 'Insert column after',
        command: 'mceTableInsertColAfter',
        icon: 'table-insert-column-after',
        onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onLast)
    });
    addButtonIfRegistered('tabledeletecol', {
        tooltip: 'Delete column',
        command: 'mceTableDeleteCol',
        icon: 'table-delete-column',
        onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
    });
    addButtonIfRegistered('tablecutrow', {
        tooltip: 'Cut row',
        command: 'mceTableCutRow',
        icon: 'cut-row',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tablecopyrow', {
        tooltip: 'Copy row',
        command: 'mceTableCopyRow',
        icon: 'duplicate-row',
        onSetup: selectionTargets.onSetupCellOrRow
    });
    addButtonIfRegistered('tablepasterowbefore', {
        tooltip: 'Paste row before',
        command: 'mceTablePasteRowBefore',
        icon: 'paste-row-before',
        onSetup: selectionTargets.onSetupPasteable(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getRows)
    });
    addButtonIfRegistered('tablepasterowafter', {
        tooltip: 'Paste row after',
        command: 'mceTablePasteRowAfter',
        icon: 'paste-row-after',
        onSetup: selectionTargets.onSetupPasteable(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getRows)
    });
    addButtonIfRegistered('tablecutcol', {
        tooltip: 'Cut column',
        command: 'mceTableCutCol',
        icon: 'cut-column',
        onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
    });
    addButtonIfRegistered('tablecopycol', {
        tooltip: 'Copy column',
        command: 'mceTableCopyCol',
        icon: 'duplicate-column',
        onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
    });
    addButtonIfRegistered('tablepastecolbefore', {
        tooltip: 'Paste column before',
        command: 'mceTablePasteColBefore',
        icon: 'paste-column-before',
        onSetup: selectionTargets.onSetupPasteableColumn(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getColumns, _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onFirst)
    });
    addButtonIfRegistered('tablepastecolafter', {
        tooltip: 'Paste column after',
        command: 'mceTablePasteColAfter',
        icon: 'paste-column-after',
        onSetup: selectionTargets.onSetupPasteableColumn(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getColumns, _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onLast)
    });
    addButtonIfRegistered('tableinsertdialog', {
        tooltip: 'Insert table',
        command: 'mceInsertTableDialog',
        icon: 'table',
        onSetup: onSetupEditable(editor)
    });
    const tableClassList = (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.filterNoneItem)(_api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableClassList(editor));
    if (tableClassList.length !== 0 && editor.queryCommandSupported('mceTableToggleClass')) {
        editor.ui.registry.addMenuButton('tableclass', {
            icon: 'table-classes',
            tooltip: 'Table styles',
            fetch: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.generateMenuItemsCallback)(editor, tableClassList, 'tableclass', (value)=>editor.execCommand('mceTableToggleClass', false, value)),
            onSetup: selectionTargets.onSetupTable
        });
    }
    const tableCellClassList = (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.filterNoneItem)(_api_Options__WEBPACK_IMPORTED_MODULE_1__.getCellClassList(editor));
    if (tableCellClassList.length !== 0 && editor.queryCommandSupported('mceTableCellToggleClass')) {
        editor.ui.registry.addMenuButton('tablecellclass', {
            icon: 'table-cell-classes',
            tooltip: 'Cell styles',
            fetch: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.generateMenuItemsCallback)(editor, tableCellClassList, 'tablecellclass', (value)=>editor.execCommand('mceTableCellToggleClass', false, value)),
            onSetup: selectionTargets.onSetupCellOrRow
        });
    }
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    if (editor.queryCommandSupported('mceTableApplyCellStyle')) {
        editor.ui.registry.addMenuButton('tablecellvalign', {
            icon: 'vertical-align',
            tooltip: 'Vertical align',
            fetch: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.generateMenuItemsCallback)(editor, _CellAlignValues__WEBPACK_IMPORTED_MODULE_3__.verticalAlignValues, 'tablecellverticalalign', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'vertical-align')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addMenuButton('tablecellborderwidth', {
            icon: 'border-width',
            tooltip: 'Border width',
            fetch: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.generateMenuItemsCallback)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderWidths(editor), 'tablecellborderwidth', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'border-width')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addMenuButton('tablecellborderstyle', {
            icon: 'border-style',
            tooltip: 'Border style',
            fetch: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.generateMenuItemsCallback)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderStyles(editor), 'tablecellborderstyle', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'border-style')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addMenuButton('tablecellbackgroundcolor', {
            icon: 'cell-background-color',
            tooltip: 'Background color',
            fetch: (callback)=>callback((0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildColorMenu)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBackgroundColorMap(editor), 'background-color')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addMenuButton('tablecellbordercolor', {
            icon: 'cell-border-color',
            tooltip: 'Border color',
            fetch: (callback)=>callback((0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildColorMenu)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderColorMap(editor), 'border-color')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
    }
    addToggleButtonIfRegistered('tablecaption', {
        tooltip: 'Table caption',
        icon: 'table-caption',
        command: 'mceTableToggleCaption',
        onSetup: selectionTargets.onSetupTableWithCaption
    });
    addToggleButtonIfRegistered('tablerowheader', {
        tooltip: 'Row header',
        icon: 'table-top-header',
        command: 'mceTableRowType',
        onAction: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.changeRowHeader)(editor),
        onSetup: selectionTargets.onSetupTableRowHeaders
    });
    addToggleButtonIfRegistered('tablecolheader', {
        tooltip: 'Column header',
        icon: 'table-left-header',
        command: 'mceTableColType',
        onAction: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.changeColumnHeader)(editor),
        onSetup: selectionTargets.onSetupTableColumnHeaders
    });
};
const addToolbars = (editor)=>{
    const isEditableTable = (table)=>editor.dom.is(table, 'table') && editor.getBody().contains(table) && editor.dom.isEditable(table.parentNode);
    const toolbar = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getToolbar(editor);
    if (toolbar.length > 0) {
        editor.ui.registry.addContextToolbar('table', {
            predicate: isEditableTable,
            items: toolbar,
            scope: 'node',
            position: 'node'
        });
    }
};



}),
"./src/plugins/table/main/ts/ui/CellAlignValues.ts": 
/*!*********************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/CellAlignValues.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  verticalAlignValues: () => (verticalAlignValues)
});
const verticalAlignValues = [
    {
        text: 'None',
        value: ''
    },
    {
        text: 'Top',
        value: 'top'
    },
    {
        text: 'Middle',
        value: 'middle'
    },
    {
        text: 'Bottom',
        value: 'bottom'
    }
];



}),
"./src/plugins/table/main/ts/ui/CellDialog.ts": 
/*!****************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/CellDialog.ts ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  open: () => (open)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _actions_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actions/Styles */ "./src/plugins/table/main/ts/actions/Styles.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Events */ "./src/plugins/table/main/ts/api/Events.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/plugins/table/main/ts/selection/TableSelection.ts");
/* ESM import */var _CellDialogGeneralTab__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CellDialogGeneralTab */ "./src/plugins/table/main/ts/ui/CellDialogGeneralTab.ts");
/* ESM import */var _DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DialogAdvancedTab */ "./src/plugins/table/main/ts/ui/DialogAdvancedTab.ts");
/* ESM import */var _DomModifier__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./DomModifier */ "./src/plugins/table/main/ts/ui/DomModifier.ts");
/* ESM import */var _Helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Helpers */ "./src/plugins/table/main/ts/ui/Helpers.ts");












const getSelectedCells = (table, cells)=>{
    const warehouse = _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.Warehouse.fromTable(table);
    const allCells = _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.Warehouse.justCells(warehouse);
    const filtered = _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.filter(allCells, (cellA)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.exists(cells, (cellB)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.eq(cellA.element, cellB)));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.map(filtered, (cell)=>({
            element: cell.element.dom,
            column: _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.Warehouse.getColumnAt(warehouse, cell.column).map((col)=>col.element.dom)
        }));
};
const updateSimpleProps = (modifier, colModifier, data, shouldUpdate)=>{
    if (shouldUpdate('scope')) {
        modifier.setAttrib('scope', data.scope);
    }
    if (shouldUpdate('class') && data.class !== 'mce-no-match') {
        modifier.setAttrib('class', data.class);
    }
    if (shouldUpdate('width')) {
        colModifier.setStyle('width', _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.width));
    }
};
const updateAdvancedProps = (modifier, data, shouldUpdate)=>{
    if (shouldUpdate('backgroundcolor')) {
        modifier.setFormat('tablecellbackgroundcolor', data.backgroundcolor);
    }
    if (shouldUpdate('bordercolor')) {
        modifier.setFormat('tablecellbordercolor', data.bordercolor);
    }
    if (shouldUpdate('borderstyle')) {
        modifier.setFormat('tablecellborderstyle', data.borderstyle);
    }
    if (shouldUpdate('borderwidth')) {
        modifier.setFormat('tablecellborderwidth', _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.borderwidth));
    }
};
const applyStyleData = (editor, cells, data, wasChanged)=>{
    const isSingleCell = cells.length === 1;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each(cells, (item)=>{
        const cellElm = item.element;
        const shouldOverrideCurrentValue = isSingleCell ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.always : wasChanged;
        const modifier = _DomModifier__WEBPACK_IMPORTED_MODULE_7__.DomModifier.normal(editor, cellElm);
        const colModifier = item.column.map((col)=>_DomModifier__WEBPACK_IMPORTED_MODULE_7__.DomModifier.normal(editor, col)).getOr(modifier);
        updateSimpleProps(modifier, colModifier, data, shouldOverrideCurrentValue);
        if (_api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedCellTab(editor)) {
            updateAdvancedProps(modifier, data, shouldOverrideCurrentValue);
        }
        // Apply alignment
        if (wasChanged('halign')) {
            _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.setAlign(editor, cellElm, data.halign);
        }
        // Apply vertical alignment
        if (wasChanged('valign')) {
            _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.setVAlign(editor, cellElm, data.valign);
        }
    });
};
const applyStructureData = (editor, data)=>{
    // Switch cell type if applicable. Note that we specifically tell the command to not fire events
    // as we'll batch the events and fire a `TableModified` event at the end of the updates.
    editor.execCommand('mceTableCellType', false, {
        type: data.celltype,
        no_events: true
    });
};
const applyCellData = (editor, cells, oldData, data)=>{
    const modifiedData = _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.filter(data, (value, key)=>oldData[key] !== value);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.size(modifiedData) > 0 && cells.length >= 1) {
        // Retrieve the table before the cells are modified as there is a case where cells
        // are replaced and the reference will be lost when trying to fire events.
        _ephox_snooker__WEBPACK_IMPORTED_MODULE_14__.table(cells[0]).each((table)=>{
            const selectedCells = getSelectedCells(table, cells);
            // style modified if there's at least one other change apart from 'celltype' and 'scope'
            const styleModified = _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.size(_ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.filter(modifiedData, (_value, key)=>key !== 'scope' && key !== 'celltype')) > 0;
            const structureModified = _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.has(modifiedData, 'celltype');
            // Update the cells styling using the dialog data
            if (styleModified || _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.has(modifiedData, 'scope')) {
                applyStyleData(editor, selectedCells, data, _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.curry(_ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.has, modifiedData));
            }
            // Update the cells structure using the dialog data
            if (structureModified) {
                applyStructureData(editor, data);
            }
            _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, {
                structure: structureModified,
                style: styleModified
            });
        });
    }
};
const onSubmitCellForm = (editor, cells, oldData, api)=>{
    const data = api.getData();
    api.close();
    editor.undoManager.transact(()=>{
        applyCellData(editor, cells, oldData, data);
        editor.focus();
    });
};
const getData = (editor, cells)=>{
    const cellsData = _ephox_snooker__WEBPACK_IMPORTED_MODULE_14__.table(cells[0]).map((table)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.map(getSelectedCells(table, cells), (item)=>_Helpers__WEBPACK_IMPORTED_MODULE_8__.extractDataFromCellElement(editor, item.element, _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedCellTab(editor), item.column)));
    return _Helpers__WEBPACK_IMPORTED_MODULE_8__.getSharedValues(cellsData.getOrDie());
};
const open = (editor)=>{
    const cells = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor);
    // Check if there are any cells to operate on
    if (cells.length === 0) {
        return;
    }
    const data = getData(editor, cells);
    const dialogTabPanel = {
        type: 'tabpanel',
        tabs: [
            {
                title: 'General',
                name: 'general',
                items: _CellDialogGeneralTab__WEBPACK_IMPORTED_MODULE_5__.getItems(editor)
            },
            (0,_DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_6__.getAdvancedTab)(editor, 'cell')
        ]
    };
    const dialogPanel = {
        type: 'panel',
        items: [
            {
                type: 'grid',
                columns: 2,
                items: _CellDialogGeneralTab__WEBPACK_IMPORTED_MODULE_5__.getItems(editor)
            }
        ]
    };
    editor.windowManager.open({
        title: 'Cell Properties',
        size: 'normal',
        body: _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,
        buttons: [
            {
                type: 'cancel',
                name: 'cancel',
                text: 'Cancel'
            },
            {
                type: 'submit',
                name: 'save',
                text: 'Save',
                primary: true
            }
        ],
        initialData: data,
        onSubmit: _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.curry(onSubmitCellForm, editor, cells, data)
    });
};



}),
"./src/plugins/table/main/ts/ui/CellDialogGeneralTab.ts": 
/*!**************************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/CellDialogGeneralTab.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getItems: () => (getItems)
});
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _CellAlignValues__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CellAlignValues */ "./src/plugins/table/main/ts/ui/CellAlignValues.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");



const getClassList = (editor)=>_UiUtils__WEBPACK_IMPORTED_MODULE_2__.buildClassList(_api_Options__WEBPACK_IMPORTED_MODULE_0__.getCellClassList(editor)).map((items)=>({
            name: 'class',
            type: 'listbox',
            label: 'Class',
            items
        }));
const children = [
    {
        name: 'width',
        type: 'input',
        label: 'Width'
    },
    {
        name: 'celltype',
        type: 'listbox',
        label: 'Cell type',
        items: [
            {
                text: 'Cell',
                value: 'td'
            },
            {
                text: 'Header cell',
                value: 'th'
            }
        ]
    },
    {
        name: 'scope',
        type: 'listbox',
        label: 'Scope',
        items: [
            {
                text: 'None',
                value: ''
            },
            {
                text: 'Row',
                value: 'row'
            },
            {
                text: 'Column',
                value: 'col'
            },
            {
                text: 'Row group',
                value: 'rowgroup'
            },
            {
                text: 'Column group',
                value: 'colgroup'
            }
        ]
    },
    {
        name: 'halign',
        type: 'listbox',
        label: 'Horizontal align',
        items: [
            {
                text: 'None',
                value: ''
            },
            {
                text: 'Left',
                value: 'left'
            },
            {
                text: 'Center',
                value: 'center'
            },
            {
                text: 'Right',
                value: 'right'
            }
        ]
    },
    {
        name: 'valign',
        type: 'listbox',
        label: 'Vertical align',
        items: _CellAlignValues__WEBPACK_IMPORTED_MODULE_1__.verticalAlignValues
    }
];
const getItems = (editor)=>children.concat(getClassList(editor).toArray());



}),
"./src/plugins/table/main/ts/ui/DialogAdvancedTab.ts": 
/*!***********************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/DialogAdvancedTab.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAdvancedTab: () => (getAdvancedTab)
});
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");


const getAdvancedTab = (editor, dialogName)=>{
    const emptyBorderStyle = [
        {
            text: 'Select...',
            value: ''
        }
    ];
    const advTabItems = [
        {
            name: 'borderstyle',
            type: 'listbox',
            label: 'Border style',
            items: emptyBorderStyle.concat((0,_UiUtils__WEBPACK_IMPORTED_MODULE_1__.buildListItems)(_api_Options__WEBPACK_IMPORTED_MODULE_0__.getTableBorderStyles(editor)))
        },
        {
            name: 'bordercolor',
            type: 'colorinput',
            label: 'Border color'
        },
        {
            name: 'backgroundcolor',
            type: 'colorinput',
            label: 'Background color'
        }
    ];
    const borderWidth = {
        name: 'borderwidth',
        type: 'input',
        label: 'Border width'
    };
    const items = dialogName === 'cell' ? [
        borderWidth
    ].concat(advTabItems) : advTabItems;
    return {
        title: 'Advanced',
        name: 'advanced',
        items
    };
};



}),
"./src/plugins/table/main/ts/ui/DomModifier.ts": 
/*!*****************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/DomModifier.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DomModifier: () => (DomModifier)
});
// The get node is required here because it can be transformed
// when switching between tags (e.g. th and td)
const normal = (editor, element)=>{
    const dom = editor.dom;
    const setAttrib = (attr, value)=>{
        dom.setAttrib(element, attr, value);
    };
    const setStyle = (prop, value)=>{
        dom.setStyle(element, prop, value);
    };
    const setFormat = (formatName, value)=>{
        // Remove format if given an empty string
        if (value === '') {
            editor.formatter.remove(formatName, {
                value: null
            }, element, true);
        } else {
            editor.formatter.apply(formatName, {
                value
            }, element);
        }
    };
    return {
        setAttrib,
        setStyle,
        setFormat
    };
};
const DomModifier = {
    normal
};


}),
"./src/plugins/table/main/ts/ui/Helpers.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/Helpers.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  extractAdvancedStyles: () => (extractAdvancedStyles),
  extractDataFromCellElement: () => (extractDataFromCellElement),
  extractDataFromRowElement: () => (extractDataFromRowElement),
  extractDataFromSettings: () => (extractDataFromSettings),
  extractDataFromTableElement: () => (extractDataFromTableElement),
  getSharedValues: () => (getSharedValues)
});
/* ESM import */var _ephox_acid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/acid */ "../acid/src/main/ts/ephox/acid/api/colour/Transformations.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts");
/* ESM import */var _actions_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actions/Styles */ "./src/plugins/table/main/ts/actions/Styles.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");







const rgbToHex = (value)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.startsWith(value, 'rgb') ? _ephox_acid__WEBPACK_IMPORTED_MODULE_4__.rgbaToHexString(value) : value;
const extractAdvancedStyles = (elm)=>{
    const element = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromDom(elm);
    return {
        borderwidth: _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getRaw(element, 'border-width').getOr(''),
        borderstyle: _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getRaw(element, 'border-style').getOr(''),
        bordercolor: _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getRaw(element, 'border-color').map(rgbToHex).getOr(''),
        backgroundcolor: _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getRaw(element, 'background-color').map(rgbToHex).getOr('')
    };
};
const getSharedValues = (data)=>{
    // TODO surely there's a better way to do this??
    // Mutates baseData to return an object that contains only the values
    // that were the same across all objects in data
    const baseData = data[0];
    const comparisonData = data.slice(1);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.each(comparisonData, (items)=>{
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.each(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.keys(baseData), (key)=>{
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.each(items, (itemValue, itemKey)=>{
                const comparisonValue = baseData[key];
                if (comparisonValue !== '' && key === itemKey) {
                    if (comparisonValue !== itemValue) {
                        baseData[key] = key === 'class' ? 'mce-no-match' : '';
                    }
                }
            });
        });
    });
    return baseData;
};
// The extractDataFrom... functions are in this file partly for code reuse and partly so we can test them,
// because some of these are crazy complicated
const getAlignment = (formats, formatName, editor, elm)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.find(formats, (name)=>!_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isUndefined(editor.formatter.matchNode(elm, formatName + name))).getOr('');
const getHAlignment = _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.curry(getAlignment, [
    'left',
    'center',
    'right'
], 'align');
const getVAlignment = _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.curry(getAlignment, [
    'top',
    'middle',
    'bottom'
], 'valign');
const extractDataFromSettings = (editor, hasAdvTableTab)=>{
    const style = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getDefaultStyles(editor);
    const attrs = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getDefaultAttributes(editor);
    const extractAdvancedStyleData = ()=>({
            borderstyle: _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(style, 'border-style').getOr(''),
            bordercolor: rgbToHex(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(style, 'border-color').getOr('')),
            backgroundcolor: rgbToHex(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(style, 'background-color').getOr(''))
        });
    const defaultData = {
        height: '',
        width: '100%',
        cellspacing: '',
        cellpadding: '',
        caption: false,
        class: '',
        align: '',
        border: ''
    };
    const getBorder = ()=>{
        const borderWidth = style['border-width'];
        if (_api_Options__WEBPACK_IMPORTED_MODULE_1__.shouldStyleWithCss(editor) && borderWidth) {
            return {
                border: borderWidth
            };
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(attrs, 'border').fold(()=>({}), (border)=>({
                border
            }));
    };
    const advStyle = hasAdvTableTab ? extractAdvancedStyleData() : {};
    const getCellPaddingCellSpacing = ()=>{
        const spacing = _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(style, 'border-spacing').or(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(attrs, 'cellspacing')).fold(()=>({}), (cellspacing)=>({
                cellspacing
            }));
        const padding = _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(style, 'border-padding').or(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.get(attrs, 'cellpadding')).fold(()=>({}), (cellpadding)=>({
                cellpadding
            }));
        return {
            ...spacing,
            ...padding
        };
    };
    const data = {
        ...defaultData,
        ...style,
        ...attrs,
        ...advStyle,
        ...getBorder(),
        ...getCellPaddingCellSpacing()
    };
    return data;
};
const getRowType = (elm)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_11__.table(_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromDom(elm)).map((table)=>{
        const target = {
            selection: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.fromDom(elm.cells)
        };
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.getRowsType(table, target);
    }).getOr('');
const extractDataFromTableElement = (editor, elm, hasAdvTableTab)=>{
    const getBorder = (dom, elm)=>{
        // Cases (in order to check):
        // 1. shouldStyleWithCss - extract border-width style if it exists
        // 2. !shouldStyleWithCss && border attribute - set border attribute as value
        // 3. !shouldStyleWithCss && nothing on the table - grab styles from the first th or td
        const optBorderWidth = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getRaw(_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromDom(elm), 'border-width');
        if (_api_Options__WEBPACK_IMPORTED_MODULE_1__.shouldStyleWithCss(editor) && optBorderWidth.isSome()) {
            return optBorderWidth.getOr('');
        }
        return dom.getAttrib(elm, 'border') || _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.getTDTHOverallStyle(editor.dom, elm, 'border-width') || _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.getTDTHOverallStyle(editor.dom, elm, 'border') || '';
    };
    const dom = editor.dom;
    const cellspacing = _api_Options__WEBPACK_IMPORTED_MODULE_1__.shouldStyleWithCss(editor) ? dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing') : dom.getAttrib(elm, 'cellspacing') || dom.getStyle(elm, 'border-spacing');
    const cellpadding = _api_Options__WEBPACK_IMPORTED_MODULE_1__.shouldStyleWithCss(editor) ? _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.getTDTHOverallStyle(dom, elm, 'padding') || dom.getAttrib(elm, 'cellpadding') : dom.getAttrib(elm, 'cellpadding') || _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.getTDTHOverallStyle(dom, elm, 'padding');
    return {
        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),
        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),
        cellspacing: cellspacing ?? '',
        cellpadding: cellpadding ?? '',
        border: getBorder(dom, elm),
        caption: !!dom.select('caption', elm)[0],
        class: dom.getAttrib(elm, 'class', ''),
        align: getHAlignment(editor, elm),
        ...hasAdvTableTab ? extractAdvancedStyles(elm) : {}
    };
};
const extractDataFromRowElement = (editor, elm, hasAdvancedRowTab)=>{
    const dom = editor.dom;
    return {
        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),
        class: dom.getAttrib(elm, 'class', ''),
        type: getRowType(elm),
        align: getHAlignment(editor, elm),
        ...hasAdvancedRowTab ? extractAdvancedStyles(elm) : {}
    };
};
const extractDataFromCellElement = (editor, cell, hasAdvancedCellTab, column)=>{
    const dom = editor.dom;
    const colElm = column.getOr(cell);
    const getStyle = (element, style)=>dom.getStyle(element, style) || dom.getAttrib(element, style);
    return {
        width: getStyle(colElm, 'width'),
        scope: dom.getAttrib(cell, 'scope'),
        celltype: _core_Utils__WEBPACK_IMPORTED_MODULE_2__.getNodeName(cell),
        class: dom.getAttrib(cell, 'class', ''),
        halign: getHAlignment(editor, cell),
        valign: getVAlignment(editor, cell),
        ...hasAdvancedCellTab ? extractAdvancedStyles(cell) : {}
    };
};



}),
"./src/plugins/table/main/ts/ui/MenuItems.ts": 
/*!***************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/MenuItems.ts ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addMenuItems: () => (addMenuItems)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _api_Clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Clipboard */ "./src/plugins/table/main/ts/api/Clipboard.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../selection/SelectionTargets */ "./src/plugins/table/main/ts/selection/SelectionTargets.ts");
/* ESM import */var _CellAlignValues__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CellAlignValues */ "./src/plugins/table/main/ts/ui/CellAlignValues.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");







const onSetupEditable = (editor)=>(api)=>{
        const nodeChanged = ()=>{
            api.setEnabled(editor.selection.isEditable());
        };
        editor.on('NodeChange', nodeChanged);
        nodeChanged();
        return ()=>{
            editor.off('NodeChange', nodeChanged);
        };
    };
const addMenuItems = (editor, selectionTargets)=>{
    const cmd = (command)=>()=>editor.execCommand(command);
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    const addMenuIfRegistered = (name, spec)=>{
        if (editor.queryCommandSupported(spec.command)) {
            editor.ui.registry.addMenuItem(name, {
                ...spec,
                onAction: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(spec.onAction) ? spec.onAction : cmd(spec.command)
            });
            return true;
        } else {
            return false;
        }
    };
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    const addToggleMenuIfRegistered = (name, spec)=>{
        if (editor.queryCommandSupported(spec.command)) {
            editor.ui.registry.addToggleMenuItem(name, {
                ...spec,
                onAction: _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(spec.onAction) ? spec.onAction : cmd(spec.command)
            });
        }
    };
    const insertTableAction = (data)=>{
        editor.execCommand('mceInsertTable', false, {
            rows: data.numRows,
            columns: data.numColumns
        });
    };
    const hasRowMenuItems = [
        addMenuIfRegistered('tableinsertrowbefore', {
            text: 'Insert row before',
            icon: 'table-insert-row-above',
            command: 'mceTableInsertRowBefore',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tableinsertrowafter', {
            text: 'Insert row after',
            icon: 'table-insert-row-after',
            command: 'mceTableInsertRowAfter',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tabledeleterow', {
            text: 'Delete row',
            icon: 'table-delete-row',
            command: 'mceTableDeleteRow',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tablerowprops', {
            text: 'Row properties',
            icon: 'table-row-properties',
            command: 'mceTableRowProps',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tablecutrow', {
            text: 'Cut row',
            icon: 'cut-row',
            command: 'mceTableCutRow',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tablecopyrow', {
            text: 'Copy row',
            icon: 'duplicate-row',
            command: 'mceTableCopyRow',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tablepasterowbefore', {
            text: 'Paste row before',
            icon: 'paste-row-before',
            command: 'mceTablePasteRowBefore',
            onSetup: selectionTargets.onSetupPasteable(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getRows)
        }),
        addMenuIfRegistered('tablepasterowafter', {
            text: 'Paste row after',
            icon: 'paste-row-after',
            command: 'mceTablePasteRowAfter',
            onSetup: selectionTargets.onSetupPasteable(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getRows)
        })
    ];
    const hasColumnMenuItems = [
        addMenuIfRegistered('tableinsertcolumnbefore', {
            text: 'Insert column before',
            icon: 'table-insert-column-before',
            command: 'mceTableInsertColBefore',
            onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onFirst)
        }),
        addMenuIfRegistered('tableinsertcolumnafter', {
            text: 'Insert column after',
            icon: 'table-insert-column-after',
            command: 'mceTableInsertColAfter',
            onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onLast)
        }),
        addMenuIfRegistered('tabledeletecolumn', {
            text: 'Delete column',
            icon: 'table-delete-column',
            command: 'mceTableDeleteCol',
            onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
        }),
        addMenuIfRegistered('tablecutcolumn', {
            text: 'Cut column',
            icon: 'cut-column',
            command: 'mceTableCutCol',
            onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
        }),
        addMenuIfRegistered('tablecopycolumn', {
            text: 'Copy column',
            icon: 'duplicate-column',
            command: 'mceTableCopyCol',
            onSetup: selectionTargets.onSetupColumn(_selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onAny)
        }),
        addMenuIfRegistered('tablepastecolumnbefore', {
            text: 'Paste column before',
            icon: 'paste-column-before',
            command: 'mceTablePasteColBefore',
            onSetup: selectionTargets.onSetupPasteableColumn(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getColumns, _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onFirst)
        }),
        addMenuIfRegistered('tablepastecolumnafter', {
            text: 'Paste column after',
            icon: 'paste-column-after',
            command: 'mceTablePasteColAfter',
            onSetup: selectionTargets.onSetupPasteableColumn(_api_Clipboard__WEBPACK_IMPORTED_MODULE_0__.getColumns, _selection_SelectionTargets__WEBPACK_IMPORTED_MODULE_2__.LockedDisable.onLast)
        })
    ];
    const hasCellMenuItems = [
        addMenuIfRegistered('tablecellprops', {
            text: 'Cell properties',
            icon: 'table-cell-properties',
            command: 'mceTableCellProps',
            onSetup: selectionTargets.onSetupCellOrRow
        }),
        addMenuIfRegistered('tablemergecells', {
            text: 'Merge cells',
            icon: 'table-merge-cells',
            command: 'mceTableMergeCells',
            onSetup: selectionTargets.onSetupMergeable
        }),
        addMenuIfRegistered('tablesplitcells', {
            text: 'Split cell',
            icon: 'table-split-cells',
            command: 'mceTableSplitCells',
            onSetup: selectionTargets.onSetupUnmergeable
        })
    ];
    if (!_api_Options__WEBPACK_IMPORTED_MODULE_1__.hasTableGrid(editor)) {
        editor.ui.registry.addMenuItem('inserttable', {
            text: 'Table',
            icon: 'table',
            onAction: cmd('mceInsertTableDialog'),
            onSetup: onSetupEditable(editor)
        });
    } else {
        editor.ui.registry.addNestedMenuItem('inserttable', {
            text: 'Table',
            icon: 'table',
            getSubmenuItems: ()=>[
                    {
                        type: 'fancymenuitem',
                        fancytype: 'inserttable',
                        onAction: insertTableAction
                    }
                ],
            onSetup: onSetupEditable(editor)
        });
    }
    // TINY-3636: We want a way to use the dialog even when tablegrid true.
    // If tablegrid false then inserttable and inserttabledialog are the same,
    // but that's preferrable to breaking things at this point.
    editor.ui.registry.addMenuItem('inserttabledialog', {
        text: 'Insert table',
        icon: 'table',
        onAction: cmd('mceInsertTableDialog'),
        onSetup: onSetupEditable(editor)
    });
    addMenuIfRegistered('tableprops', {
        text: 'Table properties',
        onSetup: selectionTargets.onSetupTable,
        command: 'mceTableProps'
    });
    addMenuIfRegistered('deletetable', {
        text: 'Delete table',
        icon: 'table-delete-table',
        onSetup: selectionTargets.onSetupTable,
        command: 'mceTableDelete'
    });
    // if any of the row menu items returned true
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.contains(hasRowMenuItems, true)) {
        editor.ui.registry.addNestedMenuItem('row', {
            type: 'nestedmenuitem',
            text: 'Row',
            getSubmenuItems: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant('tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter')
        });
    }
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.contains(hasColumnMenuItems, true)) {
        editor.ui.registry.addNestedMenuItem('column', {
            type: 'nestedmenuitem',
            text: 'Column',
            getSubmenuItems: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant('tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter')
        });
    }
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.contains(hasCellMenuItems, true)) {
        editor.ui.registry.addNestedMenuItem('cell', {
            type: 'nestedmenuitem',
            text: 'Cell',
            getSubmenuItems: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant('tablecellprops tablemergecells tablesplitcells')
        });
    }
    editor.ui.registry.addContextMenu('table', {
        update: ()=>{
            // context menu fires before node change, so check the selection here first
            selectionTargets.resetTargets();
            // ignoring element since it's monitored elsewhere
            return selectionTargets.targets().fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant(''), (targets)=>{
                // If clicking in a caption, then we shouldn't show the cell/row/column options
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.name(targets.element) === 'caption') {
                    return 'tableprops deletetable';
                } else {
                    return 'cell row column | advtablesort | tableprops deletetable';
                }
            });
        }
    });
    const tableClassList = (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.filterNoneItem)(_api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableClassList(editor));
    if (tableClassList.length !== 0 && editor.queryCommandSupported('mceTableToggleClass')) {
        editor.ui.registry.addNestedMenuItem('tableclass', {
            icon: 'table-classes',
            text: 'Table styles',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildMenuItems)(editor, tableClassList, 'tableclass', (value)=>editor.execCommand('mceTableToggleClass', false, value)),
            onSetup: selectionTargets.onSetupTable
        });
    }
    const tableCellClassList = (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.filterNoneItem)(_api_Options__WEBPACK_IMPORTED_MODULE_1__.getCellClassList(editor));
    if (tableCellClassList.length !== 0 && editor.queryCommandSupported('mceTableCellToggleClass')) {
        editor.ui.registry.addNestedMenuItem('tablecellclass', {
            icon: 'table-cell-classes',
            text: 'Cell styles',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildMenuItems)(editor, tableCellClassList, 'tablecellclass', (value)=>editor.execCommand('mceTableCellToggleClass', false, value)),
            onSetup: selectionTargets.onSetupCellOrRow
        });
    }
    // TODO: TINY-8172 Unwind this when an alternative solution is found
    if (editor.queryCommandSupported('mceTableApplyCellStyle')) {
        editor.ui.registry.addNestedMenuItem('tablecellvalign', {
            icon: 'vertical-align',
            text: 'Vertical align',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildMenuItems)(editor, _CellAlignValues__WEBPACK_IMPORTED_MODULE_3__.verticalAlignValues, 'tablecellverticalalign', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'vertical-align')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addNestedMenuItem('tablecellborderwidth', {
            icon: 'border-width',
            text: 'Border width',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildMenuItems)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderWidths(editor), 'tablecellborderwidth', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'border-width')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addNestedMenuItem('tablecellborderstyle', {
            icon: 'border-style',
            text: 'Border style',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildMenuItems)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderStyles(editor), 'tablecellborderstyle', (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.applyTableCellStyle)(editor, 'border-style')),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addNestedMenuItem('tablecellbackgroundcolor', {
            icon: 'cell-background-color',
            text: 'Background color',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildColorMenu)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBackgroundColorMap(editor), 'background-color'),
            onSetup: selectionTargets.onSetupCellOrRow
        });
        editor.ui.registry.addNestedMenuItem('tablecellbordercolor', {
            icon: 'cell-border-color',
            text: 'Border color',
            getSubmenuItems: ()=>(0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.buildColorMenu)(editor, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableBorderColorMap(editor), 'border-color'),
            onSetup: selectionTargets.onSetupCellOrRow
        });
    }
    addToggleMenuIfRegistered('tablecaption', {
        icon: 'table-caption',
        text: 'Table caption',
        command: 'mceTableToggleCaption',
        onSetup: selectionTargets.onSetupTableWithCaption
    });
    addToggleMenuIfRegistered('tablerowheader', {
        text: 'Row header',
        icon: 'table-top-header',
        command: 'mceTableRowType',
        onAction: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.changeRowHeader)(editor),
        onSetup: selectionTargets.onSetupTableRowHeaders
    });
    addToggleMenuIfRegistered('tablecolheader', {
        text: 'Column header',
        icon: 'table-left-header',
        command: 'mceTableColType',
        onAction: (0,_UiUtils__WEBPACK_IMPORTED_MODULE_4__.changeColumnHeader)(editor),
        onSetup: selectionTargets.onSetupTableRowHeaders
    });
};



}),
"./src/plugins/table/main/ts/ui/RowDialog.ts": 
/*!***************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/RowDialog.ts ***!
  \***************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  open: () => (open)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _actions_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actions/Styles */ "./src/plugins/table/main/ts/actions/Styles.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Events */ "./src/plugins/table/main/ts/api/Events.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");
/* ESM import */var _selection_Ephemera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/Ephemera */ "./src/plugins/table/main/ts/selection/Ephemera.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/plugins/table/main/ts/selection/TableSelection.ts");
/* ESM import */var _DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DialogAdvancedTab */ "./src/plugins/table/main/ts/ui/DialogAdvancedTab.ts");
/* ESM import */var _DomModifier__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./DomModifier */ "./src/plugins/table/main/ts/ui/DomModifier.ts");
/* ESM import */var _Helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Helpers */ "./src/plugins/table/main/ts/ui/Helpers.ts");
/* ESM import */var _RowDialogGeneralTab__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RowDialogGeneralTab */ "./src/plugins/table/main/ts/ui/RowDialogGeneralTab.ts");













const updateSimpleProps = (modifier, data, shouldUpdate)=>{
    if (shouldUpdate('class') && data.class !== 'mce-no-match') {
        modifier.setAttrib('class', data.class);
    }
    if (shouldUpdate('height')) {
        modifier.setStyle('height', _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.height));
    }
};
const updateAdvancedProps = (modifier, data, shouldUpdate)=>{
    if (shouldUpdate('backgroundcolor')) {
        modifier.setStyle('background-color', data.backgroundcolor);
    }
    if (shouldUpdate('bordercolor')) {
        modifier.setStyle('border-color', data.bordercolor);
    }
    if (shouldUpdate('borderstyle')) {
        modifier.setStyle('border-style', data.borderstyle);
    }
};
const applyStyleData = (editor, rows, data, wasChanged)=>{
    const isSingleRow = rows.length === 1;
    const shouldOverrideCurrentValue = isSingleRow ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.always : wasChanged;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.each(rows, (rowElm)=>{
        const rowCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.children(_ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.SugarElement.fromDom(rowElm), 'td,th');
        const modifier = _DomModifier__WEBPACK_IMPORTED_MODULE_7__.DomModifier.normal(editor, rowElm);
        updateSimpleProps(modifier, data, shouldOverrideCurrentValue);
        if (_api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedRowTab(editor)) {
            updateAdvancedProps(modifier, data, shouldOverrideCurrentValue);
        }
        // TINY-10617: Simplify number of height styles when applying height on tr
        if (wasChanged('height')) {
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.each(rowCells, (cell)=>{
                editor.dom.setStyle(cell.dom, 'height', null);
            });
        }
        if (wasChanged('align')) {
            _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.setAlign(editor, rowElm, data.align);
        }
    });
};
const applyStructureData = (editor, data)=>{
    // Switch cell type if applicable. Note that we specifically tell the command to not fire events
    // as we'll batch the events and fire a `TableModified` event at the end of the updates.
    editor.execCommand('mceTableRowType', false, {
        type: data.type,
        no_events: true
    });
};
const applyRowData = (editor, rows, oldData, data)=>{
    const modifiedData = _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.filter(data, (value, key)=>oldData[key] !== value);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.size(modifiedData) > 0) {
        const typeModified = _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.has(modifiedData, 'type');
        // style modified if there's at least one other change apart from 'type'
        const styleModified = typeModified ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.size(modifiedData) > 1 : true;
        // Update the rows styling using the dialog data
        if (styleModified) {
            applyStyleData(editor, rows, data, _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.curry(_ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.has, modifiedData));
        }
        // Update the rows structure using the dialog data
        if (typeModified) {
            applyStructureData(editor, data);
        }
        _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.table(_ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.SugarElement.fromDom(rows[0])).each((table)=>_api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, {
                structure: typeModified,
                style: styleModified
            }));
    }
};
const onSubmitRowForm = (editor, rows, oldData, api)=>{
    const data = api.getData();
    api.close();
    editor.undoManager.transact(()=>{
        applyRowData(editor, rows, oldData, data);
        editor.focus();
    });
};
const open = (editor)=>{
    const rows = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_5__.getRowsFromSelection(_core_Utils__WEBPACK_IMPORTED_MODULE_3__.getSelectionStart(editor), _selection_Ephemera__WEBPACK_IMPORTED_MODULE_4__.ephemera.selected);
    // Check if there are any rows to operate on
    if (rows.length === 0) {
        return;
    }
    // Get current data and find shared values between rows
    const rowsData = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.map(rows, (rowElm)=>_Helpers__WEBPACK_IMPORTED_MODULE_8__.extractDataFromRowElement(editor, rowElm.dom, _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedRowTab(editor)));
    const data = _Helpers__WEBPACK_IMPORTED_MODULE_8__.getSharedValues(rowsData);
    const dialogTabPanel = {
        type: 'tabpanel',
        tabs: [
            {
                title: 'General',
                name: 'general',
                items: _RowDialogGeneralTab__WEBPACK_IMPORTED_MODULE_9__.getItems(editor)
            },
            (0,_DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_6__.getAdvancedTab)(editor, 'row')
        ]
    };
    const dialogPanel = {
        type: 'panel',
        items: [
            {
                type: 'grid',
                columns: 2,
                items: _RowDialogGeneralTab__WEBPACK_IMPORTED_MODULE_9__.getItems(editor)
            }
        ]
    };
    editor.windowManager.open({
        title: 'Row Properties',
        size: 'normal',
        body: _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,
        buttons: [
            {
                type: 'cancel',
                name: 'cancel',
                text: 'Cancel'
            },
            {
                type: 'submit',
                name: 'save',
                text: 'Save',
                primary: true
            }
        ],
        initialData: data,
        onSubmit: _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.curry(onSubmitRowForm, editor, _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.map(rows, (r)=>r.dom), data)
    });
};



}),
"./src/plugins/table/main/ts/ui/RowDialogGeneralTab.ts": 
/*!*************************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/RowDialogGeneralTab.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getItems: () => (getItems)
});
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");


const getClassList = (editor)=>_UiUtils__WEBPACK_IMPORTED_MODULE_1__.buildClassList(_api_Options__WEBPACK_IMPORTED_MODULE_0__.getRowClassList(editor)).map((items)=>({
            name: 'class',
            type: 'listbox',
            label: 'Class',
            items
        }));
const formChildren = [
    {
        type: 'listbox',
        name: 'type',
        label: 'Row type',
        items: [
            {
                text: 'Header',
                value: 'header'
            },
            {
                text: 'Body',
                value: 'body'
            },
            {
                text: 'Footer',
                value: 'footer'
            }
        ]
    },
    {
        type: 'listbox',
        name: 'align',
        label: 'Alignment',
        items: [
            {
                text: 'None',
                value: ''
            },
            {
                text: 'Left',
                value: 'left'
            },
            {
                text: 'Center',
                value: 'center'
            },
            {
                text: 'Right',
                value: 'right'
            }
        ]
    },
    {
        label: 'Height',
        name: 'height',
        type: 'input'
    }
];
const getItems = (editor)=>formChildren.concat(getClassList(editor).toArray());



}),
"./src/plugins/table/main/ts/ui/TableDialog.ts": 
/*!*****************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/TableDialog.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  open: () => (open)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _actions_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actions/Styles */ "./src/plugins/table/main/ts/actions/Styles.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Events */ "./src/plugins/table/main/ts/api/Events.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");
/* ESM import */var _core_Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Utils */ "./src/plugins/table/main/ts/core/Utils.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/plugins/table/main/ts/selection/TableSelection.ts");
/* ESM import */var _DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DialogAdvancedTab */ "./src/plugins/table/main/ts/ui/DialogAdvancedTab.ts");
/* ESM import */var _Helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Helpers */ "./src/plugins/table/main/ts/ui/Helpers.ts");
/* ESM import */var _TableDialogGeneralTab__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TableDialogGeneralTab */ "./src/plugins/table/main/ts/ui/TableDialogGeneralTab.ts");
/* ESM import */var _UiUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./UiUtils */ "./src/plugins/table/main/ts/ui/UiUtils.ts");











// Explore the layers of the table till we find the first layer of tds or ths
const styleTDTH = (dom, elm, name, value)=>{
    if (elm.tagName === 'TD' || elm.tagName === 'TH') {
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isString(name) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isNonNullable(value)) {
            dom.setStyle(elm, name, value);
        } else {
            dom.setStyles(elm, name);
        }
    } else {
        if (elm.children) {
            for(let i = 0; i < elm.children.length; i++){
                styleTDTH(dom, elm.children[i], name, value);
            }
        }
    }
};
const applyDataToElement = (editor, tableElm, data, shouldApplyOnCell)=>{
    const dom = editor.dom;
    const attrs = {};
    const styles = {};
    const shouldStyleWithCss = _api_Options__WEBPACK_IMPORTED_MODULE_2__.shouldStyleWithCss(editor);
    const hasAdvancedTableTab = _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor);
    const borderIsZero = parseFloat(data.border) === 0;
    if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.isUndefined(data.class) && data.class !== 'mce-no-match') {
        attrs.class = data.class;
    }
    styles.height = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.height);
    if (shouldStyleWithCss) {
        styles.width = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.width);
    } else if (dom.getAttrib(tableElm, 'width')) {
        attrs.width = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.removePxSuffix(data.width);
    }
    if (shouldStyleWithCss) {
        if (borderIsZero) {
            attrs.border = 0;
            styles['border-width'] = '';
        } else {
            styles['border-width'] = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.border);
            attrs.border = 1;
        }
        styles['border-spacing'] = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.cellspacing);
    } else {
        attrs.border = borderIsZero ? 0 : data.border;
        attrs.cellpadding = data.cellpadding;
        attrs.cellspacing = data.cellspacing;
    }
    // TINY-9837: Relevant data are applied on child TD/THs only if they have been modified since the previous dialog submission
    if (shouldStyleWithCss && tableElm.children) {
        const cellStyles = {};
        if (borderIsZero) {
            cellStyles['border-width'] = '';
        } else if (shouldApplyOnCell.border) {
            cellStyles['border-width'] = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.border);
        }
        if (shouldApplyOnCell.cellpadding) {
            cellStyles.padding = _core_Utils__WEBPACK_IMPORTED_MODULE_3__.addPxSuffix(data.cellpadding);
        }
        if (hasAdvancedTableTab && shouldApplyOnCell.bordercolor) {
            cellStyles['border-color'] = data.bordercolor;
        }
        if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.isEmpty(cellStyles)) {
            for(let i = 0; i < tableElm.children.length; i++){
                styleTDTH(dom, tableElm.children[i], cellStyles);
            }
        }
    }
    if (hasAdvancedTableTab) {
        const advData = data;
        styles['background-color'] = advData.backgroundcolor;
        styles['border-color'] = advData.bordercolor;
        styles['border-style'] = advData.borderstyle;
    }
    dom.setStyles(tableElm, {
        ..._api_Options__WEBPACK_IMPORTED_MODULE_2__.getDefaultStyles(editor),
        ...styles
    });
    dom.setAttribs(tableElm, {
        ..._api_Options__WEBPACK_IMPORTED_MODULE_2__.getDefaultAttributes(editor),
        ...attrs
    });
};
const onSubmitTableForm = (editor, tableElm, oldData, api)=>{
    const dom = editor.dom;
    const data = api.getData();
    const modifiedData = _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.filter(data, (value, key)=>oldData[key] !== value);
    api.close();
    editor.undoManager.transact(()=>{
        if (!tableElm) {
            const cols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.toInt(data.cols).getOr(1);
            const rows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.toInt(data.rows).getOr(1);
            // Cases 1 & 3 - inserting a table
            editor.execCommand('mceInsertTable', false, {
                rows,
                columns: cols
            });
            tableElm = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getSelectionCell(_core_Utils__WEBPACK_IMPORTED_MODULE_3__.getSelectionStart(editor), _core_Utils__WEBPACK_IMPORTED_MODULE_3__.getIsRoot(editor)).bind((cell)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_12__.table(cell, _core_Utils__WEBPACK_IMPORTED_MODULE_3__.getIsRoot(editor))).map((table)=>table.dom).getOrDie();
        }
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.size(modifiedData) > 0) {
            const applicableCellProperties = {
                border: _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.has(modifiedData, 'border'),
                bordercolor: _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.has(modifiedData, 'bordercolor'),
                cellpadding: _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.has(modifiedData, 'cellpadding')
            };
            applyDataToElement(editor, tableElm, data, applicableCellProperties);
            // Toggle caption on/off
            const captionElm = dom.select('caption', tableElm)[0];
            if (captionElm && !data.caption || !captionElm && data.caption) {
                editor.execCommand('mceTableToggleCaption');
            }
            _actions_Styles__WEBPACK_IMPORTED_MODULE_0__.setAlign(editor, tableElm, data.align);
        }
        editor.focus();
        editor.addVisual();
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.size(modifiedData) > 0) {
            const captionModified = _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.has(modifiedData, 'caption');
            // style modified if there's at least one other change apart from 'caption'
            const styleModified = captionModified ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.size(modifiedData) > 1 : true;
            _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, tableElm, {
                structure: captionModified,
                style: styleModified
            });
        }
    });
};
const open = (editor, insertNewTable)=>{
    const dom = editor.dom;
    let tableElm;
    let data = _Helpers__WEBPACK_IMPORTED_MODULE_6__.extractDataFromSettings(editor, _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor));
    // Cases for creation/update of tables:
    // 1. isNew == true - called by mceInsertTable - we are inserting a new table so we don't care what the selection's parent is,
    //    and we need to add cols and rows input fields to the dialog
    // 2. isNew == false && selection parent is a table - update the table
    // 3. isNew == false && selection parent isn't a table - open dialog with default values and insert a table
    if (insertNewTable) {
        // Case 1 - isNew == true. We're inserting a new table so use defaults and add cols and rows + adv properties.
        data.cols = '1';
        data.rows = '1';
        if (_api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor)) {
            data.borderstyle = '';
            data.bordercolor = '';
            data.backgroundcolor = '';
        }
    } else {
        tableElm = dom.getParent(editor.selection.getStart(), 'table', editor.getBody());
        if (tableElm) {
            // Case 2 - isNew == false && table parent
            data = _Helpers__WEBPACK_IMPORTED_MODULE_6__.extractDataFromTableElement(editor, tableElm, _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor));
        } else {
            // Case 3 - isNew == false && non-table parent. data is set to basic defaults so just add the adv properties if needed
            if (_api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor)) {
                data.borderstyle = '';
                data.bordercolor = '';
                data.backgroundcolor = '';
            }
        }
    }
    const classes = _UiUtils__WEBPACK_IMPORTED_MODULE_8__.buildClassList(_api_Options__WEBPACK_IMPORTED_MODULE_2__.getTableClassList(editor));
    if (classes.isSome()) {
        if (data.class) {
            data.class = data.class.replace(/\s*mce\-item\-table\s*/g, '');
        }
    }
    const generalPanel = {
        type: 'grid',
        columns: 2,
        items: _TableDialogGeneralTab__WEBPACK_IMPORTED_MODULE_7__.getItems(editor, classes.getOr([]), insertNewTable)
    };
    const nonAdvancedForm = ()=>({
            type: 'panel',
            items: [
                generalPanel
            ]
        });
    const advancedForm = ()=>({
            type: 'tabpanel',
            tabs: [
                {
                    title: 'General',
                    name: 'general',
                    items: [
                        generalPanel
                    ]
                },
                (0,_DialogAdvancedTab__WEBPACK_IMPORTED_MODULE_5__.getAdvancedTab)(editor, 'table')
            ]
        });
    const dialogBody = _api_Options__WEBPACK_IMPORTED_MODULE_2__.hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();
    editor.windowManager.open({
        title: 'Table Properties',
        size: 'normal',
        body: dialogBody,
        onSubmit: _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.curry(onSubmitTableForm, editor, tableElm, data),
        buttons: [
            {
                type: 'cancel',
                name: 'cancel',
                text: 'Cancel'
            },
            {
                type: 'submit',
                name: 'save',
                text: 'Save',
                primary: true
            }
        ],
        initialData: data
    });
};



}),
"./src/plugins/table/main/ts/ui/TableDialogGeneralTab.ts": 
/*!***************************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/TableDialogGeneralTab.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getItems: () => (getItems)
});
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/plugins/table/main/ts/api/Options.ts");

const getItems = (editor, classes, insertNewTable)=>{
    const rowColCountItems = !insertNewTable ? [] : [
        {
            type: 'input',
            name: 'cols',
            label: 'Cols',
            inputMode: 'numeric'
        },
        {
            type: 'input',
            name: 'rows',
            label: 'Rows',
            inputMode: 'numeric'
        }
    ];
    const alwaysItems = [
        {
            type: 'input',
            name: 'width',
            label: 'Width'
        },
        {
            type: 'input',
            name: 'height',
            label: 'Height'
        }
    ];
    const appearanceItems = _api_Options__WEBPACK_IMPORTED_MODULE_0__.hasAppearanceOptions(editor) ? [
        {
            type: 'input',
            name: 'cellspacing',
            label: 'Cell spacing',
            inputMode: 'numeric'
        },
        {
            type: 'input',
            name: 'cellpadding',
            label: 'Cell padding',
            inputMode: 'numeric'
        },
        {
            type: 'input',
            name: 'border',
            label: 'Border width'
        },
        {
            type: 'label',
            label: 'Caption',
            items: [
                {
                    type: 'checkbox',
                    name: 'caption',
                    label: 'Show caption'
                }
            ]
        }
    ] : [];
    const alignmentItem = [
        {
            type: 'listbox',
            name: 'align',
            label: 'Alignment',
            items: [
                {
                    text: 'None',
                    value: ''
                },
                {
                    text: 'Left',
                    value: 'left'
                },
                {
                    text: 'Center',
                    value: 'center'
                },
                {
                    text: 'Right',
                    value: 'right'
                }
            ]
        }
    ];
    const classListItem = classes.length > 0 ? [
        {
            name: 'class',
            type: 'listbox',
            label: 'Class',
            items: classes
        }
    ] : [];
    return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);
};



}),
"./src/plugins/table/main/ts/ui/UiUtils.ts": 
/*!*************************************************!*\
  !*** ./src/plugins/table/main/ts/ui/UiUtils.ts ***!
  \*************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  applyTableCellStyle: () => (applyTableCellStyle),
  buildClassList: () => (buildClassList),
  buildColorMenu: () => (buildColorMenu),
  buildListItems: () => (buildListItems),
  buildMenuItems: () => (buildMenuItems),
  changeColumnHeader: () => (changeColumnHeader),
  changeRowHeader: () => (changeRowHeader),
  filterNoneItem: () => (filterNoneItem),
  generateMenuItemsCallback: () => (generateMenuItemsCallback),
  isListGroup: () => (isListGroup),
  onSetupToggle: () => (onSetupToggle)
});
/* ESM import */var _ephox_acid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/acid */ "../acid/src/main/ts/ephox/acid/api/colour/Transformations.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Singleton.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/plugins/table/main/ts/selection/TableSelection.ts");



const onSetupToggle = (editor, formatName, formatValue)=>{
    return (api)=>{
        const boundCallback = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.unbindable();
        const isNone = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.isEmpty(formatValue);
        const init = ()=>{
            const selectedCells = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_0__.getCellsFromSelection(editor);
            const checkNode = (cell)=>editor.formatter.match(formatName, {
                    value: formatValue
                }, cell.dom, isNone);
            // If value is empty (A None-entry in the list), check if the format is not set at all. Otherwise, check if the format is set to the correct value.
            if (isNone) {
                api.setActive(!_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(selectedCells, checkNode));
                boundCallback.set(editor.formatter.formatChanged(formatName, (match)=>api.setActive(!match), true));
            } else {
                api.setActive(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.forall(selectedCells, checkNode));
                boundCallback.set(editor.formatter.formatChanged(formatName, api.setActive, false, {
                    value: formatValue
                }));
            }
        };
        // The editor may or may not have been setup yet, so check for that
        editor.initialized ? init() : editor.on('init', init);
        return boundCallback.clear;
    };
};
const isListGroup = (item)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.hasNonNullableKey(item, 'menu');
const buildListItems = (items)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(items, (item)=>{
        // item.text is not documented - maybe deprecated option we can delete??
        const text = item.text || item.title || '';
        if (isListGroup(item)) {
            return {
                text,
                items: buildListItems(item.menu)
            };
        } else {
            return {
                text,
                value: item.value
            };
        }
    });
const buildClassList = (classList)=>{
    if (!classList.length) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.some(buildListItems([
        {
            text: 'Select...',
            value: 'mce-no-match'
        },
        ...classList
    ]));
};
const buildMenuItems = (editor, items, format, onAction)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(items, (item)=>{
        // item.text is not documented - maybe deprecated option we can delete??
        const text = item.text || item.title;
        if (isListGroup(item)) {
            return {
                type: 'nestedmenuitem',
                text,
                getSubmenuItems: ()=>buildMenuItems(editor, item.menu, format, onAction)
            };
        } else {
            return {
                text,
                type: 'togglemenuitem',
                onAction: ()=>onAction(item.value),
                onSetup: onSetupToggle(editor, format, item.value)
            };
        }
    });
const applyTableCellStyle = (editor, style)=>(value)=>{
        editor.execCommand('mceTableApplyCellStyle', false, {
            [style]: value
        });
    };
const filterNoneItem = (list)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.bind(list, (item)=>{
        if (isListGroup(item)) {
            return [
                {
                    ...item,
                    menu: filterNoneItem(item.menu)
                }
            ];
        } else {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.isNotEmpty(item.value) ? [
                item
            ] : [];
        }
    });
const generateMenuItemsCallback = (editor, items, format, onAction)=>(callback)=>callback(buildMenuItems(editor, items, format, onAction));
const buildColorMenu = (editor, colorList, style)=>{
    const colorMap = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(colorList, (entry)=>({
            text: entry.title,
            value: '#' + _ephox_acid__WEBPACK_IMPORTED_MODULE_6__.anyToHex(entry.value).value,
            type: 'choiceitem'
        }));
    return [
        {
            type: 'fancymenuitem',
            fancytype: 'colorswatch',
            initData: {
                colors: colorMap.length > 0 ? colorMap : undefined,
                allowCustomColors: false
            },
            onAction: (data)=>{
                const value = data.value === 'remove' ? '' : data.value;
                editor.execCommand('mceTableApplyCellStyle', false, {
                    [style]: value
                });
            }
        }
    ];
};
const changeRowHeader = (editor)=>()=>{
        const currentType = editor.queryCommandValue('mceTableRowType');
        const newType = currentType === 'header' ? 'body' : 'header';
        editor.execCommand('mceTableRowType', false, {
            type: newType
        });
    };
const changeColumnHeader = (editor)=>()=>{
        const currentType = editor.queryCommandValue('mceTableColType');
        const newType = currentType === 'th' ? 'td' : 'th';
        editor.execCommand('mceTableColType', false, {
            type: newType
        });
    };



}),
"../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js": 
/*!***************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js ***!
  \***************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  contramap: () => (contramap),
  eq: () => (eq),
  eqAny: () => (eqAny),
  eqArray: () => (eqArray),
  eqBoolean: () => (eqBoolean),
  eqNull: () => (eqNull),
  eqNumber: () => (eqNumber),
  eqRecord: () => (eqRecord),
  eqString: () => (eqString),
  eqUndefined: () => (eqUndefined),
  tripleEq: () => (tripleEq)
});
/* ESM import */var _core_Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Type */ "../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js");
/* ESM import */var _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ArrayUtil */ "../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js");


var contramap = function (eqa, f) {
    return eq(function (x, y) { return eqa.eq(f(x), f(y)); });
};
var eq = function (f) {
    return ({ eq: f });
};
var tripleEq = eq(function (x, y) { return x === y; });
var eqString = tripleEq;
var eqBoolean = tripleEq;
var eqNumber = tripleEq;
var eqUndefined = tripleEq;
var eqNull = tripleEq;
var eqArray = function (eqa) { return eq(function (x, y) {
    if (x.length !== y.length) {
        return false;
    }
    var len = x.length;
    for (var i = 0; i < len; i++) {
        if (!eqa.eq(x[i], y[i])) {
            return false;
        }
    }
    return true;
}); };
// TODO: Make an Ord typeclass
var eqSortedArray = function (eqa, compareFn) {
    return contramap(eqArray(eqa), function (xs) { return _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__.sort(xs, compareFn); });
};
var eqRecord = function (eqa) { return eq(function (x, y) {
    var kx = Object.keys(x);
    var ky = Object.keys(y);
    if (!eqSortedArray(eqString).eq(kx, ky)) {
        return false;
    }
    var len = kx.length;
    for (var i = 0; i < len; i++) {
        var q = kx[i];
        if (!eqa.eq(x[q], y[q])) {
            return false;
        }
    }
    return true;
}); };
var eqAny = eq(function (x, y) {
    if (x === y) {
        return true;
    }
    var tx = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(x);
    var ty = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(y);
    if (tx !== ty) {
        return false;
    }
    if (_core_Type__WEBPACK_IMPORTED_MODULE_1__.isEquatableType(tx)) {
        return x === y;
    }
    else if (tx === 'array') {
        return eqArray(eqAny).eq(x, y);
    }
    else if (tx === 'object') {
        return eqRecord(eqAny).eq(x, y);
    }
    return false;
});


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js": 
/*!***********************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js ***!
  \***********************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  map: () => (map),
  mapDelimit: () => (mapDelimit),
  sort: () => (sort)
});
var map = function (xs, f) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len; i++) {
        var x = xs[i];
        r[i] = f(x);
    }
    return r;
};
/** map a function over an array, then map another function over every item except the last */
var mapDelimit = function (xs, f, delimit) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len - 1; i++) {
        var x = xs[i];
        r[i] = delimit(f(x));
    }
    if (len > 0) {
        r[len - 1] = (f(xs[len - 1]));
    }
    return r;
};
var sort = function (xs, compareFn) {
    var clone = Array.prototype.slice.call(xs);
    return clone.sort(compareFn);
};


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js": 
/*!******************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js ***!
  \******************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isArray: () => (isArray),
  isBoolean: () => (isBoolean),
  isEquatableType: () => (isEquatableType),
  isFunction: () => (isFunction),
  isNull: () => (isNull),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isString: () => (isString),
  isUndefined: () => (isUndefined),
  typeOf: () => (typeOf)
});
var typeOf = function (x) {
    if (x === null) {
        return 'null';
    }
    if (x === undefined) {
        return 'undefined';
    }
    var t = typeof x;
    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {
        return 'array';
    }
    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {
        return 'string';
    }
    return t;
};
var isType = function (type) { return function (value) { return typeOf(value) === type; }; };
var isString = isType('string');
var isObject = isType('object');
var isArray = isType('array');
var isNull = isType('null');
var isBoolean = isType('boolean');
var isUndefined = isType('undefined');
var isFunction = isType('function');
var isNumber = isType('number');
var isEquatableType = function (x) {
    return ['undefined', 'boolean', 'number', 'string', 'function', 'xml', 'null'].indexOf(x) !== -1;
};


}),

});
/************************************************************************/
// The module cache
var __webpack_module_cache__ = {};

// The require function
function __webpack_require__(moduleId) {

// Check if module is in cache
var cachedModule = __webpack_module_cache__[moduleId];
if (cachedModule !== undefined) {
return cachedModule.exports;
}
// Create a new module (and put it into the cache)
var module = (__webpack_module_cache__[moduleId] = {
exports: {}
});
// Execute the module function
__webpack_modules__[moduleId](module, module.exports, __webpack_require__);

// Return the exports of the module
return module.exports;

}

/************************************************************************/
// webpack/runtime/define_property_getters
(() => {
__webpack_require__.d = (exports, definition) => {
	for(var key in definition) {
        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
        }
    }
};
})();
// webpack/runtime/has_own_property
(() => {
__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
})();
// webpack/runtime/make_namespace_object
(() => {
// define __esModule on exports
__webpack_require__.r = (exports) => {
	if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
		Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
	}
	Object.defineProperty(exports, '__esModule', { value: true });
};
})();
// webpack/runtime/rspack_version
(() => {
__webpack_require__.rv = () => ("1.5.2")
})();
// webpack/runtime/rspack_unique_id
(() => {
__webpack_require__.ruid = "bundler=rspack@1.5.2";

})();
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {

/*!*******************************************!*\
  !*** ./src/plugins/table/main/ts/Main.ts ***!
  \*******************************************/
__webpack_require__.r(__webpack_exports__);
/* ESM import */var _Plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Plugin */ "./src/plugins/table/main/ts/Plugin.ts");

(0,_Plugin__WEBPACK_IMPORTED_MODULE_0__["default"])(); /** *****
 * DO NOT EXPORT ANYTHING
 *
 * IF YOU DO ROLLUP WILL LEAVE A GLOBAL ON THE PAGE
 *******/ 

})();

})()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvdGlueW1jZS9wbHVnaW5zL3RhYmxlL3BsdWdpbi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL3RpbnltY2UvLi9saWIvZ2xvYmFscy90aW55bWNlL2NvcmUvYXBpL0Vudi5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4vbGliL2dsb2JhbHMvdGlueW1jZS9jb3JlL2FwaS9GYWtlQ2xpcGJvYXJkLmpzIiwid2VicGFjazovL3RpbnltY2UvLi9saWIvZ2xvYmFscy90aW55bWNlL2NvcmUvYXBpL1BsdWdpbk1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL2xpYi9nbG9iYWxzL3RpbnltY2UvY29yZS9hcGkvdXRpbC9Ub29scy5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2FjaWQvc3JjL21haW4vdHMvZXBob3gvYWNpZC9hcGkvY29sb3VyL0hleENvbG91ci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2FjaWQvc3JjL21haW4vdHMvZXBob3gvYWNpZC9hcGkvY29sb3VyL0hzdkNvbG91ci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2FjaWQvc3JjL21haW4vdHMvZXBob3gvYWNpZC9hcGkvY29sb3VyL1JnYmFDb2xvdXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9hY2lkL3NyYy9tYWluL3RzL2VwaG94L2FjaWQvYXBpL2NvbG91ci9UcmFuc2Zvcm1hdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9ib3NzL3NyYy9tYWluL3RzL2VwaG94L2Jvc3MvYXBpL0RvbVVuaXZlcnNlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vYm9zcy9zcmMvbWFpbi90cy9lcGhveC9ib3NzL2NvbW1vbi9UYWdCb3VuZGFyaWVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9hcGkvVGFibGVTZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL3F1ZXJpZXMvQ2VsbE9wU2VsZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9zZWxlY3Rpb24vQ2VsbFNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9BZHQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvQXJyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL0NlbGwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvRnVuLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL0dsb2JhbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9PYmoudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvT3B0aW9uYWwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvT3B0aW9uYWxzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1Jlc29sdmUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvUmVzdWx0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1NpbmdsZXRvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9TdHJpbmdzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1RodW5rLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1R5cGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvVW5pY29kZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL3N0ci9TdHJBcHBlbmQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9hcGkvZG9tL0RvbVBhcmVudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3JvYmluL3NyYy9tYWluL3RzL2VwaG94L3JvYmluL2FwaS9kb20vRG9tU3RydWN0dXJlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcm9iaW4vc3JjL21haW4vdHMvZXBob3gvcm9iaW4vYXBpL2dlbmVyYWwvUGFyZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcm9iaW4vc3JjL21haW4vdHMvZXBob3gvcm9iaW4vYXBpL2dlbmVyYWwvU3RydWN0dXJlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcm9iaW4vc3JjL21haW4vdHMvZXBob3gvcm9iaW4vcGFyZW50L0JyZWFrZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9wYXJlbnQvU2hhcmVkLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcm9iaW4vc3JjL21haW4vdHMvZXBob3gvcm9iaW4vcGFyZW50L1N1YnNldC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9hcGkvUGxhdGZvcm1EZXRlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zYW5kL3NyYy9tYWluL3RzL2VwaG94L3NhbmQvYXBpL1NhbmRIVE1MRWxlbWVudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9jb3JlL0Jyb3dzZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zYW5kL3NyYy9tYWluL3RzL2VwaG94L3NhbmQvY29yZS9PcGVyYXRpbmdTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zYW5kL3NyYy9tYWluL3RzL2VwaG94L3NhbmQvY29yZS9QbGF0Zm9ybURldGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9kZXRlY3QvRGV2aWNlVHlwZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9kZXRlY3QvVWFEYXRhLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2RldGVjdC9VYVN0cmluZy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9kZXRlY3QvVmVyc2lvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9pbmZvL1BsYXRmb3JtSW5mby50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC91dGlsL0dsb2JhbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvR2VuZXJhdG9ycy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvUmVzaXplQmVoYXZpb3VyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9TdHJ1Y3RzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZUNvbnRlbnQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlTG9va3VwLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZU9wZXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlUG9zaXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZVNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlU2l6ZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvV2FyZWhvdXNlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2NhbGMvQ29sdW1uQ29udGV4dC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9jYWxjL0RlbHRhcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9sb29rdXAvQmxvY2tzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2xvb2t1cC9UeXBlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL0RldGFpbHNMaXN0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL0ZpdG1lbnQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvbW9kZWwvR3JpZFJvdy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9tb2RlbC9SdW5PcGVyYXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvbW9kZWwvVGFibGVHcmlkLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL1RhYmxlTWVyZ2UudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvbW9kZWwvVHJhbnNpdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvb3BlcmF0ZS9NZXJnaW5nT3BlcmF0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9vcGVyYXRlL01vZGlmaWNhdGlvbk9wZXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvb3BlcmF0ZS9SZWRyYXcudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvb3BlcmF0ZS9UcmFuc2Zvcm1PcGVyYXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3Jlc2l6ZS9BZGp1c3RtZW50cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQmFyUG9zaXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3Jlc2l6ZS9Db2x1bW5TaXplcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvUmVjYWxjdWxhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL1NpemVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsQm91bmRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsRmluZGVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsR3JvdXAudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvdXRpbC9DZWxsVXRpbHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvdXRpbC9Db2xVdGlscy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci91dGlsL0xheWVyU2VsZWN0b3IudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvdXRpbC9Mb2NrZWRDb2x1bW5VdGlscy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci91dGlsL1V0aWwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hbGllbi9SZWN1cnNlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL2RvbS9Db21wYXJlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL2RvbS9JbnNlcnQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvZG9tL0luc2VydEFsbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9kb20vUmVtb3ZlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL2RvbS9SZXBsaWNhdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL05vZGVUeXBlcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyQm9keS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyRWxlbWVudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyRWxlbWVudHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhckhlYWQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhck5vZGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhclNoYWRvd0RvbS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyVGV4dC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL0F0dHJpYnV0ZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL0NvbnRlbnRFZGl0YWJsZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL0Nzcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL0RpcmVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvUHJlZGljYXRlRmlsdGVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlYXJjaC9QcmVkaWNhdGVGaW5kLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlYXJjaC9TZWxlY3RvckV4aXN0cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvU2VsZWN0b3JGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvc2VhcmNoL1NlbGVjdG9yRmluZC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvU2VsZWN0b3JzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlYXJjaC9UcmF2ZXJzZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWxlY3Rpb24vQXdhcmVuZXNzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlbGVjdGlvbi9DdXJzb3JQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS92aWV3L0RpbWVuc2lvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS92aWV3L0hlaWdodC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS92aWV3L1N1Z2FyTG9jYXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvdmlldy9TdWdhclBvc2l0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3ZpZXcvV2lkdGgudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9pbXBsL0Nsb3Nlc3RPckFuY2VzdG9yLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvaW1wbC9EaW1lbnNpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9pbXBsL05vZGVWYWx1ZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2ltcGwvUnVudGltZVNpemUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9pbXBsL1N0eWxlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL1BsdWdpbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy9hY3Rpb25zL1N0eWxlcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy9hcGkvQ2xpcGJvYXJkLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL2FwaS9Db21tYW5kcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy9hcGkvRXZlbnRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL2FwaS9PcHRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL2NvcmUvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL3RhYmxlL21haW4vdHMvcXVlcmllcy9UYWJsZVRhcmdldHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL3RhYmxlL21haW4vdHMvc2VsZWN0aW9uL0VwaGVtZXJhLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3NlbGVjdGlvbi9TZWxlY3Rpb25UYXJnZXRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3NlbGVjdGlvbi9UYWJsZVNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy91aS9CdXR0b25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL0NlbGxBbGlnblZhbHVlcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy91aS9DZWxsRGlhbG9nLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL0NlbGxEaWFsb2dHZW5lcmFsVGFiLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL0RpYWxvZ0FkdmFuY2VkVGFiLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL0RvbU1vZGlmaWVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL0hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9wbHVnaW5zL3RhYmxlL21haW4vdHMvdWkvTWVudUl0ZW1zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL1Jvd0RpYWxvZy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy91aS9Sb3dEaWFsb2dHZW5lcmFsVGFiLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL1RhYmxlRGlhbG9nLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvcGx1Z2lucy90YWJsZS9tYWluL3RzL3VpL1RhYmxlRGlhbG9nR2VuZXJhbFRhYi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy91aS9VaVV0aWxzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vLi4vbm9kZV9tb2R1bGVzL0BlcGhveC9kaXNwdXRlL3NyYy9tYWluL3RzL2FwaS9FcS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uLy4uL25vZGVfbW9kdWxlcy9AZXBob3gvZGlzcHV0ZS9zcmMvbWFpbi90cy9jb3JlL0FycmF5VXRpbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uLy4uL25vZGVfbW9kdWxlcy9AZXBob3gvZGlzcHV0ZS9zcmMvbWFpbi90cy9jb3JlL1R5cGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lX3Byb3BlcnR5X2dldHRlcnMiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvaGFzX293bl9wcm9wZXJ0eSIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9tYWtlX25hbWVzcGFjZV9vYmplY3QiLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvcnNwYWNrX3ZlcnNpb24iLCJ3ZWJwYWNrOi8vdGlueW1jZS93ZWJwYWNrL3J1bnRpbWUvcnNwYWNrX3VuaXF1ZV9pZCIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL3BsdWdpbnMvdGFibGUvbWFpbi90cy9NYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBnbG9iYWwgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgndGlueW1jZS5FbnYnKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBFbnYgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuRmFrZUNsaXBib2FyZCcpO1xuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWw7XG5leHBvcnQgdmFyIEZha2VDbGlwYm9hcmQgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UuUGx1Z2luTWFuYWdlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWw7XG5leHBvcnQgdmFyIFBsdWdpbk1hbmFnZXIgPSBnbG9iYWw7XG4iLCJ2YXIgZ2xvYmFsID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoJ3RpbnltY2UudXRpbC5Ub29scycpO1xuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWw7XG5leHBvcnQgdmFyIFRvb2xzID0gZ2xvYmFsO1xuIiwiaW1wb3J0IHsgU3RyaW5ncywgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEhleCwgUmdiYSB9IGZyb20gJy4vQ29sb3VyVHlwZXMnO1xuXG5jb25zdCBoZXhDb2xvdXIgPSAodmFsdWU6IHN0cmluZyk6IEhleCA9PiAoe1xuICB2YWx1ZTogbm9ybWFsaXplSGV4KHZhbHVlKVxufSk7XG5cbmNvbnN0IHNob3J0aGFuZFJlZ2V4ID0gL14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaTtcbmNvbnN0IGxvbmdmb3JtUmVnZXggPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pO1xuXG5jb25zdCBpc0hleFN0cmluZyA9IChoZXg6IHN0cmluZyk6IGJvb2xlYW4gPT4gc2hvcnRoYW5kUmVnZXgudGVzdChoZXgpIHx8IGxvbmdmb3JtUmVnZXgudGVzdChoZXgpO1xuXG5jb25zdCBub3JtYWxpemVIZXggPSAoaGV4OiBzdHJpbmcpOiBzdHJpbmcgPT4gU3RyaW5ncy5yZW1vdmVMZWFkaW5nKGhleCwgJyMnKS50b1VwcGVyQ2FzZSgpO1xuXG5jb25zdCBmcm9tU3RyaW5nID0gKGhleDogc3RyaW5nKTogT3B0aW9uYWw8SGV4PiA9PiBpc0hleFN0cmluZyhoZXgpID8gT3B0aW9uYWwuc29tZSh7IHZhbHVlOiBub3JtYWxpemVIZXgoaGV4KSB9KSA6IE9wdGlvbmFsLm5vbmUoKTtcblxuLy8gRXhwYW5kIHNob3J0aGFuZCBmb3JtIChlLmcuIFwiMDNGXCIpIHRvIGZ1bGwgZm9ybSAoZS5nLiBcIjAwMzNGRlwiKVxuY29uc3QgZ2V0TG9uZ0Zvcm0gPSAoaGV4OiBIZXgpOiBIZXggPT4ge1xuICBjb25zdCBoZXhTdHJpbmcgPSBoZXgudmFsdWUucmVwbGFjZShzaG9ydGhhbmRSZWdleCwgKG0sIHIsIGcsIGIpID0+XG4gICAgciArIHIgKyBnICsgZyArIGIgKyBiXG4gICk7XG5cbiAgcmV0dXJuIHsgdmFsdWU6IGhleFN0cmluZyB9O1xufTtcblxuY29uc3QgZXh0cmFjdFZhbHVlcyA9IChoZXg6IEhleCk6IFJlZ0V4cEV4ZWNBcnJheSB8IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmddID0+IHtcbiAgY29uc3QgbG9uZ0Zvcm0gPSBnZXRMb25nRm9ybShoZXgpO1xuICBjb25zdCBzcGxpdEZvcm0gPSBsb25nZm9ybVJlZ2V4LmV4ZWMobG9uZ0Zvcm0udmFsdWUpO1xuICByZXR1cm4gc3BsaXRGb3JtID09PSBudWxsID8gWyAnRkZGRkZGJywgJ0ZGJywgJ0ZGJywgJ0ZGJyBdIDogc3BsaXRGb3JtO1xufTtcblxuY29uc3QgdG9IZXggPSAoY29tcG9uZW50OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBoZXggPSBjb21wb25lbnQudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gKGhleC5sZW5ndGggPT09IDEgPyAnMCcgKyBoZXggOiBoZXgpLnRvVXBwZXJDYXNlKCk7XG59O1xuXG5jb25zdCBmcm9tUmdiYSA9IChyZ2JhQ29sb3VyOiBSZ2JhKTogSGV4ID0+IHtcbiAgY29uc3QgdmFsdWUgPSB0b0hleChyZ2JhQ29sb3VyLnJlZCkgKyB0b0hleChyZ2JhQ29sb3VyLmdyZWVuKSArIHRvSGV4KHJnYmFDb2xvdXIuYmx1ZSk7XG4gIHJldHVybiBoZXhDb2xvdXIodmFsdWUpO1xufTtcblxuZXhwb3J0IHtcbiAgaGV4Q29sb3VyLFxuICBpc0hleFN0cmluZyxcbiAgZnJvbVN0cmluZyxcbiAgZnJvbVJnYmEsXG4gIGV4dHJhY3RWYWx1ZXNcbn07XG4iLCJpbXBvcnQgdHlwZSB7IEhzdiwgUmdiYSB9IGZyb20gJy4vQ29sb3VyVHlwZXMnO1xuXG5jb25zdCBoc3ZDb2xvdXIgPSAoaHVlOiBudW1iZXIsIHNhdHVyYXRpb246IG51bWJlciwgdmFsdWU6IG51bWJlcik6IEhzdiA9PiAoe1xuICBodWUsXG4gIHNhdHVyYXRpb24sXG4gIHZhbHVlXG59KTtcblxuY29uc3QgZnJvbVJnYiA9IChyZ2JhQ29sb3VyOiBSZ2JhKTogSHN2ID0+IHtcbiAgbGV0IGggPSAwOyBsZXQgcyA9IDA7IGxldCB2ID0gMDtcbiAgY29uc3QgciA9IHJnYmFDb2xvdXIucmVkIC8gMjU1O1xuICBjb25zdCBnID0gcmdiYUNvbG91ci5ncmVlbiAvIDI1NTtcbiAgY29uc3QgYiA9IHJnYmFDb2xvdXIuYmx1ZSAvIDI1NTtcblxuICBjb25zdCBtaW5SR0IgPSBNYXRoLm1pbihyLCBNYXRoLm1pbihnLCBiKSk7XG4gIGNvbnN0IG1heFJHQiA9IE1hdGgubWF4KHIsIE1hdGgubWF4KGcsIGIpKTtcblxuICBpZiAobWluUkdCID09PSBtYXhSR0IpIHtcbiAgICB2ID0gbWluUkdCO1xuXG4gICAgcmV0dXJuIGhzdkNvbG91cihcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdiAqIDEwMFxuICAgICk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tbmVzdGVkLXRlcm5hcnk6MCAqL1xuICBjb25zdCBkID0gKHIgPT09IG1pblJHQikgPyBnIC0gYiA6ICgoYiA9PT0gbWluUkdCKSA/IHIgLSBnIDogYiAtIHIpO1xuICBoID0gKHIgPT09IG1pblJHQikgPyAzIDogKChiID09PSBtaW5SR0IpID8gMSA6IDUpO1xuICBoID0gNjAgKiAoaCAtIGQgLyAobWF4UkdCIC0gbWluUkdCKSk7XG4gIHMgPSAobWF4UkdCIC0gbWluUkdCKSAvIG1heFJHQjtcbiAgdiA9IG1heFJHQjtcblxuICByZXR1cm4gaHN2Q29sb3VyKFxuICAgIE1hdGgucm91bmQoaCksXG4gICAgTWF0aC5yb3VuZChzICogMTAwKSxcbiAgICBNYXRoLnJvdW5kKHYgKiAxMDApXG4gICk7XG59O1xuXG5leHBvcnQge1xuICBoc3ZDb2xvdXIsXG4gIGZyb21SZ2Jcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgSGV4LCBIc3YsIFJnYmEgfSBmcm9tICcuL0NvbG91clR5cGVzJztcbmltcG9ydCAqIGFzIEhleENvbG91ciBmcm9tICcuL0hleENvbG91cic7XG5cbmNvbnN0IG1pbiA9IE1hdGgubWluO1xuY29uc3QgbWF4ID0gTWF0aC5tYXg7XG5jb25zdCByb3VuZCA9IE1hdGgucm91bmQ7XG5cbmNvbnN0IHJnYlJlZ2V4ID0gL15cXHMqcmdiXFxzKlxcKFxccyooXFxkKylcXHMqWyxcXHNdXFxzKihcXGQrKVxccypbLFxcc11cXHMqKFxcZCspXFxzKlxcKVxccyokL2k7XG5cbi8vIFRoaXMgcmVnZXggd2lsbCBtYXRjaCByZ2JhKDAsIDAsIDAsIDAuNSkgb3IgcmdiYSgwLCAwLCAwLCA1MCUpICwgb3Igd2l0aG91dCBjb21tYXNcbmNvbnN0IHJnYmFSZWdleCA9IC9eXFxzKnJnYmFcXHMqXFwoXFxzKihcXGQrKVxccypbLFxcc11cXHMqKFxcZCspXFxzKlssXFxzXVxccyooXFxkKylcXHMqWyxcXHNdXFxzKigoPzpcXGQ/XFwuXFxkK3xcXGQrKSU/KVxccypcXClcXHMqJC9pO1xuXG5jb25zdCByZ2JhQ29sb3VyID0gKHJlZDogbnVtYmVyLCBncmVlbjogbnVtYmVyLCBibHVlOiBudW1iZXIsIGFscGhhOiBudW1iZXIpOiBSZ2JhID0+ICh7XG4gIHJlZCxcbiAgZ3JlZW4sXG4gIGJsdWUsXG4gIGFscGhhXG59KTtcblxuY29uc3QgaXNSZ2JhQ29tcG9uZW50ID0gKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgcmV0dXJuIG51bS50b1N0cmluZygpID09PSB2YWx1ZSAmJiBudW0gPj0gMCAmJiBudW0gPD0gMjU1O1xufTtcblxuY29uc3QgZnJvbUhzdiA9IChoc3Y6IEhzdik6IFJnYmEgPT4ge1xuICBsZXQgcjsgbGV0IGc7IGxldCBiO1xuICBjb25zdCBodWUgPSAoaHN2Lmh1ZSB8fCAwKSAlIDM2MDtcbiAgbGV0IHNhdHVyYXRpb24gPSBoc3Yuc2F0dXJhdGlvbiAvIDEwMDtcbiAgbGV0IGJyaWdodG5lc3MgPSBoc3YudmFsdWUgLyAxMDA7XG4gIHNhdHVyYXRpb24gPSBtYXgoMCwgbWluKHNhdHVyYXRpb24sIDEpKTtcbiAgYnJpZ2h0bmVzcyA9IG1heCgwLCBtaW4oYnJpZ2h0bmVzcywgMSkpO1xuXG4gIGlmIChzYXR1cmF0aW9uID09PSAwKSB7XG4gICAgciA9IGcgPSBiID0gcm91bmQoMjU1ICogYnJpZ2h0bmVzcyk7XG4gICAgcmV0dXJuIHJnYmFDb2xvdXIociwgZywgYiwgMSk7XG4gIH1cblxuICBjb25zdCBzaWRlID0gaHVlIC8gNjA7XG4gIGNvbnN0IGNocm9tYSA9IGJyaWdodG5lc3MgKiBzYXR1cmF0aW9uO1xuICBjb25zdCB4ID0gY2hyb21hICogKDEgLSBNYXRoLmFicyhzaWRlICUgMiAtIDEpKTtcbiAgY29uc3QgbWF0Y2ggPSBicmlnaHRuZXNzIC0gY2hyb21hO1xuXG4gIHN3aXRjaCAoTWF0aC5mbG9vcihzaWRlKSkge1xuICAgIGNhc2UgMDpcbiAgICAgIHIgPSBjaHJvbWE7XG4gICAgICBnID0geDtcbiAgICAgIGIgPSAwO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDE6XG4gICAgICByID0geDtcbiAgICAgIGcgPSBjaHJvbWE7XG4gICAgICBiID0gMDtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOlxuICAgICAgciA9IDA7XG4gICAgICBnID0gY2hyb21hO1xuICAgICAgYiA9IHg7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgMzpcbiAgICAgIHIgPSAwO1xuICAgICAgZyA9IHg7XG4gICAgICBiID0gY2hyb21hO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDQ6XG4gICAgICByID0geDtcbiAgICAgIGcgPSAwO1xuICAgICAgYiA9IGNocm9tYTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSA1OlxuICAgICAgciA9IGNocm9tYTtcbiAgICAgIGcgPSAwO1xuICAgICAgYiA9IHg7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByID0gZyA9IGIgPSAwO1xuICB9XG5cbiAgciA9IHJvdW5kKDI1NSAqIChyICsgbWF0Y2gpKTtcbiAgZyA9IHJvdW5kKDI1NSAqIChnICsgbWF0Y2gpKTtcbiAgYiA9IHJvdW5kKDI1NSAqIChiICsgbWF0Y2gpKTtcblxuICByZXR1cm4gcmdiYUNvbG91cihyLCBnLCBiLCAxKTtcbn07XG5cbi8vIFRlbXBvcmFyaWx5IHVzaW5nOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjIzODM4L3JnYi10by1oZXgtYW5kLWhleC10by1yZ2JcbmNvbnN0IGZyb21IZXggPSAoaGV4Q29sb3VyOiBIZXgpOiBSZ2JhID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gSGV4Q29sb3VyLmV4dHJhY3RWYWx1ZXMoaGV4Q29sb3VyKTtcbiAgY29uc3QgcmVkID0gcGFyc2VJbnQocmVzdWx0WzFdLCAxNik7XG4gIGNvbnN0IGdyZWVuID0gcGFyc2VJbnQocmVzdWx0WzJdLCAxNik7XG4gIGNvbnN0IGJsdWUgPSBwYXJzZUludChyZXN1bHRbM10sIDE2KTtcbiAgcmV0dXJuIHJnYmFDb2xvdXIocmVkLCBncmVlbiwgYmx1ZSwgMSk7XG59O1xuXG5jb25zdCBmcm9tU3RyaW5nVmFsdWVzID0gKHJlZDogc3RyaW5nLCBncmVlbjogc3RyaW5nLCBibHVlOiBzdHJpbmcsIGFscGhhOiBzdHJpbmcpOiBSZ2JhID0+IHtcbiAgY29uc3QgciA9IHBhcnNlSW50KHJlZCwgMTApO1xuICBjb25zdCBnID0gcGFyc2VJbnQoZ3JlZW4sIDEwKTtcbiAgY29uc3QgYiA9IHBhcnNlSW50KGJsdWUsIDEwKTtcbiAgY29uc3QgYSA9IHBhcnNlRmxvYXQoYWxwaGEpO1xuXG4gIHJldHVybiByZ2JhQ29sb3VyKHIsIGcsIGIsIGEpO1xufTtcblxuY29uc3QgZ2V0Q29sb3JGb3JtYXQgPSAoY29sb3JTdHJpbmc6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmIChyZ2JSZWdleC50ZXN0KGNvbG9yU3RyaW5nKSkge1xuICAgIHJldHVybiAncmdiJztcbiAgfSBlbHNlIGlmIChyZ2JhUmVnZXgudGVzdChjb2xvclN0cmluZykpIHtcbiAgICByZXR1cm4gJ3JnYmEnO1xuICB9XG4gIHJldHVybiAnb3RoZXInO1xufTtcblxuY29uc3QgZnJvbVN0cmluZyA9IChyZ2JhU3RyaW5nOiBzdHJpbmcpOiBPcHRpb25hbDxSZ2JhPiA9PiB7XG4gIGNvbnN0IHJnYk1hdGNoID0gcmdiUmVnZXguZXhlYyhyZ2JhU3RyaW5nKTtcbiAgaWYgKHJnYk1hdGNoICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoZnJvbVN0cmluZ1ZhbHVlcyhyZ2JNYXRjaFsxXSwgcmdiTWF0Y2hbMl0sIHJnYk1hdGNoWzNdLCAnMScpKTtcbiAgfVxuICBjb25zdCByZ2JhTWF0Y2ggPSByZ2JhUmVnZXguZXhlYyhyZ2JhU3RyaW5nKTtcbiAgaWYgKHJnYmFNYXRjaCAhPT0gbnVsbCkge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKGZyb21TdHJpbmdWYWx1ZXMocmdiYU1hdGNoWzFdLCByZ2JhTWF0Y2hbMl0sIHJnYmFNYXRjaFszXSwgcmdiYU1hdGNoWzRdKSk7XG4gIH1cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmNvbnN0IHRvU3RyaW5nID0gKHJnYmE6IFJnYmEpOiBzdHJpbmcgPT4gYHJnYmEoJHtyZ2JhLnJlZH0sJHtyZ2JhLmdyZWVufSwke3JnYmEuYmx1ZX0sJHtyZ2JhLmFscGhhfSlgO1xuXG5jb25zdCByZWQgPSByZ2JhQ29sb3VyKDI1NSwgMCwgMCwgMSk7XG5cbmV4cG9ydCB7XG4gIGZyb21IZXgsXG4gIGZyb21Ic3YsXG4gIGZyb21TdHJpbmcsXG4gIGdldENvbG9yRm9ybWF0LFxuICBpc1JnYmFDb21wb25lbnQsXG4gIHJlZCxcbiAgcmdiYUNvbG91cixcbiAgdG9TdHJpbmdcbn07XG4iLCJpbXBvcnQgdHlwZSB7IEhleCwgSHN2IH0gZnJvbSAnLi9Db2xvdXJUeXBlcyc7XG5pbXBvcnQgKiBhcyBIZXhDb2xvdXIgZnJvbSAnLi9IZXhDb2xvdXInO1xuaW1wb3J0ICogYXMgSHN2Q29sb3VyIGZyb20gJy4vSHN2Q29sb3VyJztcbmltcG9ydCAqIGFzIFJnYmFDb2xvdXIgZnJvbSAnLi9SZ2JhQ29sb3VyJztcblxuY29uc3QgaGV4VG9Ic3YgPSAoaGV4OiBIZXgpOiBIc3YgPT4gSHN2Q29sb3VyLmZyb21SZ2IoUmdiYUNvbG91ci5mcm9tSGV4KGhleCkpO1xuY29uc3QgaHN2VG9IZXggPSAoaHN2OiBIc3YpOiBIZXggPT4gSGV4Q29sb3VyLmZyb21SZ2JhKFJnYmFDb2xvdXIuZnJvbUhzdihoc3YpKTtcblxuY29uc3QgYW55VG9IZXggPSAoY29sb3I6IHN0cmluZyk6IEhleCA9PlxuICBIZXhDb2xvdXIuZnJvbVN0cmluZyhjb2xvcilcbiAgICAub3JUaHVuaygoKSA9PiBSZ2JhQ29sb3VyLmZyb21TdHJpbmcoY29sb3IpLm1hcChIZXhDb2xvdXIuZnJvbVJnYmEpKVxuICAgIC5nZXRPclRodW5rKCgpID0+IHtcbiAgICAgIC8vIE5vdCBkZWFsaW5nIHdpdGggSGV4IG9yIFJHQkEgc28gdXNlIGEgY2FudmFzIHRvIHBhcnNlIHRoZSBjb2xvclxuICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IDE7XG4gICAgICBjb25zdCBjYW52YXNDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgICAvLyBhbGwgdmFsaWQgY29sb3JzIGFmdGVyIHRoaXMgcG9pbnRcbiAgICAgIGNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAvLyBpbnZhbGlkIGNvbG9ycyB3aWxsIGJlIHNob3duIGFzIHdoaXRlIC0gdGhlIGZpcnN0IGFzc2lnbm1lbnQgd2lsbCBwYXNzIGFuZCB0aGUgc2Vjb25kIG1heSBiZSBpZ25vcmVkXG4gICAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9ICcjRkZGRkZGJztcbiAgICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICBjYW52YXNDb250ZXh0LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuXG4gICAgICBjb25zdCByZ2JhID0gY2FudmFzQ29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSkuZGF0YTtcbiAgICAgIGNvbnN0IHIgPSByZ2JhWzBdO1xuICAgICAgY29uc3QgZyA9IHJnYmFbMV07XG4gICAgICBjb25zdCBiID0gcmdiYVsyXTtcbiAgICAgIGNvbnN0IGEgPSByZ2JhWzNdO1xuXG4gICAgICByZXR1cm4gSGV4Q29sb3VyLmZyb21SZ2JhKFJnYmFDb2xvdXIucmdiYUNvbG91cihyLCBnLCBiLCBhKSk7XG4gICAgfSk7XG5cbmNvbnN0IHJnYmFUb0hleFN0cmluZyA9IChjb2xvcjogc3RyaW5nKTogc3RyaW5nID0+XG4gIFJnYmFDb2xvdXIuZnJvbVN0cmluZyhjb2xvcilcbiAgICAubWFwKEhleENvbG91ci5mcm9tUmdiYSlcbiAgICAubWFwKChoKSA9PiAnIycgKyBoLnZhbHVlKVxuICAgIC5nZXRPcihjb2xvcik7XG5cbmV4cG9ydCB7XG4gIGFueVRvSGV4LFxuICByZ2JhVG9IZXhTdHJpbmcsXG4gIGhleFRvSHN2LFxuICBoc3ZUb0hleFxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQge1xuICBBdHRyaWJ1dGUsIENvbXBhcmUsIENzcywgSW5zZXJ0LCBJbnNlcnRBbGwsIFByZWRpY2F0ZUZpbHRlciwgUHJlZGljYXRlRmluZCwgUmVtb3ZlLCBTZWxlY3RvckZpbHRlciwgU2VsZWN0b3JGaW5kLCBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSxcbiAgU3VnYXJUZXh0LCBUcmF2ZXJzZVxufSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgVGFnQm91bmRhcmllcyBmcm9tICcuLi9jb21tb24vVGFnQm91bmRhcmllcyc7XG5cbmltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICcuL1VuaXZlcnNlJztcblxuZXhwb3J0IGRlZmF1bHQgKCk6IFVuaXZlcnNlPFN1Z2FyRWxlbWVudCwgRG9jdW1lbnQ+ID0+IHtcbiAgY29uc3QgY2xvbmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgcmV0dXJuIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsZW1lbnQuZG9tLmNsb25lTm9kZShmYWxzZSkpO1xuICB9O1xuXG4gIGNvbnN0IGRvY3VtZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGVsZW1lbnQpLmRvbTtcblxuICBjb25zdCBpc0JvdW5kYXJ5ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCkgPT4ge1xuICAgIGlmICghU3VnYXJOb2RlLmlzRWxlbWVudChlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkgPT09ICdib2R5Jykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBBcnIuY29udGFpbnMoVGFnQm91bmRhcmllcywgU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkpO1xuICB9O1xuXG4gIGNvbnN0IGlzRW1wdHlUYWcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFTdWdhck5vZGUuaXNFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBBcnIuY29udGFpbnMoWyAnYnInLCAnaW1nJywgJ2hyJywgJ2lucHV0JyBdLCBTdWdhck5vZGUubmFtZShlbGVtZW50KSk7XG4gIH07XG5cbiAgY29uc3QgaXNOb25FZGl0YWJsZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpID0+IFN1Z2FyTm9kZS5pc0VsZW1lbnQoZWxlbWVudCkgJiYgQXR0cmlidXRlLmdldChlbGVtZW50LCAnY29udGVudGVkaXRhYmxlJykgPT09ICdmYWxzZSc7XG5cbiAgY29uc3QgY29tcGFyZVBvc2l0aW9uID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb3RoZXI6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LmRvbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihvdGhlci5kb20pO1xuICB9O1xuXG4gIGNvbnN0IGNvcHlBdHRyaWJ1dGVzVG8gPSAoc291cmNlOiBTdWdhckVsZW1lbnQsIGRlc3RpbmF0aW9uOiBTdWdhckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBhcyA9IEF0dHJpYnV0ZS5jbG9uZShzb3VyY2UpO1xuICAgIEF0dHJpYnV0ZS5zZXRBbGwoZGVzdGluYXRpb24sIGFzKTtcbiAgfTtcblxuICBjb25zdCBpc1NwZWNpYWwgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgY29uc3QgdGFnID0gU3VnYXJOb2RlLm5hbWUoZWxlbWVudCk7XG4gICAgcmV0dXJuIEFyci5jb250YWlucyhbXG4gICAgICAnc2NyaXB0JywgJ25vc2NyaXB0JywgJ2lmcmFtZScsICdub2ZyYW1lcycsICdub2VtYmVkJywgJ3RpdGxlJywgJ3N0eWxlJywgJ3RleHRhcmVhJywgJ3htcCdcbiAgICBdLCB0YWcpO1xuICB9O1xuXG4gIGNvbnN0IGdldExhbmd1YWdlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgICBTdWdhck5vZGUuaXNFbGVtZW50KGVsZW1lbnQpID8gQXR0cmlidXRlLmdldE9wdChlbGVtZW50LCAnbGFuZycpIDogT3B0aW9uYWwubm9uZSgpO1xuXG4gIHJldHVybiB7XG4gICAgdXA6IEZ1bi5jb25zdGFudCh7XG4gICAgICBzZWxlY3RvcjogU2VsZWN0b3JGaW5kLmFuY2VzdG9yLFxuICAgICAgY2xvc2VzdDogU2VsZWN0b3JGaW5kLmNsb3Nlc3QsXG4gICAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZUZpbmQuYW5jZXN0b3IsXG4gICAgICBhbGw6IFRyYXZlcnNlLnBhcmVudHNcbiAgICB9KSxcbiAgICBkb3duOiBGdW4uY29uc3RhbnQoe1xuICAgICAgc2VsZWN0b3I6IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzLFxuICAgICAgcHJlZGljYXRlOiBQcmVkaWNhdGVGaWx0ZXIuZGVzY2VuZGFudHNcbiAgICB9KSxcbiAgICBzdHlsZXM6IEZ1bi5jb25zdGFudCh7XG4gICAgICBnZXQ6IENzcy5nZXQsXG4gICAgICBnZXRSYXc6IENzcy5nZXRSYXcsXG4gICAgICBzZXQ6IENzcy5zZXQsXG4gICAgICByZW1vdmU6IENzcy5yZW1vdmVcbiAgICB9KSxcbiAgICBhdHRyczogRnVuLmNvbnN0YW50KHtcbiAgICAgIGdldDogQXR0cmlidXRlLmdldCxcbiAgICAgIHNldDogQXR0cmlidXRlLnNldCxcbiAgICAgIHJlbW92ZTogQXR0cmlidXRlLnJlbW92ZSxcbiAgICAgIGNvcHlUbzogY29weUF0dHJpYnV0ZXNUb1xuICAgIH0pLFxuICAgIGluc2VydDogRnVuLmNvbnN0YW50KHtcbiAgICAgIGJlZm9yZTogSW5zZXJ0LmJlZm9yZSxcbiAgICAgIGFmdGVyOiBJbnNlcnQuYWZ0ZXIsXG4gICAgICBhZnRlckFsbDogSW5zZXJ0QWxsLmFmdGVyLFxuICAgICAgYXBwZW5kOiBJbnNlcnQuYXBwZW5kLFxuICAgICAgYXBwZW5kQWxsOiBJbnNlcnRBbGwuYXBwZW5kLFxuICAgICAgcHJlcGVuZDogSW5zZXJ0LnByZXBlbmQsXG4gICAgICB3cmFwOiBJbnNlcnQud3JhcFxuICAgIH0pLFxuICAgIHJlbW92ZTogRnVuLmNvbnN0YW50KHtcbiAgICAgIHVud3JhcDogUmVtb3ZlLnVud3JhcCxcbiAgICAgIHJlbW92ZTogUmVtb3ZlLnJlbW92ZVxuICAgIH0pLFxuICAgIGNyZWF0ZTogRnVuLmNvbnN0YW50KHtcbiAgICAgIG51OiBTdWdhckVsZW1lbnQuZnJvbVRhZyxcbiAgICAgIGNsb25lLFxuICAgICAgdGV4dDogU3VnYXJFbGVtZW50LmZyb21UZXh0XG4gICAgfSksXG4gICAgcXVlcnk6IEZ1bi5jb25zdGFudCh7XG4gICAgICBjb21wYXJlUG9zaXRpb24sXG4gICAgICBwcmV2U2libGluZzogVHJhdmVyc2UucHJldlNpYmxpbmcsXG4gICAgICBuZXh0U2libGluZzogVHJhdmVyc2UubmV4dFNpYmxpbmdcbiAgICB9KSxcbiAgICBwcm9wZXJ0eTogRnVuLmNvbnN0YW50KHtcbiAgICAgIGNoaWxkcmVuOiBUcmF2ZXJzZS5jaGlsZHJlbixcbiAgICAgIG5hbWU6IFN1Z2FyTm9kZS5uYW1lLFxuICAgICAgcGFyZW50OiBUcmF2ZXJzZS5wYXJlbnQsXG4gICAgICBkb2N1bWVudCxcbiAgICAgIGlzVGV4dDogU3VnYXJOb2RlLmlzVGV4dCxcbiAgICAgIGlzQ29tbWVudDogU3VnYXJOb2RlLmlzQ29tbWVudCxcbiAgICAgIGlzRWxlbWVudDogU3VnYXJOb2RlLmlzRWxlbWVudCxcbiAgICAgIGlzU3BlY2lhbCxcbiAgICAgIGdldExhbmd1YWdlLFxuICAgICAgZ2V0VGV4dDogU3VnYXJUZXh0LmdldCxcbiAgICAgIHNldFRleHQ6IFN1Z2FyVGV4dC5zZXQsXG4gICAgICBpc0JvdW5kYXJ5LFxuICAgICAgaXNFbXB0eVRhZyxcbiAgICAgIGlzTm9uRWRpdGFibGVcbiAgICB9KSxcbiAgICBlcTogQ29tcGFyZS5lcSxcbiAgICBpczogQ29tcGFyZS5pc1xuICB9O1xufTtcbiIsIlxuZXhwb3J0IGRlZmF1bHQgW1xuICAnYm9keScsXG4gICdwJyxcbiAgJ2RpdicsXG4gICdhcnRpY2xlJyxcbiAgJ2FzaWRlJyxcbiAgJ2ZpZ2NhcHRpb24nLFxuICAnZmlndXJlJyxcbiAgJ2Zvb3RlcicsXG4gICdoZWFkZXInLFxuICAnbmF2JyxcbiAgJ3NlY3Rpb24nLFxuICAnb2wnLFxuICAndWwnLFxuICAnbGknLFxuICAndGFibGUnLFxuICAndGhlYWQnLFxuICAndGJvZHknLFxuICAndGZvb3QnLFxuICAnY2FwdGlvbicsXG4gICd0cicsXG4gICd0ZCcsXG4gICd0aCcsXG4gICdoMScsXG4gICdoMicsXG4gICdoMycsXG4gICdoNCcsXG4gICdoNScsXG4gICdoNicsXG4gICdibG9ja3F1b3RlJyxcbiAgJ3ByZScsXG4gICdhZGRyZXNzJ1xuXTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IHR5cGUgU3RydWN0cywgVGFibGVQb3NpdGlvbnMgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgeyBDb21wYXJlLCBTZWxlY3RvckZpbmQsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQ2VsbFNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vQ2VsbFNlbGVjdGlvbic7XG5cbi8vIEV4cGxpY2l0bHkgY2FsbGluZyBDZWxsU2VsZWN0aW9uLnJldHJpZXZlIHNvIHRoYXQgd2UgY2FuIHNlZSB0aGUgQVBJIHNpZ25hdHVyZS5cbmNvbnN0IHJldHJpZXZlID0gPFQgZXh0ZW5kcyBFbGVtZW50PiAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD5bXT4gPT4ge1xuICByZXR1cm4gQ2VsbFNlbGVjdGlvbi5yZXRyaWV2ZTxUPihjb250YWluZXIsIHNlbGVjdG9yKTtcbn07XG5cbmNvbnN0IHJldHJpZXZlQm94ID0gKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+LCBmaXJzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZywgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN0cnVjdHMuQm91bmRzPiA9PiB7XG4gIHJldHVybiBDZWxsU2VsZWN0aW9uLmdldEVkZ2VzKGNvbnRhaW5lciwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yLCBsYXN0U2VsZWN0ZWRTZWxlY3RvcikuYmluZCgoZWRnZXMpID0+IHtcbiAgICBjb25zdCBpc1Jvb3QgPSAoYW5jZXN0b3I6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICAgICAgcmV0dXJuIENvbXBhcmUuZXEoY29udGFpbmVyLCBhbmNlc3Rvcik7XG4gICAgfTtcbiAgICBjb25zdCBzZWN0aW9uU2VsZWN0b3IgPSAndGhlYWQsdGZvb3QsdGJvZHksdGFibGUnO1xuICAgIGNvbnN0IGZpcnN0QW5jZXN0b3IgPSBTZWxlY3RvckZpbmQuYW5jZXN0b3IoZWRnZXMuZmlyc3QsIHNlY3Rpb25TZWxlY3RvciwgaXNSb290KTtcbiAgICBjb25zdCBsYXN0QW5jZXN0b3IgPSBTZWxlY3RvckZpbmQuYW5jZXN0b3IoZWRnZXMubGFzdCwgc2VjdGlvblNlbGVjdG9yLCBpc1Jvb3QpO1xuICAgIHJldHVybiBmaXJzdEFuY2VzdG9yLmJpbmQoKGZBKSA9PiB7XG4gICAgICByZXR1cm4gbGFzdEFuY2VzdG9yLmJpbmQoKGxBKSA9PiB7XG4gICAgICAgIHJldHVybiBDb21wYXJlLmVxKGZBLCBsQSkgPyBUYWJsZVBvc2l0aW9ucy5nZXRCb3goZWRnZXMudGFibGUsIGVkZ2VzLmZpcnN0LCBlZGdlcy5sYXN0KSA6IE9wdGlvbmFsLm5vbmU8U3RydWN0cy5Cb3VuZHM+KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyByZXRyaWV2ZSwgcmV0cmlldmVCb3ggfTtcblxuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgUnVuT3BlcmF0aW9uIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQXR0cmlidXRlLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgRXBoZW1lcmEgfSBmcm9tICcuLi9hcGkvRXBoZW1lcmEnO1xuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vYXBpL1RhYmxlU2VsZWN0aW9uJztcblxuY29uc3Qgc2VsZWN0aW9uOiAoc2VsZWN0ZWRDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPSBGdW4uaWRlbnRpdHk7XG5cbmNvbnN0IHVubWVyZ2FibGUgPSAoc2VsZWN0ZWRDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PiB7XG4gIGNvbnN0IGhhc1NwYW4gPSAoZWxlbTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB0eXBlOiAnY29sc3BhbicgfCAncm93c3BhbicpID0+IEF0dHJpYnV0ZS5nZXRPcHQoZWxlbSwgdHlwZSkuZXhpc3RzKChzcGFuKSA9PiBwYXJzZUludChzcGFuLCAxMCkgPiAxKTtcbiAgY29uc3QgaGFzUm93T3JDb2xTcGFuID0gKGVsZW06IFN1Z2FyRWxlbWVudDxFbGVtZW50PikgPT4gaGFzU3BhbihlbGVtLCAncm93c3BhbicpIHx8IGhhc1NwYW4oZWxlbSwgJ2NvbHNwYW4nKTtcblxuICByZXR1cm4gc2VsZWN0ZWRDZWxscy5sZW5ndGggPiAwICYmIEFyci5mb3JhbGwoc2VsZWN0ZWRDZWxscywgaGFzUm93T3JDb2xTcGFuKSA/IE9wdGlvbmFsLnNvbWUoc2VsZWN0ZWRDZWxscykgOiBPcHRpb25hbC5ub25lKCk7XG59O1xuXG5jb25zdCBtZXJnYWJsZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBzZWxlY3RlZENlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIGVwaGVtZXJhOiBFcGhlbWVyYSk6IE9wdGlvbmFsPFJ1bk9wZXJhdGlvbi5FeHRyYWN0TWVyZ2FibGU+ID0+IHtcbiAgaWYgKHNlbGVjdGVkQ2VsbHMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBUYWJsZVNlbGVjdGlvbi5yZXRyaWV2ZUJveCh0YWJsZSwgZXBoZW1lcmEuZmlyc3RTZWxlY3RlZFNlbGVjdG9yLCBlcGhlbWVyYS5sYXN0U2VsZWN0ZWRTZWxlY3RvcilcbiAgICAgIC5tYXAoKGJvdW5kcykgPT4gKHsgYm91bmRzLCBjZWxsczogc2VsZWN0ZWRDZWxscyB9KSk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IG1lcmdhYmxlLCB1bm1lcmdhYmxlLCBzZWxlY3Rpb24gfTtcblxuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21QYXJlbnQgfSBmcm9tICdAZXBob3gvcm9iaW4nO1xuaW1wb3J0IHsgVGFibGVQb3NpdGlvbnMgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgeyBDb21wYXJlLCBTZWxlY3RvckZpbHRlciwgU2VsZWN0b3JGaW5kLCBTZWxlY3RvcnMsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBJZGVudGlmaWVkLCBJZGVudGlmaWVkRXh0IH0gZnJvbSAnLi9JZGVudGlmaWVkJztcblxuaW50ZXJmYWNlIEVkZ2VzIHtcbiAgcmVhZG9ubHkgZmlyc3Q6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IGxhc3Q6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD47XG59XG5cbmNvbnN0IGxvb2t1cFRhYmxlID0gKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gIHJldHVybiBTZWxlY3RvckZpbmQuYW5jZXN0b3I8SFRNTFRhYmxlRWxlbWVudD4oY29udGFpbmVyLCAndGFibGUnKTtcbn07XG5cbmNvbnN0IGlkZW50aWZ5ID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGlzUm9vdD86IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxJZGVudGlmaWVkPiA9PiB7XG4gIGNvbnN0IGdldElzUm9vdCA9IChyb290VGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgICByZXR1cm4gKGlzUm9vdCAhPT0gdW5kZWZpbmVkICYmIGlzUm9vdChlbGVtZW50KSkgfHwgQ29tcGFyZS5lcShlbGVtZW50LCByb290VGFibGUpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gT3B0aW1pc2F0aW9uOiBJZiB0aGUgY2VsbHMgYXJlIGVxdWFsLCBpdCdzIGEgc2luZ2xlIGNlbGwgYXJyYXlcbiAgaWYgKENvbXBhcmUuZXEoc3RhcnQsIGZpbmlzaCkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh7XG4gICAgICBib3hlczogT3B0aW9uYWwuc29tZShbIHN0YXJ0IF0pLFxuICAgICAgc3RhcnQsXG4gICAgICBmaW5pc2hcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9va3VwVGFibGUoc3RhcnQpLmJpbmQoKHN0YXJ0VGFibGUpID0+IHtcbiAgICAgIHJldHVybiBsb29rdXBUYWJsZShmaW5pc2gpLmJpbmQoKGZpbmlzaFRhYmxlKSA9PiB7XG4gICAgICAgIGlmIChDb21wYXJlLmVxKHN0YXJ0VGFibGUsIGZpbmlzaFRhYmxlKSkgeyAvLyBTZWxlY3RpbmcgZnJvbSB3aXRoaW4gdGhlIHNhbWUgdGFibGUuXG4gICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgICAgICAgYm94ZXM6IFRhYmxlUG9zaXRpb25zLmludGVyY2VwdHMoc3RhcnRUYWJsZSwgc3RhcnQsIGZpbmlzaCksXG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGZpbmlzaFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKENvbXBhcmUuY29udGFpbnMoc3RhcnRUYWJsZSwgZmluaXNoVGFibGUpKSB7IC8vIFNlbGVjdGluZyBmcm9tIHRoZSBwYXJlbnQgdGFibGUgdG8gdGhlIG5lc3RlZCB0YWJsZS5cbiAgICAgICAgICBjb25zdCBhbmNlc3RvckNlbGxzID0gU2VsZWN0b3JGaWx0ZXIuYW5jZXN0b3JzPEhUTUxUYWJsZUNlbGxFbGVtZW50PihmaW5pc2gsICd0ZCx0aCcsIGdldElzUm9vdChzdGFydFRhYmxlKSk7XG4gICAgICAgICAgY29uc3QgZmluaXNoQ2VsbCA9IGFuY2VzdG9yQ2VsbHMubGVuZ3RoID4gMCA/IGFuY2VzdG9yQ2VsbHNbYW5jZXN0b3JDZWxscy5sZW5ndGggLSAxXSA6IGZpbmlzaDtcbiAgICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh7XG4gICAgICAgICAgICBib3hlczogVGFibGVQb3NpdGlvbnMubmVzdGVkSW50ZXJjZXB0cyhzdGFydFRhYmxlLCBzdGFydCwgc3RhcnRUYWJsZSwgZmluaXNoLCBmaW5pc2hUYWJsZSksXG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGZpbmlzaDogZmluaXNoQ2VsbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKENvbXBhcmUuY29udGFpbnMoZmluaXNoVGFibGUsIHN0YXJ0VGFibGUpKSB7IC8vIFNlbGVjdGluZyBmcm9tIHRoZSBuZXN0ZWQgdGFibGUgdG8gdGhlIHBhcmVudCB0YWJsZS5cbiAgICAgICAgICBjb25zdCBhbmNlc3RvckNlbGxzID0gU2VsZWN0b3JGaWx0ZXIuYW5jZXN0b3JzPEhUTUxUYWJsZUNlbGxFbGVtZW50PihzdGFydCwgJ3RkLHRoJywgZ2V0SXNSb290KGZpbmlzaFRhYmxlKSk7XG4gICAgICAgICAgY29uc3Qgc3RhcnRDZWxsID0gYW5jZXN0b3JDZWxscy5sZW5ndGggPiAwID8gYW5jZXN0b3JDZWxsc1thbmNlc3RvckNlbGxzLmxlbmd0aCAtIDFdIDogc3RhcnQ7XG4gICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgICAgICAgYm94ZXM6IFRhYmxlUG9zaXRpb25zLm5lc3RlZEludGVyY2VwdHMoZmluaXNoVGFibGUsIHN0YXJ0LCBzdGFydFRhYmxlLCBmaW5pc2gsIGZpbmlzaFRhYmxlKSxcbiAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgZmluaXNoOiBzdGFydENlbGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHsgLy8gU2VsZWN0aW5nIGZyb20gYSBuZXN0ZWQgdGFibGUgdG8gYSBkaWZmZXJlbnQgbmVzdGVkIHRhYmxlLlxuICAgICAgICAgIHJldHVybiBEb21QYXJlbnQuYW5jZXN0b3JzKHN0YXJ0LCBmaW5pc2gpLnNoYXJlZC5iaW5kKChsY2EpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVFbGVtZW50PihsY2EsICd0YWJsZScsIGlzUm9vdCkuYmluZCgobGNhVGFibGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZmluaXNoQW5jZXN0b3JDZWxscyA9IFNlbGVjdG9yRmlsdGVyLmFuY2VzdG9yczxIVE1MVGFibGVDZWxsRWxlbWVudD4oZmluaXNoLCAndGQsdGgnLCBnZXRJc1Jvb3QobGNhVGFibGUpKTtcbiAgICAgICAgICAgICAgY29uc3QgZmluaXNoQ2VsbCA9IGZpbmlzaEFuY2VzdG9yQ2VsbHMubGVuZ3RoID4gMCA/IGZpbmlzaEFuY2VzdG9yQ2VsbHNbZmluaXNoQW5jZXN0b3JDZWxscy5sZW5ndGggLSAxXSA6IGZpbmlzaDtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhcnRBbmNlc3RvckNlbGxzID0gU2VsZWN0b3JGaWx0ZXIuYW5jZXN0b3JzPEhUTUxUYWJsZUNlbGxFbGVtZW50PihzdGFydCwgJ3RkLHRoJywgZ2V0SXNSb290KGxjYVRhYmxlKSk7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0Q2VsbCA9IHN0YXJ0QW5jZXN0b3JDZWxscy5sZW5ndGggPiAwID8gc3RhcnRBbmNlc3RvckNlbGxzW3N0YXJ0QW5jZXN0b3JDZWxscy5sZW5ndGggLSAxXSA6IHN0YXJ0O1xuICAgICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh7XG4gICAgICAgICAgICAgICAgYm94ZXM6IFRhYmxlUG9zaXRpb25zLm5lc3RlZEludGVyY2VwdHMobGNhVGFibGUsIHN0YXJ0LCBzdGFydFRhYmxlLCBmaW5pc2gsIGZpbmlzaFRhYmxlKSxcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRDZWxsLFxuICAgICAgICAgICAgICAgIGZpbmlzaDogZmluaXNoQ2VsbFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuY29uc3QgcmV0cmlldmUgPSA8VCBleHRlbmRzIEVsZW1lbnQ+IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPltdPiA9PiB7XG4gIGNvbnN0IHNlbHMgPSBTZWxlY3RvckZpbHRlci5kZXNjZW5kYW50czxUPihjb250YWluZXIsIHNlbGVjdG9yKTtcbiAgcmV0dXJuIHNlbHMubGVuZ3RoID4gMCA/IE9wdGlvbmFsLnNvbWUoc2VscykgOiBPcHRpb25hbC5ub25lPFN1Z2FyRWxlbWVudDxUPltdPigpO1xufTtcblxuY29uc3QgZ2V0TGFzdCA9IChib3hlczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBsYXN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4gPT4ge1xuICByZXR1cm4gQXJyLmZpbmQoYm94ZXMsIChib3gpID0+IHtcbiAgICByZXR1cm4gU2VsZWN0b3JzLmlzPEhUTUxUYWJsZUNlbGxFbGVtZW50Pihib3gsIGxhc3RTZWxlY3RlZFNlbGVjdG9yKTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRFZGdlcyA9IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcsIGxhc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxFZGdlcz4gPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmRlc2NlbmRhbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGNvbnRhaW5lciwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yKS5iaW5kKChmaXJzdCkgPT4ge1xuICAgIHJldHVybiBTZWxlY3RvckZpbmQuZGVzY2VuZGFudDxIVE1MVGFibGVDZWxsRWxlbWVudD4oY29udGFpbmVyLCBsYXN0U2VsZWN0ZWRTZWxlY3RvcikuYmluZCgobGFzdCkgPT4ge1xuICAgICAgcmV0dXJuIERvbVBhcmVudC5zaGFyZWRPbmUobG9va3VwVGFibGUsIFsgZmlyc3QsIGxhc3QgXSkubWFwKCh0YWJsZSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGZpcnN0LFxuICAgICAgICAgIGxhc3QsXG4gICAgICAgICAgdGFibGVcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGV4cGFuZFRvID0gKGZpbmlzaDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxJZGVudGlmaWVkRXh0PiA9PiB7XG4gIHJldHVybiBTZWxlY3RvckZpbmQuYW5jZXN0b3I8SFRNTFRhYmxlRWxlbWVudD4oZmluaXNoLCAndGFibGUnKS5iaW5kKCh0YWJsZSkgPT4ge1xuICAgIHJldHVybiBTZWxlY3RvckZpbmQuZGVzY2VuZGFudDxIVE1MVGFibGVDZWxsRWxlbWVudD4odGFibGUsIGZpcnN0U2VsZWN0ZWRTZWxlY3RvcikuYmluZCgoc3RhcnQpID0+IHtcbiAgICAgIHJldHVybiBpZGVudGlmeShzdGFydCwgZmluaXNoKS5iaW5kKChpZGVudGlmaWVkKSA9PiB7XG4gICAgICAgIHJldHVybiBpZGVudGlmaWVkLmJveGVzLm1hcDxJZGVudGlmaWVkRXh0PigoYm94ZXMpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm94ZXMsXG4gICAgICAgICAgICBzdGFydDogaWRlbnRpZmllZC5zdGFydCxcbiAgICAgICAgICAgIGZpbmlzaDogaWRlbnRpZmllZC5maW5pc2hcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IHNoaWZ0U2VsZWN0aW9uID0gKGJveGVzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIGRlbHRhUm93OiBudW1iZXIsIGRlbHRhQ29sdW1uOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZywgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPElkZW50aWZpZWRFeHQ+ID0+IHtcbiAgcmV0dXJuIGdldExhc3QoYm94ZXMsIGxhc3RTZWxlY3RlZFNlbGVjdG9yKS5iaW5kKChsYXN0KSA9PiB7XG4gICAgcmV0dXJuIFRhYmxlUG9zaXRpb25zLm1vdmVCeShsYXN0LCBkZWx0YVJvdywgZGVsdGFDb2x1bW4pLmJpbmQoKGZpbmlzaCkgPT4ge1xuICAgICAgcmV0dXJuIGV4cGFuZFRvKGZpbmlzaCwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBpZGVudGlmeSxcbiAgcmV0cmlldmUsXG4gIHNoaWZ0U2VsZWN0aW9uLFxuICBnZXRFZGdlc1xufTtcbiIsImltcG9ydCAqIGFzIEFyciBmcm9tICcuL0Fycic7XG5pbXBvcnQgKiBhcyBPYmogZnJvbSAnLi9PYmonO1xuaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkdCB7XG4gIHJlYWRvbmx5IGZvbGQ6IDxUPiAoLi4uY2FzZUhhbmRsZXJzOiAoKC4uLmRhdGE6IGFueVtdKSA9PiBUKVtdKSA9PiBUO1xuICByZWFkb25seSBtYXRjaDogPFQ+IChicmFuY2hlczogeyBbYnJhbmNoOiBzdHJpbmddOiAoLi4uZGF0YTogYW55W10pID0+IFQgfSkgPT4gVDtcbiAgcmVhZG9ubHkgbG9nOiAobGFiZWw6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuLypcbiAqIEdlbmVyYXRlcyBhIGNodXJjaCBlbmNvZGVkIEFEVCAoaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2h1cmNoX2VuY29kaW5nKVxuICogRm9yIHN5bnRheCBhbmQgdXNlLCBsb29rIGF0IHRoZSB0ZXN0IGNvZGUuXG4gKi9cbmNvbnN0IGdlbmVyYXRlID0gPFQgPSBSZWNvcmQ8c3RyaW5nLCAoLi4uZGF0YTogYW55W10pID0+IEFkdD4+IChjYXNlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmdbXSB9W10pOiBUID0+IHtcbiAgLy8gdmFsaWRhdGlvblxuICBpZiAoIVR5cGUuaXNBcnJheShjYXNlcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhc2VzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgfVxuICBpZiAoY2FzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IG9uZSBjYXNlJyk7XG4gIH1cblxuICBjb25zdCBjb25zdHJ1Y3RvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gYWR0IGlzIG11dGF0ZWQgdG8gYWRkIHRoZSBpbmRpdmlkdWFsIGNhc2VzXG4gIGNvbnN0IGFkdDogUmVjb3JkPHN0cmluZywgKC4uLmRhdGE6IGFueVtdKSA9PiBBZHQ+ID0ge307XG4gIEFyci5lYWNoKGNhc2VzLCAoYWNhc2UsIGNvdW50KSA9PiB7XG4gICAgY29uc3Qga2V5czogc3RyaW5nW10gPSBPYmoua2V5cyhhY2FzZSk7XG5cbiAgICAvLyB2YWxpZGF0aW9uXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ29uZSBhbmQgb25seSBvbmUgbmFtZSBwZXIgY2FzZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IGtleXNbMF07XG4gICAgY29uc3QgdmFsdWUgPSBhY2FzZVtrZXldO1xuXG4gICAgLy8gdmFsaWRhdGlvblxuICAgIGlmIChhZHRba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2R1cGxpY2F0ZSBrZXkgZGV0ZWN0ZWQ6JyArIGtleSk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdjYXRhJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgaGF2ZSBhIGNhc2UgbmFtZWQgY2F0YSAoc29ycnkpJyk7XG4gICAgfSBlbHNlIGlmICghVHlwZS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgLy8gdGhpcyBpbXBsaWNpdGx5IGNoZWNrcyBpZiBhY2FzZSBpcyBhbiBvYmplY3RcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2FzZSBhcmd1bWVudHMgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9ycy5wdXNoKGtleSk7XG4gICAgLy9cbiAgICAvLyBjb25zdHJ1Y3RvciBmb3Iga2V5XG4gICAgLy9cbiAgICBhZHRba2V5XSA9ICguLi5hcmdzOiBhbnlbXSk6IEFkdCA9PiB7XG4gICAgICBjb25zdCBhcmdMZW5ndGggPSBhcmdzLmxlbmd0aDtcblxuICAgICAgLy8gdmFsaWRhdGlvblxuICAgICAgaWYgKGFyZ0xlbmd0aCAhPT0gdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBjYXNlICcgKyBrZXkgKyAnLiBFeHBlY3RlZCAnICsgdmFsdWUubGVuZ3RoICsgJyAoJyArIHZhbHVlICsgJyksIGdvdCAnICsgYXJnTGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF0Y2ggPSAoYnJhbmNoZXM6IHsgW2JyYW5jaDogc3RyaW5nXTogRnVuY3Rpb24gfSkgPT4ge1xuICAgICAgICBjb25zdCBicmFuY2hLZXlzOiBzdHJpbmdbXSA9IE9iai5rZXlzKGJyYW5jaGVzKTtcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9ycy5sZW5ndGggIT09IGJyYW5jaEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBudW1iZXIgb2YgYXJndW1lbnRzIHRvIG1hdGNoLiBFeHBlY3RlZDogJyArIGNvbnN0cnVjdG9ycy5qb2luKCcsJykgKyAnXFxuQWN0dWFsOiAnICsgYnJhbmNoS2V5cy5qb2luKCcsJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxsUmVxZCA9IEFyci5mb3JhbGwoY29uc3RydWN0b3JzLCAocmVxS2V5KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIEFyci5jb250YWlucyhicmFuY2hLZXlzLCByZXFLZXkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWFsbFJlcWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhbGwgYnJhbmNoZXMgd2VyZSBzcGVjaWZpZWQgd2hlbiB1c2luZyBtYXRjaC4gU3BlY2lmaWVkOiAnICsgYnJhbmNoS2V5cy5qb2luKCcsICcpICsgJ1xcblJlcXVpcmVkOiAnICsgY29uc3RydWN0b3JzLmpvaW4oJywgJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJyYW5jaGVzW2tleV0uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9O1xuXG4gICAgICAvL1xuICAgICAgLy8gdGhlIGZvbGQgZnVuY3Rpb24gZm9yIGtleVxuICAgICAgLy9cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvbGQ6ICguLi5mb2xkQXJnczogYW55W10pID0+IHtcbiAgICAgICAgICAvLyBydW50aW1lIHZhbGlkYXRpb25cbiAgICAgICAgICBpZiAoZm9sZEFyZ3MubGVuZ3RoICE9PSBjYXNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBmb2xkLiBFeHBlY3RlZCAnICsgY2FzZXMubGVuZ3RoICsgJywgZ290ICcgKyBmb2xkQXJncy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBmb2xkQXJnc1tjb3VudF07XG4gICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWF0Y2gsXG5cbiAgICAgICAgLy8gTk9URTogT25seSBmb3IgZGVidWdnaW5nLlxuICAgICAgICBsb2c6IChsYWJlbCkgPT4ge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgY29uc29sZS5sb2cobGFiZWwsIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9ycyxcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBrZXksXG4gICAgICAgICAgICBwYXJhbXM6IGFyZ3NcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gYWR0IGFzIGFueTtcbn07XG5cbmV4cG9ydCBjb25zdCBBZHQgPSB7XG4gIGdlbmVyYXRlXG59O1xuIiwiaW1wb3J0IHsgRXEgfSBmcm9tICdAZXBob3gvZGlzcHV0ZSc7XG5cbmltcG9ydCAqIGFzIEZ1biBmcm9tICcuL0Z1bic7XG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJy4vT3B0aW9uYWwnO1xuaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG50eXBlIEFycmF5TW9ycGhpc208VCwgVT4gPSAoeDogVCwgaTogbnVtYmVyKSA9PiBVO1xudHlwZSBBcnJheUd1YXJkUHJlZGljYXRlPFQsIFUgZXh0ZW5kcyBUPiA9ICh4OiBULCBpOiBudW1iZXIpID0+IHggaXMgVTtcbnR5cGUgQXJyYXlQcmVkaWNhdGU8VD4gPSBBcnJheU1vcnBoaXNtPFQsIGJvb2xlYW4+O1xudHlwZSBDb21wYXJhdG9yPFQ+ID0gKGE6IFQsIGI6IFQpID0+IG51bWJlcjtcblxuY29uc3QgbmF0aXZlU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5jb25zdCBuYXRpdmVJbmRleE9mID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2Y7XG5jb25zdCBuYXRpdmVQdXNoID0gQXJyYXkucHJvdG90eXBlLnB1c2g7XG5cbmNvbnN0IHJhd0luZGV4T2YgPSA8VD4gKHRzOiBBcnJheUxpa2U8VD4sIHQ6IFQpOiBudW1iZXIgPT5cbiAgbmF0aXZlSW5kZXhPZi5jYWxsKHRzLCB0KTtcblxuZXhwb3J0IGNvbnN0IGluZGV4T2YgPSA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgeDogVCk6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICAvLyBUaGUgcmF3SW5kZXhPZiBtZXRob2QgZG9lcyBub3Qgd3JhcCB1cCBpbiBhbiBvcHRpb24uIFRoaXMgaXMgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXG4gIGNvbnN0IHIgPSByYXdJbmRleE9mKHhzLCB4KTtcbiAgcmV0dXJuIHIgPT09IC0xID8gT3B0aW9uYWwubm9uZSgpIDogT3B0aW9uYWwuc29tZShyKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb250YWlucyA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCB4OiBUKTogYm9vbGVhbiA9PiByYXdJbmRleE9mKHhzLCB4KSA+IC0xO1xuXG5leHBvcnQgY29uc3QgZXhpc3RzID0gPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogYm9vbGVhbiA9PiB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAocHJlZCh4LCBpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IHJhbmdlID0gPFQ+KG51bTogbnVtYmVyLCBmOiAoYTogbnVtYmVyKSA9PiBUKTogVFtdID0+IHtcbiAgY29uc3QgcjogVFtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtOyBpKyspIHtcbiAgICByLnB1c2goZihpKSk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG4vLyBJdCdzIGEgdG90YWwgbWljcm8gb3B0aW1pc2F0aW9uLCBidXQgdGhlc2UgZG8gbWFrZSBzb21lIGRpZmZlcmVuY2UuXG4vLyBQYXJ0aWN1bGFybHkgZm9yIGJyb3dzZXJzIG90aGVyIHRoYW4gQ2hyb21lLlxuLy8gLSBsZW5ndGggY2FjaGluZ1xuLy8gaHR0cDovL2pzcGVyZi5jb20vYnJvd3Nlci1kaWV0LWpxdWVyeS1lYWNoLXZzLWZvci1sb29wLzY5XG4vLyAtIG5vdCB1c2luZyBwdXNoXG4vLyBodHRwOi8vanNwZXJmLmNvbS9hcnJheS1kaXJlY3QtYXNzaWdubWVudC12cy1wdXNoLzJcblxuZXhwb3J0IGNvbnN0IGNodW5rID0gPFQ+KGFycmF5OiBBcnJheUxpa2U8VD4sIHNpemU6IG51bWJlcik6IFRbXVtdID0+IHtcbiAgY29uc3QgcjogVFtdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkgKz0gc2l6ZSkge1xuICAgIGNvbnN0IHM6IFRbXSA9IG5hdGl2ZVNsaWNlLmNhbGwoYXJyYXksIGksIGkgKyBzaXplKTtcbiAgICByLnB1c2gocyk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3QgbWFwID0gPFQgPSBhbnksIFUgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIGY6IEFycmF5TW9ycGhpc208VCwgVT4pOiBVW10gPT4ge1xuICAvLyBwcmUtYWxsb2NhdGluZyBhcnJheSBzaXplIHdoZW4gaXQncyBndWFyYW50ZWVkIHRvIGJlIGtub3duXG4gIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3B1c2gtYWxsb2NhdGVkLXZzLWR5bmFtaWMvMjJcbiAgY29uc3QgbGVuID0geHMubGVuZ3RoO1xuICBjb25zdCByID0gbmV3IEFycmF5KGxlbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgcltpXSA9IGYoeCwgaSk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG4vLyBVbndvdW5kIGltcGxlbWVudGluZyBvdGhlciBmdW5jdGlvbnMgaW4gdGVybXMgb2YgZWFjaC5cbi8vIFRoZSBjb2RlIHNpemUgaXMgcm91Z2hseSB0aGUgc2FtZSwgYW5kIGl0IHNob3VsZCBhbGxvdyBmb3IgYmV0dGVyIG9wdGltaXNhdGlvbi5cbi8vIGNvbnN0IGVhY2ggPSBmdW5jdGlvbjxULCBVPih4czogVFtdLCBmOiAoeDogVCwgaT86IG51bWJlciwgeHM/OiBUW10pID0+IHZvaWQpOiB2b2lkIHtcbmV4cG9ydCBjb25zdCBlYWNoID0gPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIGY6IEFycmF5TW9ycGhpc208VCwgdm9pZD4pOiB2b2lkID0+IHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGYoeCwgaSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBlYWNociA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBmOiBBcnJheU1vcnBoaXNtPFQsIHZvaWQ+KTogdm9pZCA9PiB7XG4gIGZvciAobGV0IGkgPSB4cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBmKHgsIGkpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGFydGl0aW9uID0gPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogeyBwYXNzOiBUW107IGZhaWw6IFRbXSB9ID0+IHtcbiAgY29uc3QgcGFzczogVFtdID0gW107XG4gIGNvbnN0IGZhaWw6IFRbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgY29uc3QgYXJyID0gcHJlZCh4LCBpKSA/IHBhc3MgOiBmYWlsO1xuICAgIGFyci5wdXNoKHgpO1xuICB9XG4gIHJldHVybiB7IHBhc3MsIGZhaWwgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXI6IHtcbiAgPFQsIFUgZXh0ZW5kcyBUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheUd1YXJkUHJlZGljYXRlPFQsIFU+KTogVVtdO1xuICA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBUW107XG59ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogVFtdID0+IHtcbiAgY29uc3QgcjogVFtdID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAocHJlZCh4LCBpKSkge1xuICAgICAgci5wdXNoKHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbi8qXG4gKiBHcm91cHMgYW4gYXJyYXkgaW50byBjb250aWd1b3VzIGFycmF5cyBvZiBsaWtlIGVsZW1lbnRzLiBXaGV0aGVyIGFuIGVsZW1lbnQgaXMgbGlrZSBvciBub3QgZGVwZW5kcyBvbiBmLlxuICpcbiAqIGYgaXMgYSBmdW5jdGlvbiB0aGF0IGRlcml2ZXMgYSB2YWx1ZSBmcm9tIGFuIGVsZW1lbnQgLSBlLmcuIHRydWUgb3IgZmFsc2UsIG9yIGEgc3RyaW5nLlxuICogRWxlbWVudHMgYXJlIGxpa2UgaWYgdGhpcyBmdW5jdGlvbiBnZW5lcmF0ZXMgdGhlIHNhbWUgdmFsdWUgZm9yIHRoZW0gKGFjY29yZGluZyB0byA9PT0pLlxuICpcbiAqXG4gKiBPcmRlciBvZiB0aGUgZWxlbWVudHMgaXMgcHJlc2VydmVkLiBBcnIuZmxhdHRlbigpIG9uIHRoZSByZXN1bHQgd2lsbCByZXR1cm4gdGhlIG9yaWdpbmFsIGxpc3QsIGFzIHdpdGggSGFza2VsbCBncm91cEJ5IGZ1bmN0aW9uLlxuICogIEZvciBhIGdvb2QgZXhwbGFuYXRpb24sIHNlZSB0aGUgZ3JvdXAgZnVuY3Rpb24gKHdoaWNoIGlzIGEgc3BlY2lhbCBjYXNlIG9mIGdyb3VwQnkpXG4gKiAgaHR0cDovL2hhY2thZ2UuaGFza2VsbC5vcmcvcGFja2FnZS9iYXNlLTQuNy4wLjAvZG9jcy9EYXRhLUxpc3QuaHRtbCN2Omdyb3VwXG4gKi9cbmV4cG9ydCBjb25zdCBncm91cEJ5ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIGY6IChhOiBUKSA9PiBhbnkpOiBUW11bXSA9PiB7XG4gIGlmICh4cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH0gZWxzZSB7XG4gICAgbGV0IHdhc1R5cGUgPSBmKHhzWzBdKTsgLy8gaW5pdGlhbCBjYXNlIGZvciBtYXRjaGluZ1xuICAgIGNvbnN0IHI6IFRbXVtdID0gW107XG4gICAgbGV0IGdyb3VwOiBUW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3QgeCA9IHhzW2ldO1xuICAgICAgY29uc3QgdHlwZSA9IGYoeCk7XG4gICAgICBpZiAodHlwZSAhPT0gd2FzVHlwZSkge1xuICAgICAgICByLnB1c2goZ3JvdXApO1xuICAgICAgICBncm91cCA9IFtdO1xuICAgICAgfVxuICAgICAgd2FzVHlwZSA9IHR5cGU7XG4gICAgICBncm91cC5wdXNoKHgpO1xuICAgIH1cbiAgICBpZiAoZ3JvdXAubGVuZ3RoICE9PSAwKSB7XG4gICAgICByLnB1c2goZ3JvdXApO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZvbGRyID0gPFQsIFU+KHhzOiBBcnJheUxpa2U8VD4sIGY6IChhY2M6IFUsIHg6IFQsIGk6IG51bWJlcikgPT4gVSwgYWNjOiBVKTogVSA9PiB7XG4gIGVhY2hyKHhzLCAoeCwgaSkgPT4ge1xuICAgIGFjYyA9IGYoYWNjLCB4LCBpKTtcbiAgfSk7XG4gIHJldHVybiBhY2M7XG59O1xuXG5leHBvcnQgY29uc3QgZm9sZGwgPSA8VCA9IGFueSwgVSA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgZjogKGFjYzogVSwgeDogVCwgaTogbnVtYmVyKSA9PiBVLCBhY2M6IFUpOiBVID0+IHtcbiAgZWFjaCh4cywgKHgsIGkpID0+IHtcbiAgICBhY2MgPSBmKGFjYywgeCwgaSk7XG4gIH0pO1xuICByZXR1cm4gYWNjO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRVbnRpbDoge1xuICA8VCwgVSBleHRlbmRzIFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5R3VhcmRQcmVkaWNhdGU8VCwgVT4sIHVudGlsOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPFU+O1xuICA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4sIHVudGlsOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPFQ+O1xufSA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPiwgdW50aWw6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8VD4gPT4ge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKHByZWQoeCwgaSkpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKHgpO1xuICAgIH0gZWxzZSBpZiAodW50aWwoeCwgaSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmQ6IHtcbiAgPFQsIFUgZXh0ZW5kcyBUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheUd1YXJkUHJlZGljYXRlPFQsIFU+KTogT3B0aW9uYWw8VT47XG4gIDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPFQ+O1xufSA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPFQ+ID0+IHtcbiAgcmV0dXJuIGZpbmRVbnRpbCh4cywgcHJlZCwgRnVuLm5ldmVyKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kSW5kZXggPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmIChwcmVkKHgsIGkpKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRMYXN0SW5kZXggPSA8VD4oYXJyOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8bnVtYmVyPiA9PiB7XG4gIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAocHJlZChhcnJbaV0sIGkpKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZsYXR0ZW4gPSA8VD4oeHM6IEFycmF5TGlrZTxUW10+KTogVFtdID0+IHtcbiAgLy8gTm90ZSwgdGhpcyBpcyBwb3NzaWJsZSBiZWNhdXNlIHB1c2ggc3VwcG9ydHMgbXVsdGlwbGUgYXJndW1lbnRzOlxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9jb25jYXQtcHVzaC82XG4gIC8vIE5vdGUgdGhhdCBpbiB0aGUgcGFzdCwgY29uY2F0KCkgd291bGQgc2lsZW50bHkgd29yayAodmVyeSBzbG93bHkpIGZvciBhcnJheS1saWtlIG9iamVjdHMuXG4gIC8vIFdpdGggdGhpcyBjaGFuZ2UgaXQgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgY29uc3QgcjogVFtdID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIC8vIEVuc3VyZSB0aGF0IGVhY2ggdmFsdWUgaXMgYW4gYXJyYXkgaXRzZWxmXG4gICAgaWYgKCFUeXBlLmlzQXJyYXkoeHNbaV0pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Fyci5mbGF0dGVuIGl0ZW0gJyArIGkgKyAnIHdhcyBub3QgYW4gYXJyYXksIGlucHV0OiAnICsgeHMpO1xuICAgIH1cbiAgICBuYXRpdmVQdXNoLmFwcGx5KHIsIHhzW2ldKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBiaW5kID0gPFQgPSBhbnksIFUgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIGY6IEFycmF5TW9ycGhpc208VCwgVVtdPik6IFVbXSA9PlxuICBmbGF0dGVuKG1hcCh4cywgZikpO1xuXG5leHBvcnQgY29uc3QgZm9yYWxsID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogYm9vbGVhbiA9PiB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAocHJlZCh4LCBpKSAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBlcXVhbCA9IDxUPihhMTogQXJyYXlMaWtlPFQ+LCBhMjogQXJyYXlMaWtlPFQ+LCBlcTogRXEuRXE8VD4gPSBFcS5lcUFueSk6IGJvb2xlYW4gPT5cbiAgRXEuZXFBcnJheShlcSkuZXEoYTEsIGEyKTtcblxuZXhwb3J0IGNvbnN0IHJldmVyc2UgPSA8VD4oeHM6IEFycmF5TGlrZTxUPik6IFRbXSA9PiB7XG4gIGNvbnN0IHI6IFRbXSA9IG5hdGl2ZVNsaWNlLmNhbGwoeHMsIDApO1xuICByLnJldmVyc2UoKTtcbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3QgZGlmZmVyZW5jZSA9IDxUPihhMTogQXJyYXlMaWtlPFQ+LCBhMjogQXJyYXlMaWtlPFQ+KTogVFtdID0+IGZpbHRlcihhMSwgKHgpID0+ICFjb250YWlucyhhMiwgeCkpO1xuXG5leHBvcnQgY29uc3QgbWFwVG9PYmplY3Q6IHtcbiAgPFQgZXh0ZW5kcyBzdHJpbmcsIFU+KHhzOiBBcnJheUxpa2U8VD4sIGY6ICh4OiBULCBpOiBudW1iZXIpID0+IFUpOiBSZWNvcmQ8VCwgVT47XG4gIDxULCBSIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oeHM6IEFycmF5TGlrZTxUPiwgZjogKHg6IFQsIGk6IG51bWJlcikgPT4gUltrZXlvZiBSXSk6IFI7XG59ID0gPFQsIFIgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+Pih4czogQXJyYXlMaWtlPFQ+LCBmOiAoeDogVCwgaTogbnVtYmVyKSA9PiBSW2tleW9mIFJdKTogUiA9PiB7XG4gIGNvbnN0IHIgPSB7fSBhcyBSO1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgcltTdHJpbmcoeCkgYXMga2V5b2YgUl0gPSBmKHgsIGkpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IHB1cmUgPSA8VD4oeDogVCk6IFRbXSA9PiBbIHggXTtcblxuZXhwb3J0IGNvbnN0IHNvcnQgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgY29tcGFyYXRvcj86IENvbXBhcmF0b3I8VD4pOiBUW10gPT4ge1xuICBjb25zdCBjb3B5OiBUW10gPSBuYXRpdmVTbGljZS5jYWxsKHhzLCAwKTtcbiAgY29weS5zb3J0KGNvbXBhcmF0b3IpO1xuICByZXR1cm4gY29weTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXQgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgaTogbnVtYmVyKTogT3B0aW9uYWw8VD4gPT4gaSA+PSAwICYmIGkgPCB4cy5sZW5ndGggPyBPcHRpb25hbC5zb21lKHhzW2ldKSA6IE9wdGlvbmFsLm5vbmUoKTtcblxuZXhwb3J0IGNvbnN0IGhlYWQgPSA8VD4oeHM6IEFycmF5TGlrZTxUPik6IE9wdGlvbmFsPFQ+ID0+IGdldCh4cywgMCk7XG5cbmV4cG9ydCBjb25zdCBsYXN0ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4pOiBPcHRpb25hbDxUPiA9PiBnZXQoeHMsIHhzLmxlbmd0aCAtIDEpO1xuXG5leHBvcnQgY29uc3QgZnJvbTogPFQ+KHg6IEFycmF5TGlrZTxUPikgPT4gVFtdID0gVHlwZS5pc0Z1bmN0aW9uKEFycmF5LmZyb20pID8gQXJyYXkuZnJvbSA6ICh4KSA9PiBuYXRpdmVTbGljZS5jYWxsKHgpO1xuXG5leHBvcnQgY29uc3QgZmluZE1hcCA9IDxBLCBCPihhcnI6IEFycmF5TGlrZTxBPiwgZjogKGE6IEEsIGluZGV4OiBudW1iZXIpID0+IE9wdGlvbmFsPEI+KTogT3B0aW9uYWw8Qj4gPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHIgPSBmKGFycltpXSwgaSk7XG4gICAgaWYgKHIuaXNTb21lKCkpIHtcbiAgICAgIHJldHVybiByO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT3B0aW9uYWwubm9uZTxCPigpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVuaXF1ZSA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBjb21wYXJhdG9yPzogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4pOiBUW10gPT4ge1xuICBjb25zdCByOiBUW10gPSBbXTtcblxuICBjb25zdCBpc0R1cGxpY2F0ZWQgPSBUeXBlLmlzRnVuY3Rpb24oY29tcGFyYXRvcikgP1xuICAgICh4OiBUKSA9PiBleGlzdHMociwgKGkpID0+IGNvbXBhcmF0b3IoaSwgeCkpIDpcbiAgICAoeDogVCkgPT4gY29udGFpbnMociwgeCk7XG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmICghaXNEdXBsaWNhdGVkKHgpKSB7XG4gICAgICByLnB1c2goeCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHI7XG59O1xuIiwiZXhwb3J0IGludGVyZmFjZSBDZWxsPFQ+IHtcbiAgcmVhZG9ubHkgZ2V0OiAoKSA9PiBUO1xuICByZWFkb25seSBzZXQ6ICh2YWx1ZTogVCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IENlbGwgPSA8VD4oaW5pdGlhbDogVCk6IENlbGw8VD4gPT4ge1xuICBsZXQgdmFsdWUgPSBpbml0aWFsO1xuXG4gIGNvbnN0IGdldCA9ICgpID0+IHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgY29uc3Qgc2V0ID0gKHY6IFQpID0+IHtcbiAgICB2YWx1ZSA9IHY7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQsXG4gICAgc2V0XG4gIH07XG59O1xuIiwiaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG5jb25zdCBub29wOiAoLi4uYXJnczogYW55W10pID0+IHZvaWRcbj0gKCkgPT4geyB9O1xuXG5jb25zdCBub2FyZzogPFQ+KGY6ICgpID0+IFQpID0+ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZFxuPSAoZikgPT4gKCkgPT4gZigpO1xuXG4vKiogQ29tcG9zZSBhIHVuYXJ5IGZ1bmN0aW9uIHdpdGggYW4gbi1hcnkgZnVuY3Rpb24gKi9cbmNvbnN0IGNvbXBvc2UgPSA8VCBleHRlbmRzIGFueVtdLCBVLCBWPihmYTogKHY6IFUpID0+IFYsIGZiOiAoLi4ueDogVCkgPT4gVSk6ICguLi54OiBUKSA9PiBWID0+IHtcbiAgcmV0dXJuICguLi5hcmdzOiBUKSA9PiB7XG4gICAgcmV0dXJuIGZhKGZiLmFwcGx5KG51bGwsIGFyZ3MpKTtcbiAgfTtcbn07XG5cbi8qKiBDb21wb3NlIHR3byB1bmFyeSBmdW5jdGlvbnMuIFNpbWlsYXIgdG8gY29tcG9zZSwgYnV0IGF2b2lkcyB1c2luZyBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuICovXG5jb25zdCBjb21wb3NlMSA9IDxBLCBCLCBDPiAoZmJjOiAoYjogQikgPT4gQywgZmFiOiAoYTogQSkgPT4gQikgPT4gKGE6IEEpOiBDID0+XG4gIGZiYyhmYWIoYSkpO1xuXG5jb25zdCBjb25zdGFudCA9IDxUPih2YWx1ZTogVCk6ICgpID0+IFQgPT4ge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbn07XG5cbmNvbnN0IGlkZW50aXR5ID0gPFQgPSBhbnk+KHg6IFQpOiBUID0+IHtcbiAgcmV0dXJuIHg7XG59O1xuXG5jb25zdCB0cmlwbGVFcXVhbHMgPSA8VD4oYTogVCwgYjogVCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gYSA9PT0gYjtcbn07XG5cbmZ1bmN0aW9uIGN1cnJ5IDxSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBGLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgRywgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRyk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBGLCBHLCBILCBJLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBILCBpOiBJLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBILCBpOiBJKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgRywgSCwgSSwgSiwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSwgajogSiwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSwgajogSik6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPE9VVD4oZm46ICguLi5hbGxBcmdzOiBhbnlbXSkgPT4gT1VULCAuLi5pbml0aWFsQXJnczogYW55W10pOiAoLi4ucmVzdEFyZ3M6IGFueVtdKSA9PiBPVVQge1xuICByZXR1cm4gKC4uLnJlc3RBcmdzOiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGFsbCA9IGluaXRpYWxBcmdzLmNvbmNhdChyZXN0QXJncyk7XG4gICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFsbCk7XG4gIH07XG59XG5cbmNvbnN0IG5vdCA9IDxUPihmOiAodDogVCkgPT4gYm9vbGVhbikgPT4gKHQ6IFQpOiBib29sZWFuID0+XG4gICFmKHQpO1xuXG5jb25zdCBkaWUgPSAobXNnOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuICgpOiBuZXZlciA9PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gIH07XG59O1xuXG5jb25zdCBhcHBseSA9IDxUPihmOiAoKSA9PiBUKTogVCA9PiB7XG4gIHJldHVybiBmKCk7XG59O1xuXG5jb25zdCBjYWxsID0gKGY6ICgpID0+IGFueSk6IHZvaWQgPT4ge1xuICBmKCk7XG59O1xuXG5jb25zdCBuZXZlcjogKC4uLmFyZ3M6IGFueVtdKSA9PiBmYWxzZSA9IGNvbnN0YW50PGZhbHNlPihmYWxzZSk7XG5jb25zdCBhbHdheXM6ICguLi5hcmdzOiBhbnlbXSkgPT4gdHJ1ZSA9IGNvbnN0YW50PHRydWU+KHRydWUpO1xuXG4vKiBVc2VkIHRvIHdlYWtlbiB0eXBlcyAqL1xuY29uc3Qgd2Vha2VuID0gPEEsIEIgZXh0ZW5kcyBBPihiOiBCKTogQSA9PiBiO1xuXG50eXBlIEZ1bjxYLCBZPiA9ICh4OiBYKSA9PiBZO1xuY29uc3QgcGlwZToge1xuICA8QSwgQj4oYTogQSwgYWI6IEZ1bjxBLCBCPik6IEI7XG4gIDxBLCBCLCBDPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+KTogQztcbiAgPEEsIEIsIEMsIEQ+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4pOiBEO1xuICA8QSwgQiwgQywgRCwgRT4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPiwgY2Q6IEZ1bjxDLCBEPiwgZGU6IEZ1bjxELCBFPik6IEU7XG4gIDxBLCBCLCBDLCBELCBFLCBGPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+LCBjZDogRnVuPEMsIEQ+LCBkZTogRnVuPEQsIEU+LCBlZjogRnVuPEUsIEY+KTogRjtcbiAgPEEsIEIsIEMsIEQsIEUsIEYsIEc+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4sIGRlOiBGdW48RCwgRT4sIGVmOiBGdW48RSwgRj4sIGZnOiBGdW48RiwgRz4pOiBHO1xuICA8QSwgQiwgQywgRCwgRSwgRiwgRywgSD4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPiwgY2Q6IEZ1bjxDLCBEPiwgZGU6IEZ1bjxELCBFPiwgZWY6IEZ1bjxFLCBGPiwgZmc6IEZ1bjxGLCBHPiwgZ2g6IEZ1bjxHLCBIPik6IEg7XG59ID1cbiAgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEg+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjPzogRnVuPEIsIEM+LCBjZD86IEZ1bjxDLCBEPiwgZGU/OiBGdW48RCwgRT4sIGVmPzogRnVuPEUsIEY+LCBmZz86IEZ1bjxGLCBHPiwgZ2g/OiBGdW48RywgSD4pOiBCIHwgQyB8IEQgfCBFIHwgRiB8IEcgfCBIID0+IHtcbiAgICBjb25zdCBiID0gYWIoYSk7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShiYykpIHtcbiAgICAgIHJldHVybiBiO1xuICAgIH1cblxuICAgIGNvbnN0IGMgPSBiYyhiKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGNkKSkge1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuXG4gICAgY29uc3QgZCA9IGNkKGMpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoZGUpKSB7XG4gICAgICByZXR1cm4gZDtcbiAgICB9XG5cbiAgICBjb25zdCBlID0gZGUoZCk7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShlZikpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cblxuICAgIGNvbnN0IGYgPSBlZihlKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGZnKSkge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfVxuXG4gICAgY29uc3QgZyA9IGZnKGYpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoZ2gpKSB7XG4gICAgICByZXR1cm4gZztcbiAgICB9XG5cbiAgICByZXR1cm4gZ2goZyk7XG4gIH07XG5cbmV4cG9ydCB7XG4gIG5vb3AsXG4gIG5vYXJnLFxuICBjb21wb3NlLFxuICBjb21wb3NlMSxcbiAgY29uc3RhbnQsXG4gIGlkZW50aXR5LFxuICB0cmlwbGVFcXVhbHMsXG4gIGN1cnJ5LFxuICBub3QsXG4gIGRpZSxcbiAgYXBwbHksXG4gIGNhbGwsXG4gIG5ldmVyLFxuICBhbHdheXMsXG4gIHdlYWtlbixcbiAgcGlwZVxufTtcbiIsIi8vIFVzZSB3aW5kb3cgb2JqZWN0IGFzIHRoZSBnbG9iYWwgaWYgaXQncyBhdmFpbGFibGUgc2luY2UgQ1NQIHdpbGwgYmxvY2sgc2NyaXB0IGV2YWxzXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWltcGxpZWQtZXZhbFxuZXhwb3J0IGNvbnN0IEdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogRnVuY3Rpb24oJ3JldHVybiB0aGlzOycpKCk7XG4iLCJpbXBvcnQgeyBFcSB9IGZyb20gJ0BlcGhveC9kaXNwdXRlJztcblxuaW1wb3J0ICogYXMgRnVuIGZyb20gJy4vRnVuJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi9PcHRpb25hbCc7XG5cbnR5cGUgT2JqS2V5czxUIGV4dGVuZHMge30+ID0gRXh0cmFjdDxrZXlvZiBULCBzdHJpbmc+O1xudHlwZSBPYmpDYWxsYmFjazxUIGV4dGVuZHMge30+ID0gKHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IE9iaktleXM8VD4pID0+IHZvaWQ7XG50eXBlIE9iak1vcnBoaXNtPFQgZXh0ZW5kcyB7fSwgUj4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gUjtcbnR5cGUgT2JqR3VhcmRQcmVkaWNhdGU8VCBleHRlbmRzIHt9LCBVIGV4dGVuZHMgVFtrZXlvZiBUXT4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gdmFsdWUgaXMgVTtcbnR5cGUgT2JqUHJlZGljYXRlPFQgZXh0ZW5kcyB7fT4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gYm9vbGVhbjtcblxuLy8gVGhlcmUgYXJlIG1hbnkgdmFyaWF0aW9ucyBvZiBPYmplY3QgaXRlcmF0aW9uIHRoYXQgYXJlIGZhc3RlciB0aGFuIHRoZSAnZm9yLWluJyBzdHlsZTpcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL29iamVjdC1rZXlzLWl0ZXJhdGlvbi8xMDdcbi8vXG4vLyBVc2UgdGhlIG5hdGl2ZSBrZXlzIGlmIGl0IGlzIGF2YWlsYWJsZSAoSUU5KyksIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gbWFudWFsbHkgZmlsdGVyaW5nXG5leHBvcnQgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzO1xuXG5leHBvcnQgY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QuaGFzT3duUHJvcGVydHk7XG5cbmV4cG9ydCBjb25zdCBlYWNoID0gPFQgZXh0ZW5kcyB7fT4ob2JqOiBULCBmOiBPYmpDYWxsYmFjazxUPik6IHZvaWQgPT4ge1xuICBjb25zdCBwcm9wcyA9IGtleXMob2JqKSBhcyBBcnJheTxPYmpLZXlzPFQ+PjtcbiAgZm9yIChsZXQgayA9IDAsIGxlbiA9IHByb3BzLmxlbmd0aDsgayA8IGxlbjsgaysrKSB7XG4gICAgY29uc3QgaSA9IHByb3BzW2tdO1xuICAgIGNvbnN0IHggPSBvYmpbaV07XG4gICAgZih4LCBpKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IG1hcCA9IDxUIGV4dGVuZHMge30sIFI+KG9iajogVCwgZjogT2JqTW9ycGhpc208VCwgUj4pOiB7IFtrIGluIGtleW9mIFRdOiBSIH0gPT4ge1xuICByZXR1cm4gdHVwbGVNYXA8eyBbayBpbiBrZXlvZiBUXTogUiB9LCBUPihvYmosICh4LCBpKSA9PiAoe1xuICAgIGs6IGksXG4gICAgdjogZih4LCBpKVxuICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgdHVwbGVNYXAgPSA8UiBleHRlbmRzIHt9LCBUIGV4dGVuZHMge30+KG9iajogVCwgZjogT2JqTW9ycGhpc208VCwgeyBrOiBrZXlvZiBSOyB2OiBSW2tleW9mIFJdIH0+KTogUiA9PiB7XG4gIGNvbnN0IHIgPSB7fSBhcyBSO1xuICBlYWNoKG9iaiwgKHgsIGkpID0+IHtcbiAgICBjb25zdCB0dXBsZSA9IGYoeCwgaSk7XG4gICAgclt0dXBsZS5rXSA9IHR1cGxlLnY7XG4gIH0pO1xuICByZXR1cm4gcjtcbn07XG5cbmNvbnN0IG9iakFjYyA9IDxUIGV4dGVuZHMge30+KHI6IFQpID0+ICh4OiBUW2tleW9mIFRdLCBpOiBrZXlvZiBUKTogdm9pZCA9PiB7XG4gIHJbaV0gPSB4O1xufTtcblxuY29uc3QgaW50ZXJuYWxGaWx0ZXIgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPiwgb25UcnVlOiBPYmpDYWxsYmFjazxUPiwgb25GYWxzZTogT2JqQ2FsbGJhY2s8VD4pID0+IHtcbiAgZWFjaChvYmosICh4LCBpKSA9PiB7XG4gICAgKHByZWQoeCwgaSkgPyBvblRydWUgOiBvbkZhbHNlKSh4LCBpKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgYmlmaWx0ZXIgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPik6IHsgdDogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT47IGY6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+IH0gPT4ge1xuICBjb25zdCB0OiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBjb25zdCBmOiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBpbnRlcm5hbEZpbHRlcihvYmosIHByZWQsIG9iakFjYyh0KSwgb2JqQWNjKGYpKTtcbiAgcmV0dXJuIHsgdCwgZiB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbHRlcjoge1xuICA8VCBleHRlbmRzIHt9LCBVIGV4dGVuZHMgVFtrZXlvZiBUXT4ob2JqOiBULCBwcmVkOiBPYmpHdWFyZFByZWRpY2F0ZTxULCBVPik6IFJlY29yZDxzdHJpbmcsIFU+O1xuICA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6IE9ialByZWRpY2F0ZTxUPik6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+O1xufSA9IDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogT2JqUHJlZGljYXRlPFQ+KTogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT4gPT4ge1xuICBjb25zdCB0OiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9IHt9O1xuICBpbnRlcm5hbEZpbHRlcihvYmosIHByZWQsIG9iakFjYyh0KSwgRnVuLm5vb3ApO1xuICByZXR1cm4gdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXBUb0FycmF5ID0gPFQgZXh0ZW5kcyB7fSwgUj4ob2JqOiBULCBmOiBPYmpNb3JwaGlzbTxULCBSPik6IFJbXSA9PiB7XG4gIGNvbnN0IHI6IFJbXSA9IFtdO1xuICBlYWNoKG9iaiwgKHZhbHVlLCBuYW1lKSA9PiB7XG4gICAgci5wdXNoKGYodmFsdWUsIG5hbWUpKTtcbiAgfSk7XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmQgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIHByZWQ6ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBPYmpLZXlzPFQ+LCBvYmo6IFQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxUW2tleW9mIFRdPiA9PiB7XG4gIGNvbnN0IHByb3BzID0ga2V5cyhvYmopIGFzIEFycmF5PE9iaktleXM8VD4+O1xuICBmb3IgKGxldCBrID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcbiAgICBjb25zdCBpID0gcHJvcHNba107XG4gICAgY29uc3QgeCA9IG9ialtpXTtcbiAgICBpZiAocHJlZCh4LCBpLCBvYmopKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWx1ZXMgPSA8VCBleHRlbmRzIHt9PihvYmo6IFQpOiBBcnJheTxUW2tleW9mIFRdPiA9PiB7XG4gIHJldHVybiBtYXBUb0FycmF5KG9iaiwgRnVuLmlkZW50aXR5KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaXplID0gKG9iajoge30pOiBudW1iZXIgPT4ge1xuICByZXR1cm4ga2V5cyhvYmopLmxlbmd0aDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXQgPSA8VCBleHRlbmRzIHt9LCBLIGV4dGVuZHMga2V5b2YgVD4ob2JqOiBULCBrZXk6IEspOiBPcHRpb25hbDxOb25OdWxsYWJsZTxUW0tdPj4gPT4ge1xuICByZXR1cm4gaGFzKG9iaiwga2V5KSA/IE9wdGlvbmFsLmZyb20ob2JqW2tleV0gYXMgTm9uTnVsbGFibGU8VFtLXT4pIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhcyA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvYmo6IFQsIGtleTogSyk6IGJvb2xlYW4gPT5cbiAgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cbmV4cG9ydCBjb25zdCBoYXNOb25OdWxsYWJsZUtleSA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvYmo6IFQsIGtleTogSyk6IG9iaiBpcyBUICYgUmVjb3JkPEssIE5vbk51bGxhYmxlPFRbS10+PiA9PlxuICBoYXMob2JqLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQgJiYgb2JqW2tleV0gIT09IG51bGw7XG5cbmV4cG9ydCBjb25zdCBpc0VtcHR5ID0gKHI6IFJlY29yZDxhbnksIGFueT4pOiByIGlzIHt9ID0+IHtcbiAgZm9yIChjb25zdCB4IGluIHIpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChyLCB4KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBlcXVhbCA9IDxUPihhMTogUmVjb3JkPHN0cmluZywgVD4sIGEyOiBSZWNvcmQ8c3RyaW5nLCBUPiwgZXE6IEVxLkVxPFQ+ID0gRXEuZXFBbnkpOiBib29sZWFuID0+XG4gIEVxLmVxUmVjb3JkKGVxKS5lcShhMSwgYTIpO1xuIiwiaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG4vKipcbiAqIFRoZSBgT3B0aW9uYWxgIHR5cGUgcmVwcmVzZW50cyBhIHZhbHVlIChvZiBhbnkgdHlwZSkgdGhhdCBwb3RlbnRpYWxseSBkb2VzXG4gKiBub3QgZXhpc3QuIEFueSBgT3B0aW9uYWw8VD5gIGNhbiBlaXRoZXIgYmUgYSBgU29tZTxUPmAgKGluIHdoaWNoIGNhc2UgdGhlXG4gKiB2YWx1ZSBkb2VzIGV4aXN0KSBvciBhIGBOb25lYCAoaW4gd2hpY2ggY2FzZSB0aGUgdmFsdWUgZG9lcyBub3QgZXhpc3QpLiBUaGlzXG4gKiBtb2R1bGUgZGVmaW5lcyBhIHdob2xlIGxvdCBvZiBGUC1pbnNwaXJlZCB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGVhbGluZyB3aXRoXG4gKiBgT3B0aW9uYWxgIG9iamVjdHMuXG4gKlxuICogQ29tcGFyaXNvbiB3aXRoIG51bGwgb3IgdW5kZWZpbmVkOlxuICogLSBXZSBkb24ndCBnZXQgZmFuY3kgbnVsbCBjb2FsZXNjaW5nIG9wZXJhdG9ycyB3aXRoIGBPcHRpb25hbGBcbiAqIC0gV2UgZG8gZ2V0IGZhbmN5IGhlbHBlciBmdW5jdGlvbnMgd2l0aCBgT3B0aW9uYWxgXG4gKiAtIGBPcHRpb25hbGAgc3VwcG9ydCBuZXN0aW5nLCBhbmQgYWxsb3cgZm9yIHRoZSB0eXBlIHRvIHN0aWxsIGJlIG51bGxhYmxlIChvclxuICogYW5vdGhlciBgT3B0aW9uYWxgKVxuICogLSBUaGVyZSBpcyBubyBvcHRpb24gdG8gdHVybiBvZmYgc3RyaWN0LW9wdGlvbmFsLWNoZWNrcyBsaWtlIHRoZXJlIGlzIGZvclxuICogc3RyaWN0LW51bGwtY2hlY2tzXG4gKi9cbmV4cG9ydCBjbGFzcyBPcHRpb25hbDxUPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGFnOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbHVlPzogVDtcblxuICAvLyBTbmVha3kgb3B0aW1pc2F0aW9uOiBldmVyeSBpbnN0YW5jZSBvZiBPcHRpb25hbC5ub25lIGlzIGlkZW50aWNhbCwgc28ganVzdFxuICAvLyByZXVzZSB0aGUgc2FtZSBvYmplY3RcbiAgcHJpdmF0ZSBzdGF0aWMgc2luZ2xldG9uTm9uZSA9IG5ldyBPcHRpb25hbDxhbnk+KGZhbHNlKTtcblxuICAvLyBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gaGFzIGEgYHRhZ2AgYW5kIGEgYHZhbHVlYCwgYnV0IGJvdGggYXJlXG4gIC8vIHByaXZhdGU6IGFibGUgdG8gYmUgY29uc29sZS5sb2dnZWQsIGJ1dCBub3QgYWJsZSB0byBiZSBhY2Nlc3NlZCBieSBjb2RlXG4gIHByaXZhdGUgY29uc3RydWN0b3IodGFnOiBib29sZWFuLCB2YWx1ZT86IFQpIHtcbiAgICB0aGlzLnRhZyA9IHRhZztcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICAvLyAtLS0gSWRlbnRpdGllcyAtLS1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBgT3B0aW9uYWw8VD5gIHRoYXQgKipkb2VzKiogY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzb21lPFQ+KHRoaXM6IHZvaWQsIHZhbHVlOiBUKTogT3B0aW9uYWw8VD4ge1xuICAgIHJldHVybiBuZXcgT3B0aW9uYWwodHJ1ZSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgT3B0aW9uYWw8VD5gIHRoYXQgKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZS4gYFRgIGNhbiBiZVxuICAgKiBhbnkgdHlwZSBiZWNhdXNlIHdlIGRvbid0IGFjdHVhbGx5IGhhdmUgYSBgVGAuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIG5vbmU8VCA9IG5ldmVyPih0aGlzOiB2b2lkKTogT3B0aW9uYWw8VD4ge1xuICAgIHJldHVybiBPcHRpb25hbC5zaW5nbGV0b25Ob25lO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYW4gYE9wdGlvbmFsYCB0eXBlLiBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpc1xuICAgKiBgT3B0aW9uYWxgIGNvbnRhaW5zIGEgdmFsdWUgb3Igbm90LCBgZm9sZGAgd2lsbCByZXR1cm4gYSB2YWx1ZSBvZiB0eXBlIGBVYC5cbiAgICogSWYgdGhpcyBgT3B0aW9uYWxgIGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSwgdGhlIGBVYCB3aWxsIGJlIGNyZWF0ZWQgYnlcbiAgICogY2FsbGluZyBgb25Ob25lYC4gSWYgdGhpcyBgT3B0aW9uYWxgIGRvZXMgY29udGFpbiBhIHZhbHVlLCB0aGUgYFVgIHdpbGwgYmVcbiAgICogY3JlYXRlZCBieSBjYWxsaW5nIGBvblNvbWVgLlxuICAgKlxuICAgKiBGb3IgdGhlIEZQIGVudGh1c2lhc3RzIGluIHRoZSByb29tLCB0aGlzIGZ1bmN0aW9uOlxuICAgKiAxLiBDb3VsZCBiZSB1c2VkIHRvIGltcGxlbWVudCBhbGwgb2YgdGhlIGZ1bmN0aW9ucyBiZWxvd1xuICAgKiAyLiBGb3JtcyBhIGNhdGFtb3JwaGlzbVxuICAgKi9cbiAgcHVibGljIGZvbGQ8VT4ob25Ob25lOiAoKSA9PiBVLCBvblNvbWU6ICh2YWx1ZTogVCkgPT4gVSk6IFUge1xuICAgIGlmICh0aGlzLnRhZykge1xuICAgICAgcmV0dXJuIG9uU29tZSh0aGlzLnZhbHVlIGFzIFQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb25Ob25lKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IGNvbnRhaW5zIGEgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgaXNTb21lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRhZztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhpcyBgT3B0aW9uYWxgIG9iamVjdCAqKmRvZXMgbm90KiogY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIGlzTm9uZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMudGFnO1xuICB9XG5cbiAgLy8gLS0tIEZ1bmN0b3IgKG5hbWUgc3RvbGVuIGZyb20gSGFza2VsbCAvIG1hdGhzKSAtLS1cblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhbiBgT3B0aW9uYWxgIG9iamVjdCwgKippZioqIHRoZXJlIGlzIGEgdmFsdWUuIElmXG4gICAqIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gdG8gdHVybiBhIFQgaW50byBhIFUsIHRoaXMgaXMgdGhlIGZ1bmN0aW9uIHlvdSB1c2VcbiAgICogdG8gdHVybiBhbiBgT3B0aW9uYWw8VD5gIGludG8gYW4gYE9wdGlvbmFsPFU+YC4gSWYgdGhpcyAqKmRvZXMqKiBjb250YWluXG4gICAqIGEgdmFsdWUgdGhlbiB0aGUgb3V0cHV0IHdpbGwgYWxzbyBjb250YWluIGEgdmFsdWUgKHRoYXQgdmFsdWUgYmVpbmcgdGhlXG4gICAqIG91dHB1dCBvZiBgbWFwcGVyKHRoaXMudmFsdWUpYCksIGFuZCBpZiB0aGlzICoqZG9lcyBub3QqKiBjb250YWluIGEgdmFsdWVcbiAgICogdGhlbiBuZWl0aGVyIHdpbGwgdGhlIG91dHB1dC5cbiAgICovXG4gIHB1YmxpYyBtYXA8VT4obWFwcGVyOiAodmFsdWU6IFQpID0+IFUpOiBPcHRpb25hbDxVPiB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShtYXBwZXIodGhpcy52YWx1ZSBhcyBUKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIE1vbmFkIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYW4gYE9wdGlvbmFsYCBvYmplY3QsICoqaWYqKiB0aGVyZSBpcyBhIHZhbHVlLlxuICAgKiBVbmxpa2UgYG1hcGAsIGhlcmUgdGhlIHRyYW5zZm9ybSBpdHNlbGYgYWxzbyByZXR1cm5zIGFuIGBPcHRpb25hbGAuXG4gICAqL1xuICBwdWJsaWMgYmluZDxVPihiaW5kZXI6ICh2YWx1ZTogVCkgPT4gT3B0aW9uYWw8VT4pOiBPcHRpb25hbDxVPiB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICByZXR1cm4gYmluZGVyKHRoaXMudmFsdWUgYXMgVCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIFRyYXZlcnNhYmxlIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgdGhlcmUgKipleGlzdHMqKiBhIHZhbHVlXG4gICAqIGluc2lkZSB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IHRoYXQgbWVldHMgdGhlIHByZWRpY2F0ZS4gSW4gcHJhY3RpY2UsIHRoaXNcbiAgICogbWVhbnMgdGhhdCBmb3IgYE9wdGlvbmFsYHMgdGhhdCBkbyBub3QgY29udGFpbiBhIHZhbHVlIGl0IHJldHVybnMgZmFsc2UgKGFzXG4gICAqIG5vIHByZWRpY2F0ZS1tZWV0aW5nIHZhbHVlIGV4aXN0cykuXG4gICAqL1xuICBwdWJsaWMgZXhpc3RzKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGFnICYmIHByZWRpY2F0ZSh0aGlzLnZhbHVlIGFzIFQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgKiphbGwqKiB0aGUgdmFsdWVzIGluc2lkZVxuICAgKiB0aGlzIGBPcHRpb25hbGAgb2JqZWN0IG1lZXQgdGhlIHByZWRpY2F0ZS4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnMgdGhhdFxuICAgKiBmb3IgYE9wdGlvbmFsYHMgdGhhdCBkbyBub3QgY29udGFpbiBhIHZhbHVlIGl0IHJldHVybnMgdHJ1ZSAoYXMgYWxsIDBcbiAgICogb2JqZWN0cyBkbyBtZWV0IHRoZSBwcmVkaWNhdGUpLlxuICAgKi9cbiAgcHVibGljIGZvcmFsbChwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy50YWcgfHwgcHJlZGljYXRlKHRoaXMudmFsdWUgYXMgVCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gcHJlZGljYXRlLCBjcmVhdGUgYSBuZXcgYE9wdGlvbmFsYCBvYmplY3QgdGhhdCB3aWxsIHJldGFpblxuICAgKiBhbGwgdGhlIHZhbHVlcyBpbnNpZGUgdGhlIG9sZCBgT3B0aW9uYWxgIG9iamVjdCB0aGF0IG1lZXQgdGhlIHByZWRpY2F0ZS5cbiAgICogSW4gcHJhY3RpY2UsIHRoZSBgT3B0aW9uYWxgIG9iamVjdCBjb250YWlucyBlaXRoZXIgMCBvciAxIG9iamVjdHMsIGFuZFxuICAgKiB0aGUgb3V0cHV0IHdpbGwga2VlcCB0aGUgKHNpbmdsZSkgaW5wdXQgb2JqZWN0IChpZiBpdCBleGlzdHMpIGFzIGxvbmcgYXNcbiAgICogaXQgcGFzc2VzIHRoZSBwcmVkaWNhdGUuXG4gICAqL1xuICBwdWJsaWMgZmlsdGVyPFUgZXh0ZW5kcyBUPihwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gdmFsdWUgaXMgVSk6IE9wdGlvbmFsPFU+O1xuICBwdWJsaWMgZmlsdGVyKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogT3B0aW9uYWw8VD47XG4gIHB1YmxpYyBmaWx0ZXIocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxUPiB7XG4gICAgaWYgKCF0aGlzLnRhZyB8fCBwcmVkaWNhdGUodGhpcy52YWx1ZSBhcyBUKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tIEdldHRlcnMgLS0tXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb3V0IG9mIHRoZSBpbnNpZGUgb2YgdGhlIGBPcHRpb25hbGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIGdldE9yPFUgPSBUPihyZXBsYWNlbWVudDogVSk6IFQgfCBVIHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyB0aGlzLnZhbHVlIGFzIFQgOiByZXBsYWNlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBPcHRpb25hbGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYVxuICAgKiB2YWx1ZS4gIFVubGlrZSBgZ2V0T3JgLCBpbiB0aGlzIG1ldGhvZCB0aGUgYHJlcGxhY2VtZW50YCBvYmplY3QgaXMgYWxzb1xuICAgKiBgT3B0aW9uYWxgIC0gbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhbiBgT3B0aW9uYWxgLlxuICAgKi9cbiAgcHVibGljIG9yPFUgPSBUPihyZXBsYWNlbWVudDogT3B0aW9uYWw8VT4pOiBPcHRpb25hbDxUIHwgVT4ge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMgOiByZXBsYWNlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBPcHRpb25hbGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYVxuICAgKiB2YWx1ZS4gVW5saWtlIGBnZXRPcmAsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIHZhbHVlIGlzXG4gICAqIFwidGh1bmtlZFwiIC0gdGhhdCBpcyB0byBzYXkgdGhhdCB5b3UgZG9uJ3QgcGFzcyBhIHZhbHVlIHRvIGBnZXRPclRodW5rYCwgeW91XG4gICAqIHBhc3MgYSBmdW5jdGlvbiB3aGljaCAoaWYgY2FsbGVkKSB3aWxsICoqcmV0dXJuKiogdGhlIGB2YWx1ZWAgeW91IHdhbnQgdG9cbiAgICogdXNlLlxuICAgKi9cbiAgcHVibGljIGdldE9yVGh1bms8VSA9IFQ+KHRodW5rOiAoKSA9PiBVKTogVCB8IFUge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMudmFsdWUgYXMgVCA6IHRodW5rKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYE9wdGlvbmFsYCBvYmplY3QsIHVzaW5nIGEgZGVmYXVsdFxuICAgKiBgcmVwbGFjZW1lbnRgIHZhbHVlIGlmIHRoZSBwcm92aWRlZCBPcHRpb25hbCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBVbmxpa2UgYG9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIGByZXBsYWNlbWVudGAgdmFsdWUgaXMgXCJ0aHVua2VkXCIgLSB0aGF0IGlzXG4gICAqIHRvIHNheSB0aGF0IHlvdSBkb24ndCBwYXNzIGEgdmFsdWUgdG8gYG9yVGh1bmtgLCB5b3UgcGFzcyBhIGZ1bmN0aW9uIHdoaWNoXG4gICAqIChpZiBjYWxsZWQpIHdpbGwgKipyZXR1cm4qKiB0aGUgYHZhbHVlYCB5b3Ugd2FudCB0byB1c2UuXG4gICAqXG4gICAqIFVubGlrZSBgZ2V0T3JUaHVua2AsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIHZhbHVlIGlzIGFsc29cbiAgICogYE9wdGlvbmFsYCwgbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhbiBgT3B0aW9uYWxgLlxuICAgKi9cbiAgcHVibGljIG9yVGh1bms8VSA9IFQ+KHRodW5rOiAoKSA9PiBPcHRpb25hbDxVPik6IE9wdGlvbmFsPFQgfCBVPiB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gdGhpcyA6IHRodW5rKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYE9wdGlvbmFsYCBvYmplY3QsIHRocm93aW5nIGFuXG4gICAqIGV4Y2VwdGlvbiBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKlxuICAgKiBXQVJOSU5HOlxuICAgKiBZb3Ugc2hvdWxkIG9ubHkgYmUgdXNpbmcgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB0aGF0IHRoZSBgT3B0aW9uYWxgXG4gICAqIG9iamVjdCAqKmlzIG5vdCoqIGVtcHR5IChvdGhlcndpc2UgeW91J3JlIHRocm93aW5nIGV4Y2VwdGlvbnMgaW4gcHJvZHVjdGlvblxuICAgKiBjb2RlLCB3aGljaCBpcyBiYWQpLlxuICAgKlxuICAgKiBJbiB0ZXN0cyB0aGlzIGlzIG1vcmUgYWNjZXB0YWJsZS5cbiAgICpcbiAgICogUHJlZmVyIG90aGVyIG1ldGhvZHMgdG8gdGhpcywgc3VjaCBhcyBgLmVhY2hgLlxuICAgKi9cbiAgcHVibGljIGdldE9yRGllKG1lc3NhZ2U/OiBzdHJpbmcpOiBUIHtcbiAgICBpZiAoIXRoaXMudGFnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSA/PyAnQ2FsbGVkIGdldE9yRGllIG9uIE5vbmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWUgYXMgVDtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gSW50ZXJvcCB3aXRoIG51bGwgYW5kIHVuZGVmaW5lZCAtLS1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBgT3B0aW9uYWxgIHZhbHVlIGZyb20gYSBudWxsYWJsZSAob3IgdW5kZWZpbmVkLWFibGUpIGlucHV0LlxuICAgKiBOdWxsLCBvciB1bmRlZmluZWQsIGlzIGNvbnZlcnRlZCB0byBgTm9uZWAsIGFuZCBhbnl0aGluZyBlbHNlIGlzIGNvbnZlcnRlZFxuICAgKiB0byBgU29tZWAuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb208VD4odGhpczogdm9pZCwgdmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogT3B0aW9uYWw8Tm9uTnVsbGFibGU8VD4+IHtcbiAgICByZXR1cm4gVHlwZS5pc05vbk51bGxhYmxlKHZhbHVlKSA/IE9wdGlvbmFsLnNvbWUodmFsdWUpIDogT3B0aW9uYWwubm9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIGBPcHRpb25hbGAgdG8gYSBudWxsYWJsZSB0eXBlLCBieSBnZXR0aW5nIHRoZSB2YWx1ZSBpZiBpdFxuICAgKiBleGlzdHMsIG9yIHJldHVybmluZyBgbnVsbGAgaWYgaXQgZG9lcyBub3QuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JOdWxsKCk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyB0aGlzLnZhbHVlIGFzIFQgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIGBPcHRpb25hbGAgdG8gYW4gdW5kZWZpbmVkLWFibGUgdHlwZSwgYnkgZ2V0dGluZyB0aGUgdmFsdWUgaWZcbiAgICogaXQgZXhpc3RzLCBvciByZXR1cm5pbmcgYHVuZGVmaW5lZGAgaWYgaXQgZG9lcyBub3QuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JVbmRlZmluZWQoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICAvLyAtLS0gVXRpbGl0aWVzIC0tLVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgYE9wdGlvbmFsYCBjb250YWlucyBhIHZhbHVlLCBwZXJmb3JtIGFuIGFjdGlvbiBvbiB0aGF0IHZhbHVlLlxuICAgKiBVbmxpa2UgdGhlIHJlc3Qgb2YgdGhlIG1ldGhvZHMgb24gdGhpcyB0eXBlLCBgLmVhY2hgIGhhcyBzaWRlLWVmZmVjdHMuIElmXG4gICAqIHlvdSB3YW50IHRvIHRyYW5zZm9ybSBhbiBgT3B0aW9uYWw8VD5gICoqaW50byoqIHNvbWV0aGluZywgdGhlbiB0aGlzIGlzIG5vdFxuICAgKiB0aGUgbWV0aG9kIGZvciB5b3UuIElmIHlvdSB3YW50IHRvIHVzZSBhbiBgT3B0aW9uYWw8VD5gIHRvICoqZG8qKlxuICAgKiBzb21ldGhpbmcsIHRoZW4gdGhpcyBpcyB0aGUgbWV0aG9kIGZvciB5b3UgLSBwcm92aWRlZCB5b3UncmUgb2theSB3aXRoIG5vdFxuICAgKiBkb2luZyBhbnl0aGluZyBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgYE9wdGlvbmFsYCBkb2Vzbid0IGhhdmUgYSB2YWx1ZSBpbnNpZGVcbiAgICogaXQuIElmIHlvdSdyZSBub3Qgc3VyZSB3aGV0aGVyIHlvdXIgdXNlLWNhc2UgZml0cyBpbnRvIHRyYW5zZm9ybWluZ1xuICAgKiAqKmludG8qKiBzb21ldGhpbmcgb3IgKipkb2luZyoqIHNvbWV0aGluZywgY2hlY2sgd2hldGhlciBpdCBoYXMgYSByZXR1cm5cbiAgICogdmFsdWUuIElmIGl0IGRvZXMsIHlvdSBzaG91bGQgYmUgcGVyZm9ybWluZyBhIHRyYW5zZm9ybS5cbiAgICovXG4gIHB1YmxpYyBlYWNoKHdvcmtlcjogKHZhbHVlOiBUKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICB3b3JrZXIodGhpcy52YWx1ZSBhcyBUKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHVybiB0aGUgYE9wdGlvbmFsYCBvYmplY3QgaW50byBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgdmFsdWVzXG4gICAqIHN0b3JlZCBpbnNpZGUgdGhlIGBPcHRpb25hbGAuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHRoZSBvdXRwdXQgd2lsbCBoYXZlXG4gICAqIGVpdGhlciAwIG9yIDEgZWxlbWVudHMuXG4gICAqL1xuICBwdWJsaWMgdG9BcnJheSgpOiBUW10ge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IFsgdGhpcy52YWx1ZSBhcyBUIF0gOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUdXJuIHRoZSBgT3B0aW9uYWxgIG9iamVjdCBpbnRvIGEgc3RyaW5nIGZvciBkZWJ1Z2dpbmcgb3IgcHJpbnRpbmcuIE5vdFxuICAgKiByZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbiBjb2RlLCBidXQgZ29vZCBmb3IgZGVidWdnaW5nLiBBbHNvIG5vdGUgdGhhdFxuICAgKiB0aGVzZSBkYXlzIGFuIGBPcHRpb25hbGAgb2JqZWN0IGNhbiBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUgZGlyZWN0bHksIGFuZFxuICAgKiBpdHMgaW5uZXIgdmFsdWUgKGlmIGl0IGV4aXN0cykgd2lsbCBiZSB2aXNpYmxlLlxuICAgKi9cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gYHNvbWUoJHt0aGlzLnZhbHVlfSlgIDogJ25vbmUoKSc7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIEFyciBmcm9tICcuL0Fycic7XG5pbXBvcnQgKiBhcyBGdW4gZnJvbSAnLi9GdW4nO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcblxuLyoqXG4gKiAqKklzKiogdGhlIHZhbHVlIHN0b3JlZCBpbnNpZGUgdGhpcyBPcHRpb25hbCBvYmplY3QgZXF1YWwgdG8gYHJoc2A/XG4gKi9cbmV4cG9ydCBjb25zdCBpcyA9IDxUPihsaHM6IE9wdGlvbmFsPFQ+LCByaHM6IFQsIGNvbXBhcmF0b3I6IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gRnVuLnRyaXBsZUVxdWFscyk6IGJvb2xlYW4gPT5cbiAgbGhzLmV4aXN0cygobGVmdCkgPT4gY29tcGFyYXRvcihsZWZ0LCByaHMpKTtcblxuLyoqXG4gKiBBcmUgdGhlc2UgdHdvIE9wdGlvbmFsIG9iamVjdHMgZXF1YWw/IEVxdWFsaXR5IGhlcmUgbWVhbnMgZWl0aGVyIHRoZXkncmUgYm90aFxuICogYFNvbWVgIChhbmQgdGhlIHZhbHVlcyBhcmUgZXF1YWwgdW5kZXIgdGhlIGNvbXBhcmF0b3IpIG9yIHRoZXkncmUgYm90aCBgTm9uZWAuXG4gKi9cbmV4cG9ydCBjb25zdCBlcXVhbHM6IHtcbiAgPEEsIEI+KGxoczogT3B0aW9uYWw8QT4sIHJoczogT3B0aW9uYWw8Qj4sIGNvbXBhcmF0b3I6IChhOiBBLCBiOiBCKSA9PiBib29sZWFuKTogYm9vbGVhbjtcbiAgPFQ+KGxoczogT3B0aW9uYWw8VD4sIHJoczogT3B0aW9uYWw8VD4pOiBib29sZWFuO1xufSA9IDxBLCBCPihsaHM6IE9wdGlvbmFsPEE+LCByaHM6IE9wdGlvbmFsPEI+LCBjb21wYXJhdG9yOiAoYTogQSwgYjogQikgPT4gYm9vbGVhbiA9IEZ1bi50cmlwbGVFcXVhbHMgYXMgYW55KTogYm9vbGVhbiA9PlxuICBsaWZ0MihsaHMsIHJocywgY29tcGFyYXRvcikuZ2V0T3IobGhzLmlzTm9uZSgpICYmIHJocy5pc05vbmUoKSk7XG5cbmV4cG9ydCBjb25zdCBjYXQgPSA8QT4oYXJyOiBPcHRpb25hbDxBPltdKTogQVtdID0+IHtcbiAgY29uc3QgcjogQVtdID0gW107XG4gIGNvbnN0IHB1c2ggPSAoeDogQSkgPT4ge1xuICAgIHIucHVzaCh4KTtcbiAgfTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbaV0uZWFjaChwdXNoKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXF1ZW5jZSA9IDxBPiAoYXJyOiBBcnJheUxpa2U8T3B0aW9uYWw8QT4+KTogT3B0aW9uYWw8QXJyYXk8QT4+ID0+IHtcbiAgY29uc3QgcjogQVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgeCA9IGFycltpXTtcbiAgICBpZiAoeC5pc1NvbWUoKSkge1xuICAgICAgci5wdXNoKHguZ2V0T3JEaWUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lPEFycmF5PEE+PigpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT3B0aW9uYWwuc29tZShyKTtcbn07XG5cbi8qKiBAZGVwcmVjYXRlZCBVc2UgQXJyLmZpbmRNYXAgaW5zdGVhZC4gKi9cbmV4cG9ydCBjb25zdCBmaW5kTWFwID0gQXJyLmZpbmRNYXA7XG5cbi8qKiBNYXAgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5IHRvIGFuIE9wdGlvbmFsIGFuZCBjb2xsZWN0IHRoZSByZXN1bHRzLlxuICogIElmIGFsbCByZXN1bHRzIGFyZSBcInNvbWVcIiwgcmV0dXJuIE9wdGlvbmFsLnNvbWUgb2YgdGhlIHJlc3VsdHMuXG4gKiAgSWYgYW55IHJlc3VsdCBpcyBcIm5vbmVcIiwgcmV0dXJuIE9wdGlvbmFsLm5vbmVcbiAqL1xuZXhwb3J0IGNvbnN0IHRyYXZlcnNlID0gPEEsIEI+IChhcnI6IEFycmF5TGlrZTxBPiwgZjogKGE6IEEpID0+IE9wdGlvbmFsPEI+KTogT3B0aW9uYWw8QXJyYXk8Qj4+ID0+XG4gIHNlcXVlbmNlKEFyci5tYXAoYXJyLCBmKSk7XG5cbi8qXG5Ob3RlcyBvbiB0aGUgbGlmdCBmdW5jdGlvbnM6XG4tIFdlIHVzZWQgdG8gaGF2ZSBhIGdlbmVyaWMgbGlmdE4sIGJ1dCB3ZSB3ZXJlIGNvbmNlcm5lZCBhYm91dCBpdHMgdHlwZS1zYWZldHksIGFuZCB0aGUgYmVsb3cgdmFyaWFudHMgd2VyZSBmYXN0ZXIgaW4gbWljcm9iZW5jaG1hcmtzLlxuLSBUaGUgZ2V0T3JEaWUgY2FsbHMgYXJlIHBhcnRpYWwgZnVuY3Rpb25zLCBidXQgYXJlIGNoZWNrZWQgYmVmb3JlaGFuZC4gVGhpcyBpcyBmYXN0ZXIgYW5kIG1vcmUgY29udmVuaWVudCAoYnV0IGxlc3Mgc2FmZSkgdGhhbiBmb2xkcy5cbi0gJiYgaXMgdXNlZCBpbnN0ZWFkIG9mIGEgbG9vcCBmb3Igc2ltcGxpY2l0eSBhbmQgcGVyZm9ybWFuY2UuXG4qL1xuXG5leHBvcnQgY29uc3QgbGlmdDIgPSA8QSwgQiwgQz4gKG9hOiBPcHRpb25hbDxBPiwgb2I6IE9wdGlvbmFsPEI+LCBmOiAoYTogQSwgYjogQikgPT4gQyk6IE9wdGlvbmFsPEM+ID0+XG4gIG9hLmlzU29tZSgpICYmIG9iLmlzU29tZSgpID8gT3B0aW9uYWwuc29tZShmKG9hLmdldE9yRGllKCksIG9iLmdldE9yRGllKCkpKSA6IE9wdGlvbmFsLm5vbmU8Qz4oKTtcblxuZXhwb3J0IGNvbnN0IGxpZnQzID0gPEEsIEIsIEMsIEQ+IChvYTogT3B0aW9uYWw8QT4sIG9iOiBPcHRpb25hbDxCPiwgb2M6IE9wdGlvbmFsPEM+LCBmOiAoYTogQSwgYjogQiwgYzogQykgPT4gRCk6IE9wdGlvbmFsPEQ+ID0+XG4gIG9hLmlzU29tZSgpICYmIG9iLmlzU29tZSgpICYmIG9jLmlzU29tZSgpID8gT3B0aW9uYWwuc29tZShmKG9hLmdldE9yRGllKCksIG9iLmdldE9yRGllKCksIG9jLmdldE9yRGllKCkpKSA6IE9wdGlvbmFsLm5vbmU8RD4oKTtcblxuZXhwb3J0IGNvbnN0IGxpZnQ0ID0gPEEsIEIsIEMsIEQsIEU+IChvYTogT3B0aW9uYWw8QT4sIG9iOiBPcHRpb25hbDxCPiwgb2M6IE9wdGlvbmFsPEM+LCBvZDogT3B0aW9uYWw8RD4sIGY6IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBEKSA9PiBFKTogT3B0aW9uYWw8RT4gPT5cbiAgb2EuaXNTb21lKCkgJiYgb2IuaXNTb21lKCkgJiYgb2MuaXNTb21lKCkgJiYgb2QuaXNTb21lKCkgPyBPcHRpb25hbC5zb21lKGYob2EuZ2V0T3JEaWUoKSwgb2IuZ2V0T3JEaWUoKSwgb2MuZ2V0T3JEaWUoKSwgb2QuZ2V0T3JEaWUoKSkpIDogT3B0aW9uYWwubm9uZTxFPigpO1xuXG5leHBvcnQgY29uc3QgbGlmdDUgPSA8QSwgQiwgQywgRCwgRSwgRj4gKG9hOiBPcHRpb25hbDxBPiwgb2I6IE9wdGlvbmFsPEI+LCBvYzogT3B0aW9uYWw8Qz4sIG9kOiBPcHRpb25hbDxEPiwgb2U6IE9wdGlvbmFsPEU+LCBmOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSkgPT4gRik6IE9wdGlvbmFsPEY+ID0+XG4gIG9hLmlzU29tZSgpICYmIG9iLmlzU29tZSgpICYmIG9jLmlzU29tZSgpICYmIG9kLmlzU29tZSgpICYmIG9lLmlzU29tZSgpID8gT3B0aW9uYWwuc29tZShmKG9hLmdldE9yRGllKCksIG9iLmdldE9yRGllKCksIG9jLmdldE9yRGllKCksIG9kLmdldE9yRGllKCksIG9lLmdldE9yRGllKCkpKSA6IE9wdGlvbmFsLm5vbmU8Rj4oKTtcblxuZXhwb3J0IGNvbnN0IG1hcEZyb20gPSA8QSwgQj4gKGE6IEEgfCBudWxsIHwgdW5kZWZpbmVkLCBmOiAoYTogQSkgPT4gQik6IE9wdGlvbmFsPEI+ID0+XG4gIChhICE9PSB1bmRlZmluZWQgJiYgYSAhPT0gbnVsbCkgPyBPcHRpb25hbC5zb21lKGYoYSkpIDogT3B0aW9uYWwubm9uZTxCPigpO1xuXG5leHBvcnQgY29uc3QgYmluZEZyb20gPSA8QSwgQj4gKGE6IEEgfCBudWxsIHwgdW5kZWZpbmVkLCBmOiAoYTogQSkgPT4gT3B0aW9uYWw8Qj4pOiBPcHRpb25hbDxCPiA9PlxuICAoYSAhPT0gdW5kZWZpbmVkICYmIGEgIT09IG51bGwpID8gZihhKSA6IE9wdGlvbmFsLm5vbmU8Qj4oKTtcblxuZXhwb3J0IGNvbnN0IGZsYXR0ZW4gPSA8VD4gKG9vdDogT3B0aW9uYWw8T3B0aW9uYWw8VD4+KTogT3B0aW9uYWw8VD4gPT4gb290LmJpbmQoRnVuLmlkZW50aXR5KTtcblxuLy8gVGhpcyBjYW4gaGVscCB3aXRoIHR5cGUgaW5mZXJlbmNlLCBieSBzcGVjaWZ5aW5nIHRoZSB0eXBlIHBhcmFtIG9uIHRoZSBub25lIGNhc2UsIHNvIHRoZSBjYWxsZXIgZG9lc24ndCBoYXZlIHRvLlxuZXhwb3J0IGNvbnN0IHNvbWVJZiA9IDxBPiAoYjogYm9vbGVhbiwgYTogQSk6IE9wdGlvbmFsPEE+ID0+XG4gIGIgPyBPcHRpb25hbC5zb21lKGEpIDogT3B0aW9uYWwubm9uZTxBPigpO1xuIiwiaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnLi9HbG9iYWwnO1xuXG4vKiogcGF0aCA6OiAoW1N0cmluZ10sIEpzT2JqPykgLT4gSnNPYmogKi9cbmV4cG9ydCBjb25zdCBwYXRoID0gPFQ+KHBhcnRzOiBzdHJpbmdbXSwgc2NvcGU/OiB7fSk6IFQgfCB1bmRlZmluZWQgPT4ge1xuICBsZXQgbyA9IHNjb3BlICE9PSB1bmRlZmluZWQgJiYgc2NvcGUgIT09IG51bGwgPyBzY29wZSA6IEdsb2JhbDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggJiYgbyAhPT0gdW5kZWZpbmVkICYmIG8gIT09IG51bGw7ICsraSkge1xuICAgIG8gPSBvW3BhcnRzW2ldXTtcbiAgfVxuICByZXR1cm4gbztcbn07XG5cbi8qKiByZXNvbHZlIDo6IChTdHJpbmcsIEpzT2JqPykgLT4gSnNPYmogKi9cbmV4cG9ydCBjb25zdCByZXNvbHZlID0gPFQ+KHA6IHN0cmluZywgc2NvcGU/OiB7fSk6IFQgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBwYXJ0cyA9IHAuc3BsaXQoJy4nKTtcbiAgcmV0dXJuIHBhdGgocGFydHMsIHNjb3BlKTtcbn07XG5cbi8qKiBzdGVwIDo6IChKc09iaiwgU3RyaW5nKSAtPiBKc09iaiAqL1xuZXhwb3J0IGNvbnN0IHN0ZXAgPSA8VCBleHRlbmRzIHt9LCBLIGV4dGVuZHMga2V5b2YgVD4obzogVCwgcGFydDogSyk6IFRbS10gPT4ge1xuICBpZiAob1twYXJ0XSA9PT0gdW5kZWZpbmVkIHx8IG9bcGFydF0gPT09IG51bGwpIHtcbiAgICBvW3BhcnRdID0ge30gYXMgVFtLXTtcbiAgfVxuICByZXR1cm4gb1twYXJ0XTtcbn07XG5cbi8qKiBmb3JnZSA6OiAoW1N0cmluZ10sIEpzT2JqPykgLT4gSnNPYmogKi9cbmV4cG9ydCBjb25zdCBmb3JnZSA9IDxUIGV4dGVuZHMgc3RyaW5nW10+KHBhcnRzOiBULCB0YXJnZXQ/OiB7fSk6IHsgWyBLIGluIFRbbnVtYmVyXV06IHt9fSA9PiB7XG4gIGxldCBvID0gdGFyZ2V0ICE9PSB1bmRlZmluZWQgPyB0YXJnZXQgOiBHbG9iYWw7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyArK2kpIHtcbiAgICBvID0gc3RlcChvLCBwYXJ0c1tpXSk7XG4gIH1cbiAgcmV0dXJuIG87XG59O1xuXG4vKiogbmFtZXNwYWNlIDo6IChTdHJpbmcsIEpzT2JqPykgLT4gSnNPYmogKi9cbmV4cG9ydCBjb25zdCBuYW1lc3BhY2UgPSAobmFtZTogc3RyaW5nLCB0YXJnZXQ/OiB7fSk6IHsgW2tleTogc3RyaW5nXToge319ID0+IHtcbiAgY29uc3QgcGFydHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gIHJldHVybiBmb3JnZShwYXJ0cywgdGFyZ2V0KTtcbn07XG4iLCJpbXBvcnQgKiBhcyBGdW4gZnJvbSAnLi9GdW4nO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcblxuLyoqXG4gKiBUaGUgYFJlc3VsdGAgdHlwZSByZXByZXNlbnRzIGEgdmFsdWUgKG9mIGFueSB0eXBlKSB0aGF0IG1heSBpbnN0ZWFkIGJlIGFuXG4gKiBlcnJvciAob2YgYW55IHR5cGUpLiBBbnkgYFJlc3VsdDxULCBFPmAgY2FuIGVpdGhlciBiZSBhIGBWYWx1ZTxUPmAgKHdoaWNoXG4gKiBjb250YWlucyBhIHZhbHVlIG9mIHR5cGUgYFRgKSBvciBhbiBgRXJyb3I8RT5gICh3aGljaCBjb250YWlucyBhbiBlcnJvciBvZlxuICogdHlwZSBgRWApLiBUaGlzIG1vZHVsZSBkZWZpbmVzIGEgd2hvbGUgbG90IG9mIEZQLWluc3BpcmVkIHV0aWxpdHkgZnVuY3Rpb25zXG4gKiBmb3IgZGVhbGluZyB3aXRoIGBSZXN1bHRgIG9iamVjdHMuXG4gKlxuICogQ29tcGFyaXNvbiB3aXRoIGV4Y2VwdGlvbnM6XG4gKiAtIEVhY2ggZnVuY3Rpb24ncyB0eXBlIHNpZ25hdHVyZSBzYXlzIHdoZXRoZXIgaXQgcmV0dXJucyBhIGBSZXN1bHRgIG9yIG5vdFxuICogKHRoZXkncmUgbGlrZSBjaGVja2VkIGV4Y2VwdGlvbnMpLlxuICogLSBUaGUgdHlwZSBvZiB0aGUgZXJyb3IgaW4gYSByZXN1bHQgY2FuIGJlIGNoZWNrZWQgYnkgVHlwZVNjcmlwdC5cbiAqIC0gWW91IGNhbid0IGZvcmdldCB0byBjYXRjaCBlcnJvcnMgZnJvbSBpbnNpZGUgYSBgUmVzdWx0YCwgeW91IG5lZWQgdG8gaGFuZGxlXG4gKiB0aGVtIHRvIGFjY2VzcyB0aGUgdmFsdWUuXG4gKlxuICogQ29tcGFyaXNvbiB3aXRoIG9wdGlvbmFsczpcbiAqIC0gQm90aCBgT3B0aW9uYWxgIGFuZCBgUmVzdWx0YCBhcmUgYSB0eXBlc2FmZSB3YXkgdG8gc3RvcmUgZGF0YSB0aGF0IG1pZ2h0XG4gKiBub3QgZXhpc3QuXG4gKiAtIFNpbWlsYXIgZnVuY3Rpb25zIGFyZSBkZWZpbmVkIG9uIGJvdGggYE9wdGlvbmFsYCBhbmQgYFJlc3VsdGAgdG8gb3BlcmF0ZSBvblxuICogdGhlIGRhdGEgaW5zaWRlLlxuICogLSBUaGUgZGlmZmVyZW5jZSBpcyBpbiB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgZGF0YSAqKmRvZXMgbm90KiogZXhpc3Q6XG4gKiAgIC0gYE9wdGlvbmFsYCBzdG9yZXMgbm90aGluZyBpZiB0aGUgZGF0YSBpcyBub3QgdGhlcmUuXG4gKiAgIC0gYFJlc3VsdGAgc3RvcmVzIGFuIGVycm9yIGlmIHRoZSBkYXRhIGlzIG5vdCB0aGVyZS5cbiAqIC0gRGVjaWRlIHdoZXRoZXIgdG8gdXNlIGBPcHRpb25hbGAgb3IgYFJlc3VsdGAgYmFzZWQgb24gd2hhdCBubyBkYXRhIG1lYW5zXG4gKiBmb3IgeW91ciB1c2UtY2FzZTpcbiAqICAgLSBVc2UgYE9wdGlvbmFsYCBpZiBubyBkYXRhIGp1c3QgbWVhbnMgdGhlcmUgaXNuJ3QgYW55IGRhdGEsIGFuZCBpc24ndCBhblxuICogICBpc3N1ZS5cbiAqICAgLSBVc2UgYFJlc3VsdGAgaWYgbm8gZGF0YSBtZWFucyBhbiBlcnJvciBvY2N1cnJlZCwgYW5kIHlvdSBtaWdodCBuZWVkIHRvXG4gKiAgIG9wZXJhdGUgb24gdGhlIGVycm9yIGxhdGVyLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdDxULCBFPiB7XG4gIC8vIC0tLSBJZGVudGl0aWVzIC0tLVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgdHJhbnNmb3JtIG9uIGEgYFJlc3VsdGAgdHlwZS4gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgYFJlc3VsdGBcbiAgICogY29udGFpbnMgYW4gZXJyb3Igb3IgYSB2YWx1ZSwgYGZvbGRgIHdpbGwgcmV0dXJuIGEgdmFsdWUgb2YgdHlwZSBgVWAuIElmXG4gICAqIHRoaXMgYFJlc3VsdGAgY29udGFpbnMgYW4gZXJyb3IsIHRoZSBgVWAgd2lsbCBiZSBjcmVhdGVkIGJ5IGNhbGxpbmdcbiAgICogYG9uRXJyb3JgLiBJZiB0aGlzIGBSZXN1bHRgIGNvbnRhaW5zIGEgdmFsdWUsIHRoZSBgVWAgd2lsbCBiZSBjcmVhdGVkIGJ5XG4gICAqIGNhbGxpbmcgYG9uVmFsdWVgLlxuICAgKlxuICAgKiBGb3IgdGhlIEZQIGVudGh1c2lhc3RzIGluIHRoZSByb29tLCB0aGlzIGZ1bmN0aW9uOlxuICAgKiAxLiBDb3VsZCBiZSB1c2VkIHRvIGltcGxlbWVudCBhbGwgb2YgdGhlIGZ1bmN0aW9ucyBiZWxvd1xuICAgKiAyLiBGb3JtcyBhIGNhdGFtb3JwaGlzbVxuICAgKi9cbiAgcmVhZG9ubHkgZm9sZDogPFU+KG9uRXJyb3I6IChlcnJvcjogRSkgPT4gVSwgb25WYWx1ZTogKHZhbHVlOiBUKSA9PiBVKSA9PiBVO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgYFJlc3VsdGAgb2JqZWN0IGNvbnRhaW5zIGEgdmFsdWUuXG4gICAqL1xuICByZWFkb25seSBpc1ZhbHVlOiAoKSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgYFJlc3VsdGAgb2JqZWN0ICoqZG9lcyBub3QqKiBjb250YWluIGEgdmFsdWUgKGFuZFxuICAgKiB0aGVyZWZvcmUgY29udGFpbnMgYW4gZXJyb3IgaW5zdGVhZCkuXG4gICAqL1xuICByZWFkb25seSBpc0Vycm9yOiAoKSA9PiBib29sZWFuO1xuXG4gIC8vIC0tLSBGdW5jdG9yIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYSBgUmVzdWx0YCBvYmplY3QsICoqaWYqKiB0aGVyZSBpcyBhIHZhbHVlLiBJZiB5b3VcbiAgICogcHJvdmlkZSBhIGZ1bmN0aW9uIHRvIHR1cm4gYSBgVGAgaW50byBhIGBVYCwgdGhpcyBpcyB0aGUgZnVuY3Rpb24geW91IHVzZVxuICAgKiB0byB0dXJuIGEgYFJlc3VsdDxULCBFPmAgaW50byBhIGBSZXN1bHQ8VSwgRT5gLiBJZiB0aGlzIGBSZXN1bHRgICoqZG9lcyoqXG4gICAqIGNvbnRhaW4gYSB2YWx1ZSB0aGVuIHRoZSBvdXRwdXQgd2lsbCBhbHNvIGNvbnRhaW4gYSB2YWx1ZSAodGhhdCB2YWx1ZSBiZWluZ1xuICAgKiB0aGUgb3V0cHV0IG9mIGBtYXBwZXIodGhpcy52YWx1ZSlgKSwgYW5kIGlmIHRoaXMgKipkb2VzIG5vdCoqIGNvbnRhaW4gYVxuICAgKiB2YWx1ZSB0aGVuIG5laXRoZXIgd2lsbCB0aGUgb3V0cHV0IChhbmQgdGhlIGVycm9yIHdpbGwgcmVtYWluIHRoZSBzYW1lKS5cbiAgICovXG4gIHJlYWRvbmx5IG1hcDogPFU+KG1hcHBlcjogKHZhbHVlOiBUKSA9PiBVKSA9PiBSZXN1bHQ8VSwgRT47XG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYSBgUmVzdWx0YCBvYmplY3QsIGlmIHRoZXJlICoqaXMgbm90KiogYSB2YWx1ZS4gSWZcbiAgICogeW91IHByb3ZpZGUgYSBmdW5jdGlvbiB0byB0dXJuIGFuIGBFYCBpbnRvIGFuIGBGYCwgdGhpcyBpcyB0aGUgZnVuY3Rpb24geW91XG4gICAqIHVzZSB0byB0dXJuIGEgYFJlc3VsdDxULCBFPmAgaW50byBhIGBSZXN1bHQ8VCwgRj5gLiBJZiB0aGlzIGBSZXN1bHRgICoqZG9lc1xuICAgKiBub3QqKiBjb250YWluIGEgdmFsdWUsIGFuZCB0aGVyZWZvcmUgY29udGFpbnMgYW4gZXJyb3IsIHRoZW4gdGhlIG91dHB1dFxuICAgKiB3aWxsIG5vdCBjb250YWluIGEgdmFsdWUgZWl0aGVyIChhbmQgdGhlIGVycm9yIHdpbGwgYmUgdGhlIG91dHB1dCBvZlxuICAgKiBgbWFwcGVyKHRoaXMuZXJyb3IpYCkuIElmIHRoaXMgKipkb2VzKiogY29udGFpbiBhIHZhbHVlIHRoZW4gc28gd2lsbCB0aGVcbiAgICogb3V0cHV0IChhbmQgdGhlIHZhbHVlIHdpbGwgYmUgdGhlIHNhbWUgdmFsdWUpLlxuICAgKi9cbiAgcmVhZG9ubHkgbWFwRXJyb3I6IDxGPihtYXBwZXI6IChlcnJvcjogRSkgPT4gRikgPT4gUmVzdWx0PFQsIEY+O1xuXG4gIC8vIC0tLSBNb25hZCAobmFtZSBzdG9sZW4gZnJvbSBIYXNrZWxsIC8gbWF0aHMpIC0tLVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgdHJhbnNmb3JtIG9uIGEgYFJlc3VsdGAgb2JqZWN0LCAqKmlmKiogdGhlcmUgaXMgYSB2YWx1ZS4gSWYgeW91XG4gICAqIGhhdmUgYSBmdW5jdGlvbiB0aGF0IGF0dGVtcHRzIHRvIHRyYW5zZm9ybSBhIGBUYCBpbnRvIGEgYFVgIChpLmUuIGFcbiAgICogZnVuY3Rpb24gdGhhdCB0dXJucyBgVGAgaW50byBgUmVzdWx0PFUsIEU+YCkgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGxcbiAgICogdHJhbnNmb3JtIGEgYFJlc3VsdDxULCBFPmAgaW50byBhIGBSZXN1bHQ8VSwgRT5gLiBJZiB0aGlzIGBSZXN1bHRgICoqZG9lcyoqXG4gICAqIGNvbnRhaW4gYSB2YWx1ZSwgdGhlbiB0aGUgb3V0cHV0IHdpbGwgYmUgYGJpbmRlcih0aGlzLnZhbHVlKWAsIGFuZCBpZiB0aGlzXG4gICAqICoqZG9lcyBub3QqKiBjb250YWluIGEgdmFsdWUgdGhlbiBuZWl0aGVyIHdpbGwgdGhlIG91dHB1dCAoYW5kIHRoZSBlcnJvclxuICAgKiB3aWxsIHJlbWFpbiB0aGUgc2FtZSkuXG4gICAqL1xuICByZWFkb25seSBiaW5kOiA8VT4oYmluZGVyOiAodmFsdWU6IFQpID0+IFJlc3VsdDxVLCBFPikgPT4gUmVzdWx0PFUsIEU+O1xuXG4gIC8vIC0tLSBUcmF2ZXJzYWJsZSAobmFtZSBzdG9sZW4gZnJvbSBIYXNrZWxsIC8gbWF0aHMpIC0tLVxuXG4gIC8qKlxuICAgKiBGb3IgYSBnaXZlbiBwcmVkaWNhdGUsIHRoaXMgZnVuY3Rpb24gZmluZHMgb3V0IGlmIHRoZXJlICoqZXhpc3RzKiogYSB2YWx1ZVxuICAgKiBpbnNpZGUgdGhpcyBgUmVzdWx0YCBvYmplY3QgdGhhdCBtZWV0cyB0aGUgcHJlZGljYXRlLiBJbiBwcmFjdGljZSwgdGhpc1xuICAgKiBtZWFucyB0aGF0IGZvciBgUmVzdWx0c2AgdGhhdCBjb250YWluIGVycm9ycyBpdCByZXR1cm5zIGZhbHNlIChhcyBub1xuICAgKiBwcmVkaWNhdGUtbWVldGluZyB2YWx1ZSBleGlzdHMpLlxuICAgKi9cbiAgcmVhZG9ubHkgZXhpc3RzOiAocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pID0+IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgKmFsbCoqIHRoZSB2YWx1ZXMgaW5zaWRlXG4gICAqIHRoaXMgYFJlc3VsdGAgbWVldCB0aGUgcHJlZGljYXRlLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyB0aGF0IGZvclxuICAgKiBgUmVzdWx0c2AgdGhhdCBjb250YWluIGVycm9ycyBpdCByZXR1cm5zIHRydWUgKGFzIGFsbCAwIHZhbHVlcyBkbyBtZWV0IHRoZVxuICAgKiBwcmVkaWNhdGUpLlxuICAgKi9cbiAgcmVhZG9ubHkgZm9yYWxsOiAocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pID0+IGJvb2xlYW47XG5cbiAgLy8gLS0tIEdldHRlcnMgLS1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYFJlc3VsdGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYFJlc3VsdGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZS5cbiAgICovXG4gIHJlYWRvbmx5IGdldE9yOiA8VDIgPSBUPihyZXBsYWNlbWVudDogVDIpID0+IFQgfCBUMjtcblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYFJlc3VsdGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYFJlc3VsdGAgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYVxuICAgKiB2YWx1ZS4gVW5saWtlIGBnZXRPcmAsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIHZhbHVlIGlzIGFsc28gYVxuICAgKiBgUmVzdWx0YCAtIG1lYW5pbmcgdGhhdCB0aGlzIG1ldGhvZCB3aWxsIGFsd2F5cyByZXR1cm4gYSBgUmVzdWx0YC5cbiAgICovXG4gIHJlYWRvbmx5IG9yOiA8VDIgPSBULCBFMiA9IEU+KHJlcGxhY2VtZW50OiBSZXN1bHQ8VDIsIEUyPikgPT4gUmVzdWx0PFQgfCBUMiwgRSB8IEUyPjtcblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGlzIGBSZXN1bHRgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBSZXN1bHRgIGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZS5cbiAgICpcbiAgICogVW5saWtlIGBnZXRPcmAsIGluIHRoaXMgbWV0aG9kIHRoZSByZXBsYWNlbWVudCB2YWx1ZSBpcyBcInRodW5rZWRcIiAtIHRoYXQgaXNcbiAgICogdG8gc2F5IHRoYXQgeW91IGRvbid0IHBhc3MgYSB2YWx1ZSB0byBgZ2V0T3JUaHVua2AsIHlvdSBwYXNzIGEgZnVuY3Rpb25cbiAgICogd2hpY2ggKGlmIGNhbGxlZCkgd2lsbCAqKnJldHVybioqIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICByZWFkb25seSBnZXRPclRodW5rOiA8VDIgPSBUPih0aHVuazogKCkgPT4gVDIpID0+IFQgfCBUMjtcblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGlzIGBSZXN1bHRgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIGBSZXN1bHRgIGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZS5cbiAgICpcbiAgICogVW5saWtlIGBvcmAsIGluIHRoaXMgbWV0aG9kIHRoZSByZXBsYWNlbWVudCB2YWx1ZSBpcyBcInRodW5rZWRcIiAtIHRoYXQgaXMgdG9cbiAgICogc2F5IHRoYXQgeW91IGRvbid0IHBhc3MgYSB2YWx1ZSB0byBgb3JUaHVua2AsIHlvdSBwYXNzIGEgZnVuY3Rpb24gd2hpY2ggKGlmXG4gICAqIGNhbGxlZCkgd2lsbCAqKnJldHVybioqIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byB1c2UuXG4gICAqXG4gICAqIFVubGlrZSBgZ2V0T3JUaHVua2AsIGluIHRoaXMgbWV0aG9kIHRoZSByZXBsYWNlbWVudCB2YWx1ZSBpcyBhbHNvIGFcbiAgICogYFJlc3VsdGAsIG1lYW5pbmcgdGhhdCB0aGlzIG1ldGhvZCB3aWxsIGFsd2F5cyByZXR1cm4gYSBgUmVzdWx0YC5cbiAgICovXG4gIHJlYWRvbmx5IG9yVGh1bms6IDxUMiA9IFQsIEUyID0gRT4odGh1bms6ICgpID0+IFJlc3VsdDxUMiwgRTI+KSA9PiBSZXN1bHQ8VCB8IFQyLCBFIHwgRTI+O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgUmVzdWx0YCBvYmplY3QsIHRocm93aW5nIGFuXG4gICAqIGV4Y2VwdGlvbiBpZiB0aGUgcHJvdmlkZWQgYFJlc3VsdGAgb2JqZWN0IGNvbnRhaW5zIGFuIGVycm9yIGluc3RlYWQgb2YgYVxuICAgKiB2YWx1ZS5cbiAgICpcbiAgICogV0FSTklORzogWW91IHNob3VsZCBvbmx5IGJlIHVzaW5nIHRoaXMgZnVuY3Rpb24gaWYgeW91IGtub3cgdGhhdCB0aGVcbiAgICogYFJlc3VsdGAgb2JqZWN0ICoqZG9lcyoqIGNvbnRhaW4gYSB2YWx1ZSAob3RoZXJ3aXNlIHlvdSdyZSB0aHJvd2luZ1xuICAgKiBleGNlcHRpb25zIGluIHByb2R1Y3Rpb24gY29kZSwgd2hpY2ggaXMgYmFkKS5cbiAgICpcbiAgICogSW4gdGVzdHMgdGhpcyBpcyBtb3JlIGFjY2VwdGFibGUuXG4gICAqXG4gICAqIFByZWZlciBvdGhlciBtZXRob2RzIHRvIHRoaXMsIHN1Y2ggYXMgYC5lYWNoYC5cbiAgICovXG4gIHJlYWRvbmx5IGdldE9yRGllOiAoKSA9PiBUO1xuXG4gIC8vIC0tLSBVdGlsaXRpZXMgLS0tXG5cbiAgLyoqXG4gICAqIElmIHRoaXMgYFJlc3VsdGAgY29udGFpbnMgYSB2YWx1ZSwgcGVyZm9ybSBhbiBhY3Rpb24gb24gdGhhdCB2YWx1ZS4gVW5saWtlXG4gICAqIHRoZSByZXN0IG9mIHRoZSBtZXRob2RzIG9uIHRoaXMgdHlwZSwgYC5lYWNoYCBoYXMgc2lkZS1lZmZlY3RzLiBJZiB5b3Ugd2FudFxuICAgKiB0byB0cmFuc2Zvcm0gYSBgUmVzdWx0PFQsIEU+YCAqKmludG8qKiBzb21ldGhpbmcsIHRoZW4gdGhpcyBpcyBub3QgdGhlXG4gICAqIG1ldGhvZCBmb3IgeW91LiBJZiB5b3Ugd2FudCB0byB1c2UgYSBgUmVzdWx0PFQsIEU+YCB0byAqKmRvKiogc29tZXRoaW5nLFxuICAgKiB0aGVuIHRoaXMgaXMgdGhlIG1ldGhvZCBmb3IgeW91IC0gcHJvdmlkZWQgeW91J3JlIG9rYXkgd2l0aCBub3QgZG9pbmdcbiAgICogYW55dGhpbmcgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlIGBSZXN1bHRgIGRvZXNuJ3QgaGF2ZSBhIHZhbHVlIGluc2lkZSBpdC4gSWZcbiAgICogeW91J3JlIG5vdCBzdXJlIHdoZXRoZXIgeW91ciB1c2UtY2FzZSBmaXRzIGludG8gdHJhbnNmb3JtaW5nICoqaW50byoqXG4gICAqIHNvbWV0aGluZyBvciAqKmRvaW5nKiogc29tZXRoaW5nLCBjaGVjayB3aGV0aGVyIGl0IGhhcyBhIHJldHVybiB2YWx1ZS4gSWZcbiAgICogaXQgZG9lcywgeW91IHNob3VsZCBiZSBwZXJmb3JtaW5nIGEgdHJhbnNmb3JtLlxuICAgKi9cbiAgcmVhZG9ubHkgZWFjaDogKHdvcmtlcjogKHZhbHVlOiBUKSA9PiB2b2lkKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoaXMgYFJlc3VsdDxULCBFPmAgdG8gYW4gYE9wdGlvbmFsPFQ+YC4gSWYgdGhpcyBvYmplY3QgY29udGFpbnMgYVxuICAgKiB2YWx1ZSwgc28gd2lsbCB0aGUgb3V0cHV0LiBJZiB0aGlzIG9iamVjdCBjb250YWlucyBhbiBlcnJvciwgdGhlIGVycm9yIHdpbGxcbiAgICogYmUgZGlzY2FyZGVkIGFuZCB0aGUgb3V0cHV0IHdpbGwgbm90IGNvbnRhaW4gYSB2YWx1ZS5cbiAgICovXG4gIHJlYWRvbmx5IHRvT3B0aW9uYWw6ICgpID0+IE9wdGlvbmFsPFQ+O1xufVxuXG4vKiBEZWJ1Z2dpbmcgaW5mb3JtYXRpb24uIFRoaXMgaXMgZGVsaWJlcmF0ZWx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgZXhwb3J0ZWRcbiAqIHR5cGVzLCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgcHJvZHVjdGlvbiBjb2RlIHRvIHVzZSBpdCwgYnV0IGl0J3MgdmVyeSB1c2VmdWxcbiAqIHRvIGhhdmUgdGhpcyBpbmZvcm1hdGlvbiBpbmNsdWRlZCBpbiB0aGUgb2JqZWN0cyB0aGVtc2VsdmVzIGZvciB3aGVuIHlvdSdyZVxuICogbG9va2luZyBhdCB0aGVtIGluIHRoZSBjb25zb2xlIG9yIGRlYnVnZ2VyLlxuICovXG5pbnRlcmZhY2UgRGVidWdSZXN1bHQ8VCwgRT4gZXh0ZW5kcyBSZXN1bHQ8VCwgRT4ge1xuICAvKipcbiAgICogVHJ1ZSBmb3IgYFZhbHVlYCwgRmFsc2UgZm9yIGBFcnJvcmAuXG4gICAqL1xuICByZWFkb25seSB0YWc6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBvciBlcnJvciBjb250YWluZWQgd2l0aGluIHRoaXMgUmVzdWx0IG9iamVjdC5cbiAgICovXG4gIHJlYWRvbmx5IGlubmVyOiBUIHwgRTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBSZXN1bHQ8VCwgRT5gIHRoYXQgKipkb2VzKiogY29udGFpbiBhIHZhbHVlLlxuICovXG5jb25zdCB2YWx1ZSA9IDxULCBFID0gbmV2ZXI+KHZhbHVlOiBUKTogUmVzdWx0PFQsIEU+ID0+IHtcblxuICBjb25zdCBhcHBseUhlbHBlciA9IDxVPihmbjogKHZhbHVlOiBUKSA9PiBVKTogVSA9PiBmbih2YWx1ZSk7XG4gIGNvbnN0IGNvbnN0SGVscGVyID0gRnVuLmNvbnN0YW50KHZhbHVlKTtcbiAgY29uc3Qgb3V0cHV0SGVscGVyID0gPEUyID0gRT4oKSA9PiBvdXRwdXQgYXMgdW5rbm93biBhcyBSZXN1bHQ8VCwgRTI+O1xuXG4gIGNvbnN0IG91dHB1dDogRGVidWdSZXN1bHQ8VCwgRT4gPSB7XG4gICAgLy8gRGVidWcgaW5mb1xuICAgIHRhZzogdHJ1ZSxcbiAgICBpbm5lcjogdmFsdWUsXG4gICAgLy8gQWN0dWFsIFJlc3VsdCBtZXRob2RzXG4gICAgZm9sZDogKF9vbkVycm9yLCBvblZhbHVlKSA9PiBvblZhbHVlKHZhbHVlKSxcbiAgICBpc1ZhbHVlOiBGdW4uYWx3YXlzLFxuICAgIGlzRXJyb3I6IEZ1bi5uZXZlcixcbiAgICBtYXA6IChtYXBwZXIpID0+IFJlc3VsdC52YWx1ZShtYXBwZXIodmFsdWUpKSxcbiAgICBtYXBFcnJvcjogb3V0cHV0SGVscGVyLFxuICAgIGJpbmQ6IGFwcGx5SGVscGVyLFxuICAgIGV4aXN0czogYXBwbHlIZWxwZXIsXG4gICAgZm9yYWxsOiBhcHBseUhlbHBlcixcbiAgICBnZXRPcjogY29uc3RIZWxwZXIsXG4gICAgb3I6IG91dHB1dEhlbHBlcixcbiAgICBnZXRPclRodW5rOiBjb25zdEhlbHBlcixcbiAgICBvclRodW5rOiBvdXRwdXRIZWxwZXIsXG4gICAgZ2V0T3JEaWU6IGNvbnN0SGVscGVyLFxuICAgIGVhY2g6IChmbikgPT4ge1xuICAgICAgLy8gQ2FuJ3Qgd3JpdGUgdGhlIGZ1bmN0aW9uIGlubGluZSBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIHNvbWV0aGluZyBieSBtaXN0YWtlXG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSxcbiAgICB0b09wdGlvbmFsOiAoKSA9PiBPcHRpb25hbC5zb21lKHZhbHVlKSxcbiAgfTtcblxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBSZXN1bHQ8VCwgRT5gIHRoYXQgKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZSwgYW5kIHRoZXJlZm9yZVxuICogY29udGFpbnMgYW4gZXJyb3IuXG4gKi9cbmNvbnN0IGVycm9yID0gPFQgPSBuZXZlciwgRSA9IGFueT4oZXJyb3I6IEUpOiBSZXN1bHQ8VCwgRT4gPT4ge1xuICBjb25zdCBvdXRwdXRIZWxwZXIgPSA8VSA9IFQ+KCkgPT4gb3V0cHV0IGFzIHVua25vd24gYXMgUmVzdWx0PFUsIEU+O1xuXG4gIGNvbnN0IG91dHB1dDogRGVidWdSZXN1bHQ8VCwgRT4gPSB7XG4gICAgLy8gRGVidWcgaW5mb1xuICAgIHRhZzogZmFsc2UsXG4gICAgaW5uZXI6IGVycm9yLFxuICAgIC8vIEFjdHVhbCBSZXN1bHQgbWV0aG9kc1xuICAgIGZvbGQ6IChvbkVycm9yLCBfb25WYWx1ZSkgPT4gb25FcnJvcihlcnJvciksXG4gICAgaXNWYWx1ZTogRnVuLm5ldmVyLFxuICAgIGlzRXJyb3I6IEZ1bi5hbHdheXMsXG4gICAgbWFwOiBvdXRwdXRIZWxwZXIsXG4gICAgbWFwRXJyb3I6IChtYXBwZXIpID0+IFJlc3VsdC5lcnJvcihtYXBwZXIoZXJyb3IpKSxcbiAgICBiaW5kOiBvdXRwdXRIZWxwZXIsXG4gICAgZXhpc3RzOiBGdW4ubmV2ZXIsXG4gICAgZm9yYWxsOiBGdW4uYWx3YXlzLFxuICAgIGdldE9yOiBGdW4uaWRlbnRpdHksXG4gICAgb3I6IEZ1bi5pZGVudGl0eSxcbiAgICBnZXRPclRodW5rOiBGdW4uYXBwbHksXG4gICAgb3JUaHVuazogRnVuLmFwcGx5LFxuICAgIGdldE9yRGllOiBGdW4uZGllKFN0cmluZyhlcnJvcikpLFxuICAgIGVhY2g6IEZ1bi5ub29wLFxuICAgIHRvT3B0aW9uYWw6IE9wdGlvbmFsLm5vbmUsXG4gIH07XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgUmVzdWx0PFQsIEU+YCBmcm9tIGFuIGBPcHRpb25hbDxUPmAgYW5kIGFuIGBFYC4gSWYgdGhlXG4gKiBgT3B0aW9uYWxgIGNvbnRhaW5zIGEgdmFsdWUsIHNvIHdpbGwgdGhlIG91dHB1dHRlZCBgUmVzdWx0YC4gSWYgaXQgZG9lcyBub3QsXG4gKiB0aGUgb3V0cHV0dGVkIGBSZXN1bHRgIHdpbGwgY29udGFpbiBhbiBlcnJvciAoYW5kIHRoYXQgZXJyb3Igd2lsbCBiZSB0aGVcbiAqIGVycm9yIHBhc3NlZCBpbikuXG4gKi9cbmNvbnN0IGZyb21PcHRpb24gPSA8VCwgRT4ob3B0aW9uYWw6IE9wdGlvbmFsPFQ+LCBlcnI6IEUpOiBSZXN1bHQ8VCwgRT4gPT5cbiAgb3B0aW9uYWwuZm9sZCgoKSA9PiBlcnJvcihlcnIpLCB2YWx1ZSk7XG5cbmV4cG9ydCBjb25zdCBSZXN1bHQgPSB7XG4gIHZhbHVlLFxuICBlcnJvcixcbiAgZnJvbU9wdGlvblxufTtcbiIsImltcG9ydCB7IENlbGwgfSBmcm9tICcuL0NlbGwnO1xuaW1wb3J0ICogYXMgRnVuIGZyb20gJy4vRnVuJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi9PcHRpb25hbCc7XG5cbmludGVyZmFjZSBTaW5nbGV0b248VD4ge1xuICByZWFkb25seSBjbGVhcjogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgaXNTZXQ6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGdldDogKCkgPT4gT3B0aW9uYWw8VD47XG4gIHJlYWRvbmx5IHNldDogKHZhbHVlOiBUKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcGVhdGFibGUge1xuICByZWFkb25seSBjbGVhcjogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgaXNTZXQ6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGdldDogKCkgPT4gT3B0aW9uYWw8bnVtYmVyPjtcbiAgcmVhZG9ubHkgc2V0OiAoZnVuY3Rpb25Ub1JlcGVhdDogKCkgPT4gdm9pZCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXZvY2FibGU8VD4gZXh0ZW5kcyBTaW5nbGV0b248VD4geyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpPFQ+IGV4dGVuZHMgU2luZ2xldG9uPFQ+IHtcbiAgcmVhZG9ubHkgcnVuOiAoZm46IChkYXRhOiBUKSA9PiB2b2lkKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbHVlPFQ+IGV4dGVuZHMgU2luZ2xldG9uPFQ+IHtcbiAgcmVhZG9ubHkgb246IChmbjogKGRhdGE6IFQpID0+IHZvaWQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IHNpbmdsZXRvbiA9IDxUPiAoZG9SZXZva2U6IChkYXRhOiBUKSA9PiB2b2lkKTogU2luZ2xldG9uPFQ+ID0+IHtcbiAgY29uc3Qgc3ViamVjdCA9IENlbGwoT3B0aW9uYWwubm9uZTxUPigpKTtcblxuICBjb25zdCByZXZva2UgPSAoKTogdm9pZCA9PiBzdWJqZWN0LmdldCgpLmVhY2goZG9SZXZva2UpO1xuXG4gIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgIHJldm9rZSgpO1xuICAgIHN1YmplY3Quc2V0KE9wdGlvbmFsLm5vbmUoKSk7XG4gIH07XG5cbiAgY29uc3QgaXNTZXQgPSAoKSA9PiBzdWJqZWN0LmdldCgpLmlzU29tZSgpO1xuXG4gIGNvbnN0IGdldCA9ICgpOiBPcHRpb25hbDxUPiA9PiBzdWJqZWN0LmdldCgpO1xuXG4gIGNvbnN0IHNldCA9IChzOiBUKSA9PiB7XG4gICAgcmV2b2tlKCk7XG4gICAgc3ViamVjdC5zZXQoT3B0aW9uYWwuc29tZShzKSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjbGVhcixcbiAgICBpc1NldCxcbiAgICBnZXQsXG4gICAgc2V0XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgcmVwZWF0YWJsZSA9IChkZWxheTogbnVtYmVyKTogUmVwZWF0YWJsZSA9PiB7XG4gIGNvbnN0IGludGVydmFsSWQgPSBDZWxsKE9wdGlvbmFsLm5vbmU8bnVtYmVyPigpKTtcblxuICBjb25zdCByZXZva2UgPSAoKTogdm9pZCA9PiBpbnRlcnZhbElkLmdldCgpLmVhY2goKGlkKSA9PiBjbGVhckludGVydmFsKGlkKSk7XG5cbiAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgcmV2b2tlKCk7XG4gICAgaW50ZXJ2YWxJZC5zZXQoT3B0aW9uYWwubm9uZSgpKTtcbiAgfTtcblxuICBjb25zdCBpc1NldCA9ICgpID0+IGludGVydmFsSWQuZ2V0KCkuaXNTb21lKCk7XG5cbiAgY29uc3QgZ2V0ID0gKCk6IE9wdGlvbmFsPG51bWJlcj4gPT4gaW50ZXJ2YWxJZC5nZXQoKTtcblxuICBjb25zdCBzZXQgPSAoZnVuY3Rpb25Ub1JlcGVhdDogKCkgPT4gdm9pZCkgPT4ge1xuICAgIHJldm9rZSgpO1xuICAgIGludGVydmFsSWQuc2V0KE9wdGlvbmFsLnNvbWUoc2V0SW50ZXJ2YWwoZnVuY3Rpb25Ub1JlcGVhdCwgZGVsYXkpKSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjbGVhcixcbiAgICBpc1NldCxcbiAgICBnZXQsXG4gICAgc2V0LFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGRlc3Ryb3lhYmxlID0gPFQgZXh0ZW5kcyB7IGRlc3Ryb3k6ICgpID0+IHZvaWQgfT4gKCk6IFJldm9jYWJsZTxUPiA9PiBzaW5nbGV0b248VD4oKHMpID0+IHMuZGVzdHJveSgpKTtcblxuZXhwb3J0IGNvbnN0IHVuYmluZGFibGUgPSA8VCBleHRlbmRzIHsgdW5iaW5kOiAoKSA9PiB2b2lkIH0+ICgpOiBSZXZvY2FibGU8VD4gPT4gc2luZ2xldG9uPFQ+KChzKSA9PiBzLnVuYmluZCgpKTtcblxuZXhwb3J0IGNvbnN0IGFwaSA9IDxUIGV4dGVuZHMgeyBkZXN0cm95OiAoKSA9PiB2b2lkIH0+ICgpOiBBcGk8VD4gPT4ge1xuICBjb25zdCBzdWJqZWN0ID0gZGVzdHJveWFibGU8VD4oKTtcblxuICBjb25zdCBydW4gPSAoZjogKGRhdGE6IFQpID0+IHZvaWQpID0+IHN1YmplY3QuZ2V0KCkuZWFjaChmKTtcblxuICByZXR1cm4ge1xuICAgIC4uLnN1YmplY3QsXG4gICAgcnVuXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgdmFsdWUgPSA8VD4gKCk6IFZhbHVlPFQ+ID0+IHtcbiAgY29uc3Qgc3ViamVjdCA9IHNpbmdsZXRvbihGdW4ubm9vcCk7XG5cbiAgY29uc3Qgb24gPSAoZjogKGRhdGE6IFQpID0+IHZvaWQpID0+IHN1YmplY3QuZ2V0KCkuZWFjaChmKTtcblxuICByZXR1cm4ge1xuICAgIC4uLnN1YmplY3QsXG4gICAgb25cbiAgfTtcbn07XG4iLCJpbXBvcnQgKiBhcyBTdHJBcHBlbmQgZnJvbSAnLi4vc3RyL1N0ckFwcGVuZCc7XG5cbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi9PcHRpb25hbCc7XG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gJy4vVHlwZSc7XG5cbmNvbnN0IGNoZWNrUmFuZ2UgPSAoc3RyOiBzdHJpbmcsIHN1YnN0cjogc3RyaW5nLCBzdGFydDogbnVtYmVyKTogYm9vbGVhbiA9PlxuICBzdWJzdHIgPT09ICcnIHx8IHN0ci5sZW5ndGggPj0gc3Vic3RyLmxlbmd0aCAmJiBzdHIuc3Vic3RyKHN0YXJ0LCBzdGFydCArIHN1YnN0ci5sZW5ndGgpID09PSBzdWJzdHI7XG5cbi8qKiBHaXZlbiBhIHN0cmluZyBhbmQgb2JqZWN0LCBwZXJmb3JtIHRlbXBsYXRlLXJlcGxhY2VtZW50cyBvbiB0aGUgc3RyaW5nLCBhcyBzcGVjaWZpZWQgYnkgdGhlIG9iamVjdC5cbiAqIEFueSB0ZW1wbGF0ZSBmaWVsZHMgb2YgdGhlIGZvcm0gJHtuYW1lfSBhcmUgcmVwbGFjZWQgYnkgdGhlIHN0cmluZyBvciBudW1iZXIgc3BlY2lmaWVkIGFzIG9ialtcIm5hbWVcIl1cbiAqIEJhc2VkIG9uIERvdWdsYXMgQ3JvY2tmb3JkJ3MgJ3N1cHBsYW50JyBtZXRob2QgZm9yIHRlbXBsYXRlLXJlcGxhY2Ugb2Ygc3RyaW5ncy4gVXNlcyBkaWZmZXJlbnQgdGVtcGxhdGUgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3Qgc3VwcGxhbnQgPSAoc3RyOiBzdHJpbmcsIG9iajogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyPik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGlzU3RyaW5nT3JOdW1iZXIgPSAoYTogdW5rbm93bik6IGEgaXMgc3RyaW5nIHwgbnVtYmVyID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGE7XG4gICAgcmV0dXJuIHQgPT09ICdzdHJpbmcnIHx8IHQgPT09ICdudW1iZXInO1xuICB9O1xuXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXFwkXFx7KFtee31dKilcXH0vZyxcbiAgICAoZnVsbE1hdGNoOiBzdHJpbmcsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgcmV0dXJuIGlzU3RyaW5nT3JOdW1iZXIodmFsdWUpID8gdmFsdWUudG9TdHJpbmcoKSA6IGZ1bGxNYXRjaDtcbiAgICB9XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlTGVhZGluZyA9IChzdHI6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aChzdHIsIHByZWZpeCkgPyBTdHJBcHBlbmQucmVtb3ZlRnJvbVN0YXJ0KHN0ciwgcHJlZml4Lmxlbmd0aCkgOiBzdHI7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlVHJhaWxpbmcgPSAoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGVuZHNXaXRoKHN0ciwgc3VmZml4KSA/IFN0ckFwcGVuZC5yZW1vdmVGcm9tRW5kKHN0ciwgc3VmZml4Lmxlbmd0aCkgOiBzdHI7XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlTGVhZGluZyA9IChzdHI6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aChzdHIsIHByZWZpeCkgPyBzdHIgOiBTdHJBcHBlbmQuYWRkVG9TdGFydChzdHIsIHByZWZpeCk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlVHJhaWxpbmcgPSAoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGVuZHNXaXRoKHN0ciwgc3VmZml4KSA/IHN0ciA6IFN0ckFwcGVuZC5hZGRUb0VuZChzdHIsIHN1ZmZpeCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29udGFpbnMgPSAoc3RyOiBzdHJpbmcsIHN1YnN0cjogc3RyaW5nLCBzdGFydDogbnVtYmVyID0gMCwgZW5kPzogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGlkeCA9IHN0ci5pbmRleE9mKHN1YnN0ciwgc3RhcnQpO1xuICBpZiAoaWR4ICE9PSAtMSkge1xuICAgIHJldHVybiBUeXBlLmlzVW5kZWZpbmVkKGVuZCkgPyB0cnVlIDogaWR4ICsgc3Vic3RyLmxlbmd0aCA8PSBlbmQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY2FwaXRhbGl6ZSA9IChzdHI6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdHIgPT09ICcnID8gJycgOiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKDEpO1xufTtcblxuLyoqIERvZXMgJ3N0cicgc3RhcnQgd2l0aCAncHJlZml4Jz9cbiAqICBOb3RlOiBhbGwgc3RyaW5ncyBzdGFydCB3aXRoIHRoZSBlbXB0eSBzdHJpbmcuXG4gKiAgICAgICAgTW9yZSBmb3JtYWxseSwgZm9yIGFsbCBzdHJpbmdzIHgsIHN0YXJ0c1dpdGgoeCwgXCJcIikuXG4gKiAgICAgICAgVGhpcyBpcyBzbyB0aGF0IGZvciBhbGwgc3RyaW5ncyB4IGFuZCB5LCBzdGFydHNXaXRoKHkgKyB4LCB5KVxuICovXG5leHBvcnQgY29uc3Qgc3RhcnRzV2l0aCA9IChzdHI6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGNoZWNrUmFuZ2Uoc3RyLCBwcmVmaXgsIDApO1xufTtcblxuLyoqIERvZXMgJ3N0cicgZW5kIHdpdGggJ3N1ZmZpeCc/XG4gKiAgTm90ZTogYWxsIHN0cmluZ3MgZW5kIHdpdGggdGhlIGVtcHR5IHN0cmluZy5cbiAqICAgICAgICBNb3JlIGZvcm1hbGx5LCBmb3IgYWxsIHN0cmluZ3MgeCwgZW5kc1dpdGgoeCwgXCJcIikuXG4gKiAgICAgICAgVGhpcyBpcyBzbyB0aGF0IGZvciBhbGwgc3RyaW5ncyB4IGFuZCB5LCBlbmRzV2l0aCh4ICsgeSwgeSlcbiAqL1xuZXhwb3J0IGNvbnN0IGVuZHNXaXRoID0gKHN0cjogc3RyaW5nLCBzdWZmaXg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gY2hlY2tSYW5nZShzdHIsIHN1ZmZpeCwgc3RyLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpO1xufTtcblxuY29uc3QgYmxhbmsgPSAocjogUmVnRXhwKSA9PiAoczogc3RyaW5nKTogc3RyaW5nID0+XG4gIHMucmVwbGFjZShyLCAnJyk7XG5cbi8qKiByZW1vdmVzIGFsbCBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgKi9cbmV4cG9ydCBjb25zdCB0cmltOiAoczogc3RyaW5nKSA9PiBzdHJpbmcgPVxuICBibGFuaygvXlxccyt8XFxzKyQvZyk7XG5cbmV4cG9ydCBjb25zdCBsVHJpbTogKHM6IHN0cmluZykgPT4gc3RyaW5nID1cbiAgYmxhbmsoL15cXHMrL2cpO1xuXG5leHBvcnQgY29uc3QgclRyaW06IChzOiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGJsYW5rKC9cXHMrJC9nKTtcblxuZXhwb3J0IGNvbnN0IGlzTm90RW1wdHkgPSAoczogc3RyaW5nKTogYm9vbGVhbiA9PiBzLmxlbmd0aCA+IDA7XG5cbmV4cG9ydCBjb25zdCBpc0VtcHR5ID0gKHM6IHN0cmluZyk6IGJvb2xlYW4gPT4gIWlzTm90RW1wdHkocyk7XG5cbmV4cG9ydCBjb25zdCByZXBlYXQgPSAoczogc3RyaW5nLCBjb3VudDogbnVtYmVyKTogc3RyaW5nID0+IGNvdW50IDw9IDAgPyAnJyA6IG5ldyBBcnJheShjb3VudCArIDEpLmpvaW4ocyk7XG5cbmV4cG9ydCBjb25zdCBmcm9tQ29kZVBvaW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQ7XG5cbmV4cG9ydCBjb25zdCB0b0ludCA9ICh2YWx1ZTogc3RyaW5nLCByYWRpeDogbnVtYmVyID0gMTApOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIHJhZGl4KTtcbiAgcmV0dXJuIGlzTmFOKG51bSkgPyBPcHRpb25hbC5ub25lKCkgOiBPcHRpb25hbC5zb21lKG51bSk7XG59O1xuXG5leHBvcnQgY29uc3QgdG9GbG9hdCA9ICh2YWx1ZTogc3RyaW5nKTogT3B0aW9uYWw8bnVtYmVyPiA9PiB7XG4gIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICByZXR1cm4gaXNOYU4obnVtKSA/IE9wdGlvbmFsLm5vbmUoKSA6IE9wdGlvbmFsLnNvbWUobnVtKTtcbn07XG4iLCJleHBvcnQgY29uc3QgY2FjaGVkID0gPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4oZjogVCk6ICguLi5hcmdzOiBQYXJhbWV0ZXJzPFQ+KSA9PiBSZXR1cm5UeXBlPFQ+ID0+IHtcbiAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICBsZXQgcjogYW55O1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIHIgPSBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbiAgfTtcbn07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8td3JhcHBlci1vYmplY3QtdHlwZXMgKi9cbmNvbnN0IGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuXG5pbnRlcmZhY2UgQ29uc3RydWN0b3I8VCBleHRlbmRzIE9iamVjdD4ge1xuICByZWFkb25seSBwcm90b3R5cGU6IFQ7XG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuY29uc3QgaGFzUHJvdG8gPSA8VCBleHRlbmRzIE9iamVjdD4odjogT2JqZWN0LCBjb25zdHJ1Y3RvcjogQ29uc3RydWN0b3I8VD4sIHByZWRpY2F0ZTogKHY6IE9iamVjdCwgcHJvdG90eXBlOiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiA9PiB7XG4gIGlmIChwcmVkaWNhdGUodiwgY29uc3RydWN0b3IucHJvdG90eXBlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIC8vIFN0cmluZy1iYXNlZCBmYWxsYmFjayB0aW1lXG4gICAgcmV0dXJuIHYuY29uc3RydWN0b3I/Lm5hbWUgPT09IGNvbnN0cnVjdG9yLm5hbWU7XG4gIH1cbn07XG5cbmNvbnN0IHR5cGVPZiA9ICh4OiBhbnkpOiBzdHJpbmcgPT4ge1xuICBjb25zdCB0ID0gdHlwZW9mIHg7XG4gIGlmICh4ID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfSBlbHNlIGlmICh0ID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgcmV0dXJuICdhcnJheSc7XG4gIH0gZWxzZSBpZiAodCA9PT0gJ29iamVjdCcgJiYgaGFzUHJvdG8oeCwgU3RyaW5nLCAobywgcHJvdG8pID0+IHByb3RvLmlzUHJvdG90eXBlT2YobykpKSB7XG4gICAgcmV0dXJuICdzdHJpbmcnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0O1xuICB9XG59O1xuXG5jb25zdCBpc1R5cGUgPSA8WW9sbz4odHlwZTogc3RyaW5nKSA9PiAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFlvbG8gPT5cbiAgdHlwZU9mKHZhbHVlKSA9PT0gdHlwZTtcblxuY29uc3QgaXNTaW1wbGVUeXBlID0gPFlvbG8+KHR5cGU6IHN0cmluZykgPT4gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBZb2xvID0+XG4gIHR5cGVvZiB2YWx1ZSA9PT0gdHlwZTtcblxuY29uc3QgZXEgPSA8VD4gKHQ6IFQpID0+IChhOiBhbnkpOiBhIGlzIFQgPT5cbiAgdCA9PT0gYTtcblxuZXhwb3J0IGNvbnN0IGlzID0gPEUgZXh0ZW5kcyBPYmplY3Q+KHZhbHVlOiBhbnksIGNvbnN0cnVjdG9yOiBDb25zdHJ1Y3RvcjxFPik6IHZhbHVlIGlzIEUgPT5cbiAgaXNPYmplY3QodmFsdWUpICYmIGhhc1Byb3RvPEU+KHZhbHVlLCBjb25zdHJ1Y3RvciwgKG8sIHByb3RvKSA9PiBnZXRQcm90b3R5cGVPZihvKSA9PT0gcHJvdG8pO1xuXG5leHBvcnQgY29uc3QgaXNTdHJpbmc6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBzdHJpbmcgPVxuICBpc1R5cGUoJ3N0cmluZycpO1xuXG5leHBvcnQgY29uc3QgaXNPYmplY3Q6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBPYmplY3QgPVxuICBpc1R5cGUoJ29iamVjdCcpO1xuXG5leHBvcnQgY29uc3QgaXNQbGFpbk9iamVjdCA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIE9iamVjdCA9PlxuICBpcyh2YWx1ZSwgT2JqZWN0KTtcblxuZXhwb3J0IGNvbnN0IGlzQXJyYXk6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBBcnJheTx1bmtub3duPiA9XG4gIGlzVHlwZSgnYXJyYXknKTtcblxuZXhwb3J0IGNvbnN0IGlzTnVsbDogKGE6IGFueSkgPT4gYSBpcyBudWxsID1cbiAgZXEobnVsbCk7XG5cbmV4cG9ydCBjb25zdCBpc0Jvb2xlYW46ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBib29sZWFuID1cbiAgaXNTaW1wbGVUeXBlPGJvb2xlYW4+KCdib29sZWFuJyk7XG5cbmV4cG9ydCBjb25zdCBpc1VuZGVmaW5lZDogKGE6IGFueSkgPT4gYSBpcyB1bmRlZmluZWQgPVxuICBlcSh1bmRlZmluZWQpO1xuXG5leHBvcnQgY29uc3QgaXNOdWxsYWJsZSA9IChhOiBhbnkpOiBhIGlzIG51bGwgfCB1bmRlZmluZWQgPT5cbiAgYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQ7XG5cbmV4cG9ydCBjb25zdCBpc05vbk51bGxhYmxlID0gPEE+IChhOiBBIHwgbnVsbCB8IHVuZGVmaW5lZCk6IGEgaXMgTm9uTnVsbGFibGU8QT4gPT5cbiAgIWlzTnVsbGFibGUoYSk7XG5cbmV4cG9ydCBjb25zdCBpc0Z1bmN0aW9uOiAodmFsdWU6IGFueSkgPT4gdmFsdWUgaXMgRnVuY3Rpb24gPVxuICBpc1NpbXBsZVR5cGU8RnVuY3Rpb24+KCdmdW5jdGlvbicpO1xuXG5leHBvcnQgY29uc3QgaXNOdW1iZXI6ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBudW1iZXIgPVxuICBpc1NpbXBsZVR5cGU8bnVtYmVyPignbnVtYmVyJyk7XG5cbmV4cG9ydCBjb25zdCBpc0FycmF5T2YgPSA8RT4odmFsdWU6IGFueSwgcHJlZDogKHg6IGFueSkgPT4geCBpcyBFKTogdmFsdWUgaXMgQXJyYXk8RT4gPT4ge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGlmICghKHByZWQodmFsdWVbaV0pKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1Byb21pc2VMaWtlID0gKHg6IGFueSk6IHggaXMgUHJvbWlzZTx1bmtub3duPiA9PlxuICBpc09iamVjdCh4KVxuICAmJiBpc0Z1bmN0aW9uKHgudGhlbilcbiAgJiYgaXNGdW5jdGlvbih4LmNhdGNoKTtcbiIsImV4cG9ydCBjb25zdCB6ZXJvV2lkdGggPSAnXFx1RkVGRic7XG5leHBvcnQgY29uc3QgbmJzcCA9ICdcXHUwMEEwJztcbmV4cG9ydCBjb25zdCBzb2Z0SHlwaGVuID0gJ1xcdTAwQUQnO1xuZXhwb3J0IGNvbnN0IGVsbGlwc2lzID0gJ1xcdTIwMjYnO1xuXG5leHBvcnQgY29uc3QgaXNad3NwID0gKGNoYXI6IHN0cmluZyk6IGJvb2xlYW4gPT4gY2hhciA9PT0gemVyb1dpZHRoO1xuZXhwb3J0IGNvbnN0IHJlbW92ZVp3c3AgPSAoczogc3RyaW5nKTogc3RyaW5nID0+IHMucmVwbGFjZSgvXFx1RkVGRi9nLCAnJyk7XG4iLCJleHBvcnQgY29uc3QgYWRkVG9TdGFydCA9IChzdHI6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gcHJlZml4ICsgc3RyO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFRvRW5kID0gKHN0cjogc3RyaW5nLCBzdWZmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdHIgKyBzdWZmaXg7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlRnJvbVN0YXJ0ID0gKHN0cjogc3RyaW5nLCBudW1DaGFyczogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHN0ci5zdWJzdHJpbmcobnVtQ2hhcnMpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUZyb21FbmQgPSAoc3RyOiBzdHJpbmcsIG51bUNoYXJzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gbnVtQ2hhcnMpO1xufTtcbiIsImltcG9ydCB7IERvbVVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgQnJva2VuUGF0aCwgTGVmdFJpZ2h0IH0gZnJvbSAnLi4vLi4vcGFyZW50L0JyZWFrZXInO1xuaW1wb3J0ICogYXMgUGFyZW50IGZyb20gJy4uL2dlbmVyYWwvUGFyZW50JztcblxuY29uc3QgdW5pdmVyc2UgPSBEb21Vbml2ZXJzZSgpO1xuXG5jb25zdCBzaGFyZWRPbmUgPSAobG9vazogKGU6IFN1Z2FyRWxlbWVudCkgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PiwgZWxlbWVudHM6IFN1Z2FyRWxlbWVudFtdKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PiA9PiB7XG4gIHJldHVybiBQYXJlbnQuc2hhcmVkT25lKHVuaXZlcnNlLCAoX3VuaXZlcnNlLCBlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIGxvb2soZWxlbWVudCk7XG4gIH0sIGVsZW1lbnRzKTtcbn07XG5cbmNvbnN0IHN1YnNldCA9IChzdGFydDogU3VnYXJFbGVtZW50LCBmaW5pc2g6IFN1Z2FyRWxlbWVudCk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudFtdPiA9PiB7XG4gIHJldHVybiBQYXJlbnQuc3Vic2V0KHVuaXZlcnNlLCBzdGFydCwgZmluaXNoKTtcbn07XG5cbmNvbnN0IGFuY2VzdG9ycyA9IChzdGFydDogU3VnYXJFbGVtZW50LCBmaW5pc2g6IFN1Z2FyRWxlbWVudCwgaXNSb290PzogKHg6IFN1Z2FyRWxlbWVudCkgPT4gYm9vbGVhbik6IFBhcmVudC5BbmNlc3RvcnNGblJlc3VsdDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5hbmNlc3RvcnModW5pdmVyc2UsIHN0YXJ0LCBmaW5pc2gsIGlzUm9vdCk7XG59O1xuXG5jb25zdCBicmVha1RvTGVmdCA9IChwYXJlbnQ6IFN1Z2FyRWxlbWVudCwgY2hpbGQ6IFN1Z2FyRWxlbWVudCk6IE9wdGlvbmFsPExlZnRSaWdodDxTdWdhckVsZW1lbnQ+PiA9PiB7XG4gIHJldHVybiBQYXJlbnQuYnJlYWtUb0xlZnQodW5pdmVyc2UsIHBhcmVudCwgY2hpbGQpO1xufTtcblxuY29uc3QgYnJlYWtUb1JpZ2h0ID0gKHBhcmVudDogU3VnYXJFbGVtZW50LCBjaGlsZDogU3VnYXJFbGVtZW50KTogT3B0aW9uYWw8TGVmdFJpZ2h0PFN1Z2FyRWxlbWVudD4+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5icmVha1RvUmlnaHQodW5pdmVyc2UsIHBhcmVudCwgY2hpbGQpO1xufTtcblxuY29uc3QgYnJlYWtQYXRoID0gKGNoaWxkOiBTdWdhckVsZW1lbnQsIGlzVG9wOiAoZTogU3VnYXJFbGVtZW50KSA9PiBib29sZWFuLCBicmVha2VyOiAocGFyZW50OiBTdWdhckVsZW1lbnQsIGNoaWxkOiBTdWdhckVsZW1lbnQpID0+IE9wdGlvbmFsPExlZnRSaWdodDxTdWdhckVsZW1lbnQ+Pik6IEJyb2tlblBhdGg8U3VnYXJFbGVtZW50PiA9PiB7XG4gIHJldHVybiBQYXJlbnQuYnJlYWtQYXRoKHVuaXZlcnNlLCBjaGlsZCwgaXNUb3AsICh1LCBwLCBjKSA9PiB7XG4gICAgcmV0dXJuIGJyZWFrZXIocCwgYyk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgc2hhcmVkT25lLFxuICBzdWJzZXQsXG4gIGFuY2VzdG9ycyxcbiAgYnJlYWtUb0xlZnQsXG4gIGJyZWFrVG9SaWdodCxcbiAgYnJlYWtQYXRoXG59O1xuIiwiaW1wb3J0IHsgRG9tVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHVyZSBmcm9tICcuLi9nZW5lcmFsL1N0cnVjdHVyZSc7XG5cbmNvbnN0IHVuaXZlcnNlID0gRG9tVW5pdmVyc2UoKTtcblxuY29uc3QgaXNCbG9jayA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIFN0cnVjdHVyZS5pc0Jsb2NrKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmNvbnN0IGlzTGlzdCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIFN0cnVjdHVyZS5pc0xpc3QodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuY29uc3QgaXNGb3JtYXR0aW5nID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gU3RydWN0dXJlLmlzRm9ybWF0dGluZyh1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5jb25zdCBpc0hlYWRpbmcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNIZWFkaW5nKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmNvbnN0IGlzQ29udGFpbmVyID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gU3RydWN0dXJlLmlzQ29udGFpbmVyKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmNvbnN0IGlzRW1wdHlUYWcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNFbXB0eVRhZyh1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5jb25zdCBpc0ZyYW1lID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gU3RydWN0dXJlLmlzRnJhbWUodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuY29uc3QgaXNJbmxpbmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNJbmxpbmUodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IHtcbiAgaXNCbG9jayxcbiAgaXNMaXN0LFxuICBpc0Zvcm1hdHRpbmcsXG4gIGlzSGVhZGluZyxcbiAgaXNDb250YWluZXIsXG4gIGlzRW1wdHlUYWcsXG4gIGlzRnJhbWUsXG4gIGlzSW5saW5lXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBVbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBicmVha1BhdGggYXMgeEJyZWFrUGF0aCwgYnJlYWtUb0xlZnQgYXMgeEJyZWFrVG9MZWZ0LCBicmVha1RvUmlnaHQgYXMgeEJyZWFrVG9SaWdodCwgdHlwZSBCcm9rZW5QYXRoLCB0eXBlIExlZnRSaWdodCB9IGZyb20gJy4uLy4uL3BhcmVudC9CcmVha2VyJztcbmltcG9ydCB7IHR5cGUgTG9va2VyLCBvbmVBbGwgfSBmcm9tICcuLi8uLi9wYXJlbnQvU2hhcmVkJztcbmltcG9ydCAqIGFzIFN1YnNldEZuIGZyb20gJy4uLy4uL3BhcmVudC9TdWJzZXQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuY2VzdG9yc0ZuUmVzdWx0PEU+IHtcbiAgcmVhZG9ubHkgZmlyc3RwYXRoOiBFW107XG4gIHJlYWRvbmx5IHNlY29uZHBhdGg6IEVbXTtcbiAgcmVhZG9ubHkgc2hhcmVkOiBPcHRpb25hbDxFPjtcbn1cblxudHlwZSBTaGFyZWRPbmVGbiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGxvb2s6IExvb2tlcjxFLCBEPiwgZWxlbWVudHM6IEVbXSkgPT4gT3B0aW9uYWw8RT47XG5jb25zdCBzaGFyZWRPbmU6IFNoYXJlZE9uZUZuID0gb25lQWxsO1xuXG50eXBlIFN1YnNldEZuID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgc3RhcnQ6IEUsIGVuZDogRSkgPT4gT3B0aW9uYWw8RVtdPjtcbmNvbnN0IHN1YnNldDogU3Vic2V0Rm4gPSBTdWJzZXRGbi5zdWJzZXQ7XG5cbnR5cGUgQW5jZXN0b3JzRm4gPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBzdGFydDogRSwgZmluaXNoOiBFLCBpc1Jvb3Q/OiAoKHg6IEUpID0+IGJvb2xlYW4pKSA9PiBBbmNlc3RvcnNGblJlc3VsdDxFPjtcbmNvbnN0IGFuY2VzdG9yczogQW5jZXN0b3JzRm4gPSBTdWJzZXRGbi5hbmNlc3RvcnM7XG5cbnR5cGUgQnJlYWtUb0xlZnRGbiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpID0+IE9wdGlvbmFsPExlZnRSaWdodDxFPj47XG5jb25zdCBicmVha1RvTGVmdDogQnJlYWtUb0xlZnRGbiA9IHhCcmVha1RvTGVmdDtcblxudHlwZSBCcmVha1RvUmlnaHRGbiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpID0+IE9wdGlvbmFsPExlZnRSaWdodDxFPj47XG5jb25zdCBicmVha1RvUmlnaHQ6IEJyZWFrVG9SaWdodEZuID0geEJyZWFrVG9SaWdodDtcblxudHlwZSBCcmVha1BhdGhGbiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGNoaWxkOiBFLCBpc1RvcDogKGU6IEUpID0+IGJvb2xlYW4sIGJyZWFrZXI6ICh1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpID0+IE9wdGlvbmFsPExlZnRSaWdodDxFPj4pID0+IEJyb2tlblBhdGg8RT47XG5jb25zdCBicmVha1BhdGg6IEJyZWFrUGF0aEZuID0geEJyZWFrUGF0aDtcblxuZXhwb3J0IHtcbiAgc2hhcmVkT25lLFxuICBzdWJzZXQsXG4gIGFuY2VzdG9ycyxcbiAgYnJlYWtUb0xlZnQsXG4gIGJyZWFrVG9SaWdodCxcbiAgYnJlYWtQYXRoXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBVbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmNvbnN0IGJsb2NrTGlzdCA9IFtcbiAgJ2JvZHknLFxuICAncCcsXG4gICdkaXYnLFxuICAnYXJ0aWNsZScsXG4gICdhc2lkZScsXG4gICdmaWdjYXB0aW9uJyxcbiAgJ2ZpZ3VyZScsXG4gICdmb290ZXInLFxuICAnaGVhZGVyJyxcbiAgJ25hdicsXG4gICdzZWN0aW9uJyxcbiAgJ29sJyxcbiAgJ3VsJyxcbiAgLy8gLS0tIE5PVEUsIFRhZ0JvdW5kYXJpZXMgaGFzIGxpIGhlcmUuIFRoYXQgbWVhbnMgdW5pdmVyc2UuaXNCb3VuZGFyeSA9PiB0cnVlIGZvciBsaSB0YWdzLlxuICAndGFibGUnLFxuICAndGhlYWQnLFxuICAndGZvb3QnLFxuICAndGJvZHknLFxuICAnY2FwdGlvbicsXG4gICd0cicsXG4gICd0ZCcsXG4gICd0aCcsXG4gICdoMScsXG4gICdoMicsXG4gICdoMycsXG4gICdoNCcsXG4gICdoNScsXG4gICdoNicsXG4gICdibG9ja3F1b3RlJyxcbiAgJ3ByZScsXG4gICdhZGRyZXNzJ1xuXTtcblxuY29uc3QgaXNMaXN0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB0YWdOYW1lID0gdW5pdmVyc2UucHJvcGVydHkoKS5uYW1lKGl0ZW0pO1xuICByZXR1cm4gQXJyLmNvbnRhaW5zKFsgJ29sJywgJ3VsJyBdLCB0YWdOYW1lKTtcbn07XG5cbmNvbnN0IGlzQmxvY2sgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHRhZ05hbWUgPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLm5hbWUoaXRlbSk7XG4gIHJldHVybiBBcnIuY29udGFpbnMoYmxvY2tMaXN0LCB0YWdOYW1lKTtcbn07XG5cbmNvbnN0IGlzRm9ybWF0dGluZyA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdGFnTmFtZSA9IHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKTtcbiAgcmV0dXJuIEFyci5jb250YWlucyhbICdhZGRyZXNzJywgJ3ByZScsICdwJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JyBdLCB0YWdOYW1lKTtcbn07XG5cbmNvbnN0IGlzSGVhZGluZyA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdGFnTmFtZSA9IHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKTtcbiAgcmV0dXJuIEFyci5jb250YWlucyhbICdoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicgXSwgdGFnTmFtZSk7XG59O1xuXG5jb25zdCBpc0NvbnRhaW5lciA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIEFyci5jb250YWlucyhbICdkaXYnLCAnbGknLCAndGQnLCAndGgnLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2NhcHRpb24nIF0sIHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKSk7XG59O1xuXG5jb25zdCBpc0VtcHR5VGFnID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gQXJyLmNvbnRhaW5zKFsgJ2JyJywgJ2ltZycsICdocicsICdpbnB1dCcgXSwgdW5pdmVyc2UucHJvcGVydHkoKS5uYW1lKGl0ZW0pKTtcbn07XG5cbmNvbnN0IGlzRnJhbWUgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB1bml2ZXJzZS5wcm9wZXJ0eSgpLm5hbWUoaXRlbSkgPT09ICdpZnJhbWUnO1xufTtcblxuY29uc3QgaXNJbmxpbmUgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiAhKGlzQmxvY2sodW5pdmVyc2UsIGl0ZW0pIHx8IGlzRW1wdHlUYWcodW5pdmVyc2UsIGl0ZW0pKSAmJiB1bml2ZXJzZS5wcm9wZXJ0eSgpLm5hbWUoaXRlbSkgIT09ICdsaSc7XG59O1xuXG5leHBvcnQge1xuICBpc0Jsb2NrLFxuICBpc0xpc3QsXG4gIGlzRm9ybWF0dGluZyxcbiAgaXNIZWFkaW5nLFxuICBpc0NvbnRhaW5lcixcbiAgaXNFbXB0eVRhZyxcbiAgaXNGcmFtZSxcbiAgaXNJbmxpbmVcbn07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW50ZXJmYWNlIEJpc2VjdDxFPiB7XG4gIHJlYWRvbmx5IGJlZm9yZTogRVtdO1xuICByZWFkb25seSBhZnRlcjogRVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlZnRSaWdodDxFPiB7XG4gIHJlYWRvbmx5IGxlZnQ6IEU7XG4gIHJlYWRvbmx5IHJpZ2h0OiBFO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyb2tlblBhdGhTcGxpdHM8RT4ge1xuICByZWFkb25seSBmaXJzdDogRTtcbiAgcmVhZG9ubHkgc2Vjb25kOiBFO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJyb2tlblBhdGg8RT4ge1xuICByZWFkb25seSBmaXJzdDogRTtcbiAgcmVhZG9ubHkgc2Vjb25kOiBPcHRpb25hbDxFPjtcbiAgcmVhZG9ubHkgc3BsaXRzOiBCcm9rZW5QYXRoU3BsaXRzPEU+W107XG59XG5cbmNvbnN0IGxlZnRSaWdodCA9IDxFPihsZWZ0OiBFLCByaWdodDogRSk6IExlZnRSaWdodDxFPiA9PiAoe1xuICBsZWZ0LFxuICByaWdodFxufSk7XG5cbmNvbnN0IGJyb2tlblBhdGggPSA8RT4oZmlyc3Q6IEUsIHNlY29uZDogT3B0aW9uYWw8RT4sIHNwbGl0czogQnJva2VuUGF0aFNwbGl0czxFPltdKTogQnJva2VuUGF0aDxFPiA9PiAoe1xuICBmaXJzdCxcbiAgc2Vjb25kLFxuICBzcGxpdHNcbn0pO1xuXG5jb25zdCBiaXNlY3QgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBwYXJlbnQ6IEUsIGNoaWxkOiBFKTogT3B0aW9uYWw8QmlzZWN0PEU+PiA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gdW5pdmVyc2UucHJvcGVydHkoKS5jaGlsZHJlbihwYXJlbnQpO1xuICBjb25zdCBpbmRleCA9IEFyci5maW5kSW5kZXgoY2hpbGRyZW4sIEZ1bi5jdXJyeSh1bml2ZXJzZS5lcSwgY2hpbGQpKTtcbiAgcmV0dXJuIGluZGV4Lm1hcCgoaW5kKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJlZm9yZTogY2hpbGRyZW4uc2xpY2UoMCwgaW5kKSxcbiAgICAgIGFmdGVyOiBjaGlsZHJlbi5zbGljZShpbmQgKyAxKVxuICAgIH07XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDbG9uZSBwYXJlbnQgdG8gdGhlIFJJR0hUIGFuZCBtb3ZlIGV2ZXJ5dGhpbmcgYWZ0ZXIgY2hpbGQgaW4gdGhlIHBhcmVudCBlbGVtZW50IGludG9cbiAqIGEgY2xvbmUgb2YgdGhlIHBhcmVudCAocGxhY2VkIGFmdGVyIHBhcmVudCkuXG4gKi9cbmNvbnN0IGJyZWFrVG9SaWdodCA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpOiBPcHRpb25hbDxMZWZ0UmlnaHQ8RT4+ID0+IHtcbiAgcmV0dXJuIGJpc2VjdCh1bml2ZXJzZSwgcGFyZW50LCBjaGlsZCkubWFwKChwYXJ0cykgPT4ge1xuICAgIGNvbnN0IHNlY29uZCA9IHVuaXZlcnNlLmNyZWF0ZSgpLmNsb25lKHBhcmVudCk7XG4gICAgdW5pdmVyc2UuaW5zZXJ0KCkuYXBwZW5kQWxsKHNlY29uZCwgcGFydHMuYWZ0ZXIpO1xuICAgIHVuaXZlcnNlLmluc2VydCgpLmFmdGVyKHBhcmVudCwgc2Vjb25kKTtcbiAgICByZXR1cm4gbGVmdFJpZ2h0KHBhcmVudCwgc2Vjb25kKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENsb25lIHBhcmVudCB0byB0aGUgTEVGVCBhbmQgbW92ZSBldmVyeXRoaW5nIGJlZm9yZSBhbmQgaW5jbHVkaW5nIGNoaWxkIGludG9cbiAqIHRoZSBhIGNsb25lIG9mIHRoZSBwYXJlbnQgKHBsYWNlZCBiZWZvcmUgcGFyZW50KVxuICovXG5jb25zdCBicmVha1RvTGVmdCA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpOiBPcHRpb25hbDxMZWZ0UmlnaHQ8RT4+ID0+IHtcbiAgcmV0dXJuIGJpc2VjdCh1bml2ZXJzZSwgcGFyZW50LCBjaGlsZCkubWFwKChwYXJ0cykgPT4ge1xuICAgIGNvbnN0IHByaW9yID0gdW5pdmVyc2UuY3JlYXRlKCkuY2xvbmUocGFyZW50KTtcbiAgICB1bml2ZXJzZS5pbnNlcnQoKS5hcHBlbmRBbGwocHJpb3IsIHBhcnRzLmJlZm9yZS5jb25jYXQoWyBjaGlsZCBdKSk7XG4gICAgdW5pdmVyc2UuaW5zZXJ0KCkuYXBwZW5kQWxsKHBhcmVudCwgcGFydHMuYWZ0ZXIpO1xuICAgIHVuaXZlcnNlLmluc2VydCgpLmJlZm9yZShwYXJlbnQsIHByaW9yKTtcbiAgICByZXR1cm4gbGVmdFJpZ2h0KHByaW9yLCBwYXJlbnQpO1xuICB9KTtcbn07XG5cbi8qXG4gKiBVc2luZyB0aGUgYnJlYWtlciwgYnJlYWsgZnJvbSB0aGUgY2hpbGQgdXAgdG8gdGhlIHRvcCBlbGVtZW50IGRlZmluZWQgYnkgdGhlIHByZWRpY2F0ZS5cbiAqIEl0IHJldHVybnMgdGhyZWUgdmFsdWVzOlxuICogICBmaXJzdDogdGhlIHRvcCBsZXZlbCBlbGVtZW50IHRoYXQgY29tcGxldGVkIHRoZSBicmVha1xuICogICBzZWNvbmQ6IHRoZSBvcHRpb25hbCBlbGVtZW50IHJlcHJlc2VudGluZyBzZWNvbmQgcGFydCBvZiB0aGUgdG9wLWxldmVsIHNwbGl0IGlmIHRoZSBicmVha2luZyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IHRvIHRoZSB0b3BcbiAqICAgc3BsaXRzOiBhIGxpc3Qgb2YgKEVsZW1lbnQsIEVsZW1lbnQpIHBhaXJzIHRoYXQgcmVwcmVzZW50IHRoZSBzcGxpdHMgdGhhdCBoYXZlIG9jY3VycmVkIG9uIHRoZSB3YXkgdG8gdGhlIHRvcC5cbiAqL1xuY29uc3QgYnJlYWtQYXRoID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSwgaXNUb3A6IChlOiBFKSA9PiBib29sZWFuLCBicmVha2VyOiAodW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBwYXJlbnQ6IEUsIGNoaWxkOiBFKSA9PiBPcHRpb25hbDxMZWZ0UmlnaHQ8RT4+KTogQnJva2VuUGF0aDxFPiA9PiB7XG5cbiAgY29uc3QgbmV4dCA9IChjaGlsZDogRSwgZ3JvdXA6IE9wdGlvbmFsPEU+LCBzcGxpdHM6IEJyb2tlblBhdGhTcGxpdHM8RT5bXSk6IEJyb2tlblBhdGg8RT4gPT4ge1xuICAgIGNvbnN0IGZhbGxiYWNrID0gYnJva2VuUGF0aChjaGlsZCwgT3B0aW9uYWwubm9uZSgpLCBzcGxpdHMpO1xuICAgIC8vIEZvdW5kIHRoZSB0b3AsIHNvIHN0b3AuXG4gICAgaWYgKGlzVG9wKGNoaWxkKSkge1xuICAgICAgcmV0dXJuIGJyb2tlblBhdGgoY2hpbGQsIGdyb3VwLCBzcGxpdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTcGxpdCB0aGUgY2hpbGQgYXQgcGFyZW50LCBhbmQga2VlcCBnb2luZ1xuICAgICAgcmV0dXJuIHVuaXZlcnNlLnByb3BlcnR5KCkucGFyZW50KGNoaWxkKS5iaW5kKChwYXJlbnQ6IEUpID0+IHtcbiAgICAgICAgcmV0dXJuIGJyZWFrZXIodW5pdmVyc2UsIHBhcmVudCwgY2hpbGQpLm1hcCgoYnJlYWthZ2UpID0+IHtcbiAgICAgICAgICBjb25zdCBleHRyYSA9IFt7IGZpcnN0OiBicmVha2FnZS5sZWZ0LCBzZWNvbmQ6IGJyZWFrYWdlLnJpZ2h0IH1dO1xuICAgICAgICAgIC8vIE91ciBpc1RvcCBpcyBiYXNlZCBvbiB0aGUgbGVmdC1zaWRlIHBhcmVudCwgc28ga2VlcCBpdCByZWdhcmRsZXNzIG9mIHNwbGl0LlxuICAgICAgICAgIGNvbnN0IG5leHRDaGlsZCA9IGlzVG9wKHBhcmVudCkgPyBwYXJlbnQgOiBicmVha2FnZS5sZWZ0O1xuICAgICAgICAgIHJldHVybiBuZXh0KG5leHRDaGlsZCwgT3B0aW9uYWwuc29tZShicmVha2FnZS5yaWdodCksIHNwbGl0cy5jb25jYXQoZXh0cmEpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KS5nZXRPcihmYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBuZXh0KGl0ZW0sIE9wdGlvbmFsLm5vbmUoKSwgW10pO1xufTtcblxuZXhwb3J0IHsgYnJlYWtUb0xlZnQsIGJyZWFrVG9SaWdodCwgYnJlYWtQYXRoIH07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuZXhwb3J0IHR5cGUgTG9va2VyPEUsIEQ+ID0gKHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbTogRSkgPT4gT3B0aW9uYWw8RT47XG5cbmNvbnN0IGFsbCA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGxvb2s6IExvb2tlcjxFLCBEPiwgZWxlbWVudHM6IEVbXSwgZjogKHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgbG9vazogTG9va2VyPEUsIEQ+LCBoZWFkOiBFLCB0YWlsOiBFW10pID0+IE9wdGlvbmFsPEU+KTogT3B0aW9uYWw8RT4gPT4ge1xuICBjb25zdCBoZWFkID0gZWxlbWVudHNbMF07XG4gIGNvbnN0IHRhaWwgPSBlbGVtZW50cy5zbGljZSgxKTtcbiAgcmV0dXJuIGYodW5pdmVyc2UsIGxvb2ssIGhlYWQsIHRhaWwpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBsb29rIHJldHVybnMgdGhlIHNhbWUgZWxlbWVudCBmb3IgYWxsIGVsZW1lbnRzLCBhbmQgcmV0dXJuIGl0IGlmIGl0IGV4aXN0cy5cbiAqL1xuY29uc3Qgb25lQWxsID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgbG9vazogTG9va2VyPEUsIEQ+LCBlbGVtZW50czogRVtdKTogT3B0aW9uYWw8RT4gPT4ge1xuICByZXR1cm4gZWxlbWVudHMubGVuZ3RoID4gMCA/XG4gICAgYWxsKHVuaXZlcnNlLCBsb29rLCBlbGVtZW50cywgdW5zYWZlT25lKSA6XG4gICAgT3B0aW9uYWwubm9uZTxFPigpO1xufTtcblxuY29uc3QgdW5zYWZlT25lID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgbG9vazogTG9va2VyPEUsIEQ+LCBoZWFkOiBFLCB0YWlsOiBFW10pOiBPcHRpb25hbDxFPiA9PiB7XG4gIGNvbnN0IHN0YXJ0ID0gbG9vayh1bml2ZXJzZSwgaGVhZCk7XG4gIHJldHVybiBBcnIuZm9sZHIodGFpbCwgKGIsIGEpID0+IHtcbiAgICBjb25zdCBjdXJyZW50ID0gbG9vayh1bml2ZXJzZSwgYSk7XG4gICAgcmV0dXJuIGNvbW1vbkVsZW1lbnQodW5pdmVyc2UsIGIsIGN1cnJlbnQpO1xuICB9LCBzdGFydCk7XG59O1xuXG5jb25zdCBjb21tb25FbGVtZW50ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgc3RhcnQ6IE9wdGlvbmFsPEU+LCBlbmQ6IE9wdGlvbmFsPEU+KTogT3B0aW9uYWw8RT4gPT4ge1xuICByZXR1cm4gc3RhcnQuYmluZCgocykgPT4ge1xuICAgIHJldHVybiBlbmQuZmlsdGVyKEZ1bi5jdXJyeSh1bml2ZXJzZS5lcSwgcykpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IG9uZUFsbCB9O1xuIiwiaW1wb3J0IHR5cGUgeyBVbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmludGVyZmFjZSBTdWJzZXRBbmNlc3RvcnM8RT4ge1xuICByZWFkb25seSBmaXJzdHBhdGg6IEVbXTtcbiAgcmVhZG9ubHkgc2Vjb25kcGF0aDogRVtdO1xuICByZWFkb25seSBzaGFyZWQ6IE9wdGlvbmFsPEU+O1xufVxuXG5jb25zdCBlcSA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiAoZTogRSkgPT4gYm9vbGVhbiA9PiB7XG4gIHJldHVybiBGdW4uY3VycnkodW5pdmVyc2UuZXEsIGl0ZW0pO1xufTtcblxuY29uc3QgdW5zYWZlU3Vic2V0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgY29tbW9uOiBFLCBwczE6IEVbXSwgcHMyOiBFW10pOiBPcHRpb25hbDxFW10+ID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKGNvbW1vbik7XG4gIGlmICh1bml2ZXJzZS5lcShjb21tb24sIHBzMVswXSkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZShbIHBzMVswXSBdKTtcbiAgfVxuICBpZiAodW5pdmVyc2UuZXEoY29tbW9uLCBwczJbMF0pKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoWyBwczJbMF0gXSk7XG4gIH1cblxuICBjb25zdCBmaW5kZXIgPSAocHM6IEVbXSkgPT4ge1xuICAgIC8vIHBzIGlzIGNhbGN1bGF0ZWQgYm90dG9tLXVwLCBidXQgbG9naWNhbGx5IHdlJ3JlIHNlYXJjaGluZyB0b3AtZG93blxuICAgIGNvbnN0IHRvcERvd24gPSBBcnIucmV2ZXJzZShwcyk7XG5cbiAgICAvLyBmaW5kIHRoZSBjaGlsZCBvZiBjb21tb24gaW4gdGhlIHBzIGFycmF5XG4gICAgY29uc3QgaW5kZXggPSBBcnIuZmluZEluZGV4KHRvcERvd24sIGVxKHVuaXZlcnNlLCBjb21tb24pKS5nZXRPcigtMSk7XG4gICAgY29uc3QgaXRlbSA9IGluZGV4IDwgdG9wRG93bi5sZW5ndGggLSAxID8gdG9wRG93bltpbmRleCArIDFdIDogdG9wRG93bltpbmRleF07XG5cbiAgICAvLyBmaW5kIHRoZSBpbmRleCBvZiB0aGF0IGNoaWxkIGluIHRoZSBjb21tb24gY2hpbGRyZW5cbiAgICByZXR1cm4gQXJyLmZpbmRJbmRleChjaGlsZHJlbiwgZXEodW5pdmVyc2UsIGl0ZW0pKTtcbiAgfTtcblxuICBjb25zdCBzdGFydEluZGV4ID0gZmluZGVyKHBzMSk7XG4gIGNvbnN0IGVuZEluZGV4ID0gZmluZGVyKHBzMik7XG5cbiAgLy8gUmV0dXJuIGFsbCBjb21tb24gY2hpbGRyZW4gYmV0d2VlbiBmaXJzdCBhbmQgbGFzdFxuICByZXR1cm4gc3RhcnRJbmRleC5iaW5kKChzSW5kZXgpID0+IHtcbiAgICByZXR1cm4gZW5kSW5kZXgubWFwKChlSW5kZXgpID0+IHtcbiAgICAgIC8vIFRoaXMgaXMgcmVxdWlyZWQgYmVjYXVzZSB0aGUgcmFuZ2UgY291bGQgYmUgYmFja3dhcmRzLlxuICAgICAgY29uc3QgZmlyc3QgPSBNYXRoLm1pbihzSW5kZXgsIGVJbmRleCk7XG4gICAgICBjb25zdCBsYXN0ID0gTWF0aC5tYXgoc0luZGV4LCBlSW5kZXgpO1xuXG4gICAgICByZXR1cm4gY2hpbGRyZW4uc2xpY2UoZmlyc3QsIGxhc3QgKyAxKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vLyBOb3RlOiB0aGlzIGNhbiBiZSBleHBvcnRlZCBpZiBpdCBpcyByZXF1aXJlZCBpbiB0aGUgZnV0dXJlLlxuY29uc3QgYW5jZXN0b3JzID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgc3RhcnQ6IEUsIGVuZDogRSwgaXNSb290OiAoeDogRSkgPT4gYm9vbGVhbiA9IEZ1bi5uZXZlcik6IFN1YnNldEFuY2VzdG9yczxFPiA9PiB7XG4gIC8vIEluZWZmaWNpZW50IGlmIG5vIGlzUm9vdCBpcyBzdXBwbGllZC5cbiAgLy8gVE9ETzogQW5keSBrbm93cyB0aGVyZSBpcyBhIGdyYXBoLWJhc2VkIGFsZ29yaXRobSB0byBmaW5kIGEgY29tbW9uIHBhcmVudCwgYnV0IGNhbid0IHJlbWVtYmVyIGl0XG4gIC8vICAgICAgICBUaGlzIGFsc28gaW5jbHVkZXMgc29tZXRoaW5nIHRvIGdldCB0aGUgc3Vic2V0IGFmdGVyIGZpbmRpbmcgdGhlIGNvbW1vbiBwYXJlbnRcbiAgY29uc3QgcHMxID0gWyBzdGFydCBdLmNvbmNhdCh1bml2ZXJzZS51cCgpLmFsbChzdGFydCkpO1xuICBjb25zdCBwczIgPSBbIGVuZCBdLmNvbmNhdCh1bml2ZXJzZS51cCgpLmFsbChlbmQpKTtcblxuICBjb25zdCBwcnVuZSA9IChwYXRoOiBFW10pID0+IHtcbiAgICBjb25zdCBpbmRleCA9IEFyci5maW5kSW5kZXgocGF0aCwgaXNSb290KTtcbiAgICByZXR1cm4gaW5kZXguZm9sZCgoKSA9PiB7XG4gICAgICByZXR1cm4gcGF0aDtcbiAgICB9LCAoaW5kKSA9PiB7XG4gICAgICByZXR1cm4gcGF0aC5zbGljZSgwLCBpbmQgKyAxKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBwcnVuZWQxID0gcHJ1bmUocHMxKTtcbiAgY29uc3QgcHJ1bmVkMiA9IHBydW5lKHBzMik7XG5cbiAgY29uc3Qgc2hhcmVkID0gQXJyLmZpbmQocHJ1bmVkMSwgKHgpID0+IHtcbiAgICByZXR1cm4gQXJyLmV4aXN0cyhwcnVuZWQyLCBlcSh1bml2ZXJzZSwgeCkpO1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGZpcnN0cGF0aDogcHJ1bmVkMSxcbiAgICBzZWNvbmRwYXRoOiBwcnVuZWQyLFxuICAgIHNoYXJlZFxuICB9O1xufTtcblxuLyoqXG4gKiBGaW5kIHRoZSBjb21tb24gZWxlbWVudCBpbiB0aGUgcGFyZW50cyBvZiBzdGFydCBhbmQgZW5kLlxuICpcbiAqIFRoZW4gcmV0dXJuIGFsbCBjaGlsZHJlbiBvZiB0aGUgY29tbW9uIGVsZW1lbnQgc3VjaCB0aGF0IHN0YXJ0IGFuZCBlbmQgYXJlIGluY2x1ZGVkLlxuICovXG5jb25zdCBzdWJzZXQgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBzdGFydDogRSwgZW5kOiBFKTogT3B0aW9uYWw8RVtdPiA9PiB7XG4gIGNvbnN0IGFuY3MgPSBhbmNlc3RvcnModW5pdmVyc2UsIHN0YXJ0LCBlbmQpO1xuICByZXR1cm4gYW5jcy5zaGFyZWQuYmluZCgoc2hhcmVkKSA9PiB7XG4gICAgcmV0dXJuIHVuc2FmZVN1YnNldCh1bml2ZXJzZSwgc2hhcmVkLCBhbmNzLmZpcnN0cGF0aCwgYW5jcy5zZWNvbmRwYXRoKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBzdWJzZXQsXG4gIGFuY2VzdG9yc1xufTtcbiIsImltcG9ydCB7IEZ1biwgT3B0aW9uYWwsIFRodW5rIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBCcm93c2VyIGFzIEJyb3dzZXJDb3JlIH0gZnJvbSAnLi4vY29yZS9Ccm93c2VyJztcbmltcG9ydCB0eXBlIHsgT3BlcmF0aW5nU3lzdGVtIGFzIE9wZXJhdGluZ1N5c3RlbUNvcmUgfSBmcm9tICcuLi9jb3JlL09wZXJhdGluZ1N5c3RlbSc7XG5pbXBvcnQgeyBQbGF0Zm9ybURldGVjdGlvbiB9IGZyb20gJy4uL2NvcmUvUGxhdGZvcm1EZXRlY3Rpb24nO1xuaW1wb3J0IHR5cGUgeyBEZXZpY2VUeXBlIGFzIERldmljZVR5cGVDb3JlIH0gZnJvbSAnLi4vZGV0ZWN0L0RldmljZVR5cGUnO1xuXG5leHBvcnQgdHlwZSBCcm93c2VyID0gQnJvd3NlckNvcmU7XG5leHBvcnQgdHlwZSBPcGVyYXRpbmdTeXN0ZW0gPSBPcGVyYXRpbmdTeXN0ZW1Db3JlO1xuZXhwb3J0IHR5cGUgRGV2aWNlVHlwZSA9IERldmljZVR5cGVDb3JlO1xuXG5jb25zdCBtZWRpYU1hdGNoID0gKHF1ZXJ5OiBzdHJpbmcpID0+IHdpbmRvdy5tYXRjaE1lZGlhKHF1ZXJ5KS5tYXRjaGVzO1xuXG4vLyBJTVBPUlRBTlQ6IE11c3QgYmUgaW4gYSB0aHVuaywgb3RoZXJ3aXNlIHJvbGx1cCB0aGlua3MgY2FsbGluZyB0aGlzIGltbWVkaWF0ZWx5XG4vLyBjYXVzZXMgc2lkZSBlZmZlY3RzIGFuZCB3b24ndCB0cmVlIHNoYWtlIHRoaXMgYXdheVxuLy8gTm90ZTogbmF2aWdhdG9yLnVzZXJBZ2VudERhdGEgaXMgbm90IHBhcnQgb2YgdGhlIG5hdGl2ZSB0eXBlc2NyaXB0IHR5cGVzIHlldFxubGV0IHBsYXRmb3JtID0gVGh1bmsuY2FjaGVkKCgpID0+IFBsYXRmb3JtRGV0ZWN0aW9uLmRldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCwgT3B0aW9uYWwuZnJvbSgoKHdpbmRvdy5uYXZpZ2F0b3IgYXMgYW55KS51c2VyQWdlbnREYXRhKSksIG1lZGlhTWF0Y2gpKTtcblxuZXhwb3J0IGNvbnN0IGRldGVjdCA9ICgpOiBQbGF0Zm9ybURldGVjdGlvbiA9PiBwbGF0Zm9ybSgpO1xuXG5leHBvcnQgY29uc3Qgb3ZlcnJpZGUgPSAob3ZlcnJpZGVzOiBQYXJ0aWFsPFBsYXRmb3JtRGV0ZWN0aW9uPik6IHZvaWQgPT4ge1xuICBwbGF0Zm9ybSA9IEZ1bi5jb25zdGFudCh7XG4gICAgLi4uZGV0ZWN0KCksXG4gICAgLi4ub3ZlcnJpZGVzXG4gIH0pO1xufTtcbiIsImltcG9ydCB7IFJlc29sdmUsIFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBHbG9iYWwgZnJvbSAnLi4vdXRpbC9HbG9iYWwnO1xuXG5jb25zdCBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxuLypcbiAqIElFOSBhbmQgYWJvdmVcbiAqXG4gKiBNRE4gbm8gdXNlIG9uIHRoaXMgb25lLCBidXQgaGVyZSdzIHRoZSBsaW5rIGFueXdheTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9IVE1MRWxlbWVudFxuICovXG5jb25zdCBzYW5kSFRNTEVsZW1lbnQgPSAoc2NvcGU6IFdpbmRvdyB8IHVuZGVmaW5lZCkgPT4ge1xuICByZXR1cm4gR2xvYmFsLmdldE9yRGllKCdIVE1MRWxlbWVudCcsIHNjb3BlKSBhcyB0eXBlb2YgSFRNTEVsZW1lbnQ7XG59O1xuXG5jb25zdCBpc1Byb3RvdHlwZU9mID0gKHg6IGFueSk6IHggaXMgSFRNTEVsZW1lbnQgPT4ge1xuICAvLyB1c2UgUmVzb2x2ZSB0byBnZXQgdGhlIHdpbmRvdyBvYmplY3QgZm9yIHggYW5kIGp1c3QgcmV0dXJuIHVuZGVmaW5lZCBpZiBpdCBjYW4ndCBmaW5kIGl0LlxuICAvLyB1bmRlZmluZWQgc2NvcGUgbGF0ZXIgdHJpZ2dlcnMgdXNpbmcgdGhlIGdsb2JhbCB3aW5kb3cuXG4gIGNvbnN0IHNjb3BlOiBXaW5kb3cgfCB1bmRlZmluZWQgPSBSZXNvbHZlLnJlc29sdmUoJ293bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcnLCB4KTtcblxuICAvLyBUSU5ZLTczNzQ6IFdlIGNhbid0IHJlbHkgb24gbG9va2luZyBhdCB0aGUgb3duZXIgd2luZG93IEhUTUxFbGVtZW50IGFzIHRoZSBlbGVtZW50IG1heSBoYXZlXG4gIC8vIGJlZW4gY29uc3RydWN0ZWQgaW4gYSBkaWZmZXJlbnQgd2luZG93IGFuZCB0aGVuIGFwcGVuZGVkIHRvIHRoZSBjdXJyZW50IHdpbmRvdyBkb2N1bWVudC5cbiAgcmV0dXJuIFR5cGUuaXNPYmplY3QoeCkgJiYgKHNhbmRIVE1MRWxlbWVudChzY29wZSkucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoeCkgfHwgL15IVE1MXFx3KkVsZW1lbnQkLy50ZXN0KGdldFByb3RvdHlwZU9mKHgpLmNvbnN0cnVjdG9yLm5hbWUpKTtcbn07XG5cbmV4cG9ydCB7XG4gIGlzUHJvdG90eXBlT2Zcbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBWZXJzaW9uIH0gZnJvbSAnLi4vZGV0ZWN0L1ZlcnNpb24nO1xuaW1wb3J0IHR5cGUgeyBVYUluZm8gfSBmcm9tICcuLi9pbmZvL1VhSW5mbyc7XG5cbmNvbnN0IGVkZ2UgPSAnRWRnZSc7XG5jb25zdCBjaHJvbWl1bSA9ICdDaHJvbWl1bSc7XG5jb25zdCBpZSA9ICdJRSc7XG5jb25zdCBvcGVyYSA9ICdPcGVyYSc7XG5jb25zdCBmaXJlZm94ID0gJ0ZpcmVmb3gnO1xuY29uc3Qgc2FmYXJpID0gJ1NhZmFyaSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJvd3NlciBleHRlbmRzIFVhSW5mbyB7XG4gIHJlYWRvbmx5IGlzRWRnZTogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNDaHJvbWl1bTogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNJRTogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNPcGVyYTogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNGaXJlZm94OiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc1NhZmFyaTogKCkgPT4gYm9vbGVhbjtcbn1cblxuY29uc3QgdW5rbm93biA9ICgpOiBCcm93c2VyID0+IHtcbiAgcmV0dXJuIG51KHtcbiAgICBjdXJyZW50OiB1bmRlZmluZWQsXG4gICAgdmVyc2lvbjogVmVyc2lvbi51bmtub3duKClcbiAgfSk7XG59O1xuXG5jb25zdCBudSA9IChpbmZvOiBVYUluZm8pOiBCcm93c2VyID0+IHtcbiAgY29uc3QgY3VycmVudCA9IGluZm8uY3VycmVudDtcbiAgY29uc3QgdmVyc2lvbiA9IGluZm8udmVyc2lvbjtcblxuICBjb25zdCBpc0Jyb3dzZXIgPSAobmFtZTogc3RyaW5nKSA9PiAoKTogYm9vbGVhbiA9PiBjdXJyZW50ID09PSBuYW1lO1xuXG4gIHJldHVybiB7XG4gICAgY3VycmVudCxcbiAgICB2ZXJzaW9uLFxuXG4gICAgaXNFZGdlOiBpc0Jyb3dzZXIoZWRnZSksXG4gICAgaXNDaHJvbWl1bTogaXNCcm93c2VyKGNocm9taXVtKSxcbiAgICAvLyBOT1RFOiBpc0llIGp1c3QgbG9va3MgdG9vIHdlaXJkXG4gICAgaXNJRTogaXNCcm93c2VyKGllKSxcbiAgICBpc09wZXJhOiBpc0Jyb3dzZXIob3BlcmEpLFxuICAgIGlzRmlyZWZveDogaXNCcm93c2VyKGZpcmVmb3gpLFxuICAgIGlzU2FmYXJpOiBpc0Jyb3dzZXIoc2FmYXJpKVxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IEJyb3dzZXIgPSB7XG4gIHVua25vd24sXG4gIG51LFxuICBlZGdlOiBGdW4uY29uc3RhbnQoZWRnZSksXG4gIGNocm9taXVtOiBGdW4uY29uc3RhbnQoY2hyb21pdW0pLFxuICBpZTogRnVuLmNvbnN0YW50KGllKSxcbiAgb3BlcmE6IEZ1bi5jb25zdGFudChvcGVyYSksXG4gIGZpcmVmb3g6IEZ1bi5jb25zdGFudChmaXJlZm94KSxcbiAgc2FmYXJpOiBGdW4uY29uc3RhbnQoc2FmYXJpKVxufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuLi9kZXRlY3QvVmVyc2lvbic7XG5pbXBvcnQgdHlwZSB7IFVhSW5mbyB9IGZyb20gJy4uL2luZm8vVWFJbmZvJztcblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpbmdTeXN0ZW0gZXh0ZW5kcyBVYUluZm8ge1xuICByZWFkb25seSBpc1dpbmRvd3M6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzaU9TOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0FuZHJvaWQ6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzTWFjT1M6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzTGludXg6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzU29sYXJpczogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNGcmVlQlNEOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0Nocm9tZU9TOiAoKSA9PiBib29sZWFuO1xufVxuXG5jb25zdCB3aW5kb3dzID0gJ1dpbmRvd3MnO1xuY29uc3QgaW9zID0gJ2lPUyc7XG5jb25zdCBhbmRyb2lkID0gJ0FuZHJvaWQnO1xuY29uc3QgbGludXggPSAnTGludXgnO1xuY29uc3QgbWFjb3MgPSAnbWFjT1MnO1xuY29uc3Qgc29sYXJpcyA9ICdTb2xhcmlzJztcbmNvbnN0IGZyZWVic2QgPSAnRnJlZUJTRCc7XG5jb25zdCBjaHJvbWVvcyA9ICdDaHJvbWVPUyc7XG5cbi8vIFRob3VnaCB0aGVyZSBpcyBhIGJpdCBvZiBkdXBlIHdpdGggdGhpcyBhbmQgQnJvd3NlciwgdHJ5aW5nIHRvXG4vLyByZXVzZSBjb2RlIG1ha2VzIGl0IG11Y2ggaGFyZGVyIHRvIGZvbGxvdyBhbmQgY2hhbmdlLlxuXG5jb25zdCB1bmtub3duID0gKCk6IE9wZXJhdGluZ1N5c3RlbSA9PiB7XG4gIHJldHVybiBudSh7XG4gICAgY3VycmVudDogdW5kZWZpbmVkLFxuICAgIHZlcnNpb246IFZlcnNpb24udW5rbm93bigpXG4gIH0pO1xufTtcblxuY29uc3QgbnUgPSAoaW5mbzogVWFJbmZvKTogT3BlcmF0aW5nU3lzdGVtID0+IHtcbiAgY29uc3QgY3VycmVudCA9IGluZm8uY3VycmVudDtcbiAgY29uc3QgdmVyc2lvbiA9IGluZm8udmVyc2lvbjtcblxuICBjb25zdCBpc09TID0gKG5hbWU6IHN0cmluZykgPT4gKCk6IGJvb2xlYW4gPT4gY3VycmVudCA9PT0gbmFtZTtcblxuICByZXR1cm4ge1xuICAgIGN1cnJlbnQsXG4gICAgdmVyc2lvbixcblxuICAgIGlzV2luZG93czogaXNPUyh3aW5kb3dzKSxcbiAgICAvLyBUT0RPOiBGaXggY2FwaXRhbGlzYXRpb25cbiAgICBpc2lPUzogaXNPUyhpb3MpLFxuICAgIGlzQW5kcm9pZDogaXNPUyhhbmRyb2lkKSxcbiAgICBpc01hY09TOiBpc09TKG1hY29zKSxcbiAgICBpc0xpbnV4OiBpc09TKGxpbnV4KSxcbiAgICBpc1NvbGFyaXM6IGlzT1Moc29sYXJpcyksXG4gICAgaXNGcmVlQlNEOiBpc09TKGZyZWVic2QpLFxuICAgIGlzQ2hyb21lT1M6IGlzT1MoY2hyb21lb3MpXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgT3BlcmF0aW5nU3lzdGVtID0ge1xuICB1bmtub3duLFxuICBudSxcblxuICB3aW5kb3dzOiBGdW4uY29uc3RhbnQod2luZG93cyksXG4gIGlvczogRnVuLmNvbnN0YW50KGlvcyksXG4gIGFuZHJvaWQ6IEZ1bi5jb25zdGFudChhbmRyb2lkKSxcbiAgbGludXg6IEZ1bi5jb25zdGFudChsaW51eCksXG4gIG1hY29zOiBGdW4uY29uc3RhbnQobWFjb3MpLFxuICBzb2xhcmlzOiBGdW4uY29uc3RhbnQoc29sYXJpcyksXG4gIGZyZWVic2Q6IEZ1bi5jb25zdGFudChmcmVlYnNkKSxcbiAgY2hyb21lb3M6IEZ1bi5jb25zdGFudChjaHJvbWVvcylcbn07XG4iLCJpbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgRGV2aWNlVHlwZSB9IGZyb20gJy4uL2RldGVjdC9EZXZpY2VUeXBlJztcbmltcG9ydCAqIGFzIFVhRGF0YSBmcm9tICcuLi9kZXRlY3QvVWFEYXRhJztcbmltcG9ydCAqIGFzIFVhU3RyaW5nIGZyb20gJy4uL2RldGVjdC9VYVN0cmluZyc7XG5pbXBvcnQgeyBQbGF0Zm9ybUluZm8gfSBmcm9tICcuLi9pbmZvL1BsYXRmb3JtSW5mbyc7XG5cbmltcG9ydCB7IEJyb3dzZXIgfSBmcm9tICcuL0Jyb3dzZXInO1xuaW1wb3J0IHsgT3BlcmF0aW5nU3lzdGVtIH0gZnJvbSAnLi9PcGVyYXRpbmdTeXN0ZW0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBsYXRmb3JtRGV0ZWN0aW9uIHtcbiAgcmVhZG9ubHkgYnJvd3NlcjogQnJvd3NlcjtcbiAgcmVhZG9ubHkgb3M6IE9wZXJhdGluZ1N5c3RlbTtcbiAgcmVhZG9ubHkgZGV2aWNlVHlwZTogRGV2aWNlVHlwZTtcbn1cblxuY29uc3QgZGV0ZWN0ID0gKHVzZXJBZ2VudDogc3RyaW5nLCB1c2VyQWdlbnREYXRhT3B0OiBPcHRpb25hbDxVYURhdGEuVXNlckFnZW50RGF0YT4sIG1lZGlhTWF0Y2g6IChxdWVyeTogc3RyaW5nKSA9PiBib29sZWFuKTogUGxhdGZvcm1EZXRlY3Rpb24gPT4ge1xuICBjb25zdCBicm93c2VycyA9IFBsYXRmb3JtSW5mby5icm93c2VycygpO1xuICBjb25zdCBvc2VzID0gUGxhdGZvcm1JbmZvLm9zZXMoKTtcblxuICBjb25zdCBicm93c2VyID0gdXNlckFnZW50RGF0YU9wdC5iaW5kKCh1c2VyQWdlbnREYXRhKSA9PiBVYURhdGEuZGV0ZWN0QnJvd3Nlcihicm93c2VycywgdXNlckFnZW50RGF0YSkpXG4gICAgLm9yVGh1bmsoKCkgPT4gVWFTdHJpbmcuZGV0ZWN0QnJvd3Nlcihicm93c2VycywgdXNlckFnZW50KSlcbiAgICAuZm9sZChCcm93c2VyLnVua25vd24sIEJyb3dzZXIubnUpO1xuXG4gIGNvbnN0IG9zID0gVWFTdHJpbmcuZGV0ZWN0T3Mob3NlcywgdXNlckFnZW50KS5mb2xkKFxuICAgIE9wZXJhdGluZ1N5c3RlbS51bmtub3duLFxuICAgIE9wZXJhdGluZ1N5c3RlbS5udVxuICApO1xuICBjb25zdCBkZXZpY2VUeXBlID0gRGV2aWNlVHlwZShvcywgYnJvd3NlciwgdXNlckFnZW50LCBtZWRpYU1hdGNoKTtcblxuICByZXR1cm4ge1xuICAgIGJyb3dzZXIsXG4gICAgb3MsXG4gICAgZGV2aWNlVHlwZVxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IFBsYXRmb3JtRGV0ZWN0aW9uID0ge1xuICBkZXRlY3Rcbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEJyb3dzZXIgfSBmcm9tICcuLi9jb3JlL0Jyb3dzZXInO1xuaW1wb3J0IHR5cGUgeyBPcGVyYXRpbmdTeXN0ZW0gfSBmcm9tICcuLi9jb3JlL09wZXJhdGluZ1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlVHlwZSB7XG4gIHJlYWRvbmx5IGlzaVBhZDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNpUGhvbmU6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzVGFibGV0OiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc1Bob25lOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc1RvdWNoOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0FuZHJvaWQ6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzaU9TOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc1dlYlZpZXc6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzRGVza3RvcDogKCkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERldmljZVR5cGUgPSAob3M6IE9wZXJhdGluZ1N5c3RlbSwgYnJvd3NlcjogQnJvd3NlciwgdXNlckFnZW50OiBzdHJpbmcsIG1lZGlhTWF0Y2g6IChxdWVyeTogc3RyaW5nKSA9PiBib29sZWFuKTogRGV2aWNlVHlwZSA9PiB7XG4gIGNvbnN0IGlzaVBhZCA9IG9zLmlzaU9TKCkgJiYgL2lwYWQvaS50ZXN0KHVzZXJBZ2VudCkgPT09IHRydWU7XG4gIGNvbnN0IGlzaVBob25lID0gb3MuaXNpT1MoKSAmJiAhaXNpUGFkO1xuICBjb25zdCBpc01vYmlsZSA9IG9zLmlzaU9TKCkgfHwgb3MuaXNBbmRyb2lkKCk7XG4gIGNvbnN0IGlzVG91Y2ggPSBpc01vYmlsZSB8fCBtZWRpYU1hdGNoKCcocG9pbnRlcjpjb2Fyc2UpJyk7XG4gIGNvbnN0IGlzVGFibGV0ID0gaXNpUGFkIHx8ICFpc2lQaG9uZSAmJiBpc01vYmlsZSAmJiBtZWRpYU1hdGNoKCcobWluLWRldmljZS13aWR0aDo3NjhweCknKTtcbiAgY29uc3QgaXNQaG9uZSA9IGlzaVBob25lIHx8IGlzTW9iaWxlICYmICFpc1RhYmxldDtcblxuICBjb25zdCBpT1N3ZWJ2aWV3ID0gYnJvd3Nlci5pc1NhZmFyaSgpICYmIG9zLmlzaU9TKCkgJiYgL3NhZmFyaS9pLnRlc3QodXNlckFnZW50KSA9PT0gZmFsc2U7XG4gIGNvbnN0IGlzRGVza3RvcCA9ICFpc1Bob25lICYmICFpc1RhYmxldCAmJiAhaU9Td2VidmlldztcblxuICByZXR1cm4ge1xuICAgIGlzaVBhZDogRnVuLmNvbnN0YW50KGlzaVBhZCksXG4gICAgaXNpUGhvbmU6IEZ1bi5jb25zdGFudChpc2lQaG9uZSksXG4gICAgaXNUYWJsZXQ6IEZ1bi5jb25zdGFudChpc1RhYmxldCksXG4gICAgaXNQaG9uZTogRnVuLmNvbnN0YW50KGlzUGhvbmUpLFxuICAgIGlzVG91Y2g6IEZ1bi5jb25zdGFudChpc1RvdWNoKSxcbiAgICBpc0FuZHJvaWQ6IG9zLmlzQW5kcm9pZCxcbiAgICBpc2lPUzogb3MuaXNpT1MsXG4gICAgaXNXZWJWaWV3OiBGdW4uY29uc3RhbnQoaU9Td2VidmlldyksXG4gICAgaXNEZXNrdG9wOiBGdW4uY29uc3RhbnQoaXNEZXNrdG9wKVxuICB9O1xufTtcbiIsImltcG9ydCB7IEFyciwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgUGxhdGZvcm1JbmZvIH0gZnJvbSAnLi4vaW5mby9QbGF0Zm9ybUluZm8nO1xuaW1wb3J0IHR5cGUgeyBVYUluZm8gfSBmcm9tICcuLi9pbmZvL1VhSW5mbyc7XG5cbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuL1ZlcnNpb24nO1xuXG4vLyBUaGVyZSBhcmUgbm8gbmF0aXZlIHR5cGVzY3JpcHQgdHlwZXMgZm9yIG5hdmlnYXRvci5Vc2VyQWdlbnREYXRhIGF0IHRoaXMgc3RhZ2Ugc28gaGF2ZSB0byBtYW51YWxseSBkZWZpbmUgaXRcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyQWdlbnREYXRhQnJhbmQge1xuICByZWFkb25seSBicmFuZDogc3RyaW5nO1xuICByZWFkb25seSB2ZXJzaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckFnZW50RGF0YSB7XG4gIHJlYWRvbmx5IGJyYW5kczogVXNlckFnZW50RGF0YUJyYW5kW107XG4gIHJlYWRvbmx5IG1vYmlsZTogYm9vbGVhbjtcbn1cblxuY29uc3QgZGV0ZWN0QnJvd3NlciA9IChicm93c2VyczogUGxhdGZvcm1JbmZvW10sIHVzZXJBZ2VudERhdGE6IFVzZXJBZ2VudERhdGEpOiBPcHRpb25hbDxVYUluZm8+ID0+IHtcbiAgcmV0dXJuIEFyci5maW5kTWFwPFVzZXJBZ2VudERhdGFCcmFuZCwgVWFJbmZvPih1c2VyQWdlbnREYXRhLmJyYW5kcywgKHVhQnJhbmQpID0+IHtcbiAgICBjb25zdCBsY0JyYW5kID0gdWFCcmFuZC5icmFuZC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBcnIuZmluZChicm93c2VycywgKGJyb3dzZXIpID0+IGxjQnJhbmQgPT09IGJyb3dzZXIuYnJhbmQ/LnRvTG93ZXJDYXNlKCkpXG4gICAgICAubWFwKChpbmZvKSA9PiAoe1xuICAgICAgICBjdXJyZW50OiBpbmZvLm5hbWUsXG4gICAgICAgIHZlcnNpb246IFZlcnNpb24ubnUocGFyc2VJbnQodWFCcmFuZC52ZXJzaW9uLCAxMCksIDApXG4gICAgICB9KSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgZGV0ZWN0QnJvd3NlclxufTtcbiIsImltcG9ydCB7IEFyciwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgUGxhdGZvcm1JbmZvIH0gZnJvbSAnLi4vaW5mby9QbGF0Zm9ybUluZm8nO1xuaW1wb3J0IHR5cGUgeyBVYUluZm8gfSBmcm9tICcuLi9pbmZvL1VhSW5mbyc7XG5cbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuL1ZlcnNpb24nO1xuXG5jb25zdCBkZXRlY3QgPSAoY2FuZGlkYXRlczogUGxhdGZvcm1JbmZvW10sIHVzZXJBZ2VudDogYW55KTogT3B0aW9uYWw8UGxhdGZvcm1JbmZvPiA9PiB7XG4gIGNvbnN0IGFnZW50ID0gU3RyaW5nKHVzZXJBZ2VudCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIEFyci5maW5kKGNhbmRpZGF0ZXMsIChjYW5kaWRhdGUpID0+IHtcbiAgICByZXR1cm4gY2FuZGlkYXRlLnNlYXJjaChhZ2VudCk7XG4gIH0pO1xufTtcblxuLy8gVGhleSAoYnJvd3NlciBhbmQgb3MpIGFyZSB0aGUgc2FtZSBhdCB0aGUgbW9tZW50LCBidXQgdGhleSBtaWdodFxuLy8gbm90IHN0YXkgdGhhdCB3YXkuXG5jb25zdCBkZXRlY3RCcm93c2VyID0gKGJyb3dzZXJzOiBQbGF0Zm9ybUluZm9bXSwgdXNlckFnZW50OiBhbnkpOiBPcHRpb25hbDxVYUluZm8+ID0+IHtcbiAgcmV0dXJuIGRldGVjdChicm93c2VycywgdXNlckFnZW50KS5tYXAoKGJyb3dzZXIpOiBVYUluZm8gPT4ge1xuICAgIGNvbnN0IHZlcnNpb24gPSBWZXJzaW9uLmRldGVjdChicm93c2VyLnZlcnNpb25SZWdleGVzLCB1c2VyQWdlbnQpO1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50OiBicm93c2VyLm5hbWUsXG4gICAgICB2ZXJzaW9uXG4gICAgfTtcbiAgfSk7XG59O1xuXG5jb25zdCBkZXRlY3RPcyA9IChvc2VzOiBQbGF0Zm9ybUluZm9bXSwgdXNlckFnZW50OiBhbnkpOiBPcHRpb25hbDxVYUluZm8+ID0+IHtcbiAgcmV0dXJuIGRldGVjdChvc2VzLCB1c2VyQWdlbnQpLm1hcCgob3MpOiBVYUluZm8gPT4ge1xuICAgIGNvbnN0IHZlcnNpb24gPSBWZXJzaW9uLmRldGVjdChvcy52ZXJzaW9uUmVnZXhlcywgdXNlckFnZW50KTtcbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudDogb3MubmFtZSxcbiAgICAgIHZlcnNpb25cbiAgICB9O1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGRldGVjdEJyb3dzZXIsXG4gIGRldGVjdE9zXG59O1xuIiwiZXhwb3J0IGludGVyZmFjZSBWZXJzaW9uIHtcbiAgcmVhZG9ubHkgbWFqb3I6IG51bWJlcjtcbiAgcmVhZG9ubHkgbWlub3I6IG51bWJlcjtcbn1cblxuY29uc3QgZmlyc3RNYXRjaCA9IChyZWdleGVzOiBSZWdFeHBbXSwgczogc3RyaW5nKTogUmVnRXhwIHwgdW5kZWZpbmVkID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWdleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHJlZ2V4ZXNbaV07XG4gICAgaWYgKHgudGVzdChzKSkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCBmaW5kID0gKHJlZ2V4ZXM6IFJlZ0V4cFtdLCBhZ2VudDogc3RyaW5nKTogVmVyc2lvbiA9PiB7XG4gIGNvbnN0IHIgPSBmaXJzdE1hdGNoKHJlZ2V4ZXMsIGFnZW50KTtcbiAgaWYgKCFyKSB7XG4gICAgcmV0dXJuIHsgbWFqb3I6IDAsIG1pbm9yOiAwIH07XG4gIH1cbiAgY29uc3QgZ3JvdXAgPSAoaTogbnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIE51bWJlcihhZ2VudC5yZXBsYWNlKHIsICckJyArIGkpKTtcbiAgfTtcbiAgcmV0dXJuIG51KGdyb3VwKDEpLCBncm91cCgyKSk7XG59O1xuXG5jb25zdCBkZXRlY3QgPSAodmVyc2lvblJlZ2V4ZXM6IFJlZ0V4cFtdLCBhZ2VudDogYW55KTogVmVyc2lvbiA9PiB7XG4gIGNvbnN0IGNsZWFuZWRBZ2VudCA9IFN0cmluZyhhZ2VudCkudG9Mb3dlckNhc2UoKTtcblxuICBpZiAodmVyc2lvblJlZ2V4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVua25vd24oKTtcbiAgfVxuICByZXR1cm4gZmluZCh2ZXJzaW9uUmVnZXhlcywgY2xlYW5lZEFnZW50KTtcbn07XG5cbmNvbnN0IHVua25vd24gPSAoKTogVmVyc2lvbiA9PiB7XG4gIHJldHVybiBudSgwLCAwKTtcbn07XG5cbmNvbnN0IG51ID0gKG1ham9yOiBudW1iZXIsIG1pbm9yOiBudW1iZXIpOiBWZXJzaW9uID0+IHtcbiAgcmV0dXJuIHsgbWFqb3IsIG1pbm9yIH07XG59O1xuXG5leHBvcnQgY29uc3QgVmVyc2lvbiA9IHtcbiAgbnUsXG4gIGRldGVjdCxcbiAgdW5rbm93blxufTtcbiIsImltcG9ydCB7IEZ1biwgU3RyaW5ncyB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhdGZvcm1JbmZvIHtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSB2ZXJzaW9uUmVnZXhlczogUmVnRXhwW107XG4gIHJlYWRvbmx5IHNlYXJjaDogKHVhc3RyaW5nOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGJyYW5kPzogc3RyaW5nO1xufVxuXG5jb25zdCBub3JtYWxWZXJzaW9uUmVnZXggPSAvLio/dmVyc2lvblxcL1xcID8oWzAtOV0rKVxcLihbMC05XSspLiovO1xuXG5jb25zdCBjaGVja0NvbnRhaW5zID0gKHRhcmdldDogc3RyaW5nKSA9PiB7XG4gIHJldHVybiAodWFzdHJpbmc6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCB0YXJnZXQpO1xuICB9O1xufTtcblxuY29uc3QgYnJvd3NlcnM6IFBsYXRmb3JtSW5mb1tdID0gW1xuICAvLyBUaGlzIGlzIGxlZ2FjeSBFZGdlXG4gIHtcbiAgICBuYW1lOiAnRWRnZScsXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgLy4qP2VkZ2VcXC8gPyhbMC05XSspXFwuKFswLTldKykkLyBdLFxuICAgIHNlYXJjaDogKHVhc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ2VkZ2UvJykgJiYgU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ2Nocm9tZScpICYmIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdzYWZhcmknKSAmJiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnYXBwbGV3ZWJraXQnKTtcbiAgICB9XG4gIH0sXG4gIC8vIFRoaXMgaXMgR29vZ2xlIENocm9tZSBhbmQgQ2hyb21pdW0gRWRnZVxuICB7XG4gICAgbmFtZTogJ0Nocm9taXVtJyxcbiAgICBicmFuZDogJ0Nocm9taXVtJyxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/Y2hyb21lXFwvKFswLTldKylcXC4oWzAtOV0rKS4qLywgbm9ybWFsVmVyc2lvblJlZ2V4IF0sXG4gICAgc2VhcmNoOiAodWFzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnY2hyb21lJykgJiYgIVN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdjaHJvbWVmcmFtZScpO1xuICAgIH1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdJRScsXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgLy4qP21zaWVcXCA/KFswLTldKylcXC4oWzAtOV0rKS4qLywgLy4qP3J2OihbMC05XSspXFwuKFswLTldKykuKi8gXSxcbiAgICBzZWFyY2g6ICh1YXN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdtc2llJykgfHwgU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ3RyaWRlbnQnKTtcbiAgICB9XG4gIH0sXG4gIC8vIElOVkVTVElHQVRFOiBJcyB0aGlzIHN0aWxsIHRoZSBPcGVyYSB1c2VyIGFnZW50P1xuICB7XG4gICAgbmFtZTogJ09wZXJhJyxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyBub3JtYWxWZXJzaW9uUmVnZXgsIC8uKj9vcGVyYVxcLyhbMC05XSspXFwuKFswLTldKykuKi8gXSxcbiAgICBzZWFyY2g6IGNoZWNrQ29udGFpbnMoJ29wZXJhJylcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdGaXJlZm94JyxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/ZmlyZWZveFxcL1xcID8oWzAtOV0rKVxcLihbMC05XSspLiovIF0sXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCdmaXJlZm94JylcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdTYWZhcmknLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIG5vcm1hbFZlcnNpb25SZWdleCwgLy4qP2NwdSBvcyAoWzAtOV0rKV8oWzAtOV0rKS4qLyBdLFxuICAgIHNlYXJjaDogKHVhc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gKFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdzYWZhcmknKSB8fCBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnbW9iaWxlLycpKSAmJiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnYXBwbGV3ZWJraXQnKTtcbiAgICB9XG4gIH1cbl07XG5cbmNvbnN0IG9zZXM6IFBsYXRmb3JtSW5mb1tdID0gW1xuICB7XG4gICAgbmFtZTogJ1dpbmRvd3MnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnd2luJyksXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgLy4qP3dpbmRvd3NcXCBudFxcID8oWzAtOV0rKVxcLihbMC05XSspLiovIF1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdpT1MnLFxuICAgIHNlYXJjaDogKHVhc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ2lwaG9uZScpIHx8IFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdpcGFkJyk7XG4gICAgfSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/dmVyc2lvblxcL1xcID8oWzAtOV0rKVxcLihbMC05XSspLiovLCAvLipjcHUgb3MgKFswLTldKylfKFswLTldKykuKi8sIC8uKmNwdSBpcGhvbmUgb3MgKFswLTldKylfKFswLTldKykuKi8gXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0FuZHJvaWQnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnYW5kcm9pZCcpLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIC8uKj9hbmRyb2lkXFwgPyhbMC05XSspXFwuKFswLTldKykuKi8gXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ21hY09TJyxcbiAgICBzZWFyY2g6IGNoZWNrQ29udGFpbnMoJ21hYyBvcyB4JyksXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgLy4qP21hY1xcIG9zXFwgeFxcID8oWzAtOV0rKV8oWzAtOV0rKS4qLyBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGludXgnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnbGludXgnKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyBdXG4gIH0sXG4gIHsgbmFtZTogJ1NvbGFyaXMnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnc3Vub3MnKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnRnJlZUJTRCcsXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCdmcmVlYnNkJyksXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0Nocm9tZU9TJyxcbiAgICBzZWFyY2g6IGNoZWNrQ29udGFpbnMoJ2Nyb3MnKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/Y2hyb21lXFwvKFswLTldKylcXC4oWzAtOV0rKS4qLyBdXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBQbGF0Zm9ybUluZm8gPSB7XG4gIGJyb3dzZXJzOiBGdW4uY29uc3RhbnQoYnJvd3NlcnMpLFxuICBvc2VzOiBGdW4uY29uc3RhbnQob3Nlcylcbn07XG4iLCJpbXBvcnQgeyBSZXNvbHZlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuY29uc3QgdW5zYWZlID0gPFQ+KG5hbWU6IHN0cmluZywgc2NvcGU/OiB7fSk6IFQgfCB1bmRlZmluZWQgPT4ge1xuICByZXR1cm4gUmVzb2x2ZS5yZXNvbHZlKG5hbWUsIHNjb3BlKTtcbn07XG5cbmNvbnN0IGdldE9yRGllID0gPFQ+KG5hbWU6IHN0cmluZywgc2NvcGU/OiB7fSk6IFQgPT4ge1xuICBjb25zdCBhY3R1YWwgPSB1bnNhZmU8VD4obmFtZSwgc2NvcGUpO1xuXG4gIGlmIChhY3R1YWwgPT09IHVuZGVmaW5lZCB8fCBhY3R1YWwgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcgbm90IGF2YWlsYWJsZSBvbiB0aGlzIGJyb3dzZXInKTtcbiAgfVxuICByZXR1cm4gYWN0dWFsO1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0T3JEaWVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwsIE9wdGlvbmFscyB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENzcywgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IGdldEF0dHJWYWx1ZSB9IGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ2VsbEVsZW1lbnQsIENvbXBFbG0sIFJvd0VsZW1lbnQgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJvd0RhdGEge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Um93RWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbERhdGEge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBjb2xzcGFuOiBudW1iZXI7XG4gIHJlYWRvbmx5IHJvd3NwYW46IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0b3JzIHtcbiAgcmVhZG9ubHkgY2VsbDogKGNlbGxEYXRhOiBDZWxsRGF0YSkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgcm93OiAocm93RGF0YTogUm93RGF0YSkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+O1xuICByZWFkb25seSByZXBsYWNlOiAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgdGFnOiAndGQnIHwgJ3RoJywgYXR0cnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBudWxsPikgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgZ2FwOiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBjb2xHYXA6ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDb2xFbGVtZW50PjtcbiAgcmVhZG9ubHkgY29sOiAocHJldjogQ2VsbERhdGEpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDb2xFbGVtZW50PjtcbiAgcmVhZG9ubHkgY29sZ3JvdXA6IChwcmV2OiBSb3dEYXRhKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2ltcGxlR2VuZXJhdG9ycyBleHRlbmRzIEdlbmVyYXRvcnMge1xuICByZWFkb25seSBjZWxsOiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSByb3c6ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50PjtcbiAgcmVhZG9ubHkgcmVwbGFjZTogKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IGdhcDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgY29sOiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbGdyb3VwOiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdG9yc1dyYXBwZXIge31cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXIge1xuICByZWFkb25seSBnZXRPckluaXQ6IDxUIGV4dGVuZHMgUm93RWxlbWVudCB8IENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIGNvbXBhcmF0b3I6IENvbXBFbG0pID0+IFN1Z2FyRWxlbWVudDxUPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0b3JzVHJhbnNmb3JtIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXIge1xuICByZWFkb25seSByZXBsYWNlT3JJbml0OiA8VCBleHRlbmRzIFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+LCBjb21wYXJhdG9yOiBDb21wRWxtKSA9PiBTdWdhckVsZW1lbnQ8VD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdG9yc01lcmdpbmcgZXh0ZW5kcyBHZW5lcmF0b3JzV3JhcHBlciB7XG4gIHJlYWRvbmx5IHVubWVyZ2U6IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBtZXJnZTogKGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pID0+ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG59XG5cbmludGVyZmFjZSBSZWNlbnQge1xuICByZWFkb25seSBpdGVtOiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSByZXBsYWNlbWVudDogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50Pjtcbn1cblxuaW50ZXJmYWNlIEl0ZW0ge1xuICByZWFkb25seSBpdGVtOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBzdWI6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG59XG5cbmNvbnN0IGlzQ29sID0gU3VnYXJOb2RlLmlzVGFnKCdjb2wnKTtcbmNvbnN0IGlzQ29sZ3JvdXAgPSBTdWdhck5vZGUuaXNUYWcoJ2NvbGdyb3VwJyk7XG5cbmNvbnN0IGlzUm93ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50IHwgQ2VsbEVsZW1lbnQ+KTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8Um93RWxlbWVudD4gPT5cbiAgU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkgPT09ICd0cicgfHwgaXNDb2xncm91cChlbGVtZW50KTtcblxuY29uc3QgZWxlbWVudFRvRGF0YSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+KTogQ2VsbERhdGEgPT4ge1xuICBjb25zdCBjb2xzcGFuID0gZ2V0QXR0clZhbHVlKGVsZW1lbnQsICdjb2xzcGFuJywgMSk7XG4gIGNvbnN0IHJvd3NwYW4gPSBnZXRBdHRyVmFsdWUoZWxlbWVudCwgJ3Jvd3NwYW4nLCAxKTtcbiAgcmV0dXJuIHtcbiAgICBlbGVtZW50LFxuICAgIGNvbHNwYW4sXG4gICAgcm93c3BhblxuICB9O1xufTtcblxuLy8gbm90ZSB0aGF0IGB0b0RhdGFgIHNlZW1zIHRvIGJlIG9ubHkgZm9yIHRlc3RpbmdcbmNvbnN0IG1vZGlmaWNhdGlvbiA9IChnZW5lcmF0b3JzOiBHZW5lcmF0b3JzLCB0b0RhdGEgPSBlbGVtZW50VG9EYXRhKTogR2VuZXJhdG9yc01vZGlmaWNhdGlvbiA9PiB7XG5cbiAgY29uc3QgbnVDZWxsID0gKGRhdGE6IENlbGxEYXRhKSA9PlxuICAgIGlzQ29sKGRhdGEuZWxlbWVudCkgPyBnZW5lcmF0b3JzLmNvbChkYXRhKSA6IGdlbmVyYXRvcnMuY2VsbChkYXRhKTtcblxuICBjb25zdCBudVJvdyA9IChkYXRhOiBSb3dEYXRhKSA9PlxuICAgIGlzQ29sZ3JvdXAoZGF0YS5lbGVtZW50KSA/IGdlbmVyYXRvcnMuY29sZ3JvdXAoZGF0YSkgOiBnZW5lcmF0b3JzLnJvdyhkYXRhKTtcblxuICBjb25zdCBhZGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4pID0+IHtcbiAgICBpZiAoaXNSb3coZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBudVJvdyh7IGVsZW1lbnQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBlbGVtZW50IGFzIFN1Z2FyRWxlbWVudDxDZWxsRWxlbWVudD47XG4gICAgICBjb25zdCByZXBsYWNlbWVudCA9IG51Q2VsbCh0b0RhdGEoY2VsbCkpO1xuICAgICAgcmVjZW50ID0gT3B0aW9uYWwuc29tZSh7IGl0ZW06IGNlbGwsIHJlcGxhY2VtZW50IH0pO1xuICAgICAgcmV0dXJuIHJlcGxhY2VtZW50O1xuICAgIH1cbiAgfTtcblxuICBsZXQgcmVjZW50ID0gT3B0aW9uYWwubm9uZTxSZWNlbnQ+KCk7XG4gIGNvbnN0IGdldE9ySW5pdCA9IDxUIGV4dGVuZHMgUm93RWxlbWVudCB8IENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBTdWdhckVsZW1lbnQ8VD4gPT4ge1xuICAgIHJldHVybiByZWNlbnQuZm9sZCgoKSA9PiB7XG4gICAgICByZXR1cm4gYWRkKGVsZW1lbnQpO1xuICAgIH0sIChwKSA9PiB7XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihlbGVtZW50LCBwLml0ZW0pID8gcC5yZXBsYWNlbWVudCA6IGFkZChlbGVtZW50KTtcbiAgICB9KSBhcyBTdWdhckVsZW1lbnQ8VD47XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRPckluaXRcbiAgfTtcbn07XG5cbmNvbnN0IHRyYW5zZm9ybSA9ICh0YWc6ICd0ZCcgfCAndGgnKSA9PiB7XG4gIHJldHVybiAoZ2VuZXJhdG9yczogR2VuZXJhdG9ycyk6IEdlbmVyYXRvcnNUcmFuc2Zvcm0gPT4ge1xuICAgIGNvbnN0IGxpc3Q6IEl0ZW1bXSA9IFtdO1xuXG4gICAgY29uc3QgZmluZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Um93RWxlbWVudCB8IENlbGxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSkgPT4ge1xuICAgICAgcmV0dXJuIEFyci5maW5kKGxpc3QsICh4KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yKHguaXRlbSwgZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgbWFrZU5ldyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB7XG4gICAgICAvLyBFbnN1cmUgc2NvcGUgaXMgbmV2ZXIgc2V0IG9uIGEgdGQgZWxlbWVudCBhcyBpdCdzIGEgZGVwcmVjYXRlZCBhdHRyaWJ1dGVcbiAgICAgIGNvbnN0IGF0dHJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHRhZyA9PT0gJ3RkJyA/IHsgc2NvcGU6IG51bGwgfSA6IHt9O1xuICAgICAgY29uc3QgY2VsbCA9IGdlbmVyYXRvcnMucmVwbGFjZShlbGVtZW50LCB0YWcsIGF0dHJzKTtcbiAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgIGl0ZW06IGVsZW1lbnQsXG4gICAgICAgIHN1YjogY2VsbFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY2VsbDtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVwbGFjZU9ySW5pdCA9IDxUIGV4dGVuZHMgUm93RWxlbWVudCB8IENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBTdWdhckVsZW1lbnQ8VD4gPT4ge1xuICAgICAgaWYgKGlzUm93KGVsZW1lbnQpIHx8IGlzQ29sKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGVsZW1lbnQgYXMgU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgICAgICAgcmV0dXJuIGZpbmQoY2VsbCwgY29tcGFyYXRvcikuZm9sZCgoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG1ha2VOZXcoY2VsbCk7XG4gICAgICAgIH0sIChwKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoZWxlbWVudCwgcC5pdGVtKSA/IHAuc3ViIDogbWFrZU5ldyhjZWxsKTtcbiAgICAgICAgfSkgYXMgU3VnYXJFbGVtZW50PFQ+O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVwbGFjZU9ySW5pdFxuICAgIH07XG4gIH07XG59O1xuXG5jb25zdCBnZXRTY29wZUF0dHJpYnV0ZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PlxuICBBdHRyaWJ1dGUuZ2V0T3B0KGNlbGwsICdzY29wZScpLm1hcChcbiAgICAvLyBBdHRyaWJ1dGUgY2FuIGJlIGNvbCwgY29sZ3JvdXAsIHJvdywgYW5kIHJvd2dyb3VwLlxuICAgIC8vIEFzIGNvbCBhbmQgY29sZ3JvdXAgYXJlIHRvIGJlIHRyZWF0ZWQgYXMgaWYgdGhleSBhcmUgdGhlIHNhbWUsIGxvYiBvZmYgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgdGhyZWUgY2hhcmFjdGVycyBhbmQgdGhlcmUgaXMgbm8gZGlmZmVyZW5jZS5cbiAgICAoYXR0cmlidXRlKSA9PiBhdHRyaWJ1dGUuc3Vic3RyKDAsIDMpXG4gICk7XG5cbmNvbnN0IG1lcmdpbmcgPSAoZ2VuZXJhdG9yczogR2VuZXJhdG9ycyk6IEdlbmVyYXRvcnNNZXJnaW5nID0+IHtcbiAgY29uc3QgdW5tZXJnZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3Qgc2NvcGUgPSBnZXRTY29wZUF0dHJpYnV0ZShjZWxsKTtcblxuICAgIHNjb3BlLmVhY2goKGF0dHJpYnV0ZSkgPT4gQXR0cmlidXRlLnNldChjZWxsLCAnc2NvcGUnLCBhdHRyaWJ1dGUpKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBnZW5lcmF0b3JzLmNlbGwoe1xuICAgICAgICBlbGVtZW50OiBjZWxsLFxuICAgICAgICBjb2xzcGFuOiAxLFxuICAgICAgICByb3dzcGFuOiAxXG4gICAgICB9KTtcbiAgICAgIC8vIFJlbW92ZSBhbnkgd2lkdGggY2FsY3VsYXRpb25zIGJlY2F1c2UgdGhleSBhcmUgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgICAgQ3NzLnJlbW92ZShyYXcsICd3aWR0aCcpO1xuICAgICAgQ3NzLnJlbW92ZShjZWxsLCAnd2lkdGgnKTtcblxuICAgICAgc2NvcGUuZWFjaCgoYXR0cmlidXRlKSA9PiBBdHRyaWJ1dGUuc2V0KHJhdywgJ3Njb3BlJywgYXR0cmlidXRlKSk7XG5cbiAgICAgIHJldHVybiByYXc7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBtZXJnZSA9IChjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKSA9PiB7XG4gICAgY29uc3QgZ2V0U2NvcGVQcm9wZXJ0eSA9ICgpID0+IHtcblxuICAgICAgY29uc3Qgc3RyaW5nQXR0cmlidXRlcyA9IE9wdGlvbmFscy5jYXQoXG4gICAgICAgIEFyci5tYXAoY2VsbHMsIGdldFNjb3BlQXR0cmlidXRlKVxuICAgICAgKTtcblxuICAgICAgaWYgKHN0cmluZ0F0dHJpYnV0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lPHN0cmluZz4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJhc2VTY29wZSA9IHN0cmluZ0F0dHJpYnV0ZXNbMF07XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IFsgJ3JvdycsICdjb2wnIF07XG5cbiAgICAgICAgY29uc3QgaXNNaXhlZCA9IEFyci5leGlzdHMoc3RyaW5nQXR0cmlidXRlcywgKGF0dHJpYnV0ZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGUgIT09IGJhc2VTY29wZSAmJiBBcnIuY29udGFpbnMoc2NvcGVzLCBhdHRyaWJ1dGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaXNNaXhlZCA/IE9wdGlvbmFsLm5vbmU8c3RyaW5nPigpIDogT3B0aW9uYWwuZnJvbShiYXNlU2NvcGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDc3MucmVtb3ZlKGNlbGxzWzBdLCAnd2lkdGgnKTtcblxuICAgIGdldFNjb3BlUHJvcGVydHkoKS5mb2xkKFxuICAgICAgKCkgPT4gQXR0cmlidXRlLnJlbW92ZShjZWxsc1swXSwgJ3Njb3BlJyksXG4gICAgICAoYXR0cmlidXRlKSA9PiBBdHRyaWJ1dGUuc2V0KGNlbGxzWzBdLCAnc2NvcGUnLCBhdHRyaWJ1dGUgKyAnZ3JvdXAnKVxuICAgICk7XG5cbiAgICByZXR1cm4gRnVuLmNvbnN0YW50KGNlbGxzWzBdKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHVubWVyZ2UsXG4gICAgbWVyZ2VcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBHZW5lcmF0b3JzID0ge1xuICBtb2RpZmljYXRpb24sXG4gIHRyYW5zZm9ybSxcbiAgbWVyZ2luZ1xufTtcbiIsImltcG9ydCB7IEFyciwgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxudHlwZSBUYWJsZVJlc2l6ZXIgPSAoZGVsdGE6IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBSZXNpemVCZWhhdmlvdXIge1xuICByZWFkb25seSByZXNpemVUYWJsZTogKHJlc2l6ZXI6IFRhYmxlUmVzaXplciwgZGVsdGE6IG51bWJlciwgaXNMYXN0Q29sdW1uOiBib29sZWFuKSA9PiB2b2lkO1xuICByZWFkb25seSBjbGFtcFRhYmxlRGVsdGE6IChzaXplczogbnVtYmVyW10sIGluZGV4OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIsIGlzTGFzdENvbHVtbjogYm9vbGVhbikgPT4gbnVtYmVyO1xuICByZWFkb25seSBjYWxjTGVmdEVkZ2VEZWx0YXM6IChzaXplczogbnVtYmVyW10sIGluZGV4OiBudW1iZXIsIG5leHRJbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc1JlbGF0aXZlOiBib29sZWFuKSA9PiBudW1iZXJbXTtcbiAgcmVhZG9ubHkgY2FsY01pZGRsZURlbHRhczogKHNpemVzOiBudW1iZXJbXSwgcHJldmlvdXNJbmRleDogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBuZXh0SW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4gbnVtYmVyW107XG4gIHJlYWRvbmx5IGNhbGNSaWdodEVkZ2VEZWx0YXM6IChzaXplczogbnVtYmVyW10sIHByZXZpb3VzSW5kZXg6IG51bWJlciwgaW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4gbnVtYmVyW107XG4gIHJlYWRvbmx5IGNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzOiAoc2l6ZXM6IG51bWJlcltdLCB0b3RhbDogbnVtYmVyLCBwaXhlbERlbHRhOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IHsgZGVsdGE6IG51bWJlcjsgbmV3U2l6ZXM6IG51bWJlcltdIH07XG59XG5cbmNvbnN0IHplcm8gPSAoYXJyYXk6IG51bWJlcltdKSA9PiBBcnIubWFwKGFycmF5LCBGdW4uY29uc3RhbnQoMCkpO1xuXG5jb25zdCBzdXJyb3VuZCA9IChzaXplczogbnVtYmVyW10sIHN0YXJ0SW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlciwgcmVzdWx0czogbnVtYmVyW10sIGY6IChhcnJheTogbnVtYmVyW10pID0+IG51bWJlcltdKSA9PlxuICBmKHNpemVzLnNsaWNlKDAsIHN0YXJ0SW5kZXgpKS5jb25jYXQocmVzdWx0cykuY29uY2F0KGYoc2l6ZXMuc2xpY2UoZW5kSW5kZXgpKSk7XG5cbi8vIENsYW1wIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGRlbHRhIHNvIHRoYXQgYSBjb2x1bW4vcm93IGNhbm5vdCBiZSByZWR1Y2VkIHBhc3QgaXRzIG1pbiBzaXplXG5jb25zdCBjbGFtcERlbHRhSGVscGVyID0gKHByZWRpY2F0ZTogKGRlbHRhOiBudW1iZXIpID0+IGJvb2xlYW4pID0+IChzaXplczogbnVtYmVyW10sIGluZGV4OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIpID0+IHtcbiAgaWYgKCFwcmVkaWNhdGUoZGVsdGEpKSB7XG4gICAgcmV0dXJuIGRlbHRhO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG5ld1NpemUgPSBNYXRoLm1heChtaW5DZWxsU2l6ZSwgc2l6ZXNbaW5kZXhdIC0gTWF0aC5hYnMoZGVsdGEpKTtcbiAgICBjb25zdCBkaWZmID0gTWF0aC5hYnMobmV3U2l6ZSAtIHNpemVzW2luZGV4XSk7XG4gICAgcmV0dXJuIGRlbHRhID49IDAgPyBkaWZmIDogLWRpZmY7XG4gIH1cbn07XG5cbmNvbnN0IGNsYW1wTmVnYXRpdmVEZWx0YSA9IGNsYW1wRGVsdGFIZWxwZXIoKGRlbHRhKSA9PiBkZWx0YSA8IDApO1xuY29uc3QgY2xhbXBEZWx0YSA9IGNsYW1wRGVsdGFIZWxwZXIoRnVuLmFsd2F5cyk7XG5cbi8vIFByZXNlcnZlIHRoZSBzaXplIG9mIHRoZSBjb2x1bW5zL3Jvd3MgYW5kIGFkanVzdCB0aGUgdGFibGUgc2l6ZVxuY29uc3QgcmVzaXplVGFibGUgPSAoKTogUmVzaXplQmVoYXZpb3VyID0+IHtcbiAgY29uc3QgY2FsY0ZpeGVkRGVsdGFzID0gKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgY2xhbXBlZERlbHRhID0gY2xhbXBOZWdhdGl2ZURlbHRhKHNpemVzLCBpbmRleCwgZGVsdGEsIG1pbkNlbGxTaXplKTtcbiAgICByZXR1cm4gc3Vycm91bmQoc2l6ZXMsIGluZGV4LCBuZXh0ICsgMSwgWyBjbGFtcGVkRGVsdGEsIDAgXSwgemVybyk7XG4gIH07XG5cbiAgLy8gQ2FsY3VsYXRlIGRlbHRhIGZvciBhZGp1c3RlZCBjb2x1bW5cbiAgLy8gQWxzbyBuZWVkIHRvIGNhbGN1bGF0ZSBkZWx0YXMgZm9yIGFsbCBvdGhlciBjb2x1bW5zL3Jvd3MgdG8gZW5zdXJlIHRoZXkgc3RheSBhdCB0aGUgc2FtZSB2aXN1YWwgd2lkdGgvaGVpZ2h0XG4gIC8vIHdoZW4gdGhlIHRhYmxlIHdpZHRoL2hlaWdodCBpcyBhZGp1c3RlZFxuICBjb25zdCBjYWxjUmVsYXRpdmVEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgLy8gQVNTVU1QVElPTjogVGhlIGRlbHRhIHdpbGwgYmUgYSBwZXJjZW50YWdlLiBUaGlzIG1heSBub3QgYmUgY29ycmVjdCBpZiBvdGhlciByZWxhdGl2ZSBzaXppbmcgaXMgYWRkZWQsIHNvIHdlIHByb2JhYmx5XG4gICAgLy8gbmVlZCBhIGJldHRlciB3YXkgdG8gY2FsYyB0aGUgcmF0aW8uXG4gICAgY29uc3QgcmF0aW8gPSAoMTAwICsgZGVsdGEpIC8gMTAwO1xuICAgIGNvbnN0IG5ld1RoaXMgPSBNYXRoLm1heChtaW5DZWxsU2l6ZSwgKHNpemVzW2luZGV4XSArIGRlbHRhKSAvIHJhdGlvKTtcbiAgICByZXR1cm4gQXJyLm1hcChzaXplcywgKHNpemUsIGlkeCkgPT4ge1xuICAgICAgY29uc3QgbmV3U2l6ZSA9IGlkeCA9PT0gaW5kZXggPyBuZXdUaGlzIDogc2l6ZSAvIHJhdGlvO1xuICAgICAgcmV0dXJuIG5ld1NpemUgLSBzaXplO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENhbGN1bGF0aW9ucyBmb3IgdGhlIGlubmVyIGNvbHVtbnMvcm93c1xuICBjb25zdCBjYWxjTGVmdEVkZ2VEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNSZWxhdGl2ZSkge1xuICAgICAgcmV0dXJuIGNhbGNSZWxhdGl2ZURlbHRhcyhzaXplcywgaW5kZXgsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjYWxjRml4ZWREZWx0YXMoc2l6ZXMsIGluZGV4LCBuZXh0LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjYWxjTWlkZGxlRGVsdGFzID0gKHNpemVzOiBudW1iZXJbXSwgX3ByZXY6IG51bWJlciwgaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc1JlbGF0aXZlOiBib29sZWFuKSA9PlxuICAgIGNhbGNMZWZ0RWRnZURlbHRhcyhzaXplcywgaW5kZXgsIG5leHQsIGRlbHRhLCBtaW5DZWxsU2l6ZSwgaXNSZWxhdGl2ZSk7XG5cbiAgY29uc3QgcmVzaXplVGFibGUgPSAocmVzaXplcjogVGFibGVSZXNpemVyLCBkZWx0YTogbnVtYmVyKSA9PlxuICAgIHJlc2l6ZXIoZGVsdGEpO1xuXG4gIC8vIENhbGN1bGF0aW9ucyBmb3IgdGhlIGxhc3QgY29sdW1uL3JvdyByZXNpemVyXG4gIGNvbnN0IGNhbGNSaWdodEVkZ2VEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBfcHJldjogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc1JlbGF0aXZlOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzUmVsYXRpdmUpIHtcbiAgICAgIHJldHVybiBjYWxjUmVsYXRpdmVEZWx0YXMoc2l6ZXMsIGluZGV4LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjbGFtcGVkRGVsdGEgPSBjbGFtcE5lZ2F0aXZlRGVsdGEoc2l6ZXMsIGluZGV4LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuICAgICAgcmV0dXJuIHplcm8oc2l6ZXMuc2xpY2UoMCwgaW5kZXgpKS5jb25jYXQoWyBjbGFtcGVkRGVsdGEgXSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzID0gKHNpemVzOiBudW1iZXJbXSwgdG90YWxXaWR0aDogbnVtYmVyLCBwaXhlbERlbHRhOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNSZWxhdGl2ZSkge1xuICAgICAgY29uc3QgdGFibGVXaWR0aCA9IHRvdGFsV2lkdGggKyBwaXhlbERlbHRhO1xuICAgICAgY29uc3QgcmF0aW8gPSB0YWJsZVdpZHRoIC8gdG90YWxXaWR0aDtcbiAgICAgIGNvbnN0IG5ld1NpemVzID0gQXJyLm1hcChzaXplcywgKHNpemUpID0+IHNpemUgLyByYXRpbyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZWx0YTogKHJhdGlvICogMTAwKSAtIDEwMCxcbiAgICAgICAgbmV3U2l6ZXMsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZWx0YTogcGl4ZWxEZWx0YSxcbiAgICAgICAgbmV3U2l6ZXM6IHNpemVzLFxuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZXNpemVUYWJsZSxcbiAgICBjbGFtcFRhYmxlRGVsdGE6IGNsYW1wTmVnYXRpdmVEZWx0YSxcbiAgICBjYWxjTGVmdEVkZ2VEZWx0YXMsXG4gICAgY2FsY01pZGRsZURlbHRhcyxcbiAgICBjYWxjUmlnaHRFZGdlRGVsdGFzLFxuICAgIGNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzLFxuICB9O1xufTtcblxuLy8gRGlzdHJpYnV0ZSB0aGUgY29sdW1uL3Jvd3MgYW5kIHRyeSB0byBwcmVzZXJ2ZSB0aGUgdGFibGUgc2l6ZVxuY29uc3QgcHJlc2VydmVUYWJsZSA9ICgpOiBSZXNpemVCZWhhdmlvdXIgPT4ge1xuICAvLyBDYWxjdWxhdGlvbnMgZm9yIHRoZSBpbm5lciBjb2x1bW5zL3Jvd3NcbiAgY29uc3QgY2FsY0xlZnRFZGdlRGVsdGFzID0gKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgaWR4ID0gZGVsdGEgPj0gMCA/IG5leHQgOiBpbmRleDtcbiAgICBjb25zdCBjbGFtcGVkRGVsdGEgPSBjbGFtcERlbHRhKHNpemVzLCBpZHgsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgLy8gbmVnYXRpdmUgZGVsdGEgLT4gZGVsdGFzIGJlY29tZXMgWyBuZWcsIHBvcyBdLCBwb3NpdGl2ZSBkZWx0YSAtPiBkZWx0YXMgYmVjb21lcyBbIHBvcywgbmVnIF1cbiAgICByZXR1cm4gc3Vycm91bmQoc2l6ZXMsIGluZGV4LCBuZXh0ICsgMSwgWyBjbGFtcGVkRGVsdGEsIC1jbGFtcGVkRGVsdGEgXSwgemVybyk7XG4gIH07XG5cbiAgY29uc3QgY2FsY01pZGRsZURlbHRhcyA9IChzaXplczogbnVtYmVyW10sIF9wcmV2OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIG5leHQ6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlcikgPT5cbiAgICBjYWxjTGVmdEVkZ2VEZWx0YXMoc2l6ZXMsIGluZGV4LCBuZXh0LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuXG4gIGNvbnN0IHJlc2l6ZVRhYmxlID0gKHJlc2l6ZXI6IFRhYmxlUmVzaXplciwgZGVsdGE6IG51bWJlciwgaXNMYXN0Q29sdW1uOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGlzTGFzdENvbHVtbikge1xuICAgICAgcmVzaXplcihkZWx0YSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhbGN1bGF0aW9ucyBmb3IgdGhlIGxhc3QgY29sdW1uL3JvdyByZXNpemVyXG4gIGNvbnN0IGNhbGNSaWdodEVkZ2VEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBfcHJldjogbnVtYmVyLCBfaW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgX21pbkNlbGxTaXplOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNSZWxhdGl2ZSkge1xuICAgICAgcmV0dXJuIHplcm8oc2l6ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEaXN0cmlidXRlIHRoZSBkZWx0YSBhbW9uZ3N0IGFsbCBvZiB0aGUgY29sdW1ucy9yb3dzXG4gICAgICBjb25zdCBkaWZmID0gZGVsdGEgLyBzaXplcy5sZW5ndGg7XG4gICAgICByZXR1cm4gQXJyLm1hcChzaXplcywgRnVuLmNvbnN0YW50KGRpZmYpKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xhbXBUYWJsZURlbHRhID0gKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlciwgaXNMYXN0Q29sdW1uOiBib29sZWFuKSA9PiB7XG4gICAgLy8gRG9uJ3QgY2xhbXAgdGhlIGxhc3QgcmVzaXplciB1c2luZyBub3JtYWwgbWV0aG9kc1xuICAgIC8vIE5lZWQgdG8gYWxsb3cgdGFibGUgd2lkdGggdG8gYmUgcmVkdWNlZCBwYXN0IHRoZSBsYXN0IGNvbHVtbiBwb3NpdGlvbiB0byBhbGxvdyBmb3IgZGlzdHJpYnV0aXZlIHJlc2l6aW5nXG4gICAgaWYgKGlzTGFzdENvbHVtbikge1xuICAgICAgaWYgKGRlbHRhID49IDApIHtcbiAgICAgICAgcmV0dXJuIGRlbHRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2xhbXAgZGVsdGEgc28gdGhhdCBub25lIG9mIHRoZSBjb2x1bW5zL3Jvd3MgY2FuIHJlZHVjZSBiZWxvdyB0aGVpciBtaW4gc2l6ZVxuICAgICAgICBjb25zdCBtYXhEZWx0YSA9IEFyci5mb2xkbChzaXplcywgKGEsIGIpID0+IGEgKyBiIC0gbWluQ2VsbFNpemUsIDApO1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoLW1heERlbHRhLCBkZWx0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjbGFtcE5lZ2F0aXZlRGVsdGEoc2l6ZXMsIGluZGV4LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjYWxjUmVkZXN0cmlidXRlZFdpZHRocyA9IChzaXplczogbnVtYmVyW10sIF90b3RhbFdpZHRoOiBudW1iZXIsIF9waXhlbERlbHRhOiBudW1iZXIsIF9pc1JlbGF0aXZlOiBib29sZWFuKSA9PiAoe1xuICAgIGRlbHRhOiAwLFxuICAgIG5ld1NpemVzOiBzaXplcyxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICByZXNpemVUYWJsZSxcbiAgICBjbGFtcFRhYmxlRGVsdGEsXG4gICAgY2FsY0xlZnRFZGdlRGVsdGFzLFxuICAgIGNhbGNNaWRkbGVEZWx0YXMsXG4gICAgY2FsY1JpZ2h0RWRnZURlbHRhcyxcbiAgICBjYWxjUmVkZXN0cmlidXRlZFdpZHRoc1xuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgcmVzaXplVGFibGUsXG4gIHByZXNlcnZlVGFibGVcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50LCBSb3dFbGVtZW50LCBSb3dDZWxsIH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24ge1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb25zIHtcbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcltdO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyaWQge1xuICByZWFkb25seSByb3dzOiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzIHtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvb3JkcyB7XG4gIHJlYWRvbmx5IHg6IG51bWJlcjtcbiAgcmVhZG9ubHkgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldGFpbDxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQgPSBDZWxsRWxlbWVudD4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD47XG4gIHJlYWRvbmx5IHJvd3NwYW46IG51bWJlcjtcbiAgcmVhZG9ubHkgY29sc3BhbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldGFpbE5ldzxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQgPSBDZWxsRWxlbWVudD4gZXh0ZW5kcyBEZXRhaWw8VD4ge1xuICByZWFkb25seSBpc05ldzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXRhaWxFeHQgZXh0ZW5kcyBEZXRhaWw8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbjogbnVtYmVyO1xuICByZWFkb25seSBpc0xvY2tlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgU2VjdGlvbiA9ICd0Zm9vdCcgfCAndGhlYWQnIHwgJ3Rib2R5JyB8ICdjb2xncm91cCc7XG5jb25zdCB2YWxpZFNlY3Rpb25MaXN0OiBTZWN0aW9uW10gPSBbICd0Zm9vdCcsICd0aGVhZCcsICd0Ym9keScsICdjb2xncm91cCcgXTtcblxuZXhwb3J0IGludGVyZmFjZSBSb3dEZXRhaWw8VCBleHRlbmRzIERldGFpbDxSb3dDZWxsPFI+PiwgUiBleHRlbmRzIFJvd0VsZW1lbnQgPSBSb3dFbGVtZW50PiB7XG4gIHJlYWRvbmx5IGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPjtcbiAgcmVhZG9ubHkgY2VsbHM6IFRbXTtcbiAgcmVhZG9ubHkgc2VjdGlvbjogU2VjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb3dEZXRhaWxOZXc8VCBleHRlbmRzIERldGFpbDxSb3dDZWxsPFI+PiwgUiBleHRlbmRzIFJvd0VsZW1lbnQgPSBSb3dFbGVtZW50PiBleHRlbmRzIFJvd0RldGFpbDxULCBSPiB7XG4gIHJlYWRvbmx5IGlzTmV3OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvd0NlbGxzPFIgZXh0ZW5kcyBSb3dFbGVtZW50ID0gUm93RWxlbWVudD4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Uj47XG4gIHJlYWRvbmx5IGNlbGxzOiBFbGVtZW50TmV3PFJvd0NlbGw8Uj4+W107XG4gIHJlYWRvbmx5IHNlY3Rpb246IFNlY3Rpb247XG4gIHJlYWRvbmx5IGlzTmV3OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnROZXc8VCBleHRlbmRzIENlbGxFbGVtZW50ID0gQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+O1xuICByZWFkb25seSBpc05ldzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNMb2NrZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+O1xuICByZWFkb25seSBjb2xzcGFuOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uRXh0IGV4dGVuZHMgQ29sdW1uIHtcbiAgcmVhZG9ubHkgY29sdW1uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sZ3JvdXA8VCBleHRlbmRzIENvbHVtbj4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbHVtbnM6IFRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb3VuZHMge1xuICByZWFkb25seSBzdGFydFJvdzogbnVtYmVyO1xuICByZWFkb25seSBzdGFydENvbDogbnVtYmVyO1xuICByZWFkb25seSBmaW5pc2hSb3c6IG51bWJlcjtcbiAgcmVhZG9ubHkgZmluaXNoQ29sOiBudW1iZXI7XG59XG5cbmNvbnN0IGlzVmFsaWRTZWN0aW9uID0gKHBhcmVudE5hbWU6IHN0cmluZyk6IHBhcmVudE5hbWUgaXMgU2VjdGlvbiA9PlxuICBBcnIuY29udGFpbnModmFsaWRTZWN0aW9uTGlzdCwgcGFyZW50TmFtZSk7XG5cbmNvbnN0IGRpbWVuc2lvbiA9ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IERpbWVuc2lvbiA9PiAoe1xuICB3aWR0aCxcbiAgaGVpZ2h0XG59KTtcblxuY29uc3QgZGltZW5zaW9ucyA9ICh3aWR0aDogbnVtYmVyW10sIGhlaWdodDogbnVtYmVyW10pOiBEaW1lbnNpb25zID0+ICh7XG4gIHdpZHRoLFxuICBoZWlnaHRcbn0pO1xuXG5jb25zdCBncmlkID0gKHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogR3JpZCA9PiAoe1xuICByb3dzLFxuICBjb2x1bW5zXG59KTtcblxuY29uc3QgYWRkcmVzcyA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBBZGRyZXNzID0+ICh7XG4gIHJvdyxcbiAgY29sdW1uXG59KTtcblxuY29uc3QgY29vcmRzID0gKHg6IG51bWJlciwgeTogbnVtYmVyKTogQ29vcmRzID0+ICh7XG4gIHgsXG4gIHlcbn0pO1xuXG5jb25zdCBkZXRhaWwgPSA8VCBleHRlbmRzIENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyKTogRGV0YWlsPFQ+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIHJvd3NwYW4sXG4gIGNvbHNwYW5cbn0pO1xuXG5jb25zdCBkZXRhaWxuZXcgPSA8VCBleHRlbmRzIENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyLCBpc05ldzogYm9vbGVhbik6IERldGFpbE5ldzxUPiA9PiAoe1xuICBlbGVtZW50LFxuICByb3dzcGFuLFxuICBjb2xzcGFuLFxuICBpc05ld1xufSk7XG5cbmNvbnN0IGV4dGVuZGVkID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyLCByb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIsIGlzTG9ja2VkOiBib29sZWFuKTogRGV0YWlsRXh0ID0+ICh7XG4gIGVsZW1lbnQsXG4gIHJvd3NwYW4sXG4gIGNvbHNwYW4sXG4gIHJvdyxcbiAgY29sdW1uLFxuICBpc0xvY2tlZFxufSk7XG5cbmNvbnN0IHJvd2RldGFpbCA9IDxUIGV4dGVuZHMgRGV0YWlsPFJvd0NlbGw8Uj4+LCBSIGV4dGVuZHMgUm93RWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPiwgY2VsbHM6IFRbXSwgc2VjdGlvbjogU2VjdGlvbik6IFJvd0RldGFpbDxULCBSPiA9PiAoe1xuICBlbGVtZW50LFxuICBjZWxscyxcbiAgc2VjdGlvblxufSk7XG5cbmNvbnN0IHJvd2RldGFpbG5ldyA9IDxUIGV4dGVuZHMgRGV0YWlsPFJvd0NlbGw8Uj4+LCBSIGV4dGVuZHMgUm93RWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPiwgY2VsbHM6IFRbXSwgc2VjdGlvbjogU2VjdGlvbiwgaXNOZXc6IGJvb2xlYW4pOiBSb3dEZXRhaWxOZXc8VCwgUj4gPT4gKHtcbiAgZWxlbWVudCxcbiAgY2VsbHMsXG4gIHNlY3Rpb24sXG4gIGlzTmV3XG59KTtcblxuY29uc3QgZWxlbWVudG5ldyA9IDxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQ+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUPiwgaXNOZXc6IGJvb2xlYW4sIGlzTG9ja2VkOiBib29sZWFuKTogRWxlbWVudE5ldzxUPiA9PiAoe1xuICBlbGVtZW50LFxuICBpc05ldyxcbiAgaXNMb2NrZWRcbn0pO1xuXG5jb25zdCByb3djZWxscyA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFI+LCBjZWxsczogRWxlbWVudE5ldzxSb3dDZWxsPFI+PltdLCBzZWN0aW9uOiBTZWN0aW9uLCBpc05ldzogYm9vbGVhbik6IFJvd0NlbGxzPFI+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIGNlbGxzLFxuICBzZWN0aW9uLFxuICBpc05ld1xufSk7XG5cbmNvbnN0IGJvdW5kcyA9IChzdGFydFJvdzogbnVtYmVyLCBzdGFydENvbDogbnVtYmVyLCBmaW5pc2hSb3c6IG51bWJlciwgZmluaXNoQ29sOiBudW1iZXIpOiBCb3VuZHMgPT4gKHtcbiAgc3RhcnRSb3csXG4gIHN0YXJ0Q29sLFxuICBmaW5pc2hSb3csXG4gIGZpbmlzaENvbFxufSk7XG5cbmNvbnN0IGNvbHVtbmV4dCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD4sIGNvbHNwYW46IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBDb2x1bW5FeHQgPT4gKHtcbiAgZWxlbWVudCxcbiAgY29sc3BhbixcbiAgY29sdW1uXG59KTtcblxuY29uc3QgY29sZ3JvdXAgPSA8VCBleHRlbmRzIENvbHVtbj4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDb2xFbGVtZW50PiwgY29sdW1uczogVFtdKTogQ29sZ3JvdXA8VD4gPT4gKHtcbiAgZWxlbWVudCxcbiAgY29sdW1uc1xufSk7XG5cbmV4cG9ydCB7XG4gIGRpbWVuc2lvbixcbiAgZGltZW5zaW9ucyxcbiAgZ3JpZCxcbiAgYWRkcmVzcyxcbiAgY29vcmRzLFxuICBleHRlbmRlZCxcbiAgZGV0YWlsLFxuICBkZXRhaWxuZXcsXG4gIHJvd2RldGFpbCxcbiAgZWxlbWVudG5ldyxcbiAgcm93ZGV0YWlsbmV3LFxuICByb3djZWxscyxcbiAgYm91bmRzLFxuICBpc1ZhbGlkU2VjdGlvbixcbiAgY29sdW1uZXh0LFxuICBjb2xncm91cFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21TdHJ1Y3R1cmUgfSBmcm9tICdAZXBob3gvcm9iaW4nO1xuaW1wb3J0IHsgQ29tcGFyZSwgQ3Vyc29yUG9zaXRpb24sIEluc2VydEFsbCwgUHJlZGljYXRlRmluZCwgUmVtb3ZlLCBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgU3VnYXJUZXh0LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmNvbnN0IG1lcmdlID0gKGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pOiB2b2lkID0+IHtcbiAgY29uc3QgaXNCciA9IFN1Z2FyTm9kZS5pc1RhZygnYnInKTtcblxuICBjb25zdCBhZHZhbmNlZEJyID0gKGNoaWxkcmVuOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSkgPT4ge1xuICAgIHJldHVybiBBcnIuZm9yYWxsKGNoaWxkcmVuLCAoYykgPT4ge1xuICAgICAgcmV0dXJuIGlzQnIoYykgfHwgKFN1Z2FyTm9kZS5pc1RleHQoYykgJiYgU3VnYXJUZXh0LmdldChjKS50cmltKCkubGVuZ3RoID09PSAwKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpc0xpc3RJdGVtID0gKGVsOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICByZXR1cm4gU3VnYXJOb2RlLm5hbWUoZWwpID09PSAnbGknIHx8IFByZWRpY2F0ZUZpbmQuYW5jZXN0b3IoZWwsIERvbVN0cnVjdHVyZS5pc0xpc3QpLmlzU29tZSgpO1xuICB9O1xuXG4gIGNvbnN0IHNpYmxpbmdJc0Jsb2NrID0gKGVsOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICByZXR1cm4gVHJhdmVyc2UubmV4dFNpYmxpbmcoZWwpLm1hcCgocmlnaHRTaWJsaW5nKSA9PiB7XG4gICAgICBpZiAoRG9tU3RydWN0dXJlLmlzQmxvY2socmlnaHRTaWJsaW5nKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChEb21TdHJ1Y3R1cmUuaXNFbXB0eVRhZyhyaWdodFNpYmxpbmcpKSB7XG4gICAgICAgIHJldHVybiBTdWdhck5vZGUubmFtZShyaWdodFNpYmxpbmcpID09PSAnaW1nJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KS5nZXRPcihmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgbWFya0NlbGwgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiBDdXJzb3JQb3NpdGlvbi5sYXN0KGNlbGwpLmJpbmQoKHJpZ2h0RWRnZSkgPT4ge1xuICAgICAgY29uc3QgcmlnaHRTaWJsaW5nSXNCbG9jayA9IHNpYmxpbmdJc0Jsb2NrKHJpZ2h0RWRnZSk7XG4gICAgICByZXR1cm4gVHJhdmVyc2UucGFyZW50KHJpZ2h0RWRnZSkubWFwKChwYXJlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJpZ2h0U2libGluZ0lzQmxvY2sgPT09IHRydWUgfHwgaXNMaXN0SXRlbShwYXJlbnQpIHx8IGlzQnIocmlnaHRFZGdlKSB8fCAoRG9tU3RydWN0dXJlLmlzQmxvY2socGFyZW50KSAmJiAhQ29tcGFyZS5lcShjZWxsLCBwYXJlbnQpKSA/IFtdIDogWyBTdWdhckVsZW1lbnQuZnJvbVRhZygnYnInKSBdO1xuICAgICAgfSk7XG4gICAgfSkuZ2V0T3IoW10pO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBBcnIuYmluZChjZWxscywgKGNlbGwpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4oY2VsbCk7XG4gICAgICByZXR1cm4gYWR2YW5jZWRCcihjaGlsZHJlbikgPyBbIF0gOiBjaGlsZHJlbi5jb25jYXQobWFya0NlbGwoY2VsbCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAwID8gWyBTdWdhckVsZW1lbnQuZnJvbVRhZygnYnInKSBdIDogY29udGVudDtcbiAgfTtcblxuICBjb25zdCBjb250ZW50cyA9IG1hcmtDb250ZW50KCk7XG4gIFJlbW92ZS5lbXB0eShjZWxsc1swXSk7XG4gIEluc2VydEFsbC5hcHBlbmQoY2VsbHNbMF0sIGNvbnRlbnRzKTtcbn07XG5cbmV4cG9ydCB7XG4gIG1lcmdlXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFNlbGVjdG9yRmlsdGVyLCBTZWxlY3RvckZpbmQsIFNlbGVjdG9ycywgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgVHJhdmVyc2UgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgeyBnZXRBdHRyVmFsdWUgfSBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgKiBhcyBMYXllclNlbGVjdG9yIGZyb20gJy4uL3V0aWwvTGF5ZXJTZWxlY3Rvcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi9TdHJ1Y3RzJztcblxudHlwZSBJc1Jvb3RGbiA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW47XG5cbi8vIGxvb2t1cCBpbnNpZGUgdGhpcyB0YWJsZVxuY29uc3QgbG9va3VwID0gPFQgZXh0ZW5kcyBFbGVtZW50PiAodGFnczogc3RyaW5nW10sIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290OiBJc1Jvb3RGbiA9IEZ1bi5uZXZlcik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT4ge1xuICAvLyBJZiB0aGUgZWxlbWVudCB3ZSdyZSBpbnNwZWN0aW5nIGlzIHRoZSByb290LCB3ZSBkZWZpbml0ZWx5IGRvbid0IHdhbnQgaXQuXG4gIGlmIChpc1Jvb3QoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICB9XG4gIC8vIFRoaXMgbG9va3MgYSBsb3QgbGlrZSBTZWxlY3RvckZpbmQuY2xvc2VzdCwgd2l0aCBvbmUgYmlnIGV4Y2VwdGlvbiAtIHRoZSBpc1Jvb3QgY2hlY2suXG4gIC8vIFRoZSBjb2RlIGhlcmUgd2lsbCBsb29rIGZvciBwYXJlbnRzIGlmIHBhc3NlZCBhIHRhYmxlLCBTZWxlY3RvckZpbmQuY2xvc2VzdCB3aXRoIHRoYXQgc3BlY2lmaWMgaXNSb290IGNoZWNrIHdvbid0LlxuICBpZiAoQXJyLmNvbnRhaW5zKHRhZ3MsIFN1Z2FyTm9kZS5uYW1lKGVsZW1lbnQpKSkge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKGVsZW1lbnQgYXMgU3VnYXJFbGVtZW50PFQ+KTtcbiAgfVxuXG4gIGNvbnN0IGlzUm9vdE9yVXBwZXJUYWJsZSA9IChlbG06IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gU2VsZWN0b3JzLmlzKGVsbSwgJ3RhYmxlJykgfHwgaXNSb290KGVsbSk7XG5cbiAgcmV0dXJuIFNlbGVjdG9yRmluZC5hbmNlc3RvcjxUPihlbGVtZW50LCB0YWdzLmpvaW4oJywnKSwgaXNSb290T3JVcHBlclRhYmxlKTtcbn07XG5cbi8qXG4gKiBJZGVudGlmeSB0aGUgb3B0aW9uYWwgY2VsbCB0aGF0IGVsZW1lbnQgcmVwcmVzZW50cy5cbiAqL1xuY29uc3QgY2VsbCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IElzUm9vdEZuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4gPT5cbiAgbG9va3VwPEhUTUxUYWJsZUNlbGxFbGVtZW50PihbICd0ZCcsICd0aCcgXSwgZWxlbWVudCwgaXNSb290KTtcblxuY29uc3QgY2VsbHMgPSAoYW5jZXN0b3I6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSA9PlxuICBMYXllclNlbGVjdG9yLmZpcnN0TGF5ZXIoYW5jZXN0b3IsICd0aCx0ZCcpO1xuXG5jb25zdCBjb2x1bW5zID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9PiB7XG4gIGlmIChTZWxlY3RvcnMuaXMoYW5jZXN0b3IsICdjb2xncm91cCcpKSB7XG4gICAgcmV0dXJuIFNlbGVjdG9yRmlsdGVyLmNoaWxkcmVuPEhUTUxUYWJsZUNvbEVsZW1lbnQ+KGFuY2VzdG9yLCAnY29sJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIEFyci5iaW5kKGNvbHVtbkdyb3VwcyhhbmNlc3RvciksIChjb2x1bW5Hcm91cCkgPT5cbiAgICAgIFNlbGVjdG9yRmlsdGVyLmNoaWxkcmVuPEhUTUxUYWJsZUNvbEVsZW1lbnQ+KGNvbHVtbkdyb3VwLCAnY29sJylcbiAgICApO1xuICB9XG59O1xuXG5jb25zdCBub3RDZWxsID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290PzogSXNSb290Rm4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8RWxlbWVudD4+ID0+XG4gIGxvb2t1cDxFbGVtZW50PihbICdjYXB0aW9uJywgJ3RyJywgJ3Rib2R5JywgJ3Rmb290JywgJ3RoZWFkJyBdLCBlbGVtZW50LCBpc1Jvb3QpO1xuXG5jb25zdCBuZWlnaGJvdXJzID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNlbGVjdG9yOiBzdHJpbmcpID0+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD5bXT4gPT5cbiAgVHJhdmVyc2UucGFyZW50KGVsZW1lbnQpLm1hcCgocGFyZW50KSA9PiBTZWxlY3RvckZpbHRlci5jaGlsZHJlbihwYXJlbnQsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IG5laWdoYm91ckNlbGxzID0gbmVpZ2hib3VyczxIVE1MVGFibGVDZWxsRWxlbWVudD4oJ3RoLHRkJyk7XG5jb25zdCBuZWlnaGJvdXJSb3dzID0gbmVpZ2hib3VyczxIVE1MVGFibGVSb3dFbGVtZW50PigndHInKTtcblxuY29uc3QgZmlyc3RDZWxsID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PlxuICBTZWxlY3RvckZpbmQuZGVzY2VuZGFudDxIVE1MVGFibGVDZWxsRWxlbWVudD4oYW5jZXN0b3IsICd0aCx0ZCcpO1xuXG5jb25zdCB0YWJsZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IElzUm9vdEZuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+PiA9PlxuICBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVFbGVtZW50PihlbGVtZW50LCAndGFibGUnLCBpc1Jvb3QpO1xuXG5jb25zdCByb3cgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q/OiBJc1Jvb3RGbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50Pj4gPT5cbiAgbG9va3VwPEhUTUxUYWJsZVJvd0VsZW1lbnQ+KFsgJ3RyJyBdLCBlbGVtZW50LCBpc1Jvb3QpO1xuXG5jb25zdCByb3dzID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudD5bXSA9PlxuICBMYXllclNlbGVjdG9yLmZpcnN0TGF5ZXIoYW5jZXN0b3IsICd0cicpO1xuXG5jb25zdCBjb2x1bW5Hcm91cHMgPSAoYW5jZXN0b3I6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDb2xFbGVtZW50PltdID0+IHRhYmxlKGFuY2VzdG9yKS5mb2xkKFxuICBGdW4uY29uc3RhbnQoW10pLFxuICAodGFibGUpID0+IFNlbGVjdG9yRmlsdGVyLmNoaWxkcmVuPEhUTUxUYWJsZUNvbEVsZW1lbnQ+KHRhYmxlLCAnY29sZ3JvdXAnKVxuKTtcblxuY29uc3QgYXR0ciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHByb3BlcnR5OiBzdHJpbmcpOiBudW1iZXIgPT5cbiAgZ2V0QXR0clZhbHVlKGVsZW1lbnQsIHByb3BlcnR5KTtcblxuY29uc3QgZ3JpZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHJvd1Byb3A6IHN0cmluZywgY29sUHJvcDogc3RyaW5nKTogU3RydWN0cy5HcmlkID0+IHtcbiAgY29uc3Qgcm93c0NvdW50ID0gYXR0cihlbGVtZW50LCByb3dQcm9wKTtcbiAgY29uc3QgY29scyA9IGF0dHIoZWxlbWVudCwgY29sUHJvcCk7XG4gIHJldHVybiBTdHJ1Y3RzLmdyaWQocm93c0NvdW50LCBjb2xzKTtcbn07XG5cbmV4cG9ydCB7XG4gIGNlbGwsXG4gIGZpcnN0Q2VsbCxcbiAgY2VsbHMsXG4gIG5laWdoYm91ckNlbGxzLFxuICB0YWJsZSxcbiAgcm93LFxuICByb3dzLFxuICBub3RDZWxsLFxuICBuZWlnaGJvdXJSb3dzLFxuICBhdHRyLFxuICBncmlkLFxuICBjb2x1bW5Hcm91cHMsXG4gIGNvbHVtbnNcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwsIE9wdGlvbmFscyB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb250ZW50RWRpdGFibGUsIFJlbW92ZSwgdHlwZSBTdWdhckVsZW1lbnQsIFdpZHRoIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQmxvY2tzIGZyb20gJy4uL2xvb2t1cC9CbG9ja3MnO1xuaW1wb3J0IHsgZmluZENvbW1vbkNlbGxUeXBlLCBmaW5kQ29tbW9uUm93VHlwZSB9IGZyb20gJy4uL2xvb2t1cC9UeXBlJztcbmltcG9ydCAqIGFzIERldGFpbHNMaXN0IGZyb20gJy4uL21vZGVsL0RldGFpbHNMaXN0JztcbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi4vbW9kZWwvR3JpZFJvdyc7XG5pbXBvcnQgKiBhcyBSdW5PcGVyYXRpb24gZnJvbSAnLi4vbW9kZWwvUnVuT3BlcmF0aW9uJztcbmltcG9ydCAqIGFzIFRhYmxlTWVyZ2UgZnJvbSAnLi4vbW9kZWwvVGFibGVNZXJnZSc7XG5pbXBvcnQgKiBhcyBUcmFuc2l0aW9ucyBmcm9tICcuLi9tb2RlbC9UcmFuc2l0aW9ucyc7XG5pbXBvcnQgKiBhcyBNZXJnaW5nT3BlcmF0aW9ucyBmcm9tICcuLi9vcGVyYXRlL01lcmdpbmdPcGVyYXRpb25zJztcbmltcG9ydCAqIGFzIE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMgZnJvbSAnLi4vb3BlcmF0ZS9Nb2RpZmljYXRpb25PcGVyYXRpb25zJztcbmltcG9ydCAqIGFzIFRyYW5zZm9ybU9wZXJhdGlvbnMgZnJvbSAnLi4vb3BlcmF0ZS9UcmFuc2Zvcm1PcGVyYXRpb25zJztcbmltcG9ydCAqIGFzIEFkanVzdG1lbnRzIGZyb20gJy4uL3Jlc2l6ZS9BZGp1c3RtZW50cyc7XG5pbXBvcnQgKiBhcyBDb2xVdGlscyBmcm9tICcuLi91dGlsL0NvbFV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCB7IEdlbmVyYXRvcnMsIHR5cGUgR2VuZXJhdG9yc01lcmdpbmcsIHR5cGUgR2VuZXJhdG9yc01vZGlmaWNhdGlvbiwgdHlwZSBHZW5lcmF0b3JzVHJhbnNmb3JtLCB0eXBlIFNpbXBsZUdlbmVyYXRvcnMgfSBmcm9tICcuL0dlbmVyYXRvcnMnO1xuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgVGFibGVDb250ZW50IGZyb20gJy4vVGFibGVDb250ZW50JztcbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4vVGFibGVMb29rdXAnO1xuaW1wb3J0IHR5cGUgeyBUYWJsZVNlY3Rpb24gfSBmcm9tICcuL1RhYmxlU2VjdGlvbic7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuL1dhcmVob3VzZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVPcGVyYXRpb25SZXN1bHQge1xuICByZWFkb25seSBncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW107XG4gIHJlYWRvbmx5IGN1cnNvcjogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj47XG59XG5cbnR5cGUgRXh0cmFjdE1lcmdhYmxlID0gUnVuT3BlcmF0aW9uLkV4dHJhY3RNZXJnYWJsZTtcbnR5cGUgRXh0cmFjdFBhc3RlID0gUnVuT3BlcmF0aW9uLkV4dHJhY3RQYXN0ZTtcbnR5cGUgRXh0cmFjdFBhc3RlUm93cyA9IFJ1bk9wZXJhdGlvbi5FeHRyYWN0UGFzdGVSb3dzO1xudHlwZSBUYXJnZXRTZWxlY3Rpb24gPSBSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uO1xuXG5pbnRlcmZhY2UgRXh0cmFjdENvbERldGFpbCB7XG4gIHJlYWRvbmx5IGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQ7XG4gIHJlYWRvbmx5IHBpeGVsRGVsdGE6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEV4dHJhY3RDb2xzRGV0YWlsIHtcbiAgcmVhZG9ubHkgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXTtcbiAgcmVhZG9ubHkgcGl4ZWxEZWx0YTogbnVtYmVyO1xufVxuXG4vLyBUaGlzIHVzZXMgYSBzbGlnaHQgdmFyaWF0aW9uIHRvIHRoZSBkZWZhdWx0IGBDb250ZW50RWRpdGFibGUuaXNFZGl0YWJsZWAgYmVoYXZpb3VyLFxuLy8gYXMgd2hlbiB0aGUgZWxlbWVudCBpcyBkZXRhY2hlZCB3ZSBhc3N1bWUgaXQgaXMgZWRpdGFibGUgYmVjYXVzZSBpdCBpcyBhIG5ldyBjZWxsLlxuY29uc3QgaXNFZGl0YWJsZSA9IChlbGVtOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PlxuICBDb250ZW50RWRpdGFibGUuaXNFZGl0YWJsZShlbGVtLCB0cnVlKTtcblxuY29uc3QgcHJ1bmUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4ge1xuICBjb25zdCBjZWxscyA9IFRhYmxlTG9va3VwLmNlbGxzKHRhYmxlKTtcbiAgaWYgKGNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgIFJlbW92ZS5yZW1vdmUodGFibGUpO1xuICB9XG59O1xuXG5jb25zdCBvdXRjb21lID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgY3Vyc29yOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+Pik6IFRhYmxlT3BlcmF0aW9uUmVzdWx0ID0+ICh7XG4gIGdyaWQsXG4gIGN1cnNvclxufSk7XG5cbmNvbnN0IGZpbmRFZGl0YWJsZUN1cnNvclBvc2l0aW9uID0gKHJvd3M6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD5bXSkgPT5cbiAgQXJyLmZpbmRNYXAocm93cywgKHJvdykgPT5cbiAgICBBcnIuZmluZE1hcChyb3cuY2VsbHMsIChjZWxsKSA9PiB7XG4gICAgICBjb25zdCBlbGVtID0gY2VsbC5lbGVtZW50O1xuICAgICAgcmV0dXJuIE9wdGlvbmFscy5zb21lSWYoaXNFZGl0YWJsZShlbGVtKSwgZWxlbSk7XG4gICAgfSlcbiAgKTtcblxuY29uc3QgZWxlbWVudEZyb21HcmlkID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICByZXR1cm4gT3B0aW9uYWwuZnJvbShyb3dzW3Jvd10/LmNlbGxzW2NvbHVtbl0/LmVsZW1lbnQpXG4gICAgLmZpbHRlcihpc0VkaXRhYmxlKVxuICAgIC8vIEZhbGxiYWNrIHRvIHRoZSBmaXJzdCB2YWxpZCBwb3NpdGlvbiBpbiB0aGUgdGFibGVcbiAgICAub3JUaHVuaygoKSA9PiBmaW5kRWRpdGFibGVDdXJzb3JQb3NpdGlvbihyb3dzKSk7XG59O1xuXG5jb25zdCBidW5kbGUgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCByb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpID0+IHtcbiAgY29uc3QgY3Vyc29yRWxlbWVudCA9IGVsZW1lbnRGcm9tR3JpZChncmlkLCByb3csIGNvbHVtbik7XG4gIHJldHVybiBvdXRjb21lKGdyaWQsIGN1cnNvckVsZW1lbnQpO1xufTtcblxuY29uc3QgdW5pcXVlUm93cyA9IChkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdKSA9PiB7XG4gIGNvbnN0IHJvd0NvbXBpbGF0aW9uID0gKHJlc3Q6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQpID0+IHtcbiAgICBjb25zdCByb3dFeGlzdHMgPSBBcnIuZXhpc3RzKHJlc3QsIChjdXJyZW50RGV0YWlsKSA9PiBjdXJyZW50RGV0YWlsLnJvdyA9PT0gZGV0YWlsLnJvdyk7XG5cbiAgICByZXR1cm4gcm93RXhpc3RzID8gcmVzdCA6IHJlc3QuY29uY2F0KFsgZGV0YWlsIF0pO1xuICB9O1xuXG4gIHJldHVybiBBcnIuZm9sZGwoZGV0YWlscywgcm93Q29tcGlsYXRpb24sIFtdKS5zb3J0KChkZXRhaWxBLCBkZXRhaWxCKSA9PlxuICAgIGRldGFpbEEucm93IC0gZGV0YWlsQi5yb3dcbiAgKTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Um93QmVmb3JlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgZXhhbXBsZSA9IGRldGFpbC5yb3c7XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gZGV0YWlsLnJvdztcbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Um93QXQoZ3JpZCwgdGFyZ2V0SW5kZXgsIGV4YW1wbGUsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgdGFyZ2V0SW5kZXgsIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BJbnNlcnRSb3dzQmVmb3JlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSBkZXRhaWxzWzBdLnJvdztcbiAgY29uc3Qgcm93cyA9IHVuaXF1ZVJvd3MoZGV0YWlscyk7XG4gIGNvbnN0IG5ld0dyaWQgPSBBcnIuZm9sZHIocm93cywgKGFjYywgcm93KSA9PiB7XG4gICAgY29uc3QgbmV3RyA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Um93QXQoYWNjLmdyaWQsIHRhcmdldEluZGV4LCByb3cucm93ICsgYWNjLmRlbHRhLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICAgIHJldHVybiB7IGdyaWQ6IG5ld0csIGRlbHRhOiBhY2MuZGVsdGEgKyAxIH07XG4gIH0sIHsgZ3JpZCwgZGVsdGE6IDAgfSkuZ3JpZDtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCB0YXJnZXRJbmRleCwgZGV0YWlsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BJbnNlcnRSb3dBZnRlciA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGV4YW1wbGUgPSBkZXRhaWwucm93O1xuICBjb25zdCB0YXJnZXRJbmRleCA9IGRldGFpbC5yb3cgKyBkZXRhaWwucm93c3BhbjtcbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Um93QXQoZ3JpZCwgdGFyZ2V0SW5kZXgsIGV4YW1wbGUsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgdGFyZ2V0SW5kZXgsIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BJbnNlcnRSb3dzQWZ0ZXIgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCByb3dzID0gdW5pcXVlUm93cyhkZXRhaWxzKTtcbiAgY29uc3QgdGFyZ2V0ID0gcm93c1tyb3dzLmxlbmd0aCAtIDFdO1xuICBjb25zdCB0YXJnZXRJbmRleCA9IHRhcmdldC5yb3cgKyB0YXJnZXQucm93c3BhbjtcbiAgY29uc3QgbmV3R3JpZCA9IEFyci5mb2xkcihyb3dzLCAobmV3Rywgcm93KSA9PiB7XG4gICAgcmV0dXJuIE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Um93QXQobmV3RywgdGFyZ2V0SW5kZXgsIHJvdy5yb3csIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIH0sIGdyaWQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIHRhcmdldEluZGV4LCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcEluc2VydENvbHVtbkJlZm9yZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4dHJhY3REZXRhaWw6IEV4dHJhY3RDb2xEZXRhaWwsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGRldGFpbCA9IGV4dHJhY3REZXRhaWwuZGV0YWlsO1xuICBjb25zdCBleGFtcGxlID0gZGV0YWlsLmNvbHVtbjtcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSBkZXRhaWwuY29sdW1uO1xuICBjb25zdCBuZXdHcmlkID0gTW9kaWZpY2F0aW9uT3BlcmF0aW9ucy5pbnNlcnRDb2x1bW5BdChncmlkLCB0YXJnZXRJbmRleCwgZXhhbXBsZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWwucm93LCB0YXJnZXRJbmRleCk7XG59O1xuXG5jb25zdCBvcEluc2VydENvbHVtbnNCZWZvcmUgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBleHRyYWN0RGV0YWlsOiBFeHRyYWN0Q29sc0RldGFpbCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgZGV0YWlscyA9IGV4dHJhY3REZXRhaWwuZGV0YWlscztcbiAgY29uc3QgY29sdW1ucyA9IENvbFV0aWxzLnVuaXF1ZUNvbHVtbnMoZGV0YWlscyk7XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gY29sdW1uc1swXS5jb2x1bW47XG4gIGNvbnN0IG5ld0dyaWQgPSBBcnIuZm9sZHIoY29sdW1ucywgKGFjYywgY29sKSA9PiB7XG4gICAgY29uc3QgbmV3RyA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Q29sdW1uQXQoYWNjLmdyaWQsIHRhcmdldEluZGV4LCBjb2wuY29sdW1uICsgYWNjLmRlbHRhLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICAgIHJldHVybiB7IGdyaWQ6IG5ld0csIGRlbHRhOiBhY2MuZGVsdGEgKyAxIH07XG4gIH0sIHsgZ3JpZCwgZGVsdGE6IDAgfSkuZ3JpZDtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWxzWzBdLnJvdywgdGFyZ2V0SW5kZXgpO1xufTtcblxuY29uc3Qgb3BJbnNlcnRDb2x1bW5BZnRlciA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4dHJhY3REZXRhaWw6IEV4dHJhY3RDb2xEZXRhaWwsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGRldGFpbCA9IGV4dHJhY3REZXRhaWwuZGV0YWlsO1xuICBjb25zdCBleGFtcGxlID0gZGV0YWlsLmNvbHVtbjtcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSBkZXRhaWwuY29sdW1uICsgZGV0YWlsLmNvbHNwYW47XG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydENvbHVtbkF0KGdyaWQsIHRhcmdldEluZGV4LCBleGFtcGxlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIHRhcmdldEluZGV4KTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Q29sdW1uc0FmdGVyID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZXh0cmFjdERldGFpbDogRXh0cmFjdENvbHNEZXRhaWwsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGRldGFpbHMgPSBleHRyYWN0RGV0YWlsLmRldGFpbHM7XG4gIGNvbnN0IHRhcmdldCA9IGRldGFpbHNbZGV0YWlscy5sZW5ndGggLSAxXTtcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSB0YXJnZXQuY29sdW1uICsgdGFyZ2V0LmNvbHNwYW47XG4gIGNvbnN0IGNvbHVtbnMgPSBDb2xVdGlscy51bmlxdWVDb2x1bW5zKGRldGFpbHMpO1xuICBjb25zdCBuZXdHcmlkID0gQXJyLmZvbGRyKGNvbHVtbnMsIChuZXdHLCBjb2wpID0+IHtcbiAgICByZXR1cm4gTW9kaWZpY2F0aW9uT3BlcmF0aW9ucy5pbnNlcnRDb2x1bW5BdChuZXdHLCB0YXJnZXRJbmRleCwgY29sLmNvbHVtbiwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgfSwgZ3JpZCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsc1swXS5yb3csIHRhcmdldEluZGV4KTtcbn07XG5cbmNvbnN0IG9wTWFrZUNvbHVtbkhlYWRlciA9IChpbml0aWFsR3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0LCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc1RyYW5zZm9ybSkgPT4ge1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ29sdW1uKGluaXRpYWxHcmlkLCBkZXRhaWwuY29sdW1uLCB0cnVlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5yZXBsYWNlT3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWwucm93LCBkZXRhaWwuY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wTWFrZUNvbHVtbnNIZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgY29sdW1ucyA9IENvbFV0aWxzLnVuaXF1ZUNvbHVtbnMoZGV0YWlscyk7XG4gIGNvbnN0IGNvbHVtbkluZGV4ZXMgPSBBcnIubWFwKGNvbHVtbnMsIChkZXRhaWwpID0+IGRldGFpbC5jb2x1bW4pO1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ29sdW1ucyhpbml0aWFsR3JpZCwgY29sdW1uSW5kZXhlcywgdHJ1ZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsc1swXS5yb3csIGRldGFpbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wTWFrZUNlbGxIZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNlbGwoaW5pdGlhbEdyaWQsIGRldGFpbCwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcE1ha2VDZWxsc0hlYWRlciA9IChpbml0aWFsR3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc1RyYW5zZm9ybSkgPT4ge1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ2VsbHMoaW5pdGlhbEdyaWQsIGRldGFpbHMsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcFVubWFrZUNvbHVtbkhlYWRlciA9IChpbml0aWFsR3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0LCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc1RyYW5zZm9ybSkgPT4ge1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ29sdW1uKGluaXRpYWxHcmlkLCBkZXRhaWwuY29sdW1uLCBmYWxzZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcFVubWFrZUNvbHVtbnNIZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgY29sdW1ucyA9IENvbFV0aWxzLnVuaXF1ZUNvbHVtbnMoZGV0YWlscyk7XG4gIGNvbnN0IGNvbHVtbkluZGV4ZXMgPSBBcnIubWFwKGNvbHVtbnMsIChkZXRhaWwpID0+IGRldGFpbC5jb2x1bW4pO1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ29sdW1ucyhpbml0aWFsR3JpZCwgY29sdW1uSW5kZXhlcywgZmFsc2UsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcFVubWFrZUNlbGxIZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNlbGwoaW5pdGlhbEdyaWQsIGRldGFpbCwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcFVubWFrZUNlbGxzSGVhZGVyID0gKGluaXRpYWxHcmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtKSA9PiB7XG4gIGNvbnN0IG5ld0dyaWQgPSBUcmFuc2Zvcm1PcGVyYXRpb25zLnJlcGxhY2VDZWxscyhpbml0aWFsR3JpZCwgZGV0YWlscywgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsc1swXS5yb3csIGRldGFpbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG1ha2VSb3dTZWN0aW9uID0gKHNlY3Rpb246IFN0cnVjdHMuU2VjdGlvbiwgYXBwbHlTY29wZTogYm9vbGVhbikgPT5cbiAgKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0sIHRhYmxlU2VjdGlvbjogVGFibGVTZWN0aW9uKSA9PiB7XG4gICAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZVJvdyhncmlkLCBkZXRhaWwucm93LCBzZWN0aW9uLCBhcHBseVNjb3BlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5yZXBsYWNlT3JJbml0LCB0YWJsZVNlY3Rpb24pO1xuICAgIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG4gIH07XG5cbmNvbnN0IG1ha2VSb3dzU2VjdGlvbiA9IChzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24sIGFwcGx5U2NvcGU6IGJvb2xlYW4pID0+XG4gIChpbml0aWFsR3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc1RyYW5zZm9ybSwgdGFibGVTZWN0aW9uOiBUYWJsZVNlY3Rpb24pID0+IHtcbiAgICBjb25zdCByb3dzID0gdW5pcXVlUm93cyhkZXRhaWxzKTtcbiAgICBjb25zdCByb3dJbmRleGVzID0gQXJyLm1hcChyb3dzLCAoZGV0YWlsKSA9PiBkZXRhaWwucm93KTtcbiAgICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlUm93cyhpbml0aWFsR3JpZCwgcm93SW5kZXhlcywgc2VjdGlvbiwgYXBwbHlTY29wZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCwgdGFibGVTZWN0aW9uKTtcbiAgICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCBkZXRhaWxzWzBdLmNvbHVtbik7XG4gIH07XG5cbmNvbnN0IG9wTWFrZVJvd0hlYWRlciA9IG1ha2VSb3dTZWN0aW9uKCd0aGVhZCcsIHRydWUpO1xuY29uc3Qgb3BNYWtlUm93c0hlYWRlciA9IG1ha2VSb3dzU2VjdGlvbigndGhlYWQnLCB0cnVlKTtcbmNvbnN0IG9wTWFrZVJvd0JvZHkgPSBtYWtlUm93U2VjdGlvbigndGJvZHknLCBmYWxzZSk7XG5jb25zdCBvcE1ha2VSb3dzQm9keSA9IG1ha2VSb3dzU2VjdGlvbigndGJvZHknLCBmYWxzZSk7XG5jb25zdCBvcE1ha2VSb3dGb290ZXIgPSBtYWtlUm93U2VjdGlvbigndGZvb3QnLCBmYWxzZSk7XG5jb25zdCBvcE1ha2VSb3dzRm9vdGVyID0gbWFrZVJvd3NTZWN0aW9uKCd0Zm9vdCcsIGZhbHNlKTtcblxuY29uc3Qgb3BTcGxpdENlbGxJbnRvQ29sdW1ucyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLnNwbGl0Q2VsbEludG9Db2x1bW5zKGdyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4sIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcFNwbGl0Q2VsbEludG9Sb3dzID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuc3BsaXRDZWxsSW50b1Jvd3MoZ3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbiwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWwucm93LCBkZXRhaWwuY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wRXJhc2VDb2x1bW5zID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZXh0cmFjdERldGFpbDogRXh0cmFjdENvbHNEZXRhaWwsIF9jb21wYXJhdG9yOiBDb21wRWxtLCBfZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgY29sdW1ucyA9IENvbFV0aWxzLnVuaXF1ZUNvbHVtbnMoZXh0cmFjdERldGFpbC5kZXRhaWxzKTtcblxuICBjb25zdCBuZXdHcmlkID0gTW9kaWZpY2F0aW9uT3BlcmF0aW9ucy5kZWxldGVDb2x1bW5zQXQoZ3JpZCwgQXJyLm1hcChjb2x1bW5zLCAoY29sdW1uKSA9PiBjb2x1bW4uY29sdW1uKSk7XG4gIGNvbnN0IG1heENvbEluZGV4ID0gbmV3R3JpZC5sZW5ndGggPiAwID8gbmV3R3JpZFswXS5jZWxscy5sZW5ndGggLSAxIDogMDtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBjb2x1bW5zWzBdLnJvdywgTWF0aC5taW4oY29sdW1uc1swXS5jb2x1bW4sIG1heENvbEluZGV4KSk7XG59O1xuXG5jb25zdCBvcEVyYXNlUm93cyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIF9jb21wYXJhdG9yOiBDb21wRWxtLCBfZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3Qgcm93cyA9IHVuaXF1ZVJvd3MoZGV0YWlscyk7XG5cbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuZGVsZXRlUm93c0F0KGdyaWQsIHJvd3NbMF0ucm93LCByb3dzW3Jvd3MubGVuZ3RoIC0gMV0ucm93KTtcbiAgY29uc3QgbWF4Um93SW5kZXggPSBNYXRoLm1heChHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhuZXdHcmlkKS5yb3dzLmxlbmd0aCAtIDEsIDApO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIE1hdGgubWluKGRldGFpbHNbMF0ucm93LCBtYXhSb3dJbmRleCksIGRldGFpbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wTWVyZ2VDZWxscyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIG1lcmdhYmxlOiBFeHRyYWN0TWVyZ2FibGUsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTWVyZ2luZykgPT4ge1xuICBjb25zdCBjZWxscyA9IG1lcmdhYmxlLmNlbGxzO1xuICBUYWJsZUNvbnRlbnQubWVyZ2UoY2VsbHMpO1xuXG4gIGNvbnN0IG5ld0dyaWQgPSBNZXJnaW5nT3BlcmF0aW9ucy5tZXJnZShncmlkLCBtZXJnYWJsZS5ib3VuZHMsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLm1lcmdlKGNlbGxzKSk7XG5cbiAgcmV0dXJuIG91dGNvbWUobmV3R3JpZCwgT3B0aW9uYWwuZnJvbShjZWxsc1swXSkpO1xufTtcblxuY29uc3Qgb3BVbm1lcmdlQ2VsbHMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCB1bm1lcmdhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTWVyZ2luZykgPT4ge1xuICBjb25zdCB1bm1lcmdlID0gKGI6IFN0cnVjdHMuUm93Q2VsbHNbXSwgY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT5cbiAgICBNZXJnaW5nT3BlcmF0aW9ucy51bm1lcmdlKGIsIGNlbGwsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnVubWVyZ2UoY2VsbCkpO1xuXG4gIGNvbnN0IG5ld0dyaWQgPSBBcnIuZm9sZHIodW5tZXJnYWJsZSwgdW5tZXJnZSwgZ3JpZCk7XG4gIHJldHVybiBvdXRjb21lKG5ld0dyaWQsIE9wdGlvbmFsLmZyb20odW5tZXJnYWJsZVswXSkpO1xufTtcblxuY29uc3Qgb3BQYXN0ZUNlbGxzID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcGFzdGVEZXRhaWxzOiBFeHRyYWN0UGFzdGUsIGNvbXBhcmF0b3I6IENvbXBFbG0sIF9nZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBncmlkaWZ5ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGdlbmVyYXRvcnM6IFNpbXBsZUdlbmVyYXRvcnMpID0+IHtcbiAgICBjb25zdCB3aCA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICAgIHJldHVybiBUcmFuc2l0aW9ucy50b0dyaWQod2gsIGdlbmVyYXRvcnMsIHRydWUpO1xuICB9O1xuICBjb25zdCBncmlkQiA9IGdyaWRpZnkocGFzdGVEZXRhaWxzLmNsaXBib2FyZCwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMpO1xuICBjb25zdCBzdGFydEFkZHJlc3MgPSBTdHJ1Y3RzLmFkZHJlc3MocGFzdGVEZXRhaWxzLnJvdywgcGFzdGVEZXRhaWxzLmNvbHVtbik7XG4gIGNvbnN0IG1lcmdlZEdyaWQgPSBUYWJsZU1lcmdlLm1lcmdlKHN0YXJ0QWRkcmVzcywgZ3JpZCwgZ3JpZEIsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzLCBjb21wYXJhdG9yKTtcblxuICByZXR1cm4gbWVyZ2VkR3JpZC5mb2xkKFxuICAgICgpID0+IG91dGNvbWUoZ3JpZCwgT3B0aW9uYWwuc29tZShwYXN0ZURldGFpbHMuZWxlbWVudCkpLFxuICAgIChuZXdHcmlkKSA9PiB7XG4gICAgICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIHBhc3RlRGV0YWlscy5yb3csIHBhc3RlRGV0YWlscy5jb2x1bW4pO1xuICAgIH1cbiAgKTtcbn07XG5cbmNvbnN0IGdyaWRpZnlSb3dzID0gKHJvd3M6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSwgZ2VuZXJhdG9yczogR2VuZXJhdG9ycywgY29udGV4dDogU3RydWN0cy5Sb3dDZWxscykgPT4ge1xuICBjb25zdCBwYXN0ZURldGFpbHMgPSBEZXRhaWxzTGlzdC5mcm9tUGFzdGVkUm93cyhyb3dzLCBjb250ZXh0LnNlY3Rpb24pO1xuICBjb25zdCB3aCA9IFdhcmVob3VzZS5nZW5lcmF0ZShwYXN0ZURldGFpbHMpO1xuICByZXR1cm4gVHJhbnNpdGlvbnMudG9HcmlkKHdoLCBnZW5lcmF0b3JzLCB0cnVlKTtcbn07XG5cbmNvbnN0IG9wUGFzdGVDb2xzQmVmb3JlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcGFzdGVEZXRhaWxzOiBFeHRyYWN0UGFzdGVSb3dzLCBjb21wYXJhdG9yOiBDb21wRWxtLCBfZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3Qgcm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLnJvd3M7XG4gIGNvbnN0IGluZGV4ID0gcGFzdGVEZXRhaWxzLmNlbGxzWzBdLmNvbHVtbjtcbiAgY29uc3QgY29udGV4dCA9IHJvd3NbcGFzdGVEZXRhaWxzLmNlbGxzWzBdLnJvd107XG4gIGNvbnN0IGdyaWRCID0gZ3JpZGlmeVJvd3MocGFzdGVEZXRhaWxzLmNsaXBib2FyZCwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbnRleHQpO1xuICBjb25zdCBtZXJnZWRHcmlkID0gVGFibGVNZXJnZS5pbnNlcnRDb2xzKGluZGV4LCBncmlkLCBncmlkQiwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbXBhcmF0b3IpO1xuICByZXR1cm4gYnVuZGxlKG1lcmdlZEdyaWQsIHBhc3RlRGV0YWlscy5jZWxsc1swXS5yb3csIHBhc3RlRGV0YWlscy5jZWxsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BQYXN0ZUNvbHNBZnRlciA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHBhc3RlRGV0YWlsczogRXh0cmFjdFBhc3RlUm93cywgY29tcGFyYXRvcjogQ29tcEVsbSwgX2dlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICBjb25zdCBpbmRleCA9IHBhc3RlRGV0YWlscy5jZWxsc1twYXN0ZURldGFpbHMuY2VsbHMubGVuZ3RoIC0gMV0uY29sdW1uICsgcGFzdGVEZXRhaWxzLmNlbGxzW3Bhc3RlRGV0YWlscy5jZWxscy5sZW5ndGggLSAxXS5jb2xzcGFuO1xuICBjb25zdCBjb250ZXh0ID0gcm93c1twYXN0ZURldGFpbHMuY2VsbHNbMF0ucm93XTtcbiAgY29uc3QgZ3JpZEIgPSBncmlkaWZ5Um93cyhwYXN0ZURldGFpbHMuY2xpcGJvYXJkLCBwYXN0ZURldGFpbHMuZ2VuZXJhdG9ycywgY29udGV4dCk7XG4gIGNvbnN0IG1lcmdlZEdyaWQgPSBUYWJsZU1lcmdlLmluc2VydENvbHMoaW5kZXgsIGdyaWQsIGdyaWRCLCBwYXN0ZURldGFpbHMuZ2VuZXJhdG9ycywgY29tcGFyYXRvcik7XG4gIHJldHVybiBidW5kbGUobWVyZ2VkR3JpZCwgcGFzdGVEZXRhaWxzLmNlbGxzWzBdLnJvdywgaW5kZXgpO1xufTtcblxuY29uc3Qgb3BQYXN0ZVJvd3NCZWZvcmUgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBwYXN0ZURldGFpbHM6IEV4dHJhY3RQYXN0ZVJvd3MsIGNvbXBhcmF0b3I6IENvbXBFbG0sIF9nZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgY29uc3QgaW5kZXggPSBwYXN0ZURldGFpbHMuY2VsbHNbMF0ucm93O1xuICBjb25zdCBjb250ZXh0ID0gcm93c1tpbmRleF07XG4gIGNvbnN0IGdyaWRCID0gZ3JpZGlmeVJvd3MocGFzdGVEZXRhaWxzLmNsaXBib2FyZCwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbnRleHQpO1xuICBjb25zdCBtZXJnZWRHcmlkID0gVGFibGVNZXJnZS5pbnNlcnRSb3dzKGluZGV4LCBncmlkLCBncmlkQiwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbXBhcmF0b3IpO1xuICByZXR1cm4gYnVuZGxlKG1lcmdlZEdyaWQsIHBhc3RlRGV0YWlscy5jZWxsc1swXS5yb3csIHBhc3RlRGV0YWlscy5jZWxsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BQYXN0ZVJvd3NBZnRlciA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHBhc3RlRGV0YWlsczogRXh0cmFjdFBhc3RlUm93cywgY29tcGFyYXRvcjogQ29tcEVsbSwgX2dlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICBjb25zdCBpbmRleCA9IHBhc3RlRGV0YWlscy5jZWxsc1twYXN0ZURldGFpbHMuY2VsbHMubGVuZ3RoIC0gMV0ucm93ICsgcGFzdGVEZXRhaWxzLmNlbGxzW3Bhc3RlRGV0YWlscy5jZWxscy5sZW5ndGggLSAxXS5yb3dzcGFuO1xuICBjb25zdCBjb250ZXh0ID0gcm93c1twYXN0ZURldGFpbHMuY2VsbHNbMF0ucm93XTtcbiAgY29uc3QgZ3JpZEIgPSBncmlkaWZ5Um93cyhwYXN0ZURldGFpbHMuY2xpcGJvYXJkLCBwYXN0ZURldGFpbHMuZ2VuZXJhdG9ycywgY29udGV4dCk7XG4gIGNvbnN0IG1lcmdlZEdyaWQgPSBUYWJsZU1lcmdlLmluc2VydFJvd3MoaW5kZXgsIGdyaWQsIGdyaWRCLCBwYXN0ZURldGFpbHMuZ2VuZXJhdG9ycywgY29tcGFyYXRvcik7XG4gIHJldHVybiBidW5kbGUobWVyZ2VkR3JpZCwgaW5kZXgsIHBhc3RlRGV0YWlscy5jZWxsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BHZXRDb2x1bW5zVHlwZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IGRldGFpbHMgPSBSdW5PcGVyYXRpb24ub25DZWxscyhob3VzZSwgdGFyZ2V0KTtcbiAgcmV0dXJuIGRldGFpbHMuYmluZCgoc2VsZWN0ZWRDZWxscykgPT4ge1xuICAgIGNvbnN0IGxhc3RTZWxlY3RlZENlbGwgPSBzZWxlY3RlZENlbGxzW3NlbGVjdGVkQ2VsbHMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbWluQ29sUmFuZ2UgPSBzZWxlY3RlZENlbGxzWzBdLmNvbHVtbjtcbiAgICBjb25zdCBtYXhDb2xSYW5nZSA9IGxhc3RTZWxlY3RlZENlbGwuY29sdW1uICsgbGFzdFNlbGVjdGVkQ2VsbC5jb2xzcGFuO1xuICAgIGNvbnN0IHNlbGVjdGVkQ29sdW1uQ2VsbHMgPSBBcnIuZmxhdHRlbihBcnIubWFwKGhvdXNlLmFsbCwgKHJvdykgPT5cbiAgICAgIEFyci5maWx0ZXIocm93LmNlbGxzLCAoY2VsbCkgPT4gY2VsbC5jb2x1bW4gPj0gbWluQ29sUmFuZ2UgJiYgY2VsbC5jb2x1bW4gPCBtYXhDb2xSYW5nZSkpKTtcbiAgICByZXR1cm4gZmluZENvbW1vbkNlbGxUeXBlKHNlbGVjdGVkQ29sdW1uQ2VsbHMpO1xuICB9KS5nZXRPcignJyk7XG59O1xuXG5jb25zdCBvcEdldENlbGxzVHlwZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IGRldGFpbHMgPSBSdW5PcGVyYXRpb24ub25DZWxscyhob3VzZSwgdGFyZ2V0KTtcbiAgcmV0dXJuIGRldGFpbHMuYmluZChmaW5kQ29tbW9uQ2VsbFR5cGUpLmdldE9yKCcnKTtcbn07XG5cbmNvbnN0IG9wR2V0Um93c1R5cGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBkZXRhaWxzID0gUnVuT3BlcmF0aW9uLm9uQ2VsbHMoaG91c2UsIHRhcmdldCk7XG4gIHJldHVybiBkZXRhaWxzLmJpbmQoKHNlbGVjdGVkQ2VsbHMpID0+IHtcbiAgICBjb25zdCBsYXN0U2VsZWN0ZWRDZWxsID0gc2VsZWN0ZWRDZWxsc1tzZWxlY3RlZENlbGxzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IG1pblJvd1JhbmdlID0gc2VsZWN0ZWRDZWxsc1swXS5yb3c7XG4gICAgY29uc3QgbWF4Um93UmFuZ2UgPSBsYXN0U2VsZWN0ZWRDZWxsLnJvdyArIGxhc3RTZWxlY3RlZENlbGwucm93c3BhbjtcbiAgICBjb25zdCBzZWxlY3RlZFJvd3MgPSBob3VzZS5hbGwuc2xpY2UobWluUm93UmFuZ2UsIG1heFJvd1JhbmdlKTtcbiAgICByZXR1cm4gZmluZENvbW1vblJvd1R5cGUoc2VsZWN0ZWRSb3dzKTtcbiAgfSkuZ2V0T3IoJycpO1xufTtcblxuLy8gT25seSBjb2x1bW4gbW9kaWZpY2F0aW9ucyBmb3JjZSBhIHJlc2l6aW5nLiBFdmVyeXRoaW5nIGVsc2UganVzdCB0cmllcyB0byBwcmVzZXJ2ZSB0aGUgdGFibGUgYXMgaXMuXG5jb25zdCByZXNpemU6IFJ1bk9wZXJhdGlvbi5BZGp1c3RtZW50PHt9PiA9ICh0YWJsZSwgbGlzdCwgZGV0YWlscywgYmVoYXZpb3VycykgPT5cbiAgQWRqdXN0bWVudHMuYWRqdXN0V2lkdGhUbyh0YWJsZSwgbGlzdCwgZGV0YWlscywgYmVoYXZpb3Vycy5zaXppbmcpO1xuXG5jb25zdCBhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHM6IFJ1bk9wZXJhdGlvbi5BZGp1c3RtZW50PHsgcGl4ZWxEZWx0YTogbnVtYmVyIH0+ID0gKHRhYmxlLCBsaXN0LCBkZXRhaWxzLCBiZWhhdmlvdXJzKSA9PlxuICBBZGp1c3RtZW50cy5hZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHModGFibGUsIGxpc3QsIGRldGFpbHMsIGJlaGF2aW91cnMuc2l6aW5nLCBiZWhhdmlvdXJzLnJlc2l6ZSk7XG5cbi8vIEN1c3RvbSBzZWxlY3Rpb24gZXh0cmFjdG9yc1xuXG5jb25zdCBmaXJzdENvbHVtbklzTG9ja2VkID0gKF93YXJlaG91c2U6IFdhcmVob3VzZSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSkgPT5cbiAgQXJyLmV4aXN0cyhkZXRhaWxzLCAoZGV0YWlsKSA9PiBkZXRhaWwuY29sdW1uID09PSAwICYmIGRldGFpbC5pc0xvY2tlZCk7XG4vLyBUT0RPOiBNYXliZSBoYXZlIGFuIEFyci5leGlzdHNSIHdoaWNoIHdvdWxkIGJlIG1vcmUgZWZmaWNpZW50IGZvciBtb3N0IGNhc2VzIGJlbG93XG5jb25zdCBsYXN0Q29sdW1uSXNMb2NrZWQgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10pID0+XG4gIEFyci5leGlzdHMoZGV0YWlscywgKGRldGFpbCkgPT4gZGV0YWlsLmNvbHVtbiArIGRldGFpbC5jb2xzcGFuID49IHdhcmVob3VzZS5ncmlkLmNvbHVtbnMgJiYgZGV0YWlsLmlzTG9ja2VkKTtcblxuY29uc3QgZ2V0Q29sdW1uc1dpZHRoID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdKSA9PiB7XG4gIGNvbnN0IGNvbHVtbnMgPSBCbG9ja3MuY29sdW1ucyh3YXJlaG91c2UpO1xuICBjb25zdCB1bmlxdWVDb2xzID0gQ29sVXRpbHMudW5pcXVlQ29sdW1ucyhkZXRhaWxzKTtcbiAgcmV0dXJuIEFyci5mb2xkbCh1bmlxdWVDb2xzLCAoYWNjLCBkZXRhaWwpID0+IHtcbiAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2RldGFpbC5jb2x1bW5dO1xuICAgIGNvbnN0IGNvbFdpZHRoID0gY29sdW1uLm1hcChXaWR0aC5nZXRPdXRlcikuZ2V0T3IoMCk7XG4gICAgcmV0dXJuIGFjYyArIGNvbFdpZHRoO1xuICB9LCAwKTtcbn07XG5cbmNvbnN0IGluc2VydENvbHVtbkV4dHJhY3RvciA9IChiZWZvcmU6IGJvb2xlYW4pID0+ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudCk6IE9wdGlvbmFsPEV4dHJhY3RDb2xEZXRhaWw+ID0+XG4gIFJ1bk9wZXJhdGlvbi5vbkNlbGwod2FyZWhvdXNlLCB0YXJnZXQpLmZpbHRlcigoZGV0YWlsKSA9PiB7XG4gICAgY29uc3QgY2hlY2tMb2NrZWQgPSBiZWZvcmUgPyBmaXJzdENvbHVtbklzTG9ja2VkIDogbGFzdENvbHVtbklzTG9ja2VkO1xuICAgIHJldHVybiAhY2hlY2tMb2NrZWQod2FyZWhvdXNlLCBbIGRldGFpbCBdKTtcbiAgfSkubWFwKChkZXRhaWwpID0+ICh7XG4gICAgZGV0YWlsLFxuICAgIHBpeGVsRGVsdGE6IGdldENvbHVtbnNXaWR0aCh3YXJlaG91c2UsIFsgZGV0YWlsIF0pLFxuICB9KSk7XG5cbmNvbnN0IGluc2VydENvbHVtbnNFeHRyYWN0b3IgPSAoYmVmb3JlOiBib29sZWFuKSA9PiAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uKTogT3B0aW9uYWw8RXh0cmFjdENvbHNEZXRhaWw+ID0+XG4gIFJ1bk9wZXJhdGlvbi5vbkNlbGxzKHdhcmVob3VzZSwgdGFyZ2V0KS5maWx0ZXIoKGRldGFpbHMpID0+IHtcbiAgICBjb25zdCBjaGVja0xvY2tlZCA9IGJlZm9yZSA/IGZpcnN0Q29sdW1uSXNMb2NrZWQgOiBsYXN0Q29sdW1uSXNMb2NrZWQ7XG4gICAgcmV0dXJuICFjaGVja0xvY2tlZCh3YXJlaG91c2UsIGRldGFpbHMpO1xuICB9KS5tYXAoKGRldGFpbHMpID0+ICh7XG4gICAgZGV0YWlscyxcbiAgICBwaXhlbERlbHRhOiBnZXRDb2x1bW5zV2lkdGgod2FyZWhvdXNlLCBkZXRhaWxzKSxcbiAgfSkpO1xuXG5jb25zdCBlcmFzZUNvbHVtbnNFeHRyYWN0b3IgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uKTogT3B0aW9uYWw8RXh0cmFjdENvbHNEZXRhaWw+ID0+XG4gIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbHMod2FyZWhvdXNlLCB0YXJnZXQpLm1hcCgoZGV0YWlscykgPT4gKHtcbiAgICBkZXRhaWxzLFxuICAgIHBpeGVsRGVsdGE6IC1nZXRDb2x1bW5zV2lkdGgod2FyZWhvdXNlLCBkZXRhaWxzKSwgLy8gbmVlZHMgdG8gYmUgbmVnYXRpdmUgYXMgd2UgYXJlIHJlbW92aW5nIGNvbHVtbnNcbiAgfSkpO1xuXG5jb25zdCBwYXN0ZUNvbHVtbnNFeHRyYWN0b3IgPSAoYmVmb3JlOiBib29sZWFuKSA9PiAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogUnVuT3BlcmF0aW9uLlRhcmdldFBhc3RlUm93cyk6IE9wdGlvbmFsPEV4dHJhY3RQYXN0ZVJvd3M+ID0+XG4gIFJ1bk9wZXJhdGlvbi5vblBhc3RlQnlFZGl0b3Iod2FyZWhvdXNlLCB0YXJnZXQpLmZpbHRlcigoZGV0YWlscykgPT4ge1xuICAgIGNvbnN0IGNoZWNrTG9ja2VkID0gYmVmb3JlID8gZmlyc3RDb2x1bW5Jc0xvY2tlZCA6IGxhc3RDb2x1bW5Jc0xvY2tlZDtcbiAgICByZXR1cm4gIWNoZWNrTG9ja2VkKHdhcmVob3VzZSwgZGV0YWlscy5jZWxscyk7XG4gIH0pO1xuXG5jb25zdCBoZWFkZXJDZWxsR2VuZXJhdG9yID0gR2VuZXJhdG9ycy50cmFuc2Zvcm0oJ3RoJyk7XG5jb25zdCBib2R5Q2VsbEdlbmVyYXRvciA9IEdlbmVyYXRvcnMudHJhbnNmb3JtKCd0ZCcpO1xuXG50eXBlIFRhYmxlT3A8VD4gPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBULCBnZW5lcmF0b3JzOiBHZW5lcmF0b3JzLCBiZWhhdmlvdXJzPzogUnVuT3BlcmF0aW9uLk9wZXJhdGlvbkJlaGF2aW91cnMpID0+IE9wdGlvbmFsPFJ1bk9wZXJhdGlvbi5SdW5PcGVyYXRpb25PdXRwdXQ+O1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Um93QmVmb3JlOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydFJvd0JlZm9yZSwgUnVuT3BlcmF0aW9uLm9uQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRSb3dzQmVmb3JlOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Um93c0JlZm9yZSwgUnVuT3BlcmF0aW9uLm9uQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Um93QWZ0ZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Um93QWZ0ZXIsIFJ1bk9wZXJhdGlvbi5vbkNlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Um93c0FmdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Um93c0FmdGVyLCBSdW5PcGVyYXRpb24ub25DZWxscywgRnVuLm5vb3AsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRDb2x1bW5CZWZvcmU6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Q29sdW1uQmVmb3JlLCBpbnNlcnRDb2x1bW5FeHRyYWN0b3IodHJ1ZSksIGFkanVzdEFuZFJlZGlzdHJpYnV0ZVdpZHRocywgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGluc2VydENvbHVtbnNCZWZvcmU6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BJbnNlcnRDb2x1bW5zQmVmb3JlLCBpbnNlcnRDb2x1bW5zRXh0cmFjdG9yKHRydWUpLCBhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHMsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRDb2x1bW5BZnRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BJbnNlcnRDb2x1bW5BZnRlciwgaW5zZXJ0Q29sdW1uRXh0cmFjdG9yKGZhbHNlKSwgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Q29sdW1uc0FmdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Q29sdW1uc0FmdGVyLCBpbnNlcnRDb2x1bW5zRXh0cmFjdG9yKGZhbHNlKSwgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3Qgc3BsaXRDZWxsSW50b0NvbHVtbnM6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wU3BsaXRDZWxsSW50b0NvbHVtbnMsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbCwgcmVzaXplLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3Qgc3BsaXRDZWxsSW50b1Jvd3M6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wU3BsaXRDZWxsSW50b1Jvd3MsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBlcmFzZUNvbHVtbnM6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BFcmFzZUNvbHVtbnMsIGVyYXNlQ29sdW1uc0V4dHJhY3RvciwgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzLCBwcnVuZSwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgZXJhc2VSb3dzOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wRXJhc2VSb3dzLCBSdW5PcGVyYXRpb24ub25DZWxscywgRnVuLm5vb3AsIHBydW5lLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlQ29sdW1uSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcE1ha2VDb2x1bW5IZWFkZXIsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBoZWFkZXJDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VDb2x1bW5zSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZUNvbHVtbnNIZWFkZXIsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgaGVhZGVyQ2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCB1bm1ha2VDb2x1bW5IZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wVW5tYWtlQ29sdW1uSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgdW5tYWtlQ29sdW1uc0hlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFVubWFrZUNvbHVtbnNIZWFkZXIsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZVJvd0hlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlUm93SGVhZGVyLCBSdW5PcGVyYXRpb24ub25DZWxsLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGhlYWRlckNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZVJvd3NIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlUm93c0hlYWRlciwgUnVuT3BlcmF0aW9uLm9uQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgaGVhZGVyQ2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlUm93Qm9keTogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlUm93Qm9keSwgUnVuT3BlcmF0aW9uLm9uQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBib2R5Q2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlUm93c0JvZHk6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlUm93c0JvZHksIFJ1bk9wZXJhdGlvbi5vbkNlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGJvZHlDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VSb3dGb290ZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZVJvd0Zvb3RlciwgUnVuT3BlcmF0aW9uLm9uQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBib2R5Q2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlUm93c0Zvb3RlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcE1ha2VSb3dzRm9vdGVyLCBSdW5PcGVyYXRpb24ub25DZWxscywgRnVuLm5vb3AsIEZ1bi5ub29wLCBib2R5Q2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlQ2VsbEhlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlQ2VsbEhlYWRlciwgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRDZWxsLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGhlYWRlckNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZUNlbGxzSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZUNlbGxzSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGhlYWRlckNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgdW5tYWtlQ2VsbEhlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BVbm1ha2VDZWxsSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgdW5tYWtlQ2VsbHNIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BVbm1ha2VDZWxsc0hlYWRlciwgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRDZWxscywgRnVuLm5vb3AsIEZ1bi5ub29wLCBib2R5Q2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtZXJnZUNlbGxzOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRNZXJnYWJsZT4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNZXJnZUNlbGxzLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZE1lcmdhYmxlLCByZXNpemUsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1lcmdpbmcsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgdW5tZXJnZUNlbGxzOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRVbm1lcmdhYmxlPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFVubWVyZ2VDZWxscywgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRVbm1lcmdhYmxlLCByZXNpemUsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1lcmdpbmcsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgcGFzdGVDZWxsczogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGU+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wUGFzdGVDZWxscywgUnVuT3BlcmF0aW9uLm9uUGFzdGUsIHJlc2l6ZSwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHBhc3RlQ29sc0JlZm9yZTogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGVSb3dzPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFBhc3RlQ29sc0JlZm9yZSwgcGFzdGVDb2x1bW5zRXh0cmFjdG9yKHRydWUpLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHBhc3RlQ29sc0FmdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZVJvd3M+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wUGFzdGVDb2xzQWZ0ZXIsIHBhc3RlQ29sdW1uc0V4dHJhY3RvcihmYWxzZSksIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgcGFzdGVSb3dzQmVmb3JlOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZVJvd3M+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wUGFzdGVSb3dzQmVmb3JlLCBSdW5PcGVyYXRpb24ub25QYXN0ZUJ5RWRpdG9yLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHBhc3RlUm93c0FmdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZVJvd3M+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wUGFzdGVSb3dzQWZ0ZXIsIFJ1bk9wZXJhdGlvbi5vblBhc3RlQnlFZGl0b3IsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgZ2V0Q29sdW1uc1R5cGUgPSBvcEdldENvbHVtbnNUeXBlO1xuZXhwb3J0IGNvbnN0IGdldENlbGxzVHlwZSA9IG9wR2V0Q2VsbHNUeXBlO1xuZXhwb3J0IGNvbnN0IGdldFJvd3NUeXBlID0gb3BHZXRSb3dzVHlwZTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IENvbXBhcmUsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQ2VsbEZpbmRlciBmcm9tICcuLi9zZWxlY3Rpb24vQ2VsbEZpbmRlcic7XG5pbXBvcnQgKiBhcyBDZWxsR3JvdXAgZnJvbSAnLi4vc2VsZWN0aW9uL0NlbGxHcm91cCc7XG5cbmltcG9ydCB0eXBlIHsgQm91bmRzIH0gZnJvbSAnLi9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4vVGFibGVMb29rdXAnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5jb25zdCBtb3ZlQnkgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZGVsdGFSb3c6IG51bWJlciwgZGVsdGFDb2x1bW46IG51bWJlcik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+ID0+IHtcbiAgcmV0dXJuIFRhYmxlTG9va3VwLnRhYmxlKGNlbGwpLmJpbmQoKHRhYmxlKSA9PiB7XG4gICAgY29uc3Qgd2FyZWhvdXNlID0gZ2V0V2FyZWhvdXNlKHRhYmxlKTtcbiAgICByZXR1cm4gQ2VsbEZpbmRlci5tb3ZlQnkod2FyZWhvdXNlLCBjZWxsLCBkZWx0YVJvdywgZGVsdGFDb2x1bW4pO1xuICB9KTtcbn07XG5cbmNvbnN0IGludGVyY2VwdHMgPSAoXG4gIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sXG4gIGZpcnN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LFxuICBsYXN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+XG4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gZ2V0V2FyZWhvdXNlKHRhYmxlKTtcbiAgcmV0dXJuIENlbGxGaW5kZXIuaW50ZXJjZXB0cyh3YXJlaG91c2UsIGZpcnN0LCBsYXN0KTtcbn07XG5cbmNvbnN0IG5lc3RlZEludGVyY2VwdHMgPSAoXG4gIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sXG4gIGZpcnN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LFxuICBmaXJzdFRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sXG4gIGxhc3Q6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sXG4gIGxhc3RUYWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+XG4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gZ2V0V2FyZWhvdXNlKHRhYmxlKTtcbiAgY29uc3Qgb3B0U3RhcnRDZWxsID0gQ29tcGFyZS5lcSh0YWJsZSwgZmlyc3RUYWJsZSkgPyBPcHRpb25hbC5zb21lKGZpcnN0KSA6IENlbGxGaW5kZXIucGFyZW50Q2VsbCh3YXJlaG91c2UsIGZpcnN0KTtcbiAgY29uc3Qgb3B0TGFzdENlbGwgPSBDb21wYXJlLmVxKHRhYmxlLCBsYXN0VGFibGUpID8gT3B0aW9uYWwuc29tZShsYXN0KSA6IENlbGxGaW5kZXIucGFyZW50Q2VsbCh3YXJlaG91c2UsIGxhc3QpO1xuICByZXR1cm4gb3B0U3RhcnRDZWxsLmJpbmQoXG4gICAgKHN0YXJ0Q2VsbCkgPT4gb3B0TGFzdENlbGwuYmluZChcbiAgICAgIChsYXN0Q2VsbCkgPT4gQ2VsbEZpbmRlci5pbnRlcmNlcHRzKHdhcmVob3VzZSwgc3RhcnRDZWxsLCBsYXN0Q2VsbClcbiAgICApXG4gICk7XG59O1xuXG5jb25zdCBnZXRCb3ggPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgZmlyc3Q6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGxhc3Q6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBPcHRpb25hbDxCb3VuZHM+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gZ2V0V2FyZWhvdXNlKHRhYmxlKTtcbiAgcmV0dXJuIENlbGxHcm91cC5nZXRCb3god2FyZWhvdXNlLCBmaXJzdCwgbGFzdCk7XG59O1xuXG4vLyBQcml2YXRlIG1ldGhvZCAuLi4ga2VlcCB3YXJlaG91c2UgaW4gc25vb2tlciwgcGxlYXNlLlxuY29uc3QgZ2V0V2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZTtcblxuZXhwb3J0IHtcbiAgbW92ZUJ5LFxuICBpbnRlcmNlcHRzLFxuICBuZXN0ZWRJbnRlcmNlcHRzLFxuICBnZXRCb3hcbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgUmVwbGljYXRpb24sIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgeyBmaW5kVGFibGVSb3dIZWFkZXJUeXBlLCB0eXBlIFJvd0hlYWRlclR5cGUgfSBmcm9tICcuLi9sb29rdXAvVHlwZSc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0sIFN1YnN0IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlU2VjdGlvbiB7XG4gIHJlYWRvbmx5IHRyYW5zZm9ybVJvdzogKHJvdzogU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50Piwgc2VjdGlvbjogU3RydWN0cy5TZWN0aW9uKSA9PiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+O1xuICByZWFkb25seSB0cmFuc2Zvcm1DZWxsOiAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCkgPT4gU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50Pjtcbn1cblxuY29uc3QgdHJhbnNmb3JtQ2VsbCA9IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KSA9PlxuICBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0aW9uKGNlbGwuZWxlbWVudCwgY29tcGFyYXRvciksIHRydWUsIGNlbGwuaXNMb2NrZWQpO1xuXG5jb25zdCB0cmFuc2Zvcm1Sb3cgPSAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+LCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24pID0+XG4gIHJvdy5zZWN0aW9uICE9PSBzZWN0aW9uID8gU3RydWN0cy5yb3djZWxscyhyb3cuZWxlbWVudCwgcm93LmNlbGxzLCBzZWN0aW9uLCByb3cuaXNOZXcpIDogcm93O1xuXG5jb25zdCBzZWN0aW9uID0gKCk6IFRhYmxlU2VjdGlvbiA9PiAoe1xuICB0cmFuc2Zvcm1Sb3csXG4gIHRyYW5zZm9ybUNlbGw6IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KSA9PiB7XG4gICAgY29uc3QgbmV3Q2VsbCA9IHN1YnN0aXR1dGlvbihjZWxsLmVsZW1lbnQsIGNvbXBhcmF0b3IpO1xuICAgIC8vIENvbnZlcnQgdGhlIGNlbGwgdG8gYSB0ZCBlbGVtZW50IGFzIFwic2VjdGlvblwiIHNob3VsZCBhbHdheXMgdXNlIHRkIGVsZW1lbnRcbiAgICBjb25zdCBmaXhlZENlbGwgPSBTdWdhck5vZGUubmFtZShuZXdDZWxsKSAhPT0gJ3RkJyA/IFJlcGxpY2F0aW9uLm11dGF0ZShuZXdDZWxsLCAndGQnKSA6IG5ld0NlbGw7XG4gICAgcmV0dXJuIFN0cnVjdHMuZWxlbWVudG5ldyhmaXhlZENlbGwsIGNlbGwuaXNOZXcsIGNlbGwuaXNMb2NrZWQpO1xuICB9XG59KTtcblxuY29uc3Qgc2VjdGlvbkNlbGxzID0gKCk6IFRhYmxlU2VjdGlvbiA9PiAoe1xuICB0cmFuc2Zvcm1Sb3csXG4gIHRyYW5zZm9ybUNlbGxcbn0pO1xuXG5jb25zdCBjZWxscyA9ICgpOiBUYWJsZVNlY3Rpb24gPT4gKHtcbiAgdHJhbnNmb3JtUm93OiAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+LCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24pID0+IHtcbiAgICAvLyBFbnN1cmUgdGhhdCBjZWxscyBhcmUgYWx3YXlzIHdpdGhpbiB0aGUgdGJvZHkgZm9yIGhlYWRlcnNcbiAgICBjb25zdCBuZXdTZWN0aW9uID0gc2VjdGlvbiA9PT0gJ3RoZWFkJyA/ICd0Ym9keScgOiBzZWN0aW9uO1xuICAgIHJldHVybiB0cmFuc2Zvcm1Sb3cocm93LCBuZXdTZWN0aW9uKTtcbiAgfSxcbiAgdHJhbnNmb3JtQ2VsbFxufSk7XG5cbi8vIEEgZmFsbGJhY2sgbGVnYWN5IHR5cGUgdGhhdCB3b24ndCBhZGp1c3QgdGhlIHJvdy9zZWN0aW9uIHR5cGVcbi8vIGFuZCBpbnN0ZWFkIHdpbGwgb25seSBtb2RpZnkgY2VsbHNcbmNvbnN0IGZhbGxiYWNrID0gKCk6IFRhYmxlU2VjdGlvbiA9PiAoe1xuICB0cmFuc2Zvcm1Sb3c6IEZ1bi5pZGVudGl0eSxcbiAgdHJhbnNmb3JtQ2VsbFxufSk7XG5cbmNvbnN0IGdldFRhYmxlU2VjdGlvblR5cGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgZmFsbGJhY2s6IFJvd0hlYWRlclR5cGUpOiBUYWJsZVNlY3Rpb24gPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgY29uc3QgdHlwZSA9IGZpbmRUYWJsZVJvd0hlYWRlclR5cGUod2FyZWhvdXNlKS5nZXRPcihmYWxsYmFjayk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3NlY3Rpb24nOlxuICAgICAgcmV0dXJuIHNlY3Rpb24oKTtcbiAgICBjYXNlICdzZWN0aW9uQ2VsbHMnOlxuICAgICAgcmV0dXJuIHNlY3Rpb25DZWxscygpO1xuICAgIGNhc2UgJ2NlbGxzJzpcbiAgICAgIHJldHVybiBjZWxscygpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgVGFibGVTZWN0aW9uID0ge1xuICBnZXRUYWJsZVNlY3Rpb25UeXBlLFxuICBzZWN0aW9uLFxuICBzZWN0aW9uQ2VsbHMsXG4gIGNlbGxzLFxuICBmYWxsYmFja1xufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDc3MsIFN1Z2FyQm9keSwgdHlwZSBTdWdhckVsZW1lbnQsIFdpZHRoIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQ29sdW1uU2l6ZXMgZnJvbSAnLi4vcmVzaXplL0NvbHVtblNpemVzJztcbmltcG9ydCAqIGFzIFNpemVzIGZyb20gJy4uL3Jlc2l6ZS9TaXplcyc7XG5pbXBvcnQgKiBhcyBDZWxsVXRpbHMgZnJvbSAnLi4vdXRpbC9DZWxsVXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7IFdhcmVob3VzZSB9IGZyb20gJy4vV2FyZWhvdXNlJztcblxuZXhwb3J0IGludGVyZmFjZSBUYWJsZVNpemUge1xuICByZWFkb25seSB3aWR0aDogKCkgPT4gbnVtYmVyO1xuICByZWFkb25seSBwaXhlbFdpZHRoOiAoKSA9PiBudW1iZXI7XG4gIHJlYWRvbmx5IGdldFdpZHRoczogKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSkgPT4gbnVtYmVyW107XG4gIHJlYWRvbmx5IGdldENlbGxEZWx0YTogKGRlbHRhOiBudW1iZXIpID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgc2luZ2xlQ29sdW1uV2lkdGg6ICh3OiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IG51bWJlcltdO1xuICByZWFkb25seSBtaW5DZWxsV2lkdGg6ICgpID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgc2V0RWxlbWVudFdpZHRoOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Piwgd2lkdGg6IG51bWJlcikgPT4gdm9pZDtcbiAgcmVhZG9ubHkgYWRqdXN0VGFibGVXaWR0aDogKGRlbHRhOiBudW1iZXIpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGlzUmVsYXRpdmU6IGJvb2xlYW47XG4gIHJlYWRvbmx5IGxhYmVsOiAnbm9uZScgfCAncGl4ZWwnIHwgJ3BlcmNlbnQnO1xufVxuXG5jb25zdCB3aWR0aExvb2t1cCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBnZXR0ZXI6ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PiBudW1iZXIpID0+ICgpID0+IHtcbiAgLy8gVXNlIHRoZSBhY3R1YWwgd2lkdGggaWYgYXR0YWNoZWQsIG90aGVyd2lzZSBmYWxsYmFjayB0byB0aGUgcmF3IHdpZHRoXG4gIGlmIChTdWdhckJvZHkuaW5Cb2R5KHRhYmxlKSkge1xuICAgIHJldHVybiBnZXR0ZXIodGFibGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KENzcy5nZXRSYXcodGFibGUsICd3aWR0aCcpLmdldE9yKCcwJykpO1xuICB9XG59O1xuXG5jb25zdCBub25lU2l6ZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogVGFibGVTaXplID0+IHtcbiAgY29uc3QgZ2V0V2lkdGggPSB3aWR0aExvb2t1cCh0YWJsZSwgV2lkdGguZ2V0KTtcbiAgY29uc3QgemVybyA9IEZ1bi5jb25zdGFudCgwKTtcblxuICBjb25zdCBnZXRXaWR0aHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlU2l6ZTogVGFibGVTaXplKSA9PlxuICAgIENvbHVtblNpemVzLmdldFBpeGVsV2lkdGhzKHdhcmVob3VzZSwgdGFibGUsIHRhYmxlU2l6ZSk7XG5cbiAgLy8gTm90ZTogVGhlIDMgZGVsdGEgZnVuY3Rpb25zIGJlbG93IHJldHVybiAwIHRvIHNpZ25pZnkgYSBjaGFuZ2Ugc2hvdWxkbid0IGJlIG1hZGVcbiAgLy8gaG93ZXZlciB0aGlzIGlzIGN1cnJlbnRseSBub3QgdXNlZCwgc28gbWF5IG5lZWQgY2hhbmdpbmcgaWYgZXZlciB1c2VkXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGdldFdpZHRoLFxuICAgIHBpeGVsV2lkdGg6IGdldFdpZHRoLFxuICAgIGdldFdpZHRocyxcbiAgICBnZXRDZWxsRGVsdGE6IHplcm8sXG4gICAgc2luZ2xlQ29sdW1uV2lkdGg6IEZ1bi5jb25zdGFudChbIDAgXSksXG4gICAgbWluQ2VsbFdpZHRoOiB6ZXJvLFxuICAgIHNldEVsZW1lbnRXaWR0aDogRnVuLm5vb3AsXG4gICAgYWRqdXN0VGFibGVXaWR0aDogRnVuLm5vb3AsXG4gICAgaXNSZWxhdGl2ZTogdHJ1ZSxcbiAgICBsYWJlbDogJ25vbmUnXG4gIH07XG59O1xuXG5jb25zdCBwZXJjZW50YWdlU2l6ZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogVGFibGVTaXplID0+IHtcbiAgY29uc3QgZ2V0RmxvYXRXaWR0aCA9IHdpZHRoTG9va3VwKHRhYmxlLCAoZWxlbSkgPT4gcGFyc2VGbG9hdChTaXplcy5nZXRQZXJjZW50VGFibGVXaWR0aChlbGVtKSkpO1xuICBjb25zdCBnZXRXaWR0aCA9IHdpZHRoTG9va3VwKHRhYmxlLCBXaWR0aC5nZXQpO1xuICBjb25zdCBnZXRDZWxsRGVsdGEgPSAoZGVsdGE6IG51bWJlcikgPT4gZGVsdGEgLyBnZXRXaWR0aCgpICogMTAwO1xuICAvLyBJZiB3ZSBoYXZlIG9uZSBjb2x1bW4gaW4gYSBwZXJjZW50IGJhc2VkIHRhYmxlLCB0aGF0IGNvbHVtbiBzaG91bGQgYmUgMTAwJSBvZiB0aGUgd2lkdGggb2YgdGhlIHRhYmxlLlxuICBjb25zdCBzaW5nbGVDb2x1bW5XaWR0aCA9ICh3OiBudW1iZXIsIF9kZWx0YTogbnVtYmVyKSA9PiBbIDEwMCAtIHcgXTtcbiAgLy8gR2V0IHRoZSB3aWR0aCBvZiBhIDEwIHBpeGVsIHdpZGUgY2VsbCBvdmVyIHRoZSB3aWR0aCBvZiB0aGUgdGFibGUgYXMgYSBwZXJjZW50YWdlXG4gIGNvbnN0IG1pbkNlbGxXaWR0aCA9ICgpID0+IENlbGxVdGlscy5taW5XaWR0aCgpIC8gZ2V0V2lkdGgoKSAqIDEwMDtcblxuICBjb25zdCBhZGp1c3RUYWJsZVdpZHRoID0gKGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50V2lkdGggPSBnZXRGbG9hdFdpZHRoKCk7XG4gICAgY29uc3QgY2hhbmdlID0gZGVsdGEgLyAxMDAgKiBjdXJyZW50V2lkdGg7XG4gICAgY29uc3QgbmV3V2lkdGggPSBjdXJyZW50V2lkdGggKyBjaGFuZ2U7XG4gICAgU2l6ZXMuc2V0UGVyY2VudGFnZVdpZHRoKHRhYmxlLCBuZXdXaWR0aCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0V2lkdGhzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSkgPT5cbiAgICBDb2x1bW5TaXplcy5nZXRQZXJjZW50YWdlV2lkdGhzKHdhcmVob3VzZSwgdGFibGUsIHRhYmxlU2l6ZSk7XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogZ2V0RmxvYXRXaWR0aCxcbiAgICBwaXhlbFdpZHRoOiBnZXRXaWR0aCxcbiAgICBnZXRXaWR0aHMsXG4gICAgZ2V0Q2VsbERlbHRhLFxuICAgIHNpbmdsZUNvbHVtbldpZHRoLFxuICAgIG1pbkNlbGxXaWR0aCxcbiAgICBzZXRFbGVtZW50V2lkdGg6IFNpemVzLnNldFBlcmNlbnRhZ2VXaWR0aCxcbiAgICBhZGp1c3RUYWJsZVdpZHRoLFxuICAgIGlzUmVsYXRpdmU6IHRydWUsXG4gICAgbGFiZWw6ICdwZXJjZW50J1xuICB9O1xufTtcblxuY29uc3QgcGl4ZWxTaXplID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBUYWJsZVNpemUgPT4ge1xuICBjb25zdCBnZXRXaWR0aCA9IHdpZHRoTG9va3VwKHRhYmxlLCBXaWR0aC5nZXQpO1xuICBjb25zdCBnZXRDZWxsRGVsdGEgPSBGdW4uaWRlbnRpdHk7XG5cbiAgY29uc3Qgc2luZ2xlQ29sdW1uV2lkdGggPSAodzogbnVtYmVyLCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbmV3TmV4dCA9IE1hdGgubWF4KENlbGxVdGlscy5taW5XaWR0aCgpLCB3ICsgZGVsdGEpO1xuICAgIHJldHVybiBbIG5ld05leHQgLSB3IF07XG4gIH07XG5cbiAgY29uc3QgYWRqdXN0VGFibGVXaWR0aCA9IChkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbmV3V2lkdGggPSBnZXRXaWR0aCgpICsgZGVsdGE7XG4gICAgU2l6ZXMuc2V0UGl4ZWxXaWR0aCh0YWJsZSwgbmV3V2lkdGgpO1xuICB9O1xuXG4gIGNvbnN0IGdldFdpZHRocyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFibGVTaXplOiBUYWJsZVNpemUpID0+XG4gICAgQ29sdW1uU2l6ZXMuZ2V0UGl4ZWxXaWR0aHMod2FyZWhvdXNlLCB0YWJsZSwgdGFibGVTaXplKTtcblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiBnZXRXaWR0aCxcbiAgICBwaXhlbFdpZHRoOiBnZXRXaWR0aCxcbiAgICBnZXRXaWR0aHMsXG4gICAgZ2V0Q2VsbERlbHRhLFxuICAgIHNpbmdsZUNvbHVtbldpZHRoLFxuICAgIG1pbkNlbGxXaWR0aDogQ2VsbFV0aWxzLm1pbldpZHRoLFxuICAgIHNldEVsZW1lbnRXaWR0aDogU2l6ZXMuc2V0UGl4ZWxXaWR0aCxcbiAgICBhZGp1c3RUYWJsZVdpZHRoLFxuICAgIGlzUmVsYXRpdmU6IGZhbHNlLFxuICAgIGxhYmVsOiAncGl4ZWwnXG4gIH07XG59O1xuXG5jb25zdCBjaG9vc2VTaXplID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Piwgd2lkdGg6IHN0cmluZykgPT4ge1xuICBjb25zdCBwZXJjZW50TWF0Y2ggPSBTaXplcy5wZXJjZW50YWdlQmFzZWRTaXplUmVnZXgoKS5leGVjKHdpZHRoKTtcbiAgaWYgKHBlcmNlbnRNYXRjaCAhPT0gbnVsbCkge1xuICAgIHJldHVybiBwZXJjZW50YWdlU2l6ZShlbGVtZW50KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGl4ZWxTaXplKGVsZW1lbnQpO1xuICB9XG59O1xuXG5jb25zdCBnZXRUYWJsZVNpemUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IFRhYmxlU2l6ZSA9PiB7XG4gIGNvbnN0IHdpZHRoID0gU2l6ZXMuZ2V0UmF3V2lkdGgodGFibGUpO1xuICByZXR1cm4gd2lkdGguZm9sZChcbiAgICAoKSA9PiBub25lU2l6ZSh0YWJsZSksXG4gICAgKHcpID0+IGNob29zZVNpemUodGFibGUsIHcpXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgVGFibGVTaXplID0ge1xuICBnZXRUYWJsZVNpemUsXG4gIHBpeGVsU2l6ZSxcbiAgcGVyY2VudGFnZVNpemUsXG4gIG5vbmVTaXplXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPYmosIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgKiBhcyBEZXRhaWxzTGlzdCBmcm9tICcuLi9tb2RlbC9EZXRhaWxzTGlzdCc7XG5pbXBvcnQgKiBhcyBMb2NrZWRDb2x1bW5VdGlscyBmcm9tICcuLi91dGlsL0xvY2tlZENvbHVtblV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4vVGFibGVMb29rdXAnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdhcmVob3VzZSB7XG4gIHJlYWRvbmx5IGdyaWQ6IFN0cnVjdHMuR3JpZDtcbiAgcmVhZG9ubHkgYWNjZXNzOiBSZWNvcmQ8c3RyaW5nLCBTdHJ1Y3RzLkRldGFpbEV4dD47XG4gIHJlYWRvbmx5IGFsbDogU3RydWN0cy5Sb3dEZXRhaWw8U3RydWN0cy5EZXRhaWxFeHQsIEhUTUxUYWJsZVJvd0VsZW1lbnQ+W107XG4gIHJlYWRvbmx5IGNvbHVtbnM6IFJlY29yZDxudW1iZXIsIFN0cnVjdHMuQ29sdW1uRXh0PjtcbiAgcmVhZG9ubHkgY29sZ3JvdXBzOiBTdHJ1Y3RzLkNvbGdyb3VwPFN0cnVjdHMuQ29sdW1uRXh0PltdO1xufVxuXG5jb25zdCBrZXkgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHJvdyArICcsJyArIGNvbHVtbjtcbn07XG5cbmNvbnN0IGdldEF0ID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCByb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBPcHRpb25hbDxTdHJ1Y3RzLkRldGFpbEV4dD4gPT5cbiAgT3B0aW9uYWwuZnJvbSh3YXJlaG91c2UuYWNjZXNzW2tleShyb3csIGNvbHVtbildKTtcblxuY29uc3QgZmluZEl0ZW0gPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGl0ZW06IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBPcHRpb25hbDxTdHJ1Y3RzLkRldGFpbEV4dD4gPT4ge1xuICBjb25zdCBmaWx0ZXJlZCA9IGZpbHRlckl0ZW1zKHdhcmVob3VzZSwgKGRldGFpbCkgPT4ge1xuICAgIHJldHVybiBjb21wYXJhdG9yKGl0ZW0sIGRldGFpbC5lbGVtZW50KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGZpbHRlcmVkLmxlbmd0aCA+IDAgPyBPcHRpb25hbC5zb21lKGZpbHRlcmVkWzBdKSA6IE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmNvbnN0IGZpbHRlckl0ZW1zID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBwcmVkaWNhdGU6ICh4OiBTdHJ1Y3RzLkRldGFpbEV4dCwgaTogbnVtYmVyKSA9PiBib29sZWFuKTogU3RydWN0cy5EZXRhaWxFeHRbXSA9PiB7XG4gIGNvbnN0IGFsbCA9IEFyci5iaW5kKHdhcmVob3VzZS5hbGwsIChyKSA9PiB7XG4gICAgcmV0dXJuIHIuY2VsbHM7XG4gIH0pO1xuICByZXR1cm4gQXJyLmZpbHRlcihhbGwsIHByZWRpY2F0ZSk7XG59O1xuXG5jb25zdCBnZW5lcmF0ZUNvbHVtbnMgPSAocm93RGF0YTogU3RydWN0cy5Sb3dEZXRhaWw8U3RydWN0cy5EZXRhaWw8SFRNTFRhYmxlQ29sRWxlbWVudD4sIEhUTUxUYWJsZUNvbEVsZW1lbnQ+KTogUmVjb3JkPG51bWJlciwgU3RydWN0cy5Db2x1bW5FeHQ+ID0+IHtcbiAgY29uc3QgY29sdW1uc0dyb3VwOiBSZWNvcmQ8bnVtYmVyLCBTdHJ1Y3RzLkNvbHVtbkV4dD4gPSB7fTtcbiAgbGV0IGluZGV4ID0gMDtcblxuICBBcnIuZWFjaChyb3dEYXRhLmNlbGxzLCAoY29sdW1uKSA9PiB7XG4gICAgY29uc3QgY29sc3BhbiA9IGNvbHVtbi5jb2xzcGFuO1xuXG4gICAgQXJyLnJhbmdlKGNvbHNwYW4sIChjb2x1bW5JbmRleCkgPT4ge1xuICAgICAgY29uc3QgY29sSW5kZXggPSBpbmRleCArIGNvbHVtbkluZGV4O1xuICAgICAgY29sdW1uc0dyb3VwW2NvbEluZGV4XSA9IFN0cnVjdHMuY29sdW1uZXh0KGNvbHVtbi5lbGVtZW50LCBjb2xzcGFuLCBjb2xJbmRleCk7XG4gICAgfSk7XG5cbiAgICBpbmRleCArPSBjb2xzcGFuO1xuICB9KTtcblxuICByZXR1cm4gY29sdW1uc0dyb3VwO1xufTtcblxuLypcbiAqIEZyb20gYSBsaXN0IG9mIGxpc3Qgb2YgRGV0YWlsLCBnZW5lcmF0ZSB0aHJlZSBwaWVjZXMgb2YgaW5mb3JtYXRpb246XG4gKiAgMS4gdGhlIGdyaWQgc2l6ZVxuICogIDIuIGEgZGF0YSBzdHJ1Y3R1cmUgd2hpY2ggY2FuIGVmZmljaWVudGx5IGlkZW50aWZ5IHdoaWNoIGNlbGwgaXMgaW4gd2hpY2ggcm93LGNvbHVtbiBwb3NpdGlvblxuICogIDMuIGEgbGlzdCBvZiBhbGwgY2VsbHMgaW4gb3JkZXIgbGVmdC10by1yaWdodCwgdG9wLXRvLWJvdHRvbVxuICovXG5jb25zdCBnZW5lcmF0ZSA9IChsaXN0OiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbD5bXSk6IFdhcmVob3VzZSA9PiB7XG4gIC8vIGxpc3QgaXMgYW4gYXJyYXkgb2Ygb2JqZWN0cywgbWFkZSBieSBjZWxscyBhbmQgZWxlbWVudHNcbiAgLy8gZWxlbWVudHM6IGlzIHRoZSBUUlxuICAvLyBjZWxsczogaXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyByZXByZXNlbnRpbmcgdGhlIGNlbGxzIGluIHRoZSByb3cuXG4gIC8vICAgICAgICBJdCBpcyBtYWRlIG9mOlxuICAvLyAgICAgICAgICBjb2xzcGFuIChtZXJnZSBjZWxsKVxuICAvLyAgICAgICAgICBlbGVtZW50XG4gIC8vICAgICAgICAgIHJvd3NwYW4gKG1lcmdlIGNvbHMpXG4gIGNvbnN0IGFjY2VzczogUmVjb3JkPHN0cmluZywgU3RydWN0cy5EZXRhaWxFeHQ+ID0ge307XG4gIGNvbnN0IGNlbGxzOiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbEV4dCwgSFRNTFRhYmxlUm93RWxlbWVudD5bXSA9IFtdO1xuXG4gIGNvbnN0IHRhYmxlT3B0ID0gQXJyLmhlYWQobGlzdCkubWFwKChyb3dEYXRhKSA9PiByb3dEYXRhLmVsZW1lbnQpLmJpbmQoVGFibGVMb29rdXAudGFibGUpO1xuICBjb25zdCBsb2NrZWRDb2x1bW5zOiBSZWNvcmQ8c3RyaW5nLCB0cnVlPiA9IHRhYmxlT3B0LmJpbmQoTG9ja2VkQ29sdW1uVXRpbHMuZ2V0TG9ja2VkQ29sdW1uc0Zyb21UYWJsZSkuZ2V0T3Ioe30pO1xuXG4gIGxldCBtYXhSb3dzID0gMDtcbiAgbGV0IG1heENvbHVtbnMgPSAwO1xuICBsZXQgcm93Q291bnQgPSAwO1xuXG4gIGNvbnN0IHsgcGFzczogY29sZ3JvdXBSb3dzLCBmYWlsOiByb3dzIH0gPSBBcnIucGFydGl0aW9uKGxpc3QsIChyb3dEYXRhKSA9PiByb3dEYXRhLnNlY3Rpb24gPT09ICdjb2xncm91cCcpO1xuXG4gIC8vIEhhbmRsZSByb3dzIGZpcnN0XG4gIEFyci5lYWNoKHJvd3MgYXMgQXJyYXk8U3RydWN0cy5Sb3dEZXRhaWw8U3RydWN0cy5EZXRhaWw8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBIVE1MVGFibGVSb3dFbGVtZW50Pj4sIChyb3dEYXRhKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFJvdzogU3RydWN0cy5EZXRhaWxFeHRbXSA9IFtdO1xuICAgIEFyci5lYWNoKHJvd0RhdGEuY2VsbHMsIChyb3dDZWxsKSA9PiB7XG4gICAgICBsZXQgc3RhcnQgPSAwO1xuXG4gICAgICAvLyBJZiB0aGlzIHNwb3QgaGFzIGJlZW4gdGFrZW4gYnkgYSBwcmV2aW91cyByb3dzcGFuLCBza2lwIGl0LlxuICAgICAgd2hpbGUgKGFjY2Vzc1trZXkocm93Q291bnQsIHN0YXJ0KV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdGFydCsrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0xvY2tlZCA9IE9iai5oYXNOb25OdWxsYWJsZUtleShsb2NrZWRDb2x1bW5zLCBzdGFydC50b1N0cmluZygpKTtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBTdHJ1Y3RzLmV4dGVuZGVkKHJvd0NlbGwuZWxlbWVudCwgcm93Q2VsbC5yb3dzcGFuLCByb3dDZWxsLmNvbHNwYW4sIHJvd0NvdW50LCBzdGFydCwgaXNMb2NrZWQpO1xuXG4gICAgICAvLyBPY2N1cHkgYWxsIHRoZSAocm93LCBjb2x1bW4pIHBvc2l0aW9ucyB0aGF0IHRoaXMgY2VsbCBzcGFucyBmb3IuXG4gICAgICBmb3IgKGxldCBvY2N1cGllZENvbHVtblBvc2l0aW9uID0gMDsgb2NjdXBpZWRDb2x1bW5Qb3NpdGlvbiA8IHJvd0NlbGwuY29sc3Bhbjsgb2NjdXBpZWRDb2x1bW5Qb3NpdGlvbisrKSB7XG4gICAgICAgIGZvciAobGV0IG9jY3VwaWVkUm93UG9zaXRpb24gPSAwOyBvY2N1cGllZFJvd1Bvc2l0aW9uIDwgcm93Q2VsbC5yb3dzcGFuOyBvY2N1cGllZFJvd1Bvc2l0aW9uKyspIHtcbiAgICAgICAgICBjb25zdCByb3dQb3NpdGlvbiA9IHJvd0NvdW50ICsgb2NjdXBpZWRSb3dQb3NpdGlvbjtcbiAgICAgICAgICBjb25zdCBjb2x1bW5Qb3NpdGlvbiA9IHN0YXJ0ICsgb2NjdXBpZWRDb2x1bW5Qb3NpdGlvbjtcbiAgICAgICAgICBjb25zdCBuZXdwb3MgPSBrZXkocm93UG9zaXRpb24sIGNvbHVtblBvc2l0aW9uKTtcbiAgICAgICAgICBhY2Nlc3NbbmV3cG9zXSA9IGN1cnJlbnQ7XG4gICAgICAgICAgbWF4Q29sdW1ucyA9IE1hdGgubWF4KG1heENvbHVtbnMsIGNvbHVtblBvc2l0aW9uICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3VycmVudFJvdy5wdXNoKGN1cnJlbnQpO1xuICAgIH0pO1xuXG4gICAgbWF4Um93cysrO1xuICAgIGNlbGxzLnB1c2goU3RydWN0cy5yb3dkZXRhaWwocm93RGF0YS5lbGVtZW50LCBjdXJyZW50Um93LCByb3dEYXRhLnNlY3Rpb24pKTtcbiAgICByb3dDb3VudCsrO1xuICB9KTtcblxuICAvLyBIYW5kbGUgY29sZ3JvdXBzXG4gIC8vIE5vdGU6IEN1cnJlbnRseSBvbmx5IGEgc2luZ2xlIGNvbGdyb3VwIGlzIHN1cHBvcnRlZCBzbyBqdXN0IHVzZSB0aGUgbGFzdCBvbmVcbiAgY29uc3QgeyBjb2x1bW5zLCBjb2xncm91cHMgfSA9IEFyci5sYXN0KGNvbGdyb3VwUm93cyBhcyBBcnJheTxTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbDxIVE1MVGFibGVDb2xFbGVtZW50PiwgSFRNTFRhYmxlQ29sRWxlbWVudD4+KS5tYXAoKHJvd0RhdGEpID0+IHtcbiAgICBjb25zdCBjb2x1bW5zID0gZ2VuZXJhdGVDb2x1bW5zKHJvd0RhdGEpO1xuICAgIGNvbnN0IGNvbGdyb3VwID0gU3RydWN0cy5jb2xncm91cChyb3dEYXRhLmVsZW1lbnQsIE9iai52YWx1ZXMoY29sdW1ucykpO1xuICAgIHJldHVybiB7XG4gICAgICBjb2xncm91cHM6IFsgY29sZ3JvdXAgXSxcbiAgICAgIGNvbHVtbnNcbiAgICB9O1xuICB9KS5nZXRPclRodW5rKCgpID0+ICh7XG4gICAgY29sZ3JvdXBzOiBbXSxcbiAgICBjb2x1bW5zOiB7fVxuICB9KSk7XG5cbiAgY29uc3QgZ3JpZCA9IFN0cnVjdHMuZ3JpZChtYXhSb3dzLCBtYXhDb2x1bW5zKTtcblxuICByZXR1cm4ge1xuICAgIGdyaWQsXG4gICAgYWNjZXNzLFxuICAgIGFsbDogY2VsbHMsXG4gICAgY29sdW1ucyxcbiAgICBjb2xncm91cHNcbiAgfTtcbn07XG5cbmNvbnN0IGZyb21UYWJsZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogV2FyZWhvdXNlID0+IHtcbiAgY29uc3QgbGlzdCA9IERldGFpbHNMaXN0LmZyb21UYWJsZSh0YWJsZSk7XG4gIHJldHVybiBnZW5lcmF0ZShsaXN0KTtcbn07XG5cbmNvbnN0IGp1c3RDZWxscyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSk6IFN0cnVjdHMuRGV0YWlsRXh0W10gPT5cbiAgQXJyLmJpbmQod2FyZWhvdXNlLmFsbCwgKHcpID0+IHcuY2VsbHMpO1xuXG5jb25zdCBqdXN0Q29sdW1ucyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSk6IFN0cnVjdHMuQ29sdW1uRXh0W10gPT5cbiAgT2JqLnZhbHVlcyh3YXJlaG91c2UuY29sdW1ucyk7XG5cbmNvbnN0IGhhc0NvbHVtbnMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UpOiBib29sZWFuID0+XG4gIE9iai5rZXlzKHdhcmVob3VzZS5jb2x1bW5zKS5sZW5ndGggPiAwO1xuXG5jb25zdCBnZXRDb2x1bW5BdCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgY29sdW1uSW5kZXg6IG51bWJlcik6IE9wdGlvbmFsPFN0cnVjdHMuQ29sdW1uRXh0PiA9PlxuICBPcHRpb25hbC5mcm9tKHdhcmVob3VzZS5jb2x1bW5zW2NvbHVtbkluZGV4XSk7XG5cbmV4cG9ydCBjb25zdCBXYXJlaG91c2UgPSB7XG4gIGZyb21UYWJsZSxcbiAgZ2VuZXJhdGUsXG4gIGdldEF0LFxuICBmaW5kSXRlbSxcbiAgZmlsdGVySXRlbXMsXG4gIGp1c3RDZWxscyxcbiAganVzdENvbHVtbnMsXG4gIGhhc0NvbHVtbnMsXG4gIGdldENvbHVtbkF0XG59O1xuIiwiaW1wb3J0IHsgQWR0IH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxudHlwZSBOb25lSGFuZGxlcjxUPiA9ICgpID0+IFQ7XG50eXBlIE9ubHlIYW5kbGVyPFQ+ID0gKGluZGV4OiBudW1iZXIpID0+IFQ7XG50eXBlIExlZnRIYW5kbGVyPFQ+ID0gKGluZGV4OiBudW1iZXIsIG5leHQ6IG51bWJlcikgPT4gVDtcbnR5cGUgTWlkZGxlSGFuZGxlcjxUPiA9IChwcmV2OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIG5leHQ6IG51bWJlcikgPT4gVDtcbnR5cGUgUmlnaHRIYW5kbGVyPFQ+ID0gKHByZXY6IG51bWJlciwgaW5kZXg6IG51bWJlcikgPT4gVDtcblxuZXhwb3J0IGludGVyZmFjZSBDb2x1bW5Db250ZXh0IHtcbiAgZm9sZDogPFQ+IChcbiAgICBub25lOiBOb25lSGFuZGxlcjxUPixcbiAgICBvbmx5OiBPbmx5SGFuZGxlcjxUPixcbiAgICBsZWZ0OiBMZWZ0SGFuZGxlcjxUPixcbiAgICBtaWRkbGU6IE1pZGRsZUhhbmRsZXI8VD4sXG4gICAgcmlnaHQ6IFJpZ2h0SGFuZGxlcjxUPixcbiAgKSA9PiBUO1xuICBtYXRjaDogPFQ+IChicmFuY2hlczoge1xuICAgIG5vbmU6IE5vbmVIYW5kbGVyPFQ+O1xuICAgIG9ubHk6IE9ubHlIYW5kbGVyPFQ+O1xuICAgIGxlZnQ6IExlZnRIYW5kbGVyPFQ+O1xuICAgIG1pZGRsZTogTWlkZGxlSGFuZGxlcjxUPjtcbiAgICByaWdodDogUmlnaHRIYW5kbGVyPFQ+O1xuICB9KSA9PiBUO1xuICBsb2c6IChsYWJlbDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5jb25zdCBhZHQ6IHtcbiAgbm9uZTogTm9uZUhhbmRsZXI8Q29sdW1uQ29udGV4dD47XG4gIG9ubHk6IE9ubHlIYW5kbGVyPENvbHVtbkNvbnRleHQ+O1xuICBsZWZ0OiBMZWZ0SGFuZGxlcjxDb2x1bW5Db250ZXh0PjtcbiAgbWlkZGxlOiBNaWRkbGVIYW5kbGVyPENvbHVtbkNvbnRleHQ+O1xuICByaWdodDogUmlnaHRIYW5kbGVyPENvbHVtbkNvbnRleHQ+O1xufSA9IEFkdC5nZW5lcmF0ZShbXG4gIHsgbm9uZTogW10gfSxcbiAgeyBvbmx5OiBbICdpbmRleCcgXSB9LFxuICB7IGxlZnQ6IFsgJ2luZGV4JywgJ25leHQnIF0gfSxcbiAgeyBtaWRkbGU6IFsgJ3ByZXYnLCAnaW5kZXgnLCAnbmV4dCcgXSB9LFxuICB7IHJpZ2h0OiBbICdwcmV2JywgJ2luZGV4JyBdIH1cbl0pO1xuXG5leHBvcnQgY29uc3QgQ29sdW1uQ29udGV4dCA9IHtcbiAgLi4uYWR0XG59OyIsImltcG9ydCB7IEFyciwgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBSZXNpemVCZWhhdmlvdXIgfSBmcm9tICcuLi9hcGkvUmVzaXplQmVoYXZpb3VyJztcbmltcG9ydCB0eXBlIHsgVGFibGVTaXplIH0gZnJvbSAnLi4vYXBpL1RhYmxlU2l6ZSc7XG5cbmltcG9ydCB7IENvbHVtbkNvbnRleHQgfSBmcm9tICcuL0NvbHVtbkNvbnRleHQnO1xuXG4vKlxuICogQmFzZWQgb24gdGhlIGNvbHVtbiBpbmRleCwgaWRlbnRpZnkgdGhlIGNvbnRleHRcbiAqL1xuY29uc3QgbmVpZ2hib3VycyA9IChpbnB1dDogbnVtYmVyW10sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBDb2x1bW5Db250ZXh0Lm5vbmUoKTtcbiAgfVxuICBpZiAoaW5wdXQubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIENvbHVtbkNvbnRleHQub25seSgwKTtcbiAgfVxuICBpZiAoaW5kZXggPT09IDApIHtcbiAgICByZXR1cm4gQ29sdW1uQ29udGV4dC5sZWZ0KDAsIDEpO1xuICB9XG4gIGlmIChpbmRleCA9PT0gaW5wdXQubGVuZ3RoIC0gMSkge1xuICAgIHJldHVybiBDb2x1bW5Db250ZXh0LnJpZ2h0KGluZGV4IC0gMSwgaW5kZXgpO1xuICB9XG4gIGlmIChpbmRleCA+IDAgJiYgaW5kZXggPCBpbnB1dC5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuIENvbHVtbkNvbnRleHQubWlkZGxlKGluZGV4IC0gMSwgaW5kZXgsIGluZGV4ICsgMSk7XG4gIH1cbiAgcmV0dXJuIENvbHVtbkNvbnRleHQubm9uZSgpO1xufTtcblxuLypcbiAqIENhbGN1bGF0ZSB0aGUgb2Zmc2V0cyB0byBhcHBseSB0byBlYWNoIGNvbHVtbiB3aWR0aCAobm90IHRoZSBhYnNvbHV0ZSB3aWR0aHMgdGhlbXNlbHZlcylcbiAqIGJhc2VkIG9uIGEgcmVzaXplIGF0IGNvbHVtbjogY29sdW1uIG9mIHN0ZXA6IHN0ZXBcbiAqL1xuY29uc3QgZGV0ZXJtaW5lID0gKGlucHV0OiBudW1iZXJbXSwgY29sdW1uOiBudW1iZXIsIHN0ZXA6IG51bWJlciwgdGFibGVTaXplOiBUYWJsZVNpemUsIHJlc2l6ZTogUmVzaXplQmVoYXZpb3VyKTogbnVtYmVyW10gPT4ge1xuICBjb25zdCByZXN1bHQgPSBpbnB1dC5zbGljZSgwKTtcbiAgY29uc3QgY29udGV4dCA9IG5laWdoYm91cnMoaW5wdXQsIGNvbHVtbik7XG5cbiAgY29uc3Qgb25Ob25lID0gRnVuLmNvbnN0YW50KEFyci5tYXAocmVzdWx0LCBGdW4uY29uc3RhbnQoMCkpKTtcbiAgY29uc3Qgb25Pbmx5ID0gKGluZGV4OiBudW1iZXIpID0+IHRhYmxlU2l6ZS5zaW5nbGVDb2x1bW5XaWR0aChyZXN1bHRbaW5kZXhdLCBzdGVwKTtcblxuICBjb25zdCBvbkxlZnQgPSAoaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyKSA9PlxuICAgIHJlc2l6ZS5jYWxjTGVmdEVkZ2VEZWx0YXMocmVzdWx0LCBpbmRleCwgbmV4dCwgc3RlcCwgdGFibGVTaXplLm1pbkNlbGxXaWR0aCgpLCB0YWJsZVNpemUuaXNSZWxhdGl2ZSk7XG5cbiAgY29uc3Qgb25NaWRkbGUgPSAocHJldjogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIpID0+XG4gICAgcmVzaXplLmNhbGNNaWRkbGVEZWx0YXMocmVzdWx0LCBwcmV2LCBpbmRleCwgbmV4dCwgc3RlcCwgdGFibGVTaXplLm1pbkNlbGxXaWR0aCgpLCB0YWJsZVNpemUuaXNSZWxhdGl2ZSk7XG5cbiAgLy8gQXBwbGllcyB0byB0aGUgbGFzdCBjb2x1bW4gYmFyXG4gIGNvbnN0IG9uUmlnaHQgPSAocHJldjogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PlxuICAgIHJlc2l6ZS5jYWxjUmlnaHRFZGdlRGVsdGFzKHJlc3VsdCwgcHJldiwgaW5kZXgsIHN0ZXAsIHRhYmxlU2l6ZS5taW5DZWxsV2lkdGgoKSwgdGFibGVTaXplLmlzUmVsYXRpdmUpO1xuXG4gIHJldHVybiBjb250ZXh0LmZvbGQob25Ob25lLCBvbk9ubHksIG9uTGVmdCwgb25NaWRkbGUsIG9uUmlnaHQpO1xufTtcblxuZXhwb3J0IHtcbiAgZGV0ZXJtaW5lXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBEZXRhaWxFeHQgfSBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuLi9hcGkvV2FyZWhvdXNlJztcblxudHlwZSBWYWxpZENlbGxGbiA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiBib29sZWFuO1xuXG4vKlxuICogSWRlbnRpZnkgZm9yIGVhY2ggY29sdW1uLCBhIGNlbGwgdGhhdCBoYXMgY29sc3BhbiAxLiBOb3RlLCB0aGlzXG4gKiBtYXkgYWN0dWFsbHkgZmFpbCwgYW5kIGZ1dHVyZSB3b3JrIHdpbGwgYmUgdG8gY2FsY3VsYXRlIGNvbHVtblxuICogc2l6ZXMgdGhhdCBhcmUgb25seSBhdmFpbGFibGUgdGhyb3VnaCB0aGUgZGlmZmVyZW5jZSBvZiB0d29cbiAqIHNwYW5uaW5nIGNvbHVtbnMuXG4gKi9cbmNvbnN0IGNvbHVtbnMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGlzVmFsaWRDZWxsOiBWYWxpZENlbGxGbiA9IEZ1bi5hbHdheXMpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PltdID0+IHtcbiAgY29uc3QgZ3JpZCA9IHdhcmVob3VzZS5ncmlkO1xuICBjb25zdCBjb2xzID0gQXJyLnJhbmdlKGdyaWQuY29sdW1ucywgRnVuLmlkZW50aXR5KTtcbiAgY29uc3Qgcm93c0FyciA9IEFyci5yYW5nZShncmlkLnJvd3MsIEZ1bi5pZGVudGl0eSk7XG5cbiAgcmV0dXJuIEFyci5tYXAoY29scywgKGNvbCkgPT4ge1xuICAgIGNvbnN0IGdldEJsb2NrID0gKCkgPT5cbiAgICAgIEFyci5iaW5kKHJvd3NBcnIsIChyKSA9PlxuICAgICAgICBXYXJlaG91c2UuZ2V0QXQod2FyZWhvdXNlLCByLCBjb2wpXG4gICAgICAgICAgLmZpbHRlcigoZGV0YWlsKSA9PiBkZXRhaWwuY29sdW1uID09PSBjb2wpXG4gICAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgKTtcblxuICAgIGNvbnN0IGlzVmFsaWQgPSAoZGV0YWlsOiBEZXRhaWxFeHQpID0+IGRldGFpbC5jb2xzcGFuID09PSAxICYmIGlzVmFsaWRDZWxsKGRldGFpbC5lbGVtZW50KTtcbiAgICBjb25zdCBnZXRGYWxsYmFjayA9ICgpID0+IFdhcmVob3VzZS5nZXRBdCh3YXJlaG91c2UsIDAsIGNvbCk7XG4gICAgcmV0dXJuIGRlY2lkZShnZXRCbG9jaywgaXNWYWxpZCwgZ2V0RmFsbGJhY2spO1xuICB9KTtcbn07XG5cbmNvbnN0IGRlY2lkZSA9IChcbiAgZ2V0QmxvY2s6ICgpID0+IERldGFpbEV4dFtdLFxuICBpc1ZhbGlkOiAoZGV0YWlsOiBEZXRhaWxFeHQpID0+IGJvb2xlYW4sXG4gIGdldEZhbGxiYWNrOiAoKSA9PiBPcHRpb25hbDxEZXRhaWxFeHQ+XG4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PiB7XG4gIGNvbnN0IGluQmxvY2sgPSBnZXRCbG9jaygpO1xuICBjb25zdCB2YWxpZEluQmxvY2sgPSBBcnIuZmluZChpbkJsb2NrLCBpc1ZhbGlkKTtcbiAgY29uc3QgZGV0YWlsT3B0aW9uID0gdmFsaWRJbkJsb2NrLm9yVGh1bmsoKCkgPT4gT3B0aW9uYWwuZnJvbShpbkJsb2NrWzBdKS5vclRodW5rKGdldEZhbGxiYWNrKSk7XG4gIHJldHVybiBkZXRhaWxPcHRpb24ubWFwKChkZXRhaWwpID0+IGRldGFpbC5lbGVtZW50KTtcbn07XG5cbmNvbnN0IHJvd3MgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PltdID0+IHtcbiAgY29uc3QgZ3JpZCA9IHdhcmVob3VzZS5ncmlkO1xuICBjb25zdCByb3dzQXJyID0gQXJyLnJhbmdlKGdyaWQucm93cywgRnVuLmlkZW50aXR5KTtcbiAgY29uc3QgY29scyA9IEFyci5yYW5nZShncmlkLmNvbHVtbnMsIEZ1bi5pZGVudGl0eSk7XG5cbiAgcmV0dXJuIEFyci5tYXAocm93c0FyciwgKHJvdykgPT4ge1xuICAgIGNvbnN0IGdldEJsb2NrID0gKCkgPT4gQXJyLmJpbmQoY29scywgKGMpID0+IFdhcmVob3VzZS5nZXRBdCh3YXJlaG91c2UsIHJvdywgYylcbiAgICAgIC5maWx0ZXIoKGRldGFpbCkgPT4gZGV0YWlsLnJvdyA9PT0gcm93KVxuICAgICAgLmZvbGQoRnVuLmNvbnN0YW50KFtdIGFzIERldGFpbEV4dFtdKSwgKGRldGFpbCkgPT4gWyBkZXRhaWwgXSlcbiAgICApO1xuXG4gICAgY29uc3QgaXNTaW5nbGUgPSAoZGV0YWlsOiBEZXRhaWxFeHQpID0+IGRldGFpbC5yb3dzcGFuID09PSAxO1xuICAgIGNvbnN0IGdldEZhbGxiYWNrID0gKCkgPT4gV2FyZWhvdXNlLmdldEF0KHdhcmVob3VzZSwgcm93LCAwKTtcbiAgICByZXR1cm4gZGVjaWRlKGdldEJsb2NrLCBpc1NpbmdsZSwgZ2V0RmFsbGJhY2spO1xuICB9KTtcblxufTtcblxuZXhwb3J0IHsgY29sdW1ucywgcm93cyB9O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCwgT3B0aW9uYWxzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0IHR5cGUgeyBXYXJlaG91c2UgfSBmcm9tICcuLi9hcGkvV2FyZWhvdXNlJztcbmltcG9ydCB0eXBlIHsgQ2VsbEVsZW1lbnQgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5leHBvcnQgdHlwZSBSb3dIZWFkZXJUeXBlID0gJ3NlY3Rpb24nIHwgJ2NlbGxzJyB8ICdzZWN0aW9uQ2VsbHMnO1xuZXhwb3J0IHR5cGUgUm93VHlwZSA9ICdoZWFkZXInIHwgJ2JvZHknIHwgJ2Zvb3Rlcic7XG5cbmludGVyZmFjZSBSb3dEZXRhaWxzIHtcbiAgcmVhZG9ubHkgdHlwZTogUm93VHlwZTtcbiAgcmVhZG9ubHkgc3ViVHlwZT86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENvbW1vbkNlbGxEZXRhaWxzIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50Pjtcbn1cblxuaW50ZXJmYWNlIENvbW1vblJvd0RldGFpbHMge1xuICByZWFkb25seSBjZWxsczogQ29tbW9uQ2VsbERldGFpbHNbXTtcbiAgcmVhZG9ubHkgc2VjdGlvbjogU3RydWN0cy5TZWN0aW9uO1xufVxuXG5jb25zdCBpc0hlYWRlckNlbGwgPSBTdWdhck5vZGUuaXNUYWcoJ3RoJyk7XG5cbmNvbnN0IGlzSGVhZGVyQ2VsbHMgPSAoY2VsbHM6IENvbW1vbkNlbGxEZXRhaWxzW10pOiBib29sZWFuID0+XG4gIEFyci5mb3JhbGwoY2VsbHMsIChjZWxsKSA9PiBpc0hlYWRlckNlbGwoY2VsbC5lbGVtZW50KSk7XG5cbmNvbnN0IGdldFJvd0hlYWRlclR5cGUgPSAoaXNIZWFkZXJSb3c6IGJvb2xlYW4sIGlzSGVhZGVyQ2VsbHM6IGJvb2xlYW4pOiBSb3dIZWFkZXJUeXBlID0+IHtcbiAgaWYgKGlzSGVhZGVyUm93ICYmIGlzSGVhZGVyQ2VsbHMpIHtcbiAgICByZXR1cm4gJ3NlY3Rpb25DZWxscyc7XG4gIH0gZWxzZSBpZiAoaXNIZWFkZXJSb3cpIHtcbiAgICByZXR1cm4gJ3NlY3Rpb24nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnY2VsbHMnO1xuICB9XG59O1xuXG5jb25zdCBnZXRSb3dUeXBlID0gKHJvdzogQ29tbW9uUm93RGV0YWlscyk6IFJvd0RldGFpbHMgPT4ge1xuICAvLyBIZWFkZXIgcm93cyBjYW4gdXNlIGEgY29tYmluYXRpb24gb2YgdGhlYWRzIGFuZCB0aHMgLSB3YW50IHRvIGRldGVjdCB0aGUgZGlmZmVyZW50IGNvbWJpbmF0aW9uc1xuICBjb25zdCBpc0hlYWRlclJvdyA9IHJvdy5zZWN0aW9uID09PSAndGhlYWQnO1xuICBjb25zdCBpc0hlYWRlckNlbGxzID0gT3B0aW9uYWxzLmlzKGZpbmRDb21tb25DZWxsVHlwZShyb3cuY2VsbHMpLCAndGgnKTtcbiAgaWYgKHJvdy5zZWN0aW9uID09PSAndGZvb3QnKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogJ2Zvb3RlcicgfTtcbiAgfSBlbHNlIGlmIChpc0hlYWRlclJvdyB8fCBpc0hlYWRlckNlbGxzKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogJ2hlYWRlcicsIHN1YlR5cGU6IGdldFJvd0hlYWRlclR5cGUoaXNIZWFkZXJSb3csIGlzSGVhZGVyQ2VsbHMpIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdHlwZTogJ2JvZHknIH07XG4gIH1cbn07XG5cbmNvbnN0IGZpbmRDb21tb25DZWxsVHlwZSA9IChjZWxsczogQ29tbW9uQ2VsbERldGFpbHNbXSk6IE9wdGlvbmFsPCd0ZCcgfCAndGgnPiA9PiB7XG4gIGNvbnN0IGhlYWRlckNlbGxzID0gQXJyLmZpbHRlcihjZWxscywgKGNlbGwpID0+IGlzSGVhZGVyQ2VsbChjZWxsLmVsZW1lbnQpKTtcbiAgaWYgKGhlYWRlckNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKCd0ZCcpO1xuICB9IGVsc2UgaWYgKGhlYWRlckNlbGxzLmxlbmd0aCA9PT0gY2VsbHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoJ3RoJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgfVxufTtcblxuY29uc3QgZmluZENvbW1vblJvd1R5cGUgPSAocm93czogQ29tbW9uUm93RGV0YWlsc1tdKTogT3B0aW9uYWw8Um93VHlwZT4gPT4ge1xuICBjb25zdCByb3dUeXBlcyA9IEFyci5tYXAocm93cywgKHJvdykgPT4gZ2V0Um93VHlwZShyb3cpLnR5cGUpO1xuICBjb25zdCBoYXNIZWFkZXIgPSBBcnIuY29udGFpbnMocm93VHlwZXMsICdoZWFkZXInKTtcbiAgY29uc3QgaGFzRm9vdGVyID0gQXJyLmNvbnRhaW5zKHJvd1R5cGVzLCAnZm9vdGVyJyk7XG4gIGlmICghaGFzSGVhZGVyICYmICFoYXNGb290ZXIpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZSgnYm9keScpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGhhc0JvZHkgPSBBcnIuY29udGFpbnMocm93VHlwZXMsICdib2R5Jyk7XG4gICAgaWYgKGhhc0hlYWRlciAmJiAhaGFzQm9keSAmJiAhaGFzRm9vdGVyKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSgnaGVhZGVyJyk7XG4gICAgfSBlbHNlIGlmICghaGFzSGVhZGVyICYmICFoYXNCb2R5ICYmIGhhc0Zvb3Rlcikge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoJ2Zvb3RlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICAgIH1cbiAgfVxufTtcblxuY29uc3QgZmluZFRhYmxlUm93SGVhZGVyVHlwZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSk6IE9wdGlvbmFsPFJvd0hlYWRlclR5cGU+ID0+XG4gIEFyci5maW5kTWFwKHdhcmVob3VzZS5hbGwsIChyb3cpID0+IHtcbiAgICBjb25zdCByb3dUeXBlID0gZ2V0Um93VHlwZShyb3cpO1xuICAgIHJldHVybiByb3dUeXBlLnR5cGUgPT09ICdoZWFkZXInID8gT3B0aW9uYWwuZnJvbShyb3dUeXBlLnN1YlR5cGUgYXMgUm93SGVhZGVyVHlwZSkgOiBPcHRpb25hbC5ub25lKCk7XG4gIH0pO1xuXG5leHBvcnQge1xuICBmaW5kQ29tbW9uQ2VsbFR5cGUsXG4gIGZpbmRDb21tb25Sb3dUeXBlLFxuICBmaW5kVGFibGVSb3dIZWFkZXJUeXBlLFxuICBpc0hlYWRlckNlbGwsXG4gIGlzSGVhZGVyQ2VsbHNcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgVHJhdmVyc2UgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4uL2FwaS9UYWJsZUxvb2t1cCc7XG5pbXBvcnQgeyBnZXRBdHRyVmFsdWUgfSBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5cbmNvbnN0IGZyb21Sb3dzT3JDb2xHcm91cHMgPSAoZWxlbXM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSwgZ2V0U2VjdGlvbjogKGdyb3VwOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiBTdHJ1Y3RzLlNlY3Rpb24pOiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbD5bXSA9PlxuICBBcnIubWFwKGVsZW1zLCAocm93KSA9PiB7XG4gICAgaWYgKFN1Z2FyTm9kZS5uYW1lKHJvdykgPT09ICdjb2xncm91cCcpIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gQXJyLm1hcChUYWJsZUxvb2t1cC5jb2x1bW5zKHJvdyksIChjb2x1bW4pID0+IHtcbiAgICAgICAgY29uc3QgY29sc3BhbiA9IGdldEF0dHJWYWx1ZShjb2x1bW4sICdzcGFuJywgMSk7XG4gICAgICAgIHJldHVybiBTdHJ1Y3RzLmRldGFpbChjb2x1bW4sIDEsIGNvbHNwYW4pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gU3RydWN0cy5yb3dkZXRhaWwocm93LCBjZWxscywgJ2NvbGdyb3VwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gQXJyLm1hcChUYWJsZUxvb2t1cC5jZWxscyhyb3cpLCAoY2VsbCkgPT4ge1xuICAgICAgICBjb25zdCByb3dzcGFuID0gZ2V0QXR0clZhbHVlKGNlbGwsICdyb3dzcGFuJywgMSk7XG4gICAgICAgIGNvbnN0IGNvbHNwYW4gPSBnZXRBdHRyVmFsdWUoY2VsbCwgJ2NvbHNwYW4nLCAxKTtcbiAgICAgICAgcmV0dXJuIFN0cnVjdHMuZGV0YWlsKGNlbGwsIHJvd3NwYW4sIGNvbHNwYW4pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBTdHJ1Y3RzLnJvd2RldGFpbChyb3csIGNlbGxzLCBnZXRTZWN0aW9uKHJvdykpO1xuICAgIH1cbiAgfSk7XG5cbmNvbnN0IGdldFBhcmVudFNlY3Rpb24gPSAoZ3JvdXA6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBTdHJ1Y3RzLlNlY3Rpb24gPT5cbiAgVHJhdmVyc2UucGFyZW50KGdyb3VwKS5tYXAoKHBhcmVudCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSBTdWdhck5vZGUubmFtZShwYXJlbnQpO1xuICAgIHJldHVybiBTdHJ1Y3RzLmlzVmFsaWRTZWN0aW9uKHBhcmVudE5hbWUpID8gcGFyZW50TmFtZSA6ICd0Ym9keSc7XG4gIH0pLmdldE9yKCd0Ym9keScpO1xuXG4vKlxuICogVGFrZXMgYSBET00gdGFibGUgYW5kIHJldHVybnMgYSBsaXN0IG9mIGxpc3Qgb2Y6XG4gICBlbGVtZW50OiByb3cgZWxlbWVudFxuICAgY2VsbHM6IChpZCwgcm93c3BhbiwgY29sc3Bhbikgc3RydWN0c1xuICovXG5jb25zdCBmcm9tVGFibGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsPltdID0+IHtcbiAgY29uc3Qgcm93cyA9IFRhYmxlTG9va3VwLnJvd3ModGFibGUpO1xuICBjb25zdCBjb2x1bW5Hcm91cHMgPSBUYWJsZUxvb2t1cC5jb2x1bW5Hcm91cHModGFibGUpO1xuXG4gIGNvbnN0IGVsZW1zOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10gPSBbIC4uLmNvbHVtbkdyb3VwcywgLi4ucm93cyBdO1xuICByZXR1cm4gZnJvbVJvd3NPckNvbEdyb3VwcyhlbGVtcywgZ2V0UGFyZW50U2VjdGlvbik7XG59O1xuXG5jb25zdCBmcm9tUGFzdGVkUm93cyA9IChlbGVtczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PltdLCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24pOiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbD5bXSA9PlxuICBmcm9tUm93c09yQ29sR3JvdXBzKGVsZW1zLCAoKSA9PiBzZWN0aW9uKTtcblxuZXhwb3J0IHtcbiAgZnJvbVRhYmxlLFxuICBmcm9tUGFzdGVkUm93c1xufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPYmosIFJlc3VsdCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgU2ltcGxlR2VuZXJhdG9ycyB9IGZyb20gJy4uL2FwaS9HZW5lcmF0b3JzJztcbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgTG9ja2VkQ29sdW1uVXRpbHMgZnJvbSAnLi4vdXRpbC9Mb2NrZWRDb2x1bW5VdGlscyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgR3JpZFJvdyBmcm9tICcuL0dyaWRSb3cnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgcmVhZG9ubHkgY29sRGVsdGE6IG51bWJlcjtcbiAgcmVhZG9ubHkgcm93RGVsdGE6IG51bWJlcjtcbn1cblxuLypcbiAgRml0bWVudCwgaXMgYSBtb2R1bGUgdXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgSW5zZXJ0ZWQgdGFibGUgKGdyaWRCKSBjYW4gZml0IHNxdWFyZWxleSB3aXRoaW4gdGhlIEhvc3QgdGFibGUgKGdyaWRBKS5cbiAgICAtIG1lYXN1cmUgcmV0dXJucyBhIGRlbHRhIG9mIHJvd3MgYW5kIGNvbHMsIGVnOlxuICAgICAgICAtIGNvbDogMyBtZWFucyBncmlkQiBjYW4gZml0IHdpdGggMyBzcGFjZXMgdG8gc3BhcmVcbiAgICAgICAgLSByb3c6IC01IG1lYW5zIGdyaWRCIGNhbiBuZWVkcyA1IG1vcmUgcm93cyB0byBjb21wbGV0ZWx5IGZpdCBpbnRvIGdyaWRBXG4gICAgICAgIC0gY29sOiAwLCByb3c6IDAgZGVwaWNzIHBlcmZlY3QgZml0bWVudFxuXG4gICAgLSB0YWlsb3IsIHJlcXVpcmVzIGEgZGVsdGEgYW5kIHJldHVybnMgZ3JpZCB0aGF0IGlzIGJ1aWx0IHRvIG1hdGNoIHRoZSBkZWx0YSwgdGFpbG9yZWQgdG8gZml0LlxuICAgICAgZWc6IDN4MyBncmlkQSwgd2l0aCBhIGRlbHRhIGNvbDogLTMsIHJvdzogMiByZXR1cm5zIGEgbmV3IGdyaWQgMyByb3dzIHggNiBjb2xzXG5cbiAgICAtIGFzc3VtcHRpb25zOiBBbGwgZ3JpZHMgdXNlZCBieSB0aGlzIG1vZHVsZSBzaG91bGQgYmUgcmVjdGFuZ3VsYXJcbiovXG5cbmNvbnN0IG1lYXN1cmUgPSAoc3RhcnRBZGRyZXNzOiBTdHJ1Y3RzLkFkZHJlc3MsIGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdyaWRCOiBTdHJ1Y3RzLlJvd0NlbGxzW10pOiBSZXN1bHQ8RGVsdGEsIHN0cmluZz4gPT4ge1xuICBpZiAoc3RhcnRBZGRyZXNzLnJvdyA+PSBncmlkQS5sZW5ndGggfHwgc3RhcnRBZGRyZXNzLmNvbHVtbiA+IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQVswXSkpIHtcbiAgICByZXR1cm4gUmVzdWx0LmVycm9yKFxuICAgICAgJ2ludmFsaWQgc3RhcnQgYWRkcmVzcyBvdXQgb2YgdGFibGUgYm91bmRzLCByb3c6ICcgKyBzdGFydEFkZHJlc3Mucm93ICsgJywgY29sdW1uOiAnICsgc3RhcnRBZGRyZXNzLmNvbHVtblxuICAgICk7XG4gIH1cbiAgY29uc3Qgcm93UmVtYWluZGVyID0gZ3JpZEEuc2xpY2Uoc3RhcnRBZGRyZXNzLnJvdyk7XG4gIGNvbnN0IGNvbFJlbWFpbmRlciA9IHJvd1JlbWFpbmRlclswXS5jZWxscy5zbGljZShzdGFydEFkZHJlc3MuY29sdW1uKTtcblxuICBjb25zdCBjb2xSZXF1aXJlZCA9IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQlswXSk7XG4gIGNvbnN0IHJvd1JlcXVpcmVkID0gZ3JpZEIubGVuZ3RoO1xuICByZXR1cm4gUmVzdWx0LnZhbHVlKHtcbiAgICByb3dEZWx0YTogcm93UmVtYWluZGVyLmxlbmd0aCAtIHJvd1JlcXVpcmVkLFxuICAgIGNvbERlbHRhOiBjb2xSZW1haW5kZXIubGVuZ3RoIC0gY29sUmVxdWlyZWRcbiAgfSk7XG59O1xuXG5jb25zdCBtZWFzdXJlV2lkdGggPSAoZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSk6IERlbHRhID0+IHtcbiAgY29uc3QgY29sTGVuZ3RoQSA9IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQVswXSk7XG4gIGNvbnN0IGNvbExlbmd0aEIgPSBHcmlkUm93LmNlbGxMZW5ndGgoZ3JpZEJbMF0pO1xuXG4gIHJldHVybiB7XG4gICAgcm93RGVsdGE6IDAsXG4gICAgY29sRGVsdGE6IGNvbExlbmd0aEEgLSBjb2xMZW5ndGhCXG4gIH07XG59O1xuXG5jb25zdCBtZWFzdXJlSGVpZ2h0ID0gKGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdyaWRCOiBTdHJ1Y3RzLlJvd0NlbGxzW10pOiBEZWx0YSA9PiB7XG4gIGNvbnN0IHJvd0xlbmd0aEEgPSBncmlkQS5sZW5ndGg7XG4gIGNvbnN0IHJvd0xlbmd0aEIgPSBncmlkQi5sZW5ndGg7XG5cbiAgcmV0dXJuIHtcbiAgICByb3dEZWx0YTogcm93TGVuZ3RoQSAtIHJvd0xlbmd0aEIsXG4gICAgY29sRGVsdGE6IDBcbiAgfTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlRWxlbWVudHMgPSAoYW1vdW50OiBudW1iZXIsIHJvdzogU3RydWN0cy5Sb3dDZWxscywgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycywgaXNMb2NrZWQ6IChpZHg6IG51bWJlcikgPT4gYm9vbGVhbik6IFN0cnVjdHMuRWxlbWVudE5ld1tdID0+IHtcbiAgY29uc3QgZ2VuZXJhdG9yID0gcm93LnNlY3Rpb24gPT09ICdjb2xncm91cCcgPyBnZW5lcmF0b3JzLmNvbCA6IGdlbmVyYXRvcnMuY2VsbDtcbiAgcmV0dXJuIEFyci5yYW5nZShhbW91bnQsIChpZHgpID0+IFN0cnVjdHMuZWxlbWVudG5ldyhnZW5lcmF0b3IoKSBhcyBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+LCB0cnVlLCBpc0xvY2tlZChpZHgpKSk7XG59O1xuXG5jb25zdCByb3dGaWxsID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgYW1vdW50OiBudW1iZXIsIGdlbmVyYXRvcnM6IFNpbXBsZUdlbmVyYXRvcnMsIGxvY2tlZENvbHVtbnM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgZXhhbXBsZVJvdyA9IGdyaWRbZ3JpZC5sZW5ndGggLSAxXTtcbiAgcmV0dXJuIGdyaWQuY29uY2F0KEFyci5yYW5nZShhbW91bnQsICgpID0+IHtcbiAgICBjb25zdCBnZW5lcmF0b3IgPSBleGFtcGxlUm93LnNlY3Rpb24gPT09ICdjb2xncm91cCcgPyBnZW5lcmF0b3JzLmNvbGdyb3VwIDogZ2VuZXJhdG9ycy5yb3c7XG4gICAgY29uc3Qgcm93ID0gR3JpZFJvdy5jbG9uZShleGFtcGxlUm93LCBnZW5lcmF0b3IsIEZ1bi5pZGVudGl0eSk7XG4gICAgY29uc3QgZWxlbWVudHMgPSBnZW5lcmF0ZUVsZW1lbnRzKHJvdy5jZWxscy5sZW5ndGgsIHJvdywgZ2VuZXJhdG9ycywgKGlkeCkgPT4gT2JqLmhhcyhsb2NrZWRDb2x1bW5zLCBpZHgudG9TdHJpbmcoKSkpO1xuICAgIHJldHVybiBHcmlkUm93LnNldENlbGxzKHJvdywgZWxlbWVudHMpO1xuICB9KSk7XG59O1xuXG5jb25zdCBjb2xGaWxsID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgYW1vdW50OiBudW1iZXIsIGdlbmVyYXRvcnM6IFNpbXBsZUdlbmVyYXRvcnMsIHN0YXJ0SW5kZXg6IG51bWJlcik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICBBcnIubWFwKGdyaWQsIChyb3cpID0+IHtcbiAgICBjb25zdCBuZXdDaGlsZHJlbiA9IGdlbmVyYXRlRWxlbWVudHMoYW1vdW50LCByb3csIGdlbmVyYXRvcnMsIEZ1bi5uZXZlcik7XG4gICAgcmV0dXJuIEdyaWRSb3cuYWRkQ2VsbHMocm93LCBzdGFydEluZGV4LCBuZXdDaGlsZHJlbik7XG4gIH0pO1xuXG5jb25zdCBsb2NrZWRDb2xGaWxsID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycywgbG9ja2VkQ29sdW1uczogbnVtYmVyW10pOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT5cbiAgQXJyLm1hcChncmlkLCAocm93KSA9PiB7XG4gICAgcmV0dXJuIEFyci5mb2xkbChsb2NrZWRDb2x1bW5zLCAoYWNjLCBjb2xOdW0pID0+IHtcbiAgICAgIGNvbnN0IG5ld0NoaWxkID0gZ2VuZXJhdGVFbGVtZW50cygxLCByb3csIGdlbmVyYXRvcnMsIEZ1bi5hbHdheXMpWzBdO1xuICAgICAgcmV0dXJuIEdyaWRSb3cuYWRkQ2VsbChhY2MsIGNvbE51bSwgbmV3Q2hpbGQpO1xuICAgIH0sIHJvdyk7XG4gIH0pO1xuXG5jb25zdCB0YWlsb3IgPSAoZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGVsdGE6IERlbHRhLCBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgZmlsbENvbHMgPSBkZWx0YS5jb2xEZWx0YSA8IDAgPyBjb2xGaWxsIDogRnVuLmlkZW50aXR5O1xuICBjb25zdCBmaWxsUm93cyA9IGRlbHRhLnJvd0RlbHRhIDwgMCA/IHJvd0ZpbGwgOiBGdW4uaWRlbnRpdHk7XG4gIGNvbnN0IGxvY2tlZENvbHVtbnMgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQoZ3JpZEEpO1xuICBjb25zdCBncmlkV2lkdGggPSBHcmlkUm93LmNlbGxMZW5ndGgoZ3JpZEFbMF0pO1xuICBjb25zdCBpc0xhc3RDb2xMb2NrZWQgPSBBcnIuZXhpc3RzKGxvY2tlZENvbHVtbnMsIChsb2NrZWQpID0+IGxvY2tlZCA9PT0gZ3JpZFdpZHRoIC0gMSk7XG4gIGNvbnN0IG1vZGlmaWVkQ29scyA9IGZpbGxDb2xzKGdyaWRBLCBNYXRoLmFicyhkZWx0YS5jb2xEZWx0YSksIGdlbmVyYXRvcnMsIGlzTGFzdENvbExvY2tlZCA/IGdyaWRXaWR0aCAtIDEgOiBncmlkV2lkdGgpO1xuICAvLyBOZWVkIHRvIHJlY2FsY3VsYXRlIGxvY2tlZCBjb2x1bW4gcG9zaXRpb25zXG4gIGNvbnN0IG5ld0xvY2tlZENvbHVtbnMgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQobW9kaWZpZWRDb2xzKTtcbiAgcmV0dXJuIGZpbGxSb3dzKG1vZGlmaWVkQ29scywgTWF0aC5hYnMoZGVsdGEucm93RGVsdGEpLCBnZW5lcmF0b3JzLCBBcnIubWFwVG9PYmplY3QobmV3TG9ja2VkQ29sdW1ucywgRnVuLmFsd2F5cykpO1xufTtcblxuZXhwb3J0IHsgbWVhc3VyZSwgbWVhc3VyZVdpZHRoLCBtZWFzdXJlSGVpZ2h0LCB0YWlsb3IsIGxvY2tlZENvbEZpbGwgfTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCwgUm93Q2VsbCwgUm93RWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbnR5cGUgUm93TW9ycGhpc208VCBleHRlbmRzIFJvd0VsZW1lbnQ+ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUPikgPT4gU3VnYXJFbGVtZW50PFQ+O1xudHlwZSBDZWxsTW9ycGhpc208VCBleHRlbmRzIENlbGxFbGVtZW50PiA9IChlbGVtZW50OiBTdHJ1Y3RzLkVsZW1lbnROZXc8VD4sIGluZGV4OiBudW1iZXIpID0+IFN0cnVjdHMuRWxlbWVudE5ldzxUPjtcblxuY29uc3QgYWRkQ2VsbHMgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGluZGV4OiBudW1iZXIsIGNlbGxzOiBTdHJ1Y3RzLkVsZW1lbnROZXc8Um93Q2VsbDxSPj5bXSk6IFN0cnVjdHMuUm93Q2VsbHM8Uj4gPT4ge1xuICBjb25zdCBleGlzdGluZ0NlbGxzID0gZ3JpZFJvdy5jZWxscztcbiAgY29uc3QgYmVmb3JlID0gZXhpc3RpbmdDZWxscy5zbGljZSgwLCBpbmRleCk7XG4gIGNvbnN0IGFmdGVyID0gZXhpc3RpbmdDZWxscy5zbGljZShpbmRleCk7XG4gIGNvbnN0IG5ld0NlbGxzID0gYmVmb3JlLmNvbmNhdChjZWxscykuY29uY2F0KGFmdGVyKTtcbiAgcmV0dXJuIHNldENlbGxzKGdyaWRSb3csIG5ld0NlbGxzKTtcbn07XG5cbmNvbnN0IGFkZENlbGwgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGluZGV4OiBudW1iZXIsIGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxSb3dDZWxsPFI+Pik6IFN0cnVjdHMuUm93Q2VsbHM8Uj4gPT5cbiAgYWRkQ2VsbHMoZ3JpZFJvdywgaW5kZXgsIFsgY2VsbCBdKTtcblxuY29uc3QgbXV0YXRlQ2VsbCA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgaW5kZXg6IG51bWJlciwgY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PFJvd0NlbGw8Uj4+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGNlbGxzID0gZ3JpZFJvdy5jZWxscztcbiAgY2VsbHNbaW5kZXhdID0gY2VsbDtcbn07XG5cbmNvbnN0IHNldENlbGxzID0gPFIgZXh0ZW5kcyBSb3dFbGVtZW50PihncmlkUm93OiBTdHJ1Y3RzLlJvd0NlbGxzPFI+LCBjZWxsczogU3RydWN0cy5FbGVtZW50TmV3PFJvd0NlbGw8Uj4+W10pOiBTdHJ1Y3RzLlJvd0NlbGxzPFI+ID0+XG4gIFN0cnVjdHMucm93Y2VsbHMoZ3JpZFJvdy5lbGVtZW50LCBjZWxscywgZ3JpZFJvdy5zZWN0aW9uLCBncmlkUm93LmlzTmV3KTtcblxuY29uc3QgbWFwQ2VsbHMgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGY6IENlbGxNb3JwaGlzbTxSb3dDZWxsPFI+Pik6IFN0cnVjdHMuUm93Q2VsbHMgPT4ge1xuICBjb25zdCBjZWxscyA9IGdyaWRSb3cuY2VsbHM7XG4gIGNvbnN0IHIgPSBBcnIubWFwKGNlbGxzLCBmKTtcbiAgcmV0dXJuIFN0cnVjdHMucm93Y2VsbHMoZ3JpZFJvdy5lbGVtZW50LCByLCBncmlkUm93LnNlY3Rpb24sIGdyaWRSb3cuaXNOZXcpO1xufTtcblxuY29uc3QgZ2V0Q2VsbCA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgaW5kZXg6IG51bWJlcik6IFN0cnVjdHMuRWxlbWVudE5ldzxSb3dDZWxsPFI+PiA9PlxuICBncmlkUm93LmNlbGxzW2luZGV4XTtcblxuY29uc3QgZ2V0Q2VsbEVsZW1lbnQgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGluZGV4OiBudW1iZXIpOiBTdWdhckVsZW1lbnQ8Um93Q2VsbDxSPj4gPT5cbiAgZ2V0Q2VsbChncmlkUm93LCBpbmRleCkuZWxlbWVudDtcblxuY29uc3QgY2VsbExlbmd0aCA9IChncmlkUm93OiBTdHJ1Y3RzLlJvd0NlbGxzKTogbnVtYmVyID0+XG4gIGdyaWRSb3cuY2VsbHMubGVuZ3RoO1xuXG5jb25zdCBleHRyYWN0R3JpZERldGFpbHMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdKTogeyByb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W107IGNvbHM6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlQ29sRWxlbWVudD5bXSB9ID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gQXJyLnBhcnRpdGlvbihncmlkLCAocm93KSA9PiByb3cuc2VjdGlvbiA9PT0gJ2NvbGdyb3VwJyk7XG4gIHJldHVybiB7XG4gICAgcm93czogcmVzdWx0LmZhaWwgYXMgU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PltdLFxuICAgIGNvbHM6IHJlc3VsdC5wYXNzIGFzIFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlQ29sRWxlbWVudD5bXVxuICB9O1xufTtcblxuY29uc3QgY2xvbmUgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGNsb25lUm93OiBSb3dNb3JwaGlzbTxSPiwgY2xvbmVDZWxsOiBDZWxsTW9ycGhpc208Um93Q2VsbDxSPj4pOiBTdHJ1Y3RzLlJvd0NlbGxzPFI+ID0+IHtcbiAgY29uc3QgbmV3Q2VsbHMgPSBBcnIubWFwKGdyaWRSb3cuY2VsbHMsIGNsb25lQ2VsbCk7XG4gIHJldHVybiBTdHJ1Y3RzLnJvd2NlbGxzKGNsb25lUm93KGdyaWRSb3cuZWxlbWVudCksIG5ld0NlbGxzLCBncmlkUm93LnNlY3Rpb24sIHRydWUpO1xufTtcblxuZXhwb3J0IHtcbiAgYWRkQ2VsbCxcbiAgYWRkQ2VsbHMsXG4gIHNldENlbGxzLFxuICBtdXRhdGVDZWxsLFxuICBnZXRDZWxsLFxuICBnZXRDZWxsRWxlbWVudCxcbiAgbWFwQ2VsbHMsXG4gIGNlbGxMZW5ndGgsXG4gIGV4dHJhY3RHcmlkRGV0YWlscyxcbiAgY2xvbmVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwsIE9wdGlvbmFscyB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENvbXBhcmUsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBHZW5lcmF0b3JzLCBHZW5lcmF0b3JzV3JhcHBlciwgU2ltcGxlR2VuZXJhdG9ycyB9IGZyb20gJy4uL2FwaS9HZW5lcmF0b3JzJztcbmltcG9ydCAqIGFzIFJlc2l6ZUJlaGF2aW91ciBmcm9tICcuLi9hcGkvUmVzaXplQmVoYXZpb3VyJztcbmltcG9ydCB0eXBlICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgKiBhcyBUYWJsZUxvb2t1cCBmcm9tICcuLi9hcGkvVGFibGVMb29rdXAnO1xuaW1wb3J0IHR5cGUgeyBUYWJsZU9wZXJhdGlvblJlc3VsdCB9IGZyb20gJy4uL2FwaS9UYWJsZU9wZXJhdGlvbnMnO1xuaW1wb3J0IHsgVGFibGVTZWN0aW9uIH0gZnJvbSAnLi4vYXBpL1RhYmxlU2VjdGlvbic7XG5pbXBvcnQgeyBUYWJsZVNpemUgfSBmcm9tICcuLi9hcGkvVGFibGVTaXplJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuaW1wb3J0ICogYXMgUmVkcmF3IGZyb20gJy4uL29wZXJhdGUvUmVkcmF3JztcbmltcG9ydCAqIGFzIExvY2tlZENvbHVtblV0aWxzIGZyb20gJy4uL3V0aWwvTG9ja2VkQ29sdW1uVXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBDb21wRWxtLCBSb3dDZWxsLCBSb3dFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgVHJhbnNpdGlvbnMgZnJvbSAnLi9UcmFuc2l0aW9ucyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3BlcmF0aW9uQmVoYXZpb3VycyB7XG4gIHJlYWRvbmx5IHNpemluZz86IFRhYmxlU2l6ZTtcbiAgcmVhZG9ubHkgcmVzaXplPzogUmVzaXplQmVoYXZpb3VyLlJlc2l6ZUJlaGF2aW91cjtcbiAgcmVhZG9ubHkgc2VjdGlvbj86IFRhYmxlU2VjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSdW5PcGVyYXRpb25PdXRwdXQge1xuICByZWFkb25seSBjdXJzb3I6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+O1xuICByZWFkb25seSBuZXdSb3dzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudD5bXTtcbiAgcmVhZG9ubHkgbmV3Q2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRFbGVtZW50IHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhcmdldFNlbGVjdGlvbiB7XG4gIHJlYWRvbmx5IHNlbGVjdGlvbjogU3VnYXJFbGVtZW50PE5vZGU+W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0TWVyZ2FibGUge1xuICByZWFkb25seSBtZXJnYWJsZTogT3B0aW9uYWw8RXh0cmFjdE1lcmdhYmxlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRVbm1lcmdhYmxlIHtcbiAgcmVhZG9ubHkgdW5tZXJnYWJsZTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPjtcbn1cblxuLy8gY29tYmluZXMgdGhlIGFib3ZlIDQgaW50ZXJmYWNlcyBiZWNhdXNlIHRoaXMgaXMgd2hhdCBkYXRhIHdlIGFjdHVhbGx5IGdldCBmcm9tIFRpbnlNQ0VcbmV4cG9ydCBpbnRlcmZhY2UgQ29tYmluZWRUYXJnZXRzIGV4dGVuZHMgVGFyZ2V0RWxlbWVudCwgVGFyZ2V0U2VsZWN0aW9uLCBUYXJnZXRNZXJnYWJsZSwgVGFyZ2V0VW5tZXJnYWJsZSB7IH1cblxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRQYXN0ZSB7XG4gIHJlYWRvbmx5IGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPjtcbiAgcmVhZG9ubHkgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycztcbiAgcmVhZG9ubHkgY2xpcGJvYXJkOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0UGFzdGVSb3dzIHtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXTtcbiAgcmVhZG9ubHkgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycztcbiAgcmVhZG9ubHkgY2xpcGJvYXJkOiBTdWdhckVsZW1lbnQ8Um93RWxlbWVudD5bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeHRyYWN0TWVyZ2FibGUge1xuICByZWFkb25seSBjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdO1xuICByZWFkb25seSBib3VuZHM6IFN0cnVjdHMuQm91bmRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV4dHJhY3RQYXN0ZSBleHRlbmRzIFN0cnVjdHMuRGV0YWlsRXh0IHtcbiAgcmVhZG9ubHkgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycztcbiAgcmVhZG9ubHkgY2xpcGJvYXJkOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFjdFBhc3RlUm93cyB7XG4gIHJlYWRvbmx5IGNlbGxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdO1xuICByZWFkb25seSBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzO1xuICByZWFkb25seSBjbGlwYm9hcmQ6IFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdO1xufVxuXG5jb25zdCBmcm9tV2FyZWhvdXNlID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBnZW5lcmF0b3JzOiBHZW5lcmF0b3JzKSA9PlxuICBUcmFuc2l0aW9ucy50b0dyaWQod2FyZWhvdXNlLCBnZW5lcmF0b3JzLCBmYWxzZSk7XG5cbmNvbnN0IHRvRGV0YWlsTGlzdCA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZDogU3RydWN0cy5Sb3dDZWxsczxSPltdKTogU3RydWN0cy5Sb3dEZXRhaWxOZXc8U3RydWN0cy5EZXRhaWxOZXc8Um93Q2VsbDxSPj4sIFI+W10gPT5cbiAgVHJhbnNpdGlvbnMudG9EZXRhaWxzKGdyaWQsIENvbXBhcmUuZXEpO1xuXG5jb25zdCBmaW5kSW5XYXJlaG91c2UgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBPcHRpb25hbDxTdHJ1Y3RzLkRldGFpbEV4dD4gPT4gQXJyLmZpbmRNYXAod2FyZWhvdXNlLmFsbCwgKHIpID0+XG4gIEFyci5maW5kKHIuY2VsbHMsIChlKSA9PiBDb21wYXJlLmVxKGVsZW1lbnQsIGUuZWxlbWVudCkpXG4pO1xuXG5jb25zdCBleHRyYWN0Q2VsbHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uLCBwcmVkaWNhdGU6IChkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3RydWN0cy5EZXRhaWxFeHRbXT4gPT4ge1xuICBjb25zdCBkZXRhaWxzID0gQXJyLm1hcCh0YXJnZXQuc2VsZWN0aW9uLCAoY2VsbCkgPT4ge1xuICAgIHJldHVybiBUYWJsZUxvb2t1cC5jZWxsKGNlbGwpXG4gICAgICAuYmluZCgobGMpID0+IGZpbmRJbldhcmVob3VzZSh3YXJlaG91c2UsIGxjKSlcbiAgICAgIC5maWx0ZXIocHJlZGljYXRlKTtcbiAgfSk7XG4gIGNvbnN0IGNlbGxzID0gT3B0aW9uYWxzLmNhdChkZXRhaWxzKTtcbiAgcmV0dXJuIE9wdGlvbmFscy5zb21lSWYoY2VsbHMubGVuZ3RoID4gMCwgY2VsbHMpO1xufTtcblxuZXhwb3J0IHR5cGUgT3BlcmF0aW9uPElORk8sIEdXIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXI+ID0gKG1vZGVsOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGluZm86IElORk8sIGVxOiBDb21wRWxtLCB3OiBHVywgaGVhZGVyczogVGFibGVTZWN0aW9uKSA9PiBUYWJsZU9wZXJhdGlvblJlc3VsdDtcbmV4cG9ydCB0eXBlIEV4dHJhY3Q8UkFXLCBJTkZPPiA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBSQVcpID0+IE9wdGlvbmFsPElORk8+O1xuZXhwb3J0IHR5cGUgQWRqdXN0bWVudDxJTkZPPiA9IDxUIGV4dGVuZHMgU3RydWN0cy5EZXRhaWxOZXc+KHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGdyaWQ6IFN0cnVjdHMuUm93RGV0YWlsTmV3PFQ+W10sIGluZm86IElORk8sIGJlaGF2aW91cnM6IFJlcXVpcmVkPE9wZXJhdGlvbkJlaGF2aW91cnM+KSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUG9zdEFjdGlvbiA9IChlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBHZW5XcmFwPEdXIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXI+ID0gKGc6IEdlbmVyYXRvcnMpID0+IEdXO1xuXG5leHBvcnQgdHlwZSBPcGVyYXRpb25DYWxsYmFjazxUPiA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFQsIGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMsIGJlaGF2aW91cnM/OiBPcGVyYXRpb25CZWhhdmlvdXJzKSA9PiBPcHRpb25hbDxSdW5PcGVyYXRpb25PdXRwdXQ+O1xuXG5jb25zdCBydW4gPSA8UkFXLCBJTkZPLCBHVyBleHRlbmRzIEdlbmVyYXRvcnNXcmFwcGVyPiAoXG4gIG9wZXJhdGlvbjogT3BlcmF0aW9uPElORk8sIEdXPixcbiAgZXh0cmFjdDogRXh0cmFjdDxSQVcsIElORk8+LFxuICBhZGp1c3RtZW50OiBBZGp1c3RtZW50PElORk8+LFxuICBwb3N0QWN0aW9uOiBQb3N0QWN0aW9uLFxuICBnZW5XcmFwcGVyczogR2VuV3JhcDxHVz4sXG4gIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sXG4gIHRhcmdldDogUkFXLFxuICBnZW5lcmF0b3JzOiBHZW5lcmF0b3JzLFxuICBiZWhhdmlvdXJzPzogT3BlcmF0aW9uQmVoYXZpb3Vyc1xuKTogT3B0aW9uYWw8UnVuT3BlcmF0aW9uT3V0cHV0PiA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCB0YWJsZVNlY3Rpb24gPSBPcHRpb25hbC5mcm9tKGJlaGF2aW91cnM/LnNlY3Rpb24pLmdldE9yVGh1bmsoVGFibGVTZWN0aW9uLmZhbGxiYWNrKTtcbiAgY29uc3Qgb3V0cHV0ID0gZXh0cmFjdCh3YXJlaG91c2UsIHRhcmdldCkubWFwKChpbmZvKSA9PiB7XG4gICAgY29uc3QgbW9kZWwgPSBmcm9tV2FyZWhvdXNlKHdhcmVob3VzZSwgZ2VuZXJhdG9ycyk7XG4gICAgY29uc3QgcmVzdWx0ID0gb3BlcmF0aW9uKG1vZGVsLCBpbmZvLCBDb21wYXJlLmVxLCBnZW5XcmFwcGVycyhnZW5lcmF0b3JzKSwgdGFibGVTZWN0aW9uKTtcbiAgICBjb25zdCBsb2NrZWRDb2x1bW5zID0gTG9ja2VkQ29sdW1uVXRpbHMuZ2V0TG9ja2VkQ29sdW1uc0Zyb21HcmlkKHJlc3VsdC5ncmlkKTtcbiAgICBjb25zdCBncmlkID0gdG9EZXRhaWxMaXN0KHJlc3VsdC5ncmlkKTtcbiAgICByZXR1cm4ge1xuICAgICAgaW5mbyxcbiAgICAgIGdyaWQsXG4gICAgICBjdXJzb3I6IHJlc3VsdC5jdXJzb3IsXG4gICAgICBsb2NrZWRDb2x1bW5zXG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dC5iaW5kKChvdXQpID0+IHtcbiAgICBjb25zdCBuZXdFbGVtZW50cyA9IFJlZHJhdy5yZW5kZXIodGFibGUsIG91dC5ncmlkKTtcbiAgICBjb25zdCB0YWJsZVNpemluZyA9IE9wdGlvbmFsLmZyb20oYmVoYXZpb3Vycz8uc2l6aW5nKS5nZXRPclRodW5rKCgpID0+IFRhYmxlU2l6ZS5nZXRUYWJsZVNpemUodGFibGUpKTtcbiAgICBjb25zdCByZXNpemluZyA9IE9wdGlvbmFsLmZyb20oYmVoYXZpb3Vycz8ucmVzaXplKS5nZXRPclRodW5rKFJlc2l6ZUJlaGF2aW91ci5wcmVzZXJ2ZVRhYmxlKTtcbiAgICBhZGp1c3RtZW50KHRhYmxlLCBvdXQuZ3JpZCwgb3V0LmluZm8sIHsgc2l6aW5nOiB0YWJsZVNpemluZywgcmVzaXplOiByZXNpemluZywgc2VjdGlvbjogdGFibGVTZWN0aW9uIH0pO1xuICAgIHBvc3RBY3Rpb24odGFibGUpO1xuICAgIC8vIFVwZGF0ZSBsb2NrZWQgY29scyBhdHRyaWJ1dGVcbiAgICBBdHRyaWJ1dGUucmVtb3ZlKHRhYmxlLCBMb2NrZWRDb2x1bW5VdGlscy5MT0NLRURfQ09MX0FUVFIpO1xuICAgIGlmIChvdXQubG9ja2VkQ29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICBBdHRyaWJ1dGUuc2V0KHRhYmxlLCBMb2NrZWRDb2x1bW5VdGlscy5MT0NLRURfQ09MX0FUVFIsIG91dC5sb2NrZWRDb2x1bW5zLmpvaW4oJywnKSk7XG4gICAgfVxuICAgIHJldHVybiBPcHRpb25hbC5zb21lKHtcbiAgICAgIGN1cnNvcjogb3V0LmN1cnNvcixcbiAgICAgIG5ld1Jvd3M6IG5ld0VsZW1lbnRzLm5ld1Jvd3MsXG4gICAgICBuZXdDZWxsczogbmV3RWxlbWVudHMubmV3Q2VsbHNcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBvbkNlbGwgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0RWxlbWVudCk6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0PiA9PlxuICBUYWJsZUxvb2t1cC5jZWxsKHRhcmdldC5lbGVtZW50KS5iaW5kKChjZWxsKSA9PiBmaW5kSW5XYXJlaG91c2Uod2FyZWhvdXNlLCBjZWxsKSk7XG5cbmNvbnN0IG9uUGFzdGUgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0UGFzdGUpOiBPcHRpb25hbDxFeHRyYWN0UGFzdGU+ID0+XG4gIFRhYmxlTG9va3VwLmNlbGwodGFyZ2V0LmVsZW1lbnQpLmJpbmQoKGNlbGwpID0+IGZpbmRJbldhcmVob3VzZSh3YXJlaG91c2UsIGNlbGwpLm1hcCgoZGV0YWlscykgPT4ge1xuICAgIGNvbnN0IHZhbHVlOiBFeHRyYWN0UGFzdGUgPSB7XG4gICAgICAuLi5kZXRhaWxzLFxuICAgICAgZ2VuZXJhdG9yczogdGFyZ2V0LmdlbmVyYXRvcnMsXG4gICAgICBjbGlwYm9hcmQ6IHRhcmdldC5jbGlwYm9hcmRcbiAgICB9O1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSkpO1xuXG5jb25zdCBvblBhc3RlQnlFZGl0b3IgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0UGFzdGVSb3dzKTogT3B0aW9uYWw8RXh0cmFjdFBhc3RlUm93cz4gPT5cbiAgZXh0cmFjdENlbGxzKHdhcmVob3VzZSwgdGFyZ2V0LCBGdW4uYWx3YXlzKS5tYXAoKGNlbGxzKSA9PiAoe1xuICAgIGNlbGxzLFxuICAgIGdlbmVyYXRvcnM6IHRhcmdldC5nZW5lcmF0b3JzLFxuICAgIGNsaXBib2FyZDogdGFyZ2V0LmNsaXBib2FyZFxuICB9KSk7XG5cbmNvbnN0IG9uTWVyZ2FibGUgPSAoX3dhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldE1lcmdhYmxlKTogT3B0aW9uYWw8RXh0cmFjdE1lcmdhYmxlPiA9PlxuICB0YXJnZXQubWVyZ2FibGU7XG5cbmNvbnN0IG9uVW5tZXJnYWJsZSA9IChfd2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0VW5tZXJnYWJsZSk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXT4gPT5cbiAgdGFyZ2V0LnVubWVyZ2FibGU7XG5cbmNvbnN0IG9uQ2VsbHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uKTogT3B0aW9uYWw8U3RydWN0cy5EZXRhaWxFeHRbXT4gPT5cbiAgZXh0cmFjdENlbGxzKHdhcmVob3VzZSwgdGFyZ2V0LCBGdW4uYWx3YXlzKTtcblxuLy8gQ3VzdG9tIHVubG9ja2VkIGV4dHJhY3RvcnNcblxuY29uc3Qgb25VbmxvY2tlZENlbGwgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0RWxlbWVudCk6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0PiA9PlxuICBvbkNlbGwod2FyZWhvdXNlLCB0YXJnZXQpLmZpbHRlcigoZGV0YWlsKSA9PiAhZGV0YWlsLmlzTG9ja2VkKTtcblxuY29uc3Qgb25VbmxvY2tlZENlbGxzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0W10+ID0+XG4gIGV4dHJhY3RDZWxscyh3YXJlaG91c2UsIHRhcmdldCwgKGRldGFpbCkgPT4gIWRldGFpbC5pc0xvY2tlZCk7XG5cbmNvbnN0IGlzVW5sb2NrZWRUYWJsZUNlbGwgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+XG4gIGZpbmRJbldhcmVob3VzZSh3YXJlaG91c2UsIGNlbGwpLmV4aXN0cygoZGV0YWlsKSA9PiAhZGV0YWlsLmlzTG9ja2VkKTtcblxuY29uc3QgYWxsVW5sb2NrZWQgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pID0+XG4gIEFyci5mb3JhbGwoY2VsbHMsIChjZWxsKSA9PiBpc1VubG9ja2VkVGFibGVDZWxsKHdhcmVob3VzZSwgY2VsbCkpO1xuXG4vLyBJZiBhbnkgbG9ja2VkIGNvbHVtbnMgYXJlIHByZXNlbnQgaW4gdGhlIHNlbGVjdGlvbiwgdGhlbiBkb24ndCB3YW50IHRvIGJlIGFibGUgdG8gbWVyZ2VcbmNvbnN0IG9uVW5sb2NrZWRNZXJnYWJsZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRNZXJnYWJsZSk6IE9wdGlvbmFsPEV4dHJhY3RNZXJnYWJsZT4gPT5cbiAgb25NZXJnYWJsZSh3YXJlaG91c2UsIHRhcmdldCkuZmlsdGVyKChtZXJnZWFibGUpID0+IGFsbFVubG9ja2VkKHdhcmVob3VzZSwgbWVyZ2VhYmxlLmNlbGxzKSk7XG5cbi8vIElmIGFueSBsb2NrZWQgY29sdW1ucyBhcmUgcHJlc2VudCBpbiB0aGUgc2VsZWN0aW9uLCB0aGVuIGRvbid0IHdhbnQgdG8gYmUgYWJsZSB0byB1bm1lcmdlXG5jb25zdCBvblVubG9ja2VkVW5tZXJnYWJsZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRVbm1lcmdhYmxlKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PlxuICBvblVubWVyZ2FibGUod2FyZWhvdXNlLCB0YXJnZXQpLmZpbHRlcigoY2VsbHMpID0+IGFsbFVubG9ja2VkKHdhcmVob3VzZSwgY2VsbHMpKTtcblxuZXhwb3J0IHtcbiAgb25DZWxsLFxuICBvbkNlbGxzLFxuICBvbk1lcmdhYmxlLFxuICBvblBhc3RlLFxuICBvblBhc3RlQnlFZGl0b3IsXG4gIG9uVW5sb2NrZWRDZWxsLFxuICBvblVubG9ja2VkQ2VsbHMsXG4gIG9uVW5sb2NrZWRNZXJnYWJsZSxcbiAgb25VbmxvY2tlZFVubWVyZ2FibGUsXG4gIG9uVW5tZXJnYWJsZSxcbiAgcnVuLFxuICB0b0RldGFpbExpc3Rcbn07XG5cbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgRWxlbWVudE5ldywgUm93Q2VsbHMgfSBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0gfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4vR3JpZFJvdyc7XG5cbmNvbnN0IGdldENvbHVtbiA9IChncmlkOiBSb3dDZWxsc1tdLCBpbmRleDogbnVtYmVyKTogRWxlbWVudE5ld1tdID0+IHtcbiAgcmV0dXJuIEFyci5tYXAoZ3JpZCwgKHJvdykgPT4ge1xuICAgIHJldHVybiBHcmlkUm93LmdldENlbGwocm93LCBpbmRleCk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0Um93ID0gKGdyaWQ6IFJvd0NlbGxzW10sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGdyaWRbaW5kZXhdO1xufTtcblxuY29uc3QgZmluZERpZmYgPSAoeHM6IEVsZW1lbnROZXdbXSwgY29tcDogQ29tcEVsbSkgPT4ge1xuICBpZiAoeHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgY29uc3QgZmlyc3QgPSB4c1swXTtcbiAgY29uc3QgaW5kZXggPSBBcnIuZmluZEluZGV4KHhzLCAoeCkgPT4ge1xuICAgIHJldHVybiAhY29tcChmaXJzdC5lbGVtZW50LCB4LmVsZW1lbnQpO1xuICB9KTtcbiAgcmV0dXJuIGluZGV4LmdldE9yKHhzLmxlbmd0aCk7XG59O1xuXG4vKlxuICogZ3JpZCBpcyB0aGUgZ3JpZFxuICogcm93IGlzIHRoZSByb3cgaW5kZXggaW50byB0aGUgZ3JpZFxuICogY29sdW1uIGluIHRoZSBjb2x1bW4gaW5kZXggaW50byB0aGUgZ3JpZFxuICpcbiAqIFJldHVyblxuICogICBjb2xzcGFuOiBjb2x1bW4gc3BhbiBvZiB0aGUgY2VsbCBhdCAocm93LCBjb2x1bW4pXG4gKiAgIHJvd3NwYW46IHJvdyBzcGFuIG9mIHRoZSBjZWxsIGF0IChyb3csIGNvbHVtbilcbiAqL1xuY29uc3Qgc3ViZ3JpZCA9IChncmlkOiBSb3dDZWxsc1tdLCByb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pOiB7IGNvbHNwYW46IG51bWJlcjsgcm93c3BhbjogbnVtYmVyIH0gPT4ge1xuICBjb25zdCBncmlkUm93ID0gZ2V0Um93KGdyaWQsIHJvdyk7XG4gIGNvbnN0IGlzQ29sUm93ID0gZ3JpZFJvdy5zZWN0aW9uID09PSAnY29sZ3JvdXAnO1xuXG4gIGNvbnN0IGNvbHNwYW4gPSBmaW5kRGlmZihncmlkUm93LmNlbGxzLnNsaWNlKGNvbHVtbiksIGNvbXBhcmF0b3IpO1xuICBjb25zdCByb3dzcGFuID0gaXNDb2xSb3cgPyAxIDogZmluZERpZmYoZ2V0Q29sdW1uKGdyaWQuc2xpY2Uocm93KSwgY29sdW1uKSwgY29tcGFyYXRvcik7XG5cbiAgcmV0dXJuIHtcbiAgICBjb2xzcGFuLFxuICAgIHJvd3NwYW5cbiAgfTtcbn07XG5cbmV4cG9ydCB7XG4gIHN1YmdyaWRcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgdHlwZSBSZXN1bHQgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFNpbXBsZUdlbmVyYXRvcnMgfSBmcm9tICcuLi9hcGkvR2VuZXJhdG9ycyc7XG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIE1lcmdpbmdPcGVyYXRpb25zIGZyb20gJy4uL29wZXJhdGUvTWVyZ2luZ09wZXJhdGlvbnMnO1xuaW1wb3J0ICogYXMgTG9ja2VkQ29sdW1uVXRpbHMgZnJvbSAnLi4vdXRpbC9Mb2NrZWRDb2x1bW5VdGlscyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0gfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBGaXRtZW50IGZyb20gJy4vRml0bWVudCc7XG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4vR3JpZFJvdyc7XG5cbmNvbnN0IGlzU3Bhbm5pbmcgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCByb3c6IG51bWJlciwgY29sOiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBib29sZWFuID0+IHtcbiAgY29uc3QgY2FuZGlkYXRlID0gR3JpZFJvdy5nZXRDZWxsKGdyaWRbcm93XSwgY29sKTtcbiAgY29uc3QgbWF0Y2hpbmcgPSBGdW4uY3VycnkoY29tcGFyYXRvciwgY2FuZGlkYXRlLmVsZW1lbnQpO1xuICBjb25zdCBjdXJyZW50Um93ID0gZ3JpZFtyb3ddO1xuXG4gIC8vIHNhbml0eSBjaGVjaywgMXgxIGhhcyBubyBzcGFuc1xuICByZXR1cm4gZ3JpZC5sZW5ndGggPiAxICYmIEdyaWRSb3cuY2VsbExlbmd0aChjdXJyZW50Um93KSA+IDEgJiZcbiAgICAoXG4gICAgICAvLyBzZWFyY2ggbGVmdCwgaWYgd2UncmUgbm90IG9uIHRoZSBsZWZ0IGVkZ2VcbiAgICAgIC8vIHNlYXJjaCBkb3duLCBpZiB3ZSdyZSBub3Qgb24gdGhlIGJvdHRvbSBlZGdlXG4gICAgICAoY29sID4gMCAmJiBtYXRjaGluZyhHcmlkUm93LmdldENlbGxFbGVtZW50KGN1cnJlbnRSb3csIGNvbCAtIDEpKSkgfHxcbiAgICAgIC8vIHNlYXJjaCByaWdodCwgaWYgd2UncmUgbm90IG9uIHRoZSByaWdodCBlZGdlXG4gICAgICAoY29sIDwgY3VycmVudFJvdy5jZWxscy5sZW5ndGggLSAxICYmIG1hdGNoaW5nKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQoY3VycmVudFJvdywgY29sICsgMSkpKSB8fFxuICAgICAgLy8gc2VhcmNoIHVwLCBpZiB3ZSdyZSBub3Qgb24gdGhlIHRvcCBlZGdlXG4gICAgICAocm93ID4gMCAmJiBtYXRjaGluZyhHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRbcm93IC0gMV0sIGNvbCkpKSB8fFxuICAgICAgKHJvdyA8IGdyaWQubGVuZ3RoIC0gMSAmJiBtYXRjaGluZyhHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRbcm93ICsgMV0sIGNvbCkpKVxuICAgICk7XG59O1xuXG5jb25zdCBtZXJnZVRhYmxlcyA9IChcbiAgc3RhcnRBZGRyZXNzOiBTdHJ1Y3RzLkFkZHJlc3MsXG4gIGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sXG4gIGdyaWRCUm93czogU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PltdLFxuICBnZW5lcmF0b3I6IFNpbXBsZUdlbmVyYXRvcnMsXG4gIGNvbXBhcmF0b3I6IENvbXBFbG0sXG4gIGxvY2tlZENvbHVtbnM6IG51bWJlcltdXG4pOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICAvLyBBc3N1bWVzXG4gIC8vICAtIGdyaWRBIGlzIHNxdWFyZSBhbmQgZ3JpZEIgaXMgc3F1YXJlXG4gIGNvbnN0IHN0YXJ0Um93ID0gc3RhcnRBZGRyZXNzLnJvdztcbiAgY29uc3Qgc3RhcnRDb2wgPSBzdGFydEFkZHJlc3MuY29sdW1uO1xuICBjb25zdCBtZXJnZUhlaWdodCA9IGdyaWRCUm93cy5sZW5ndGg7XG4gIGNvbnN0IG1lcmdlV2lkdGggPSBHcmlkUm93LmNlbGxMZW5ndGgoZ3JpZEJSb3dzWzBdKTtcbiAgY29uc3QgZW5kUm93ID0gc3RhcnRSb3cgKyBtZXJnZUhlaWdodDtcbiAgY29uc3QgZW5kQ29sID0gc3RhcnRDb2wgKyBtZXJnZVdpZHRoICsgbG9ja2VkQ29sdW1ucy5sZW5ndGg7XG4gIGNvbnN0IGxvY2tlZENvbHVtbk9iaiA9IEFyci5tYXBUb09iamVjdChsb2NrZWRDb2x1bW5zLCBGdW4uYWx3YXlzKTtcbiAgLy8gZW1icmFjZSB0aGUgbXV0YXRpb24gLSBJIHRoaW5rIHRoaXMgaXMgZWFzaWVyIHRvIGZvbGxvdz8gVG8gZGlzY3Vzcy5cbiAgZm9yIChsZXQgciA9IHN0YXJ0Um93OyByIDwgZW5kUm93OyByKyspIHtcbiAgICBsZXQgc2tpcHBlZENvbCA9IDA7XG4gICAgZm9yIChsZXQgYyA9IHN0YXJ0Q29sOyBjIDwgZW5kQ29sOyBjKyspIHtcbiAgICAgIGlmIChsb2NrZWRDb2x1bW5PYmpbY10pIHtcbiAgICAgICAgc2tpcHBlZENvbCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3Bhbm5pbmcoZ3JpZEEsIHIsIGMsIGNvbXBhcmF0b3IpKSB7XG4gICAgICAgIC8vIG11dGF0aW9uIHdpdGhpbiBtdXRhdGlvbiwgaXQncyBtdXRhdGNlcHRpb25cbiAgICAgICAgTWVyZ2luZ09wZXJhdGlvbnMudW5tZXJnZShncmlkQSwgR3JpZFJvdy5nZXRDZWxsRWxlbWVudChncmlkQVtyXSwgYyksIGNvbXBhcmF0b3IsIGdlbmVyYXRvci5jZWxsKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGdyaWRCQ29sSW5kZXggPSBjIC0gc3RhcnRDb2wgLSBza2lwcGVkQ29sO1xuICAgICAgY29uc3QgbmV3Q2VsbCA9IEdyaWRSb3cuZ2V0Q2VsbChncmlkQlJvd3NbciAtIHN0YXJ0Um93XSwgZ3JpZEJDb2xJbmRleCk7XG4gICAgICAvLyBUaGlzIGNhbid0IGJlIGEgY29sIGVsZW1lbnQgYXQgdGhpcyBwb2ludCBzbyB3ZSBjYW4gY2FzdCBpdCB0byBhIGNlbGxcbiAgICAgIGNvbnN0IG5ld0NlbGxFbG0gPSBuZXdDZWxsLmVsZW1lbnQgYXMgU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gZ2VuZXJhdG9yLnJlcGxhY2UobmV3Q2VsbEVsbSk7XG4gICAgICBHcmlkUm93Lm11dGF0ZUNlbGwoZ3JpZEFbcl0sIGMsIFN0cnVjdHMuZWxlbWVudG5ldyhyZXBsYWNlbWVudCwgdHJ1ZSwgbmV3Q2VsbC5pc0xvY2tlZCkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JpZEE7XG59O1xuXG5jb25zdCBnZXRWYWxpZFN0YXJ0QWRkcmVzcyA9IChjdXJyZW50U3RhcnRBZGRyZXNzOiBTdHJ1Y3RzLkFkZHJlc3MsIGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgbG9ja2VkQ29sdW1uczogbnVtYmVyW10pOiBTdHJ1Y3RzLkFkZHJlc3MgPT4ge1xuICBjb25zdCBncmlkQ29sTGVuZ3RoID0gR3JpZFJvdy5jZWxsTGVuZ3RoKGdyaWRbMF0pO1xuICAvKlxuICAgIFdoZW4gd2UgcGFzdGUgZnJvbSBhIHRhYmxlIHdpdGhvdXQgY29sZ3JvdXBzIHRvIGEgdGFibGUgdGhhdCBoYXMgdGhlbSwgd2UgbmVlZCB0byBlbnN1cmUgd2UgYXJlIGluc2VydGluZyB0aGVtIGF0XG4gICAgdGhlIGNvcnJlY3Qgcm93IGluZGV4ICh0aGUgYGNvbGBzIGFyZSB0cmVhdGVkIGFzIGNlbGxzIGluIHRoZSBTdHJ1Y3RzLlJvd0NlbGxzIGFycmF5KS5cblxuICAgIFRvIGRvIHRoaXMsIHdlIGdldCB0aGUgbnVtYmVyIG9mIGBjb2xgcyBpbiB0aGUgZGVzdGluYXRpb24gdGFibGUgYW5kIGFkZCB0aGF0IHRvIHRoZSBzdGFydEFkZHJlc3Mgcm93LlxuICAqL1xuICBjb25zdCBhZGp1c3RlZFJvd0FkZHJlc3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5jb2xzLmxlbmd0aCArIGN1cnJlbnRTdGFydEFkZHJlc3Mucm93O1xuICBjb25zdCBwb3NzaWJsZUNvbEFkZHJlc3NlcyA9IEFyci5yYW5nZShncmlkQ29sTGVuZ3RoIC0gY3VycmVudFN0YXJ0QWRkcmVzcy5jb2x1bW4sIChudW0pID0+IG51bSArIGN1cnJlbnRTdGFydEFkZHJlc3MuY29sdW1uKTtcbiAgLy8gRmluZCBhIHN0YXJ0aW5nIGNvbHVtbiBhZGRyZXNzIHRoYXQgaXNuJ3QgYSBsb2NrZWQgY29sdW1uXG4gIGNvbnN0IHZhbGlkQ29sQWRkcmVzcyA9IEFyci5maW5kKHBvc3NpYmxlQ29sQWRkcmVzc2VzLCAobnVtKSA9PiBBcnIuZm9yYWxsKGxvY2tlZENvbHVtbnMsIChjb2wpID0+IGNvbCAhPT0gbnVtKSkuZ2V0T3IoZ3JpZENvbExlbmd0aCAtIDEpO1xuICByZXR1cm4ge1xuICAgIHJvdzogYWRqdXN0ZWRSb3dBZGRyZXNzLFxuICAgIGNvbHVtbjogdmFsaWRDb2xBZGRyZXNzXG4gIH07XG59O1xuXG5jb25zdCBnZXRMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzID0gKHN0YXJ0QWRkcmVzczogU3RydWN0cy5BZGRyZXNzLCByb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10sIGxvY2tlZENvbHVtbnM6IG51bWJlcltdKSA9PlxuICBBcnIuZmlsdGVyKGxvY2tlZENvbHVtbnMsIChjb2xOdW0pID0+IGNvbE51bSA+PSBzdGFydEFkZHJlc3MuY29sdW1uICYmIGNvbE51bSA8PSBHcmlkUm93LmNlbGxMZW5ndGgocm93c1swXSkgKyBzdGFydEFkZHJlc3MuY29sdW1uKTtcblxuY29uc3QgbWVyZ2UgPSAoc3RhcnRBZGRyZXNzOiBTdHJ1Y3RzLkFkZHJlc3MsIGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdyaWRCOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdlbmVyYXRvcjogU2ltcGxlR2VuZXJhdG9ycywgY29tcGFyYXRvcjogQ29tcEVsbSk6IFJlc3VsdDxTdHJ1Y3RzLlJvd0NlbGxzW10sIHN0cmluZz4gPT4ge1xuICBjb25zdCBsb2NrZWRDb2x1bW5zID0gTG9ja2VkQ29sdW1uVXRpbHMuZ2V0TG9ja2VkQ29sdW1uc0Zyb21HcmlkKGdyaWRBKTtcbiAgY29uc3QgdmFsaWRTdGFydEFkZHJlc3MgPSBnZXRWYWxpZFN0YXJ0QWRkcmVzcyhzdGFydEFkZHJlc3MsIGdyaWRBLCBsb2NrZWRDb2x1bW5zKTtcbiAgLypcbiAgICBXZSBhbHdheXMgcmVtb3ZlIHRoZSBjb2xzIChleHRyYWN0IHRoZSByb3dzKSBmcm9tIHRoZSB0YWJsZSBiZWluZyBwYXN0ZWQuIFRoaXMgZW5zdXJlcyB0aGF0IGlmIHdlIGFyZSBwYXN0aW5nIGZyb20gYSB0YWJsZSB3aXRoIGNvbGdyb3VwcyBpbnRvIGEgdGFibGVcbiAgICB3aXRob3V0IHRoZW0sIHdlIGRvbid0IGluc2VydCB0aGUgYGNvbGAgZWxlbWVudHMgYXMgaWYgdGhleSB3ZXJlIGB0ZGBzXG4gICovXG4gIGNvbnN0IGdyaWRCUm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWRCKS5yb3dzO1xuICBjb25zdCBsb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzID0gZ2V0TG9ja2VkQ29sdW1uc1dpdGhpbkJvdW5kcyh2YWxpZFN0YXJ0QWRkcmVzcywgZ3JpZEJSb3dzLCBsb2NrZWRDb2x1bW5zKTtcblxuICBjb25zdCByZXN1bHQgPSBGaXRtZW50Lm1lYXN1cmUodmFsaWRTdGFydEFkZHJlc3MsIGdyaWRBLCBncmlkQlJvd3MpO1xuICAvKlxuICAgIE5lZWQgdG8gc3VidHJhY3QgZXh0cmEgZGVsdGEgZm9yIGxvY2tlZCBjb2x1bW5zIGJldHdlZW4gc3RhcnRBZGRyZXNzIGFuZCB0aGUgc3RhcnRBZGRyZXNzICsgZ3JpZEIgY29sdW1uIGNvdW50IGFzXG4gICAgbG9ja2VkIGNvbHVtbiBjZWxscyBjYW5ub3QgYmUgbWVyZ2VkIGludG8uIFRoZXJlZm9yZSwgZXh0cmEgY29sdW1uIGNlbGxzIG5lZWQgdG8gYmUgYWRkZWQgdG8gZ3JpZEEgdG8gYWxsb3cgZ3JpZEIgY2VsbHMgdG8gYmUgbWVyZ2VkXG4gICovXG4gIHJldHVybiByZXN1bHQubWFwKChkaWZmKSA9PiB7XG4gICAgY29uc3QgZGVsdGE6IEZpdG1lbnQuRGVsdGEgPSB7XG4gICAgICAuLi5kaWZmLFxuICAgICAgY29sRGVsdGE6IGRpZmYuY29sRGVsdGEgLSBsb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzLmxlbmd0aFxuICAgIH07XG5cbiAgICBjb25zdCBmaXR0ZWRHcmlkID0gRml0bWVudC50YWlsb3IoZ3JpZEEsIGRlbHRhLCBnZW5lcmF0b3IpO1xuXG4gICAgLy8gTmVlZCB0byByZWNhbGN1bGF0ZSBsb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzIGFzIHRhaWxvcmluZyBtYXkgaGF2ZSBpbnNlcnRlZCBjb2x1bW5zIGJlZm9yZSBsYXN0IGxvY2tlZCBjb2x1bW4gd2hpY2ggY2hhbmdlcyB0aGUgbG9ja2VkIGluZGV4XG4gICAgY29uc3QgbmV3TG9ja2VkQ29sdW1ucyA9IExvY2tlZENvbHVtblV0aWxzLmdldExvY2tlZENvbHVtbnNGcm9tR3JpZChmaXR0ZWRHcmlkKTtcbiAgICBjb25zdCBuZXdMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzID0gZ2V0TG9ja2VkQ29sdW1uc1dpdGhpbkJvdW5kcyh2YWxpZFN0YXJ0QWRkcmVzcywgZ3JpZEJSb3dzLCBuZXdMb2NrZWRDb2x1bW5zKTtcbiAgICByZXR1cm4gbWVyZ2VUYWJsZXModmFsaWRTdGFydEFkZHJlc3MsIGZpdHRlZEdyaWQsIGdyaWRCUm93cywgZ2VuZXJhdG9yLCBjb21wYXJhdG9yLCBuZXdMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzKTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbnNlcnRDb2xzID0gKGluZGV4OiBudW1iZXIsIGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdyaWRCOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdlbmVyYXRvcjogU2ltcGxlR2VuZXJhdG9ycywgY29tcGFyYXRvcjogQ29tcEVsbSk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIE1lcmdpbmdPcGVyYXRpb25zLnNwbGl0Q29scyhncmlkQSwgaW5kZXgsIGNvbXBhcmF0b3IsIGdlbmVyYXRvci5jZWxsKTtcblxuICBjb25zdCBkZWx0YSA9IEZpdG1lbnQubWVhc3VyZUhlaWdodChncmlkQiwgZ3JpZEEpO1xuICBjb25zdCBmaXR0ZWROZXdHcmlkID0gRml0bWVudC50YWlsb3IoZ3JpZEIsIGRlbHRhLCBnZW5lcmF0b3IpO1xuXG4gIGNvbnN0IHNlY29uZERlbHRhID0gRml0bWVudC5tZWFzdXJlSGVpZ2h0KGdyaWRBLCBmaXR0ZWROZXdHcmlkKTtcbiAgY29uc3QgZml0dGVkT2xkR3JpZCA9IEZpdG1lbnQudGFpbG9yKGdyaWRBLCBzZWNvbmREZWx0YSwgZ2VuZXJhdG9yKTtcblxuICByZXR1cm4gQXJyLm1hcChmaXR0ZWRPbGRHcmlkLCAoZ3JpZFJvdywgaSkgPT4ge1xuICAgIHJldHVybiBHcmlkUm93LmFkZENlbGxzKGdyaWRSb3csIGluZGV4LCBmaXR0ZWROZXdHcmlkW2ldLmNlbGxzKTtcbiAgfSk7XG59O1xuXG4vKlxuICBJbnNlcnRpbmcgcm93cyB3aXRoIGxvY2tlZCBjb2x1bW5zXG4gIC0gVGFpbG9yIGdyaWRBIGZpcnN0ICh0aGlzIG5lZWRzIHRvIGJlIGRvbmUgZmlyc3QgYXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsb2NrZWQgY29sdW1ucyBtYXkgY2hhbmdlIHdoZW4gdGFpbG9yaW5nIGdyaWRBIGFuZCB0aGUgbG9jYXRpb24gb2YgdGhlIGxvY2tlZCBjb2x1bW5zIG5lZWRzIHRvIGJlIHN0YWJsZSBiZWZvcmUgdGFpbG9yaW5nIGdyaWRCKVxuICAgIC0gbWVhc3VyZSBkZWx0YSBiZXR3ZWVuIGdyaWRBIGFuZCBncmlkQiAocGFzdGVkIHJvd3MpIC0gaWYgbmVnYXRpdmUgY29sRGVsdGEsIGdyaWRBIG5lZWRzIGV4dHJhIGNvbHVtbnMgYWRkZWQgdG8gbWF0Y2ggZ3JpZEJcbiAgICAtIG5lZWQgdG8gY2FsY3VsYXRlIGhvdyBtYW55IGNvbHVtbnMgaW4gZ3JpZEIgY2Fubm90IGJlIGRpcmVjdGx5IGluc2VydGVkIGludG8gZ3JpZEEgLSB0aGlzIGlzIGhvdyBtYW55IGV4dHJhIGNvbHVtbnMgbmVlZCB0byBiZSBhZGRlZCB0byBncmlkQSAodGhpcyBjb25zaWRlcmVzIHRoZSBmYWN0IGxvY2tlZCBjb2x1bW4gY2Fubm90IGJlIGluc2VydGVkIGludG8pXG4gICAgICAtIG5vbkxvY2tlZEdyaWRBICsgbG9ja2VkR3JpZEEgLSBncmlkQiA9IGNvbERlbHRhIChCeSBzdWJ0cmFjdGluZyBsb2NrZWQgY29sdW1uIGNvdW50LCBjYW4gZ2V0IHJlcXVpcmVkIGRpZmYpXG4gICAgLSB0YWlsb3IgZ3JpZEEgYnkgYWRkaW5nIHRoZSByZXF1aXJlZCBleHRyYSBjb2x1bW5zIGlmIG5lY2Vzc2FyeSBlaXRoZXIgYXQgdGhlIGVuZCBvZiBncmlkQSBvciBiZWZvcmUgdGhlIGxhc3QgY29sdW1uIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0IGlzIGxvY2tlZFxuICAtIFJlY2FsY3VsYXRlIHdoZXJlIHRoZSBsb2NrZWQgY29sdW1ucyBhcmUgaW4gZ3JpZEEgYWZ0ZXIgdGFpbG9yaW5nXG4gIC0gTWVhc3VyZSBhbmQgZGV0ZXJtaW5lIGlmIGV4dHJhIGNvbHVtbnMgbmVlZCB0byBiZSBhZGRlZCB0byBncmlkQiAobG9ja2VkIGNvbHVtbnMgc2hvdWxkIG5vdCBjb3VudCB0b3dhcmRzIHRoZSBkZWx0YSBhcyBjb2xGaWxsaW5nIChhZGRpbmcgZXh0cmEgY29sdW1ucykgZm9yIGxvY2tlZCBjb2x1bW5zIGlzIGhhbmRsZWQgc2VwYXJhdGVseSlcbiAgLSBEbyBhIGxvY2tlZENvbEZpbGwgb24gZ3JpZEJcbiAgLSBUYWlsb3IgZ3JpZEIgYnkgYWRkaW5nIGV4dHJhIGNvbHVtbnMgdG8gZW5kIG9mIGdyaWRCIGlmIHJlcXVpcmVkXG4qL1xuXG5jb25zdCBpbnNlcnRSb3dzID0gKGluZGV4OiBudW1iZXIsIGdyaWRBOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdyaWRCOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGdlbmVyYXRvcjogU2ltcGxlR2VuZXJhdG9ycywgY29tcGFyYXRvcjogQ29tcEVsbSk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIE1lcmdpbmdPcGVyYXRpb25zLnNwbGl0Um93cyhncmlkQSwgaW5kZXgsIGNvbXBhcmF0b3IsIGdlbmVyYXRvci5jZWxsKTtcblxuICBjb25zdCBsb2NrZWQgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQoZ3JpZEEpO1xuICBjb25zdCBkaWZmID0gRml0bWVudC5tZWFzdXJlV2lkdGgoZ3JpZEEsIGdyaWRCKTtcbiAgY29uc3QgZGVsdGE6IEZpdG1lbnQuRGVsdGEgPSB7XG4gICAgLi4uZGlmZixcbiAgICBjb2xEZWx0YTogZGlmZi5jb2xEZWx0YSAtIGxvY2tlZC5sZW5ndGhcbiAgfTtcbiAgY29uc3QgZml0dGVkT2xkR3JpZCA9IEZpdG1lbnQudGFpbG9yKGdyaWRBLCBkZWx0YSwgZ2VuZXJhdG9yKTtcbiAgY29uc3QgeyBjb2xzOiBvbGRDb2xzLCByb3dzOiBvbGRSb3dzIH0gPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhmaXR0ZWRPbGRHcmlkKTtcblxuICBjb25zdCBuZXdMb2NrZWQgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQoZml0dGVkT2xkR3JpZCk7XG4gIGNvbnN0IHNlY29uZERpZmYgPSBGaXRtZW50Lm1lYXN1cmVXaWR0aChncmlkQiwgZ3JpZEEpO1xuICAvLyBEb24ndCB3YW50IHRoZSBsb2NrZWQgY29sdW1ucyB0byBjb3VudCB0b3dhcmRzIHRvIHRoZSBjb2xEZWx0YSBhcyBjb2x1bW4gZmlsbGluZyBmb3IgbG9ja2VkIGNvbHVtbnMgaXMgaGFuZGxlZCBzZXBhcmF0ZWx5XG4gIGNvbnN0IHNlY29uZERlbHRhOiBGaXRtZW50LkRlbHRhID0ge1xuICAgIC4uLnNlY29uZERpZmYsXG4gICAgY29sRGVsdGE6IHNlY29uZERpZmYuY29sRGVsdGEgKyBuZXdMb2NrZWQubGVuZ3RoXG4gIH07XG4gIGNvbnN0IGZpdHRlZEdyaWRCID0gRml0bWVudC5sb2NrZWRDb2xGaWxsKGdyaWRCLCBnZW5lcmF0b3IsIG5ld0xvY2tlZCk7XG4gIGNvbnN0IGZpdHRlZE5ld0dyaWQgPSBGaXRtZW50LnRhaWxvcihmaXR0ZWRHcmlkQiwgc2Vjb25kRGVsdGEsIGdlbmVyYXRvcik7XG5cbiAgcmV0dXJuIFtcbiAgICAuLi5vbGRDb2xzLFxuICAgIC4uLm9sZFJvd3Muc2xpY2UoMCwgaW5kZXgpLFxuICAgIC4uLmZpdHRlZE5ld0dyaWQsXG4gICAgLi4ub2xkUm93cy5zbGljZShpbmRleCwgb2xkUm93cy5sZW5ndGgpXG4gIF07XG59O1xuXG5leHBvcnQge1xuICBtZXJnZSxcbiAgaW5zZXJ0Q29scyxcbiAgaW5zZXJ0Um93c1xufTtcbiIsImltcG9ydCB7IEFyciwgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBHZW5lcmF0b3JzIH0gZnJvbSAnLi4vYXBpL0dlbmVyYXRvcnMnO1xuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuLi9hcGkvV2FyZWhvdXNlJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSwgUm93Q2VsbCwgUm93RWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCAqIGFzIFRhYmxlR3JpZCBmcm9tICcuL1RhYmxlR3JpZCc7XG5cbmNvbnN0IHRvRGV0YWlscyA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZDogU3RydWN0cy5Sb3dDZWxsczxSPltdLCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3RydWN0cy5Sb3dEZXRhaWxOZXc8U3RydWN0cy5EZXRhaWxOZXc8Um93Q2VsbDxSPj4sIFI+W10gPT4ge1xuICBjb25zdCBzZWVuOiBib29sZWFuW11bXSA9IEFyci5tYXAoZ3JpZCwgKHJvdykgPT5cbiAgICBBcnIubWFwKHJvdy5jZWxscywgRnVuLm5ldmVyKVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZVNlZW4gPSAocm93SW5kZXg6IG51bWJlciwgY29sdW1uSW5kZXg6IG51bWJlciwgcm93c3BhbjogbnVtYmVyLCBjb2xzcGFuOiBudW1iZXIpID0+IHtcbiAgICBmb3IgKGxldCByb3cgPSByb3dJbmRleDsgcm93IDwgcm93SW5kZXggKyByb3dzcGFuOyByb3crKykge1xuICAgICAgZm9yIChsZXQgY29sdW1uID0gY29sdW1uSW5kZXg7IGNvbHVtbiA8IGNvbHVtbkluZGV4ICsgY29sc3BhbjsgY29sdW1uKyspIHtcbiAgICAgICAgc2Vlbltyb3ddW2NvbHVtbl0gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQXJyLm1hcChncmlkLCAocm93LCByb3dJbmRleCkgPT4ge1xuICAgIGNvbnN0IGRldGFpbHMgPSBBcnIuYmluZChyb3cuY2VsbHMsIChjZWxsLCBjb2x1bW5JbmRleCkgPT4ge1xuICAgICAgLy8gaWYgd2UgaGF2ZSBzZWVuIHRoaXMgb25lLCB0aGVuIHNraXAgaXQuXG4gICAgICBpZiAoc2Vlbltyb3dJbmRleF1bY29sdW1uSW5kZXhdID09PSBmYWxzZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBUYWJsZUdyaWQuc3ViZ3JpZChncmlkLCByb3dJbmRleCwgY29sdW1uSW5kZXgsIGNvbXBhcmF0b3IpO1xuICAgICAgICB1cGRhdGVTZWVuKHJvd0luZGV4LCBjb2x1bW5JbmRleCwgcmVzdWx0LnJvd3NwYW4sIHJlc3VsdC5jb2xzcGFuKTtcbiAgICAgICAgcmV0dXJuIFsgU3RydWN0cy5kZXRhaWxuZXcoY2VsbC5lbGVtZW50LCByZXN1bHQucm93c3BhbiwgcmVzdWx0LmNvbHNwYW4sIGNlbGwuaXNOZXcpIF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW10gYXMgU3RydWN0cy5EZXRhaWxOZXc8Um93Q2VsbDxSPj5bXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gU3RydWN0cy5yb3dkZXRhaWxuZXcocm93LmVsZW1lbnQsIGRldGFpbHMsIHJvdy5zZWN0aW9uLCByb3cuaXNOZXcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvR3JpZCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgZ2VuZXJhdG9yczogR2VuZXJhdG9ycywgaXNOZXc6IGJvb2xlYW4pOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCBncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPSBbXTtcblxuICBBcnIuZWFjaCh3YXJlaG91c2UuY29sZ3JvdXBzLCAoY29sZ3JvdXApID0+IHtcbiAgICBjb25zdCBjb2xncm91cENvbHM6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDb2xFbGVtZW50PltdID0gW107XG4gICAgLy8gVGhpcyB3aWxsIGFkZCBtaXNzaW5nIGNvbHMgYXMgd2VsbCBhcyBjbGFtcCB0aGUgbnVtYmVyIG9mIGNvbHMgdG8gdGhlIG1heCBudW1iZXIgb2YgYWN0dWFsIGNvbHVtbnNcbiAgICAvLyBOb3RlOiBTcGFucyBvbiBjb2xzIGFyZSB1bnN1cHBvcnRlZCBzbyBjbGFtcGluZyBjb2xzIG1heSByZXN1bHQgaW4gYSBzcGFuIG9uIGEgY29sIGVsZW1lbnQgYmVpbmcgaW5jb3JyZWN0XG4gICAgZm9yIChsZXQgY29sdW1uSW5kZXggPSAwOyBjb2x1bW5JbmRleCA8IHdhcmVob3VzZS5ncmlkLmNvbHVtbnM7IGNvbHVtbkluZGV4KyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBXYXJlaG91c2UuZ2V0Q29sdW1uQXQod2FyZWhvdXNlLCBjb2x1bW5JbmRleClcbiAgICAgICAgLm1hcCgoY29sdW1uKSA9PiBTdHJ1Y3RzLmVsZW1lbnRuZXcoY29sdW1uLmVsZW1lbnQsIGlzTmV3LCBmYWxzZSkpXG4gICAgICAgIC5nZXRPclRodW5rKCgpID0+IFN0cnVjdHMuZWxlbWVudG5ldyhnZW5lcmF0b3JzLmNvbEdhcCgpLCB0cnVlLCBmYWxzZSkpO1xuICAgICAgY29sZ3JvdXBDb2xzLnB1c2goZWxlbWVudCk7XG4gICAgfVxuICAgIGdyaWQucHVzaChTdHJ1Y3RzLnJvd2NlbGxzKGNvbGdyb3VwLmVsZW1lbnQsIGNvbGdyb3VwQ29scywgJ2NvbGdyb3VwJywgaXNOZXcpKTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHdhcmVob3VzZS5ncmlkLnJvd3M7IHJvd0luZGV4KyspIHtcbiAgICBjb25zdCByb3dDZWxsczogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdID0gW107XG4gICAgZm9yIChsZXQgY29sdW1uSW5kZXggPSAwOyBjb2x1bW5JbmRleCA8IHdhcmVob3VzZS5ncmlkLmNvbHVtbnM7IGNvbHVtbkluZGV4KyspIHtcbiAgICAgIC8vIFRoZSBlbGVtZW50IGlzIGdvaW5nIHRvIGJlIHRoZSBlbGVtZW50IGF0IHRoYXQgcG9zaXRpb24sIG9yIGEgbmV3bHkgZ2VuZXJhdGVkIGdhcC5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBXYXJlaG91c2UuZ2V0QXQod2FyZWhvdXNlLCByb3dJbmRleCwgY29sdW1uSW5kZXgpLm1hcCgoaXRlbSkgPT5cbiAgICAgICAgU3RydWN0cy5lbGVtZW50bmV3KGl0ZW0uZWxlbWVudCwgaXNOZXcsIGl0ZW0uaXNMb2NrZWQpXG4gICAgICApLmdldE9yVGh1bmsoKCkgPT5cbiAgICAgICAgU3RydWN0cy5lbGVtZW50bmV3KGdlbmVyYXRvcnMuZ2FwKCksIHRydWUsIGZhbHNlKVxuICAgICAgKTtcbiAgICAgIHJvd0NlbGxzLnB1c2goZWxlbWVudCk7XG4gICAgfVxuICAgIGNvbnN0IHJvd0RldGFpbCA9IHdhcmVob3VzZS5hbGxbcm93SW5kZXhdO1xuICAgIGNvbnN0IHJvdyA9IFN0cnVjdHMucm93Y2VsbHMocm93RGV0YWlsLmVsZW1lbnQsIHJvd0NlbGxzLCByb3dEZXRhaWwuc2VjdGlvbiwgaXNOZXcpO1xuICAgIGdyaWQucHVzaChyb3cpO1xuICB9XG5cbiAgcmV0dXJuIGdyaWQ7XG59O1xuXG5leHBvcnQge1xuICB0b0RldGFpbHMsXG4gIHRvR3JpZFxufTtcbiIsImltcG9ydCB7IEFyciwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi4vbW9kZWwvR3JpZFJvdyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50LCBDb21wRWxtIH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxudHlwZSBTdWJzdCA9ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG5cbi8vIHN1YnN0aXR1dGlvbjogKCkgLT4gaXRlbVxuY29uc3QgbWVyZ2UgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBib3VuZHM6IFN0cnVjdHMuQm91bmRzLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3Qgcm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLnJvd3M7XG4gIC8vIE11dGF0aW5nLiBEbyB3ZSBjYXJlIGFib3V0IHRoZSBlZmZpY2llbmN5IGdhaW4/XG4gIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBncmlkO1xuICB9XG4gIGZvciAobGV0IGkgPSBib3VuZHMuc3RhcnRSb3c7IGkgPD0gYm91bmRzLmZpbmlzaFJvdzsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IGJvdW5kcy5zdGFydENvbDsgaiA8PSBib3VuZHMuZmluaXNoQ29sOyBqKyspIHtcbiAgICAgIC8vIFdlIGNhbiBwcm9iYWJseSBzaW1wbGlmeSB0aGlzIGFnYWluIG5vdyB0aGF0IHdlIGFyZW4ndCByZXVzaW5nIG1lcmdlLlxuICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTtcbiAgICAgIGNvbnN0IGlzTG9ja2VkID0gR3JpZFJvdy5nZXRDZWxsKHJvdywgaikuaXNMb2NrZWQ7XG4gICAgICBHcmlkUm93Lm11dGF0ZUNlbGwocm93LCBqLCBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0aW9uKCksIGZhbHNlLCBpc0xvY2tlZCkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JpZDtcbn07XG5cbi8vIHN1YnN0aXR1dGlvbjogKCkgLT4gaXRlbVxuY29uc3QgdW5tZXJnZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHRhcmdldDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICAvLyBNdXRhdGluZy4gRG8gd2UgY2FyZSBhYm91dCB0aGUgZWZmaWNpZW5jeSBnYWluP1xuICBsZXQgZmlyc3QgPSB0cnVlO1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IEdyaWRSb3cuY2VsbExlbmd0aChyb3dzWzBdKTsgaisrKSB7XG4gICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgY29uc3QgY3VycmVudENlbGwgPSBHcmlkUm93LmdldENlbGwocm93LCBqKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRDZWxsRWxtID0gY3VycmVudENlbGwuZWxlbWVudDtcbiAgICAgIGNvbnN0IGlzVG9SZXBsYWNlID0gY29tcGFyYXRvcihjdXJyZW50Q2VsbEVsbSwgdGFyZ2V0KTtcblxuICAgICAgaWYgKGlzVG9SZXBsYWNlICYmICFmaXJzdCkge1xuICAgICAgICBHcmlkUm93Lm11dGF0ZUNlbGwocm93LCBqLCBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0aW9uKCksIHRydWUsIGN1cnJlbnRDZWxsLmlzTG9ja2VkKSk7XG4gICAgICB9IGVsc2UgaWYgKGlzVG9SZXBsYWNlKSB7XG4gICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBncmlkO1xufTtcblxuY29uc3QgdW5pcXVlQ2VsbHMgPSA8VCBleHRlbmRzIENlbGxFbGVtZW50Pihyb3c6IFN0cnVjdHMuRWxlbWVudE5ldzxUPltdLCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3RydWN0cy5FbGVtZW50TmV3PFQ+W10gPT4ge1xuICByZXR1cm4gQXJyLmZvbGRsKHJvdywgKHJlc3QsIGNlbGwpID0+IHtcbiAgICByZXR1cm4gQXJyLmV4aXN0cyhyZXN0LCAoY3VycmVudENlbGwpID0+IHtcbiAgICAgIHJldHVybiBjb21wYXJhdG9yKGN1cnJlbnRDZWxsLmVsZW1lbnQsIGNlbGwuZWxlbWVudCk7XG4gICAgfSkgPyByZXN0IDogcmVzdC5jb25jYXQoWyBjZWxsIF0pO1xuICB9LCBbXSBhcyBTdHJ1Y3RzLkVsZW1lbnROZXc8VD5bXSk7XG59O1xuXG5jb25zdCBzcGxpdENvbHMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgLy8gV2UgZG9uJ3QgbmVlZCB0byBzcGxpdCByb3dzIGlmIHdlJ3JlIGluc2VydGluZyBhdCB0aGUgZmlyc3Qgb3IgbGFzdCByb3cgb2YgdGhlIG9sZCB0YWJsZVxuICBpZiAoaW5kZXggPiAwICYmIGluZGV4IDwgZ3JpZFswXS5jZWxscy5sZW5ndGgpIHtcbiAgICBBcnIuZWFjaChncmlkLCAocm93KSA9PiB7XG4gICAgICBjb25zdCBwcmV2Q2VsbCA9IHJvdy5jZWxsc1tpbmRleCAtIDFdO1xuICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICBjb25zdCBzdWJzdGl0dXRlID0gc3Vic3RpdHV0aW9uKCk7XG5cbiAgICAgIHdoaWxlIChyb3cuY2VsbHMubGVuZ3RoID4gaW5kZXggKyBvZmZzZXQgJiYgY29tcGFyYXRvcihwcmV2Q2VsbC5lbGVtZW50LCByb3cuY2VsbHNbaW5kZXggKyBvZmZzZXRdLmVsZW1lbnQpKSB7XG4gICAgICAgIEdyaWRSb3cubXV0YXRlQ2VsbChyb3csIGluZGV4ICsgb2Zmc2V0LCBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0ZSwgdHJ1ZSwgcm93LmNlbGxzW2luZGV4ICsgb2Zmc2V0XS5pc0xvY2tlZCkpO1xuICAgICAgICBvZmZzZXQrKztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBncmlkO1xufTtcblxuY29uc3Qgc3BsaXRSb3dzID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIC8vIFdlIGRvbid0IG5lZWQgdG8gc3BsaXQgcm93cyBpZiB3ZSdyZSBpbnNlcnRpbmcgYXQgdGhlIGZpcnN0IG9yIGxhc3Qgcm93IG9mIHRoZSBvbGQgdGFibGVcbiAgY29uc3Qgcm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLnJvd3M7XG4gIGlmIChpbmRleCA+IDAgJiYgaW5kZXggPCByb3dzLmxlbmd0aCkge1xuICAgIGNvbnN0IHJvd1ByZXZDZWxscyA9IHJvd3NbaW5kZXggLSAxXS5jZWxscztcbiAgICBjb25zdCBjZWxscyA9IHVuaXF1ZUNlbGxzKHJvd1ByZXZDZWxscywgY29tcGFyYXRvcik7XG4gICAgQXJyLmVhY2goY2VsbHMsIChjZWxsKSA9PiB7XG4gICAgICAvLyBvbmx5IG1ha2UgYSBzdWIgd2hlbiB3ZSBoYXZlIHRvXG4gICAgICBsZXQgcmVwbGFjZW1lbnQgPSBPcHRpb25hbC5ub25lPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+KCk7XG4gICAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgR3JpZFJvdy5jZWxsTGVuZ3RoKHJvd3NbMF0pOyBqKyspIHtcbiAgICAgICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBHcmlkUm93LmdldENlbGwocm93LCBqKTtcbiAgICAgICAgICBjb25zdCBpc1RvUmVwbGFjZSA9IGNvbXBhcmF0b3IoY3VycmVudC5lbGVtZW50LCBjZWxsLmVsZW1lbnQpO1xuXG4gICAgICAgICAgaWYgKGlzVG9SZXBsYWNlKSB7XG4gICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQuaXNOb25lKCkpIHtcbiAgICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSBPcHRpb25hbC5zb21lKHN1YnN0aXR1dGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcGxhY2VtZW50LmVhY2goKHN1YikgPT4ge1xuICAgICAgICAgICAgICBHcmlkUm93Lm11dGF0ZUNlbGwocm93LCBqLCBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3ViLCB0cnVlLCBjdXJyZW50LmlzTG9ja2VkKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBncmlkO1xufTtcblxuZXhwb3J0IHtcbiAgbWVyZ2UsXG4gIHVubWVyZ2UsXG4gIHNwbGl0Q29scyxcbiAgc3BsaXRSb3dzXG59O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4uL21vZGVsL0dyaWRSb3cnO1xuaW1wb3J0IHR5cGUgeyBDb21wRWxtLCBTdWJzdCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbnR5cGUgQ2xvbmVDZWxsID0gKGVsZW06IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGluZGV4OiBudW1iZXIpID0+IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD47XG5cbmNvbnN0IGNsb25lUm93ID0gKHJvdzogU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PiwgY2xvbmVDZWxsOiBDbG9uZUNlbGwsIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpID0+XG4gIEdyaWRSb3cuY2xvbmUocm93LCAoZWxlbSkgPT4gc3Vic3RpdHV0aW9uKGVsZW0sIGNvbXBhcmF0b3IpLCBjbG9uZUNlbGwpO1xuXG4vLyBzdWJzdGl0dXRpb24gOjogKGl0ZW0sIGNvbXBhcmF0b3IpIC0+IGl0ZW1cbi8vIGV4YW1wbGUgaXMgdGhlIGxvY2F0aW9uIG9mIHRoZSBjdXJzb3IgKHRoZSByb3cgaW5kZXgpXG4vLyBpbmRleCBpcyB0aGUgaW5zZXJ0IHBvc2l0aW9uIChhdCAtIG9yIGFmdGVyIC0gZXhhbXBsZSkgKHRoZSByb3cgaW5kZXgpXG5jb25zdCBpbnNlcnRSb3dBdCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGluZGV4OiBudW1iZXIsIGV4YW1wbGU6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHsgcm93cywgY29scyB9ID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCk7XG4gIGNvbnN0IGJlZm9yZSA9IHJvd3Muc2xpY2UoMCwgaW5kZXgpO1xuICBjb25zdCBhZnRlciA9IHJvd3Muc2xpY2UoaW5kZXgpO1xuXG4gIGNvbnN0IG5ld1JvdyA9IGNsb25lUm93KHJvd3NbZXhhbXBsZV0sIChleCwgYykgPT4ge1xuICAgIGNvbnN0IHdpdGhpblNwYW4gPSBpbmRleCA+IDAgJiYgaW5kZXggPCByb3dzLmxlbmd0aCAmJiBjb21wYXJhdG9yKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQocm93c1tpbmRleCAtIDFdLCBjKSwgR3JpZFJvdy5nZXRDZWxsRWxlbWVudChyb3dzW2luZGV4XSwgYykpO1xuICAgIGNvbnN0IHJldCA9IHdpdGhpblNwYW4gPyBHcmlkUm93LmdldENlbGwocm93c1tpbmRleF0sIGMpIDogU3RydWN0cy5lbGVtZW50bmV3KHN1YnN0aXR1dGlvbihleC5lbGVtZW50LCBjb21wYXJhdG9yKSwgdHJ1ZSwgZXguaXNMb2NrZWQpO1xuICAgIHJldHVybiByZXQ7XG4gIH0sIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbik7XG5cbiAgcmV0dXJuIFtcbiAgICAuLi5jb2xzLFxuICAgIC4uLmJlZm9yZSxcbiAgICBuZXdSb3csXG4gICAgLi4uYWZ0ZXJcbiAgXTtcbn07XG5cbmNvbnN0IGdldEVsZW1lbnRGb3IgPSAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzLCBjb2x1bW46IG51bWJlciwgc2VjdGlvbjogc3RyaW5nLCB3aXRoaW5TcGFuOiBib29sZWFuLCBleGFtcGxlOiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLkVsZW1lbnROZXcgPT4ge1xuICBpZiAoc2VjdGlvbiA9PT0gJ2NvbGdyb3VwJyB8fCAhd2l0aGluU3Bhbikge1xuICAgIGNvbnN0IGNlbGwgPSBHcmlkUm93LmdldENlbGwocm93LCBleGFtcGxlKTtcbiAgICAvLyBsb2NrZWQgaXMgZXhwbGljaXRseSBzZXQgdG8gZmFsc2Ugc28gdGhlIG5ld2x5IGluc2VydGVkIGNvbHVtbiBkb2Vzbid0IGluaGVyaXQgZXhhbXBsZSBjb2x1bW4gbG9ja2VkIHN0YXRlXG4gICAgcmV0dXJuIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oY2VsbC5lbGVtZW50LCBjb21wYXJhdG9yKSwgdHJ1ZSwgZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBHcmlkUm93LmdldENlbGwocm93LCBjb2x1bW4pO1xuICB9XG59O1xuXG4vLyBzdWJzdGl0dXRpb24gOjogKGl0ZW0sIGNvbXBhcmF0b3IpIC0+IGl0ZW1cbi8vIGV4YW1wbGUgaXMgdGhlIGxvY2F0aW9uIG9mIHRoZSBjdXJzb3IgKHRoZSBjb2x1bW4gaW5kZXgpXG4vLyBpbmRleCBpcyB0aGUgaW5zZXJ0IHBvc2l0aW9uIChhdCAtIG9yIGFmdGVyIC0gZXhhbXBsZSkgKHRoZSBjb2x1bW4gaW5kZXgpXG5jb25zdCBpbnNlcnRDb2x1bW5BdCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGluZGV4OiBudW1iZXIsIGV4YW1wbGU6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICBBcnIubWFwKGdyaWQsIChyb3cpID0+IHtcbiAgICBjb25zdCB3aXRoaW5TcGFuID0gaW5kZXggPiAwICYmIGluZGV4IDwgR3JpZFJvdy5jZWxsTGVuZ3RoKHJvdykgJiYgY29tcGFyYXRvcihHcmlkUm93LmdldENlbGxFbGVtZW50KHJvdywgaW5kZXggLSAxKSwgR3JpZFJvdy5nZXRDZWxsRWxlbWVudChyb3csIGluZGV4KSk7XG4gICAgY29uc3Qgc3ViID0gZ2V0RWxlbWVudEZvcihyb3csIGluZGV4LCByb3cuc2VjdGlvbiwgd2l0aGluU3BhbiwgZXhhbXBsZSwgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uKTtcblxuICAgIHJldHVybiBHcmlkUm93LmFkZENlbGwocm93LCBpbmRleCwgc3ViKTtcbiAgfSk7XG5cbi8vIHN1YnN0aXR1dGlvbiA6OiAoaXRlbSwgY29tcGFyYXRvcikgLT4gaXRlbVxuLy8gUmV0dXJuczpcbi8vIC0gYSBuZXcgZ3JpZCB3aXRoIHRoZSBjZWxsIGF0IGNvb3JkcyBbZXhhbXBsZVJvdywgZXhhbXBsZUNvbF0gc3BsaXQgaW50byB0d28gY2VsbHMgKHRoZVxuLy8gICBuZXcgY2VsbCBmb2xsb3dzLCBhbmQgaXMgZW1wdHkpLCBhbmRcbi8vIC0gdGhlIG90aGVyIGNlbGxzIGluIHRoYXQgY29sdW1uIHNldCB0byBzcGFuIHRoZSBzcGxpdCBjZWxsLlxuY29uc3Qgc3BsaXRDZWxsSW50b0NvbHVtbnMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBleGFtcGxlUm93OiBudW1iZXIsIGV4YW1wbGVDb2w6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IGluZGV4ID0gZXhhbXBsZUNvbCArIDE7IC8vIGluc2VydCBhZnRlclxuICByZXR1cm4gQXJyLm1hcChncmlkLCAocm93LCBpKSA9PiB7XG4gICAgY29uc3QgaXNUYXJnZXRDZWxsID0gKGkgPT09IGV4YW1wbGVSb3cpO1xuICAgIGNvbnN0IGNlbGwgPSBHcmlkUm93LmdldENlbGwocm93LCBleGFtcGxlQ29sKTtcbiAgICBjb25zdCBzdWIgPSBpc1RhcmdldENlbGwgPyBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0aW9uKGNlbGwuZWxlbWVudCwgY29tcGFyYXRvciksIHRydWUsIGNlbGwuaXNMb2NrZWQpIDogY2VsbDtcbiAgICByZXR1cm4gR3JpZFJvdy5hZGRDZWxsKHJvdywgaW5kZXgsIHN1Yik7XG4gIH0pO1xufTtcblxuLy8gc3Vic3RpdHV0aW9uIDo6IChpdGVtLCBjb21wYXJhdG9yKSAtPiBpdGVtXG4vLyBSZXR1cm5zOlxuLy8gLSBhIG5ldyBncmlkIHdpdGggdGhlIGNlbGwgYXQgY29vcmRzIFtleGFtcGxlUm93LCBleGFtcGxlQ29sXSBzcGxpdCBpbnRvIHR3byBjZWxscyAodGhlXG4vLyAgIG5ldyBjZWxsIGJlbG93LCBhbmQgaXMgZW1wdHkpLCBhbmRcbi8vIC0gdGhlIG90aGVyIGNlbGxzIGluIHRoYXQgcm93IHNldCB0byBzcGFuIHRoZSBzcGxpdCBjZWxsLlxuY29uc3Qgc3BsaXRDZWxsSW50b1Jvd3MgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBleGFtcGxlUm93OiBudW1iZXIsIGV4YW1wbGVDb2w6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHsgcm93cywgY29scyB9ID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCk7XG4gIGNvbnN0IGluZGV4ID0gZXhhbXBsZVJvdyArIDE7IC8vIGluc2VydCBhZnRlclxuICBjb25zdCBiZWZvcmUgPSByb3dzLnNsaWNlKDAsIGluZGV4KTtcbiAgY29uc3QgYWZ0ZXIgPSByb3dzLnNsaWNlKGluZGV4KTtcblxuICBjb25zdCBuZXdSb3cgPSBjbG9uZVJvdyhyb3dzW2V4YW1wbGVSb3ddLCAoZXgsIGkpID0+IHtcbiAgICBjb25zdCBpc1RhcmdldENlbGwgPSAoaSA9PT0gZXhhbXBsZUNvbCk7XG4gICAgcmV0dXJuIGlzVGFyZ2V0Q2VsbCA/IFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oZXguZWxlbWVudCwgY29tcGFyYXRvciksIHRydWUsIGV4LmlzTG9ja2VkKSA6IGV4O1xuICB9LCBjb21wYXJhdG9yLCBzdWJzdGl0dXRpb24pO1xuXG4gIHJldHVybiBbXG4gICAgLi4uY29scyxcbiAgICAuLi5iZWZvcmUsXG4gICAgbmV3Um93LFxuICAgIC4uLmFmdGVyXG4gIF07XG59O1xuXG5jb25zdCBkZWxldGVDb2x1bW5zQXQgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBjb2x1bW5zOiBudW1iZXJbXSk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICBBcnIuYmluZChncmlkLCAocm93KSA9PiB7XG4gICAgY29uc3QgZXhpc3RpbmdDZWxscyA9IHJvdy5jZWxscztcbiAgICBjb25zdCBjZWxscyA9IEFyci5mb2xkcihjb2x1bW5zLCAoYWNjLCBjb2x1bW4pID0+IGNvbHVtbiA+PSAwICYmIGNvbHVtbiA8IGFjYy5sZW5ndGggPyBhY2Muc2xpY2UoMCwgY29sdW1uKS5jb25jYXQoYWNjLnNsaWNlKGNvbHVtbiArIDEpKSA6IGFjYywgZXhpc3RpbmdDZWxscyk7XG4gICAgcmV0dXJuIGNlbGxzLmxlbmd0aCA+IDAgPyBbIFN0cnVjdHMucm93Y2VsbHMocm93LmVsZW1lbnQsIGNlbGxzLCByb3cuc2VjdGlvbiwgcm93LmlzTmV3KSBdIDogW107XG4gIH0pO1xuXG5jb25zdCBkZWxldGVSb3dzQXQgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBzdGFydDogbnVtYmVyLCBmaW5pc2g6IG51bWJlcik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHsgcm93cywgY29scyB9ID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCk7XG4gIHJldHVybiBbXG4gICAgLi4uY29scyxcbiAgICAuLi5yb3dzLnNsaWNlKDAsIHN0YXJ0KSxcbiAgICAuLi5yb3dzLnNsaWNlKGZpbmlzaCArIDEpXG4gIF07XG59O1xuXG5leHBvcnQge1xuICBpbnNlcnRSb3dBdCxcbiAgaW5zZXJ0Q29sdW1uQXQsXG4gIHNwbGl0Q2VsbEludG9Db2x1bW5zLFxuICBzcGxpdENlbGxJbnRvUm93cyxcbiAgZGVsZXRlUm93c0F0LFxuICBkZWxldGVDb2x1bW5zQXRcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBJbnNlcnQsIEluc2VydEFsbCwgUmVtb3ZlLCBSZXBsaWNhdGlvbiwgU2VsZWN0b3JGaWx0ZXIsIFNlbGVjdG9yRmluZCwgU3VnYXJFbGVtZW50LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgRGV0YWlsLCBEZXRhaWxOZXcsIFJvd0RldGFpbE5ldywgU2VjdGlvbiB9IGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcblxuaW50ZXJmYWNlIE5ld1Jvd3NBbmRDZWxscyB7XG4gIHJlYWRvbmx5IG5ld1Jvd3M6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50PltdO1xuICByZWFkb25seSBuZXdDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdO1xufVxuXG5jb25zdCBzZXRJZk5vdCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIGlnbm9yZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gaWdub3JlKSB7XG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCBwcm9wZXJ0eSk7XG4gIH0gZWxzZSB7XG4gICAgQXR0cmlidXRlLnNldChlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICB9XG59O1xuXG5jb25zdCBpbnNlcnQgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Piwgc2VsZWN0b3I6IHN0cmluZywgZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVNlY3Rpb25FbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4pID0+IHtcbiAgQXJyLmxhc3QoU2VsZWN0b3JGaWx0ZXIuY2hpbGRyZW4odGFibGUsIHNlbGVjdG9yKSkuZm9sZChcbiAgICAoKSA9PiBJbnNlcnQucHJlcGVuZCh0YWJsZSwgZWxlbWVudCksXG4gICAgKGNoaWxkKSA9PiBJbnNlcnQuYWZ0ZXIoY2hpbGQsIGVsZW1lbnQpXG4gICk7XG59O1xuXG5jb25zdCBnZW5lcmF0ZVNlY3Rpb24gPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Piwgc2VjdGlvbk5hbWU6IFNlY3Rpb24pID0+IHtcbiAgY29uc3Qgc2VjdGlvbiA9IFNlbGVjdG9yRmluZC5jaGlsZCh0YWJsZSwgc2VjdGlvbk5hbWUpLmdldE9yVGh1bmsoKCkgPT4ge1xuICAgIGNvbnN0IG5ld1NlY3Rpb24gPSBTdWdhckVsZW1lbnQuZnJvbVRhZyhzZWN0aW9uTmFtZSwgVHJhdmVyc2Uub3duZXIodGFibGUpLmRvbSk7XG4gICAgaWYgKHNlY3Rpb25OYW1lID09PSAndGhlYWQnKSB7XG4gICAgICBpbnNlcnQodGFibGUsICdjYXB0aW9uLGNvbGdyb3VwJywgbmV3U2VjdGlvbik7XG4gICAgfSBlbHNlIGlmIChzZWN0aW9uTmFtZSA9PT0gJ2NvbGdyb3VwJykge1xuICAgICAgaW5zZXJ0KHRhYmxlLCAnY2FwdGlvbicsIG5ld1NlY3Rpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBJbnNlcnQuYXBwZW5kKHRhYmxlLCBuZXdTZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1NlY3Rpb247XG4gIH0pO1xuXG4gIFJlbW92ZS5lbXB0eShzZWN0aW9uKTtcblxuICByZXR1cm4gc2VjdGlvbjtcbn07XG5cbmNvbnN0IHJlbmRlciA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBncmlkOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PltdKTogTmV3Um93c0FuZENlbGxzID0+IHtcbiAgY29uc3QgbmV3Um93czogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10gPSBbXTtcbiAgY29uc3QgbmV3Q2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSA9IFtdO1xuXG4gIGNvbnN0IHN5bmNSb3dzID0gKGdyaWRTZWN0aW9uOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgSFRNTFRhYmxlUm93RWxlbWVudD5bXSkgPT5cbiAgICBBcnIubWFwKGdyaWRTZWN0aW9uLCAocm93KSA9PiB7XG4gICAgICBpZiAocm93LmlzTmV3KSB7XG4gICAgICAgIG5ld1Jvd3MucHVzaChyb3cuZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBjb25zdCB0ciA9IHJvdy5lbGVtZW50O1xuICAgICAgUmVtb3ZlLmVtcHR5KHRyKTtcbiAgICAgIEFyci5lYWNoKHJvdy5jZWxscywgKGNlbGwpID0+IHtcbiAgICAgICAgaWYgKGNlbGwuaXNOZXcpIHtcbiAgICAgICAgICBuZXdDZWxscy5wdXNoKGNlbGwuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SWZOb3QoY2VsbC5lbGVtZW50LCAnY29sc3BhbicsIGNlbGwuY29sc3BhbiwgMSk7XG4gICAgICAgIHNldElmTm90KGNlbGwuZWxlbWVudCwgJ3Jvd3NwYW4nLCBjZWxsLnJvd3NwYW4sIDEpO1xuICAgICAgICBJbnNlcnQuYXBwZW5kKHRyLCBjZWxsLmVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHI7XG4gICAgfSk7XG5cbiAgLy8gQXNzdW1wdGlvbiB3ZSBzaG91bGQgb25seSBldmVyIGhhdmUgMSBjb2xncm91cC4gVGhlIHNwZWMgYWxsb3dzIGZvciBtdWx0aXBsZSwgaG93ZXZlciBpdCdzIGN1cnJlbnRseSB1bnN1cHBvcnRlZFxuICBjb25zdCBzeW5jQ29sR3JvdXAgPSAoZ3JpZFNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc8SFRNTFRhYmxlQ29sRWxlbWVudD4sIEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10pID0+XG4gICAgQXJyLmJpbmQoZ3JpZFNlY3Rpb24sIChjb2xHcm91cCkgPT5cbiAgICAgIEFyci5tYXAoY29sR3JvdXAuY2VsbHMsIChjb2wpID0+IHtcbiAgICAgICAgc2V0SWZOb3QoY29sLmVsZW1lbnQsICdzcGFuJywgY29sLmNvbHNwYW4sIDEpO1xuICAgICAgICByZXR1cm4gY29sLmVsZW1lbnQ7XG4gICAgICB9KVxuICAgICk7XG5cbiAgY29uc3QgcmVuZGVyU2VjdGlvbiA9IChncmlkU2VjdGlvbjogUm93RGV0YWlsTmV3PERldGFpbE5ldz5bXSwgc2VjdGlvbk5hbWU6IFNlY3Rpb24pID0+IHtcbiAgICBjb25zdCBzZWN0aW9uID0gZ2VuZXJhdGVTZWN0aW9uKHRhYmxlLCBzZWN0aW9uTmFtZSk7XG4gICAgY29uc3Qgc3luYyA9IHNlY3Rpb25OYW1lID09PSAnY29sZ3JvdXAnID8gc3luY0NvbEdyb3VwIDogc3luY1Jvd3M7XG4gICAgY29uc3Qgc2VjdGlvbkVsZW1zID0gc3luYyhncmlkU2VjdGlvbiBhcyBSb3dEZXRhaWxOZXc8YW55LCBhbnk+W10pO1xuICAgIEluc2VydEFsbC5hcHBlbmQoc2VjdGlvbiwgc2VjdGlvbkVsZW1zKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVTZWN0aW9uID0gKHNlY3Rpb25OYW1lOiBTZWN0aW9uKSA9PiB7XG4gICAgU2VsZWN0b3JGaW5kLmNoaWxkKHRhYmxlLCBzZWN0aW9uTmFtZSkuZWFjaChSZW1vdmUucmVtb3ZlKTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJPclJlbW92ZVNlY3Rpb24gPSAoZ3JpZFNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10sIHNlY3Rpb25OYW1lOiBTZWN0aW9uKSA9PiB7XG4gICAgaWYgKGdyaWRTZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlbmRlclNlY3Rpb24oZ3JpZFNlY3Rpb24sIHNlY3Rpb25OYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlU2VjdGlvbihzZWN0aW9uTmFtZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhlYWRTZWN0aW9uOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PltdID0gW107XG4gIGNvbnN0IGJvZHlTZWN0aW9uOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PltdID0gW107XG4gIGNvbnN0IGZvb3RTZWN0aW9uOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PltdID0gW107XG4gIGNvbnN0IGNvbHVtbkdyb3Vwc1NlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10gPSBbXTtcblxuICBBcnIuZWFjaChncmlkLCAocm93KSA9PiB7XG4gICAgc3dpdGNoIChyb3cuc2VjdGlvbikge1xuICAgICAgY2FzZSAndGhlYWQnOlxuICAgICAgICBoZWFkU2VjdGlvbi5wdXNoKHJvdyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGJvZHknOlxuICAgICAgICBib2R5U2VjdGlvbi5wdXNoKHJvdyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGZvb3QnOlxuICAgICAgICBmb290U2VjdGlvbi5wdXNoKHJvdyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY29sZ3JvdXAnOlxuICAgICAgICBjb2x1bW5Hcm91cHNTZWN0aW9uLnB1c2gocm93KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcblxuICByZW5kZXJPclJlbW92ZVNlY3Rpb24oY29sdW1uR3JvdXBzU2VjdGlvbiwgJ2NvbGdyb3VwJyk7XG4gIHJlbmRlck9yUmVtb3ZlU2VjdGlvbihoZWFkU2VjdGlvbiwgJ3RoZWFkJyk7XG4gIHJlbmRlck9yUmVtb3ZlU2VjdGlvbihib2R5U2VjdGlvbiwgJ3Rib2R5Jyk7XG4gIHJlbmRlck9yUmVtb3ZlU2VjdGlvbihmb290U2VjdGlvbiwgJ3Rmb290Jyk7XG5cbiAgcmV0dXJuIHtcbiAgICBuZXdSb3dzLFxuICAgIG5ld0NlbGxzXG4gIH07XG59O1xuXG5jb25zdCBjb3B5ID0gPFQgZXh0ZW5kcyBEZXRhaWw+IChncmlkOiBSb3dEZXRhaWxOZXc8VD5bXSk6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9PiBBcnIubWFwKGdyaWQsIChyb3cpID0+IHtcbiAgLy8gU2hhbGxvdyBjb3B5IHRoZSByb3cgZWxlbWVudFxuICBjb25zdCB0ciA9IFJlcGxpY2F0aW9uLnNoYWxsb3cocm93LmVsZW1lbnQpO1xuICBBcnIuZWFjaChyb3cuY2VsbHMsIChjZWxsKSA9PiB7XG4gICAgY29uc3QgY2xvbmVkQ2VsbCA9IFJlcGxpY2F0aW9uLmRlZXAoY2VsbC5lbGVtZW50KTtcbiAgICBzZXRJZk5vdChjbG9uZWRDZWxsLCAnY29sc3BhbicsIGNlbGwuY29sc3BhbiwgMSk7XG4gICAgc2V0SWZOb3QoY2xvbmVkQ2VsbCwgJ3Jvd3NwYW4nLCBjZWxsLnJvd3NwYW4sIDEpO1xuICAgIEluc2VydC5hcHBlbmQodHIsIGNsb25lZENlbGwpO1xuICB9KTtcbiAgcmV0dXJuIHRyO1xufSk7XG5cbmV4cG9ydCB7XG4gIHJlbmRlcixcbiAgY29weVxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB0eXBlIHsgVGFibGVTZWN0aW9uIH0gZnJvbSAnLi4vYXBpL1RhYmxlU2VjdGlvbic7XG5pbXBvcnQgeyBpc0hlYWRlckNlbGwsIGlzSGVhZGVyQ2VsbHMgfSBmcm9tICcuLi9sb29rdXAvVHlwZSc7XG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4uL21vZGVsL0dyaWRSb3cnO1xuaW1wb3J0ICogYXMgQ2VsbFV0aWxzIGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSwgU3Vic3QgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG50eXBlIENlbGxSZXBsYWNlciA9IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRlOiBTdWJzdCkgPT4gU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbnR5cGUgU2NvcGVHZW5lcmF0b3IgPSAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50Piwgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlcikgPT4gT3B0aW9uYWw8bnVsbCB8IHN0cmluZz47XG50eXBlIFJlcGxhY2VQcmVkaWNhdGUgPSAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50Piwgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlcikgPT4gYm9vbGVhbjtcblxuY29uc3Qgbm90SW5TdGFydFJvdyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBib29sZWFuID0+XG4gIEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQoZ3JpZFtyb3dJbmRleF0sIGNvbEluZGV4KSAhPT0gdW5kZWZpbmVkICYmIChyb3dJbmRleCA+IDAgJiYgY29tcGFyYXRvcihHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRbcm93SW5kZXggLSAxXSwgY29sSW5kZXgpLCBHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRbcm93SW5kZXhdLCBjb2xJbmRleCkpKTtcblxuY29uc3Qgbm90SW5TdGFydENvbHVtbiA9IChyb3c6IFN0cnVjdHMuUm93Q2VsbHMsIGluZGV4OiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBib29sZWFuID0+XG4gIGluZGV4ID4gMCAmJiBjb21wYXJhdG9yKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQocm93LCBpbmRleCAtIDEpLCBHcmlkUm93LmdldENlbGxFbGVtZW50KHJvdywgaW5kZXgpKTtcblxuLy8gVGhpcyBjaGVja3MgZm9yIGNlbGxzIHRoYXQgYXJlbid0IGluIHRoZSBcInN0YXJ0XCIgcG9zaXRpb24gYXMgdGhlIG1vZGVsIHdpbGwgY3JlYXRlIGR1cGxpY2F0ZSBlbGVtZW50IHJlZmVyZW5jZXMgZm9yXG4vLyBlYWNoIGNvbHVtbi9yb3cgdGhhdCB0aGUgY2VsbCBzcGFucy4gQXMgYW4gZXhhbXBsZSwgZm9yIGEgbWVyZ2VkIGNlbGwgd2l0aCByb3dzcGFuPVwiMlwiLCB0aGUgY2VsbCBpbiB0aGUgc2Vjb25kIHJvdyBpcyBhIGR1cGxpY2F0ZVxuLy8gb2YgdGhlIGNlbGwgaW4gdGhlIGZpcnN0IHJvdy5cbmNvbnN0IGlzRHVwbGljYXRlZENlbGwgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCByb3dJbmRleDogbnVtYmVyLCBjb2xJbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtKTogYm9vbGVhbiA9PlxuICBub3RJblN0YXJ0Um93KGdyaWQsIHJvd0luZGV4LCBjb2xJbmRleCwgY29tcGFyYXRvcikgfHwgbm90SW5TdGFydENvbHVtbihncmlkW3Jvd0luZGV4XSwgY29sSW5kZXgsIGNvbXBhcmF0b3IpO1xuXG5jb25zdCByb3dSZXBsYWNlclByZWRpY2F0ZSA9ICh0YXJnZXRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD4sIGNvbHVtbkhlYWRlcnM6IGJvb2xlYW5bXSk6IFJlcGxhY2VQcmVkaWNhdGUgPT4ge1xuICBjb25zdCBlbnRpcmVUYWJsZUlzSGVhZGVyID0gQXJyLmZvcmFsbChjb2x1bW5IZWFkZXJzLCBGdW4uaWRlbnRpdHkpICYmIGlzSGVhZGVyQ2VsbHModGFyZ2V0Um93LmNlbGxzKTtcbiAgcmV0dXJuIGVudGlyZVRhYmxlSXNIZWFkZXIgPyBGdW4uYWx3YXlzIDogKGNlbGwsIF9yb3dJbmRleCwgY29sSW5kZXgpID0+IHtcbiAgICBjb25zdCB0eXBlID0gU3VnYXJOb2RlLm5hbWUoY2VsbC5lbGVtZW50KTtcbiAgICByZXR1cm4gISh0eXBlID09PSAndGgnICYmIGNvbHVtbkhlYWRlcnNbY29sSW5kZXhdKTtcbiAgfTtcbn07XG5cbmNvbnN0IGNvbHVtblJlcGxhY2VQcmVkaWNhdGUgPSAodGFyZ2V0Q29sdW1uOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIHJvd0hlYWRlcnM6IGJvb2xlYW5bXSk6IFJlcGxhY2VQcmVkaWNhdGUgPT4ge1xuICBjb25zdCBlbnRpcmVUYWJsZUlzSGVhZGVyID0gQXJyLmZvcmFsbChyb3dIZWFkZXJzLCBGdW4uaWRlbnRpdHkpICYmIGlzSGVhZGVyQ2VsbHModGFyZ2V0Q29sdW1uKTtcbiAgcmV0dXJuIGVudGlyZVRhYmxlSXNIZWFkZXIgPyBGdW4uYWx3YXlzIDogKGNlbGwsIHJvd0luZGV4LCBfY29sSW5kZXgpID0+IHtcbiAgICBjb25zdCB0eXBlID0gU3VnYXJOb2RlLm5hbWUoY2VsbC5lbGVtZW50KTtcbiAgICByZXR1cm4gISh0eXBlID09PSAndGgnICYmIHJvd0hlYWRlcnNbcm93SW5kZXhdKTtcbiAgfTtcbn07XG5cbmNvbnN0IGRldGVybWluZVNjb3BlID0gKGFwcGx5U2NvcGU6IGJvb2xlYW4sIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIG5ld1Njb3BlOiAncm93JyB8ICdjb2wnLCBpc0luSGVhZGVyOiBib29sZWFuKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIGNvbnN0IGhhc1NwYW4gPSAoc2NvcGU6IHN0cmluZykgPT4gc2NvcGUgPT09ICdyb3cnID8gQ2VsbFV0aWxzLmhhc1Jvd3NwYW4oY2VsbCkgOiBDZWxsVXRpbHMuaGFzQ29sc3BhbihjZWxsKTtcbiAgY29uc3QgZ2V0U2NvcGUgPSAoc2NvcGU6IHN0cmluZykgPT4gaGFzU3BhbihzY29wZSkgPyBgJHtzY29wZX1ncm91cGAgOiBzY29wZTtcblxuICBpZiAoYXBwbHlTY29wZSkge1xuICAgIHJldHVybiBpc0hlYWRlckNlbGwoY2VsbCkgPyBnZXRTY29wZShuZXdTY29wZSkgOiBudWxsO1xuICB9IGVsc2UgaWYgKGlzSW5IZWFkZXIgJiYgaXNIZWFkZXJDZWxsKGNlbGwpKSB7XG4gICAgLy8gVGhlIGNlbGwgaXMgc3RpbGwgaW4gYSBoZWFkZXIgcm93L2NvbHVtbiBzbyBlbnN1cmUgdGhlIHJpZ2h0IHNjb3BlIGlzIHJldmVydGVkIHRvXG4gICAgY29uc3Qgb3Bwb3NpdGVTY29wZSA9IG5ld1Njb3BlID09PSAncm93JyA/ICdjb2wnIDogJ3Jvdyc7XG4gICAgcmV0dXJuIGdldFNjb3BlKG9wcG9zaXRlU2NvcGUpO1xuICB9IGVsc2Uge1xuICAgIC8vIE5vIGxvbmdlciBhIGhlYWRlciBzbyBlbnN1cmUgdGhlIHNjb3BlIGlzIHJlbW92ZWRcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuY29uc3Qgcm93U2NvcGVHZW5lcmF0b3IgPSAoYXBwbHlTY29wZTogYm9vbGVhbiwgY29sdW1uSGVhZGVyczogYm9vbGVhbltdKSA9PiAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50Piwgcm93SW5kZXg6IG51bWJlciwgY29sdW1uSW5kZXg6IG51bWJlcikgPT5cbiAgT3B0aW9uYWwuc29tZShkZXRlcm1pbmVTY29wZShhcHBseVNjb3BlLCBjZWxsLmVsZW1lbnQsICdjb2wnLCBjb2x1bW5IZWFkZXJzW2NvbHVtbkluZGV4XSkpO1xuXG5jb25zdCBjb2x1bW5TY29wZUdlbmVyYXRvciA9IChhcHBseVNjb3BlOiBib29sZWFuLCByb3dIZWFkZXJzOiBib29sZWFuW10pID0+IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCByb3dJbmRleDogbnVtYmVyKSA9PlxuICBPcHRpb25hbC5zb21lKGRldGVybWluZVNjb3BlKGFwcGx5U2NvcGUsIGNlbGwuZWxlbWVudCwgJ3JvdycsIHJvd0hlYWRlcnNbcm93SW5kZXhdKSk7XG5cbmNvbnN0IHJlcGxhY2UgPSAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0ZTogU3Vic3QpID0+XG4gIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRlKGNlbGwuZWxlbWVudCwgY29tcGFyYXRvciksIHRydWUsIGNlbGwuaXNMb2NrZWQpO1xuXG5jb25zdCByZXBsYWNlSW4gPSAoXG4gIGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSxcbiAgdGFyZ2V0czogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLFxuICBjb21wYXJhdG9yOiBDb21wRWxtLFxuICBzdWJzdGl0dXRlOiBTdWJzdCxcbiAgcmVwbGFjZXI6IENlbGxSZXBsYWNlcixcbiAgZ2VuU2NvcGU6IFNjb3BlR2VuZXJhdG9yLFxuICBzaG91bGRSZXBsYWNlOiBSZXBsYWNlUHJlZGljYXRlXG4pOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCBpc1RhcmdldCA9IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXcpOiBjZWxsIGlzIFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4gPT4ge1xuICAgIHJldHVybiBBcnIuZXhpc3RzKHRhcmdldHMsICh0YXJnZXQpID0+IHtcbiAgICAgIHJldHVybiBjb21wYXJhdG9yKGNlbGwuZWxlbWVudCwgdGFyZ2V0LmVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBBcnIubWFwKGdyaWQsIChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgcmV0dXJuIEdyaWRSb3cubWFwQ2VsbHMocm93LCAoY2VsbCwgY29sSW5kZXgpID0+IHtcbiAgICAgIGlmIChpc1RhcmdldChjZWxsKSkge1xuICAgICAgICBjb25zdCBuZXdDZWxsID0gc2hvdWxkUmVwbGFjZShjZWxsLCByb3dJbmRleCwgY29sSW5kZXgpID8gcmVwbGFjZXIoY2VsbCwgY29tcGFyYXRvciwgc3Vic3RpdHV0ZSkgOiBjZWxsO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHNjb3BlXG4gICAgICAgIGdlblNjb3BlKG5ld0NlbGwsIHJvd0luZGV4LCBjb2xJbmRleCkuZWFjaCgoc2NvcGUpID0+IHtcbiAgICAgICAgICBBdHRyaWJ1dGUuc2V0T3B0aW9ucyhuZXdDZWxsLmVsZW1lbnQsIHsgc2NvcGU6IE9wdGlvbmFsLmZyb20oc2NvcGUpIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ld0NlbGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2VsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRDb2x1bW5DZWxscyA9IChyb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10sIGNvbHVtbkluZGV4OiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pID0+XG4gIEFyci5iaW5kKHJvd3MsIChyb3csIGkpID0+IHtcbiAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGFkZGVkLlxuICAgIHJldHVybiBpc0R1cGxpY2F0ZWRDZWxsKHJvd3MsIGksIGNvbHVtbkluZGV4LCBjb21wYXJhdG9yKSA/IFtdIDogWyBHcmlkUm93LmdldENlbGwocm93LCBjb2x1bW5JbmRleCkgXTtcbiAgfSk7XG5cbmNvbnN0IGdldFJvd0NlbGxzID0gKHJvd3M6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD5bXSwgcm93SW5kZXg6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSkgPT4ge1xuICBjb25zdCB0YXJnZXRSb3cgPSByb3dzW3Jvd0luZGV4XTtcbiAgcmV0dXJuIEFyci5iaW5kKHRhcmdldFJvdy5jZWxscywgKGl0ZW0sIGkpID0+IHtcbiAgICAvLyBDaGVjayB0aGF0IHdlIGhhdmVuJ3QgYWxyZWFkeSBhZGRlZCB0aGlzIG9uZS5cbiAgICByZXR1cm4gaXNEdXBsaWNhdGVkQ2VsbChyb3dzLCByb3dJbmRleCwgaSwgY29tcGFyYXRvcikgPyBbXSA6IFsgaXRlbSBdO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlcGxhY2VDb2x1bW4gPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleDogbnVtYmVyLCBhcHBseVNjb3BlOiBib29sZWFuLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+XG4gIHJlcGxhY2VDb2x1bW5zKGdyaWQsIFsgaW5kZXggXSwgYXBwbHlTY29wZSwgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uKTtcblxuY29uc3QgcmVwbGFjZUNvbHVtbnMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleGVzOiBudW1iZXJbXSwgYXBwbHlTY29wZTogYm9vbGVhbiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIC8vIE1ha2UgdGhpcyBlZmZpY2llbnQgbGF0ZXIuXG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICBjb25zdCB0YXJnZXRzID0gQXJyLmJpbmQoaW5kZXhlcywgKGluZGV4KSA9PiBnZXRDb2x1bW5DZWxscyhyb3dzLCBpbmRleCwgY29tcGFyYXRvcikpO1xuICBjb25zdCByb3dIZWFkZXJzID0gQXJyLm1hcChyb3dzLCAocm93KSA9PiBpc0hlYWRlckNlbGxzKHJvdy5jZWxscykpO1xuXG4gIGNvbnN0IHNob3VsZFJlcGxhY2VDZWxsID0gY29sdW1uUmVwbGFjZVByZWRpY2F0ZSh0YXJnZXRzLCByb3dIZWFkZXJzKTtcbiAgY29uc3Qgc2NvcGVHZW5lcmF0b3IgPSBjb2x1bW5TY29wZUdlbmVyYXRvcihhcHBseVNjb3BlLCByb3dIZWFkZXJzKTtcblxuICByZXR1cm4gcmVwbGFjZUluKGdyaWQsIHRhcmdldHMsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbiwgcmVwbGFjZSwgc2NvcGVHZW5lcmF0b3IsIHNob3VsZFJlcGxhY2VDZWxsKTtcbn07XG5cbmNvbnN0IHJlcGxhY2VSb3cgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleDogbnVtYmVyLCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24sIGFwcGx5U2NvcGU6IGJvb2xlYW4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QsIHRhYmxlU2VjdGlvbjogVGFibGVTZWN0aW9uKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+XG4gIHJlcGxhY2VSb3dzKGdyaWQsIFsgaW5kZXggXSwgc2VjdGlvbiwgYXBwbHlTY29wZSwgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uLCB0YWJsZVNlY3Rpb24pO1xuXG5jb25zdCByZXBsYWNlUm93cyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGluZGV4ZXM6IG51bWJlcltdLCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24sIGFwcGx5U2NvcGU6IGJvb2xlYW4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QsIHRhYmxlU2VjdGlvbjogVGFibGVTZWN0aW9uKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgeyBjb2xzLCByb3dzIH0gPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKTtcbiAgY29uc3QgdGFyZ2V0Um93ID0gcm93c1tpbmRleGVzWzBdXTtcbiAgY29uc3QgdGFyZ2V0cyA9IEFyci5iaW5kKGluZGV4ZXMsIChpbmRleCkgPT4gZ2V0Um93Q2VsbHMocm93cywgaW5kZXgsIGNvbXBhcmF0b3IpKTtcbiAgY29uc3QgY29sdW1uSGVhZGVycyA9IEFyci5tYXAodGFyZ2V0Um93LmNlbGxzLCAoX2NlbGwsIGluZGV4KSA9PiBpc0hlYWRlckNlbGxzKGdldENvbHVtbkNlbGxzKHJvd3MsIGluZGV4LCBjb21wYXJhdG9yKSkpO1xuXG4gIC8vIFRyYW5zZm9ybSBhbmQgcmVwbGFjZSB0aGUgdGFyZ2V0IHJvd1xuICAvLyBUT0RPOiBUSU5ZLTc3NzY6IFRoaXMgZG9lc24ndCBkZWFsIHdpdGggcm93c3BhbnMgd2hpY2ggY2FuIGJyZWFrIHRoZSBsYXlvdXQgd2hlbiBtb3ZpbmcgdG8gYSBuZXcgc2VjdGlvblxuICBjb25zdCBuZXdSb3dzID0gWyAuLi5yb3dzIF07XG4gIEFyci5lYWNoKGluZGV4ZXMsIChpbmRleCkgPT4ge1xuICAgIG5ld1Jvd3NbaW5kZXhdID0gdGFibGVTZWN0aW9uLnRyYW5zZm9ybVJvdyhyb3dzW2luZGV4XSwgc2VjdGlvbik7XG4gIH0pO1xuICBjb25zdCBuZXdHcmlkID0gWyAuLi5jb2xzLCAuLi5uZXdSb3dzIF07XG5cbiAgY29uc3Qgc2hvdWxkUmVwbGFjZUNlbGwgPSByb3dSZXBsYWNlclByZWRpY2F0ZSh0YXJnZXRSb3csIGNvbHVtbkhlYWRlcnMpO1xuICBjb25zdCBzY29wZUdlbmVyYXRvciA9IHJvd1Njb3BlR2VuZXJhdG9yKGFwcGx5U2NvcGUsIGNvbHVtbkhlYWRlcnMpO1xuXG4gIHJldHVybiByZXBsYWNlSW4obmV3R3JpZCwgdGFyZ2V0cywgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uLCB0YWJsZVNlY3Rpb24udHJhbnNmb3JtQ2VsbCwgc2NvcGVHZW5lcmF0b3IsIHNob3VsZFJlcGxhY2VDZWxsKTtcbn07XG5cbmNvbnN0IHJlcGxhY2VDZWxsID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICByZXBsYWNlQ2VsbHMoZ3JpZCwgWyBkZXRhaWwgXSwgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uKTtcblxuY29uc3QgcmVwbGFjZUNlbGxzID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICBjb25zdCB0YXJnZXRDZWxscyA9IEFyci5tYXAoZGV0YWlscywgKGRldGFpbCkgPT4gR3JpZFJvdy5nZXRDZWxsKHJvd3NbZGV0YWlsLnJvd10sIGRldGFpbC5jb2x1bW4pKTtcbiAgcmV0dXJuIHJlcGxhY2VJbihncmlkLCB0YXJnZXRDZWxscywgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uLCByZXBsYWNlLCBPcHRpb25hbC5ub25lLCBGdW4uYWx3YXlzKTtcbn07XG5cbmV4cG9ydCB7XG4gIHJlcGxhY2VDb2x1bW4sXG4gIHJlcGxhY2VDb2x1bW5zLFxuICByZXBsYWNlUm93LFxuICByZXBsYWNlUm93cyxcbiAgcmVwbGFjZUNlbGwsXG4gIHJlcGxhY2VDZWxsc1xufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgUmVzaXplQmVoYXZpb3VyIH0gZnJvbSAnLi4vYXBpL1Jlc2l6ZUJlaGF2aW91cic7XG5pbXBvcnQgdHlwZSB7IERldGFpbCwgUm93RGV0YWlsIH0gZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0IHR5cGUgeyBUYWJsZVNpemUgfSBmcm9tICcuLi9hcGkvVGFibGVTaXplJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuaW1wb3J0ICogYXMgRGVsdGFzIGZyb20gJy4uL2NhbGMvRGVsdGFzJztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgQ29sdW1uU2l6ZXMgZnJvbSAnLi9Db2x1bW5TaXplcyc7XG5pbXBvcnQgKiBhcyBSZWNhbGN1bGF0aW9ucyBmcm9tICcuL1JlY2FsY3VsYXRpb25zJztcbmltcG9ydCAqIGFzIFNpemVzIGZyb20gJy4vU2l6ZXMnO1xuXG5jb25zdCBzdW1VcCA9IChuZXdTaXplOiBudW1iZXJbXSkgPT4gQXJyLmZvbGRyKG5ld1NpemUsIChiLCBhKSA9PiBiICsgYSwgMCk7XG5cbmNvbnN0IHJlY2FsY3VsYXRlID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB3aWR0aHM6IG51bWJlcltdKTogUmVjYWxjdWxhdGlvbnMuQ2VsbFdpZHRoU3BhbjxDZWxsRWxlbWVudD5bXSA9PiB7XG4gIGlmIChXYXJlaG91c2UuaGFzQ29sdW1ucyh3YXJlaG91c2UpKSB7XG4gICAgcmV0dXJuIFJlY2FsY3VsYXRpb25zLnJlY2FsY3VsYXRlV2lkdGhGb3JDb2x1bW5zKHdhcmVob3VzZSwgd2lkdGhzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUmVjYWxjdWxhdGlvbnMucmVjYWxjdWxhdGVXaWR0aEZvckNlbGxzKHdhcmVob3VzZSwgd2lkdGhzKTtcbiAgfVxufTtcblxuY29uc3QgcmVjYWxjdWxhdGVBbmRBcHBseSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgd2lkdGhzOiBudW1iZXJbXSwgdGFibGVTaXplOiBUYWJsZVNpemUpOiB2b2lkID0+IHtcbiAgLy8gU2V0IHRoZSB3aWR0aCBvZiBlYWNoIGNlbGwgYmFzZWQgb24gdGhlIGNvbHVtbiB3aWR0aHNcbiAgY29uc3QgbmV3U2l6ZXMgPSByZWNhbGN1bGF0ZSh3YXJlaG91c2UsIHdpZHRocyk7XG5cbiAgQXJyLmVhY2gobmV3U2l6ZXMsIChjZWxsKSA9PiB7XG4gICAgdGFibGVTaXplLnNldEVsZW1lbnRXaWR0aChjZWxsLmVsZW1lbnQsIGNlbGwud2lkdGgpO1xuICB9KTtcbn07XG5cbmNvbnN0IGFkanVzdFdpZHRoID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGRlbHRhOiBudW1iZXIsIGluZGV4OiBudW1iZXIsIHJlc2l6aW5nOiBSZXNpemVCZWhhdmlvdXIsIHRhYmxlU2l6ZTogVGFibGVTaXplKTogdm9pZCA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBzdGVwID0gdGFibGVTaXplLmdldENlbGxEZWx0YShkZWx0YSk7XG4gIGNvbnN0IHdpZHRocyA9IHRhYmxlU2l6ZS5nZXRXaWR0aHMod2FyZWhvdXNlLCB0YWJsZVNpemUpO1xuICBjb25zdCBpc0xhc3RDb2x1bW4gPSBpbmRleCA9PT0gd2FyZWhvdXNlLmdyaWQuY29sdW1ucyAtIDE7XG4gIGNvbnN0IGNsYW1wZWRTdGVwID0gcmVzaXppbmcuY2xhbXBUYWJsZURlbHRhKHdpZHRocywgaW5kZXgsIHN0ZXAsIHRhYmxlU2l6ZS5taW5DZWxsV2lkdGgoKSwgaXNMYXN0Q29sdW1uKTtcblxuICAvLyBDYWxjdWxhdGUgYWxsIG9mIHRoZSBuZXcgd2lkdGhzIGZvciBjb2x1bW5zXG4gIGNvbnN0IGRlbHRhcyA9IERlbHRhcy5kZXRlcm1pbmUod2lkdGhzLCBpbmRleCwgY2xhbXBlZFN0ZXAsIHRhYmxlU2l6ZSwgcmVzaXppbmcpO1xuICBjb25zdCBuZXdXaWR0aHMgPSBBcnIubWFwKGRlbHRhcywgKGR4LCBpKSA9PiBkeCArIHdpZHRoc1tpXSk7XG5cbiAgcmVjYWxjdWxhdGVBbmRBcHBseSh3YXJlaG91c2UsIG5ld1dpZHRocywgdGFibGVTaXplKTtcbiAgcmVzaXppbmcucmVzaXplVGFibGUodGFibGVTaXplLmFkanVzdFRhYmxlV2lkdGgsIGNsYW1wZWRTdGVwLCBpc0xhc3RDb2x1bW4pO1xufTtcblxuY29uc3QgYWRqdXN0SGVpZ2h0ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGRlbHRhOiBudW1iZXIsIGluZGV4OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IGhlaWdodHMgPSBDb2x1bW5TaXplcy5nZXRQaXhlbEhlaWdodHMod2FyZWhvdXNlLCB0YWJsZSk7XG5cbiAgY29uc3QgbmV3SGVpZ2h0cyA9IEFyci5tYXAoaGVpZ2h0cywgKGR5LCBpKSA9PiBpbmRleCA9PT0gaSA/IE1hdGgubWF4KGRlbHRhICsgZHksIENlbGxVdGlscy5taW5IZWlnaHQoKSkgOiBkeSk7XG5cbiAgY29uc3QgbmV3Um93U2l6ZXMgPSBSZWNhbGN1bGF0aW9ucy5tYXRjaFJvd0hlaWdodCh3YXJlaG91c2UsIG5ld0hlaWdodHMpO1xuXG4gIEFyci5lYWNoKG5ld1Jvd1NpemVzLCAocm93KSA9PiB7XG4gICAgU2l6ZXMuc2V0SGVpZ2h0KHJvdy5lbGVtZW50LCByb3cuaGVpZ2h0KTtcbiAgfSk7XG5cbiAgQXJyLmVhY2goV2FyZWhvdXNlLmp1c3RDZWxscyh3YXJlaG91c2UpLCAoY2VsbCkgPT4ge1xuICAgIFNpemVzLnJlbW92ZUhlaWdodChjZWxsLmVsZW1lbnQpO1xuICB9KTtcblxuICBjb25zdCB0b3RhbCA9IHN1bVVwKG5ld0hlaWdodHMpO1xuICBTaXplcy5zZXRIZWlnaHQodGFibGUsIHRvdGFsKTtcbn07XG5cbi8vIFVzaW5nIHRoZSB3aWR0aCBvZiB0aGUgYWRkZWQvcmVtb3ZlZCBjb2x1bW5zIGdhdGhlcmVkIG9uIGV4dHJhY3Rpb24gKHBpeGVsRGVsdGEpLCBnZXQgYW5kIGFwcGx5IHRoZSBuZXcgY29sdW1uIHNpemVzIGFuZCBvdmVyYWxsIHRhYmxlIHdpZHRoIGRlbHRhXG5jb25zdCBhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHMgPSA8VCBleHRlbmRzIERldGFpbD4gKF90YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBsaXN0OiBSb3dEZXRhaWw8VD5bXSwgZGV0YWlsczogeyBwaXhlbERlbHRhOiBudW1iZXIgfSwgdGFibGVTaXplOiBUYWJsZVNpemUsIHJlc2l6ZUJlaGF2aW91cjogUmVzaXplQmVoYXZpb3VyKTogdm9pZCA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5nZW5lcmF0ZShsaXN0KTtcbiAgY29uc3Qgc2l6ZXMgPSB0YWJsZVNpemUuZ2V0V2lkdGhzKHdhcmVob3VzZSwgdGFibGVTaXplKTtcbiAgY29uc3QgdGFibGVQaXhlbFdpZHRoID0gdGFibGVTaXplLnBpeGVsV2lkdGgoKTtcblxuICBjb25zdCB7IG5ld1NpemVzLCBkZWx0YSB9ID0gcmVzaXplQmVoYXZpb3VyLmNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzKHNpemVzLCB0YWJsZVBpeGVsV2lkdGgsIGRldGFpbHMucGl4ZWxEZWx0YSwgdGFibGVTaXplLmlzUmVsYXRpdmUpO1xuICByZWNhbGN1bGF0ZUFuZEFwcGx5KHdhcmVob3VzZSwgbmV3U2l6ZXMsIHRhYmxlU2l6ZSk7XG4gIHRhYmxlU2l6ZS5hZGp1c3RUYWJsZVdpZHRoKGRlbHRhKTtcbn07XG5cbi8vIEVuc3VyZSB0aGF0IHRoZSB3aWR0aCBvZiB0YWJsZSBjZWxscyBtYXRjaCB0aGUgcGFzc2VkIGluIHRhYmxlIGluZm9ybWF0aW9uLlxuY29uc3QgYWRqdXN0V2lkdGhUbyA9IDxUIGV4dGVuZHMgRGV0YWlsPiAoX3RhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGxpc3Q6IFJvd0RldGFpbDxUPltdLCBfaW5mbzogeyB9LCB0YWJsZVNpemU6IFRhYmxlU2l6ZSk6IHZvaWQgPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZ2VuZXJhdGUobGlzdCk7XG4gIGNvbnN0IHdpZHRocyA9IHRhYmxlU2l6ZS5nZXRXaWR0aHMod2FyZWhvdXNlLCB0YWJsZVNpemUpO1xuXG4gIHJlY2FsY3VsYXRlQW5kQXBwbHkod2FyZWhvdXNlLCB3aWR0aHMsIHRhYmxlU2l6ZSk7XG59O1xuXG5leHBvcnQgeyBhZGp1c3RXaWR0aCwgYWRqdXN0SGVpZ2h0LCBhZGp1c3RXaWR0aFRvLCBhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHMgfTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCB0eXBlIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IERpcmVjdGlvbiwgSGVpZ2h0LCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJMb2NhdGlvbiwgV2lkdGggfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJvd0luZm8ge1xuICByZWFkb25seSByb3c6IG51bWJlcjtcbiAgcmVhZG9ubHkgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbEluZm8ge1xuICByZWFkb25seSBjb2w6IG51bWJlcjtcbiAgcmVhZG9ubHkgeDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhclBvc2l0aW9uczxUPiB7XG4gIHJlYWRvbmx5IGRlbHRhOiAoZGVsdGE6IG51bWJlciwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4gbnVtYmVyO1xuICByZWFkb25seSBlZGdlOiAoZTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4gbnVtYmVyO1xuICByZWFkb25seSBwb3NpdGlvbnM6IChhcnJheTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj5bXSwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4gT3B0aW9uYWw8VD5bXTtcbn1cblxuY29uc3Qgcm93SW5mbyA9IChyb3c6IG51bWJlciwgeTogbnVtYmVyKTogUm93SW5mbyA9PiAoe1xuICByb3csXG4gIHlcbn0pO1xuXG5jb25zdCBjb2xJbmZvID0gKGNvbDogbnVtYmVyLCB4OiBudW1iZXIpOiBDb2xJbmZvID0+ICh7XG4gIGNvbCxcbiAgeFxufSk7XG5cbmNvbnN0IHJ0bEVkZ2UgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHBvcyA9IFN1Z2FyTG9jYXRpb24uYWJzb2x1dGUoY2VsbCk7XG4gIHJldHVybiBwb3MubGVmdCArIFdpZHRoLmdldE91dGVyKGNlbGwpO1xufTtcblxuY29uc3QgbHRyRWRnZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIFN1Z2FyTG9jYXRpb24uYWJzb2x1dGUoY2VsbCkubGVmdDtcbn07XG5cbmNvbnN0IGdldExlZnRFZGdlID0gKGluZGV4OiBudW1iZXIsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBDb2xJbmZvID0+IHtcbiAgcmV0dXJuIGNvbEluZm8oaW5kZXgsIGx0ckVkZ2UoY2VsbCkpO1xufTtcblxuY29uc3QgZ2V0UmlnaHRFZGdlID0gKGluZGV4OiBudW1iZXIsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBDb2xJbmZvID0+IHtcbiAgcmV0dXJuIGNvbEluZm8oaW5kZXgsIHJ0bEVkZ2UoY2VsbCkpO1xufTtcblxuY29uc3QgZ2V0VG9wID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT4ge1xuICByZXR1cm4gU3VnYXJMb2NhdGlvbi5hYnNvbHV0ZShjZWxsKS50b3A7XG59O1xuXG5jb25zdCBnZXRUb3BFZGdlID0gKGluZGV4OiBudW1iZXIsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBSb3dJbmZvID0+IHtcbiAgcmV0dXJuIHJvd0luZm8oaW5kZXgsIGdldFRvcChjZWxsKSk7XG59O1xuXG5jb25zdCBnZXRCb3R0b21FZGdlID0gKGluZGV4OiBudW1iZXIsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBSb3dJbmZvID0+IHtcbiAgcmV0dXJuIHJvd0luZm8oaW5kZXgsIGdldFRvcChjZWxsKSArIEhlaWdodC5nZXRPdXRlcihjZWxsKSk7XG59O1xuXG5jb25zdCBmaW5kUG9zaXRpb25zID0gPFQ+IChcbiAgZ2V0SW5uZXJFZGdlOiAoaWR4OiBudW1iZXIsIGVsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gVCxcbiAgZ2V0T3V0ZXJFZGdlOiAoaWR4OiBudW1iZXIsIGVsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gVCxcbiAgYXJyYXk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W11cbik6IE9wdGlvbmFsPFQ+W10gPT4ge1xuICBpZiAoYXJyYXkubGVuZ3RoID09PSAwICkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBsaW5lcyA9IEFyci5tYXAoYXJyYXkuc2xpY2UoMSksIChjZWxsT3B0aW9uLCBpbmRleCkgPT4ge1xuICAgIHJldHVybiBjZWxsT3B0aW9uLm1hcCgoY2VsbCkgPT4ge1xuICAgICAgcmV0dXJuIGdldElubmVyRWRnZShpbmRleCwgY2VsbCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGxhc3RMaW5lID0gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV0ubWFwKChjZWxsKSA9PiB7XG4gICAgcmV0dXJuIGdldE91dGVyRWRnZShhcnJheS5sZW5ndGggLSAxLCBjZWxsKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGxpbmVzLmNvbmNhdChbIGxhc3RMaW5lIF0pO1xufTtcblxuY29uc3QgbmVnYXRlID0gKHN0ZXA6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiAtc3RlcDtcbn07XG5cbmNvbnN0IGhlaWdodDogQmFyUG9zaXRpb25zPFJvd0luZm8+ID0ge1xuICBkZWx0YTogRnVuLmlkZW50aXR5LFxuICBwb3NpdGlvbnM6IChvcHRFbGVtZW50cykgPT4gZmluZFBvc2l0aW9ucyhnZXRUb3BFZGdlLCBnZXRCb3R0b21FZGdlLCBvcHRFbGVtZW50cyksXG4gIGVkZ2U6IGdldFRvcFxufTtcblxuY29uc3QgbHRyOiBCYXJQb3NpdGlvbnM8Q29sSW5mbz4gPSB7XG4gIGRlbHRhOiBGdW4uaWRlbnRpdHksXG4gIGVkZ2U6IGx0ckVkZ2UsXG4gIHBvc2l0aW9uczogKG9wdEVsZW1lbnRzKSA9PiBmaW5kUG9zaXRpb25zKGdldExlZnRFZGdlLCBnZXRSaWdodEVkZ2UsIG9wdEVsZW1lbnRzKVxufTtcblxuY29uc3QgcnRsOiBCYXJQb3NpdGlvbnM8Q29sSW5mbz4gPSB7XG4gIGRlbHRhOiBuZWdhdGUsXG4gIGVkZ2U6IHJ0bEVkZ2UsXG4gIHBvc2l0aW9uczogKG9wdEVsZW1lbnRzKSA9PiBmaW5kUG9zaXRpb25zKGdldFJpZ2h0RWRnZSwgZ2V0TGVmdEVkZ2UsIG9wdEVsZW1lbnRzKVxufTtcblxuY29uc3QgZGV0ZWN0ID0gRGlyZWN0aW9uLm9uRGlyZWN0aW9uKGx0ciwgcnRsKTtcblxuY29uc3Qgd2lkdGg6IEJhclBvc2l0aW9uczxDb2xJbmZvPiA9IHtcbiAgZGVsdGE6IChhbW91bnQ6IG51bWJlciwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4gZGV0ZWN0KHRhYmxlKS5kZWx0YShhbW91bnQsIHRhYmxlKSxcbiAgcG9zaXRpb25zOiAoY29sczogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj5bXSwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4gZGV0ZWN0KHRhYmxlKS5wb3NpdGlvbnMoY29scywgdGFibGUpLFxuICBlZGdlOiAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4gZGV0ZWN0KGNlbGwpLmVkZ2UoY2VsbClcbn07XG5cbmV4cG9ydCB7IGhlaWdodCwgd2lkdGgsIHJ0bCwgbHRyIH07XG5cbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCwgT3B0aW9uYWxzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFBsYXRmb3JtRGV0ZWN0aW9uIH0gZnJvbSAnQGVwaG94L3NhbmQnO1xuaW1wb3J0IHsgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgV2lkdGggfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFRhYmxlU2l6ZSB9IGZyb20gJy4uL2FwaS9UYWJsZVNpemUnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5pbXBvcnQgKiBhcyBCbG9ja3MgZnJvbSAnLi4vbG9va3VwL0Jsb2Nrcyc7XG5pbXBvcnQgKiBhcyBDZWxsVXRpbHMgZnJvbSAnLi4vdXRpbC9DZWxsVXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5pbXBvcnQgKiBhcyBVdGlsIGZyb20gJy4uL3V0aWwvVXRpbCc7XG5cbmltcG9ydCB7IGhlaWdodCwgd2lkdGggfSBmcm9tICcuL0JhclBvc2l0aW9ucyc7XG5pbXBvcnQgKiBhcyBTaXplcyBmcm9tICcuL1NpemVzJztcblxuY29uc3QgaXNDb2wgPSBTdWdhck5vZGUuaXNUYWcoJ2NvbCcpO1xuXG5jb25zdCBnZXRSYXdXID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIFNpemVzLmdldFJhd1dpZHRoKGNlbGwpLmdldE9yVGh1bmsoKCkgPT4gU2l6ZXMuZ2V0UGl4ZWxXaWR0aChjZWxsKSArICdweCcpO1xufTtcblxuY29uc3QgZ2V0UmF3SCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVSb3dFbGVtZW50Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBTaXplcy5nZXRSYXdIZWlnaHQoY2VsbCkuZ2V0T3JUaHVuaygoKSA9PiBTaXplcy5nZXRIZWlnaHQoY2VsbCkgKyAncHgnKTtcbn07XG5cbmNvbnN0IGp1c3RDb2xzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+PltdID0+XG4gIEFyci5tYXAoV2FyZWhvdXNlLmp1c3RDb2x1bW5zKHdhcmVob3VzZSksIChjb2x1bW4pID0+IE9wdGlvbmFsLmZyb20oY29sdW1uLmVsZW1lbnQpKTtcblxuLy8gQ29sIGVsZW1lbnRzIGRvbid0IGhhdmUgdmFsaWQgY29tcHV0ZWQgd2lkdGhzL3Bvc2l0aW9ucyBpbiBhbGwgYnJvd3NlcnMsIHNvIHRyZWF0IHRoZW0gYXMgaW52YWxpZCBpbiB0aGF0IGNhc2VcbmNvbnN0IGlzVmFsaWRDb2x1bW4gPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgYnJvd3NlciA9IFBsYXRmb3JtRGV0ZWN0aW9uLmRldGVjdCgpLmJyb3dzZXI7XG4gIGNvbnN0IHN1cHBvcnRzQ29sV2lkdGhzID0gYnJvd3Nlci5pc0Nocm9taXVtKCkgfHwgYnJvd3Nlci5pc0ZpcmVmb3goKTtcbiAgcmV0dXJuIGlzQ29sKGNlbGwpID8gc3VwcG9ydHNDb2xXaWR0aHMgOiB0cnVlO1xufTtcblxuY29uc3QgZ2V0RGltZW5zaW9uID0gPFQgZXh0ZW5kcyBIVE1MRWxlbWVudCwgVT4oXG4gIGNlbGxPcHQ6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4sXG4gIGluZGV4OiBudW1iZXIsXG4gIGJhY2t1cHM6IE9wdGlvbmFsPG51bWJlcj5bXSxcbiAgZmlsdGVyOiAoY2VsbDogU3VnYXJFbGVtZW50PFQ+KSA9PiBib29sZWFuLFxuICBnZXR0ZXI6IChjZWxsOiBTdWdhckVsZW1lbnQ8VD4pID0+IFUsXG4gIGZhbGxiYWNrOiAoZGVkdWNlZDogT3B0aW9uYWw8bnVtYmVyPikgPT4gVVxuKTogVSA9PlxuICBjZWxsT3B0LmZpbHRlcihmaWx0ZXIpLmZvbGQoXG4gICAgLy8gQ2FuJ3QganVzdCByZWFkIHRoZSB3aWR0aCBvZiBhIGNlbGwsIHNvIGNhbGN1bGF0ZS5cbiAgICAoKSA9PiBmYWxsYmFjayhVdGlsLmRlZHVjZShiYWNrdXBzLCBpbmRleCkpLFxuICAgIChjZWxsKSA9PiBnZXR0ZXIoY2VsbClcbiAgKTtcblxuY29uc3QgZ2V0V2lkdGhGcm9tID0gPFQ+KFxuICB3YXJlaG91c2U6IFdhcmVob3VzZSxcbiAgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PixcbiAgZ2V0V2lkdGg6IChjZWxsOiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+KSA9PiBULFxuICBmYWxsYmFjazogKGRlZHVjZWQ6IE9wdGlvbmFsPG51bWJlcj4pID0+IFRcbik6IFRbXSA9PiB7XG4gIC8vIE9ubHkgdHJlYXQgYSBjZWxsIGFzIGJlaW5nIHZhbGlkIGZvciBhIGNvbHVtbiByZXByZXNlbnRhdGlvbiBpZiBpdCBoYXMgYSByYXcgd2lkdGgsIG90aGVyd2lzZSB3ZSB3b24ndCBiZSBhYmxlIHRvIGNhbGN1bGF0ZSB0aGUgZXhwZWN0ZWQgd2lkdGguXG4gIC8vIFRoaXMgaXMgbmVlZGVkIGFzIG9uZSBjZWxsIG1heSBoYXZlIGEgd2lkdGggYnV0IG90aGVycyBtYXkgbm90LCBzbyB3ZSBuZWVkIHRvIHRyeSBhbmQgdXNlIG9uZSB3aXRoIGEgc3BlY2lmaWVkIHdpZHRoIGZpcnN0LlxuICBjb25zdCBjb2x1bW5DZWxscyA9IEJsb2Nrcy5jb2x1bW5zKHdhcmVob3VzZSk7XG4gIGNvbnN0IGNvbHVtbnM6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+PltdID0gV2FyZWhvdXNlLmhhc0NvbHVtbnMod2FyZWhvdXNlKSA/IGp1c3RDb2xzKHdhcmVob3VzZSkgOiBjb2x1bW5DZWxscztcblxuICBjb25zdCBiYWNrdXBzID0gWyBPcHRpb25hbC5zb21lKHdpZHRoLmVkZ2UodGFibGUpKSBdLmNvbmNhdChBcnIubWFwKHdpZHRoLnBvc2l0aW9ucyhjb2x1bW5DZWxscywgdGFibGUpLCAocG9zKSA9PlxuICAgIHBvcy5tYXAoKHApID0+IHAueClcbiAgKSk7XG5cbiAgLy8gT25seSB1c2UgdGhlIHdpZHRoIG9mIGNlbGxzIHRoYXQgaGF2ZSBubyBjb2x1bW4gc3BhbiAob3IgY29sc3BhbiAxKVxuICBjb25zdCBjb2xGaWx0ZXIgPSBGdW4ubm90KENlbGxVdGlscy5oYXNDb2xzcGFuKTtcblxuICByZXR1cm4gQXJyLm1hcChjb2x1bW5zLCAoY2VsbE9wdGlvbiwgYykgPT4ge1xuICAgIHJldHVybiBnZXREaW1lbnNpb24oY2VsbE9wdGlvbiwgYywgYmFja3VwcywgY29sRmlsdGVyLCAoY29sdW1uKSA9PiB7XG4gICAgICBpZiAoaXNWYWxpZENvbHVtbihjb2x1bW4pKSB7XG4gICAgICAgIHJldHVybiBnZXRXaWR0aChjb2x1bW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSW52YWxpZCBjb2x1bW4gc28gZmFsbGJhY2sgdG8gdHJ5aW5nIHRvIGdldCB0aGUgY29tcHV0ZWQgd2lkdGggZnJvbSB0aGUgY2VsbFxuICAgICAgICBjb25zdCBjZWxsID0gT3B0aW9uYWxzLmJpbmRGcm9tKGNvbHVtbkNlbGxzW2NdLCBGdW4uaWRlbnRpdHkpO1xuICAgICAgICByZXR1cm4gZ2V0RGltZW5zaW9uKGNlbGwsIGMsIGJhY2t1cHMsIGNvbEZpbHRlciwgKGNlbGwpID0+IGZhbGxiYWNrKE9wdGlvbmFsLnNvbWUoTWF0aC5yb3VuZChXaWR0aC5nZXQoY2VsbCkpKSksIGZhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9LCBmYWxsYmFjayk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0RGVkdWNlZCA9IChkZWR1Y2VkOiBPcHRpb25hbDxudW1iZXI+KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGRlZHVjZWQubWFwKChkKSA9PiB7XG4gICAgcmV0dXJuIGQgKyAncHgnO1xuICB9KS5nZXRPcignJyk7XG59O1xuXG5jb25zdCBnZXRSYXdXaWR0aHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBzdHJpbmdbXSA9PiB7XG4gIHJldHVybiBnZXRXaWR0aEZyb20od2FyZWhvdXNlLCB0YWJsZSwgZ2V0UmF3VywgZ2V0RGVkdWNlZCk7XG59O1xuXG5jb25zdCBnZXRQZXJjZW50YWdlV2lkdGhzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YWJsZVNpemU6IFRhYmxlU2l6ZSk6IG51bWJlcltdID0+IHtcbiAgcmV0dXJuIGdldFdpZHRoRnJvbSh3YXJlaG91c2UsIHRhYmxlLCBTaXplcy5nZXRQZXJjZW50YWdlV2lkdGgsIChkZWR1Y2VkKSA9PiB7XG4gICAgcmV0dXJuIGRlZHVjZWQuZm9sZCgoKSA9PiB7XG4gICAgICByZXR1cm4gdGFibGVTaXplLm1pbkNlbGxXaWR0aCgpO1xuICAgIH0sIChjZWxsV2lkdGgpID0+IHtcbiAgICAgIHJldHVybiBjZWxsV2lkdGggLyB0YWJsZVNpemUucGl4ZWxXaWR0aCgpICogMTAwO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldFBpeGVsV2lkdGhzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YWJsZVNpemU6IFRhYmxlU2l6ZSk6IG51bWJlcltdID0+IHtcbiAgcmV0dXJuIGdldFdpZHRoRnJvbSh3YXJlaG91c2UsIHRhYmxlLCBTaXplcy5nZXRQaXhlbFdpZHRoLCAoZGVkdWNlZCkgPT4ge1xuICAgIC8vIE1pbmltdW0gY2VsbCB3aWR0aCB3aGVuIGFsbCBlbHNlIGZhaWxzLlxuICAgIHJldHVybiBkZWR1Y2VkLmdldE9yVGh1bmsodGFibGVTaXplLm1pbkNlbGxXaWR0aCk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0SGVpZ2h0RnJvbSA9IDxUPiAoXG4gIHdhcmVob3VzZTogV2FyZWhvdXNlLFxuICB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LFxuICBnZXRIZWlnaHQ6IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVSb3dFbGVtZW50PikgPT4gVCxcbiAgZmFsbGJhY2s6IChkZWR1Y2VkOiBPcHRpb25hbDxudW1iZXI+KSA9PiBUXG4pOiBUW10gPT4ge1xuICBjb25zdCByb3dDZWxscyA9IEJsb2Nrcy5yb3dzKHdhcmVob3VzZSk7XG4gIGNvbnN0IHJvd3MgPSBBcnIubWFwKHdhcmVob3VzZS5hbGwsIChyKSA9PiBPcHRpb25hbC5zb21lKHIuZWxlbWVudCkpO1xuXG4gIGNvbnN0IGJhY2t1cHMgPSBbIE9wdGlvbmFsLnNvbWUoaGVpZ2h0LmVkZ2UodGFibGUpKSBdLmNvbmNhdChBcnIubWFwKGhlaWdodC5wb3NpdGlvbnMocm93Q2VsbHMsIHRhYmxlKSwgKHBvcykgPT5cbiAgICBwb3MubWFwKChwKSA9PiBwLnkpXG4gICkpO1xuXG4gIHJldHVybiBBcnIubWFwKHJvd3MsIChyb3csIGkpID0+XG4gICAgZ2V0RGltZW5zaW9uKFxuICAgICAgcm93LFxuICAgICAgaSxcbiAgICAgIGJhY2t1cHMsXG4gICAgICBGdW4uYWx3YXlzLFxuICAgICAgZ2V0SGVpZ2h0LFxuICAgICAgZmFsbGJhY2tcbiAgICApXG4gICk7XG59O1xuXG5jb25zdCBnZXRQaXhlbEhlaWdodHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBudW1iZXJbXSA9PiB7XG4gIHJldHVybiBnZXRIZWlnaHRGcm9tKHdhcmVob3VzZSwgdGFibGUsIFNpemVzLmdldEhlaWdodCwgKGRlZHVjZWQ6IE9wdGlvbmFsPG51bWJlcj4pID0+IHtcbiAgICByZXR1cm4gZGVkdWNlZC5nZXRPclRodW5rKENlbGxVdGlscy5taW5IZWlnaHQpO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldFJhd0hlaWdodHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBzdHJpbmdbXSA9PiB7XG4gIHJldHVybiBnZXRIZWlnaHRGcm9tKHdhcmVob3VzZSwgdGFibGUsIGdldFJhd0gsIGdldERlZHVjZWQpO1xufTtcblxuZXhwb3J0IHsgZ2V0UmF3V2lkdGhzLCBnZXRQaXhlbFdpZHRocywgZ2V0UGVyY2VudGFnZVdpZHRocywgZ2V0UGl4ZWxIZWlnaHRzLCBnZXRSYXdIZWlnaHRzIH07XG5cbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbi8vIFJldHVybnMgdGhlIHN1bSBvZiBlbGVtZW50cyBvZiBtZWFzdXJlcyBpbiB0aGUgaGFsZi1vcGVuIHJhbmdlIFtzdGFydCwgZW5kKVxuLy8gTWVhc3VyZXMgaXMgaW4gcGl4ZWxzLCB0cmVhdGVkIGFzIGFuIGFycmF5IG9mIGludGVnZXJzIG9yIGludGVnZXJzIGluIHN0cmluZyBmb3JtYXQuXG4vLyBOT1RFOiBiZXdhcmUgb2YgYWNjdW11bGF0ZWQgcm91bmRpbmcgZXJyb3JzIG92ZXIgbXVsdGlwbGUgY29sdW1ucyAtIGNvdWxkIHJlc3VsdCBpbiBub3RpY2VhYmxlIHRhYmxlIHdpZHRoIGNoYW5nZXNcbmNvbnN0IHRvdGFsID0gKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBtZWFzdXJlczogbnVtYmVyW10pOiBudW1iZXIgPT4ge1xuICBsZXQgciA9IDA7XG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgciArPSBtZWFzdXJlc1tpXSAhPT0gdW5kZWZpbmVkID8gbWVhc3VyZXNbaV0gOiAwO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuaW50ZXJmYWNlIENlbGxXaWR0aFNwYW48VCBleHRlbmRzIENlbGxFbGVtZW50PiB7XG4gIHJlYWRvbmx5IGNvbHNwYW46IG51bWJlcjtcbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+O1xufVxuXG5pbnRlcmZhY2UgQ2VsbEhlaWdodDxUIGV4dGVuZHMgSFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNlbGxFbGVtZW50PiB7XG4gIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD47XG59XG5cbmludGVyZmFjZSBDZWxsSGVpZ2h0U3BhbiBleHRlbmRzIENlbGxIZWlnaHQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgcm93c3BhbjogbnVtYmVyO1xufVxuXG4vLyBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCBjZWxscyBpbiB3YXJlaG91c2Ugd2l0aCB1cGRhdGVkIGNlbGwtd2lkdGhzLCB1c2luZ1xuLy8gdGhlIGFycmF5ICd3aWR0aHMnIG9mIHRoZSByZXByZXNlbnRhdGl2ZSB3aWR0aHMgb2YgZWFjaCBjb2x1bW4gb2YgdGhlIHRhYmxlICd3YXJlaG91c2UnXG5jb25zdCByZWNhbGN1bGF0ZVdpZHRoRm9yQ2VsbHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHdpZHRoczogbnVtYmVyW10pOiBDZWxsV2lkdGhTcGFuPEhUTUxUYWJsZUNlbGxFbGVtZW50PltdID0+IHtcbiAgY29uc3QgYWxsID0gV2FyZWhvdXNlLmp1c3RDZWxscyh3YXJlaG91c2UpO1xuXG4gIHJldHVybiBBcnIubWFwKGFsbCwgKGNlbGwpID0+IHtcbiAgICAvLyB3aWR0aCBvZiBhIHNwYW5uaW5nIGNlbGwgaXMgc3VtIG9mIHdpZHRocyBvZiByZXByZXNlbnRhdGl2ZSBjb2x1bW5zIGl0IHNwYW5zXG4gICAgY29uc3Qgd2lkdGggPSB0b3RhbChjZWxsLmNvbHVtbiwgY2VsbC5jb2x1bW4gKyBjZWxsLmNvbHNwYW4sIHdpZHRocyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnQ6IGNlbGwuZWxlbWVudCxcbiAgICAgIHdpZHRoLFxuICAgICAgY29sc3BhbjogY2VsbC5jb2xzcGFuXG4gICAgfTtcbiAgfSk7XG59O1xuXG5jb25zdCByZWNhbGN1bGF0ZVdpZHRoRm9yQ29sdW1ucyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgd2lkdGhzOiBudW1iZXJbXSk6IENlbGxXaWR0aFNwYW48SFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9PiB7XG4gIGNvbnN0IGdyb3VwcyA9IFdhcmVob3VzZS5qdXN0Q29sdW1ucyh3YXJlaG91c2UpO1xuXG4gIHJldHVybiBBcnIubWFwKGdyb3VwcywgKGNvbHVtbiwgaW5kZXgpID0+ICh7XG4gICAgZWxlbWVudDogY29sdW1uLmVsZW1lbnQsXG4gICAgd2lkdGg6IHdpZHRoc1tpbmRleF0sXG4gICAgY29sc3BhbjogY29sdW1uLmNvbHNwYW5cbiAgfSkpO1xufTtcblxuY29uc3QgcmVjYWxjdWxhdGVIZWlnaHRGb3JDZWxscyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaGVpZ2h0czogbnVtYmVyW10pOiBDZWxsSGVpZ2h0U3BhbltdID0+IHtcbiAgY29uc3QgYWxsID0gV2FyZWhvdXNlLmp1c3RDZWxscyh3YXJlaG91c2UpO1xuICByZXR1cm4gQXJyLm1hcChhbGwsIChjZWxsKSA9PiB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdG90YWwoY2VsbC5yb3csIGNlbGwucm93ICsgY2VsbC5yb3dzcGFuLCBoZWlnaHRzKTtcbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudDogY2VsbC5lbGVtZW50LFxuICAgICAgaGVpZ2h0LFxuICAgICAgcm93c3BhbjogY2VsbC5yb3dzcGFuXG4gICAgfTtcbiAgfSk7XG59O1xuXG5jb25zdCBtYXRjaFJvd0hlaWdodCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaGVpZ2h0czogbnVtYmVyW10pOiBDZWxsSGVpZ2h0PEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10gPT4ge1xuICByZXR1cm4gQXJyLm1hcCh3YXJlaG91c2UuYWxsLCAocm93LCBpKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVsZW1lbnQ6IHJvdy5lbGVtZW50LFxuICAgICAgaGVpZ2h0OiBoZWlnaHRzW2ldXG4gICAgfTtcbiAgfSk7XG59O1xuXG5leHBvcnQgdHlwZSB7IENlbGxXaWR0aFNwYW4gfTtcbmV4cG9ydCB7XG4gIHJlY2FsY3VsYXRlV2lkdGhGb3JDZWxscyxcbiAgcmVjYWxjdWxhdGVXaWR0aEZvckNvbHVtbnMsXG4gIHJlY2FsY3VsYXRlSGVpZ2h0Rm9yQ2VsbHMsXG4gIG1hdGNoUm93SGVpZ2h0XG59O1xuIiwiaW1wb3J0IHsgRnVuLCB0eXBlIE9wdGlvbmFsLCBTdHJpbmdzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgQ3NzLCBEaW1lbnNpb24sIEhlaWdodCwgU3VnYXJCb2R5LCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlLCBUcmF2ZXJzZSwgV2lkdGggfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBUYWJsZUxvb2t1cCBmcm9tICcuLi9hcGkvVGFibGVMb29rdXAnO1xuaW1wb3J0IHsgZ2V0U3BhbiB9IGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcblxudHlwZSBTaXplR2V0dGVyID0gKGU6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbnR5cGUgU2l6ZVNldHRlciA9IChlOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCB2YWx1ZTogbnVtYmVyKSA9PiB2b2lkO1xuXG5jb25zdCByUGVyY2VudGFnZUJhc2VkU2l6ZVJlZ2V4ID0gLyhcXGQrKFxcLlxcZCspPyklLztcbmNvbnN0IHJQaXhlbEJhc2VkU2l6ZVJlZ2V4ID0gLyhcXGQrKFxcLlxcZCspPylweHxlbS87XG5jb25zdCBpc0NvbCA9IFN1Z2FyTm9kZS5pc1RhZygnY29sJyk7XG5jb25zdCBpc1JvdyA9IFN1Z2FyTm9kZS5pc1RhZygndHInKTtcblxuY29uc3QgZ2V0UGVyY2VudFNpemUgPSAoZWxtOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBvdXRlckdldHRlcjogU2l6ZUdldHRlciwgaW5uZXJHZXR0ZXI6IFNpemVHZXR0ZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCByZWxhdGl2ZVBhcmVudCA9IFRyYXZlcnNlLnBhcmVudEVsZW1lbnQoZWxtKS5nZXRPclRodW5rKCgpID0+IFN1Z2FyQm9keS5nZXRCb2R5KFRyYXZlcnNlLm93bmVyKGVsbSkpKTtcbiAgcmV0dXJuIG91dGVyR2V0dGVyKGVsbSkgLyBpbm5lckdldHRlcihyZWxhdGl2ZVBhcmVudCkgKiAxMDA7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0UGl4ZWxXaWR0aCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBhbW91bnQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICBDc3Muc2V0KGNlbGwsICd3aWR0aCcsIGFtb3VudCArICdweCcpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldFBlcmNlbnRhZ2VXaWR0aCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBhbW91bnQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICBDc3Muc2V0KGNlbGwsICd3aWR0aCcsIGFtb3VudCArICclJyk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0SGVpZ2h0ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGFtb3VudDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIENzcy5zZXQoY2VsbCwgJ2hlaWdodCcsIGFtb3VudCArICdweCcpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUhlaWdodCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIENzcy5yZW1vdmUoY2VsbCwgJ2hlaWdodCcpO1xufTtcblxuY29uc3QgZ2V0SGVpZ2h0VmFsdWUgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IHN0cmluZyA9PlxuICBIZWlnaHQuZ2V0UnVudGltZShjZWxsKSArICdweCc7XG5cbmNvbnN0IGNvbnZlcnQgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgbnVtYmVyOiBudW1iZXIsIGdldHRlcjogU2l6ZUdldHRlciwgc2V0dGVyOiBTaXplU2V0dGVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgbmV3U2l6ZSA9IFRhYmxlTG9va3VwLnRhYmxlKGNlbGwpLm1hcCgodGFibGUpID0+IHtcbiAgICBjb25zdCB0b3RhbCA9IGdldHRlcih0YWJsZSk7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKG51bWJlciAvIDEwMC4wKSAqIHRvdGFsKTtcbiAgfSkuZ2V0T3IobnVtYmVyKTtcbiAgc2V0dGVyKGNlbGwsIG5ld1NpemUpO1xuICByZXR1cm4gbmV3U2l6ZTtcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVBpeGVsU2l6ZSA9ICh2YWx1ZTogc3RyaW5nLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBnZXR0ZXI6IFNpemVHZXR0ZXIsIHNldHRlcjogU2l6ZVNldHRlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IG51bWJlciA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICByZXR1cm4gU3RyaW5ncy5lbmRzV2l0aCh2YWx1ZSwgJyUnKSAmJiBTdWdhck5vZGUubmFtZShjZWxsKSAhPT0gJ3RhYmxlJyA/IGNvbnZlcnQoY2VsbCwgbnVtYmVyLCBnZXR0ZXIsIHNldHRlcikgOiBudW1iZXI7XG59O1xuXG5jb25zdCBnZXRUb3RhbEhlaWdodCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogbnVtYmVyID0+IHtcbiAgY29uc3QgdmFsdWUgPSBnZXRIZWlnaHRWYWx1ZShjZWxsKTtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiBIZWlnaHQuZ2V0KGNlbGwpO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVQaXhlbFNpemUodmFsdWUsIGNlbGwsIEhlaWdodC5nZXQsIHNldEhlaWdodCk7XG59O1xuXG5jb25zdCBnZXQgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgdHlwZTogJ3Jvd3NwYW4nIHwgJ2NvbHNwYW4nLCBmOiAoZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdiA9IGYoY2VsbCk7XG4gIGNvbnN0IHNwYW4gPSBnZXRTcGFuKGNlbGwsIHR5cGUpO1xuICByZXR1cm4gdiAvIHNwYW47XG59O1xuXG5jb25zdCBnZXRSYXcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgcHJvcDogJ2hlaWdodCcgfCAnd2lkdGgnKTogT3B0aW9uYWw8c3RyaW5nPiA9PiB7XG4gIC8vIFRyeSB0byB1c2UgdGhlIHN0eWxlIGZpcnN0LCBvdGhlcndpc2UgYXR0ZW1wdCB0byBnZXQgdGhlIHZhbHVlIGZyb20gYW4gYXR0cmlidXRlXG4gIHJldHVybiBDc3MuZ2V0UmF3KGVsZW1lbnQsIHByb3ApLm9yVGh1bmsoKCkgPT4ge1xuICAgIHJldHVybiBBdHRyaWJ1dGUuZ2V0T3B0KGVsZW1lbnQsIHByb3ApLm1hcCgodmFsKSA9PiB2YWwgKyAncHgnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UmF3V2lkdGggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgZ2V0UmF3KGVsZW1lbnQsICd3aWR0aCcpO1xuXG5leHBvcnQgY29uc3QgZ2V0UmF3SGVpZ2h0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBPcHRpb25hbDxzdHJpbmc+ID0+XG4gIGdldFJhdyhlbGVtZW50LCAnaGVpZ2h0Jyk7XG5cbi8vIEdldCBhIHBlcmNlbnRhZ2Ugc2l6ZSBmb3IgYSBwZXJjZW50YWdlIHBhcmVudCB0YWJsZVxuZXhwb3J0IGNvbnN0IGdldFBlcmNlbnRhZ2VXaWR0aCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50Pik6IG51bWJlciA9PlxuICBnZXRQZXJjZW50U2l6ZShjZWxsLCBXaWR0aC5nZXQsIFdpZHRoLmdldElubmVyKTtcblxuZXhwb3J0IGNvbnN0IGdldFBpeGVsV2lkdGggPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4pOiBudW1iZXIgPT5cbiAgLy8gRm9yIGNvbCBlbGVtZW50cyB1c2UgdGhlIGNvbXB1dGVkIHdpZHRoIGFzIGNvbCBlbGVtZW50cyBhcmVuJ3QgYWZmZWN0ZWQgYnkgYm9yZGVycywgcGFkZGluZywgZXRjLi4uXG4gIGlzQ29sKGNlbGwpID8gTWF0aC5yb3VuZChXaWR0aC5nZXQoY2VsbCkpIDogV2lkdGguZ2V0UnVudGltZShjZWxsKTtcblxuZXhwb3J0IGNvbnN0IGdldEhlaWdodCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVSb3dFbGVtZW50Pik6IG51bWJlciA9PiB7XG4gIHJldHVybiBpc1JvdyhjZWxsKSA/IEhlaWdodC5nZXQoY2VsbCkgOiBnZXQoY2VsbCBhcyBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCAncm93c3BhbicsIGdldFRvdGFsSGVpZ2h0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRHZW5lcmljV2lkdGggPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IE9wdGlvbmFsPERpbWVuc2lvbi5EaW1lbnNpb248J2ZpeGVkJyB8ICdyZWxhdGl2ZScgfCAnZW1wdHknPj4gPT4ge1xuICBjb25zdCB3aWR0aCA9IGdldFJhd1dpZHRoKGNlbGwpO1xuICByZXR1cm4gd2lkdGguYmluZCgodykgPT4gRGltZW5zaW9uLnBhcnNlKHcsIFsgJ2ZpeGVkJywgJ3JlbGF0aXZlJywgJ2VtcHR5JyBdKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0R2VuZXJpY1dpZHRoID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGFtb3VudDogbnVtYmVyLCB1bml0OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgQ3NzLnNldChjZWxsLCAnd2lkdGgnLCBhbW91bnQgKyB1bml0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRQaXhlbFRhYmxlV2lkdGggPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZyA9PiBXaWR0aC5nZXQodGFibGUpICsgJ3B4JztcbmV4cG9ydCBjb25zdCBnZXRQaXhlbFRhYmxlSGVpZ2h0ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBzdHJpbmcgPT4gSGVpZ2h0LmdldCh0YWJsZSkgKyAncHgnO1xuXG5leHBvcnQgY29uc3QgZ2V0UGVyY2VudFRhYmxlV2lkdGggPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZyA9PiBnZXRQZXJjZW50U2l6ZSh0YWJsZSwgV2lkdGguZ2V0LCBXaWR0aC5nZXRJbm5lcikgKyAnJSc7XG5leHBvcnQgY29uc3QgZ2V0UGVyY2VudFRhYmxlSGVpZ2h0ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBzdHJpbmcgPT4gZ2V0UGVyY2VudFNpemUodGFibGUsIEhlaWdodC5nZXQsIEhlaWdodC5nZXRJbm5lcikgKyAnJSc7XG5cbmV4cG9ydCBjb25zdCBpc1BlcmNlbnRTaXppbmcgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IGJvb2xlYW4gPT4gZ2V0UmF3V2lkdGgodGFibGUpLmV4aXN0cygoc2l6ZSkgPT4gclBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleC50ZXN0KHNpemUpKTtcbmV4cG9ydCBjb25zdCBpc1BpeGVsU2l6aW5nID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBib29sZWFuID0+IGdldFJhd1dpZHRoKHRhYmxlKS5leGlzdHMoKHNpemUpID0+IHJQaXhlbEJhc2VkU2l6ZVJlZ2V4LnRlc3Qoc2l6ZSkpO1xuZXhwb3J0IGNvbnN0IGlzTm9uZVNpemluZyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogYm9vbGVhbiA9PiBnZXRSYXdXaWR0aCh0YWJsZSkuaXNOb25lKCk7XG5cbmV4cG9ydCBjb25zdCBwZXJjZW50YWdlQmFzZWRTaXplUmVnZXggPSBGdW4uY29uc3RhbnQoclBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCk7XG5leHBvcnQgY29uc3QgcGl4ZWxCYXNlZFNpemVSZWdleCA9IEZ1bi5jb25zdGFudChyUGl4ZWxCYXNlZFNpemVSZWdleCk7XG4iLCJpbXBvcnQgeyBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBCb3VuZHMsIERldGFpbEV4dCB9IGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuXG5jb25zdCBpblNlbGVjdGlvbiA9IChib3VuZHM6IEJvdW5kcywgZGV0YWlsOiBEZXRhaWxFeHQpOiBib29sZWFuID0+IHtcbiAgY29uc3QgbGVmdEVkZ2UgPSBkZXRhaWwuY29sdW1uO1xuICBjb25zdCByaWdodEVkZ2UgPSBkZXRhaWwuY29sdW1uICsgZGV0YWlsLmNvbHNwYW4gLSAxO1xuICBjb25zdCB0b3BFZGdlID0gZGV0YWlsLnJvdztcbiAgY29uc3QgYm90dG9tRWRnZSA9IGRldGFpbC5yb3cgKyBkZXRhaWwucm93c3BhbiAtIDE7XG4gIHJldHVybiAoXG4gICAgbGVmdEVkZ2UgPD0gYm91bmRzLmZpbmlzaENvbCAmJiByaWdodEVkZ2UgPj0gYm91bmRzLnN0YXJ0Q29sXG4gICkgJiYgKFxuICAgIHRvcEVkZ2UgPD0gYm91bmRzLmZpbmlzaFJvdyAmJiBib3R0b21FZGdlID49IGJvdW5kcy5zdGFydFJvd1xuICApO1xufTtcblxuLy8gTm90ZSwgc29tZXRoaW5nIGlzICp3aXRoaW4qIGlmIGl0IGlzIGNvbXBsZXRlbHkgY29udGFpbmVkIHdpdGhpbiB0aGUgYm91bmRzLlxuY29uc3QgaXNXaXRoaW4gPSAoYm91bmRzOiBCb3VuZHMsIGRldGFpbDogRGV0YWlsRXh0KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiAoXG4gICAgZGV0YWlsLmNvbHVtbiA+PSBib3VuZHMuc3RhcnRDb2wgJiZcbiAgICAoZGV0YWlsLmNvbHVtbiArIGRldGFpbC5jb2xzcGFuIC0gMSkgPD0gYm91bmRzLmZpbmlzaENvbCAmJlxuICAgIGRldGFpbC5yb3cgPj0gYm91bmRzLnN0YXJ0Um93ICYmXG4gICAgKGRldGFpbC5yb3cgKyBkZXRhaWwucm93c3BhbiAtIDEpIDw9IGJvdW5kcy5maW5pc2hSb3dcbiAgKTtcbn07XG5cbmNvbnN0IGlzUmVjdGFuZ3VsYXIgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGJvdW5kczogQm91bmRzKTogT3B0aW9uYWw8Qm91bmRzPiA9PiB7XG4gIGxldCBpc1JlY3QgPSB0cnVlO1xuICBjb25zdCBkZXRhaWxJc1dpdGhpbiA9IEZ1bi5jdXJyeShpc1dpdGhpbiwgYm91bmRzKTtcblxuICBmb3IgKGxldCBpID0gYm91bmRzLnN0YXJ0Um93OyBpIDw9IGJvdW5kcy5maW5pc2hSb3c7IGkrKykge1xuICAgIGZvciAobGV0IGogPSBib3VuZHMuc3RhcnRDb2w7IGogPD0gYm91bmRzLmZpbmlzaENvbDsgaisrKSB7XG4gICAgICBpc1JlY3QgPSBpc1JlY3QgJiYgV2FyZWhvdXNlLmdldEF0KHdhcmVob3VzZSwgaSwgaikuZXhpc3RzKGRldGFpbElzV2l0aGluKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXNSZWN0ID8gT3B0aW9uYWwuc29tZShib3VuZHMpIDogT3B0aW9uYWwubm9uZTxCb3VuZHM+KCk7XG59O1xuXG5leHBvcnQge1xuICBpblNlbGVjdGlvbixcbiAgaXNXaXRoaW4sXG4gIGlzUmVjdGFuZ3VsYXJcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb21wYXJlLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuXG5pbXBvcnQgKiBhcyBDZWxsQm91bmRzIGZyb20gJy4vQ2VsbEJvdW5kcyc7XG5pbXBvcnQgKiBhcyBDZWxsR3JvdXAgZnJvbSAnLi9DZWxsR3JvdXAnO1xuXG5jb25zdCBtb3ZlQnkgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+ID0+IHtcbiAgcmV0dXJuIFdhcmVob3VzZS5maW5kSXRlbSh3YXJlaG91c2UsIGNlbGwsIENvbXBhcmUuZXEpLmJpbmQoKGRldGFpbCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0Um93ID0gcm93ID4gMCA/IGRldGFpbC5yb3cgKyBkZXRhaWwucm93c3BhbiAtIDEgOiBkZXRhaWwucm93O1xuICAgIGNvbnN0IHN0YXJ0Q29sID0gY29sdW1uID4gMCA/IGRldGFpbC5jb2x1bW4gKyBkZXRhaWwuY29sc3BhbiAtIDEgOiBkZXRhaWwuY29sdW1uO1xuICAgIGNvbnN0IGRlc3QgPSBXYXJlaG91c2UuZ2V0QXQod2FyZWhvdXNlLCBzdGFydFJvdyArIHJvdywgc3RhcnRDb2wgKyBjb2x1bW4pO1xuICAgIHJldHVybiBkZXN0Lm1hcCgoZCkgPT4ge1xuICAgICAgcmV0dXJuIGQuZWxlbWVudDtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbnRlcmNlcHRzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBzdGFydDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PiB7XG4gIHJldHVybiBDZWxsR3JvdXAuZ2V0QW55Qm94KHdhcmVob3VzZSwgc3RhcnQsIGZpbmlzaCkubWFwKChib3VuZHMpID0+IHtcbiAgICBjb25zdCBpbnNpZGUgPSBXYXJlaG91c2UuZmlsdGVySXRlbXMod2FyZWhvdXNlLCBGdW4uY3VycnkoQ2VsbEJvdW5kcy5pblNlbGVjdGlvbiwgYm91bmRzKSk7XG4gICAgcmV0dXJuIEFyci5tYXAoaW5zaWRlLCAoZGV0YWlsKSA9PiB7XG4gICAgICByZXR1cm4gZGV0YWlsLmVsZW1lbnQ7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgcGFyZW50Q2VsbCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaW5uZXJDZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4gPT4ge1xuICBjb25zdCBpc0NvbnRhaW5lZEJ5ID0gKGMxOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBjMjogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiBDb21wYXJlLmNvbnRhaW5zKGMyLCBjMSk7XG4gIH07XG4gIHJldHVybiBXYXJlaG91c2UuZmluZEl0ZW0od2FyZWhvdXNlLCBpbm5lckNlbGwsIGlzQ29udGFpbmVkQnkpLm1hcCgoZGV0YWlsKSA9PiB7XG4gICAgcmV0dXJuIGRldGFpbC5lbGVtZW50O1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIG1vdmVCeSxcbiAgaW50ZXJjZXB0cyxcbiAgcGFyZW50Q2VsbFxufTtcbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQ29tcGFyZSwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuXG5pbXBvcnQgKiBhcyBDZWxsQm91bmRzIGZyb20gJy4vQ2VsbEJvdW5kcyc7XG5cbmNvbnN0IGdldEJvdW5kcyA9IChkZXRhaWxBOiBTdHJ1Y3RzLkRldGFpbEV4dCwgZGV0YWlsQjogU3RydWN0cy5EZXRhaWxFeHQpOiBTdHJ1Y3RzLkJvdW5kcyA9PiB7XG4gIHJldHVybiBTdHJ1Y3RzLmJvdW5kcyhcbiAgICBNYXRoLm1pbihkZXRhaWxBLnJvdywgZGV0YWlsQi5yb3cpLFxuICAgIE1hdGgubWluKGRldGFpbEEuY29sdW1uLCBkZXRhaWxCLmNvbHVtbiksXG4gICAgTWF0aC5tYXgoZGV0YWlsQS5yb3cgKyBkZXRhaWxBLnJvd3NwYW4gLSAxLCBkZXRhaWxCLnJvdyArIGRldGFpbEIucm93c3BhbiAtIDEpLFxuICAgIE1hdGgubWF4KGRldGFpbEEuY29sdW1uICsgZGV0YWlsQS5jb2xzcGFuIC0gMSwgZGV0YWlsQi5jb2x1bW4gKyBkZXRhaWxCLmNvbHNwYW4gLSAxKVxuICApO1xufTtcblxuY29uc3QgZ2V0QW55Qm94ID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBzdGFydENlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGZpbmlzaENlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBPcHRpb25hbDxTdHJ1Y3RzLkJvdW5kcz4gPT4ge1xuICBjb25zdCBzdGFydENvb3JkcyA9IFdhcmVob3VzZS5maW5kSXRlbSh3YXJlaG91c2UsIHN0YXJ0Q2VsbCwgQ29tcGFyZS5lcSk7XG4gIGNvbnN0IGZpbmlzaENvb3JkcyA9IFdhcmVob3VzZS5maW5kSXRlbSh3YXJlaG91c2UsIGZpbmlzaENlbGwsIENvbXBhcmUuZXEpO1xuICByZXR1cm4gc3RhcnRDb29yZHMuYmluZCgoc2MpID0+IHtcbiAgICByZXR1cm4gZmluaXNoQ29vcmRzLm1hcCgoZmMpID0+IHtcbiAgICAgIHJldHVybiBnZXRCb3VuZHMoc2MsIGZjKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRCb3ggPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHN0YXJ0Q2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoQ2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pik6IE9wdGlvbmFsPFN0cnVjdHMuQm91bmRzPiA9PiB7XG4gIHJldHVybiBnZXRBbnlCb3god2FyZWhvdXNlLCBzdGFydENlbGwsIGZpbmlzaENlbGwpLmJpbmQoKGJvdW5kcykgPT4ge1xuICAgIHJldHVybiBDZWxsQm91bmRzLmlzUmVjdGFuZ3VsYXIod2FyZWhvdXNlLCBib3VuZHMpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGdldEFueUJveCxcbiAgZ2V0Qm94XG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgQ3NzLCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuZXhwb3J0IGNvbnN0IGdldEF0dHJWYWx1ZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIG5hbWU6IHN0cmluZywgZmFsbGJhY2s6IG51bWJlciA9IDApOiBudW1iZXIgPT5cbiAgQXR0cmlidXRlLmdldE9wdChjZWxsLCBuYW1lKS5tYXAoKHZhbHVlKSA9PiBwYXJzZUludCh2YWx1ZSwgMTApKS5nZXRPcihmYWxsYmFjayk7XG5cbmV4cG9ydCBjb25zdCBnZXRTcGFuID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHR5cGU6ICdjb2xzcGFuJyB8ICdyb3dzcGFuJyk6IG51bWJlciA9PlxuICBnZXRBdHRyVmFsdWUoY2VsbCwgdHlwZSwgMSk7XG5cbmV4cG9ydCBjb25zdCBoYXNDb2xzcGFuID0gKGNlbGxPckNvbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4pOiBib29sZWFuID0+IHtcbiAgaWYgKFN1Z2FyTm9kZS5pc1RhZygnY29sJykoY2VsbE9yQ29sKSkge1xuICAgIHJldHVybiBnZXRBdHRyVmFsdWUoY2VsbE9yQ29sLCAnc3BhbicsIDEpID4gMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0U3BhbihjZWxsT3JDb2wgYXMgU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgJ2NvbHNwYW4nKSA+IDE7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBoYXNSb3dzcGFuID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBib29sZWFuID0+XG4gIGdldFNwYW4oY2VsbCwgJ3Jvd3NwYW4nKSA+IDE7XG5cbmV4cG9ydCBjb25zdCBnZXRDc3NWYWx1ZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHByb3BlcnR5OiBzdHJpbmcpOiBudW1iZXIgPT5cbiAgcGFyc2VJbnQoQ3NzLmdldChlbGVtZW50LCBwcm9wZXJ0eSksIDEwKTtcblxuZXhwb3J0IGNvbnN0IG1pbldpZHRoID0gRnVuLmNvbnN0YW50KDEwKTtcbmV4cG9ydCBjb25zdCBtaW5IZWlnaHQgPSBGdW4uY29uc3RhbnQoMTApO1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcblxuZXhwb3J0IGNvbnN0IHVuaXF1ZUNvbHVtbnMgPSAoZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSk6IFN0cnVjdHMuRGV0YWlsRXh0W10gPT4ge1xuICBjb25zdCB1bmlxdWVDaGVjayA9IChyZXN0OiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0KSA9PiB7XG4gICAgY29uc3QgY29sdW1uRXhpc3RzID0gQXJyLmV4aXN0cyhyZXN0LCAoY3VycmVudERldGFpbCkgPT4gY3VycmVudERldGFpbC5jb2x1bW4gPT09IGRldGFpbC5jb2x1bW4pO1xuXG4gICAgcmV0dXJuIGNvbHVtbkV4aXN0cyA/IHJlc3QgOiByZXN0LmNvbmNhdChbIGRldGFpbCBdKTtcbiAgfTtcblxuICByZXR1cm4gQXJyLmZvbGRsKGRldGFpbHMsIHVuaXF1ZUNoZWNrLCBbXSkuc29ydCgoZGV0YWlsQSwgZGV0YWlsQikgPT5cbiAgICBkZXRhaWxBLmNvbHVtbiAtIGRldGFpbEIuY29sdW1uXG4gICk7XG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgU2VsZWN0b3JzLCB0eXBlIFN1Z2FyRWxlbWVudCwgVHJhdmVyc2UgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5jb25zdCBmaXJzdExheWVyID0gPFQgZXh0ZW5kcyBFbGVtZW50PihzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT4ge1xuICByZXR1cm4gZmlsdGVyRmlyc3RMYXllcihzY29wZSwgc2VsZWN0b3IsIEZ1bi5hbHdheXMpO1xufTtcblxuY29uc3QgZmlsdGVyRmlyc3RMYXllciA9IDxUIGV4dGVuZHMgRWxlbWVudD4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZywgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+KSA9PiBib29sZWFuKTogU3VnYXJFbGVtZW50PFQ+W10gPT4ge1xuICByZXR1cm4gQXJyLmJpbmQoVHJhdmVyc2UuY2hpbGRyZW4oc2NvcGUpLCAoeCkgPT4ge1xuICAgIGlmIChTZWxlY3RvcnMuaXM8VD4oeCwgc2VsZWN0b3IpKSB7XG4gICAgICByZXR1cm4gcHJlZGljYXRlKHgpID8gWyB4IF0gOiBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbHRlckZpcnN0TGF5ZXIoeCwgc2VsZWN0b3IsIHByZWRpY2F0ZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGZpcnN0TGF5ZXIsXG4gIGZpbHRlckZpcnN0TGF5ZXJcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT2JqLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi4vbW9kZWwvR3JpZFJvdyc7XG5cbmV4cG9ydCBjb25zdCBMT0NLRURfQ09MX0FUVFIgPSAnZGF0YS1zbm9va2VyLWxvY2tlZC1jb2xzJztcblxuY29uc3QgZ2V0TG9ja2VkQ29sdW1uc0Zyb21UYWJsZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogT3B0aW9uYWw8UmVjb3JkPHN0cmluZywgdHJ1ZT4+ID0+XG4gIEF0dHJpYnV0ZS5nZXRPcHQodGFibGUsIExPQ0tFRF9DT0xfQVRUUilcbiAgICAuYmluZCgobG9ja2VkQ29sU3RyKSA9PiBPcHRpb25hbC5mcm9tKGxvY2tlZENvbFN0ci5tYXRjaCgvXFxkKy9nKSkpXG4gICAgLm1hcCgobG9ja2VkQ29scykgPT4gQXJyLm1hcFRvT2JqZWN0KGxvY2tlZENvbHMsIEZ1bi5hbHdheXMpKTtcblxuLy8gTmVlZCB0byBjaGVjayBhbGwgb2YgdGhlIGNlbGxzIHRvIGRldGVybWluZSB3aGljaCBjb2x1bW5zIGFyZSBsb2NrZWQgLSByZWFzb25pbmcgaXMgYmVjYXVzZSByb3dzcGFuIGFuZCBjb2xzcGFuIGNlbGxzIHdoZXJlIHRoZSBzYW1lIGNlbGwgaXMgdXNlZCBieSBtdWx0aXBsZSBjb2x1bW5zXG5jb25zdCBnZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdKTogbnVtYmVyW10gPT4ge1xuICBjb25zdCBsb2NrZWQgPSBBcnIuZm9sZGwoR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cywgKGFjYywgcm93KSA9PiB7XG4gICAgQXJyLmVhY2gocm93LmNlbGxzLCAoY2VsbCwgaWR4KSA9PiB7XG4gICAgICBpZiAoY2VsbC5pc0xvY2tlZCkge1xuICAgICAgICBhY2NbaWR4XSA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30gYXMgUmVjb3JkPG51bWJlciwgYm9vbGVhbj4pO1xuXG4gIGNvbnN0IGxvY2tlZEFyciA9IE9iai5tYXBUb0FycmF5KGxvY2tlZCwgKF92YWwsIGtleSkgPT4gcGFyc2VJbnQoa2V5LCAxMCkpO1xuICByZXR1cm4gQXJyLnNvcnQobG9ja2VkQXJyKTtcbn07XG5cbmV4cG9ydCB7XG4gIGdldExvY2tlZENvbHVtbnNGcm9tVGFibGUsXG4gIGdldExvY2tlZENvbHVtbnNGcm9tR3JpZFxufTtcbiIsImltcG9ydCB7IEFyciwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCB1bmlxdWUgPSA8VD4gKHhzOiBUW10sIGVxOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbik6IFRbXSA9PiB7XG4gIGNvbnN0IHJlc3VsdDogVFtdID0gW107XG4gIEFyci5lYWNoKHhzLCAoeCwgaSkgPT4ge1xuICAgIGlmIChpIDwgeHMubGVuZ3RoIC0gMSAmJiAhZXEoeCwgeHNbaSArIDFdKSkge1xuICAgICAgcmVzdWx0LnB1c2goeCk7XG4gICAgfSBlbHNlIGlmIChpID09PSB4cy5sZW5ndGggLSAxKSB7XG4gICAgICByZXN1bHQucHVzaCh4KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuY29uc3QgZGVkdWNlID0gKHhzOiBPcHRpb25hbDxudW1iZXI+W10sIGluZGV4OiBudW1iZXIpOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB4cy5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8bnVtYmVyPigpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudCA9IHhzW2luZGV4XS5mb2xkKCgpID0+IHtcbiAgICBjb25zdCByZXN0ID0gQXJyLnJldmVyc2UoeHMuc2xpY2UoMCwgaW5kZXgpKTtcbiAgICByZXR1cm4gQXJyLmZpbmRNYXAocmVzdCwgKGEsIGkpID0+IGEubWFwKChhYSkgPT4gKHsgdmFsdWU6IGFhLCBkZWx0YTogaSArIDEgfSkpKTtcbiAgfSwgKGMpID0+IE9wdGlvbmFsLnNvbWUoeyB2YWx1ZTogYywgZGVsdGE6IDAgfSkpO1xuXG4gIGNvbnN0IG5leHQgPSB4c1tpbmRleCArIDFdLmZvbGQoKCkgPT4ge1xuICAgIGNvbnN0IHJlc3QgPSB4cy5zbGljZShpbmRleCArIDEpO1xuICAgIHJldHVybiBBcnIuZmluZE1hcChyZXN0LCAoYSwgaSkgPT4gYS5tYXAoKGFhKSA9PiAoeyB2YWx1ZTogYWEsIGRlbHRhOiBpICsgMSB9KSkpO1xuICB9LCAobikgPT4gT3B0aW9uYWwuc29tZSh7IHZhbHVlOiBuLCBkZWx0YTogMSB9KSk7XG5cbiAgcmV0dXJuIGN1cnJlbnQuYmluZCgoYykgPT4gbmV4dC5tYXAoKG4pID0+IHtcbiAgICBjb25zdCBleHRyYXMgPSBuLmRlbHRhICsgYy5kZWx0YTtcbiAgICByZXR1cm4gTWF0aC5hYnMobi52YWx1ZSAtIGMudmFsdWUpIC8gZXh0cmFzO1xuICB9KSk7XG59O1xuXG5leHBvcnQgeyB1bmlxdWUsIGRlZHVjZSB9O1xuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbi8qKlxuICogQXBwbGllcyBmIHJlcGVhdGVkbHkgdW50aWwgaXQgY29tcGxldGVzIChieSByZXR1cm5pbmcgT3B0aW9uYWwubm9uZSgpKS5cbiAqXG4gKiBOb3JtYWxseSB3b3VsZCBqdXN0IHVzZSByZWN1cnNpb24sIGJ1dCBKYXZhU2NyaXB0IGxhY2tzIHRhaWwgY2FsbCBvcHRpbWlzYXRpb24uXG4gKlxuICogVGhpcyBpcyB3aGF0IHJlY3Vyc2lvbiBsb29rcyBsaWtlIHdoZW4gbWFudWFsbHkgdW5yYXZlbGxlZCA6KVxuICovXG5jb25zdCB0b0FycmF5ID0gPFQgPSBhbnksIFUgZXh0ZW5kcyBUID0gVD4gKHRhcmdldDogVCwgZjogKHQ6IFQpID0+IE9wdGlvbmFsPFU+KTogVVtdID0+IHtcbiAgY29uc3QgcjogVVtdID0gW107XG5cbiAgY29uc3QgcmVjdXJzZSA9IChlOiBVKSA9PiB7XG4gICAgci5wdXNoKGUpO1xuICAgIHJldHVybiBmKGUpO1xuICB9O1xuXG4gIGxldCBjdXIgPSBmKHRhcmdldCk7XG4gIGRvIHtcbiAgICBjdXIgPSBjdXIuYmluZChyZWN1cnNlKTtcbiAgfSB3aGlsZSAoY3VyLmlzU29tZSgpKTtcblxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCB7XG4gIHRvQXJyYXlcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgU2VsZWN0b3JzIGZyb20gJy4uL3NlYXJjaC9TZWxlY3RvcnMnO1xuXG5jb25zdCBlcSA9IChlMTogU3VnYXJFbGVtZW50PHVua25vd24+LCBlMjogU3VnYXJFbGVtZW50PHVua25vd24+KTogYm9vbGVhbiA9PlxuICBlMS5kb20gPT09IGUyLmRvbTtcblxuY29uc3QgaXNFcXVhbE5vZGUgPSAoZTE6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZTI6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT5cbiAgZTEuZG9tLmlzRXF1YWxOb2RlKGUyLmRvbSk7XG5cbmNvbnN0IG1lbWJlciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8dW5rbm93bj4sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8dW5rbm93bj5bXSk6IGJvb2xlYW4gPT5cbiAgQXJyLmV4aXN0cyhlbGVtZW50cywgRnVuLmN1cnJ5KGVxLCBlbGVtZW50KSk7XG5cbi8vIFJldHVybnM6IHRydWUgaWYgbm9kZSBlMSBjb250YWlucyBlMiwgb3RoZXJ3aXNlIGZhbHNlLlxuLy8gKHJldHVybnMgZmFsc2UgaWYgZTE9PT1lMjogQSBub2RlIGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmKS5cbmNvbnN0IGNvbnRhaW5zID0gKGUxOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGUyOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgZDEgPSBlMS5kb207XG4gIGNvbnN0IGQyID0gZTIuZG9tO1xuICByZXR1cm4gZDEgPT09IGQyID8gZmFsc2UgOiBkMS5jb250YWlucyhkMik7XG59O1xuXG5jb25zdCBpcyA9IFNlbGVjdG9ycy5pcztcblxuZXhwb3J0IHtcbiAgZXEsXG4gIGlzRXF1YWxOb2RlLFxuICBtZW1iZXIsXG4gIGNvbnRhaW5zLFxuICAvLyBPbmx5IHVzZWQgYnkgRG9tVW5pdmVyc2UuIFJlbW92ZSAob3Igc2hvdWxkIFNlbGVjdG9ycy5pcyBtb3ZlIGhlcmU/KVxuICBpc1xufTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuY29uc3QgYmVmb3JlID0gKG1hcmtlcjogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+IHtcbiAgY29uc3QgcGFyZW50ID0gVHJhdmVyc2UucGFyZW50KG1hcmtlcik7XG4gIHBhcmVudC5lYWNoKCh2KSA9PiB7XG4gICAgdi5kb20uaW5zZXJ0QmVmb3JlKGVsZW1lbnQuZG9tLCBtYXJrZXIuZG9tKTtcbiAgfSk7XG59O1xuXG5jb25zdCBhZnRlciA9IChtYXJrZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IHNpYmxpbmcgPSBUcmF2ZXJzZS5uZXh0U2libGluZyhtYXJrZXIpO1xuICBzaWJsaW5nLmZvbGQoKCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IFRyYXZlcnNlLnBhcmVudChtYXJrZXIpO1xuICAgIHBhcmVudC5lYWNoKCh2KSA9PiB7XG4gICAgICBhcHBlbmQodiwgZWxlbWVudCk7XG4gICAgfSk7XG4gIH0sICh2KSA9PiB7XG4gICAgYmVmb3JlKHYsIGVsZW1lbnQpO1xuICB9KTtcbn07XG5cbmNvbnN0IHByZXBlbmQgPSAocGFyZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IHZvaWQgPT4ge1xuICBjb25zdCBmaXJzdENoaWxkID0gVHJhdmVyc2UuZmlyc3RDaGlsZChwYXJlbnQpO1xuICBmaXJzdENoaWxkLmZvbGQoKCkgPT4ge1xuICAgIGFwcGVuZChwYXJlbnQsIGVsZW1lbnQpO1xuICB9LCAodikgPT4ge1xuICAgIHBhcmVudC5kb20uaW5zZXJ0QmVmb3JlKGVsZW1lbnQuZG9tLCB2LmRvbSk7XG4gIH0pO1xufTtcblxuY29uc3QgYXBwZW5kID0gKHBhcmVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+IHtcbiAgcGFyZW50LmRvbS5hcHBlbmRDaGlsZChlbGVtZW50LmRvbSk7XG59O1xuXG5jb25zdCBhcHBlbmRBdCA9IChwYXJlbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIFRyYXZlcnNlLmNoaWxkKHBhcmVudCwgaW5kZXgpLmZvbGQoKCkgPT4ge1xuICAgIGFwcGVuZChwYXJlbnQsIGVsZW1lbnQpO1xuICB9LCAodikgPT4ge1xuICAgIGJlZm9yZSh2LCBlbGVtZW50KTtcbiAgfSk7XG59O1xuXG5jb25zdCB3cmFwID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgd3JhcHBlcjogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGJlZm9yZShlbGVtZW50LCB3cmFwcGVyKTtcbiAgYXBwZW5kKHdyYXBwZXIsIGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IHtcbiAgYmVmb3JlLFxuICBhZnRlcixcbiAgcHJlcGVuZCxcbiAgYXBwZW5kLFxuICBhcHBlbmRBdCxcbiAgd3JhcFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBJbnNlcnQgZnJvbSAnLi9JbnNlcnQnO1xuXG5jb25zdCBiZWZvcmUgPSAobWFya2VyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChlbGVtZW50cywgKHgpID0+IHtcbiAgICBJbnNlcnQuYmVmb3JlKG1hcmtlciwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgYWZ0ZXIgPSAobWFya2VyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChlbGVtZW50cywgKHgsIGkpID0+IHtcbiAgICBjb25zdCBlID0gaSA9PT0gMCA/IG1hcmtlciA6IGVsZW1lbnRzW2kgLSAxXTtcbiAgICBJbnNlcnQuYWZ0ZXIoZSwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgcHJlcGVuZCA9IChwYXJlbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudHM6IFN1Z2FyRWxlbWVudDxOb2RlPltdKTogdm9pZCA9PiB7XG4gIEFyci5lYWNoKGVsZW1lbnRzLnNsaWNlKCkucmV2ZXJzZSgpLCAoeCkgPT4ge1xuICAgIEluc2VydC5wcmVwZW5kKHBhcmVudCwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgYXBwZW5kID0gKHBhcmVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50czogU3VnYXJFbGVtZW50PE5vZGU+W10pOiB2b2lkID0+IHtcbiAgQXJyLmVhY2goZWxlbWVudHMsICh4KSA9PiB7XG4gICAgSW5zZXJ0LmFwcGVuZChwYXJlbnQsIHgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGJlZm9yZSxcbiAgYWZ0ZXIsXG4gIHByZXBlbmQsXG4gIGFwcGVuZFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuaW1wb3J0ICogYXMgSW5zZXJ0QWxsIGZyb20gJy4vSW5zZXJ0QWxsJztcblxuY29uc3QgZW1wdHkgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIC8vIHNob3J0Y3V0IFwiZW1wdHkgbm9kZVwiIHRyaWNrLiBSZXF1aXJlcyBJRSA5LlxuICBlbGVtZW50LmRvbS50ZXh0Q29udGVudCA9ICcnO1xuXG4gIC8vIElmIHRoZSBjb250ZW50cyB3YXMgYSBzaW5nbGUgZW1wdHkgdGV4dCBub2RlLCB0aGUgYWJvdmUgZG9lc24ndCByZW1vdmUgaXQuIEJ1dCwgaXQncyBzdGlsbCBmYXN0ZXIgaW4gZ2VuZXJhbFxuICAvLyB0aGFuIHJlbW92aW5nIGV2ZXJ5IGNoaWxkIG5vZGUgbWFudWFsbHkuXG4gIC8vIFRoZSBmb2xsb3dpbmcgaXMgKHByb2JhYmx5KSBzYWZlIGZvciBwZXJmb3JtYW5jZSBhcyA5OS45JSBvZiB0aGUgdGltZSB0aGUgdHJpY2sgd29ya3MgYW5kXG4gIC8vIFRyYXZlcnNlLmNoaWxkcmVuIHdpbGwgcmV0dXJuIGFuIGVtcHR5IGFycmF5LlxuICBBcnIuZWFjaChUcmF2ZXJzZS5jaGlsZHJlbihlbGVtZW50KSwgKHJvZ3VlKSA9PiB7XG4gICAgcmVtb3ZlKHJvZ3VlKTtcbiAgfSk7XG59O1xuXG5jb25zdCByZW1vdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBpZiAoZG9tLnBhcmVudE5vZGUgIT09IG51bGwpIHtcbiAgICBkb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb20pO1xuICB9XG59O1xuXG5jb25zdCB1bndyYXAgPSAod3JhcHBlcjogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4od3JhcHBlcik7XG4gIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgSW5zZXJ0QWxsLmFmdGVyKHdyYXBwZXIsIGNoaWxkcmVuKTtcbiAgfVxuICByZW1vdmUod3JhcHBlcik7XG59O1xuXG5leHBvcnQge1xuICBlbXB0eSxcbiAgcmVtb3ZlLFxuICB1bndyYXBcbn07XG4iLCJpbXBvcnQgdHlwZSB7IEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXAgfSBmcm9tICcuLi8uLi9hbGllbi9Eb21UeXBlcyc7XG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBBdHRyaWJ1dGUgZnJvbSAnLi4vcHJvcGVydGllcy9BdHRyaWJ1dGUnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuaW1wb3J0ICogYXMgSW5zZXJ0IGZyb20gJy4vSW5zZXJ0JztcbmltcG9ydCAqIGFzIEluc2VydEFsbCBmcm9tICcuL0luc2VydEFsbCc7XG5pbXBvcnQgKiBhcyBSZW1vdmUgZnJvbSAnLi9SZW1vdmUnO1xuXG5jb25zdCBjbG9uZSA9IDxFIGV4dGVuZHMgTm9kZT4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RT4sIGlzRGVlcDogYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxFPiA9PlxuICBTdWdhckVsZW1lbnQuZnJvbURvbShvcmlnaW5hbC5kb20uY2xvbmVOb2RlKGlzRGVlcCkgYXMgRSk7XG5cbi8qKiBTaGFsbG93IGNsb25lIC0ganVzdCB0aGUgdGFnLCBubyBjaGlsZHJlbiAqL1xuY29uc3Qgc2hhbGxvdyA9IDxFIGV4dGVuZHMgTm9kZT4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RT4pOiBTdWdhckVsZW1lbnQ8RT4gPT5cbiAgY2xvbmUob3JpZ2luYWwsIGZhbHNlKTtcblxuLyoqIERlZXAgY2xvbmUgLSBldmVyeXRoaW5nIGNvcGllZCBpbmNsdWRpbmcgY2hpbGRyZW4gKi9cbmNvbnN0IGRlZXAgPSA8RSBleHRlbmRzIE5vZGU+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEU+KTogU3VnYXJFbGVtZW50PEU+ID0+XG4gIGNsb25lKG9yaWdpbmFsLCB0cnVlKTtcblxuLyoqIFNoYWxsb3cgY2xvbmUsIHdpdGggYSBuZXcgdGFnICovXG5jb25zdCBzaGFsbG93QXMgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB0YWc6IEspOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcFtLXT4gPT4ge1xuICBjb25zdCBudSA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKHRhZyk7XG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IEF0dHJpYnV0ZS5jbG9uZShvcmlnaW5hbCk7XG4gIEF0dHJpYnV0ZS5zZXRBbGwobnUsIGF0dHJpYnV0ZXMpO1xuXG4gIHJldHVybiBudTtcbn07XG5cbi8qKiBEZWVwIGNsb25lLCB3aXRoIGEgbmV3IHRhZyAqL1xuY29uc3QgY29weSA9IDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcD4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHRhZzogSyk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwW0tdPiA9PiB7XG4gIGNvbnN0IG51ID0gc2hhbGxvd0FzKG9yaWdpbmFsLCB0YWcpO1xuXG4gIC8vIE5PVEVcbiAgLy8gcHJldmlvdXNseSB0aGlzIHVzZWQgc2VyaWFsaXNhdGlvbjpcbiAgLy8gbnUuZG9tLmlubmVySFRNTCA9IG9yaWdpbmFsLmRvbS5pbm5lckhUTUw7XG4gIC8vXG4gIC8vIENsb25lIHNob3VsZCBiZSBlcXVpdmFsZW50IChhbmQgZmFzdGVyKSwgYnV0IGlmIFREIDwtPiBUSCB0b2dnbGUgYnJlYWtzLCBwdXQgaXQgYmFjay5cblxuICBjb25zdCBjbG9uZUNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4oZGVlcChvcmlnaW5hbCkpO1xuICBJbnNlcnRBbGwuYXBwZW5kKG51LCBjbG9uZUNoaWxkcmVuKTtcblxuICByZXR1cm4gbnU7XG59O1xuXG4vKiogQ2hhbmdlIHRoZSB0YWcgbmFtZSwgYnV0IGtlZXAgYWxsIGNoaWxkcmVuICovXG5jb25zdCBtdXRhdGUgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB0YWc6IEspOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcFtLXT4gPT4ge1xuICBjb25zdCBudSA9IHNoYWxsb3dBcyhvcmlnaW5hbCwgdGFnKTtcblxuICBJbnNlcnQuYWZ0ZXIob3JpZ2luYWwsIG51KTtcbiAgY29uc3QgY2hpbGRyZW4gPSBUcmF2ZXJzZS5jaGlsZHJlbihvcmlnaW5hbCk7XG4gIEluc2VydEFsbC5hcHBlbmQobnUsIGNoaWxkcmVuKTtcbiAgUmVtb3ZlLnJlbW92ZShvcmlnaW5hbCk7XG4gIHJldHVybiBudTtcbn07XG5cbmV4cG9ydCB7XG4gIHNoYWxsb3csXG4gIHNoYWxsb3dBcyxcbiAgZGVlcCxcbiAgY29weSxcbiAgbXV0YXRlXG59O1xuIiwiY29uc3QgQVRUUklCVVRFID0gMjtcbmNvbnN0IENEQVRBX1NFQ1RJT04gPSA0O1xuY29uc3QgQ09NTUVOVCA9IDg7XG5jb25zdCBET0NVTUVOVCA9IDk7XG5jb25zdCBET0NVTUVOVF9UWVBFID0gMTA7XG5jb25zdCBET0NVTUVOVF9GUkFHTUVOVCA9IDExO1xuY29uc3QgRUxFTUVOVCA9IDE7XG5jb25zdCBURVhUID0gMztcbmNvbnN0IFBST0NFU1NJTkdfSU5TVFJVQ1RJT04gPSA3O1xuY29uc3QgRU5USVRZX1JFRkVSRU5DRSA9IDU7XG5jb25zdCBFTlRJVFkgPSA2O1xuY29uc3QgTk9UQVRJT04gPSAxMjtcblxuZXhwb3J0IHtcbiAgQVRUUklCVVRFLFxuICBDREFUQV9TRUNUSU9OLFxuICBDT01NRU5ULFxuICBET0NVTUVOVCxcbiAgRE9DVU1FTlRfVFlQRSxcbiAgRE9DVU1FTlRfRlJBR01FTlQsXG4gIEVMRU1FTlQsXG4gIFRFWFQsXG4gIFBST0NFU1NJTkdfSU5TVFJVQ1RJT04sXG4gIEVOVElUWV9SRUZFUkVOQ0UsXG4gIEVOVElUWSxcbiAgTk9UQVRJT05cbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi9TdWdhck5vZGUnO1xuaW1wb3J0IHsgZ2V0U2hhZG93SG9zdCwgZ2V0U2hhZG93Um9vdCB9IGZyb20gJy4vU3VnYXJTaGFkb3dEb20nO1xuXG4vLyBOb2RlLmNvbnRhaW5zKCkgaXMgdmVyeSwgdmVyeSwgdmVyeSBnb29kIHBlcmZvcm1hbmNlXG4vLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zZXN0LXZzLWNvbnRhaW5zLzVcbmNvbnN0IGluQm9keSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+IHtcbiAgLy8gVGVjaG5pY2FsbHkgdGhpcyBpcyBvbmx5IHJlcXVpcmVkIG9uIElFLCB3aGVyZSBjb250YWlucygpIHJldHVybnMgZmFsc2UgZm9yIHRleHQgbm9kZXMuXG4gIC8vIEJ1dCBpdCdzIGNoZWFwIGVub3VnaCB0byBydW4gZXZlcnl3aGVyZSBhbmQgU3VnYXIgZG9lc24ndCBoYXZlIHBsYXRmb3JtIGRldGVjdGlvbiAoeWV0KS5cbiAgY29uc3QgZG9tID0gU3VnYXJOb2RlLmlzVGV4dChlbGVtZW50KSA/IGVsZW1lbnQuZG9tLnBhcmVudE5vZGUgOiBlbGVtZW50LmRvbTtcblxuICAvLyB1c2Ugb3duZXJEb2N1bWVudC5ib2R5IHRvIGVuc3VyZSB0aGlzIHdvcmtzIGluc2lkZSBpZnJhbWVzLlxuICAvLyBOb3JtYWxseSBjb250YWlucyBpcyBiYWQgYmVjYXVzZSBhbiBlbGVtZW50IFwiY29udGFpbnNcIiBpdHNlbGYsIGJ1dCBoZXJlIHdlIHdhbnQgdGhhdC5cbiAgaWYgKGRvbSA9PT0gdW5kZWZpbmVkIHx8IGRvbSA9PT0gbnVsbCB8fCBkb20ub3duZXJEb2N1bWVudCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGRvYyA9IGRvbS5vd25lckRvY3VtZW50O1xuICByZXR1cm4gZ2V0U2hhZG93Um9vdChTdWdhckVsZW1lbnQuZnJvbURvbShkb20pKS5mb2xkKFxuICAgICgpID0+IGRvYy5ib2R5LmNvbnRhaW5zKGRvbSksXG4gICAgRnVuLmNvbXBvc2UxKGluQm9keSwgZ2V0U2hhZG93SG9zdClcbiAgKTtcbn07XG5cbmNvbnN0IGJvZHkgPSAoKTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiA9PlxuICBnZXRCb2R5KFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY3VtZW50KSk7XG5cbmNvbnN0IGdldEJvZHkgPSAoZG9jOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+KTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiA9PiB7XG4gIGNvbnN0IGIgPSBkb2MuZG9tLmJvZHk7XG4gIGlmIChiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQm9keSBpcyBub3QgYXZhaWxhYmxlIHlldCcpO1xuICB9XG4gIHJldHVybiBTdWdhckVsZW1lbnQuZnJvbURvbShiKTtcbn07XG5cbmV4cG9ydCB7XG4gIGJvZHksXG4gIGdldEJvZHksXG4gIGluQm9keVxufTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwIH0gZnJvbSAnLi4vLi4vYWxpZW4vRG9tVHlwZXMnO1xuXG5pbnRlcmZhY2UgU3VnYXJFbGVtZW50PFQgPSBhbnk+IHtcbiAgcmVhZG9ubHkgZG9tOiBUO1xufVxuXG5jb25zdCBmcm9tSHRtbCA9IDxFIGV4dGVuZHMgTm9kZSA9IE5vZGUgJiBDaGlsZE5vZGU+IChodG1sOiBzdHJpbmcsIHNjb3BlPzogRG9jdW1lbnQgfCBudWxsKTogU3VnYXJFbGVtZW50PEU+ID0+IHtcbiAgY29uc3QgZG9jID0gc2NvcGUgfHwgZG9jdW1lbnQ7XG4gIGNvbnN0IGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG4gIGlmICghZGl2Lmhhc0NoaWxkTm9kZXMoKSB8fCBkaXYuY2hpbGROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9ICdIVE1MIGRvZXMgbm90IGhhdmUgYSBzaW5nbGUgcm9vdCBub2RlJztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSwgaHRtbCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBmcm9tRG9tKGRpdi5jaGlsZE5vZGVzWzBdIGFzIHVua25vd24gYXMgRSk7XG59O1xuXG5jb25zdCBmcm9tVGFnOiB7XG4gIDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcD4odGFnOiBLLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwW0tdPjtcbiAgKHRhZzogc3RyaW5nLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD47XG59ID0gKHRhZzogc3RyaW5nLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4gPT4ge1xuICBjb25zdCBkb2MgPSBzY29wZSB8fCBkb2N1bWVudDtcbiAgY29uc3Qgbm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIHJldHVybiBmcm9tRG9tKG5vZGUpO1xufTtcblxuY29uc3QgZnJvbVRleHQgPSAodGV4dDogc3RyaW5nLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxUZXh0PiA9PiB7XG4gIGNvbnN0IGRvYyA9IHNjb3BlIHx8IGRvY3VtZW50O1xuICBjb25zdCBub2RlID0gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICByZXR1cm4gZnJvbURvbShub2RlKTtcbn07XG5cbmNvbnN0IGZyb21Eb20gPSA8VCBleHRlbmRzIE5vZGUgfCBXaW5kb3c+IChub2RlOiBUKTogU3VnYXJFbGVtZW50PFQ+ID0+IHtcbiAgLy8gVE9ETzogQ29uc2lkZXIgcmVtb3ZpbmcgdGhpcyBjaGVjaywgYnV0IGxlZnQgYXRtIGZvciBzYWZldHlcbiAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb2RlIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICB9XG4gIHJldHVybiB7XG4gICAgZG9tOiBub2RlXG4gIH07XG59O1xuXG5jb25zdCBmcm9tUG9pbnQgPSAoZG9jRWxtOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+LCB4OiBudW1iZXIsIHk6IG51bWJlcik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxFbGVtZW50Pj4gPT5cbiAgT3B0aW9uYWwuZnJvbShkb2NFbG0uZG9tLmVsZW1lbnRGcm9tUG9pbnQoeCwgeSkpLm1hcChmcm9tRG9tKTtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmNvbnN0IFN1Z2FyRWxlbWVudCA9IHtcbiAgZnJvbUh0bWwsXG4gIGZyb21UYWcsXG4gIGZyb21UZXh0LFxuICBmcm9tRG9tLFxuICBmcm9tUG9pbnRcbn07XG5cbmV4cG9ydCB7XG4gIFN1Z2FyRWxlbWVudFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcblxudHlwZSBFbGVtZW50VHVwbGU8VD4gPSB7IFtLIGluIGtleW9mIFRdOiBTdWdhckVsZW1lbnQ8VFtLXT4gfTtcblxuY29uc3QgZnJvbUh0bWwgPSA8VCBleHRlbmRzIE5vZGVbXT4gKGh0bWw6IHN0cmluZywgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBFbGVtZW50VHVwbGU8VD4gPT4ge1xuICBjb25zdCBkb2M6IERvY3VtZW50ID0gc2NvcGUgfHwgZG9jdW1lbnQ7XG4gIGNvbnN0IGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG4gIHJldHVybiBUcmF2ZXJzZS5jaGlsZHJlbihTdWdhckVsZW1lbnQuZnJvbURvbShkaXYpKSBhcyB1bmtub3duIGFzIEVsZW1lbnRUdXBsZTxUPjtcbn07XG5cbmNvbnN0IGZyb21UYWdzID0gKHRhZ3M6IHN0cmluZ1tdLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD5bXSA9PlxuICBBcnIubWFwKHRhZ3MsICh4KSA9PiBTdWdhckVsZW1lbnQuZnJvbVRhZyh4LCBzY29wZSkpO1xuXG5jb25zdCBmcm9tVGV4dCA9ICh0ZXh0czogc3RyaW5nW10sIHNjb3BlPzogRG9jdW1lbnQgfCBudWxsKTogU3VnYXJFbGVtZW50PFRleHQ+W10gPT5cbiAgQXJyLm1hcCh0ZXh0cywgKHgpID0+IFN1Z2FyRWxlbWVudC5mcm9tVGV4dCh4LCBzY29wZSkpO1xuXG5jb25zdCBmcm9tRG9tID0gPFQgZXh0ZW5kcyAoTm9kZSB8IFdpbmRvdyk+KG5vZGVzOiBBcnJheUxpa2U8VD4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICBBcnIubWFwKG5vZGVzLCBTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmV4cG9ydCB7IGZyb21IdG1sLCBmcm9tVGFncywgZnJvbVRleHQsIGZyb21Eb20gfTtcbiIsImltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcblxuZXhwb3J0IGNvbnN0IGhlYWQgPSAoKTogU3VnYXJFbGVtZW50PEhUTUxIZWFkRWxlbWVudD4gPT4gZ2V0SGVhZChTdWdhckVsZW1lbnQuZnJvbURvbShkb2N1bWVudCkpO1xuXG5leHBvcnQgY29uc3QgZ2V0SGVhZCA9IChkb2M6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pOiBTdWdhckVsZW1lbnQ8SFRNTEhlYWRFbGVtZW50PiA9PiB7XG4gIC8qXG4gICAqIElFOSBhbmQgYWJvdmUgcGVyXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9oZWFkXG4gICAqL1xuICBjb25zdCBiID0gZG9jLmRvbS5oZWFkO1xuICBpZiAoYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0hlYWQgaXMgbm90IGF2YWlsYWJsZSB5ZXQnKTtcbiAgfVxuICByZXR1cm4gU3VnYXJFbGVtZW50LmZyb21Eb20oYik7XG59O1xuIiwiaW1wb3J0IHsgU2FuZEhUTUxFbGVtZW50IH0gZnJvbSAnQGVwaG94L3NhbmQnO1xuXG5pbXBvcnQgdHlwZSB7IEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXAgfSBmcm9tICcuLi8uLi9hbGllbi9Eb21UeXBlcyc7XG5cbmltcG9ydCAqIGFzIE5vZGVUeXBlcyBmcm9tICcuL05vZGVUeXBlcyc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcblxuY29uc3QgbmFtZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBzdHJpbmcgPT4ge1xuICBjb25zdCByID0gZWxlbWVudC5kb20ubm9kZU5hbWU7XG4gIHJldHVybiByLnRvTG93ZXJDYXNlKCk7XG59O1xuXG5jb25zdCB0eXBlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IG51bWJlciA9PlxuICBlbGVtZW50LmRvbS5ub2RlVHlwZTtcblxuY29uc3QgdmFsdWUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogc3RyaW5nIHwgbnVsbCA9PlxuICBlbGVtZW50LmRvbS5ub2RlVmFsdWU7XG5cbmNvbnN0IGlzVHlwZSA9IDxFIGV4dGVuZHMgTm9kZT4gKHQ6IG51bWJlcikgPT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGVsZW1lbnQgaXMgU3VnYXJFbGVtZW50PEU+ID0+XG4gIHR5cGUoZWxlbWVudCkgPT09IHQ7XG5cbmNvbnN0IGlzQ29tbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBlbGVtZW50IGlzIFN1Z2FyRWxlbWVudDxDb21tZW50PiA9PlxuICB0eXBlKGVsZW1lbnQpID09PSBOb2RlVHlwZXMuQ09NTUVOVCB8fCBuYW1lKGVsZW1lbnQpID09PSAnI2NvbW1lbnQnO1xuXG5jb25zdCBpc0hUTUxFbGVtZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGVsZW1lbnQgaXMgU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiA9PlxuICBpc0VsZW1lbnQoZWxlbWVudCkgJiYgU2FuZEhUTUxFbGVtZW50LmlzUHJvdG90eXBlT2YoZWxlbWVudC5kb20pO1xuXG5jb25zdCBpc0VsZW1lbnQgPSBpc1R5cGU8RWxlbWVudD4oTm9kZVR5cGVzLkVMRU1FTlQpO1xuY29uc3QgaXNUZXh0ID0gaXNUeXBlPFRleHQ+KE5vZGVUeXBlcy5URVhUKTtcbmNvbnN0IGlzRG9jdW1lbnQgPSBpc1R5cGU8RG9jdW1lbnQ+KE5vZGVUeXBlcy5ET0NVTUVOVCk7XG5jb25zdCBpc0RvY3VtZW50RnJhZ21lbnQgPSBpc1R5cGU8RG9jdW1lbnRGcmFnbWVudD4oTm9kZVR5cGVzLkRPQ1VNRU5UX0ZSQUdNRU5UKTtcblxuY29uc3QgaXNUYWcgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+KHRhZzogSykgPT4gKGU6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGUgaXMgU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXBbS10+ID0+XG4gIGlzRWxlbWVudChlKSAmJiBuYW1lKGUpID09PSB0YWc7XG5cbmV4cG9ydCB7XG4gIG5hbWUsXG4gIHR5cGUsXG4gIHZhbHVlLFxuICBpc0VsZW1lbnQsXG4gIGlzSFRNTEVsZW1lbnQsXG4gIGlzVGV4dCxcbiAgaXNEb2N1bWVudCxcbiAgaXNEb2N1bWVudEZyYWdtZW50LFxuICBpc0NvbW1lbnQsXG4gIGlzVGFnXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcCB9IGZyb20gJy4uLy4uL2FsaWVuL0RvbVR5cGVzJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FySGVhZCBmcm9tICcuL1N1Z2FySGVhZCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi9TdWdhck5vZGUnO1xuXG5leHBvcnQgdHlwZSBSb290Tm9kZSA9IFN1Z2FyRWxlbWVudDxEb2N1bWVudCB8IFNoYWRvd1Jvb3Q+O1xuXG4vKipcbiAqIElzIHRoZSBlbGVtZW50IGEgU2hhZG93Um9vdD9cbiAqXG4gKiBOb3RlOiB0aGlzIGlzIGluc3VmZmljaWVudCB0byB0ZXN0IGlmIGFueSBlbGVtZW50IGlzIGEgc2hhZG93IHJvb3QsIGJ1dCBpdCBpcyBzdWZmaWNpZW50IHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlblxuICogYSBEb2N1bWVudCBhbmQgYSBTaGFkb3dSb290LlxuICovXG5leHBvcnQgY29uc3QgaXNTaGFkb3dSb290ID0gKGRvczogU3VnYXJFbGVtZW50PE5vZGU+KTogZG9zIGlzIFN1Z2FyRWxlbWVudDxTaGFkb3dSb290PiA9PlxuICBTdWdhck5vZGUuaXNEb2N1bWVudEZyYWdtZW50KGRvcykgJiYgVHlwZS5pc05vbk51bGxhYmxlKChkb3MuZG9tIGFzIFNoYWRvd1Jvb3QpLmhvc3QpO1xuXG5leHBvcnQgY29uc3QgZ2V0Um9vdE5vZGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFJvb3ROb2RlID0gKGUpID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGUuZG9tLmdldFJvb3ROb2RlKCkpIGFzIFJvb3ROb2RlO1xuXG4vKiogQ3JlYXRlIGFuIGVsZW1lbnQsIHVzaW5nIHRoZSBhY3R1YWwgZG9jdW1lbnQuICovXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudDoge1xuICA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+KGRvczogUm9vdE5vZGUsIHRhZzogSyk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwW0tdPjtcbiAgKGRvczogUm9vdE5vZGUsIHRhZzogc3RyaW5nKTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pjtcbn0gPSAoZG9zOiBSb290Tm9kZSwgdGFnOiBzdHJpbmcpID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tVGFnKHRhZywgVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGRvcykuZG9tKTtcblxuLyoqIFdoZXJlIHN0eWxlIHRhZ3MgbmVlZCB0byBnby4gU2hhZG93Um9vdCBvciBkb2N1bWVudCBoZWFkICovXG5leHBvcnQgY29uc3QgZ2V0U3R5bGVDb250YWluZXIgPSAoZG9zOiBSb290Tm9kZSk6IFN1Z2FyRWxlbWVudDxIVE1MSGVhZEVsZW1lbnQgfCBTaGFkb3dSb290PiA9PlxuICBpc1NoYWRvd1Jvb3QoZG9zKSA/IGRvcyA6IFN1Z2FySGVhZC5nZXRIZWFkKFRyYXZlcnNlLmRvY3VtZW50T3JPd25lcihkb3MpKTtcblxuLyoqIFdoZXJlIGNvbnRlbnQgbmVlZHMgdG8gZ28uIFNoYWRvd1Jvb3Qgb3IgZG9jdW1lbnQgYm9keSAqL1xuZXhwb3J0IGNvbnN0IGdldENvbnRlbnRDb250YWluZXIgPSAoZG9zOiBSb290Tm9kZSk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudCB8IFNoYWRvd1Jvb3Q+ID0+XG4gIC8vIENhbid0IHVzZSBTdWdhckJvZHkuYm9keSB3aXRob3V0IGNhdXNpbmcgYSBjaXJjdWxhciBtb2R1bGUgcmVmZXJlbmNlIChzaW5jZSBTdWdhckJvZHkuaW5Cb2R5IHVzZXMgU3VnYXJTaGFkb3dEb20pXG4gIGlzU2hhZG93Um9vdChkb3MpID8gZG9zIDogU3VnYXJFbGVtZW50LmZyb21Eb20oVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGRvcykuZG9tLmJvZHkpO1xuXG4vKiogSXMgdGhpcyBlbGVtZW50IGVpdGhlciBhIFNoYWRvd1Jvb3Qgb3IgYSBkZXNjZW5kZW50IG9mIGEgU2hhZG93Um9vdC4gKi9cbmV4cG9ydCBjb25zdCBpc0luU2hhZG93Um9vdCA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+XG4gIGdldFNoYWRvd1Jvb3QoZSkuaXNTb21lKCk7XG5cbi8qKiBJZiB0aGlzIGVsZW1lbnQgaXMgaW4gYSBTaGFkb3dSb290LCByZXR1cm4gaXQuICovXG5leHBvcnQgY29uc3QgZ2V0U2hhZG93Um9vdCA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8U2hhZG93Um9vdD4+ID0+IHtcbiAgY29uc3QgciA9IGdldFJvb3ROb2RlKGUpO1xuICByZXR1cm4gaXNTaGFkb3dSb290KHIpID8gT3B0aW9uYWwuc29tZShyKSA6IE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbi8qKiBSZXR1cm4gdGhlIGhvc3Qgb2YgYSBTaGFkb3dSb290LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBpZiBTaGFkb3cgRE9NIGlzIHVuc3VwcG9ydGVkIGluIHRoZSBicm93c2VyLCBvciBpZiB0aGUgaG9zdCBpcyBudWxsLlxuICogSWYgeW91IGFjdHVhbGx5IGhhdmUgYSBTaGFkb3dSb290LCB0aGlzIHNob3VsZG4ndCBoYXBwZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTaGFkb3dIb3N0ID0gKGU6IFN1Z2FyRWxlbWVudDxTaGFkb3dSb290Pik6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiA9PlxuICBTdWdhckVsZW1lbnQuZnJvbURvbShlLmRvbS5ob3N0KTtcblxuLyoqXG4gKiBXaGVuIEV2ZW50cyBidWJibGUgdXAgdGhyb3VnaCBhIFNoYWRvd1Jvb3QsIHRoZSBicm93c2VyIGNoYW5nZXMgdGhlIHRhcmdldCB0byBiZSB0aGUgc2hhZG93IGhvc3QuXG4gKiBUaGlzIGZ1bmN0aW9uIGdldHMgdGhlIFwib3JpZ2luYWxcIiBldmVudCB0YXJnZXQgaWYgcG9zc2libGUuXG4gKiBUaGlzIG9ubHkgd29ya3MgaWYgdGhlIHNoYWRvdyB0cmVlIGlzIG9wZW4gLSBpZiB0aGUgc2hhZG93IHRyZWUgaXMgY2xvc2VkLCBldmVudC50YXJnZXQgaXMgcmV0dXJuZWQuXG4gKiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi9mdW5kYW1lbnRhbHMvd2ViLWNvbXBvbmVudHMvc2hhZG93ZG9tI2V2ZW50c1xuICovXG5leHBvcnQgY29uc3QgZ2V0T3JpZ2luYWxFdmVudFRhcmdldCA9IChldmVudDogRXZlbnQpOiBPcHRpb25hbDxFdmVudFRhcmdldD4gPT4ge1xuICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKGV2ZW50LnRhcmdldCkpIHtcbiAgICBjb25zdCBlbCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKGV2ZW50LnRhcmdldCBhcyBOb2RlKTtcbiAgICBpZiAoU3VnYXJOb2RlLmlzRWxlbWVudChlbCkgJiYgaXNPcGVuU2hhZG93SG9zdChlbCkpIHtcbiAgICAgIC8vIFdoZW4gdGFyZ2V0IGVsZW1lbnQgaXMgaW5zaWRlIFNoYWRvdyBET00gd2UgbmVlZCB0byB0YWtlIGZpcnN0IGVsZW1lbnQgZnJvbSBjb21wb3NlZFBhdGhcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSdsbCBnZXQgU2hhZG93IFJvb3QgcGFyZW50LCBub3QgYWN0dWFsIHRhcmdldCBlbGVtZW50LlxuICAgICAgaWYgKGV2ZW50LmNvbXBvc2VkICYmIGV2ZW50LmNvbXBvc2VkUGF0aCkge1xuICAgICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgaWYgKGNvbXBvc2VkUGF0aCkge1xuICAgICAgICAgIHJldHVybiBBcnIuaGVhZChjb21wb3NlZFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5mcm9tKGV2ZW50LnRhcmdldCk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNPcGVuU2hhZG93Um9vdCA9IChzcjogU3VnYXJFbGVtZW50PFNoYWRvd1Jvb3Q+KTogYm9vbGVhbiA9PlxuICBzci5kb20ubW9kZSA9PT0gJ29wZW4nO1xuXG5leHBvcnQgY29uc3QgaXNDbG9zZWRTaGFkb3dSb290ID0gKHNyOiBTdWdhckVsZW1lbnQ8U2hhZG93Um9vdD4pOiBib29sZWFuID0+XG4gIHNyLmRvbS5tb2RlID09PSAnY2xvc2VkJztcblxuLyoqIFJldHVybiB0cnVlIGlmIHRoZSBlbGVtZW50IGlzIGEgaG9zdCBvZiBhbiBvcGVuIHNoYWRvdyByb290LlxuICogIFJldHVybiBmYWxzZSBpZiB0aGUgZWxlbWVudCBpcyBhIGhvc3Qgb2YgYSBjbG9zZWQgc2hhZG93IHJvb3QsIG9yIGlmIHRoZSBlbGVtZW50IGlzIG5vdCBhIGhvc3QuXG4gKi9cbmV4cG9ydCBjb25zdCBpc09wZW5TaGFkb3dIb3N0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IGJvb2xlYW4gPT5cbiAgVHlwZS5pc05vbk51bGxhYmxlKGVsZW1lbnQuZG9tLnNoYWRvd1Jvb3QpO1xuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IE5vZGVWYWx1ZSB9IGZyb20gJy4uLy4uL2ltcGwvTm9kZVZhbHVlJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi9TdWdhck5vZGUnO1xuXG5jb25zdCBhcGkgPSBOb2RlVmFsdWUoU3VnYXJOb2RlLmlzVGV4dCwgJ3RleHQnKTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUZXh0Pik6IHN0cmluZyA9PlxuICBhcGkuZ2V0KGVsZW1lbnQpO1xuXG5jb25zdCBnZXRPcHRpb24gPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8c3RyaW5nPiA9PlxuICBhcGkuZ2V0T3B0aW9uKGVsZW1lbnQpO1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PFRleHQ+LCB2YWx1ZTogc3RyaW5nKTogdm9pZCA9PlxuICBhcGkuc2V0KGVsZW1lbnQsIHZhbHVlKTtcblxuZXhwb3J0IHtcbiAgZ2V0LFxuICBnZXRPcHRpb24sXG4gIHNldFxufTtcbiIsImltcG9ydCB7IEFyciwgT2JqLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgU3VnYXJOb2RlIGZyb20gJy4uL25vZGUvU3VnYXJOb2RlJztcblxuY29uc3QgcmF3U2V0ID0gKGRvbTogRWxlbWVudCwga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyKTogdm9pZCA9PiB7XG4gIC8qXG4gICAqIEpRdWVyeSBjb2VyY2VkIGV2ZXJ5dGhpbmcgdG8gYSBzdHJpbmcsIGFuZCBzaWxlbnRseSBkaWQgbm90aGluZyBvbiB0ZXh0IG5vZGUvbnVsbC91bmRlZmluZWQuXG4gICAqXG4gICAqIFdlIGZhaWwgb24gdGhvc2UgaW52YWxpZCBjYXNlcywgb25seSBhbGxvd2luZyBudW1iZXJzIGFuZCBib29sZWFucy5cbiAgICovXG4gIGlmIChUeXBlLmlzU3RyaW5nKHZhbHVlKSB8fCBUeXBlLmlzQm9vbGVhbih2YWx1ZSkgfHwgVHlwZS5pc051bWJlcih2YWx1ZSkpIHtcbiAgICBkb20uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUgKyAnJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGNhbGwgdG8gQXR0cmlidXRlLnNldC4gS2V5ICcsIGtleSwgJzo6IFZhbHVlICcsIHZhbHVlLCAnOjogRWxlbWVudCAnLCBkb20pO1xuICAgIHRocm93IG5ldyBFcnJvcignQXR0cmlidXRlIHZhbHVlIHdhcyBub3Qgc2ltcGxlJyk7XG4gIH1cbn07XG5cbmNvbnN0IHNldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlcik6IHZvaWQgPT4ge1xuICByYXdTZXQoZWxlbWVudC5kb20sIGtleSwgdmFsdWUpO1xufTtcblxuY29uc3Qgc2V0QWxsID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgYXR0cnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXI+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBPYmouZWFjaChhdHRycywgKHYsIGspID0+IHtcbiAgICByYXdTZXQoZG9tLCBrLCB2KTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZXRPcHRpb25zID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgYXR0cnM6IFJlY29yZDxzdHJpbmcsIE9wdGlvbmFsPHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXI+Pik6IHZvaWQgPT4ge1xuICBPYmouZWFjaChhdHRycywgKHYsIGspID0+IHtcbiAgICB2LmZvbGQoKCkgPT4ge1xuICAgICAgcmVtb3ZlKGVsZW1lbnQsIGspO1xuICAgIH0sICh2YWx1ZSkgPT4ge1xuICAgICAgcmF3U2V0KGVsZW1lbnQuZG9tLCBrLCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Piwga2V5OiBzdHJpbmcpOiB1bmRlZmluZWQgfCBzdHJpbmcgPT4ge1xuICBjb25zdCB2ID0gZWxlbWVudC5kb20uZ2V0QXR0cmlidXRlKGtleSk7XG5cbiAgLy8gdW5kZWZpbmVkIGlzIHRoZSBtb3JlIGFwcHJvcHJpYXRlIHZhbHVlIGZvciBKUywgYW5kIHRoaXMgbWF0Y2hlcyBKUXVlcnlcbiAgcmV0dXJuIHYgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2O1xufTtcblxuY29uc3QgZ2V0T3B0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Piwga2V5OiBzdHJpbmcpOiBPcHRpb25hbDxzdHJpbmc+ID0+XG4gIE9wdGlvbmFsLmZyb20oZ2V0KGVsZW1lbnQsIGtleSkpO1xuXG5jb25zdCBoYXMgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcblxuICAvLyByZXR1cm4gZmFsc2UgZm9yIG5vbi1lbGVtZW50IG5vZGVzLCBubyBwb2ludCBpbiB0aHJvd2luZyBhbiBlcnJvclxuICByZXR1cm4gZG9tICYmIChkb20gYXMgRWxlbWVudCkuaGFzQXR0cmlidXRlID8gKGRvbSBhcyBFbGVtZW50KS5oYXNBdHRyaWJ1dGUoa2V5KSA6IGZhbHNlO1xufTtcblxuY29uc3QgcmVtb3ZlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Piwga2V5OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgZWxlbWVudC5kb20ucmVtb3ZlQXR0cmlidXRlKGtleSk7XG59O1xuXG5jb25zdCBoYXNOb25lID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBhdHRycyA9IChlbGVtZW50LmRvbSBhcyBFbGVtZW50KS5hdHRyaWJ1dGVzO1xuICByZXR1cm4gYXR0cnMgPT09IHVuZGVmaW5lZCB8fCBhdHRycyA9PT0gbnVsbCB8fCBhdHRycy5sZW5ndGggPT09IDA7XG59O1xuXG5jb25zdCBjbG9uZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+XG4gIEFyci5mb2xkbChlbGVtZW50LmRvbS5hdHRyaWJ1dGVzLCAoYWNjLCBhdHRyKSA9PiB7XG4gICAgYWNjW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xuXG5jb25zdCB0cmFuc2Zlck9uZSA9IChzb3VyY2U6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgZGVzdGluYXRpb246IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgYXR0cjogc3RyaW5nKTogdm9pZCA9PiB7XG4gIC8vIE5PVEU6IFdlIGRvbid0IHdhbnQgdG8gY2xvYmJlciBhbnkgZXhpc3RpbmcgYXR0cmlidXRlc1xuICBpZiAoIWhhcyhkZXN0aW5hdGlvbiwgYXR0cikpIHtcbiAgICBnZXRPcHQoc291cmNlLCBhdHRyKS5lYWNoKChzcmNWYWx1ZSkgPT4gc2V0KGRlc3RpbmF0aW9uLCBhdHRyLCBzcmNWYWx1ZSkpO1xuICB9XG59O1xuXG4vLyBUcmFuc2ZlciBhdHRyaWJ1dGVzKGF0dHJzKSBmcm9tIHNvdXJjZSB0byBkZXN0aW5hdGlvbiwgdW5sZXNzIHRoZXkgYXJlIGFscmVhZHkgcHJlc2VudFxuY29uc3QgdHJhbnNmZXIgPSAoc291cmNlOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGRlc3RpbmF0aW9uOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGF0dHJzOiBzdHJpbmdbXSk6IHZvaWQgPT4ge1xuICBpZiAoIVN1Z2FyTm9kZS5pc0VsZW1lbnQoc291cmNlKSB8fCAhU3VnYXJOb2RlLmlzRWxlbWVudChkZXN0aW5hdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgQXJyLmVhY2goYXR0cnMsIChhdHRyKSA9PiB7XG4gICAgdHJhbnNmZXJPbmUoc291cmNlLCBkZXN0aW5hdGlvbiwgYXR0cik7XG4gIH0pO1xufTtcblxuZXhwb3J0IHsgY2xvbmUsIHNldCwgc2V0QWxsLCBzZXRPcHRpb25zLCBnZXQsIGdldE9wdCwgaGFzLCByZW1vdmUsIGhhc05vbmUsIHRyYW5zZmVyIH07XG4iLCJpbXBvcnQgeyBGdW4sIHR5cGUgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBTdWdhckJvZHkgZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTZWxlY3RvckZpbmQgZnJvbSAnLi4vc2VhcmNoL1NlbGVjdG9yRmluZCc7XG5cbmNvbnN0IGNsb3Nlc3QgPSAodGFyZ2V0OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+PiA9PlxuICBTZWxlY3RvckZpbmQuY2xvc2VzdCh0YXJnZXQsICdbY29udGVudGVkaXRhYmxlXScpO1xuXG5jb25zdCBpc0VkaXRhYmxlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGFzc3VtZUVkaXRhYmxlOiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuID0+IHtcbiAgaWYgKFN1Z2FyQm9keS5pbkJvZHkoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gZWxlbWVudC5kb20uaXNDb250ZW50RWRpdGFibGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gRmluZCB0aGUgY2xvc2VzdCBjb250ZW50ZWRpdGFibGUgZWxlbWVudCBhbmQgY2hlY2sgaWYgaXQncyBlZGl0YWJsZVxuICAgIHJldHVybiBjbG9zZXN0KGVsZW1lbnQpLmZvbGQoXG4gICAgICBGdW4uY29uc3RhbnQoYXNzdW1lRWRpdGFibGUpLFxuICAgICAgKGVkaXRhYmxlKSA9PiBnZXRSYXcoZWRpdGFibGUpID09PSAndHJ1ZSdcbiAgICApO1xuICB9XG59O1xuXG5jb25zdCBnZXRSYXcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IHN0cmluZyA9PlxuICBlbGVtZW50LmRvbS5jb250ZW50RWRpdGFibGU7XG5cbmNvbnN0IGdldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogYm9vbGVhbiA9PlxuICBpc0VkaXRhYmxlKGVsZW1lbnQsIGZhbHNlKTtcblxuY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGVkaXRhYmxlOiBib29sZWFuKTogdm9pZCA9PiB7XG4gIGVsZW1lbnQuZG9tLmNvbnRlbnRFZGl0YWJsZSA9IGVkaXRhYmxlID8gJ3RydWUnIDogJ2ZhbHNlJztcbn07XG5cbmV4cG9ydCB7XG4gIGdldCxcbiAgZ2V0UmF3LFxuICBjbG9zZXN0LFxuICBpc0VkaXRhYmxlLFxuICBzZXRcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9iaiwgT3B0aW9uYWwsIE9wdGlvbmFscywgU3RyaW5ncywgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIFN0eWxlIGZyb20gJy4uLy4uL2ltcGwvU3R5bGUnO1xuaW1wb3J0ICogYXMgU3VnYXJCb2R5IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyTm9kZSBmcm9tICcuLi9ub2RlL1N1Z2FyTm9kZSc7XG5cbmltcG9ydCAqIGFzIEF0dHJpYnV0ZSBmcm9tICcuL0F0dHJpYnV0ZSc7XG5cbmNvbnN0IGludGVybmFsU2V0ID0gKGRvbTogTm9kZSwgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAvLyBUaGlzIGlzIGdvaW5nIHRvIGh1cnQuIEFwb2xvZ2llcy5cbiAgLy8gSlF1ZXJ5IGNvZXJjZXMgbnVtYmVycyB0byBwaXhlbHMgZm9yIGNlcnRhaW4gcHJvcGVydHkgbmFtZXMsIGFuZCBvdGhlciB0aW1lcyBsZXRzIG51bWJlcnMgdGhyb3VnaC5cbiAgLy8gd2UncmUgZ29pbmcgdG8gYmUgZXhwbGljaXQ7IHN0cmluZ3Mgb25seS5cbiAgaWYgKCFUeXBlLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjYWxsIHRvIENTUy5zZXQuIFByb3BlcnR5ICcsIHByb3BlcnR5LCAnOjogVmFsdWUgJywgdmFsdWUsICc6OiBFbGVtZW50ICcsIGRvbSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDU1MgdmFsdWUgbXVzdCBiZSBhIHN0cmluZzogJyArIHZhbHVlKTtcbiAgfVxuXG4gIC8vIHJlbW92ZWQ6IHN1cHBvcnQgZm9yIGRvbSgpLnN0eWxlW3Byb3BlcnR5XSB3aGVyZSBwcm9wIGlzIGNhbWVsIGNhc2UgaW5zdGVhZCBvZiBub3JtYWwgcHJvcGVydHkgbmFtZVxuICBpZiAoU3R5bGUuaXNTdXBwb3J0ZWQoZG9tKSkge1xuICAgIGRvbS5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICB9XG59O1xuXG5jb25zdCBpbnRlcm5hbFJlbW92ZSA9IChkb206IE5vZGUsIHByb3BlcnR5OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgLypcbiAgICogSUU5IGFuZCBhYm92ZSAtIE1ETiBkb2Vzbid0IGhhdmUgZGV0YWlscywgYnV0IGhlcmUncyBhIGNvdXBsZSBvZiByYW5kb20gaW50ZXJuZXQgY2xhaW1zXG4gICAqXG4gICAqIGh0dHA6Ly9oZWxwLmRvdHRvcm8uY29tL2xqb3BzamNrLnBocFxuICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS83OTAxODg2Lzc1NDZcbiAgICovXG4gIGlmIChTdHlsZS5pc1N1cHBvcnRlZChkb20pKSB7XG4gICAgZG9tLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3BlcnR5KTtcbiAgfVxufTtcblxuY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgaW50ZXJuYWxTZXQoZG9tLCBwcm9wZXJ0eSwgdmFsdWUpO1xufTtcblxuY29uc3Qgc2V0QWxsID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgY3NzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuXG4gIE9iai5lYWNoKGNzcywgKHYsIGspID0+IHtcbiAgICBpbnRlcm5hbFNldChkb20sIGssIHYpO1xuICB9KTtcbn07XG5cbmNvbnN0IHNldE9wdGlvbnMgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBjc3M6IFJlY29yZDxzdHJpbmcsIE9wdGlvbmFsPHN0cmluZz4+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuXG4gIE9iai5lYWNoKGNzcywgKHYsIGspID0+IHtcbiAgICB2LmZvbGQoKCkgPT4ge1xuICAgICAgaW50ZXJuYWxSZW1vdmUoZG9tLCBrKTtcbiAgICB9LCAodmFsdWUpID0+IHtcbiAgICAgIGludGVybmFsU2V0KGRvbSwgaywgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qXG4gKiBOT1RFOiBGb3IgY2VydGFpbiBwcm9wZXJ0aWVzLCB0aGlzIHJldHVybnMgdGhlIFwidXNlZCB2YWx1ZVwiIHdoaWNoIGlzIHN1YnRseSBkaWZmZXJlbnQgdG8gdGhlIFwiY29tcHV0ZWQgdmFsdWVcIiAoZGVzcGl0ZSBjYWxsaW5nIGdldENvbXB1dGVkU3R5bGUpLlxuICogQmxhbWUgQ1NTIDIuMC5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvdXNlZF92YWx1ZVxuICovXG5jb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBwcm9wZXJ0eTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG4gIC8qXG4gICAqIElFOSBhbmQgYWJvdmUgcGVyXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS93aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZVxuICAgKlxuICAgKiBOb3QgaW4gbnVtZXJvc2l0eSwgYmVjYXVzZSBpdCBkb2Vzbid0IG1lbW9pemUgYW5kIGxvb2tpbmcgdGhpcyB1cCBkeW5hbWljYWxseSBpbiBwZXJmb3JtYW5jZSBjcml0aWNhbCBjb2RlIHdvdWxkIGJlIGhvcnJlbmRvdXMuXG4gICAqXG4gICAqIEpRdWVyeSBoYXMgc29tZSBtYWdpYyBoZXJlIGZvciBJRSBwb3B1cHMsIGJ1dCB3ZSBkb24ndCByZWFsbHkgbmVlZCB0aGF0LlxuICAgKiBJdCBhbHNvIHVzZXMgZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHRvIGhhbmRsZSBpZnJhbWVzIGJ1dCB0aGF0IGhhc24ndCBiZWVuIHJlcXVpcmVkIHNpbmNlIEZGIDMuNi5cbiAgICovXG4gIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbSk7XG4gIGNvbnN0IHIgPSBzdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZShwcm9wZXJ0eSk7XG5cbiAgLy8ganF1ZXJ5LWlzbTogSWYgciBpcyBhbiBlbXB0eSBzdHJpbmcsIGNoZWNrIHRoYXQgdGhlIGVsZW1lbnQgaXMgbm90IGluIGEgZG9jdW1lbnQuIElmIGl0IGlzbid0LCByZXR1cm4gdGhlIHJhdyB2YWx1ZS5cbiAgLy8gVHVybnMgb3V0IHdlIGRvIHRoaXMgYSBsb3QuXG4gIHJldHVybiAociA9PT0gJycgJiYgIVN1Z2FyQm9keS5pbkJvZHkoZWxlbWVudCkpID8gZ2V0VW5zYWZlUHJvcGVydHkoZG9tLCBwcm9wZXJ0eSkgOiByO1xufTtcblxuLy8gcmVtb3ZlZDogc3VwcG9ydCBmb3IgZG9tKCkuc3R5bGVbcHJvcGVydHldIHdoZXJlIHByb3AgaXMgY2FtZWwgY2FzZSBpbnN0ZWFkIG9mIG5vcm1hbCBwcm9wZXJ0eSBuYW1lXG4vLyBlbXB0eSBzdHJpbmcgaXMgd2hhdCB0aGUgYnJvd3NlcnMgKElFMTEgYW5kIENocm9tZSkgcmV0dXJuIHdoZW4gdGhlIHByb3BlcnR5VmFsdWUgZG9lc24ndCBleGlzdHMuXG5jb25zdCBnZXRVbnNhZmVQcm9wZXJ0eSA9IChkb206IE5vZGUsIHByb3BlcnR5OiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgU3R5bGUuaXNTdXBwb3J0ZWQoZG9tKSA/IGRvbS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KSA6ICcnO1xuXG4vKlxuICogR2V0cyB0aGUgcmF3IHZhbHVlIGZyb20gdGhlIHN0eWxlIGF0dHJpYnV0ZS4gVXNlZnVsIGZvciByZXRyaWV2aW5nIFwidXNlZCB2YWx1ZXNcIiBmcm9tIHRoZSBET006XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvdXNlZF92YWx1ZVxuICpcbiAqIFJldHVybnMgTk9ORSBpZiB0aGUgcHJvcGVydHkgaXNuJ3Qgc2V0LCBvciB0aGUgdmFsdWUgaXMgYW4gZW1wdHkgc3RyaW5nLlxuICovXG5jb25zdCBnZXRSYXcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBwcm9wZXJ0eTogc3RyaW5nKTogT3B0aW9uYWw8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBjb25zdCByYXcgPSBnZXRVbnNhZmVQcm9wZXJ0eShkb20sIHByb3BlcnR5KTtcblxuICByZXR1cm4gT3B0aW9uYWwuZnJvbShyYXcpLmZpbHRlcigocikgPT4gci5sZW5ndGggPiAwKTtcbn07XG5cbmNvbnN0IGdldEFsbFJhdyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgY29uc3QgY3NzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuXG4gIGlmIChTdHlsZS5pc1N1cHBvcnRlZChkb20pKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb20uc3R5bGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJ1bGVOYW1lID0gZG9tLnN0eWxlLml0ZW0oaSkgYXMga2V5b2YgQ1NTU3R5bGVEZWNsYXJhdGlvbjtcbiAgICAgIGNzc1tydWxlTmFtZV0gPSBkb20uc3R5bGVbcnVsZU5hbWVdIGFzIHN0cmluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNzcztcbn07XG5cbmNvbnN0IGlzVmFsaWRWYWx1ZSA9ICh0YWc6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBlbGVtZW50ID0gU3VnYXJFbGVtZW50LmZyb21UYWcodGFnKTtcbiAgc2V0KGVsZW1lbnQsIHByb3BlcnR5LCB2YWx1ZSk7XG4gIGNvbnN0IHN0eWxlID0gZ2V0UmF3KGVsZW1lbnQsIHByb3BlcnR5KTtcbiAgcmV0dXJuIHN0eWxlLmlzU29tZSgpO1xufTtcblxuY29uc3QgcmVtb3ZlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJvcGVydHk6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcblxuICBpbnRlcm5hbFJlbW92ZShkb20sIHByb3BlcnR5KTtcblxuICBpZiAoT3B0aW9uYWxzLmlzKEF0dHJpYnV0ZS5nZXRPcHQoZWxlbWVudCBhcyBTdWdhckVsZW1lbnQ8RWxlbWVudD4sICdzdHlsZScpLm1hcChTdHJpbmdzLnRyaW0pLCAnJykpIHtcbiAgICAvLyBObyBtb3JlIHN0eWxlcyBsZWZ0LCByZW1vdmUgdGhlIHN0eWxlIGF0dHJpYnV0ZSBhcyB3ZWxsXG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50IGFzIFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgJ3N0eWxlJyk7XG4gIH1cbn07XG5cbmNvbnN0IHByZXNlcnZlID0gPEUgZXh0ZW5kcyBFbGVtZW50LCBUPiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEU+LCBmOiAoZTogU3VnYXJFbGVtZW50PEU+KSA9PiBUKTogVCA9PiB7XG4gIGNvbnN0IG9sZFN0eWxlcyA9IEF0dHJpYnV0ZS5nZXQoZWxlbWVudCwgJ3N0eWxlJyk7XG4gIGNvbnN0IHJlc3VsdCA9IGYoZWxlbWVudCk7XG4gIGlmIChvbGRTdHlsZXMgPT09IHVuZGVmaW5lZCkge1xuICAgIEF0dHJpYnV0ZS5yZW1vdmUoZWxlbWVudCwgJ3N0eWxlJyk7XG4gIH0gZWxzZSB7XG4gICAgQXR0cmlidXRlLnNldChlbGVtZW50LCAnc3R5bGUnLCBvbGRTdHlsZXMpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5jb25zdCBjb3B5ID0gKHNvdXJjZTogU3VnYXJFbGVtZW50PE5vZGU+LCB0YXJnZXQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgY29uc3Qgc291cmNlRG9tID0gc291cmNlLmRvbTtcbiAgY29uc3QgdGFyZ2V0RG9tID0gdGFyZ2V0LmRvbTtcbiAgaWYgKFN0eWxlLmlzU3VwcG9ydGVkKHNvdXJjZURvbSkgJiYgU3R5bGUuaXNTdXBwb3J0ZWQodGFyZ2V0RG9tKSkge1xuICAgIHRhcmdldERvbS5zdHlsZS5jc3NUZXh0ID0gc291cmNlRG9tLnN0eWxlLmNzc1RleHQ7XG4gIH1cbn07XG5cbi8qIE5PVEU6IFRoaXMgZnVuY3Rpb24gaXMgaGVyZSBmb3IgdGhlIHNpZGUgZWZmZWN0IGl0IHRyaWdnZXJzLlxuVGhlIHZhbHVlIGl0c2VsZiBpcyBub3QgdXNlZC5cbkJlIHN1cmUgdG8gbm90IHVzZSB0aGUgcmV0dXJuIHZhbHVlLCBhbmQgdGhhdCBpdCBpcyBub3QgcmVtb3ZlZCBieSBhIG1pbmlmaWVyLlxuICovXG5jb25zdCByZWZsb3cgPSAoZTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IHZvaWQgPT5cbiAgZS5kb20ub2Zmc2V0V2lkdGggYXMgdW5rbm93biBhcyB2b2lkO1xuXG5jb25zdCB0cmFuc2Zlck9uZSA9IChzb3VyY2U6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZGVzdGluYXRpb246IFN1Z2FyRWxlbWVudDxOb2RlPiwgc3R5bGU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBnZXRSYXcoc291cmNlLCBzdHlsZSkuZWFjaCgodmFsdWUpID0+IHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB3YW50IHRvIGNsb2JiZXIgYW55IGV4aXN0aW5nIGlubGluZSBzdHlsZXMuXG4gICAgaWYgKGdldFJhdyhkZXN0aW5hdGlvbiwgc3R5bGUpLmlzTm9uZSgpKSB7XG4gICAgICBzZXQoZGVzdGluYXRpb24sIHN0eWxlLCB2YWx1ZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHRyYW5zZmVyID0gKHNvdXJjZTogU3VnYXJFbGVtZW50PE5vZGU+LCBkZXN0aW5hdGlvbjogU3VnYXJFbGVtZW50PE5vZGU+LCBzdHlsZXM6IHN0cmluZ1tdKTogdm9pZCA9PiB7XG4gIGlmICghU3VnYXJOb2RlLmlzRWxlbWVudChzb3VyY2UpIHx8ICFTdWdhck5vZGUuaXNFbGVtZW50KGRlc3RpbmF0aW9uKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBBcnIuZWFjaChzdHlsZXMsIChzdHlsZSkgPT4ge1xuICAgIHRyYW5zZmVyT25lKHNvdXJjZSwgZGVzdGluYXRpb24sIHN0eWxlKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyBjb3B5LCBzZXQsIHByZXNlcnZlLCBzZXRBbGwsIHNldE9wdGlvbnMsIHJlbW92ZSwgZ2V0LCBnZXRSYXcsIGdldEFsbFJhdywgaXNWYWxpZFZhbHVlLCByZWZsb3csIHRyYW5zZmVyIH07XG4iLCJpbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgQ3NzIGZyb20gJy4vQ3NzJztcblxuY29uc3Qgb25EaXJlY3Rpb24gPSA8VCA9IGFueT4gKGlzTHRyOiBULCBpc1J0bDogVCkgPT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IFQgPT5cbiAgZ2V0RGlyZWN0aW9uKGVsZW1lbnQpID09PSAncnRsJyA/IGlzUnRsIDogaXNMdHI7XG5cbmNvbnN0IGdldERpcmVjdGlvbiA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pOiAncnRsJyB8ICdsdHInID0+XG4gIENzcy5nZXQoZWxlbWVudCwgJ2RpcmVjdGlvbicpID09PSAncnRsJyA/ICdydGwnIDogJ2x0cic7XG5cbmV4cG9ydCB7XG4gIG9uRGlyZWN0aW9uLFxuICBnZXREaXJlY3Rpb25cbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBTdWdhckJvZHkgZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4vVHJhdmVyc2UnO1xuXG4vLyBtYXliZSBUcmF2ZXJzZVdpdGgsIHNpbWlsYXIgdG8gdHJhdmVyc2UgYnV0IHdpdGggYSBwcmVkaWNhdGU/XG5cbmNvbnN0IGFsbDoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPihwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+KTogU3VnYXJFbGVtZW50PFQ+W107XG4gIChwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXTtcbn0gPSAocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PlxuICBkZXNjZW5kYW50cyhTdWdhckJvZHkuYm9keSgpLCBwcmVkaWNhdGUpO1xuXG5jb25zdCBhbmNlc3RvcnM6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxUPltdO1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogU3VnYXJFbGVtZW50PE5vZGU+W107XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT5cbiAgQXJyLmZpbHRlcihUcmF2ZXJzZS5wYXJlbnRzKHNjb3BlLCBpc1Jvb3QpLCBwcmVkaWNhdGUpO1xuXG5jb25zdCBzaWJsaW5nczoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPihzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+KTogU3VnYXJFbGVtZW50PFQ+W107XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXTtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PlxuICBBcnIuZmlsdGVyKFRyYXZlcnNlLnNpYmxpbmdzKHNjb3BlKSwgcHJlZGljYXRlKTtcblxuY29uc3QgY2hpbGRyZW46IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IFN1Z2FyRWxlbWVudDxUPltdO1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogU3VnYXJFbGVtZW50PE5vZGU+W107XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT5cbiAgQXJyLmZpbHRlcihUcmF2ZXJzZS5jaGlsZHJlbihzY29wZSksIHByZWRpY2F0ZSk7XG5cbmNvbnN0IGRlc2NlbmRhbnRzOiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+KHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4pOiBTdWdhckVsZW1lbnQ8VD5bXTtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxOb2RlPltdO1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+IHtcbiAgbGV0IHJlc3VsdDogU3VnYXJFbGVtZW50PE5vZGU+W10gPSBbXTtcblxuICAvLyBSZWN1cnNlLnRvQXJyYXkoKSBtaWdodCBoZWxwIGhlcmVcbiAgQXJyLmVhY2goVHJhdmVyc2UuY2hpbGRyZW4oc2NvcGUpLCAoeCkgPT4ge1xuICAgIGlmIChwcmVkaWNhdGUoeCkpIHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoWyB4IF0pO1xuICAgIH1cbiAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGRlc2NlbmRhbnRzKHgsIHByZWRpY2F0ZSkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCB7XG4gIGFsbCxcbiAgYW5jZXN0b3JzLFxuICBzaWJsaW5ncyxcbiAgY2hpbGRyZW4sXG4gIGRlc2NlbmRhbnRzXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IENsb3Nlc3RPckFuY2VzdG9yIGZyb20gJy4uLy4uL2ltcGwvQ2xvc2VzdE9yQW5jZXN0b3InO1xuaW1wb3J0ICogYXMgQ29tcGFyZSBmcm9tICcuLi9kb20vQ29tcGFyZSc7XG5pbXBvcnQgKiBhcyBTdWdhckJvZHkgZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5jb25zdCBmaXJzdDoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPiAocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUICYgQ2hpbGROb2RlPj47XG4gIChwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+O1xufSA9IChwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+XG4gIGRlc2NlbmRhbnQoU3VnYXJCb2R5LmJvZHkoKSwgcHJlZGljYXRlKTtcblxuY29uc3QgYW5jZXN0b3I6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+O1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGU+Pjtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiB7XG4gIGxldCBlbGVtZW50ID0gc2NvcGUuZG9tO1xuICBjb25zdCBzdG9wID0gVHlwZS5pc0Z1bmN0aW9uKGlzUm9vdCkgPyBpc1Jvb3QgOiBGdW4ubmV2ZXI7XG5cbiAgd2hpbGUgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgY29uc3QgZWwgPSBTdWdhckVsZW1lbnQuZnJvbURvbShlbGVtZW50KTtcblxuICAgIGlmIChwcmVkaWNhdGUoZWwpKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShlbCk7XG4gICAgfSBlbHNlIGlmIChzdG9wKGVsKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5ub25lPFN1Z2FyRWxlbWVudDxOb2RlPj4oKTtcbn07XG5cbmNvbnN0IGNsb3Nlc3Q6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+O1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGU+Pjtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiB7XG4gIC8vIFRoaXMgaXMgcmVxdWlyZWQgdG8gYXZvaWQgQ2xvc2VzdE9yQW5jZXN0b3IgcGFzc2luZyB0aGUgcHJlZGljYXRlIHRvIGl0c2VsZlxuICBjb25zdCBpcyA9IChzOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHRlc3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBzIGlzIFN1Z2FyRWxlbWVudDxOb2RlPiA9PiB0ZXN0KHMpO1xuICByZXR1cm4gQ2xvc2VzdE9yQW5jZXN0b3IoaXMsIGFuY2VzdG9yLCBzY29wZSwgcHJlZGljYXRlLCBpc1Jvb3QpO1xufTtcblxuY29uc3Qgc2libGluZzoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUICYgQ2hpbGROb2RlPj47XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+O1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IHNjb3BlLmRvbTtcbiAgaWYgKCFlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+KCk7XG4gIH1cblxuICByZXR1cm4gY2hpbGQoU3VnYXJFbGVtZW50LmZyb21Eb20oZWxlbWVudC5wYXJlbnROb2RlKSwgKHgpID0+ICFDb21wYXJlLmVxKHNjb3BlLCB4KSAmJiBwcmVkaWNhdGUoeCkpO1xufTtcblxuY29uc3QgY2hpbGQ6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VCAmIENoaWxkTm9kZT4+O1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+Pjtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiB7XG4gIGNvbnN0IHByZWQgPSAobm9kZTogTm9kZSkgPT4gcHJlZGljYXRlKFN1Z2FyRWxlbWVudC5mcm9tRG9tKG5vZGUpKTtcbiAgY29uc3QgcmVzdWx0ID0gQXJyLmZpbmQoc2NvcGUuZG9tLmNoaWxkTm9kZXMsIHByZWQpO1xuICByZXR1cm4gcmVzdWx0Lm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG59O1xuXG5jb25zdCBkZXNjZW5kYW50OiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQgJiBDaGlsZE5vZGU+PjtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj47XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT4ge1xuICBjb25zdCBkZXNjZW5kID0gKG5vZGU6IE5vZGUpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cHJlZmVyLWZvci1vZlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKG5vZGUuY2hpbGROb2Rlc1tpXSk7XG4gICAgICBpZiAocHJlZGljYXRlKGNoaWxkKSkge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShjaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlcyA9IGRlc2NlbmQobm9kZS5jaGlsZE5vZGVzW2ldKTtcbiAgICAgIGlmIChyZXMuaXNTb21lKCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+KCk7XG4gIH07XG5cbiAgcmV0dXJuIGRlc2NlbmQoc2NvcGUuZG9tKTtcbn07XG5cbmV4cG9ydCB7IGZpcnN0LCBhbmNlc3RvciwgY2xvc2VzdCwgc2libGluZywgY2hpbGQsIGRlc2NlbmRhbnQgfTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBTZWxlY3RvckZpbmQgZnJvbSAnLi9TZWxlY3RvckZpbmQnO1xuXG5jb25zdCBhbnkgPSAoc2VsZWN0b3I6IHN0cmluZyk6IGJvb2xlYW4gPT5cbiAgU2VsZWN0b3JGaW5kLmZpcnN0KHNlbGVjdG9yKS5pc1NvbWUoKTtcblxuY29uc3QgYW5jZXN0b3IgPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZywgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IGJvb2xlYW4gPT5cbiAgU2VsZWN0b3JGaW5kLmFuY2VzdG9yKHNjb3BlLCBzZWxlY3RvciwgaXNSb290KS5pc1NvbWUoKTtcblxuY29uc3Qgc2libGluZyA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBTZWxlY3RvckZpbmQuc2libGluZyhzY29wZSwgc2VsZWN0b3IpLmlzU29tZSgpO1xuXG5jb25zdCBjaGlsZCA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBTZWxlY3RvckZpbmQuY2hpbGQoc2NvcGUsIHNlbGVjdG9yKS5pc1NvbWUoKTtcblxuY29uc3QgZGVzY2VuZGFudCA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBTZWxlY3RvckZpbmQuZGVzY2VuZGFudChzY29wZSwgc2VsZWN0b3IpLmlzU29tZSgpO1xuXG5jb25zdCBjbG9zZXN0ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcsIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBib29sZWFuID0+XG4gIFNlbGVjdG9yRmluZC5jbG9zZXN0KHNjb3BlLCBzZWxlY3RvciwgaXNSb290KS5pc1NvbWUoKTtcblxuZXhwb3J0IHtcbiAgYW55LFxuICBhbmNlc3RvcixcbiAgc2libGluZyxcbiAgY2hpbGQsXG4gIGRlc2NlbmRhbnQsXG4gIGNsb3Nlc3Rcbn07XG4iLCJpbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgUHJlZGljYXRlRmlsdGVyIGZyb20gJy4vUHJlZGljYXRlRmlsdGVyJztcbmltcG9ydCAqIGFzIFNlbGVjdG9ycyBmcm9tICcuL1NlbGVjdG9ycyc7XG5cbmNvbnN0IGFsbCA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT5cbiAgU2VsZWN0b3JzLmFsbDxUPihzZWxlY3Rvcik7XG5cbi8vIEZvciBhbGwgb2YgdGhlIGZvbGxvd2luZzpcbi8vXG4vLyBqUXVlcnkgZG9lcyBzaWJsaW5ncyBvZiBmaXJzdENoaWxkLiBJRTkrIHN1cHBvcnRzIHNjb3BlLmRvbS5jaGlsZHJlbiAoc2ltaWxhciB0byBUcmF2ZXJzZS5jaGlsZHJlbiBidXQgZWxlbWVudHMgb25seSkuXG4vLyBUcmF2ZXJzZSBzaG91bGQgYWxzbyBkbyB0aGlzIChidXQgcHJvYmFibHkgbm90IGJ5IGRlZmF1bHQpLlxuLy9cblxuY29uc3QgYW5jZXN0b3JzID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcsIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICAvLyBJdCBtYXkgc3VycHJpc2UgeW91IHRvIGxlYXJuIHRoaXMgaXMgZXhhY3RseSB3aGF0IEpRdWVyeSBkb2VzXG4gIC8vIFRPRE86IEF2b2lkIGFsbCB0aGlzIHdyYXBwaW5nIGFuZCB1bndyYXBwaW5nXG4gIFByZWRpY2F0ZUZpbHRlci5hbmNlc3RvcnMoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSwgaXNSb290KTtcblxuY29uc3Qgc2libGluZ3MgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZyk6IFN1Z2FyRWxlbWVudDxUPltdID0+XG4gIC8vIEl0IG1heSBzdXJwcmlzZSB5b3UgdG8gbGVhcm4gdGhpcyBpcyBleGFjdGx5IHdoYXQgSlF1ZXJ5IGRvZXNcbiAgLy8gVE9ETzogQXZvaWQgYWxsIHRoZSB3cmFwcGluZyBhbmQgdW53cmFwcGluZ1xuICBQcmVkaWNhdGVGaWx0ZXIuc2libGluZ3Moc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGNoaWxkcmVuID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICAvLyBJdCBtYXkgc3VycHJpc2UgeW91IHRvIGxlYXJuIHRoaXMgaXMgZXhhY3RseSB3aGF0IEpRdWVyeSBkb2VzXG4gIC8vIFRPRE86IEF2b2lkIGFsbCB0aGUgd3JhcHBpbmcgYW5kIHVud3JhcHBpbmdcbiAgUHJlZGljYXRlRmlsdGVyLmNoaWxkcmVuKHNjb3BlLCAoZSk6IGUgaXMgU3VnYXJFbGVtZW50PFQ+ID0+IFNlbGVjdG9ycy5pczxUPihlLCBzZWxlY3RvcikpO1xuXG5jb25zdCBkZXNjZW5kYW50cyA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT5cbiAgU2VsZWN0b3JzLmFsbDxUPihzZWxlY3Rvciwgc2NvcGUpO1xuXG5leHBvcnQge1xuICBhbGwsXG4gIGFuY2VzdG9ycyxcbiAgc2libGluZ3MsXG4gIGNoaWxkcmVuLFxuICBkZXNjZW5kYW50c1xufTtcbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgQ2xvc2VzdE9yQW5jZXN0b3IgZnJvbSAnLi4vLi4vaW1wbC9DbG9zZXN0T3JBbmNlc3Rvcic7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgUHJlZGljYXRlRmluZCBmcm9tICcuL1ByZWRpY2F0ZUZpbmQnO1xuaW1wb3J0ICogYXMgU2VsZWN0b3JzIGZyb20gJy4vU2VsZWN0b3JzJztcblxuLy8gVE9ETzogQW4gaW50ZXJuYWwgU2VsZWN0b3JGaWx0ZXIgbW9kdWxlIHRoYXQgZG9lc24ndCBTdWdhckVsZW1lbnQuZnJvbURvbSgpIGV2ZXJ5dGhpbmdcblxuY29uc3QgZmlyc3QgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT5cbiAgU2VsZWN0b3JzLm9uZTxUPihzZWxlY3Rvcik7XG5cbmNvbnN0IGFuY2VzdG9yID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcsIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuYW5jZXN0b3Ioc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSwgaXNSb290KTtcblxuY29uc3Qgc2libGluZyA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+PiA9PlxuICBQcmVkaWNhdGVGaW5kLnNpYmxpbmcoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGNoaWxkID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuY2hpbGQoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGRlc2NlbmRhbnQgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT5cbiAgU2VsZWN0b3JzLm9uZTxUPihzZWxlY3Rvciwgc2NvcGUpO1xuXG4vLyBSZXR1cm5zIFNvbWUoY2xvc2VzdCBhbmNlc3RvciBlbGVtZW50IChzdWdhcmVkKSkgbWF0Y2hpbmcgJ3NlbGVjdG9yJyB1cCB0byBpc1Jvb3QsIG9yIE5vbmUoKSBvdGhlcndpc2VcbmNvbnN0IGNsb3Nlc3QgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZywgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT4ge1xuICBjb25zdCBpcyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBlbGVtZW50IGlzIFN1Z2FyRWxlbWVudDxUPiA9PiBTZWxlY3RvcnMuaXM8VD4oZWxlbWVudCwgc2VsZWN0b3IpO1xuICByZXR1cm4gQ2xvc2VzdE9yQW5jZXN0b3I8c3RyaW5nLCBUPihpcywgYW5jZXN0b3IsIHNjb3BlLCBzZWxlY3RvciwgaXNSb290KTtcbn07XG5cbmV4cG9ydCB7XG4gIGZpcnN0LFxuICBhbmNlc3RvcixcbiAgc2libGluZyxcbiAgY2hpbGQsXG4gIGRlc2NlbmRhbnQsXG4gIGNsb3Nlc3Rcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgRE9DVU1FTlQsIERPQ1VNRU5UX0ZSQUdNRU5ULCBFTEVNRU5UIH0gZnJvbSAnLi4vbm9kZS9Ob2RlVHlwZXMnO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbnRlcmZhY2UgVmVuZG9yRWxlbWVudCBleHRlbmRzIEVsZW1lbnQge1xuICBtc01hdGNoZXNTZWxlY3Rvcj86IChzZWxlY3Rvcjogc3RyaW5nKSA9PiBib29sZWFuO1xuICBtb3pNYXRjaGVzU2VsZWN0b3I/OiAoc2VsZWN0b3I6IHN0cmluZykgPT4gYm9vbGVhbjtcbn1cblxuY29uc3QgaXMgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8VD4gPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgaWYgKGRvbS5ub2RlVHlwZSAhPT0gRUxFTUVOVCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbGVtID0gZG9tIGFzIFZlbmRvckVsZW1lbnQ7XG4gICAgaWYgKGVsZW0ubWF0Y2hlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZWxlbS5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0ubXNNYXRjaGVzU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVsZW0ubXNNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH0gZWxzZSBpZiAoZWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0ubW96TWF0Y2hlc1NlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGNhc3QgdG8gYW55IGFzIG1vek1hdGNoZXNTZWxlY3RvciBkb2Vzbid0IGV4aXN0IGluIFRTIERPTSBsaWJcbiAgICAgIHJldHVybiBlbGVtLm1vek1hdGNoZXNTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciBsYWNrcyBuYXRpdmUgc2VsZWN0b3JzJyk7XG4gICAgfSAvLyB1bmZvcnR1bmF0ZWx5IHdlIGNhbid0IHRocm93IHRoaXMgb24gc3RhcnR1cCA6KFxuICB9XG59O1xuXG5jb25zdCBieXBhc3NTZWxlY3RvciA9IChkb206IE5vZGUpID0+XG4gIC8vIE9ubHkgZWxlbWVudHMsIGRvY3VtZW50cyBhbmQgc2hhZG93IHJvb3RzIHN1cHBvcnQgcXVlcnlTZWxlY3RvclxuICAvLyBzaGFkb3cgcm9vdCBlbGVtZW50IHR5cGUgaXMgRE9DVU1FTlRfRlJBR01FTlRcbiAgZG9tLm5vZGVUeXBlICE9PSBFTEVNRU5UICYmIGRvbS5ub2RlVHlwZSAhPT0gRE9DVU1FTlQgJiYgZG9tLm5vZGVUeXBlICE9PSBET0NVTUVOVF9GUkFHTUVOVCB8fFxuICAgIC8vIElFIGZpeCBmb3IgY29tcGxleCBxdWVyaWVzIG9uIGVtcHR5IG5vZGVzOiBodHRwOi8vanNmaWRkbGUubmV0L3NweWRlci9mdjlwdHI1TC9cbiAgICAoZG9tIGFzIEVsZW1lbnQgfCBEb2N1bWVudCB8IERvY3VtZW50RnJhZ21lbnQpLmNoaWxkRWxlbWVudENvdW50ID09PSAwO1xuXG5jb25zdCBhbGwgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PiB7XG4gIGNvbnN0IGJhc2UgPSBzY29wZSA9PT0gdW5kZWZpbmVkID8gZG9jdW1lbnQgOiBzY29wZS5kb207XG4gIHJldHVybiBieXBhc3NTZWxlY3RvcihiYXNlKSA/IFtdIDogQXJyLm1hcCgoYmFzZSBhcyBFbGVtZW50IHwgRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGw8VD4oc2VsZWN0b3IpLCBTdWdhckVsZW1lbnQuZnJvbURvbSk7XG59O1xuXG5jb25zdCBvbmUgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+IHtcbiAgY29uc3QgYmFzZSA9IHNjb3BlID09PSB1bmRlZmluZWQgPyBkb2N1bWVudCA6IHNjb3BlLmRvbTtcbiAgcmV0dXJuIGJ5cGFzc1NlbGVjdG9yKGJhc2UpID8gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8VD4+KCkgOiBPcHRpb25hbC5mcm9tKChiYXNlIGFzIEVsZW1lbnQgfCBEb2N1bWVudCkucXVlcnlTZWxlY3RvcjxUPihzZWxlY3RvcikpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG59O1xuXG5leHBvcnQge1xuICBhbGwsXG4gIGlzLFxuICBvbmVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwsIFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBSZWN1cnNlIGZyb20gJy4uLy4uL2FsaWVuL1JlY3Vyc2UnO1xuaW1wb3J0ICogYXMgQ29tcGFyZSBmcm9tICcuLi9kb20vQ29tcGFyZSc7XG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi4vbm9kZS9TdWdhck5vZGUnO1xuXG4vKipcbiAqIFRoZSBkb2N1bWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudFxuICogTk9URTogdGhpcyB3aWxsIHRocm93IGlmIHRoZSBvd25lciBpcyBudWxsLlxuICovXG5jb25zdCBvd25lciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsZW1lbnQuZG9tLm93bmVyRG9jdW1lbnQgYXMgRG9jdW1lbnQpO1xuXG4vKipcbiAqIElmIHRoZSBlbGVtZW50IGlzIGEgZG9jdW1lbnQsIHJldHVybiBpdC4gT3RoZXJ3aXNlLCByZXR1cm4gaXRzIG93bmVyRG9jdW1lbnQuXG4gKiBAcGFyYW0gZG9zXG4gKi9cbmNvbnN0IGRvY3VtZW50T3JPd25lciA9IChkb3M6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4gPT5cbiAgU3VnYXJOb2RlLmlzRG9jdW1lbnQoZG9zKSA/IGRvcyA6IG93bmVyKGRvcyk7XG5cbmNvbnN0IGRvY3VtZW50RWxlbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY3VtZW50T3JPd25lcihlbGVtZW50KS5kb20uZG9jdW1lbnRFbGVtZW50KTtcblxuLyoqXG4gKiBUaGUgd2luZG93IGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XG4gKiBOT1RFOiB0aGlzIHdpbGwgdGhyb3cgaWYgdGhlIGRlZmF1bHRWaWV3IGlzIG51bGwuXG4gKi9cbmNvbnN0IGRlZmF1bHRWaWV3ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxXaW5kb3c+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY3VtZW50T3JPd25lcihlbGVtZW50KS5kb20uZGVmYXVsdFZpZXcgYXMgV2luZG93KTtcblxuY29uc3QgcGFyZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgUGFyZW50Tm9kZT4+ID0+XG4gIE9wdGlvbmFsLmZyb20oZWxlbWVudC5kb20ucGFyZW50Tm9kZSkubWFwKFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuLy8gQ2FzdCBkb3duIHRvIGp1c3QgYmUgU3VnYXJFbGVtZW50PE5vZGU+XG5jb25zdCBwYXJlbnROb2RlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj4gPT5cbiAgcGFyZW50KGVsZW1lbnQpIGFzIGFueTtcblxuY29uc3QgcGFyZW50RWxlbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+PiA9PlxuICBPcHRpb25hbC5mcm9tKGVsZW1lbnQuZG9tLnBhcmVudEVsZW1lbnQpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IGZpbmRJbmRleCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxudW1iZXI+ID0+XG4gIHBhcmVudChlbGVtZW50KS5iaW5kKChwKSA9PiB7XG4gICAgLy8gVE9ETzogUmVmYWN0b3Igb3V0IGNoaWxkcmVuIHNvIHdlIGNhbiBhdm9pZCB0aGUgY29uc3RhbnQgdW53cmFwcGluZ1xuICAgIGNvbnN0IGtpbiA9IGNoaWxkcmVuKHApO1xuICAgIHJldHVybiBBcnIuZmluZEluZGV4KGtpbiwgKGVsZW0pID0+IENvbXBhcmUuZXEoZWxlbWVudCwgZWxlbSkpO1xuICB9KTtcblxuY29uc3QgcGFyZW50cyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSA9PiB7XG4gIGNvbnN0IHN0b3AgPSBUeXBlLmlzRnVuY3Rpb24oaXNSb290KSA/IGlzUm9vdCA6IEZ1bi5uZXZlcjtcblxuICAvLyBUaGlzIGlzIHVzZWQgYSAqbG90KiBzbyBpdCBuZWVkcyB0byBiZSBwZXJmb3JtYW50LCBub3QgcmVjdXJzaXZlXG4gIGxldCBkb206IE5vZGUgPSBlbGVtZW50LmRvbTtcbiAgY29uc3QgcmV0OiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSA9IFtdO1xuXG4gIHdoaWxlIChkb20ucGFyZW50Tm9kZSAhPT0gbnVsbCAmJiBkb20ucGFyZW50Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmF3UGFyZW50ID0gZG9tLnBhcmVudE5vZGU7XG4gICAgY29uc3QgcCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJhd1BhcmVudCk7XG4gICAgcmV0LnB1c2gocCk7XG5cbiAgICBpZiAoc3RvcChwKSA9PT0gdHJ1ZSkge1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvbSA9IHJhd1BhcmVudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbmNvbnN0IHNpYmxpbmdzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxOb2RlPltdID0+IHtcbiAgLy8gVE9ETzogUmVmYWN0b3Igb3V0IGNoaWxkcmVuIHNvIHdlIGNhbiBqdXN0IG5vdCBhZGQgc2VsZiBpbnN0ZWFkIG9mIGZpbHRlcmluZyBhZnRlcndhcmRzXG4gIGNvbnN0IGZpbHRlclNlbGYgPSA8RT4gKGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8RT5bXSkgPT4gQXJyLmZpbHRlcihlbGVtZW50cywgKHgpID0+ICFDb21wYXJlLmVxKGVsZW1lbnQsIHgpKTtcblxuICByZXR1cm4gcGFyZW50KGVsZW1lbnQpLm1hcChjaGlsZHJlbikubWFwKGZpbHRlclNlbGYpLmdldE9yKFtdKTtcbn07XG5cbmNvbnN0IG9mZnNldFBhcmVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5vZmZzZXRQYXJlbnQgYXMgSFRNTEVsZW1lbnQpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IHByZXZTaWJsaW5nID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5wcmV2aW91c1NpYmxpbmcpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IG5leHRTaWJsaW5nID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5uZXh0U2libGluZykubWFwKFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuLy8gVGhpcyBvbmUgbmVlZHMgdG8gYmUgcmV2ZXJzZWQsIHNvIHRoZXkncmUgc3RpbGwgaW4gRE9NIG9yZGVyXG5jb25zdCBwcmV2U2libGluZ3MgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogU3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+W10gPT5cbiAgQXJyLnJldmVyc2UoUmVjdXJzZS50b0FycmF5KGVsZW1lbnQsIHByZXZTaWJsaW5nKSk7XG5cbmNvbnN0IG5leHRTaWJsaW5ncyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT5bXSA9PlxuICBSZWN1cnNlLnRvQXJyYXkoZWxlbWVudCwgbmV4dFNpYmxpbmcpO1xuXG5jb25zdCBjaGlsZHJlbiA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT5bXSA9PlxuICBBcnIubWFwKGVsZW1lbnQuZG9tLmNoaWxkTm9kZXMsIFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuY29uc3QgY2hpbGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpbmRleDogbnVtYmVyKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PiB7XG4gIGNvbnN0IGNzID0gZWxlbWVudC5kb20uY2hpbGROb2RlcztcbiAgcmV0dXJuIE9wdGlvbmFsLmZyb20oY3NbaW5kZXhdKS5tYXAoU3VnYXJFbGVtZW50LmZyb21Eb20pO1xufTtcblxuY29uc3QgZmlyc3RDaGlsZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+XG4gIGNoaWxkKGVsZW1lbnQsIDApO1xuXG5jb25zdCBsYXN0Q2hpbGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PlxuICBjaGlsZChlbGVtZW50LCBlbGVtZW50LmRvbS5jaGlsZE5vZGVzLmxlbmd0aCAtIDEpO1xuXG5jb25zdCBjaGlsZE5vZGVzQ291bnQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogbnVtYmVyID0+XG4gIGVsZW1lbnQuZG9tLmNoaWxkTm9kZXMubGVuZ3RoO1xuXG5jb25zdCBoYXNDaGlsZE5vZGVzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT5cbiAgZWxlbWVudC5kb20uaGFzQ2hpbGROb2RlcygpO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRBbmRPZmZzZXQ8RT4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8RT47XG4gIHJlYWRvbmx5IG9mZnNldDogbnVtYmVyO1xufVxuXG5jb25zdCBzcG90ID0gPEU+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFPiwgb2Zmc2V0OiBudW1iZXIpOiBFbGVtZW50QW5kT2Zmc2V0PEU+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIG9mZnNldFxufSk7XG5cbmNvbnN0IGxlYWYgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlcik6IEVsZW1lbnRBbmRPZmZzZXQ8Tm9kZT4gPT4ge1xuICBjb25zdCBjcyA9IGNoaWxkcmVuKGVsZW1lbnQpO1xuICByZXR1cm4gY3MubGVuZ3RoID4gMCAmJiBvZmZzZXQgPCBjcy5sZW5ndGggPyBzcG90KGNzW29mZnNldF0sIDApIDogc3BvdChlbGVtZW50LCBvZmZzZXQpO1xufTtcblxuZXhwb3J0IHtcbiAgb3duZXIsXG4gIGRvY3VtZW50T3JPd25lcixcbiAgZGVmYXVsdFZpZXcsXG4gIGRvY3VtZW50RWxlbWVudCxcbiAgcGFyZW50LFxuICBwYXJlbnROb2RlLFxuICBwYXJlbnRFbGVtZW50LFxuICBmaW5kSW5kZXgsXG4gIHBhcmVudHMsXG4gIHNpYmxpbmdzLFxuICBwcmV2U2libGluZyxcbiAgb2Zmc2V0UGFyZW50LFxuICBwcmV2U2libGluZ3MsXG4gIG5leHRTaWJsaW5nLFxuICBuZXh0U2libGluZ3MsXG4gIGNoaWxkcmVuLFxuICBjaGlsZCxcbiAgZmlyc3RDaGlsZCxcbiAgbGFzdENoaWxkLFxuICBjaGlsZE5vZGVzQ291bnQsXG4gIGhhc0NoaWxkTm9kZXMsXG4gIGxlYWZcbn07XG4iLCJpbXBvcnQgeyBBcnIsIFVuaWNvZGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyTm9kZSBmcm9tICcuLi9ub2RlL1N1Z2FyTm9kZSc7XG5pbXBvcnQgKiBhcyBTdWdhclRleHQgZnJvbSAnLi4vbm9kZS9TdWdhclRleHQnO1xuaW1wb3J0ICogYXMgQXR0cmlidXRlIGZyb20gJy4uL3Byb3BlcnRpZXMvQXR0cmlidXRlJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmNvbnN0IGdldEVuZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBudW1iZXIgPT5cbiAgU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkgPT09ICdpbWcnID8gMSA6IFN1Z2FyVGV4dC5nZXRPcHRpb24oZWxlbWVudCkuZm9sZChcbiAgICAoKSA9PiBUcmF2ZXJzZS5jaGlsZHJlbihlbGVtZW50KS5sZW5ndGgsXG4gICAgKHYpID0+IHYubGVuZ3RoXG4gICk7XG5cbmNvbnN0IGlzRW5kID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpOiBib29sZWFuID0+IGdldEVuZChlbGVtZW50KSA9PT0gb2Zmc2V0O1xuXG5jb25zdCBpc1N0YXJ0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpOiBib29sZWFuID0+IG9mZnNldCA9PT0gMDtcblxuY29uc3QgaXNUZXh0Tm9kZVdpdGhDdXJzb3JQb3NpdGlvbiA9IChlbDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBTdWdhclRleHQuZ2V0T3B0aW9uKGVsKS5maWx0ZXIoKHRleHQpID0+XG4gIC8vIEZvciB0aGUgcHVycG9zZXMgb2YgZmluZGluZyBjdXJzb3IgcG9zaXRpb25zIG9ubHkgYWxsb3cgdGV4dCBub2RlcyB3aXRoIGNvbnRlbnQsXG4gIC8vIGJ1dCB0cmltIHJlbW92ZXMgJm5ic3A7IGFuZCB0aGF0J3MgYWxsb3dlZFxuICB0ZXh0LnRyaW0oKS5sZW5ndGggIT09IDAgfHwgdGV4dC5pbmRleE9mKFVuaWNvZGUubmJzcCkgPiAtMVxuKS5pc1NvbWUoKTtcblxuY29uc3QgaXNDb250ZW50RWRpdGFibGVGYWxzZSA9IChlbGVtOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFN1Z2FyTm9kZS5pc0hUTUxFbGVtZW50KGVsZW0pICYmIChBdHRyaWJ1dGUuZ2V0KGVsZW0sICdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ2ZhbHNlJyk7XG5cbmNvbnN0IGVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uID0gWyAnaW1nJywgJ2JyJyBdO1xuY29uc3QgaXNDdXJzb3JQb3NpdGlvbiA9IChlbGVtOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgaGFzQ3Vyc29yUG9zaXRpb24gPSBpc1RleHROb2RlV2l0aEN1cnNvclBvc2l0aW9uKGVsZW0pO1xuICByZXR1cm4gaGFzQ3Vyc29yUG9zaXRpb24gfHwgQXJyLmNvbnRhaW5zKGVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uLCBTdWdhck5vZGUubmFtZShlbGVtKSkgfHwgaXNDb250ZW50RWRpdGFibGVGYWxzZShlbGVtKTtcbn07XG5cbmV4cG9ydCB7XG4gIGdldEVuZCxcbiAgaXNFbmQsXG4gIGlzU3RhcnQsXG4gIGlzQ3Vyc29yUG9zaXRpb25cbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgUHJlZGljYXRlRmluZCBmcm9tICcuLi9zZWFyY2gvUHJlZGljYXRlRmluZCc7XG5pbXBvcnQgKiBhcyBUcmF2ZXJzZSBmcm9tICcuLi9zZWFyY2gvVHJhdmVyc2UnO1xuXG5pbXBvcnQgKiBhcyBBd2FyZW5lc3MgZnJvbSAnLi9Bd2FyZW5lc3MnO1xuXG5jb25zdCBmaXJzdCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuZGVzY2VuZGFudChlbGVtZW50LCBBd2FyZW5lc3MuaXNDdXJzb3JQb3NpdGlvbik7XG5cbmNvbnN0IGxhc3QgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PlxuICBkZXNjZW5kYW50UnRsKGVsZW1lbnQsIEF3YXJlbmVzcy5pc0N1cnNvclBvc2l0aW9uKTtcblxuLy8gTm90ZSwgc3VnYXIgcHJvYmFibHkgbmVlZHMgc29tZSBSVEwgdHJhdmVyc2Fscy5cbmNvbnN0IGRlc2NlbmRhbnRSdGw6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUICYgQ2hpbGROb2RlPj47XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+O1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgY29uc3QgZGVzY2VuZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFRyYXZlcnNlLmNoaWxkcmVuKGVsZW1lbnQpO1xuICAgIGZvciAobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUoY2hpbGQpKSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGRlc2NlbmQoY2hpbGQpO1xuICAgICAgaWYgKHJlcy5pc1NvbWUoKSkge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4oKTtcbiAgfTtcblxuICByZXR1cm4gZGVzY2VuZChzY29wZSk7XG59O1xuXG5leHBvcnQge1xuICBmaXJzdCxcbiAgbGFzdFxufTtcbiIsImltcG9ydCB7IEFyciwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCB1bml0cyA9IHtcbiAgLy8gd2UgZG9uJ3QgcmVhbGx5IHN1cHBvcnQgYWxsIG9mIHRoZXNlIGRpZmZlcmVudCB3YXlzIHRvIGV4cHJlc3MgYSBsZW5ndGhcbiAgdW5zdXBwb3J0ZWRMZW5ndGg6IFtcbiAgICAnZW0nIGFzICdlbScsXG4gICAgJ2V4JyBhcyAnZXgnLFxuICAgICdjYXAnIGFzICdjYXAnLFxuICAgICdjaCcgYXMgJ2NoJyxcbiAgICAnaWMnIGFzICdpYycsXG4gICAgJ3JlbScgYXMgJ3JlbScsXG4gICAgJ2xoJyBhcyAnbGgnLFxuICAgICdybGgnIGFzICdybGgnLFxuICAgICd2dycgYXMgJ3Z3JyxcbiAgICAndmgnIGFzICd2aCcsXG4gICAgJ3ZpJyBhcyAndmknLFxuICAgICd2YicgYXMgJ3ZiJyxcbiAgICAndm1pbicgYXMgJ3ZtaW4nLFxuICAgICd2bWF4JyBhcyAndm1heCcsXG4gICAgJ2NtJyBhcyAnY20nLFxuICAgICdtbScgYXMgJ21tJyxcbiAgICAnUScgYXMgJ1EnLFxuICAgICdpbicgYXMgJ2luJyxcbiAgICAncGMnIGFzICdwYycsXG4gICAgJ3B0JyBhcyAncHQnLFxuICAgICdweCcgYXMgJ3B4J1xuICBdLFxuICAvLyB0aGVzZSBhcmUgdGhlIGxlbmd0aCB2YWx1ZXMgd2UgZG8gc3VwcG9ydFxuICBmaXhlZDogWyAncHgnIGFzICdweCcsICdwdCcgYXMgJ3B0JyBdLFxuICByZWxhdGl2ZTogWyAnJScgYXMgJyUnIF0sXG4gIGVtcHR5OiBbICcnIGFzICcnIF1cbn07XG5cbnR5cGUgVW5pdHMgPSB7XG4gIFtLIGluIGtleW9mIHR5cGVvZiB1bml0c106IHR5cGVvZiB1bml0c1tLXVtudW1iZXJdO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb248VSBleHRlbmRzIGtleW9mIFVuaXRzPiB7XG4gIHJlYWRvbmx5IHZhbHVlOiBudW1iZXI7XG4gIHJlYWRvbmx5IHVuaXQ6IFVuaXRzW1VdO1xufVxuXG4vLyBCdWlsdCBmcm9tIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNwcm9kLVN0ckRlY2ltYWxMaXRlcmFsXG4vLyBNYXRjaGVzIGEgZmxvYXQgZm9sbG93ZWQgYnkgYSB0cmFpbGluZyBzZXQgb2YgY2hhcmFjdGVyc1xuY29uc3QgcGF0dGVybjogUmVnRXhwID0gKCgpID0+IHtcbiAgY29uc3QgZGVjaW1hbERpZ2l0cyA9ICdbMC05XSsnO1xuICBjb25zdCBzaWduZWRJbnRlZ2VyID0gJ1srLV0/JyArIGRlY2ltYWxEaWdpdHM7XG4gIGNvbnN0IGV4cG9uZW50UGFydCA9ICdbZUVdJyArIHNpZ25lZEludGVnZXI7XG4gIGNvbnN0IGRvdCA9ICdcXFxcLic7XG5cbiAgY29uc3Qgb3B0ID0gKGlucHV0OiBzdHJpbmcpID0+IGAoPzoke2lucHV0fSk/YDtcblxuICBjb25zdCB1bnNpZ25lZERlY2ltYWxMaXRlcmFsID0gW1xuICAgICdJbmZpbml0eScsXG4gICAgZGVjaW1hbERpZ2l0cyArIGRvdCArIG9wdChkZWNpbWFsRGlnaXRzKSArIG9wdChleHBvbmVudFBhcnQpLFxuICAgIGRvdCArIGRlY2ltYWxEaWdpdHMgKyBvcHQoZXhwb25lbnRQYXJ0KSxcbiAgICBkZWNpbWFsRGlnaXRzICsgb3B0KGV4cG9uZW50UGFydClcbiAgXS5qb2luKCd8Jyk7XG5cbiAgY29uc3QgZmxvYXQgPSBgWystXT8oPzoke3Vuc2lnbmVkRGVjaW1hbExpdGVyYWx9KWA7XG5cbiAgcmV0dXJuIG5ldyBSZWdFeHAoYF4oJHtmbG9hdH0pKC4qKSRgKTtcbn0pKCk7XG5cbmNvbnN0IGlzVW5pdCA9IDxUIGV4dGVuZHMga2V5b2YgVW5pdHM+KHVuaXQ6IHN0cmluZywgYWNjZXB0ZWQ6IFRbXSk6IHVuaXQgaXMgVW5pdHNbVF0gPT5cbiAgQXJyLmV4aXN0cyhhY2NlcHRlZCwgKGFjYzogVCkgPT5cbiAgICBBcnIuZXhpc3RzKHVuaXRzW2FjY10sIChjaGVjaykgPT4gdW5pdCA9PT0gY2hlY2spXG4gICk7XG5cbmV4cG9ydCBjb25zdCBwYXJzZSA9IDxUIGV4dGVuZHMga2V5b2YgVW5pdHM+KGlucHV0OiBzdHJpbmcsIGFjY2VwdGVkOiBUW10pOiBPcHRpb25hbDxEaW1lbnNpb248VD4+ID0+IHtcbiAgY29uc3QgbWF0Y2ggPSBPcHRpb25hbC5mcm9tKHBhdHRlcm4uZXhlYyhpbnB1dCkpO1xuICByZXR1cm4gbWF0Y2guYmluZCgoYXJyYXkpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihhcnJheVsxXSk7XG4gICAgY29uc3QgdW5pdFJhdyA9IGFycmF5WzJdO1xuXG4gICAgaWYgKGlzVW5pdCh1bml0UmF3LCBhY2NlcHRlZCkpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHVuaXQ6IHVuaXRSYXdcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXNlID0gPFQgZXh0ZW5kcyBrZXlvZiBVbml0cz4oaW5wdXQ6IHN0cmluZywgYWNjZXB0ZWQ6IFRbXSk6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgcGFyc2UoaW5wdXQsIGFjY2VwdGVkKS5tYXAoKHsgdmFsdWUsIHVuaXQgfSkgPT4gdmFsdWUgKyB1bml0KTtcbiIsImltcG9ydCB7IERpbWVuc2lvbiB9IGZyb20gJy4uLy4uL2ltcGwvRGltZW5zaW9uJztcbmltcG9ydCAqIGFzIFJ1bnRpbWVTaXplIGZyb20gJy4uLy4uL2ltcGwvUnVudGltZVNpemUnO1xuaW1wb3J0ICogYXMgU3VnYXJCb2R5IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgQ3NzIGZyb20gJy4uL3Byb3BlcnRpZXMvQ3NzJztcblxuY29uc3QgYXBpID0gRGltZW5zaW9uKCdoZWlnaHQnLCAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZ2l2ZXMgYmV0dGVyIHJlc3VsdHMgdGhhbiBvZmZzZXRIZWlnaHQgZm9yIHRhYmxlcyB3aXRoIGNhcHRpb25zIG9uIEZpcmVmb3hcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG4gIHJldHVybiBTdWdhckJvZHkuaW5Cb2R5KGVsZW1lbnQpID8gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCA6IGRvbS5vZmZzZXRIZWlnaHQ7XG59KTtcblxuY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGg6IG51bWJlciB8IHN0cmluZyk6IHZvaWQgPT4gYXBpLnNldChlbGVtZW50LCBoKTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT4gYXBpLmdldChlbGVtZW50KTtcblxuY29uc3QgZ2V0T3V0ZXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PiBhcGkuZ2V0T3V0ZXIoZWxlbWVudCk7XG5cbmNvbnN0IGdldElubmVyID0gUnVudGltZVNpemUuZ2V0SW5uZXJIZWlnaHQ7XG5cbmNvbnN0IGdldFJ1bnRpbWUgPSBSdW50aW1lU2l6ZS5nZXRIZWlnaHQ7XG5cbmNvbnN0IHNldE1heCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCB2YWx1ZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gIC8vIFRoZXNlIHByb3BlcnRpZXMgYWZmZWN0IHRoZSBhYnNvbHV0ZSBtYXgtaGVpZ2h0LCB0aGV5IGFyZSBub3QgY291bnRlZCBuYXRpdmVseSwgd2Ugd2FudCB0byBpbmNsdWRlIHRoZXNlIHByb3BlcnRpZXMuXG4gIGNvbnN0IGluY2x1c2lvbnMgPSBbICdtYXJnaW4tdG9wJywgJ2JvcmRlci10b3Atd2lkdGgnLCAncGFkZGluZy10b3AnLCAncGFkZGluZy1ib3R0b20nLCAnYm9yZGVyLWJvdHRvbS13aWR0aCcsICdtYXJnaW4tYm90dG9tJyBdO1xuICBjb25zdCBhYnNNYXggPSBhcGkubWF4KGVsZW1lbnQsIHZhbHVlLCBpbmNsdXNpb25zKTtcbiAgQ3NzLnNldChlbGVtZW50LCAnbWF4LWhlaWdodCcsIGFic01heCArICdweCcpO1xufTtcblxuZXhwb3J0IHtcbiAgc2V0LFxuICBnZXQsXG4gIGdldElubmVyLFxuICBnZXRPdXRlcixcbiAgZ2V0UnVudGltZSxcbiAgc2V0TWF4XG59O1xuIiwiaW1wb3J0IHsgaW5Cb2R5IH0gZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCB7IFN1Z2FyUG9zaXRpb24gfSBmcm9tICcuL1N1Z2FyUG9zaXRpb24nO1xuXG5jb25zdCBib3hQb3NpdGlvbiA9IChkb206IEVsZW1lbnQpOiBTdWdhclBvc2l0aW9uID0+IHtcbiAgY29uc3QgYm94ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4gU3VnYXJQb3NpdGlvbihib3gubGVmdCwgYm94LnRvcCk7XG59O1xuXG4vLyBBdm9pZHMgZmFsc3kgZmFsc2UgZmFsbHRocm91Z2hcbmNvbnN0IGZpcnN0RGVmaW5lZE9yWmVybyA9IChhPzogbnVtYmVyLCBiPzogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBhO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBiICE9PSB1bmRlZmluZWQgPyBiIDogMDtcbiAgfVxufTtcblxuY29uc3QgYWJzb2x1dGUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogU3VnYXJQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IGRvYyA9IGVsZW1lbnQuZG9tLm93bmVyRG9jdW1lbnQ7XG4gIGNvbnN0IGJvZHkgPSBkb2MuYm9keTtcbiAgY29uc3Qgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuICBjb25zdCBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICBpZiAoYm9keSA9PT0gZWxlbWVudC5kb20pIHtcbiAgICByZXR1cm4gU3VnYXJQb3NpdGlvbihib2R5Lm9mZnNldExlZnQsIGJvZHkub2Zmc2V0VG9wKTtcbiAgfVxuXG4gIGNvbnN0IHNjcm9sbFRvcCA9IGZpcnN0RGVmaW5lZE9yWmVybyh3aW4/LnBhZ2VZT2Zmc2V0LCBodG1sLnNjcm9sbFRvcCk7XG4gIGNvbnN0IHNjcm9sbExlZnQgPSBmaXJzdERlZmluZWRPclplcm8od2luPy5wYWdlWE9mZnNldCwgaHRtbC5zY3JvbGxMZWZ0KTtcblxuICBjb25zdCBjbGllbnRUb3AgPSBmaXJzdERlZmluZWRPclplcm8oaHRtbC5jbGllbnRUb3AsIGJvZHkuY2xpZW50VG9wKTtcbiAgY29uc3QgY2xpZW50TGVmdCA9IGZpcnN0RGVmaW5lZE9yWmVybyhodG1sLmNsaWVudExlZnQsIGJvZHkuY2xpZW50TGVmdCk7XG5cbiAgcmV0dXJuIHZpZXdwb3J0KGVsZW1lbnQpLnRyYW5zbGF0ZShcbiAgICBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdCxcbiAgICBzY3JvbGxUb3AgLSBjbGllbnRUb3ApO1xufTtcblxuLy8gVGhpcyBpcyB0aGUgb2xkICQucG9zaXRpb24oKSwgYnV0IEpRdWVyeSBkb2VzIG5vbnNlbnNlIGNhbGN1bGF0aW9ucy5cbi8vIFdlJ3JlIG9ubHkgMSA8LT4gMSB3aXRoIHRoZSBvbGQgdmFsdWUgaW4gdGhlIHNpbmdsZSBwbGFjZSB3ZSB1c2UgdGhpcyBmdW5jdGlvblxuLy8gKGVnby5hcGkuRHJhZ2dpbmcpIHNvIHRoZSByZXN0IGNhbiBiaXRlIG1lLlxuY29uc3QgcmVsYXRpdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IFN1Z2FyUG9zaXRpb24gPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgLy8ganF1ZXJ5LWlzbTogd2hlbiBzdHlsZT1cInBvc2l0aW9uOiBmaXhlZFwiLCB0aGlzID09PSBib3hQb3NpdGlvbigpXG4gIC8vIGJ1dCB0ZXN0cyByZXZlYWwgaXQgcmV0dXJucyB0aGUgc2FtZSB0aGluZyBhbnl3YXlcbiAgcmV0dXJuIFN1Z2FyUG9zaXRpb24oZG9tLm9mZnNldExlZnQsIGRvbS5vZmZzZXRUb3ApO1xufTtcblxuY29uc3Qgdmlld3BvcnQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogU3VnYXJQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuXG4gIGNvbnN0IGRvYyA9IGRvbS5vd25lckRvY3VtZW50O1xuICBjb25zdCBib2R5ID0gZG9jLmJvZHk7XG5cbiAgaWYgKGJvZHkgPT09IGRvbSkge1xuICAgIHJldHVybiBTdWdhclBvc2l0aW9uKGJvZHkub2Zmc2V0TGVmdCwgYm9keS5vZmZzZXRUb3ApO1xuICB9XG5cbiAgaWYgKCFpbkJvZHkoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gU3VnYXJQb3NpdGlvbigwLCAwKTtcbiAgfVxuXG4gIHJldHVybiBib3hQb3NpdGlvbihkb20pO1xufTtcblxuZXhwb3J0IHtcbiAgYWJzb2x1dGUsXG4gIHJlbGF0aXZlLFxuICB2aWV3cG9ydFxufTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgU3VnYXJQb3NpdGlvbiB7XG4gIHJlYWRvbmx5IGxlZnQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgdG9wOiBudW1iZXI7XG4gIHJlYWRvbmx5IHRyYW5zbGF0ZTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiBTdWdhclBvc2l0aW9uO1xufVxuXG5jb25zdCByID0gKGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIpOiBTdWdhclBvc2l0aW9uID0+IHtcbiAgY29uc3QgdHJhbnNsYXRlID0gKHg6IG51bWJlciwgeTogbnVtYmVyKTogU3VnYXJQb3NpdGlvbiA9PiByKGxlZnQgKyB4LCB0b3AgKyB5KTtcblxuICByZXR1cm4ge1xuICAgIGxlZnQsXG4gICAgdG9wLFxuICAgIHRyYW5zbGF0ZVxuICB9O1xufTtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBjb25zdCBTdWdhclBvc2l0aW9uID0gcjtcbiIsImltcG9ydCB7IERpbWVuc2lvbiB9IGZyb20gJy4uLy4uL2ltcGwvRGltZW5zaW9uJztcbmltcG9ydCAqIGFzIFJ1bnRpbWVTaXplIGZyb20gJy4uLy4uL2ltcGwvUnVudGltZVNpemUnO1xuaW1wb3J0ICogYXMgU3VnYXJCb2R5IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgQ3NzIGZyb20gJy4uL3Byb3BlcnRpZXMvQ3NzJztcblxuY29uc3QgYXBpID0gRGltZW5zaW9uKCd3aWR0aCcsIChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICByZXR1cm4gU3VnYXJCb2R5LmluQm9keShlbGVtZW50KSA/IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA6IGRvbS5vZmZzZXRXaWR0aDtcbn0pO1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgaDogc3RyaW5nIHwgbnVtYmVyKTogdm9pZCA9PiBhcGkuc2V0KGVsZW1lbnQsIGgpO1xuXG5jb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PiBhcGkuZ2V0KGVsZW1lbnQpO1xuXG5jb25zdCBnZXRPdXRlciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+IGFwaS5nZXRPdXRlcihlbGVtZW50KTtcblxuY29uc3QgZ2V0SW5uZXIgPSBSdW50aW1lU2l6ZS5nZXRJbm5lcldpZHRoO1xuXG5jb25zdCBnZXRSdW50aW1lID0gUnVudGltZVNpemUuZ2V0V2lkdGg7XG5cbmNvbnN0IHNldE1heCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCB2YWx1ZTogbnVtYmVyKTogdm9pZCA9PiB7XG4gIC8vIFRoZXNlIHByb3BlcnRpZXMgYWZmZWN0IHRoZSBhYnNvbHV0ZSBtYXgtaGVpZ2h0LCB0aGV5IGFyZSBub3QgY291bnRlZCBuYXRpdmVseSwgd2Ugd2FudCB0byBpbmNsdWRlIHRoZXNlIHByb3BlcnRpZXMuXG4gIGNvbnN0IGluY2x1c2lvbnMgPSBbICdtYXJnaW4tbGVmdCcsICdib3JkZXItbGVmdC13aWR0aCcsICdwYWRkaW5nLWxlZnQnLCAncGFkZGluZy1yaWdodCcsICdib3JkZXItcmlnaHQtd2lkdGgnLCAnbWFyZ2luLXJpZ2h0JyBdO1xuICBjb25zdCBhYnNNYXggPSBhcGkubWF4KGVsZW1lbnQsIHZhbHVlLCBpbmNsdXNpb25zKTtcbiAgQ3NzLnNldChlbGVtZW50LCAnbWF4LXdpZHRoJywgYWJzTWF4ICsgJ3B4Jyk7XG59O1xuXG5leHBvcnQge1xuICBzZXQsXG4gIGdldCxcbiAgZ2V0SW5uZXIsXG4gIGdldE91dGVyLFxuICBnZXRSdW50aW1lLFxuICBzZXRNYXhcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcblxudHlwZSBUZXN0Rm4gPSAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuO1xudHlwZSBTY29wZVRlc3RGbjxULCBSIGV4dGVuZHMgTm9kZT4gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgYTogVCkgPT4gc2NvcGUgaXMgU3VnYXJFbGVtZW50PFI+O1xudHlwZSBBbmNlc3RvckZuPFQsIFIgZXh0ZW5kcyBOb2RlPiA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IFQsIGlzUm9vdD86IFRlc3RGbikgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PFI+PjtcblxuZXhwb3J0IGRlZmF1bHQgPFQsIFIgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKGlzOiBTY29wZVRlc3RGbjxULCBSPiwgYW5jZXN0b3I6IEFuY2VzdG9yRm48VCwgUj4sIHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGE6IFQsIGlzUm9vdD86IFRlc3RGbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxSPj4gPT4ge1xuICBpZiAoaXMoc2NvcGUsIGEpKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoc2NvcGUpO1xuICB9IGVsc2UgaWYgKFR5cGUuaXNGdW5jdGlvbihpc1Jvb3QpICYmIGlzUm9vdChzY29wZSkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8Uj4+KCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFuY2VzdG9yKHNjb3BlLCBhLCBpc1Jvb3QpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgQXJyLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9hcGkvbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgQ3NzIGZyb20gJy4uL2FwaS9wcm9wZXJ0aWVzL0Nzcyc7XG5cbmltcG9ydCAqIGFzIFN0eWxlIGZyb20gJy4vU3R5bGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpbWVuc2lvbiB7XG4gIHJlYWRvbmx5IGdldDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgc2V0OiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB2b2lkO1xuICByZWFkb25seSBnZXRPdXRlcjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgYWdncmVnYXRlOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBwcm9wZXJ0aWVzOiBzdHJpbmdbXSkgPT4gbnVtYmVyO1xuICByZWFkb25seSBtYXg6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHZhbHVlOiBudW1iZXIsIHByb3BlcnRpZXM6IHN0cmluZ1tdKSA9PiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBEaW1lbnNpb24gPSAobmFtZTogc3RyaW5nLCBnZXRPZmZzZXQ6IChlOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiBudW1iZXIpOiBEaW1lbnNpb24gPT4ge1xuICBjb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBoOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcbiAgICBpZiAoIVR5cGUuaXNOdW1iZXIoaCkgJiYgIWgubWF0Y2goL15bMC05XSskLykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihuYW1lICsgJy5zZXQgYWNjZXB0cyBvbmx5IHBvc2l0aXZlIGludGVnZXIgdmFsdWVzLiBWYWx1ZSB3YXMgJyArIGgpO1xuICAgIH1cbiAgICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgICBpZiAoU3R5bGUuaXNTdXBwb3J0ZWQoZG9tKSkge1xuICAgICAgZG9tLnN0eWxlW25hbWUgYXMgYW55XSA9IGggKyAncHgnO1xuICAgIH1cbiAgfTtcblxuICAvKlxuICAgKiBqUXVlcnkgc3VwcG9ydHMgcXVlcnlpbmcgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgZG9jdW1lbnQgYW5kIHdpbmRvdyBvYmplY3RzLlxuICAgKlxuICAgKiBUQklPIGRvZXNuJ3QgZG8gdGhpcywgc28gdGhlIGNvZGUgaXMgcmVtb3ZlZCB0byBzYXZlIHNwYWNlLCBidXQgbGVmdCBoZXJlIGp1c3QgaW4gY2FzZS5cbiAgICovXG4gIC8qXG4gIHZhciBnZXREb2N1bWVudFdpZHRoID0gKGVsZW1lbnQpID0+IHtcbiAgICB2YXIgZG9tID0gZWxlbWVudC5kb207XG4gICAgaWYgKE5vZGUuaXNEb2N1bWVudChlbGVtZW50KSkge1xuICAgICAgdmFyIGJvZHkgPSBkb20uYm9keTtcbiAgICAgIHZhciBkb2MgPSBkb20uZG9jdW1lbnRFbGVtZW50O1xuICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICBib2R5LnNjcm9sbEhlaWdodCxcbiAgICAgICAgZG9jLnNjcm9sbEhlaWdodCxcbiAgICAgICAgYm9keS5vZmZzZXRIZWlnaHQsXG4gICAgICAgIGRvYy5vZmZzZXRIZWlnaHQsXG4gICAgICAgIGRvYy5jbGllbnRIZWlnaHRcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnZXRXaW5kb3dXaWR0aCA9IChlbGVtZW50KSA9PiB7XG4gICAgdmFyIGRvbSA9IGVsZW1lbnQuZG9tO1xuICAgIGlmIChkb20ud2luZG93ID09PSBkb20pIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIG9mZnNldEhlaWdodCBvbiBhIHdpbmRvdywgc28gdXNlIHRoZSBjbGllbnRIZWlnaHQgb2YgdGhlIGRvY3VtZW50XG4gICAgICByZXR1cm4gZG9tLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICB9O1xuKi9cblxuICBjb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHIgPSBnZXRPZmZzZXQoZWxlbWVudCk7XG5cbiAgICAvLyB6ZXJvIG9yIG51bGwgbWVhbnMgbm9uLXN0YW5kYXJkIG9yIGRpc2Nvbm5lY3RlZCwgZmFsbCBiYWNrIHRvIENTU1xuICAgIGlmICggciA8PSAwIHx8IHIgPT09IG51bGwgKSB7XG4gICAgICBjb25zdCBjc3MgPSBDc3MuZ2V0KGVsZW1lbnQsIG5hbWUpO1xuICAgICAgLy8gdWdoIHRoaXMgZmVlbHMgZGlydHksIGJ1dCBpdCBzYXZlcyBjeWNsZXNcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGNzcykgfHwgMDtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgLy8gaW4galF1ZXJ5LCBnZXRPdXRlciByZXBsaWNhdGVzIChvciB1c2VzKSBib3gtc2l6aW5nOiBib3JkZXItYm94IGNhbGN1bGF0aW9uc1xuICAvLyBhbHRob3VnaCB0aGVzZSBjYWxjdWxhdGlvbnMgb25seSBzZWVtIHJlbGV2YW50IGZvciBxdWlya3MgbW9kZSwgYW5kIGVkZ2UgY2FzZXMgVEJJTyBkb2Vzbid0IHJlbHkgb25cbiAgY29uc3QgZ2V0T3V0ZXIgPSBnZXQ7XG5cbiAgY29uc3QgYWdncmVnYXRlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgcHJvcGVydGllczogc3RyaW5nW10pID0+IEFyci5mb2xkbChwcm9wZXJ0aWVzLCAoYWNjLCBwcm9wZXJ0eSkgPT4ge1xuICAgIGNvbnN0IHZhbCA9IENzcy5nZXQoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsID09PSB1bmRlZmluZWQgPyAwIDogcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgcmV0dXJuIGlzTmFOKHZhbHVlKSA/IGFjYyA6IGFjYyArIHZhbHVlO1xuICB9LCAwKTtcblxuICBjb25zdCBtYXggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB2YWx1ZTogbnVtYmVyLCBwcm9wZXJ0aWVzOiBzdHJpbmdbXSkgPT4ge1xuICAgIGNvbnN0IGN1bXVsYXRpdmVJbmNsdXNpb25zID0gYWdncmVnYXRlKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIC8vIGlmIG1heC1oZWlnaHQgaXMgMTAwcHggYW5kIHlvdXIgY3VtdWxhdGl2ZUluY2x1c2lvbnMgaXMgMTUwcHgsIHRoZXJlIGlzIG5vIHdheSBtYXgtaGVpZ2h0IGNhbiBiZSAxMDBweCwgc28gd2UgcmV0dXJuIDAuXG4gICAgY29uc3QgYWJzb2x1dGVNYXggPSB2YWx1ZSA+IGN1bXVsYXRpdmVJbmNsdXNpb25zID8gdmFsdWUgLSBjdW11bGF0aXZlSW5jbHVzaW9ucyA6IDA7XG4gICAgcmV0dXJuIGFic29sdXRlTWF4O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0LFxuICAgIGdldCxcbiAgICBnZXRPdXRlcixcbiAgICBhZ2dyZWdhdGUsXG4gICAgbWF4XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL2FwaS9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9kZVZhbHVlIHtcbiAgcmVhZG9ubHkgZ2V0OiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBzdHJpbmc7XG4gIHJlYWRvbmx5IGdldE9wdGlvbjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gT3B0aW9uYWw8c3RyaW5nPjtcbiAgcmVhZG9ubHkgc2V0OiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCB2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgTm9kZVZhbHVlID0gKGlzOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBuYW1lOiBzdHJpbmcpOiBOb2RlVmFsdWUgPT4ge1xuICBjb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogc3RyaW5nID0+IHtcbiAgICBpZiAoIWlzKGVsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IGdldCAnICsgbmFtZSArICcgdmFsdWUgb2YgYSAnICsgbmFtZSArICcgbm9kZScpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0T3B0aW9uKGVsZW1lbnQpLmdldE9yKCcnKTtcbiAgfTtcblxuICBjb25zdCBnZXRPcHRpb24gPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8c3RyaW5nPiA9PlxuICAgIGlzKGVsZW1lbnQpID8gT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5ub2RlVmFsdWUpIDogT3B0aW9uYWwubm9uZTxzdHJpbmc+KCk7XG5cbiAgY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgdmFsdWU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIGlmICghaXMoZWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgc2V0IHJhdyAnICsgbmFtZSArICcgdmFsdWUgb2YgYSAnICsgbmFtZSArICcgbm9kZScpO1xuICAgIH1cbiAgICBlbGVtZW50LmRvbS5ub2RlVmFsdWUgPSB2YWx1ZTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldCxcbiAgICBnZXRPcHRpb24sXG4gICAgc2V0XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgU3RyaW5ncyB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIENzcyBmcm9tICcuLi9hcGkvcHJvcGVydGllcy9Dc3MnO1xuXG5jb25zdCB0b051bWJlciA9IChweDogc3RyaW5nLCBmYWxsYmFjazogbnVtYmVyKTogbnVtYmVyID0+XG4gIFN0cmluZ3MudG9GbG9hdChweCkuZ2V0T3IoZmFsbGJhY2spO1xuXG5jb25zdCBnZXRQcm9wID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIG5hbWU6IHN0cmluZywgZmFsbGJhY2s6IG51bWJlcik6IG51bWJlciA9PlxuICB0b051bWJlcihDc3MuZ2V0KGVsZW1lbnQsIG5hbWUpLCBmYWxsYmFjayk7XG5cbmNvbnN0IGNhbGNDb250ZW50Qm94U2l6ZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBzaXplOiBudW1iZXIsIHVwcGVyOiAndG9wJyB8ICdsZWZ0JywgbG93ZXI6ICdib3R0b20nIHwgJ3JpZ2h0JykgPT4ge1xuICBjb25zdCBwYWRkaW5nVXBwZXIgPSBnZXRQcm9wKGVsZW1lbnQsIGBwYWRkaW5nLSR7dXBwZXJ9YCwgMCk7XG4gIGNvbnN0IHBhZGRpbmdMb3dlciA9IGdldFByb3AoZWxlbWVudCwgYHBhZGRpbmctJHtsb3dlcn1gLCAwKTtcbiAgY29uc3QgYm9yZGVyVXBwZXIgPSBnZXRQcm9wKGVsZW1lbnQsIGBib3JkZXItJHt1cHBlcn0td2lkdGhgLCAwKTtcbiAgY29uc3QgYm9yZGVyTG93ZXIgPSBnZXRQcm9wKGVsZW1lbnQsIGBib3JkZXItJHtsb3dlcn0td2lkdGhgLCAwKTtcblxuICByZXR1cm4gc2l6ZSAtIHBhZGRpbmdVcHBlciAtIHBhZGRpbmdMb3dlciAtIGJvcmRlclVwcGVyIC0gYm9yZGVyTG93ZXI7XG59O1xuXG5jb25zdCBnZXRDYWxjdWxhdGVkSGVpZ2h0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGJveFNpemluZzogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG4gIGNvbnN0IGhlaWdodCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgfHwgZG9tLm9mZnNldEhlaWdodDtcbiAgcmV0dXJuIGJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnID8gaGVpZ2h0IDogY2FsY0NvbnRlbnRCb3hTaXplKGVsZW1lbnQsIGhlaWdodCwgJ3RvcCcsICdib3R0b20nKTtcbn07XG5cbmNvbnN0IGdldENhbGN1bGF0ZWRXaWR0aCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBib3hTaXppbmc6IHN0cmluZyk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBjb25zdCB3aWR0aCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB8fCBkb20ub2Zmc2V0V2lkdGg7XG4gIHJldHVybiBib3hTaXppbmcgPT09ICdib3JkZXItYm94JyA/IHdpZHRoIDogY2FsY0NvbnRlbnRCb3hTaXplKGVsZW1lbnQsIHdpZHRoLCAnbGVmdCcsICdyaWdodCcpO1xufTtcblxuY29uc3QgZ2V0SGVpZ2h0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT5cbiAgZ2V0UHJvcChlbGVtZW50LCAnaGVpZ2h0JywgZWxlbWVudC5kb20ub2Zmc2V0SGVpZ2h0KTtcblxuY29uc3QgZ2V0V2lkdGggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PlxuICBnZXRQcm9wKGVsZW1lbnQsICd3aWR0aCcsIGVsZW1lbnQuZG9tLm9mZnNldFdpZHRoKTtcblxuY29uc3QgZ2V0SW5uZXJIZWlnaHQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PlxuICBnZXRDYWxjdWxhdGVkSGVpZ2h0KGVsZW1lbnQsICdjb250ZW50LWJveCcpO1xuXG5jb25zdCBnZXRJbm5lcldpZHRoID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT5cbiAgZ2V0Q2FsY3VsYXRlZFdpZHRoKGVsZW1lbnQsICdjb250ZW50LWJveCcpO1xuXG5leHBvcnQge1xuICBnZXRJbm5lckhlaWdodCxcbiAgZ2V0SW5uZXJXaWR0aCxcbiAgZ2V0SGVpZ2h0LFxuICBnZXRXaWR0aFxufTtcbiIsImltcG9ydCB7IFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG4vLyBzb21lIGVsZW1lbnRzLCBzdWNoIGFzIG1hdGhtbCwgZG9uJ3QgaGF2ZSBzdHlsZSBhdHRyaWJ1dGVzXG4vLyBvdGhlcnMsIHN1Y2ggYXMgYW5ndWxhciBlbGVtZW50cywgaGF2ZSBzdHlsZSBhdHRyaWJ1dGVzIHRoYXQgYXJlbid0IGEgQ1NTU3R5bGVEZWNsYXJhdGlvblxuY29uc3QgaXNTdXBwb3J0ZWQgPSA8VCBleHRlbmRzIE5vZGU+KGRvbTogVCk6IGRvbSBpcyAoVCAmIEVsZW1lbnRDU1NJbmxpbmVTdHlsZSkgPT5cblxuICAoZG9tIGFzIGFueSkuc3R5bGUgIT09IHVuZGVmaW5lZCAmJiBUeXBlLmlzRnVuY3Rpb24oKGRvbSBhcyBhbnkpLnN0eWxlLmdldFByb3BlcnR5VmFsdWUpO1xuXG5leHBvcnQgeyBpc1N1cHBvcnRlZCB9O1xuIiwiaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCBQbHVnaW5NYW5hZ2VyIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvUGx1Z2luTWFuYWdlcic7XG5cbmltcG9ydCAqIGFzIENvbW1hbmRzIGZyb20gJy4vYXBpL0NvbW1hbmRzJztcbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi9hcGkvT3B0aW9ucyc7XG5pbXBvcnQgeyBnZXRTZWxlY3Rpb25UYXJnZXRzIH0gZnJvbSAnLi9zZWxlY3Rpb24vU2VsZWN0aW9uVGFyZ2V0cyc7XG5pbXBvcnQgKiBhcyBCdXR0b25zIGZyb20gJy4vdWkvQnV0dG9ucyc7XG5pbXBvcnQgKiBhcyBNZW51SXRlbXMgZnJvbSAnLi91aS9NZW51SXRlbXMnO1xuXG5jb25zdCBQbHVnaW4gPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgY29uc3Qgc2VsZWN0aW9uVGFyZ2V0cyA9IGdldFNlbGVjdGlvblRhcmdldHMoZWRpdG9yKTtcblxuICBPcHRpb25zLnJlZ2lzdGVyKGVkaXRvcik7XG4gIENvbW1hbmRzLnJlZ2lzdGVyQ29tbWFuZHMoZWRpdG9yKTtcblxuICBNZW51SXRlbXMuYWRkTWVudUl0ZW1zKGVkaXRvciwgc2VsZWN0aW9uVGFyZ2V0cyk7XG4gIEJ1dHRvbnMuYWRkQnV0dG9ucyhlZGl0b3IsIHNlbGVjdGlvblRhcmdldHMpO1xuICBCdXR0b25zLmFkZFRvb2xiYXJzKGVkaXRvcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCAoKTogdm9pZCA9PiB7XG4gIFBsdWdpbk1hbmFnZXIuYWRkKCd0YWJsZScsIFBsdWdpbik7XG59O1xuIiwiaW1wb3J0IHsgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIERPTVV0aWxzIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvZG9tL0RPTVV0aWxzJztcbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgVG9vbHMgZnJvbSAndGlueW1jZS9jb3JlL2FwaS91dGlsL1Rvb2xzJztcblxuY29uc3QgZ2V0VERUSE92ZXJhbGxTdHlsZSA9IChkb206IERPTVV0aWxzLCBlbG06IEVsZW1lbnQsIG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGNlbGxzID0gZG9tLnNlbGVjdCgndGQsdGgnLCBlbG0pO1xuICBsZXQgZmlyc3RDaGlsZFN0eWxlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IGRvbS5nZXRTdHlsZShjZWxsc1tpXSwgbmFtZSk7XG4gICAgaWYgKFR5cGUuaXNVbmRlZmluZWQoZmlyc3RDaGlsZFN0eWxlKSkge1xuICAgICAgZmlyc3RDaGlsZFN0eWxlID0gY3VycmVudFN0eWxlO1xuICAgIH1cbiAgICBpZiAoZmlyc3RDaGlsZFN0eWxlICE9PSBjdXJyZW50U3R5bGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmlyc3RDaGlsZFN0eWxlO1xufTtcblxuY29uc3Qgc2V0QWxpZ24gPSAoZWRpdG9yOiBFZGl0b3IsIGVsbTogRWxlbWVudCwgbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkKTogdm9pZCA9PiB7XG4gIC8vIEFsaWdubWVudCBmb3JtYXRzIG1heSBub3QgdXNlIHRoZSBzYW1lIHN0eWxlcyBzbyBlbnN1cmUgdG8gcmVtb3ZlIGFueSBleGlzdGluZyBob3Jpem9udGFsIGFsaWdubWVudCBmb3JtYXQgZmlyc3RcbiAgVG9vbHMuZWFjaCgnbGVmdCBjZW50ZXIgcmlnaHQnLnNwbGl0KCcgJyksIChhbGlnbikgPT4ge1xuICAgIGlmIChhbGlnbiAhPT0gbmFtZSkge1xuICAgICAgZWRpdG9yLmZvcm1hdHRlci5yZW1vdmUoJ2FsaWduJyArIGFsaWduLCB7fSwgZWxtKTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChuYW1lKSB7XG4gICAgZWRpdG9yLmZvcm1hdHRlci5hcHBseSgnYWxpZ24nICsgbmFtZSwge30sIGVsbSk7XG4gIH1cbn07XG5cbmNvbnN0IHNldFZBbGlnbiA9IChlZGl0b3I6IEVkaXRvciwgZWxtOiBFbGVtZW50LCBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQpOiB2b2lkID0+IHtcbiAgLy8gQWxpZ25tZW50IGZvcm1hdHMgbWF5IG5vdCB1c2UgdGhlIHNhbWUgc3R5bGVzIHNvIGVuc3VyZSB0byByZW1vdmUgYW55IGV4aXN0aW5nIHZlcnRpY2FsIGFsaWdubWVudCBmb3JtYXQgZmlyc3RcbiAgVG9vbHMuZWFjaCgndG9wIG1pZGRsZSBib3R0b20nLnNwbGl0KCcgJyksIChhbGlnbikgPT4ge1xuICAgIGlmIChhbGlnbiAhPT0gbmFtZSkge1xuICAgICAgZWRpdG9yLmZvcm1hdHRlci5yZW1vdmUoJ3ZhbGlnbicgKyBhbGlnbiwge30sIGVsbSk7XG4gICAgfVxuICB9KTtcblxuICBpZiAobmFtZSkge1xuICAgIGVkaXRvci5mb3JtYXR0ZXIuYXBwbHkoJ3ZhbGlnbicgKyBuYW1lLCB7fSwgZWxtKTtcbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgc2V0QWxpZ24sXG4gIHNldFZBbGlnbixcbiAgZ2V0VERUSE92ZXJhbGxTdHlsZVxufTtcbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgaW4gdGhlIGZvbGxvd2luZyBsb2NhdGlvbnM6XG4gIC0gbW9kZWxzL2RvbS90YWJsZS9hcGkvQ2xpcGJvYXJkLnRzXG4gTWFrZSBzdXJlIHRoYXQgaWYgbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBmaWxlLCB0aGUgb3RoZXIgZmlsZXMgYXJlIHVwZGF0ZWQgYXMgd2VsbFxuICovXG5cbmltcG9ydCB7IEFyciwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgRmFrZUNsaXBib2FyZCBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0Zha2VDbGlwYm9hcmQnO1xuXG4gdHlwZSBSb3dFbGVtZW50ID0gSFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ7XG5cbmNvbnN0IHRhYmxlVHlwZUJhc2UgPSAneC10aW55bWNlL2RvbS10YWJsZS0nO1xuY29uc3QgdGFibGVUeXBlUm93ID0gdGFibGVUeXBlQmFzZSArICdyb3dzJztcbmNvbnN0IHRhYmxlVHlwZUNvbHVtbiA9IHRhYmxlVHlwZUJhc2UgKyAnY29sdW1ucyc7XG5cbmNvbnN0IHNldERhdGEgPSAoaXRlbXM6IFJlY29yZDxzdHJpbmcsIFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdPikgPT4ge1xuICBjb25zdCBmYWtlQ2xpcGJvYXJkSXRlbSA9IEZha2VDbGlwYm9hcmQuRmFrZUNsaXBib2FyZEl0ZW0oaXRlbXMpO1xuICBGYWtlQ2xpcGJvYXJkLndyaXRlKFsgZmFrZUNsaXBib2FyZEl0ZW0gXSk7XG59O1xuXG5jb25zdCBnZXREYXRhID0gPFQ+KHR5cGU6IHN0cmluZyk6IE9wdGlvbmFsPFRbXT4gPT4ge1xuICBjb25zdCBpdGVtcyA9IEZha2VDbGlwYm9hcmQucmVhZCgpID8/IFtdO1xuICByZXR1cm4gQXJyLmZpbmRNYXAoaXRlbXMsIChpdGVtKSA9PiBPcHRpb25hbC5mcm9tKGl0ZW0uZ2V0VHlwZTxUW10+KHR5cGUpKSk7XG59O1xuXG5jb25zdCBjbGVhckRhdGEgPSAodHlwZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGlmIChnZXREYXRhKHR5cGUpLmlzU29tZSgpKSB7XG4gICAgRmFrZUNsaXBib2FyZC5jbGVhcigpO1xuICB9XG59O1xuXG5jb25zdCBzZXRSb3dzID0gKHJvd3NPcHQ6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdPik6IHZvaWQgPT4ge1xuICByb3dzT3B0LmZvbGQoXG4gICAgY2xlYXJSb3dzLFxuICAgIChyb3dzKSA9PiBzZXREYXRhKHsgW3RhYmxlVHlwZVJvd106IHJvd3MgfSlcbiAgKTtcbn07XG5cbmNvbnN0IGdldFJvd3MgPSAoKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+W10+ID0+XG4gIGdldERhdGEodGFibGVUeXBlUm93KTtcblxuY29uc3QgY2xlYXJSb3dzID0gKCk6IHZvaWQgPT5cbiAgY2xlYXJEYXRhKHRhYmxlVHlwZVJvdyk7XG5cbmNvbnN0IHNldENvbHVtbnMgPSAoY29sdW1uc09wdDogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+W10+KTogdm9pZCA9PiB7XG4gIGNvbHVtbnNPcHQuZm9sZChcbiAgICBjbGVhckNvbHVtbnMsXG4gICAgKGNvbHVtbnMpID0+IHNldERhdGEoeyBbdGFibGVUeXBlQ29sdW1uXTogY29sdW1ucyB9KVxuICApO1xufTtcblxuY29uc3QgZ2V0Q29sdW1ucyA9ICgpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Um93RWxlbWVudD5bXT4gPT5cbiAgZ2V0RGF0YSh0YWJsZVR5cGVDb2x1bW4pO1xuXG5jb25zdCBjbGVhckNvbHVtbnMgPSAoKTogdm9pZCA9PlxuICBjbGVhckRhdGEodGFibGVUeXBlQ29sdW1uKTtcblxuZXhwb3J0IHtcbiAgc2V0Um93cyxcbiAgZ2V0Um93cyxcbiAgY2xlYXJSb3dzLFxuICBzZXRDb2x1bW5zLFxuICBnZXRDb2x1bW5zLFxuICBjbGVhckNvbHVtbnNcbn07XG4iLCJpbXBvcnQgeyBGdW4sIE9iaiB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xuaW1wb3J0ICogYXMgQ2VsbERpYWxvZyBmcm9tICcuLi91aS9DZWxsRGlhbG9nJztcbmltcG9ydCAqIGFzIFJvd0RpYWxvZyBmcm9tICcuLi91aS9Sb3dEaWFsb2cnO1xuaW1wb3J0ICogYXMgVGFibGVEaWFsb2cgZnJvbSAnLi4vdWkvVGFibGVEaWFsb2cnO1xuXG5jb25zdCByZWdpc3RlckNvbW1hbmRzID0gKGVkaXRvcjogRWRpdG9yKTogdm9pZCA9PiB7XG4gIGNvbnN0IHJ1bkFjdGlvbiA9IChmOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgaWYgKFV0aWxzLmlzSW5FZGl0YWJsZUNvbnRleHQoVXRpbHMuZ2V0U2VsZWN0aW9uU3RhcnQoZWRpdG9yKSkpIHtcbiAgICAgIGYoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnaXN0ZXIgZGlhbG9nIGNvbW1hbmRzXG4gIE9iai5lYWNoKHtcbiAgICAvLyBBUC0xMDEgVGFibGVEaWFsb2cub3BlbiByZW5kZXJzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IGRpYWxvZyBpZiBpc05ldyBpcyB0cnVlXG4gICAgbWNlVGFibGVQcm9wczogRnVuLmN1cnJ5KFRhYmxlRGlhbG9nLm9wZW4sIGVkaXRvciwgZmFsc2UpLFxuICAgIG1jZVRhYmxlUm93UHJvcHM6IEZ1bi5jdXJyeShSb3dEaWFsb2cub3BlbiwgZWRpdG9yKSxcbiAgICBtY2VUYWJsZUNlbGxQcm9wczogRnVuLmN1cnJ5KENlbGxEaWFsb2cub3BlbiwgZWRpdG9yKSxcbiAgICBtY2VJbnNlcnRUYWJsZURpYWxvZzogRnVuLmN1cnJ5KFRhYmxlRGlhbG9nLm9wZW4sIGVkaXRvciwgdHJ1ZSksXG4gIH0sIChmdW5jLCBuYW1lKSA9PiBlZGl0b3IuYWRkQ29tbWFuZChuYW1lLCAoKSA9PiBydW5BY3Rpb24oZnVuYykpKTtcbn07XG5cbmV4cG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMgfTtcbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgaW4gdGhlIGZvbGxvd2luZyBsb2NhdGlvbnM6XG4gIC0gY29yZS9hcGkvVGFibGVFdmVudHMudHNcbiAgLSBtb2RlbHMvZG9tL3RhYmxlL2FwaS9FdmVudHMudHNcbiAgLSBhZHZ0YWJsZVxuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBOZXdUYWJsZUNlbGxFdmVudCwgTmV3VGFibGVSb3dFdmVudCwgVGFibGVFdmVudERhdGEgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0V2ZW50VHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBFZGl0b3JFdmVudCB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvdXRpbC9FdmVudERpc3BhdGNoZXInO1xuXG5jb25zdCBmaXJlTmV3Um93ID0gKGVkaXRvcjogRWRpdG9yLCByb3c6IEhUTUxUYWJsZVJvd0VsZW1lbnQpOiBFZGl0b3JFdmVudDxOZXdUYWJsZVJvd0V2ZW50PiA9PlxuICBlZGl0b3IuZGlzcGF0Y2goJ05ld1JvdycsIHsgbm9kZTogcm93IH0pO1xuXG5jb25zdCBmaXJlTmV3Q2VsbCA9IChlZGl0b3I6IEVkaXRvciwgY2VsbDogSFRNTFRhYmxlQ2VsbEVsZW1lbnQpOiBFZGl0b3JFdmVudDxOZXdUYWJsZUNlbGxFdmVudD4gPT5cbiAgZWRpdG9yLmRpc3BhdGNoKCdOZXdDZWxsJywgeyBub2RlOiBjZWxsIH0pO1xuXG5jb25zdCBmaXJlVGFibGVNb2RpZmllZCA9IChlZGl0b3I6IEVkaXRvciwgdGFibGU6IEhUTUxUYWJsZUVsZW1lbnQsIGRhdGE6IFRhYmxlRXZlbnREYXRhKTogdm9pZCA9PiB7XG4gIGVkaXRvci5kaXNwYXRjaCgnVGFibGVNb2RpZmllZCcsIHsgLi4uZGF0YSwgdGFibGUgfSk7XG59O1xuXG5jb25zdCBzdHlsZU1vZGlmaWVkOiBUYWJsZUV2ZW50RGF0YSA9IHsgc3RydWN0dXJlOiBmYWxzZSwgc3R5bGU6IHRydWUgfTtcbmNvbnN0IHN0cnVjdHVyZU1vZGlmaWVkOiBUYWJsZUV2ZW50RGF0YSA9IHsgc3RydWN0dXJlOiB0cnVlLCBzdHlsZTogZmFsc2UgfTtcbmNvbnN0IHN0eWxlQW5kU3RydWN0dXJlTW9kaWZpZWQ6IFRhYmxlRXZlbnREYXRhID0geyBzdHJ1Y3R1cmU6IHRydWUsIHN0eWxlOiB0cnVlIH07XG5cbmV4cG9ydCB7XG4gIGZpcmVOZXdSb3csXG4gIGZpcmVOZXdDZWxsLFxuICBmaXJlVGFibGVNb2RpZmllZCxcbiAgc3R5bGVNb2RpZmllZCxcbiAgc3RydWN0dXJlTW9kaWZpZWQsXG4gIHN0eWxlQW5kU3RydWN0dXJlTW9kaWZpZWRcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50LCBXaWR0aCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgRW52IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRW52JztcbmltcG9ydCB0eXBlIHsgRWRpdG9yT3B0aW9ucyB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvT3B0aW9uVHlwZXMnO1xuXG5pbXBvcnQgdHlwZSB7IFVzZXJMaXN0SXRlbSwgVXNlckxpc3RWYWx1ZSB9IGZyb20gJy4uL3VpL1VpVXRpbHMnO1xuXG5jb25zdCBkZWZhdWx0VGFibGVUb29sYmFyID0gJ3RhYmxlcHJvcHMgdGFibGVkZWxldGUgfCB0YWJsZWluc2VydHJvd2JlZm9yZSB0YWJsZWluc2VydHJvd2FmdGVyIHRhYmxlZGVsZXRlcm93IHwgdGFibGVpbnNlcnRjb2xiZWZvcmUgdGFibGVpbnNlcnRjb2xhZnRlciB0YWJsZWRlbGV0ZWNvbCc7XG5cbmNvbnN0IGRlZmF1bHRDZWxsQm9yZGVyV2lkdGhzID0gQXJyLnJhbmdlKDUsIChpKSA9PiB7XG4gIGNvbnN0IHNpemUgPSBgJHtpICsgMX1weGA7XG4gIHJldHVybiB7IHRpdGxlOiBzaXplLCB2YWx1ZTogc2l6ZSB9O1xufSk7XG5cbmNvbnN0IGRlZmF1bHRDZWxsQm9yZGVyU3R5bGVzID0gQXJyLm1hcChbICdTb2xpZCcsICdEb3R0ZWQnLCAnRGFzaGVkJywgJ0RvdWJsZScsICdHcm9vdmUnLCAnUmlkZ2UnLCAnSW5zZXQnLCAnT3V0c2V0JywgJ05vbmUnLCAnSGlkZGVuJyBdLCAodHlwZSkgPT4ge1xuICByZXR1cm4geyB0aXRsZTogdHlwZSwgdmFsdWU6IHR5cGUudG9Mb3dlckNhc2UoKSB9O1xufSk7XG5cbi8vIE5vdGU6IFRoaXMgaXMgYWxzbyBjb250YWluZWQgaW4gdGhlIGNvcmUgT3B0aW9ucy50cyBmaWxlXG5jb25zdCBkZWZhdWx0V2lkdGggPSAnMTAwJSc7XG5cbmNvbnN0IGdldFBpeGVsRm9yY2VkV2lkdGggPSAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgLy8gRGV0ZXJtaW5lIHRoZSBpbm5lciBzaXplIG9mIHRoZSBwYXJlbnQgYmxvY2sgZWxlbWVudCB3aGVyZSB0aGUgdGFibGUgd2lsbCBiZSBpbnNlcnRlZFxuICBjb25zdCBkb20gPSBlZGl0b3IuZG9tO1xuICBjb25zdCBwYXJlbnRCbG9jayA9IGRvbS5nZXRQYXJlbnQ8SFRNTEVsZW1lbnQ+KGVkaXRvci5zZWxlY3Rpb24uZ2V0U3RhcnQoKSwgZG9tLmlzQmxvY2spID8/IGVkaXRvci5nZXRCb2R5KCk7XG4gIHJldHVybiBXaWR0aC5nZXRJbm5lcihTdWdhckVsZW1lbnQuZnJvbURvbShwYXJlbnRCbG9jaykpICsgJ3B4Jztcbn07XG5cbi8vIE5vdGU6IFRoaXMgaXMgYWxzbyBjb250YWluZWQgaW4gdGhlIGNvcmUgT3B0aW9ucy50cyBmaWxlXG5jb25zdCBkZXRlcm1pbmVEZWZhdWx0U3R5bGVzID0gKGVkaXRvcjogRWRpdG9yLCBkZWZhdWx0U3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIGlmIChpc1Jlc3BvbnNpdmVGb3JjZWQoZWRpdG9yKSB8fCAhc2hvdWxkU3R5bGVXaXRoQ3NzKGVkaXRvcikpIHtcbiAgICByZXR1cm4gZGVmYXVsdFN0eWxlcztcbiAgfSBlbHNlIGlmIChpc1BpeGVsc0ZvcmNlZChlZGl0b3IpKSB7XG4gICAgcmV0dXJuIHsgLi4uZGVmYXVsdFN0eWxlcywgd2lkdGg6IGdldFBpeGVsRm9yY2VkV2lkdGgoZWRpdG9yKSB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IC4uLmRlZmF1bHRTdHlsZXMsIHdpZHRoOiBkZWZhdWx0V2lkdGggfTtcbiAgfVxufTtcblxuLy8gTm90ZTogVGhpcyBpcyBhbHNvIGNvbnRhaW5lZCBpbiB0aGUgY29yZSBPcHRpb25zLnRzIGZpbGVcbmNvbnN0IGRldGVybWluZURlZmF1bHRBdHRyaWJ1dGVzID0gKGVkaXRvcjogRWRpdG9yLCBkZWZhdWx0QXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICBpZiAoaXNSZXNwb25zaXZlRm9yY2VkKGVkaXRvcikgfHwgc2hvdWxkU3R5bGVXaXRoQ3NzKGVkaXRvcikpIHtcbiAgICByZXR1cm4gZGVmYXVsdEF0dHJpYnV0ZXM7XG4gIH0gZWxzZSBpZiAoaXNQaXhlbHNGb3JjZWQoZWRpdG9yKSkge1xuICAgIHJldHVybiB7IC4uLmRlZmF1bHRBdHRyaWJ1dGVzLCB3aWR0aDogZ2V0UGl4ZWxGb3JjZWRXaWR0aChlZGl0b3IpIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgLi4uZGVmYXVsdEF0dHJpYnV0ZXMsIHdpZHRoOiBkZWZhdWx0V2lkdGggfTtcbiAgfVxufTtcblxuY29uc3Qgb3B0aW9uOiB7XG4gIDxLIGV4dGVuZHMga2V5b2YgRWRpdG9yT3B0aW9ucz4obmFtZTogSyk6IChlZGl0b3I6IEVkaXRvcikgPT4gRWRpdG9yT3B0aW9uc1tLXTtcbiAgPFQ+KG5hbWU6IHN0cmluZyk6IChlZGl0b3I6IEVkaXRvcikgPT4gVDtcbn0gPSAobmFtZTogc3RyaW5nKSA9PiAoZWRpdG9yOiBFZGl0b3IpID0+XG4gIGVkaXRvci5vcHRpb25zLmdldChuYW1lKTtcblxuY29uc3QgcmVnaXN0ZXIgPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgY29uc3QgcmVnaXN0ZXJPcHRpb24gPSBlZGl0b3Iub3B0aW9ucy5yZWdpc3RlcjtcblxuICByZWdpc3Rlck9wdGlvbigndGFibGVfYm9yZGVyX3dpZHRocycsIHtcbiAgICBwcm9jZXNzb3I6ICdvYmplY3RbXScsXG4gICAgZGVmYXVsdDogZGVmYXVsdENlbGxCb3JkZXJXaWR0aHNcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX2JvcmRlcl9zdHlsZXMnLCB7XG4gICAgcHJvY2Vzc29yOiAnb2JqZWN0W10nLFxuICAgIGRlZmF1bHQ6IGRlZmF1bHRDZWxsQm9yZGVyU3R5bGVzXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9jZWxsX2FkdnRhYicsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9yb3dfYWR2dGFiJywge1xuICAgIHByb2Nlc3NvcjogJ2Jvb2xlYW4nLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX2FkdnRhYicsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9hcHBlYXJhbmNlX29wdGlvbnMnLCB7XG4gICAgcHJvY2Vzc29yOiAnYm9vbGVhbicsXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KTtcblxuICByZWdpc3Rlck9wdGlvbigndGFibGVfZ3JpZCcsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICAvLyBUYWJsZSBncmlkIHJlbGllcyBvbiBob3Zlciwgd2hpY2ggaXNuJ3QgYXZhaWxhYmxlIG9uIHRvdWNoIGRldmljZXMgc28gdXNlIHRoZSBkaWFsb2cgaW5zdGVhZFxuICAgIGRlZmF1bHQ6ICFFbnYuZGV2aWNlVHlwZS5pc1RvdWNoKClcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX2NlbGxfY2xhc3NfbGlzdCcsIHtcbiAgICBwcm9jZXNzb3I6ICdvYmplY3RbXScsXG4gICAgZGVmYXVsdDogW11cbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX3Jvd19jbGFzc19saXN0Jywge1xuICAgIHByb2Nlc3NvcjogJ29iamVjdFtdJyxcbiAgICBkZWZhdWx0OiBbXVxuICB9KTtcblxuICByZWdpc3Rlck9wdGlvbigndGFibGVfY2xhc3NfbGlzdCcsIHtcbiAgICBwcm9jZXNzb3I6ICdvYmplY3RbXScsXG4gICAgZGVmYXVsdDogW11cbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX3Rvb2xiYXInLCB7XG4gICAgcHJvY2Vzc29yOiAnc3RyaW5nJyxcbiAgICBkZWZhdWx0OiBkZWZhdWx0VGFibGVUb29sYmFyXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9iYWNrZ3JvdW5kX2NvbG9yX21hcCcsIHtcbiAgICBwcm9jZXNzb3I6ICdvYmplY3RbXScsXG4gICAgZGVmYXVsdDogW11cbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX2JvcmRlcl9jb2xvcl9tYXAnLCB7XG4gICAgcHJvY2Vzc29yOiAnb2JqZWN0W10nLFxuICAgIGRlZmF1bHQ6IFtdXG4gIH0pO1xufTtcblxuY29uc3QgZ2V0VGFibGVTaXppbmdNb2RlID0gb3B0aW9uKCd0YWJsZV9zaXppbmdfbW9kZScpO1xuY29uc3QgZ2V0VGFibGVCb3JkZXJXaWR0aHMgPSBvcHRpb248VXNlckxpc3RJdGVtW10+KCd0YWJsZV9ib3JkZXJfd2lkdGhzJyk7XG5jb25zdCBnZXRUYWJsZUJvcmRlclN0eWxlcyA9IG9wdGlvbjxVc2VyTGlzdFZhbHVlW10+KCd0YWJsZV9ib3JkZXJfc3R5bGVzJyk7XG5jb25zdCBoYXNBZHZhbmNlZENlbGxUYWIgPSBvcHRpb248Ym9vbGVhbj4oJ3RhYmxlX2NlbGxfYWR2dGFiJyk7XG5jb25zdCBoYXNBZHZhbmNlZFJvd1RhYiA9IG9wdGlvbjxib29sZWFuPigndGFibGVfcm93X2FkdnRhYicpO1xuY29uc3QgaGFzQWR2YW5jZWRUYWJsZVRhYiA9IG9wdGlvbjxib29sZWFuPigndGFibGVfYWR2dGFiJyk7XG5jb25zdCBoYXNBcHBlYXJhbmNlT3B0aW9ucyA9IG9wdGlvbjxib29sZWFuPigndGFibGVfYXBwZWFyYW5jZV9vcHRpb25zJyk7XG5jb25zdCBoYXNUYWJsZUdyaWQgPSBvcHRpb248Ym9vbGVhbj4oJ3RhYmxlX2dyaWQnKTtcbmNvbnN0IHNob3VsZFN0eWxlV2l0aENzcyA9IG9wdGlvbjxib29sZWFuPigndGFibGVfc3R5bGVfYnlfY3NzJyk7XG5jb25zdCBnZXRDZWxsQ2xhc3NMaXN0ID0gb3B0aW9uPFVzZXJMaXN0SXRlbVtdPigndGFibGVfY2VsbF9jbGFzc19saXN0Jyk7XG5jb25zdCBnZXRSb3dDbGFzc0xpc3QgPSBvcHRpb248VXNlckxpc3RJdGVtW10+KCd0YWJsZV9yb3dfY2xhc3NfbGlzdCcpO1xuY29uc3QgZ2V0VGFibGVDbGFzc0xpc3QgPSBvcHRpb248VXNlckxpc3RJdGVtW10+KCd0YWJsZV9jbGFzc19saXN0Jyk7XG5jb25zdCBnZXRUb29sYmFyID0gb3B0aW9uPHN0cmluZz4oJ3RhYmxlX3Rvb2xiYXInKTtcbmNvbnN0IGdldFRhYmxlQmFja2dyb3VuZENvbG9yTWFwID0gb3B0aW9uPFVzZXJMaXN0VmFsdWVbXT4oJ3RhYmxlX2JhY2tncm91bmRfY29sb3JfbWFwJyk7XG5jb25zdCBnZXRUYWJsZUJvcmRlckNvbG9yTWFwID0gb3B0aW9uPFVzZXJMaXN0VmFsdWVbXT4oJ3RhYmxlX2JvcmRlcl9jb2xvcl9tYXAnKTtcblxuY29uc3QgaXNQaXhlbHNGb3JjZWQgPSAoZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuID0+XG4gIGdldFRhYmxlU2l6aW5nTW9kZShlZGl0b3IpID09PSAnZml4ZWQnO1xuXG5jb25zdCBpc1Jlc3BvbnNpdmVGb3JjZWQgPSAoZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuID0+XG4gIGdldFRhYmxlU2l6aW5nTW9kZShlZGl0b3IpID09PSAncmVzcG9uc2l2ZSc7XG5cbmNvbnN0IGdldERlZmF1bHRTdHlsZXMgPSAoZWRpdG9yOiBFZGl0b3IpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgLy8gTm90ZTogVGhlIHdlIGRvbid0IHJlbHkgb24gdGhlIGRlZmF1bHQgaGVyZSBhcyB3ZSBuZWVkIHRvIGR5bmFtaWNhbGx5IGxvb2t1cCB0aGUgd2lkdGhzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZVxuICBjb25zdCBvcHRpb25zID0gZWRpdG9yLm9wdGlvbnM7XG4gIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSBvcHRpb25zLmdldCgndGFibGVfZGVmYXVsdF9zdHlsZXMnKTtcbiAgcmV0dXJuIG9wdGlvbnMuaXNTZXQoJ3RhYmxlX2RlZmF1bHRfc3R5bGVzJykgPyBkZWZhdWx0U3R5bGVzIDogZGV0ZXJtaW5lRGVmYXVsdFN0eWxlcyhlZGl0b3IsIGRlZmF1bHRTdHlsZXMpO1xufTtcblxuY29uc3QgZ2V0RGVmYXVsdEF0dHJpYnV0ZXMgPSAoZWRpdG9yOiBFZGl0b3IpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgLy8gTm90ZTogVGhlIHdlIGRvbid0IHJlbHkgb24gdGhlIGRlZmF1bHQgaGVyZSBhcyB3ZSBuZWVkIHRvIGR5bmFtaWNhbGx5IGxvb2t1cCB0aGUgd2lkdGhzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGVkaXRvciBzdGF0ZVxuICBjb25zdCBvcHRpb25zID0gZWRpdG9yLm9wdGlvbnM7XG4gIGNvbnN0IGRlZmF1bHRBdHRyaWJ1dGVzID0gb3B0aW9ucy5nZXQoJ3RhYmxlX2RlZmF1bHRfYXR0cmlidXRlcycpO1xuICByZXR1cm4gb3B0aW9ucy5pc1NldCgndGFibGVfZGVmYXVsdF9hdHRyaWJ1dGVzJykgPyBkZWZhdWx0QXR0cmlidXRlcyA6IGRldGVybWluZURlZmF1bHRBdHRyaWJ1dGVzKGVkaXRvciwgZGVmYXVsdEF0dHJpYnV0ZXMpO1xufTtcblxuZXhwb3J0IHtcbiAgcmVnaXN0ZXIsXG4gIGdldERlZmF1bHRBdHRyaWJ1dGVzLFxuICBnZXREZWZhdWx0U3R5bGVzLFxuICBoYXNBZHZhbmNlZENlbGxUYWIsXG4gIGhhc0FkdmFuY2VkUm93VGFiLFxuICBoYXNBZHZhbmNlZFRhYmxlVGFiLFxuICBoYXNBcHBlYXJhbmNlT3B0aW9ucyxcbiAgaGFzVGFibGVHcmlkLFxuICBzaG91bGRTdHlsZVdpdGhDc3MsXG4gIGdldENlbGxDbGFzc0xpc3QsXG4gIGdldFJvd0NsYXNzTGlzdCxcbiAgZ2V0VGFibGVDbGFzc0xpc3QsXG4gIGdldFRvb2xiYXIsXG4gIGdldFRhYmxlQm9yZGVyV2lkdGhzLFxuICBnZXRUYWJsZUJvcmRlclN0eWxlcyxcbiAgZ2V0VGFibGVCYWNrZ3JvdW5kQ29sb3JNYXAsXG4gIGdldFRhYmxlQm9yZGVyQ29sb3JNYXBcbn07XG4iLCIvKlxuIE5PVEU6IFRoaXMgZmlsZSBpcyBwYXJ0aWFsbHkgZHVwbGljYXRlZCBpbiB0aGUgZm9sbG93aW5nIGxvY2F0aW9uczpcbiAgLSBtb2RlbHMvZG9tL3RhYmxlL2NvcmUvVGFibGVVdGlscy50c1xuICAtIGFkdnRhYmxlXG4gTWFrZSBzdXJlIHRoYXQgaWYgbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBmaWxlLCB0aGUgb3RoZXIgZmlsZXMgYXJlIHVwZGF0ZWQgYXMgd2VsbFxuICovXG5cbmltcG9ydCB7IENvbXBhcmUsIENvbnRlbnRFZGl0YWJsZSwgUHJlZGljYXRlRmluZCwgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5jb25zdCBnZXROb2RlTmFtZSA9IChlbG06IE5vZGUpOiBzdHJpbmcgPT5cbiAgZWxtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbmNvbnN0IGdldEJvZHkgPSAoZWRpdG9yOiBFZGl0b3IpOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5nZXRCb2R5KCkpO1xuXG5jb25zdCBnZXRJc1Jvb3QgPSAoZWRpdG9yOiBFZGl0b3IpID0+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+XG4gIENvbXBhcmUuZXEoZWxlbWVudCwgZ2V0Qm9keShlZGl0b3IpKTtcblxuY29uc3QgcmVtb3ZlUHhTdWZmaXggPSAoc2l6ZTogc3RyaW5nKTogc3RyaW5nID0+XG4gIHNpemUgPyBzaXplLnJlcGxhY2UoL3B4JC8sICcnKSA6ICcnO1xuXG5jb25zdCBhZGRQeFN1ZmZpeCA9IChzaXplOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgL15cXGQrKFxcLlxcZCspPyQvLnRlc3Qoc2l6ZSkgPyBzaXplICsgJ3B4JyA6IHNpemU7XG5cbmNvbnN0IGdldFNlbGVjdGlvblN0YXJ0ID0gKGVkaXRvcjogRWRpdG9yKTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5zZWxlY3Rpb24uZ2V0U3RhcnQoKSk7XG5cbmNvbnN0IGdldFNlbGVjdGlvbkVuZCA9IChlZGl0b3I6IEVkaXRvcik6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiA9PlxuICBTdWdhckVsZW1lbnQuZnJvbURvbShlZGl0b3Iuc2VsZWN0aW9uLmdldEVuZCgpKTtcblxuY29uc3QgaXNJbkVkaXRhYmxlQ29udGV4dCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+XG4gIFByZWRpY2F0ZUZpbmQuY2xvc2VzdChjZWxsLCBTdWdhck5vZGUuaXNUYWcoJ3RhYmxlJykpLmZvcmFsbChDb250ZW50RWRpdGFibGUuaXNFZGl0YWJsZSk7XG5cbmV4cG9ydCB7XG4gIGdldE5vZGVOYW1lLFxuICBnZXRCb2R5LFxuICBnZXRJc1Jvb3QsXG4gIGFkZFB4U3VmZml4LFxuICByZW1vdmVQeFN1ZmZpeCxcbiAgZ2V0U2VsZWN0aW9uU3RhcnQsXG4gIGdldFNlbGVjdGlvbkVuZCxcbiAgaXNJbkVkaXRhYmxlQ29udGV4dFxufTtcbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIHBhcnRpYWxseSBkdXBsaWNhdGVkIGluIHRoZSBmb2xsb3dpbmcgbG9jYXRpb25zOlxuICAtIG1vZGVscy9kb20vdGFibGUvcXVlcmllcy9UYWJsZVRhcmdldHMudHNcbiAgLSBhZHZ0YWJsZVxuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgeyBDZWxsT3BTZWxlY3Rpb24gfSBmcm9tICdAZXBob3gvZGFyd2luJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgUnVuT3BlcmF0aW9uIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgeyBlcGhlbWVyYSB9IGZyb20gJy4uL3NlbGVjdGlvbi9FcGhlbWVyYSc7XG5cbmNvbnN0IG5vTWVudSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDYXB0aW9uRWxlbWVudD4pOiBSdW5PcGVyYXRpb24uQ29tYmluZWRUYXJnZXRzID0+ICh7XG4gIGVsZW1lbnQ6IGNlbGwsXG4gIG1lcmdhYmxlOiBPcHRpb25hbC5ub25lKCksXG4gIHVubWVyZ2FibGU6IE9wdGlvbmFsLm5vbmUoKSxcbiAgc2VsZWN0aW9uOiBbIGNlbGwgXVxufSk7XG5cbmNvbnN0IGZvck1lbnUgPSAoc2VsZWN0ZWRDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogUnVuT3BlcmF0aW9uLkNvbWJpbmVkVGFyZ2V0cyA9PiAoe1xuICBlbGVtZW50OiBjZWxsLFxuICBtZXJnYWJsZTogQ2VsbE9wU2VsZWN0aW9uLm1lcmdhYmxlKHRhYmxlLCBzZWxlY3RlZENlbGxzLCBlcGhlbWVyYSksXG4gIHVubWVyZ2FibGU6IENlbGxPcFNlbGVjdGlvbi51bm1lcmdhYmxlKHNlbGVjdGVkQ2VsbHMpLFxuICBzZWxlY3Rpb246IENlbGxPcFNlbGVjdGlvbi5zZWxlY3Rpb24oc2VsZWN0ZWRDZWxscylcbn0pO1xuXG5leHBvcnQge1xuICBub01lbnUsXG4gIGZvck1lbnVcbn07XG5cbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIGR1cGxpY2F0ZWQgaW4gdGhlIGZvbGxvd2luZyBsb2NhdGlvbnM6XG4gIC0gbW9kZWxzL2RvbS90YWJsZS9zZWxlY3Rpb24vRXBoZW1lcmEudHNcbiAgLSBhZHZ0YWJsZVxuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IEVwaGVtZXJhIGFzIERhcndpbkVwaGVtZXJhIH0gZnJvbSAnQGVwaG94L2Rhcndpbic7XG5cbmNvbnN0IHN0clNlbGVjdGVkID0gJ2RhdGEtbWNlLXNlbGVjdGVkJztcbmNvbnN0IHN0clNlbGVjdGVkU2VsZWN0b3IgPSAndGRbJyArIHN0clNlbGVjdGVkICsgJ10sdGhbJyArIHN0clNlbGVjdGVkICsgJ10nO1xuLy8gdXNlZCB3aXRoIG5vdCBzZWxlY3RvcnNcbmNvbnN0IHN0ckF0dHJpYnV0ZVNlbGVjdG9yID0gJ1snICsgc3RyU2VsZWN0ZWQgKyAnXSc7XG5jb25zdCBzdHJGaXJzdFNlbGVjdGVkID0gJ2RhdGEtbWNlLWZpcnN0LXNlbGVjdGVkJztcbmNvbnN0IHN0ckZpcnN0U2VsZWN0ZWRTZWxlY3RvciA9ICd0ZFsnICsgc3RyRmlyc3RTZWxlY3RlZCArICddLHRoWycgKyBzdHJGaXJzdFNlbGVjdGVkICsgJ10nO1xuY29uc3Qgc3RyTGFzdFNlbGVjdGVkID0gJ2RhdGEtbWNlLWxhc3Qtc2VsZWN0ZWQnO1xuY29uc3Qgc3RyTGFzdFNlbGVjdGVkU2VsZWN0b3IgPSAndGRbJyArIHN0ckxhc3RTZWxlY3RlZCArICddLHRoWycgKyBzdHJMYXN0U2VsZWN0ZWQgKyAnXSc7XG5cbmV4cG9ydCBjb25zdCBhdHRyaWJ1dGVTZWxlY3RvciA9IHN0ckF0dHJpYnV0ZVNlbGVjdG9yO1xuXG5leHBvcnQgY29uc3QgZXBoZW1lcmE6IERhcndpbkVwaGVtZXJhID0ge1xuICBzZWxlY3RlZDogc3RyU2VsZWN0ZWQsXG4gIHNlbGVjdGVkU2VsZWN0b3I6IHN0clNlbGVjdGVkU2VsZWN0b3IsXG4gIGZpcnN0U2VsZWN0ZWQ6IHN0ckZpcnN0U2VsZWN0ZWQsXG4gIGZpcnN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyRmlyc3RTZWxlY3RlZFNlbGVjdG9yLFxuICBsYXN0U2VsZWN0ZWQ6IHN0ckxhc3RTZWxlY3RlZCxcbiAgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IHN0ckxhc3RTZWxlY3RlZFNlbGVjdG9yXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBDZWxsLCBGdW4sIE9wdGlvbmFsLCBPcHRpb25hbHMsIFRodW5rIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFJ1bk9wZXJhdGlvbiwgdHlwZSBTdHJ1Y3RzLCBUYWJsZUxvb2t1cCwgV2FyZWhvdXNlIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQ29tcGFyZSwgU2VsZWN0b3JFeGlzdHMsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBNZW51LCBUb29sYmFyIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS91aS9VaSc7XG5cbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xuaW1wb3J0ICogYXMgVGFibGVUYXJnZXRzIGZyb20gJy4uL3F1ZXJpZXMvVGFibGVUYXJnZXRzJztcblxuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi9UYWJsZVNlbGVjdGlvbic7XG5cbnR5cGUgVWlBcGkgPSBNZW51Lk1lbnVJdGVtSW5zdGFuY2VBcGkgfCBUb29sYmFyLlRvb2xiYXJCdXR0b25JbnN0YW5jZUFwaTtcbnR5cGUgVWlUb2dnbGVBcGkgPSBNZW51LlRvZ2dsZU1lbnVJdGVtSW5zdGFuY2VBcGkgfCBUb29sYmFyLlRvb2xiYXJUb2dnbGVCdXR0b25JbnN0YW5jZUFwaTtcblxuLypcbiBvbkFueSAtIGRpc2FibGUgaWYgYW55IGNvbHVtbiBpbiB0aGUgc2VsZWN0aW9uIGlzIGxvY2tlZFxuIG9uRmlyc3QgLSBkaXNhYmxlIGlmIHRoZSBmaXJzdCBjb2x1bW4gaW4gdGhlIHRhYmxlIGlzIHNlbGVjdGVkIGFuZCBpcyBsb2NrZWRcbiBvbkxhc3QgLSBkaXNhYmxlIGlmIHRoZSB0aGUgbGFzdCBjb2x1bW4gaW4gdGhlIHRhYmxlIGlzIHNlbGVjdGVkIGFuZCBpcyBsb2NrZWRcbiAqL1xuZXhwb3J0IGNvbnN0IGVudW0gTG9ja2VkRGlzYWJsZSB7XG4gIG9uQW55ID0gJ29uQW55JyxcbiAgb25GaXJzdCA9ICdvbkZpcnN0JyxcbiAgb25MYXN0ID0gJ29uTGFzdCdcbn1cbnR5cGUgTG9ja2VkRGlzYWJsZVN0cnMgPSBrZXlvZiB0eXBlb2YgTG9ja2VkRGlzYWJsZTtcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25UYXJnZXRzIHtcbiAgcmVhZG9ubHkgb25TZXR1cFRhYmxlOiAoYXBpOiBVaUFwaSkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25TZXR1cENlbGxPclJvdzogKGFwaTogVWlBcGkpID0+ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uU2V0dXBDb2x1bW46IChsb2NrZWREaXNhYmxlOiBMb2NrZWREaXNhYmxlKSA9PiAoYXBpOiBVaUFwaSkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25TZXR1cFBhc3RlYWJsZTogKGdldENsaXBib2FyZERhdGE6ICgpID0+IE9wdGlvbmFsPFN1Z2FyRWxlbWVudFtdPikgPT4gKGFwaTogVWlBcGkpID0+ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uU2V0dXBQYXN0ZWFibGVDb2x1bW46IChnZXRDbGlwYm9hcmREYXRhOiAoKSA9PiBPcHRpb25hbDxTdWdhckVsZW1lbnRbXT4sIGxvY2tlZERpc2FibGU6IExvY2tlZERpc2FibGUpID0+IChhcGk6IFVpQXBpKSA9PiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBvblNldHVwTWVyZ2VhYmxlOiAoYXBpOiBVaUFwaSkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25TZXR1cFVubWVyZ2VhYmxlOiAoYXBpOiBVaUFwaSkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25TZXR1cFRhYmxlV2l0aENhcHRpb246IChhcGk6IFVpVG9nZ2xlQXBpKSA9PiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBvblNldHVwVGFibGVSb3dIZWFkZXJzOiAoYXBpOiBVaVRvZ2dsZUFwaSkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25TZXR1cFRhYmxlQ29sdW1uSGVhZGVyczogKGFwaTogVWlUb2dnbGVBcGkpID0+ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IHJlc2V0VGFyZ2V0czogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgdGFyZ2V0czogKCkgPT4gT3B0aW9uYWw8UnVuT3BlcmF0aW9uLkNvbWJpbmVkVGFyZ2V0cz47XG59XG5cbmludGVyZmFjZSBFeHRyYWN0ZWRTZWxlY3Rpb25EZXRhaWxzIHtcbiAgcmVhZG9ubHkgbWVyZ2VhYmxlOiBib29sZWFuO1xuICByZWFkb25seSB1bm1lcmdlYWJsZTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgbG9ja2VkOiBSZWNvcmQ8TG9ja2VkRGlzYWJsZVN0cnMsIGJvb2xlYW4+O1xufVxuXG50eXBlIFRhcmdldFNldHVwQ2FsbGJhY2sgPSAodGFyZ2V0czogUnVuT3BlcmF0aW9uLkNvbWJpbmVkVGFyZ2V0cykgPT4gYm9vbGVhbjtcblxuZXhwb3J0IGNvbnN0IGdldFNlbGVjdGlvblRhcmdldHMgPSAoZWRpdG9yOiBFZGl0b3IpOiBTZWxlY3Rpb25UYXJnZXRzID0+IHtcbiAgY29uc3QgdGFyZ2V0cyA9IENlbGw8T3B0aW9uYWw8UnVuT3BlcmF0aW9uLkNvbWJpbmVkVGFyZ2V0cz4+KE9wdGlvbmFsLm5vbmUoKSk7XG4gIGNvbnN0IGNoYW5nZUhhbmRsZXJzID0gQ2VsbDxBcnJheTwoKSA9PiB2b2lkPj4oW10pO1xuICBsZXQgc2VsZWN0aW9uRGV0YWlscyA9IE9wdGlvbmFsLm5vbmU8RXh0cmFjdGVkU2VsZWN0aW9uRGV0YWlscz4oKTtcblxuICBjb25zdCBpc0NhcHRpb24gPSBTdWdhck5vZGUuaXNUYWcoJ2NhcHRpb24nKTtcbiAgY29uc3QgaXNEaXNhYmxlZEZvclNlbGVjdGlvbiA9IChrZXk6IGtleW9mIEV4dHJhY3RlZFNlbGVjdGlvbkRldGFpbHMpID0+IHNlbGVjdGlvbkRldGFpbHMuZm9yYWxsKChkZXRhaWxzKSA9PiAhZGV0YWlsc1trZXldKTtcbiAgY29uc3QgZ2V0U3RhcnQgPSAoKSA9PiBUYWJsZVNlbGVjdGlvbi5nZXRTZWxlY3Rpb25DZWxsT3JDYXB0aW9uKFV0aWxzLmdldFNlbGVjdGlvblN0YXJ0KGVkaXRvciksIFV0aWxzLmdldElzUm9vdChlZGl0b3IpKTtcbiAgY29uc3QgZ2V0RW5kID0gKCkgPT4gVGFibGVTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uQ2VsbE9yQ2FwdGlvbihVdGlscy5nZXRTZWxlY3Rpb25FbmQoZWRpdG9yKSwgVXRpbHMuZ2V0SXNSb290KGVkaXRvcikpO1xuXG4gIGNvbnN0IGZpbmRUYXJnZXRzID0gKCk6IE9wdGlvbmFsPFJ1bk9wZXJhdGlvbi5Db21iaW5lZFRhcmdldHM+ID0+XG4gICAgZ2V0U3RhcnQoKS5iaW5kKChzdGFydENlbGxPckNhcHRpb24pID0+XG4gICAgICBPcHRpb25hbHMuZmxhdHRlbihcbiAgICAgICAgT3B0aW9uYWxzLmxpZnQyKFRhYmxlTG9va3VwLnRhYmxlKHN0YXJ0Q2VsbE9yQ2FwdGlvbiksIGdldEVuZCgpLmJpbmQoVGFibGVMb29rdXAudGFibGUpLCAoc3RhcnRUYWJsZSwgZW5kVGFibGUpID0+IHtcbiAgICAgICAgICBpZiAoQ29tcGFyZS5lcShzdGFydFRhYmxlLCBlbmRUYWJsZSkpIHtcbiAgICAgICAgICAgIGlmIChpc0NhcHRpb24oc3RhcnRDZWxsT3JDYXB0aW9uKSkge1xuICAgICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShUYWJsZVRhcmdldHMubm9NZW51KHN0YXJ0Q2VsbE9yQ2FwdGlvbikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoVGFibGVUYXJnZXRzLmZvck1lbnUoVGFibGVTZWxlY3Rpb24uZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvciksIHN0YXJ0VGFibGUsIHN0YXJ0Q2VsbE9yQ2FwdGlvbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKTtcblxuICBjb25zdCBnZXRFeHRyYWN0ZWREZXRhaWxzID0gKHRhcmdldHM6IFJ1bk9wZXJhdGlvbi5Db21iaW5lZFRhcmdldHMpOiBPcHRpb25hbDxFeHRyYWN0ZWRTZWxlY3Rpb25EZXRhaWxzPiA9PiB7XG4gICAgY29uc3QgdGFibGVPcHQgPSBUYWJsZUxvb2t1cC50YWJsZSh0YXJnZXRzLmVsZW1lbnQpO1xuICAgIHJldHVybiB0YWJsZU9wdC5tYXAoKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkQ2VsbHMgPSBSdW5PcGVyYXRpb24ub25DZWxscyh3YXJlaG91c2UsIHRhcmdldHMpLmdldE9yKFtdIGFzIFN0cnVjdHMuRGV0YWlsRXh0W10pO1xuXG4gICAgICBjb25zdCBsb2NrZWQgPSBBcnIuZm9sZGwoc2VsZWN0ZWRDZWxscywgKGFjYywgY2VsbCkgPT4ge1xuICAgICAgICBpZiAoY2VsbC5pc0xvY2tlZCkge1xuICAgICAgICAgIGFjYy5vbkFueSA9IHRydWU7XG4gICAgICAgICAgaWYgKGNlbGwuY29sdW1uID09PSAwKSB7XG4gICAgICAgICAgICBhY2Mub25GaXJzdCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChjZWxsLmNvbHVtbiArIGNlbGwuY29sc3BhbiA+PSB3YXJlaG91c2UuZ3JpZC5jb2x1bW5zKSB7XG4gICAgICAgICAgICBhY2Mub25MYXN0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHsgb25Bbnk6IGZhbHNlLCBvbkZpcnN0OiBmYWxzZSwgb25MYXN0OiBmYWxzZSB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVyZ2VhYmxlOiBSdW5PcGVyYXRpb24ub25VbmxvY2tlZE1lcmdhYmxlKHdhcmVob3VzZSwgdGFyZ2V0cykuaXNTb21lKCksXG4gICAgICAgIHVubWVyZ2VhYmxlOiBSdW5PcGVyYXRpb24ub25VbmxvY2tlZFVubWVyZ2FibGUod2FyZWhvdXNlLCB0YXJnZXRzKS5pc1NvbWUoKSxcbiAgICAgICAgbG9ja2VkXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0VGFyZ2V0cyA9ICgpID0+IHtcbiAgICAvLyBSZXNldCB0aGUgdGFyZ2V0c1xuICAgIHRhcmdldHMuc2V0KFRodW5rLmNhY2hlZChmaW5kVGFyZ2V0cykoKSk7XG5cbiAgICAvLyBSZXNldCB0aGUgc2VsZWN0aW9uIGRldGFpbHNcbiAgICBzZWxlY3Rpb25EZXRhaWxzID0gdGFyZ2V0cy5nZXQoKS5iaW5kKGdldEV4dHJhY3RlZERldGFpbHMpO1xuXG4gICAgLy8gVHJpZ2dlciBjaGFuZ2UgaGFuZGxlcnNcbiAgICBBcnIuZWFjaChjaGFuZ2VIYW5kbGVycy5nZXQoKSwgRnVuLmNhbGwpO1xuICB9O1xuXG4gIGNvbnN0IHNldHVwSGFuZGxlciA9IChoYW5kbGVyOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgLy8gRXhlY3V0ZSB0aGUgaGFuZGxlciB0byBzZXQgdGhlIGluaXRpYWwgc3RhdGVcbiAgICBoYW5kbGVyKCk7XG5cbiAgICAvLyBSZWdpc3RlciB0aGUgaGFuZGxlciBzbyB3ZSBjYW4gdXBkYXRlIHRoZSBzdGF0ZSB3aGVuIHJlc2V0dGluZyB0YXJnZXRzXG4gICAgY2hhbmdlSGFuZGxlcnMuc2V0KGNoYW5nZUhhbmRsZXJzLmdldCgpLmNvbmNhdChbIGhhbmRsZXIgXSkpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNoYW5nZUhhbmRsZXJzLnNldChBcnIuZmlsdGVyKGNoYW5nZUhhbmRsZXJzLmdldCgpLCAoaCkgPT4gaCAhPT0gaGFuZGxlcikpO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3Qgb25TZXR1cCA9IChhcGk6IFVpQXBpLCBpc0Rpc2FibGVkOiBUYXJnZXRTZXR1cENhbGxiYWNrKSA9PlxuICAgIHNldHVwSGFuZGxlcigoKSA9PlxuICAgICAgdGFyZ2V0cy5nZXQoKS5mb2xkKCgpID0+IHtcbiAgICAgICAgYXBpLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgICAgfSwgKHRhcmdldHMpID0+IHtcbiAgICAgICAgYXBpLnNldEVuYWJsZWQoIWlzRGlzYWJsZWQodGFyZ2V0cykgJiYgZWRpdG9yLnNlbGVjdGlvbi5pc0VkaXRhYmxlKCkpO1xuICAgICAgfSlcbiAgICApO1xuXG4gIGNvbnN0IG9uU2V0dXBXaXRoVG9nZ2xlID0gKGFwaTogVWlUb2dnbGVBcGksIGlzRGlzYWJsZWQ6IFRhcmdldFNldHVwQ2FsbGJhY2ssIGlzQWN0aXZlOiBUYXJnZXRTZXR1cENhbGxiYWNrKSA9PlxuICAgIHNldHVwSGFuZGxlcigoKSA9PlxuICAgICAgdGFyZ2V0cy5nZXQoKS5mb2xkKCgpID0+IHtcbiAgICAgICAgYXBpLnNldEVuYWJsZWQoZmFsc2UpO1xuICAgICAgICBhcGkuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgIH0sICh0YXJnZXRzKSA9PiB7XG4gICAgICAgIGFwaS5zZXRFbmFibGVkKCFpc0Rpc2FibGVkKHRhcmdldHMpICYmIGVkaXRvci5zZWxlY3Rpb24uaXNFZGl0YWJsZSgpKTtcbiAgICAgICAgYXBpLnNldEFjdGl2ZShpc0FjdGl2ZSh0YXJnZXRzKSk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgY29uc3QgaXNEaXNhYmxlZEZyb21Mb2NrZWQgPSAobG9ja2VkRGlzYWJsZTogTG9ja2VkRGlzYWJsZSkgPT5cbiAgICBzZWxlY3Rpb25EZXRhaWxzLmV4aXN0cygoZGV0YWlscykgPT4gZGV0YWlscy5sb2NrZWRbbG9ja2VkRGlzYWJsZV0pO1xuXG4gIGNvbnN0IG9uU2V0dXBUYWJsZSA9IChhcGk6IFVpQXBpKSA9PiBvblNldHVwKGFwaSwgKF8pID0+IGZhbHNlKTtcbiAgY29uc3Qgb25TZXR1cENlbGxPclJvdyA9IChhcGk6IFVpQXBpKSA9PiBvblNldHVwKGFwaSwgKHRhcmdldHMpID0+IGlzQ2FwdGlvbih0YXJnZXRzLmVsZW1lbnQpKTtcbiAgY29uc3Qgb25TZXR1cENvbHVtbiA9IChsb2NrZWREaXNhYmxlOiBMb2NrZWREaXNhYmxlKSA9PiAoYXBpOiBVaUFwaSkgPT4gb25TZXR1cChhcGksICh0YXJnZXRzKSA9PiBpc0NhcHRpb24odGFyZ2V0cy5lbGVtZW50KSB8fCBpc0Rpc2FibGVkRnJvbUxvY2tlZChsb2NrZWREaXNhYmxlKSk7XG4gIGNvbnN0IG9uU2V0dXBQYXN0ZWFibGUgPSAoZ2V0Q2xpcGJvYXJkRGF0YTogKCkgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50W10+KSA9PiAoYXBpOiBVaUFwaSkgPT5cbiAgICBvblNldHVwKGFwaSwgKHRhcmdldHMpID0+IGlzQ2FwdGlvbih0YXJnZXRzLmVsZW1lbnQpIHx8IGdldENsaXBib2FyZERhdGEoKS5pc05vbmUoKSk7XG4gIGNvbnN0IG9uU2V0dXBQYXN0ZWFibGVDb2x1bW4gPSAoZ2V0Q2xpcGJvYXJkRGF0YTogKCkgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50W10+LCBsb2NrZWREaXNhYmxlOiBMb2NrZWREaXNhYmxlKSA9PiAoYXBpOiBVaUFwaSkgPT5cbiAgICBvblNldHVwKGFwaSwgKHRhcmdldHMpID0+IGlzQ2FwdGlvbih0YXJnZXRzLmVsZW1lbnQpIHx8IGdldENsaXBib2FyZERhdGEoKS5pc05vbmUoKSB8fCBpc0Rpc2FibGVkRnJvbUxvY2tlZChsb2NrZWREaXNhYmxlKSk7XG4gIGNvbnN0IG9uU2V0dXBNZXJnZWFibGUgPSAoYXBpOiBVaUFwaSkgPT4gb25TZXR1cChhcGksIChfdGFyZ2V0cykgPT4gaXNEaXNhYmxlZEZvclNlbGVjdGlvbignbWVyZ2VhYmxlJykpO1xuICBjb25zdCBvblNldHVwVW5tZXJnZWFibGUgPSAoYXBpOiBVaUFwaSkgPT4gb25TZXR1cChhcGksIChfdGFyZ2V0cykgPT4gaXNEaXNhYmxlZEZvclNlbGVjdGlvbigndW5tZXJnZWFibGUnKSk7XG5cbiAgY29uc3Qgb25TZXR1cFRhYmxlV2l0aENhcHRpb24gPSAoYXBpOiBVaVRvZ2dsZUFwaSkgPT4ge1xuICAgIHJldHVybiBvblNldHVwV2l0aFRvZ2dsZShhcGksIEZ1bi5uZXZlciwgKHRhcmdldHMpID0+IHtcbiAgICAgIGNvbnN0IHRhYmxlT3B0ID0gVGFibGVMb29rdXAudGFibGUodGFyZ2V0cy5lbGVtZW50LCBVdGlscy5nZXRJc1Jvb3QoZWRpdG9yKSk7XG4gICAgICByZXR1cm4gdGFibGVPcHQuZXhpc3RzKCh0YWJsZSkgPT4gU2VsZWN0b3JFeGlzdHMuY2hpbGQodGFibGUsICdjYXB0aW9uJykpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9uU2V0dXBUYWJsZUhlYWRlcnMgPSAoY29tbWFuZDogc3RyaW5nLCBoZWFkZXJUeXBlOiAnaGVhZGVyJyB8ICd0aCcpID0+XG4gICAgKGFwaTogVWlUb2dnbGVBcGkpOiAoKSA9PiB2b2lkID0+IHtcbiAgICAgIHJldHVybiBvblNldHVwV2l0aFRvZ2dsZShhcGksXG4gICAgICAgICh0YXJnZXRzKSA9PiBpc0NhcHRpb24odGFyZ2V0cy5lbGVtZW50KSxcbiAgICAgICAgKCkgPT4gZWRpdG9yLnF1ZXJ5Q29tbWFuZFZhbHVlKGNvbW1hbmQpID09PSBoZWFkZXJUeXBlXG4gICAgICApO1xuICAgIH07XG5cbiAgY29uc3Qgb25TZXR1cFRhYmxlUm93SGVhZGVycyA9IG9uU2V0dXBUYWJsZUhlYWRlcnMoJ21jZVRhYmxlUm93VHlwZScsICdoZWFkZXInKTtcblxuICBjb25zdCBvblNldHVwVGFibGVDb2x1bW5IZWFkZXJzID0gb25TZXR1cFRhYmxlSGVhZGVycygnbWNlVGFibGVDb2xUeXBlJywgJ3RoJyk7XG5cbiAgZWRpdG9yLm9uKCdOb2RlQ2hhbmdlIEV4ZWNDb21tYW5kIFRhYmxlU2VsZWN0b3JDaGFuZ2UnLCByZXNldFRhcmdldHMpO1xuXG4gIHJldHVybiB7XG4gICAgb25TZXR1cFRhYmxlLFxuICAgIG9uU2V0dXBDZWxsT3JSb3csXG4gICAgb25TZXR1cENvbHVtbixcbiAgICBvblNldHVwUGFzdGVhYmxlLFxuICAgIG9uU2V0dXBQYXN0ZWFibGVDb2x1bW4sXG4gICAgb25TZXR1cE1lcmdlYWJsZSxcbiAgICBvblNldHVwVW5tZXJnZWFibGUsXG4gICAgcmVzZXRUYXJnZXRzLFxuICAgIG9uU2V0dXBUYWJsZVdpdGhDYXB0aW9uLFxuICAgIG9uU2V0dXBUYWJsZVJvd0hlYWRlcnMsXG4gICAgb25TZXR1cFRhYmxlQ29sdW1uSGVhZGVycyxcbiAgICB0YXJnZXRzOiB0YXJnZXRzLmdldFxuICB9O1xufTtcbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIHBhcnRpYWxseSBkdXBsaWNhdGVkIGluIHRoZSBmb2xsb3dpbmcgbG9jYXRpb25zOlxuICAtIG1vZGVscy9kb20vdGFibGUvc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uLnRzXG4gIC0gYWR2dGFibGVcbiBNYWtlIHN1cmUgdGhhdCBpZiBtYWtpbmcgY2hhbmdlcyB0byB0aGlzIGZpbGUsIHRoZSBvdGhlciBmaWxlcyBhcmUgdXBkYXRlZCBhcyB3ZWxsXG4gKi9cblxuaW1wb3J0IHsgVGFibGVTZWxlY3Rpb24gfSBmcm9tICdAZXBob3gvZGFyd2luJztcbmltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbHMgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgVGFibGVMb29rdXAgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENvbXBhcmUsIFNlbGVjdG9yRmluZCwgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyRWxlbWVudHMsIFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmltcG9ydCB7IGVwaGVtZXJhIH0gZnJvbSAnLi9FcGhlbWVyYSc7XG5cbmNvbnN0IGdldFNlbGVjdGlvbkNlbGxGYWxsYmFjayA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+XG4gIFRhYmxlTG9va3VwLnRhYmxlKGVsZW1lbnQpLmJpbmQoKHRhYmxlKSA9PlxuICAgIFRhYmxlU2VsZWN0aW9uLnJldHJpZXZlKHRhYmxlLCBlcGhlbWVyYS5maXJzdFNlbGVjdGVkU2VsZWN0b3IpXG4gICkuZm9sZChGdW4uY29uc3RhbnQoZWxlbWVudCksIChjZWxscykgPT4gY2VsbHNbMF0pO1xuXG5jb25zdCBnZXRTZWxlY3Rpb25Gcm9tU2VsZWN0b3IgPSA8VCBleHRlbmRzIEVsZW1lbnQ+KHNlbGVjdG9yOiBzdHJpbmcpID0+XG4gIChpbml0Q2VsbDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q/OiAoZWw6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT4ge1xuICAgIGNvbnN0IGNlbGxOYW1lID0gU3VnYXJOb2RlLm5hbWUoaW5pdENlbGwpO1xuICAgIGNvbnN0IGNlbGwgPSBjZWxsTmFtZSA9PT0gJ2NvbCcgfHwgY2VsbE5hbWUgPT09ICdjb2xncm91cCcgPyBnZXRTZWxlY3Rpb25DZWxsRmFsbGJhY2soaW5pdENlbGwpIDogaW5pdENlbGw7XG4gICAgcmV0dXJuIFNlbGVjdG9yRmluZC5jbG9zZXN0PFQ+KGNlbGwsIHNlbGVjdG9yLCBpc1Jvb3QpO1xuICB9O1xuXG5jb25zdCBnZXRTZWxlY3Rpb25DZWxsT3JDYXB0aW9uID0gZ2V0U2VsZWN0aW9uRnJvbVNlbGVjdG9yPEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQ+KCd0aCx0ZCxjYXB0aW9uJyk7XG5cbmNvbnN0IGdldFNlbGVjdGlvbkNlbGwgPSBnZXRTZWxlY3Rpb25Gcm9tU2VsZWN0b3I8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KCd0aCx0ZCcpO1xuXG5jb25zdCBnZXRDZWxsc0Zyb21TZWxlY3Rpb24gPSAoZWRpdG9yOiBFZGl0b3IpOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPT5cbiAgU3VnYXJFbGVtZW50cy5mcm9tRG9tKGVkaXRvci5tb2RlbC50YWJsZS5nZXRTZWxlY3RlZENlbGxzKCkpO1xuXG5jb25zdCBnZXRSb3dzRnJvbVNlbGVjdGlvbiA9IChzZWxlY3RlZDogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10gPT4ge1xuICBjb25zdCBjZWxsT3B0ID0gZ2V0U2VsZWN0aW9uQ2VsbChzZWxlY3RlZCk7XG4gIGNvbnN0IHJvd3NPcHQgPSBjZWxsT3B0LmJpbmQoKGNlbGwpID0+IFRhYmxlTG9va3VwLnRhYmxlKGNlbGwpKVxuICAgIC5tYXAoKHRhYmxlKSA9PiBUYWJsZUxvb2t1cC5yb3dzKHRhYmxlKSk7XG4gIHJldHVybiBPcHRpb25hbHMubGlmdDIoY2VsbE9wdCwgcm93c09wdCwgKGNlbGwsIHJvd3MpID0+XG4gICAgQXJyLmZpbHRlcihyb3dzLCAocm93KSA9PlxuICAgICAgQXJyLmV4aXN0cyhTdWdhckVsZW1lbnRzLmZyb21Eb20ocm93LmRvbS5jZWxscyksIChyb3dDZWxsKSA9PlxuICAgICAgICBBdHRyaWJ1dGUuZ2V0KHJvd0NlbGwsIHNlbGVjdG9yKSA9PT0gJzEnIHx8IENvbXBhcmUuZXEocm93Q2VsbCwgY2VsbClcbiAgICAgIClcbiAgICApXG4gICkuZ2V0T3IoW10pO1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0U2VsZWN0aW9uQ2VsbCxcbiAgZ2V0U2VsZWN0aW9uQ2VsbE9yQ2FwdGlvbixcbiAgZ2V0Um93c0Zyb21TZWxlY3Rpb24sXG4gIGdldENlbGxzRnJvbVNlbGVjdGlvblxufTtcbiIsImltcG9ydCB7IFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBUb29sYmFyIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS91aS9VaSc7XG5cbmltcG9ydCAqIGFzIEZha2VDbGlwYm9hcmQgZnJvbSAnLi4vYXBpL0NsaXBib2FyZCc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcbmltcG9ydCB7IHR5cGUgU2VsZWN0aW9uVGFyZ2V0cywgTG9ja2VkRGlzYWJsZSB9IGZyb20gJy4uL3NlbGVjdGlvbi9TZWxlY3Rpb25UYXJnZXRzJztcblxuaW1wb3J0IHsgdmVydGljYWxBbGlnblZhbHVlcyB9IGZyb20gJy4vQ2VsbEFsaWduVmFsdWVzJztcbmltcG9ydCB7IGFwcGx5VGFibGVDZWxsU3R5bGUsIGNoYW5nZUNvbHVtbkhlYWRlciwgY2hhbmdlUm93SGVhZGVyLCBmaWx0ZXJOb25lSXRlbSwgYnVpbGRDb2xvck1lbnUsIGdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2sgfSBmcm9tICcuL1VpVXRpbHMnO1xuXG5pbnRlcmZhY2UgQWRkQnV0dG9uU3BlYzxUPiB7XG4gIHJlYWRvbmx5IHRvb2x0aXA6IHN0cmluZztcbiAgcmVhZG9ubHkgY29tbWFuZDogc3RyaW5nO1xuICByZWFkb25seSBpY29uOiBzdHJpbmc7XG4gIHJlYWRvbmx5IG9uU2V0dXA/OiAoYXBpOiBUKSA9PiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBvbkFjdGlvbj86IChhcGk6IFQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IG9uU2V0dXBFZGl0YWJsZSA9IChlZGl0b3I6IEVkaXRvcikgPT4gKGFwaTogVG9vbGJhci5Ub29sYmFyQnV0dG9uSW5zdGFuY2VBcGkpOiBWb2lkRnVuY3Rpb24gPT4ge1xuICBjb25zdCBub2RlQ2hhbmdlZCA9ICgpID0+IHtcbiAgICBhcGkuc2V0RW5hYmxlZChlZGl0b3Iuc2VsZWN0aW9uLmlzRWRpdGFibGUoKSk7XG4gIH07XG5cbiAgZWRpdG9yLm9uKCdOb2RlQ2hhbmdlJywgbm9kZUNoYW5nZWQpO1xuICBub2RlQ2hhbmdlZCgpO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgZWRpdG9yLm9mZignTm9kZUNoYW5nZScsIG5vZGVDaGFuZ2VkKTtcbiAgfTtcbn07XG5cbmNvbnN0IGFkZEJ1dHRvbnMgPSAoZWRpdG9yOiBFZGl0b3IsIHNlbGVjdGlvblRhcmdldHM6IFNlbGVjdGlvblRhcmdldHMpOiB2b2lkID0+IHtcbiAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE1lbnVCdXR0b24oJ3RhYmxlJywge1xuICAgIHRvb2x0aXA6ICdUYWJsZScsXG4gICAgaWNvbjogJ3RhYmxlJyxcbiAgICBvblNldHVwOiBvblNldHVwRWRpdGFibGUoZWRpdG9yKSxcbiAgICBmZXRjaDogKGNhbGxiYWNrKSA9PiBjYWxsYmFjaygnaW5zZXJ0dGFibGUgfCBjZWxsIHJvdyBjb2x1bW4gfCBhZHZ0YWJsZXNvcnQgfCB0YWJsZXByb3BzIGRlbGV0ZXRhYmxlJylcbiAgfSk7XG5cbiAgY29uc3QgY21kID0gKGNvbW1hbmQ6IHN0cmluZykgPT4gKCkgPT4gZWRpdG9yLmV4ZWNDb21tYW5kKGNvbW1hbmQpO1xuXG4gIC8vIFRPRE86IFRJTlktODE3MiBVbndpbmQgdGhpcyB3aGVuIGFuIGFsdGVybmF0aXZlIHNvbHV0aW9uIGlzIGZvdW5kXG4gIGNvbnN0IGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCA9IChuYW1lOiBzdHJpbmcsIHNwZWM6IEFkZEJ1dHRvblNwZWM8VG9vbGJhci5Ub29sYmFyQnV0dG9uSW5zdGFuY2VBcGk+KSA9PiB7XG4gICAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoc3BlYy5jb21tYW5kKSkge1xuICAgICAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZEJ1dHRvbihuYW1lLCB7XG4gICAgICAgIC4uLnNwZWMsXG4gICAgICAgIG9uQWN0aW9uOiBUeXBlLmlzRnVuY3Rpb24oc3BlYy5vbkFjdGlvbikgPyBzcGVjLm9uQWN0aW9uIDogY21kKHNwZWMuY29tbWFuZClcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBUT0RPOiBUSU5ZLTgxNzIgVW53aW5kIHRoaXMgd2hlbiBhbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiBpcyBmb3VuZFxuICBjb25zdCBhZGRUb2dnbGVCdXR0b25JZlJlZ2lzdGVyZWQgPSAobmFtZTogc3RyaW5nLCBzcGVjOiBBZGRCdXR0b25TcGVjPFRvb2xiYXIuVG9vbGJhclRvZ2dsZUJ1dHRvbkluc3RhbmNlQXBpPikgPT4ge1xuICAgIGlmIChlZGl0b3IucXVlcnlDb21tYW5kU3VwcG9ydGVkKHNwZWMuY29tbWFuZCkpIHtcbiAgICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRUb2dnbGVCdXR0b24obmFtZSwge1xuICAgICAgICAuLi5zcGVjLFxuICAgICAgICBvbkFjdGlvbjogVHlwZS5pc0Z1bmN0aW9uKHNwZWMub25BY3Rpb24pID8gc3BlYy5vbkFjdGlvbiA6IGNtZChzcGVjLmNvbW1hbmQpXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZXByb3BzJywge1xuICAgIHRvb2x0aXA6ICdUYWJsZSBwcm9wZXJ0aWVzJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVQcm9wcycsXG4gICAgaWNvbjogJ3RhYmxlJyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBUYWJsZVxuICB9KTtcblxuICBhZGRCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlZGVsZXRlJywge1xuICAgIHRvb2x0aXA6ICdEZWxldGUgdGFibGUnLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZURlbGV0ZScsXG4gICAgaWNvbjogJ3RhYmxlLWRlbGV0ZS10YWJsZScsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGVcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZWNlbGxwcm9wcycsIHtcbiAgICB0b29sdGlwOiAnQ2VsbCBwcm9wZXJ0aWVzJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVDZWxsUHJvcHMnLFxuICAgIGljb246ICd0YWJsZS1jZWxsLXByb3BlcnRpZXMnLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICB9KTtcblxuICBhZGRCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlbWVyZ2VjZWxscycsIHtcbiAgICB0b29sdGlwOiAnTWVyZ2UgY2VsbHMnLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZU1lcmdlQ2VsbHMnLFxuICAgIGljb246ICd0YWJsZS1tZXJnZS1jZWxscycsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwTWVyZ2VhYmxlXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVzcGxpdGNlbGxzJywge1xuICAgIHRvb2x0aXA6ICdTcGxpdCBjZWxsJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVTcGxpdENlbGxzJyxcbiAgICBpY29uOiAndGFibGUtc3BsaXQtY2VsbHMnLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFVubWVyZ2VhYmxlXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVpbnNlcnRyb3diZWZvcmUnLCB7XG4gICAgdG9vbHRpcDogJ0luc2VydCByb3cgYmVmb3JlJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRSb3dCZWZvcmUnLFxuICAgIGljb246ICd0YWJsZS1pbnNlcnQtcm93LWFib3ZlJyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZWluc2VydHJvd2FmdGVyJywge1xuICAgIHRvb2x0aXA6ICdJbnNlcnQgcm93IGFmdGVyJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRSb3dBZnRlcicsXG4gICAgaWNvbjogJ3RhYmxlLWluc2VydC1yb3ctYWZ0ZXInLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICB9KTtcblxuICBhZGRCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlZGVsZXRlcm93Jywge1xuICAgIHRvb2x0aXA6ICdEZWxldGUgcm93JyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVEZWxldGVSb3cnLFxuICAgIGljb246ICd0YWJsZS1kZWxldGUtcm93JyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZXJvd3Byb3BzJywge1xuICAgIHRvb2x0aXA6ICdSb3cgcHJvcGVydGllcycsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlUm93UHJvcHMnLFxuICAgIGljb246ICd0YWJsZS1yb3ctcHJvcGVydGllcycsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVpbnNlcnRjb2xiZWZvcmUnLCB7XG4gICAgdG9vbHRpcDogJ0luc2VydCBjb2x1bW4gYmVmb3JlJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRDb2xCZWZvcmUnLFxuICAgIGljb246ICd0YWJsZS1pbnNlcnQtY29sdW1uLWJlZm9yZScsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25GaXJzdClcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZWluc2VydGNvbGFmdGVyJywge1xuICAgIHRvb2x0aXA6ICdJbnNlcnQgY29sdW1uIGFmdGVyJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRDb2xBZnRlcicsXG4gICAgaWNvbjogJ3RhYmxlLWluc2VydC1jb2x1bW4tYWZ0ZXInLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENvbHVtbihMb2NrZWREaXNhYmxlLm9uTGFzdClcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZWRlbGV0ZWNvbCcsIHtcbiAgICB0b29sdGlwOiAnRGVsZXRlIGNvbHVtbicsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlRGVsZXRlQ29sJyxcbiAgICBpY29uOiAndGFibGUtZGVsZXRlLWNvbHVtbicsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25BbnkpXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVjdXRyb3cnLCB7XG4gICAgdG9vbHRpcDogJ0N1dCByb3cnLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUN1dFJvdycsXG4gICAgaWNvbjogJ2N1dC1yb3cnLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICB9KTtcblxuICBhZGRCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlY29weXJvdycsIHtcbiAgICB0b29sdGlwOiAnQ29weSByb3cnLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUNvcHlSb3cnLFxuICAgIGljb246ICdkdXBsaWNhdGUtcm93JyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZXBhc3Rlcm93YmVmb3JlJywge1xuICAgIHRvb2x0aXA6ICdQYXN0ZSByb3cgYmVmb3JlJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVQYXN0ZVJvd0JlZm9yZScsXG4gICAgaWNvbjogJ3Bhc3RlLXJvdy1iZWZvcmUnLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFBhc3RlYWJsZShGYWtlQ2xpcGJvYXJkLmdldFJvd3MpXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVwYXN0ZXJvd2FmdGVyJywge1xuICAgIHRvb2x0aXA6ICdQYXN0ZSByb3cgYWZ0ZXInLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZVBhc3RlUm93QWZ0ZXInLFxuICAgIGljb246ICdwYXN0ZS1yb3ctYWZ0ZXInLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFBhc3RlYWJsZShGYWtlQ2xpcGJvYXJkLmdldFJvd3MpXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVjdXRjb2wnLCB7XG4gICAgdG9vbHRpcDogJ0N1dCBjb2x1bW4nLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUN1dENvbCcsXG4gICAgaWNvbjogJ2N1dC1jb2x1bW4nLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENvbHVtbihMb2NrZWREaXNhYmxlLm9uQW55KVxuICB9KTtcblxuICBhZGRCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlY29weWNvbCcsIHtcbiAgICB0b29sdGlwOiAnQ29weSBjb2x1bW4nLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUNvcHlDb2wnLFxuICAgIGljb246ICdkdXBsaWNhdGUtY29sdW1uJyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDb2x1bW4oTG9ja2VkRGlzYWJsZS5vbkFueSlcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZXBhc3RlY29sYmVmb3JlJywge1xuICAgIHRvb2x0aXA6ICdQYXN0ZSBjb2x1bW4gYmVmb3JlJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVQYXN0ZUNvbEJlZm9yZScsXG4gICAgaWNvbjogJ3Bhc3RlLWNvbHVtbi1iZWZvcmUnLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFBhc3RlYWJsZUNvbHVtbihGYWtlQ2xpcGJvYXJkLmdldENvbHVtbnMsIExvY2tlZERpc2FibGUub25GaXJzdClcbiAgfSk7XG5cbiAgYWRkQnV0dG9uSWZSZWdpc3RlcmVkKCd0YWJsZXBhc3RlY29sYWZ0ZXInLCB7XG4gICAgdG9vbHRpcDogJ1Bhc3RlIGNvbHVtbiBhZnRlcicsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlUGFzdGVDb2xBZnRlcicsXG4gICAgaWNvbjogJ3Bhc3RlLWNvbHVtbi1hZnRlcicsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwUGFzdGVhYmxlQ29sdW1uKEZha2VDbGlwYm9hcmQuZ2V0Q29sdW1ucywgTG9ja2VkRGlzYWJsZS5vbkxhc3QpXG4gIH0pO1xuXG4gIGFkZEJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVpbnNlcnRkaWFsb2cnLCB7XG4gICAgdG9vbHRpcDogJ0luc2VydCB0YWJsZScsXG4gICAgY29tbWFuZDogJ21jZUluc2VydFRhYmxlRGlhbG9nJyxcbiAgICBpY29uOiAndGFibGUnLFxuICAgIG9uU2V0dXA6IG9uU2V0dXBFZGl0YWJsZShlZGl0b3IpXG4gIH0pO1xuXG4gIGNvbnN0IHRhYmxlQ2xhc3NMaXN0ID0gZmlsdGVyTm9uZUl0ZW0oT3B0aW9ucy5nZXRUYWJsZUNsYXNzTGlzdChlZGl0b3IpKTtcbiAgaWYgKHRhYmxlQ2xhc3NMaXN0Lmxlbmd0aCAhPT0gMCAmJiBlZGl0b3IucXVlcnlDb21tYW5kU3VwcG9ydGVkKCdtY2VUYWJsZVRvZ2dsZUNsYXNzJykpIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUJ1dHRvbigndGFibGVjbGFzcycsIHtcbiAgICAgIGljb246ICd0YWJsZS1jbGFzc2VzJyxcbiAgICAgIHRvb2x0aXA6ICdUYWJsZSBzdHlsZXMnLFxuICAgICAgZmV0Y2g6IGdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2soXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgdGFibGVDbGFzc0xpc3QsXG4gICAgICAgICd0YWJsZWNsYXNzJyxcbiAgICAgICAgKHZhbHVlKSA9PiBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlVG9nZ2xlQ2xhc3MnLCBmYWxzZSwgdmFsdWUpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGVcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHRhYmxlQ2VsbENsYXNzTGlzdCA9IGZpbHRlck5vbmVJdGVtKE9wdGlvbnMuZ2V0Q2VsbENsYXNzTGlzdChlZGl0b3IpKTtcbiAgaWYgKHRhYmxlQ2VsbENsYXNzTGlzdC5sZW5ndGggIT09IDAgJiYgZWRpdG9yLnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCgnbWNlVGFibGVDZWxsVG9nZ2xlQ2xhc3MnKSkge1xuICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRNZW51QnV0dG9uKCd0YWJsZWNlbGxjbGFzcycsIHtcbiAgICAgIGljb246ICd0YWJsZS1jZWxsLWNsYXNzZXMnLFxuICAgICAgdG9vbHRpcDogJ0NlbGwgc3R5bGVzJyxcbiAgICAgIGZldGNoOiBnZW5lcmF0ZU1lbnVJdGVtc0NhbGxiYWNrKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHRhYmxlQ2VsbENsYXNzTGlzdCxcbiAgICAgICAgJ3RhYmxlY2VsbGNsYXNzJyxcbiAgICAgICAgKHZhbHVlKSA9PiBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQ2VsbFRvZ2dsZUNsYXNzJywgZmFsc2UsIHZhbHVlKVxuICAgICAgKSxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogVElOWS04MTcyIFVud2luZCB0aGlzIHdoZW4gYW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gaXMgZm91bmRcbiAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ21jZVRhYmxlQXBwbHlDZWxsU3R5bGUnKSkge1xuICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRNZW51QnV0dG9uKCd0YWJsZWNlbGx2YWxpZ24nLCB7XG4gICAgICBpY29uOiAndmVydGljYWwtYWxpZ24nLFxuICAgICAgdG9vbHRpcDogJ1ZlcnRpY2FsIGFsaWduJyxcbiAgICAgIGZldGNoOiBnZW5lcmF0ZU1lbnVJdGVtc0NhbGxiYWNrKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHZlcnRpY2FsQWxpZ25WYWx1ZXMsXG4gICAgICAgICd0YWJsZWNlbGx2ZXJ0aWNhbGFsaWduJyxcbiAgICAgICAgYXBwbHlUYWJsZUNlbGxTdHlsZShlZGl0b3IsICd2ZXJ0aWNhbC1hbGlnbicpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUJ1dHRvbigndGFibGVjZWxsYm9yZGVyd2lkdGgnLCB7XG4gICAgICBpY29uOiAnYm9yZGVyLXdpZHRoJyxcbiAgICAgIHRvb2x0aXA6ICdCb3JkZXIgd2lkdGgnLFxuICAgICAgZmV0Y2g6IGdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2soXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgT3B0aW9ucy5nZXRUYWJsZUJvcmRlcldpZHRocyhlZGl0b3IpLFxuICAgICAgICAndGFibGVjZWxsYm9yZGVyd2lkdGgnLFxuICAgICAgICBhcHBseVRhYmxlQ2VsbFN0eWxlKGVkaXRvciwgJ2JvcmRlci13aWR0aCcpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUJ1dHRvbigndGFibGVjZWxsYm9yZGVyc3R5bGUnLCB7XG4gICAgICBpY29uOiAnYm9yZGVyLXN0eWxlJyxcbiAgICAgIHRvb2x0aXA6ICdCb3JkZXIgc3R5bGUnLFxuICAgICAgZmV0Y2g6IGdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2soXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgT3B0aW9ucy5nZXRUYWJsZUJvcmRlclN0eWxlcyhlZGl0b3IpLFxuICAgICAgICAndGFibGVjZWxsYm9yZGVyc3R5bGUnLFxuICAgICAgICBhcHBseVRhYmxlQ2VsbFN0eWxlKGVkaXRvciwgJ2JvcmRlci1zdHlsZScpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUJ1dHRvbigndGFibGVjZWxsYmFja2dyb3VuZGNvbG9yJywge1xuICAgICAgaWNvbjogJ2NlbGwtYmFja2dyb3VuZC1jb2xvcicsXG4gICAgICB0b29sdGlwOiAnQmFja2dyb3VuZCBjb2xvcicsXG4gICAgICBmZXRjaDogKGNhbGxiYWNrKSA9PiBjYWxsYmFjayhidWlsZENvbG9yTWVudShlZGl0b3IsIE9wdGlvbnMuZ2V0VGFibGVCYWNrZ3JvdW5kQ29sb3JNYXAoZWRpdG9yKSwgJ2JhY2tncm91bmQtY29sb3InKSksXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KTtcblxuICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRNZW51QnV0dG9uKCd0YWJsZWNlbGxib3JkZXJjb2xvcicsIHtcbiAgICAgIGljb246ICdjZWxsLWJvcmRlci1jb2xvcicsXG4gICAgICB0b29sdGlwOiAnQm9yZGVyIGNvbG9yJyxcbiAgICAgIGZldGNoOiAoY2FsbGJhY2spID0+IGNhbGxiYWNrKGJ1aWxkQ29sb3JNZW51KGVkaXRvciwgT3B0aW9ucy5nZXRUYWJsZUJvcmRlckNvbG9yTWFwKGVkaXRvciksICdib3JkZXItY29sb3InKSksXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KTtcbiAgfVxuXG4gIGFkZFRvZ2dsZUJ1dHRvbklmUmVnaXN0ZXJlZCgndGFibGVjYXB0aW9uJywge1xuICAgIHRvb2x0aXA6ICdUYWJsZSBjYXB0aW9uJyxcbiAgICBpY29uOiAndGFibGUtY2FwdGlvbicsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlVG9nZ2xlQ2FwdGlvbicsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGVXaXRoQ2FwdGlvblxuICB9KTtcblxuICBhZGRUb2dnbGVCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlcm93aGVhZGVyJywge1xuICAgIHRvb2x0aXA6ICdSb3cgaGVhZGVyJyxcbiAgICBpY29uOiAndGFibGUtdG9wLWhlYWRlcicsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlUm93VHlwZScsXG4gICAgb25BY3Rpb246IGNoYW5nZVJvd0hlYWRlcihlZGl0b3IpLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFRhYmxlUm93SGVhZGVyc1xuICB9KTtcblxuICBhZGRUb2dnbGVCdXR0b25JZlJlZ2lzdGVyZWQoJ3RhYmxlY29saGVhZGVyJywge1xuICAgIHRvb2x0aXA6ICdDb2x1bW4gaGVhZGVyJyxcbiAgICBpY29uOiAndGFibGUtbGVmdC1oZWFkZXInLFxuICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUNvbFR5cGUnLFxuICAgIG9uQWN0aW9uOiBjaGFuZ2VDb2x1bW5IZWFkZXIoZWRpdG9yKSxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBUYWJsZUNvbHVtbkhlYWRlcnNcbiAgfSk7XG59O1xuXG5jb25zdCBhZGRUb29sYmFycyA9IChlZGl0b3I6IEVkaXRvcik6IHZvaWQgPT4ge1xuICBjb25zdCBpc0VkaXRhYmxlVGFibGUgPSAodGFibGU6IE5vZGUpID0+IGVkaXRvci5kb20uaXModGFibGUsICd0YWJsZScpICYmIGVkaXRvci5nZXRCb2R5KCkuY29udGFpbnModGFibGUpICYmIGVkaXRvci5kb20uaXNFZGl0YWJsZSh0YWJsZS5wYXJlbnROb2RlKTtcblxuICBjb25zdCB0b29sYmFyID0gT3B0aW9ucy5nZXRUb29sYmFyKGVkaXRvcik7XG4gIGlmICh0b29sYmFyLmxlbmd0aCA+IDApIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkQ29udGV4dFRvb2xiYXIoJ3RhYmxlJywge1xuICAgICAgcHJlZGljYXRlOiBpc0VkaXRhYmxlVGFibGUsXG4gICAgICBpdGVtczogdG9vbGJhcixcbiAgICAgIHNjb3BlOiAnbm9kZScsXG4gICAgICBwb3NpdGlvbjogJ25vZGUnXG4gICAgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIGFkZEJ1dHRvbnMsXG4gIGFkZFRvb2xiYXJzXG59O1xuIiwiY29uc3QgdmVydGljYWxBbGlnblZhbHVlcyA9IFtcbiAge1xuICAgIHRleHQ6ICdOb25lJyxcbiAgICB2YWx1ZTogJydcbiAgfSxcbiAge1xuICAgIHRleHQ6ICdUb3AnLFxuICAgIHZhbHVlOiAndG9wJ1xuICB9LFxuICB7XG4gICAgdGV4dDogJ01pZGRsZScsXG4gICAgdmFsdWU6ICdtaWRkbGUnXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiAnQm90dG9tJyxcbiAgICB2YWx1ZTogJ2JvdHRvbSdcbiAgfVxuXTtcblxuZXhwb3J0IHtcbiAgdmVydGljYWxBbGlnblZhbHVlc1xufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPYmosIHR5cGUgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgVGFibGVMb29rdXAsIFdhcmVob3VzZSB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IENvbXBhcmUsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgRGlhbG9nIH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS91aS9VaSc7XG5cbmltcG9ydCAqIGFzIFN0eWxlcyBmcm9tICcuLi9hY3Rpb25zL1N0eWxlcyc7XG5pbXBvcnQgKiBhcyBFdmVudHMgZnJvbSAnLi4vYXBpL0V2ZW50cyc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uJztcblxuaW1wb3J0ICogYXMgQ2VsbERpYWxvZ0dlbmVyYWxUYWIgZnJvbSAnLi9DZWxsRGlhbG9nR2VuZXJhbFRhYic7XG5pbXBvcnQgeyBnZXRBZHZhbmNlZFRhYiB9IGZyb20gJy4vRGlhbG9nQWR2YW5jZWRUYWInO1xuaW1wb3J0IHsgRG9tTW9kaWZpZXIgfSBmcm9tICcuL0RvbU1vZGlmaWVyJztcbmltcG9ydCAqIGFzIEhlbHBlcnMgZnJvbSAnLi9IZWxwZXJzJztcblxudHlwZSBDZWxsRGF0YSA9IEhlbHBlcnMuQ2VsbERhdGE7XG5cbmludGVyZmFjZSBTZWxlY3RlZENlbGwge1xuICByZWFkb25seSBlbGVtZW50OiBIVE1MVGFibGVDZWxsRWxlbWVudDtcbiAgcmVhZG9ubHkgY29sdW1uOiBPcHRpb25hbDxIVE1MVGFibGVDb2xFbGVtZW50Pjtcbn1cblxuY29uc3QgZ2V0U2VsZWN0ZWRDZWxscyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKTogU2VsZWN0ZWRDZWxsW10gPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgY29uc3QgYWxsQ2VsbHMgPSBXYXJlaG91c2UuanVzdENlbGxzKHdhcmVob3VzZSk7XG5cbiAgY29uc3QgZmlsdGVyZWQgPSBBcnIuZmlsdGVyKGFsbENlbGxzLCAoY2VsbEEpID0+XG4gICAgQXJyLmV4aXN0cyhjZWxscywgKGNlbGxCKSA9PlxuICAgICAgQ29tcGFyZS5lcShjZWxsQS5lbGVtZW50LCBjZWxsQilcbiAgICApXG4gICk7XG5cbiAgcmV0dXJuIEFyci5tYXAoZmlsdGVyZWQsIChjZWxsKSA9PiAoe1xuICAgIGVsZW1lbnQ6IGNlbGwuZWxlbWVudC5kb20sXG4gICAgY29sdW1uOiBXYXJlaG91c2UuZ2V0Q29sdW1uQXQod2FyZWhvdXNlLCBjZWxsLmNvbHVtbikubWFwKChjb2wpID0+IGNvbC5lbGVtZW50LmRvbSlcbiAgfSkpO1xufTtcblxuY29uc3QgdXBkYXRlU2ltcGxlUHJvcHMgPSAobW9kaWZpZXI6IERvbU1vZGlmaWVyLCBjb2xNb2RpZmllcjogRG9tTW9kaWZpZXIsIGRhdGE6IENlbGxEYXRhLCBzaG91bGRVcGRhdGU6IChrZXk6IHN0cmluZykgPT4gYm9vbGVhbik6IHZvaWQgPT4ge1xuICBpZiAoc2hvdWxkVXBkYXRlKCdzY29wZScpKSB7XG4gICAgbW9kaWZpZXIuc2V0QXR0cmliKCdzY29wZScsIGRhdGEuc2NvcGUpO1xuICB9XG4gIGlmIChzaG91bGRVcGRhdGUoJ2NsYXNzJykgJiYgZGF0YS5jbGFzcyAhPT0gJ21jZS1uby1tYXRjaCcpIHtcbiAgICBtb2RpZmllci5zZXRBdHRyaWIoJ2NsYXNzJywgZGF0YS5jbGFzcyk7XG4gIH1cbiAgaWYgKHNob3VsZFVwZGF0ZSgnd2lkdGgnKSkge1xuICAgIGNvbE1vZGlmaWVyLnNldFN0eWxlKCd3aWR0aCcsIFV0aWxzLmFkZFB4U3VmZml4KGRhdGEud2lkdGgpKTtcbiAgfVxufTtcblxuY29uc3QgdXBkYXRlQWR2YW5jZWRQcm9wcyA9IChtb2RpZmllcjogRG9tTW9kaWZpZXIsIGRhdGE6IFJlcXVpcmVkPENlbGxEYXRhPiwgc2hvdWxkVXBkYXRlOiAoa2V5OiBzdHJpbmcpID0+IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgaWYgKHNob3VsZFVwZGF0ZSgnYmFja2dyb3VuZGNvbG9yJykpIHtcbiAgICBtb2RpZmllci5zZXRGb3JtYXQoJ3RhYmxlY2VsbGJhY2tncm91bmRjb2xvcicsIGRhdGEuYmFja2dyb3VuZGNvbG9yKTtcbiAgfVxuICBpZiAoc2hvdWxkVXBkYXRlKCdib3JkZXJjb2xvcicpKSB7XG4gICAgbW9kaWZpZXIuc2V0Rm9ybWF0KCd0YWJsZWNlbGxib3JkZXJjb2xvcicsIGRhdGEuYm9yZGVyY29sb3IpO1xuICB9XG4gIGlmIChzaG91bGRVcGRhdGUoJ2JvcmRlcnN0eWxlJykpIHtcbiAgICBtb2RpZmllci5zZXRGb3JtYXQoJ3RhYmxlY2VsbGJvcmRlcnN0eWxlJywgZGF0YS5ib3JkZXJzdHlsZSk7XG4gIH1cbiAgaWYgKHNob3VsZFVwZGF0ZSgnYm9yZGVyd2lkdGgnKSkge1xuICAgIG1vZGlmaWVyLnNldEZvcm1hdCgndGFibGVjZWxsYm9yZGVyd2lkdGgnLCBVdGlscy5hZGRQeFN1ZmZpeChkYXRhLmJvcmRlcndpZHRoKSk7XG4gIH1cbn07XG5cbmNvbnN0IGFwcGx5U3R5bGVEYXRhID0gKGVkaXRvcjogRWRpdG9yLCBjZWxsczogU2VsZWN0ZWRDZWxsW10sIGRhdGE6IENlbGxEYXRhLCB3YXNDaGFuZ2VkOiAoa2V5OiBzdHJpbmcpID0+IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgY29uc3QgaXNTaW5nbGVDZWxsID0gY2VsbHMubGVuZ3RoID09PSAxO1xuICBBcnIuZWFjaChjZWxscywgKGl0ZW0pID0+IHtcbiAgICBjb25zdCBjZWxsRWxtID0gaXRlbS5lbGVtZW50O1xuICAgIGNvbnN0IHNob3VsZE92ZXJyaWRlQ3VycmVudFZhbHVlID0gaXNTaW5nbGVDZWxsID8gRnVuLmFsd2F5cyA6IHdhc0NoYW5nZWQ7XG4gICAgY29uc3QgbW9kaWZpZXIgPSBEb21Nb2RpZmllci5ub3JtYWwoZWRpdG9yLCBjZWxsRWxtKTtcbiAgICBjb25zdCBjb2xNb2RpZmllciA9IGl0ZW0uY29sdW1uLm1hcCgoY29sKSA9PiBEb21Nb2RpZmllci5ub3JtYWwoZWRpdG9yLCBjb2wpKS5nZXRPcihtb2RpZmllcik7XG5cbiAgICB1cGRhdGVTaW1wbGVQcm9wcyhtb2RpZmllciwgY29sTW9kaWZpZXIsIGRhdGEsIHNob3VsZE92ZXJyaWRlQ3VycmVudFZhbHVlKTtcblxuICAgIGlmIChPcHRpb25zLmhhc0FkdmFuY2VkQ2VsbFRhYihlZGl0b3IpKSB7XG4gICAgICB1cGRhdGVBZHZhbmNlZFByb3BzKG1vZGlmaWVyLCBkYXRhIGFzIFJlcXVpcmVkPENlbGxEYXRhPiwgc2hvdWxkT3ZlcnJpZGVDdXJyZW50VmFsdWUpO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGFsaWdubWVudFxuICAgIGlmICh3YXNDaGFuZ2VkKCdoYWxpZ24nKSkge1xuICAgICAgU3R5bGVzLnNldEFsaWduKGVkaXRvciwgY2VsbEVsbSwgZGF0YS5oYWxpZ24pO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IHZlcnRpY2FsIGFsaWdubWVudFxuICAgIGlmICh3YXNDaGFuZ2VkKCd2YWxpZ24nKSkge1xuICAgICAgU3R5bGVzLnNldFZBbGlnbihlZGl0b3IsIGNlbGxFbG0sIGRhdGEudmFsaWduKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgYXBwbHlTdHJ1Y3R1cmVEYXRhID0gKGVkaXRvcjogRWRpdG9yLCBkYXRhOiBDZWxsRGF0YSk6IHZvaWQgPT4ge1xuICAvLyBTd2l0Y2ggY2VsbCB0eXBlIGlmIGFwcGxpY2FibGUuIE5vdGUgdGhhdCB3ZSBzcGVjaWZpY2FsbHkgdGVsbCB0aGUgY29tbWFuZCB0byBub3QgZmlyZSBldmVudHNcbiAgLy8gYXMgd2UnbGwgYmF0Y2ggdGhlIGV2ZW50cyBhbmQgZmlyZSBhIGBUYWJsZU1vZGlmaWVkYCBldmVudCBhdCB0aGUgZW5kIG9mIHRoZSB1cGRhdGVzLlxuICBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQ2VsbFR5cGUnLCBmYWxzZSwgeyB0eXBlOiBkYXRhLmNlbGx0eXBlLCBub19ldmVudHM6IHRydWUgfSk7XG59O1xuXG5jb25zdCBhcHBseUNlbGxEYXRhID0gKGVkaXRvcjogRWRpdG9yLCBjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBvbGREYXRhOiBDZWxsRGF0YSwgZGF0YTogQ2VsbERhdGEpOiB2b2lkID0+IHtcbiAgY29uc3QgbW9kaWZpZWREYXRhID0gT2JqLmZpbHRlcihkYXRhLCAodmFsdWUsIGtleSkgPT4gb2xkRGF0YVtrZXkgYXMga2V5b2YgQ2VsbERhdGFdICE9PSB2YWx1ZSk7XG5cbiAgaWYgKE9iai5zaXplKG1vZGlmaWVkRGF0YSkgPiAwICYmIGNlbGxzLmxlbmd0aCA+PSAxKSB7XG4gICAgLy8gUmV0cmlldmUgdGhlIHRhYmxlIGJlZm9yZSB0aGUgY2VsbHMgYXJlIG1vZGlmaWVkIGFzIHRoZXJlIGlzIGEgY2FzZSB3aGVyZSBjZWxsc1xuICAgIC8vIGFyZSByZXBsYWNlZCBhbmQgdGhlIHJlZmVyZW5jZSB3aWxsIGJlIGxvc3Qgd2hlbiB0cnlpbmcgdG8gZmlyZSBldmVudHMuXG4gICAgVGFibGVMb29rdXAudGFibGUoY2VsbHNbMF0pLmVhY2goKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZENlbGxzID0gZ2V0U2VsZWN0ZWRDZWxscyh0YWJsZSwgY2VsbHMpO1xuXG4gICAgICAvLyBzdHlsZSBtb2RpZmllZCBpZiB0aGVyZSdzIGF0IGxlYXN0IG9uZSBvdGhlciBjaGFuZ2UgYXBhcnQgZnJvbSAnY2VsbHR5cGUnIGFuZCAnc2NvcGUnXG4gICAgICBjb25zdCBzdHlsZU1vZGlmaWVkID0gT2JqLnNpemUoT2JqLmZpbHRlcihtb2RpZmllZERhdGEsIChfdmFsdWUsIGtleSkgPT4ga2V5ICE9PSAnc2NvcGUnICYmIGtleSAhPT0gJ2NlbGx0eXBlJykpID4gMDtcbiAgICAgIGNvbnN0IHN0cnVjdHVyZU1vZGlmaWVkID0gT2JqLmhhcyhtb2RpZmllZERhdGEsICdjZWxsdHlwZScpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGNlbGxzIHN0eWxpbmcgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAgICBpZiAoc3R5bGVNb2RpZmllZCB8fCBPYmouaGFzKG1vZGlmaWVkRGF0YSwgJ3Njb3BlJykpIHtcbiAgICAgICAgYXBwbHlTdHlsZURhdGEoZWRpdG9yLCBzZWxlY3RlZENlbGxzLCBkYXRhLCBGdW4uY3VycnkoT2JqLmhhcywgbW9kaWZpZWREYXRhKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgY2VsbHMgc3RydWN0dXJlIHVzaW5nIHRoZSBkaWFsb2cgZGF0YVxuICAgICAgaWYgKHN0cnVjdHVyZU1vZGlmaWVkKSB7XG4gICAgICAgIGFwcGx5U3RydWN0dXJlRGF0YShlZGl0b3IsIGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBFdmVudHMuZmlyZVRhYmxlTW9kaWZpZWQoZWRpdG9yLCB0YWJsZS5kb20sIHtcbiAgICAgICAgc3RydWN0dXJlOiBzdHJ1Y3R1cmVNb2RpZmllZCxcbiAgICAgICAgc3R5bGU6IHN0eWxlTW9kaWZpZWQsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcblxuY29uc3Qgb25TdWJtaXRDZWxsRm9ybSA9IChlZGl0b3I6IEVkaXRvciwgY2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSwgb2xkRGF0YTogQ2VsbERhdGEsIGFwaTogRGlhbG9nLkRpYWxvZ0luc3RhbmNlQXBpPENlbGxEYXRhPik6IHZvaWQgPT4ge1xuICBjb25zdCBkYXRhID0gYXBpLmdldERhdGEoKTtcbiAgYXBpLmNsb3NlKCk7XG5cbiAgZWRpdG9yLnVuZG9NYW5hZ2VyLnRyYW5zYWN0KCgpID0+IHtcbiAgICBhcHBseUNlbGxEYXRhKGVkaXRvciwgY2VsbHMsIG9sZERhdGEsIGRhdGEpO1xuICAgIGVkaXRvci5mb2N1cygpO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldERhdGEgPSAoZWRpdG9yOiBFZGl0b3IsIGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pOiBDZWxsRGF0YSA9PiB7XG4gIGNvbnN0IGNlbGxzRGF0YSA9IFRhYmxlTG9va3VwLnRhYmxlKGNlbGxzWzBdKS5tYXAoKHRhYmxlKSA9PlxuICAgIEFyci5tYXAoZ2V0U2VsZWN0ZWRDZWxscyh0YWJsZSwgY2VsbHMpLCAoaXRlbSkgPT5cbiAgICAgIEhlbHBlcnMuZXh0cmFjdERhdGFGcm9tQ2VsbEVsZW1lbnQoZWRpdG9yLCBpdGVtLmVsZW1lbnQsIE9wdGlvbnMuaGFzQWR2YW5jZWRDZWxsVGFiKGVkaXRvciksIGl0ZW0uY29sdW1uKVxuICAgIClcbiAgKTtcblxuICByZXR1cm4gSGVscGVycy5nZXRTaGFyZWRWYWx1ZXM8Q2VsbERhdGE+KGNlbGxzRGF0YS5nZXRPckRpZSgpKTtcbn07XG5cbmNvbnN0IG9wZW4gPSAoZWRpdG9yOiBFZGl0b3IpOiB2b2lkID0+IHtcbiAgY29uc3QgY2VsbHMgPSBUYWJsZVNlbGVjdGlvbi5nZXRDZWxsc0Zyb21TZWxlY3Rpb24oZWRpdG9yKTtcblxuICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IGNlbGxzIHRvIG9wZXJhdGUgb25cbiAgaWYgKGNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSBnZXREYXRhKGVkaXRvciwgY2VsbHMpO1xuXG4gIGNvbnN0IGRpYWxvZ1RhYlBhbmVsOiBEaWFsb2cuVGFiUGFuZWxTcGVjID0ge1xuICAgIHR5cGU6ICd0YWJwYW5lbCcsXG4gICAgdGFiczogW1xuICAgICAge1xuICAgICAgICB0aXRsZTogJ0dlbmVyYWwnLFxuICAgICAgICBuYW1lOiAnZ2VuZXJhbCcsXG4gICAgICAgIGl0ZW1zOiBDZWxsRGlhbG9nR2VuZXJhbFRhYi5nZXRJdGVtcyhlZGl0b3IpXG4gICAgICB9LFxuICAgICAgZ2V0QWR2YW5jZWRUYWIoZWRpdG9yLCAnY2VsbCcpXG4gICAgXVxuICB9O1xuICBjb25zdCBkaWFsb2dQYW5lbDogRGlhbG9nLlBhbmVsU3BlYyA9IHtcbiAgICB0eXBlOiAncGFuZWwnLFxuICAgIGl0ZW1zOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdncmlkJyxcbiAgICAgICAgY29sdW1uczogMixcbiAgICAgICAgaXRlbXM6IENlbGxEaWFsb2dHZW5lcmFsVGFiLmdldEl0ZW1zKGVkaXRvcilcbiAgICAgIH1cbiAgICBdXG4gIH07XG4gIGVkaXRvci53aW5kb3dNYW5hZ2VyLm9wZW4oe1xuICAgIHRpdGxlOiAnQ2VsbCBQcm9wZXJ0aWVzJyxcbiAgICBzaXplOiAnbm9ybWFsJyxcbiAgICBib2R5OiBPcHRpb25zLmhhc0FkdmFuY2VkQ2VsbFRhYihlZGl0b3IpID8gZGlhbG9nVGFiUGFuZWwgOiBkaWFsb2dQYW5lbCxcbiAgICBidXR0b25zOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdjYW5jZWwnLFxuICAgICAgICBuYW1lOiAnY2FuY2VsJyxcbiAgICAgICAgdGV4dDogJ0NhbmNlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICBuYW1lOiAnc2F2ZScsXG4gICAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgICAgcHJpbWFyeTogdHJ1ZVxuICAgICAgfVxuICAgIF0sXG4gICAgaW5pdGlhbERhdGE6IGRhdGEsXG4gICAgb25TdWJtaXQ6IEZ1bi5jdXJyeShvblN1Ym1pdENlbGxGb3JtLCBlZGl0b3IsIGNlbGxzLCBkYXRhKVxuICB9KTtcbn07XG5cbmV4cG9ydCB7IG9wZW4gfTtcbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBEaWFsb2cgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuLi9hcGkvT3B0aW9ucyc7XG5cbmltcG9ydCB7IHZlcnRpY2FsQWxpZ25WYWx1ZXMgfSBmcm9tICcuL0NlbGxBbGlnblZhbHVlcyc7XG5pbXBvcnQgKiBhcyBVaVV0aWxzIGZyb20gJy4vVWlVdGlscyc7XG5cbmNvbnN0IGdldENsYXNzTGlzdCA9IChlZGl0b3I6IEVkaXRvcik6IE9wdGlvbmFsPERpYWxvZy5MaXN0Qm94U3BlYz4gPT5cbiAgVWlVdGlscy5idWlsZENsYXNzTGlzdChPcHRpb25zLmdldENlbGxDbGFzc0xpc3QoZWRpdG9yKSlcbiAgICAubWFwKChpdGVtcykgPT4gKHtcbiAgICAgIG5hbWU6ICdjbGFzcycsXG4gICAgICB0eXBlOiAnbGlzdGJveCcsXG4gICAgICBsYWJlbDogJ0NsYXNzJyxcbiAgICAgIGl0ZW1zXG4gICAgfSkpO1xuXG5jb25zdCBjaGlsZHJlbjogRGlhbG9nLkJvZHlDb21wb25lbnRTcGVjW10gPSBbXG4gIHtcbiAgICBuYW1lOiAnd2lkdGgnLFxuICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgbGFiZWw6ICdXaWR0aCdcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdjZWxsdHlwZScsXG4gICAgdHlwZTogJ2xpc3Rib3gnLFxuICAgIGxhYmVsOiAnQ2VsbCB0eXBlJyxcbiAgICBpdGVtczogW1xuICAgICAgeyB0ZXh0OiAnQ2VsbCcsIHZhbHVlOiAndGQnIH0sXG4gICAgICB7IHRleHQ6ICdIZWFkZXIgY2VsbCcsIHZhbHVlOiAndGgnIH1cbiAgICBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnc2NvcGUnLFxuICAgIHR5cGU6ICdsaXN0Ym94JyxcbiAgICBsYWJlbDogJ1Njb3BlJyxcbiAgICBpdGVtczogW1xuICAgICAgeyB0ZXh0OiAnTm9uZScsIHZhbHVlOiAnJyB9LFxuICAgICAgeyB0ZXh0OiAnUm93JywgdmFsdWU6ICdyb3cnIH0sXG4gICAgICB7IHRleHQ6ICdDb2x1bW4nLCB2YWx1ZTogJ2NvbCcgfSxcbiAgICAgIHsgdGV4dDogJ1JvdyBncm91cCcsIHZhbHVlOiAncm93Z3JvdXAnIH0sXG4gICAgICB7IHRleHQ6ICdDb2x1bW4gZ3JvdXAnLCB2YWx1ZTogJ2NvbGdyb3VwJyB9XG4gICAgXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ2hhbGlnbicsXG4gICAgdHlwZTogJ2xpc3Rib3gnLFxuICAgIGxhYmVsOiAnSG9yaXpvbnRhbCBhbGlnbicsXG4gICAgaXRlbXM6IFtcbiAgICAgIHsgdGV4dDogJ05vbmUnLCB2YWx1ZTogJycgfSxcbiAgICAgIHsgdGV4dDogJ0xlZnQnLCB2YWx1ZTogJ2xlZnQnIH0sXG4gICAgICB7IHRleHQ6ICdDZW50ZXInLCB2YWx1ZTogJ2NlbnRlcicgfSxcbiAgICAgIHsgdGV4dDogJ1JpZ2h0JywgdmFsdWU6ICdyaWdodCcgfVxuICAgIF1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICd2YWxpZ24nLFxuICAgIHR5cGU6ICdsaXN0Ym94JyxcbiAgICBsYWJlbDogJ1ZlcnRpY2FsIGFsaWduJyxcbiAgICBpdGVtczogdmVydGljYWxBbGlnblZhbHVlc1xuICB9XG5dO1xuXG5jb25zdCBnZXRJdGVtcyA9IChlZGl0b3I6IEVkaXRvcik6IERpYWxvZy5Cb2R5Q29tcG9uZW50U3BlY1tdID0+XG4gIGNoaWxkcmVuLmNvbmNhdChnZXRDbGFzc0xpc3QoZWRpdG9yKS50b0FycmF5KCkpO1xuXG5leHBvcnQge1xuICBnZXRJdGVtc1xufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IERpYWxvZyB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvdWkvVWknO1xuXG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcblxuaW1wb3J0IHsgYnVpbGRMaXN0SXRlbXMgfSBmcm9tICcuL1VpVXRpbHMnO1xuXG5jb25zdCBnZXRBZHZhbmNlZFRhYiA9IChlZGl0b3I6IEVkaXRvciwgZGlhbG9nTmFtZTogJ3RhYmxlJyB8ICdyb3cnIHwgJ2NlbGwnKTogRGlhbG9nLlRhYlNwZWMgPT4ge1xuICBjb25zdCBlbXB0eUJvcmRlclN0eWxlOiBEaWFsb2cuTGlzdEJveEl0ZW1TcGVjW10gPSBbeyB0ZXh0OiAnU2VsZWN0Li4uJywgdmFsdWU6ICcnIH1dO1xuXG4gIGNvbnN0IGFkdlRhYkl0ZW1zOiBEaWFsb2cuQm9keUNvbXBvbmVudFNwZWNbXSA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnYm9yZGVyc3R5bGUnLFxuICAgICAgdHlwZTogJ2xpc3Rib3gnLFxuICAgICAgbGFiZWw6ICdCb3JkZXIgc3R5bGUnLFxuICAgICAgaXRlbXM6IGVtcHR5Qm9yZGVyU3R5bGUuY29uY2F0KGJ1aWxkTGlzdEl0ZW1zKE9wdGlvbnMuZ2V0VGFibGVCb3JkZXJTdHlsZXMoZWRpdG9yKSkpXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYm9yZGVyY29sb3InLFxuICAgICAgdHlwZTogJ2NvbG9yaW5wdXQnLFxuICAgICAgbGFiZWw6ICdCb3JkZXIgY29sb3InXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYmFja2dyb3VuZGNvbG9yJyxcbiAgICAgIHR5cGU6ICdjb2xvcmlucHV0JyxcbiAgICAgIGxhYmVsOiAnQmFja2dyb3VuZCBjb2xvcidcbiAgICB9XG4gIF07XG5cbiAgY29uc3QgYm9yZGVyV2lkdGg6IERpYWxvZy5JbnB1dFNwZWMgPSB7XG4gICAgbmFtZTogJ2JvcmRlcndpZHRoJyxcbiAgICB0eXBlOiAnaW5wdXQnLFxuICAgIGxhYmVsOiAnQm9yZGVyIHdpZHRoJ1xuICB9O1xuXG4gIGNvbnN0IGl0ZW1zID0gZGlhbG9nTmFtZSA9PT0gJ2NlbGwnID8gKFsgYm9yZGVyV2lkdGggXSBhcyBEaWFsb2cuQm9keUNvbXBvbmVudFNwZWNbXSkuY29uY2F0KGFkdlRhYkl0ZW1zKSA6IGFkdlRhYkl0ZW1zO1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGU6ICdBZHZhbmNlZCcsXG4gICAgbmFtZTogJ2FkdmFuY2VkJyxcbiAgICBpdGVtc1xuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0QWR2YW5jZWRUYWJcbn07XG4iLCJpbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIERvbU1vZGlmaWVyIHtcbiAgcmVhZG9ubHkgc2V0QXR0cmliOiAoYXR0cjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICByZWFkb25seSBzZXRTdHlsZTogKHByb3A6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgcmVhZG9ubHkgc2V0Rm9ybWF0OiAoZm9ybWF0TmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG4vLyBUaGUgZ2V0IG5vZGUgaXMgcmVxdWlyZWQgaGVyZSBiZWNhdXNlIGl0IGNhbiBiZSB0cmFuc2Zvcm1lZFxuLy8gd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiB0YWdzIChlLmcuIHRoIGFuZCB0ZClcbmNvbnN0IG5vcm1hbCA9IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudDogRWxlbWVudCk6IERvbU1vZGlmaWVyID0+IHtcbiAgY29uc3QgZG9tID0gZWRpdG9yLmRvbTtcblxuICBjb25zdCBzZXRBdHRyaWIgPSAoYXR0cjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgZG9tLnNldEF0dHJpYihlbGVtZW50LCBhdHRyLCB2YWx1ZSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0U3R5bGUgPSAocHJvcDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgZG9tLnNldFN0eWxlKGVsZW1lbnQsIHByb3AsIHZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBzZXRGb3JtYXQgPSAoZm9ybWF0TmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgLy8gUmVtb3ZlIGZvcm1hdCBpZiBnaXZlbiBhbiBlbXB0eSBzdHJpbmdcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICBlZGl0b3IuZm9ybWF0dGVyLnJlbW92ZShmb3JtYXROYW1lLCB7IHZhbHVlOiBudWxsIH0sIGVsZW1lbnQsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0b3IuZm9ybWF0dGVyLmFwcGx5KGZvcm1hdE5hbWUsIHsgdmFsdWUgfSwgZWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0QXR0cmliLFxuICAgIHNldFN0eWxlLFxuICAgIHNldEZvcm1hdFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IERvbU1vZGlmaWVyID0ge1xuICBub3JtYWxcbn07XG4iLCJpbXBvcnQgeyBUcmFuc2Zvcm1hdGlvbnMgfSBmcm9tICdAZXBob3gvYWNpZCc7XG5pbXBvcnQgeyBBcnIsIEZ1biwgT2JqLCB0eXBlIE9wdGlvbmFsLCBTdHJpbmdzLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFRhYmxlTG9va3VwLCBUYWJsZU9wZXJhdGlvbnMgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgeyBDc3MsIFN1Z2FyRWxlbWVudCwgU3VnYXJFbGVtZW50cyB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIERPTVV0aWxzIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvZG9tL0RPTVV0aWxzJztcbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmltcG9ydCAqIGFzIFN0eWxlcyBmcm9tICcuLi9hY3Rpb25zL1N0eWxlcyc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVXRpbHMnO1xuXG4vKipcbiAqIEBjbGFzcyB0aW55bWNlLnRhYmxlLnVpLkhlbHBlcnNcbiAqIEBwcml2YXRlXG4gKi9cblxuaW50ZXJmYWNlIEFkdmFuY2VkU3R5bGVzIHtcbiAgcmVhZG9ubHkgYm9yZGVyd2lkdGg6IHN0cmluZztcbiAgcmVhZG9ubHkgYm9yZGVyc3R5bGU6IHN0cmluZztcbiAgcmVhZG9ubHkgYm9yZGVyY29sb3I6IHN0cmluZztcbiAgcmVhZG9ubHkgYmFja2dyb3VuZGNvbG9yOiBzdHJpbmc7XG59XG5cbi8vIE5vdGU6IE5lZWQgdG8gdXNlIGEgdHlwZXMgaGVyZSwgYXMgdHlwZXMgYXJlIGl0ZXJhYmxlIHdoZXJlYXMgaW50ZXJmYWNlcyBhcmUgbm90XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1kZWZpbml0aW9uc1xuZXhwb3J0IHR5cGUgVGFibGVEYXRhID0ge1xuICByZWFkb25seSBoZWlnaHQ6IHN0cmluZztcbiAgcmVhZG9ubHkgd2lkdGg6IHN0cmluZztcbiAgcmVhZG9ubHkgY2VsbHNwYWNpbmc6IHN0cmluZztcbiAgcmVhZG9ubHkgY2VsbHBhZGRpbmc6IHN0cmluZztcbiAgcmVhZG9ubHkgY2FwdGlvbjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgYWxpZ246IHN0cmluZztcbiAgcmVhZG9ubHkgYm9yZGVyOiBzdHJpbmc7XG4gIGNsYXNzPzogc3RyaW5nO1xuICBjb2xzPzogc3RyaW5nO1xuICByb3dzPzogc3RyaW5nO1xuICBib3JkZXJzdHlsZT86IHN0cmluZztcbiAgYm9yZGVyY29sb3I/OiBzdHJpbmc7XG4gIGJhY2tncm91bmRjb2xvcj86IHN0cmluZztcbn07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWRlZmluaXRpb25zXG5leHBvcnQgdHlwZSBSb3dEYXRhID0ge1xuICByZWFkb25seSBoZWlnaHQ6IHN0cmluZztcbiAgcmVhZG9ubHkgY2xhc3M6IHN0cmluZztcbiAgcmVhZG9ubHkgYWxpZ246IHN0cmluZztcbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuICByZWFkb25seSBib3JkZXJzdHlsZT86IHN0cmluZztcbiAgcmVhZG9ubHkgYm9yZGVyY29sb3I/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGJhY2tncm91bmRjb2xvcj86IHN0cmluZztcbn07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWRlZmluaXRpb25zXG5leHBvcnQgdHlwZSBDZWxsRGF0YSA9IHtcbiAgcmVhZG9ubHkgd2lkdGg6IHN0cmluZztcbiAgcmVhZG9ubHkgc2NvcGU6IHN0cmluZztcbiAgcmVhZG9ubHkgY2VsbHR5cGU6ICd0ZCcgfCAndGgnO1xuICByZWFkb25seSBjbGFzczogc3RyaW5nO1xuICByZWFkb25seSBoYWxpZ246IHN0cmluZztcbiAgcmVhZG9ubHkgdmFsaWduOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGJvcmRlcndpZHRoPzogc3RyaW5nO1xuICByZWFkb25seSBib3JkZXJzdHlsZT86IHN0cmluZztcbiAgcmVhZG9ubHkgYm9yZGVyY29sb3I/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGJhY2tncm91bmRjb2xvcj86IHN0cmluZztcbn07XG5cbmNvbnN0IHJnYlRvSGV4ID0gKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgU3RyaW5ncy5zdGFydHNXaXRoKHZhbHVlLCAncmdiJykgPyBUcmFuc2Zvcm1hdGlvbnMucmdiYVRvSGV4U3RyaW5nKHZhbHVlKSA6IHZhbHVlO1xuXG5jb25zdCBleHRyYWN0QWR2YW5jZWRTdHlsZXMgPSAoZWxtOiBOb2RlKTogQWR2YW5jZWRTdHlsZXMgPT4ge1xuICBjb25zdCBlbGVtZW50ID0gU3VnYXJFbGVtZW50LmZyb21Eb20oZWxtKTtcbiAgcmV0dXJuIHtcbiAgICBib3JkZXJ3aWR0aDogQ3NzLmdldFJhdyhlbGVtZW50LCAnYm9yZGVyLXdpZHRoJykuZ2V0T3IoJycpLFxuICAgIGJvcmRlcnN0eWxlOiBDc3MuZ2V0UmF3KGVsZW1lbnQsICdib3JkZXItc3R5bGUnKS5nZXRPcignJyksXG4gICAgYm9yZGVyY29sb3I6IENzcy5nZXRSYXcoZWxlbWVudCwgJ2JvcmRlci1jb2xvcicpLm1hcChyZ2JUb0hleCkuZ2V0T3IoJycpLFxuICAgIGJhY2tncm91bmRjb2xvcjogQ3NzLmdldFJhdyhlbGVtZW50LCAnYmFja2dyb3VuZC1jb2xvcicpLm1hcChyZ2JUb0hleCkuZ2V0T3IoJycpXG4gIH07XG59O1xuXG5jb25zdCBnZXRTaGFyZWRWYWx1ZXMgPSA8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KGRhdGE6IFRbXSk6IFQgPT4ge1xuICAvLyBUT0RPIHN1cmVseSB0aGVyZSdzIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzPz9cbiAgLy8gTXV0YXRlcyBiYXNlRGF0YSB0byByZXR1cm4gYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgb25seSB0aGUgdmFsdWVzXG4gIC8vIHRoYXQgd2VyZSB0aGUgc2FtZSBhY3Jvc3MgYWxsIG9iamVjdHMgaW4gZGF0YVxuICBjb25zdCBiYXNlRGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IGRhdGFbMF07XG4gIGNvbnN0IGNvbXBhcmlzb25EYXRhID0gZGF0YS5zbGljZSgxKTtcblxuICBBcnIuZWFjaChjb21wYXJpc29uRGF0YSwgKGl0ZW1zKSA9PiB7XG4gICAgQXJyLmVhY2goT2JqLmtleXMoYmFzZURhdGEpLCAoa2V5KSA9PiB7XG4gICAgICBPYmouZWFjaChpdGVtcywgKGl0ZW1WYWx1ZSwgaXRlbUtleSkgPT4ge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uVmFsdWUgPSBiYXNlRGF0YVtrZXldO1xuICAgICAgICBpZiAoY29tcGFyaXNvblZhbHVlICE9PSAnJyAmJiBrZXkgPT09IGl0ZW1LZXkpIHtcbiAgICAgICAgICBpZiAoY29tcGFyaXNvblZhbHVlICE9PSBpdGVtVmFsdWUpIHtcbiAgICAgICAgICAgIGJhc2VEYXRhW2tleV0gPSBrZXkgPT09ICdjbGFzcycgPyAnbWNlLW5vLW1hdGNoJyA6ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBiYXNlRGF0YSBhcyBUO1xufTtcblxuLy8gVGhlIGV4dHJhY3REYXRhRnJvbS4uLiBmdW5jdGlvbnMgYXJlIGluIHRoaXMgZmlsZSBwYXJ0bHkgZm9yIGNvZGUgcmV1c2UgYW5kIHBhcnRseSBzbyB3ZSBjYW4gdGVzdCB0aGVtLFxuLy8gYmVjYXVzZSBzb21lIG9mIHRoZXNlIGFyZSBjcmF6eSBjb21wbGljYXRlZFxuXG5jb25zdCBnZXRBbGlnbm1lbnQgPSAoZm9ybWF0czogc3RyaW5nW10sIGZvcm1hdE5hbWU6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IsIGVsbTogTm9kZSk6IHN0cmluZyA9PlxuICBBcnIuZmluZChmb3JtYXRzLCAobmFtZSkgPT4gIVR5cGUuaXNVbmRlZmluZWQoZWRpdG9yLmZvcm1hdHRlci5tYXRjaE5vZGUoZWxtLCBmb3JtYXROYW1lICsgbmFtZSkpKS5nZXRPcignJyk7XG5jb25zdCBnZXRIQWxpZ25tZW50ID0gRnVuLmN1cnJ5KGdldEFsaWdubWVudCwgWyAnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnIF0sICdhbGlnbicpO1xuY29uc3QgZ2V0VkFsaWdubWVudCA9IEZ1bi5jdXJyeShnZXRBbGlnbm1lbnQsIFsgJ3RvcCcsICdtaWRkbGUnLCAnYm90dG9tJyBdLCAndmFsaWduJyk7XG5cbmNvbnN0IGV4dHJhY3REYXRhRnJvbVNldHRpbmdzID0gKGVkaXRvcjogRWRpdG9yLCBoYXNBZHZUYWJsZVRhYjogYm9vbGVhbik6IFRhYmxlRGF0YSA9PiB7XG4gIGNvbnN0IHN0eWxlID0gT3B0aW9ucy5nZXREZWZhdWx0U3R5bGVzKGVkaXRvcik7XG4gIGNvbnN0IGF0dHJzID0gT3B0aW9ucy5nZXREZWZhdWx0QXR0cmlidXRlcyhlZGl0b3IpO1xuXG4gIGNvbnN0IGV4dHJhY3RBZHZhbmNlZFN0eWxlRGF0YSA9ICgpID0+ICh7XG4gICAgYm9yZGVyc3R5bGU6IE9iai5nZXQoc3R5bGUsICdib3JkZXItc3R5bGUnKS5nZXRPcignJyksXG4gICAgYm9yZGVyY29sb3I6IHJnYlRvSGV4KE9iai5nZXQoc3R5bGUsICdib3JkZXItY29sb3InKS5nZXRPcignJykpLFxuICAgIGJhY2tncm91bmRjb2xvcjogcmdiVG9IZXgoT2JqLmdldChzdHlsZSwgJ2JhY2tncm91bmQtY29sb3InKS5nZXRPcignJykpXG4gIH0pO1xuXG4gIGNvbnN0IGRlZmF1bHREYXRhOiBUYWJsZURhdGEgPSB7XG4gICAgaGVpZ2h0OiAnJyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGNlbGxzcGFjaW5nOiAnJyxcbiAgICBjZWxscGFkZGluZzogJycsXG4gICAgY2FwdGlvbjogZmFsc2UsXG4gICAgY2xhc3M6ICcnLFxuICAgIGFsaWduOiAnJyxcbiAgICBib3JkZXI6ICcnXG4gIH07XG5cbiAgY29uc3QgZ2V0Qm9yZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGJvcmRlcldpZHRoID0gc3R5bGVbJ2JvcmRlci13aWR0aCddO1xuICAgIGlmIChPcHRpb25zLnNob3VsZFN0eWxlV2l0aENzcyhlZGl0b3IpICYmIGJvcmRlcldpZHRoKSB7XG4gICAgICByZXR1cm4geyBib3JkZXI6IGJvcmRlcldpZHRoIH07XG4gICAgfVxuICAgIHJldHVybiBPYmouZ2V0KGF0dHJzLCAnYm9yZGVyJykuZm9sZCgoKSA9PiAoe30pLCAoYm9yZGVyKSA9PiAoeyBib3JkZXIgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGFkdlN0eWxlID0gKGhhc0FkdlRhYmxlVGFiID8gZXh0cmFjdEFkdmFuY2VkU3R5bGVEYXRhKCkgOiB7fSk7XG5cbiAgY29uc3QgZ2V0Q2VsbFBhZGRpbmdDZWxsU3BhY2luZyA9ICgpID0+IHtcbiAgICBjb25zdCBzcGFjaW5nID0gT2JqLmdldChzdHlsZSwgJ2JvcmRlci1zcGFjaW5nJykub3IoT2JqLmdldChhdHRycywgJ2NlbGxzcGFjaW5nJykpLmZvbGQoICgpID0+ICh7fSksIChjZWxsc3BhY2luZykgPT4gKHsgY2VsbHNwYWNpbmcgfSkpO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBPYmouZ2V0KHN0eWxlLCAnYm9yZGVyLXBhZGRpbmcnKS5vcihPYmouZ2V0KGF0dHJzLCAnY2VsbHBhZGRpbmcnKSkuZm9sZCggKCkgPT4gKHt9KSwgKGNlbGxwYWRkaW5nKSA9PiAoeyBjZWxscGFkZGluZyB9KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNwYWNpbmcsXG4gICAgICAuLi5wYWRkaW5nXG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBkYXRhID0ge1xuICAgIC4uLmRlZmF1bHREYXRhLFxuICAgIC4uLnN0eWxlLFxuICAgIC4uLmF0dHJzLFxuICAgIC4uLmFkdlN0eWxlLFxuICAgIC4uLmdldEJvcmRlcigpLFxuICAgIC4uLmdldENlbGxQYWRkaW5nQ2VsbFNwYWNpbmcoKVxuICB9O1xuICByZXR1cm4gZGF0YTtcbn07XG5cbmNvbnN0IGdldFJvd1R5cGUgPSAoZWxtOiBIVE1MVGFibGVSb3dFbGVtZW50KSA9PlxuICBUYWJsZUxvb2t1cC50YWJsZShTdWdhckVsZW1lbnQuZnJvbURvbShlbG0pKS5tYXAoKHRhYmxlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0geyBzZWxlY3Rpb246IFN1Z2FyRWxlbWVudHMuZnJvbURvbShlbG0uY2VsbHMpIH07XG4gICAgcmV0dXJuIFRhYmxlT3BlcmF0aW9ucy5nZXRSb3dzVHlwZSh0YWJsZSwgdGFyZ2V0KTtcbiAgfSkuZ2V0T3IoJycpO1xuXG5jb25zdCBleHRyYWN0RGF0YUZyb21UYWJsZUVsZW1lbnQgPSAoZWRpdG9yOiBFZGl0b3IsIGVsbTogRWxlbWVudCwgaGFzQWR2VGFibGVUYWI6IGJvb2xlYW4pOiBUYWJsZURhdGEgPT4ge1xuICBjb25zdCBnZXRCb3JkZXIgPSAoZG9tOiBET01VdGlscywgZWxtOiBFbGVtZW50KSA9PiB7XG4gICAgLy8gQ2FzZXMgKGluIG9yZGVyIHRvIGNoZWNrKTpcbiAgICAvLyAxLiBzaG91bGRTdHlsZVdpdGhDc3MgLSBleHRyYWN0IGJvcmRlci13aWR0aCBzdHlsZSBpZiBpdCBleGlzdHNcbiAgICAvLyAyLiAhc2hvdWxkU3R5bGVXaXRoQ3NzICYmIGJvcmRlciBhdHRyaWJ1dGUgLSBzZXQgYm9yZGVyIGF0dHJpYnV0ZSBhcyB2YWx1ZVxuICAgIC8vIDMuICFzaG91bGRTdHlsZVdpdGhDc3MgJiYgbm90aGluZyBvbiB0aGUgdGFibGUgLSBncmFiIHN0eWxlcyBmcm9tIHRoZSBmaXJzdCB0aCBvciB0ZFxuXG4gICAgY29uc3Qgb3B0Qm9yZGVyV2lkdGggPSBDc3MuZ2V0UmF3KFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsbSksICdib3JkZXItd2lkdGgnKTtcbiAgICBpZiAoT3B0aW9ucy5zaG91bGRTdHlsZVdpdGhDc3MoZWRpdG9yKSAmJiBvcHRCb3JkZXJXaWR0aC5pc1NvbWUoKSkge1xuICAgICAgcmV0dXJuIG9wdEJvcmRlcldpZHRoLmdldE9yKCcnKTtcbiAgICB9XG4gICAgcmV0dXJuIGRvbS5nZXRBdHRyaWIoZWxtLCAnYm9yZGVyJykgfHwgU3R5bGVzLmdldFREVEhPdmVyYWxsU3R5bGUoZWRpdG9yLmRvbSwgZWxtLCAnYm9yZGVyLXdpZHRoJylcbiAgICAgIHx8IFN0eWxlcy5nZXRURFRIT3ZlcmFsbFN0eWxlKGVkaXRvci5kb20sIGVsbSwgJ2JvcmRlcicpIHx8ICcnO1xuICB9O1xuXG4gIGNvbnN0IGRvbSA9IGVkaXRvci5kb207XG5cbiAgY29uc3QgY2VsbHNwYWNpbmcgPSBPcHRpb25zLnNob3VsZFN0eWxlV2l0aENzcyhlZGl0b3IpID9cbiAgICBkb20uZ2V0U3R5bGUoZWxtLCAnYm9yZGVyLXNwYWNpbmcnKSB8fCBkb20uZ2V0QXR0cmliKGVsbSwgJ2NlbGxzcGFjaW5nJykgOlxuICAgIGRvbS5nZXRBdHRyaWIoZWxtLCAnY2VsbHNwYWNpbmcnKSB8fCBkb20uZ2V0U3R5bGUoZWxtLCAnYm9yZGVyLXNwYWNpbmcnKTtcblxuICBjb25zdCBjZWxscGFkZGluZyA9IE9wdGlvbnMuc2hvdWxkU3R5bGVXaXRoQ3NzKGVkaXRvcikgP1xuICAgIFN0eWxlcy5nZXRURFRIT3ZlcmFsbFN0eWxlKGRvbSwgZWxtLCAncGFkZGluZycpIHx8IGRvbS5nZXRBdHRyaWIoZWxtLCAnY2VsbHBhZGRpbmcnKSA6XG4gICAgZG9tLmdldEF0dHJpYihlbG0sICdjZWxscGFkZGluZycpIHx8IFN0eWxlcy5nZXRURFRIT3ZlcmFsbFN0eWxlKGRvbSwgZWxtLCAncGFkZGluZycpO1xuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGRvbS5nZXRTdHlsZShlbG0sICd3aWR0aCcpIHx8IGRvbS5nZXRBdHRyaWIoZWxtLCAnd2lkdGgnKSxcbiAgICBoZWlnaHQ6IGRvbS5nZXRTdHlsZShlbG0sICdoZWlnaHQnKSB8fCBkb20uZ2V0QXR0cmliKGVsbSwgJ2hlaWdodCcpLFxuICAgIGNlbGxzcGFjaW5nOiBjZWxsc3BhY2luZyA/PyAnJyxcbiAgICBjZWxscGFkZGluZzogY2VsbHBhZGRpbmcgPz8gJycsXG4gICAgYm9yZGVyOiBnZXRCb3JkZXIoZG9tLCBlbG0pLFxuICAgIGNhcHRpb246ICEhZG9tLnNlbGVjdCgnY2FwdGlvbicsIGVsbSlbMF0sXG4gICAgY2xhc3M6IGRvbS5nZXRBdHRyaWIoZWxtLCAnY2xhc3MnLCAnJyksXG4gICAgYWxpZ246IGdldEhBbGlnbm1lbnQoZWRpdG9yLCBlbG0pLFxuICAgIC4uLihoYXNBZHZUYWJsZVRhYiA/IGV4dHJhY3RBZHZhbmNlZFN0eWxlcyhlbG0pIDoge30pXG4gIH07XG59O1xuXG5jb25zdCBleHRyYWN0RGF0YUZyb21Sb3dFbGVtZW50ID0gKGVkaXRvcjogRWRpdG9yLCBlbG06IEhUTUxUYWJsZVJvd0VsZW1lbnQsIGhhc0FkdmFuY2VkUm93VGFiOiBib29sZWFuKTogUm93RGF0YSA9PiB7XG4gIGNvbnN0IGRvbSA9IGVkaXRvci5kb207XG4gIHJldHVybiB7XG4gICAgaGVpZ2h0OiBkb20uZ2V0U3R5bGUoZWxtLCAnaGVpZ2h0JykgfHwgZG9tLmdldEF0dHJpYihlbG0sICdoZWlnaHQnKSxcbiAgICBjbGFzczogZG9tLmdldEF0dHJpYihlbG0sICdjbGFzcycsICcnKSxcbiAgICB0eXBlOiBnZXRSb3dUeXBlKGVsbSksXG4gICAgYWxpZ246IGdldEhBbGlnbm1lbnQoZWRpdG9yLCBlbG0pLFxuICAgIC4uLihoYXNBZHZhbmNlZFJvd1RhYiA/IGV4dHJhY3RBZHZhbmNlZFN0eWxlcyhlbG0pIDoge30pXG4gIH07XG59O1xuXG5jb25zdCBleHRyYWN0RGF0YUZyb21DZWxsRWxlbWVudCA9IChlZGl0b3I6IEVkaXRvciwgY2VsbDogSFRNTFRhYmxlQ2VsbEVsZW1lbnQsIGhhc0FkdmFuY2VkQ2VsbFRhYjogYm9vbGVhbiwgY29sdW1uOiBPcHRpb25hbDxIVE1MVGFibGVDb2xFbGVtZW50Pik6IENlbGxEYXRhID0+IHtcbiAgY29uc3QgZG9tID0gZWRpdG9yLmRvbTtcbiAgY29uc3QgY29sRWxtID0gY29sdW1uLmdldE9yKGNlbGwpO1xuXG4gIGNvbnN0IGdldFN0eWxlID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBzdHlsZTogc3RyaW5nKSA9PiBkb20uZ2V0U3R5bGUoZWxlbWVudCwgc3R5bGUpIHx8IGRvbS5nZXRBdHRyaWIoZWxlbWVudCwgc3R5bGUpO1xuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGdldFN0eWxlKGNvbEVsbSwgJ3dpZHRoJyksXG4gICAgc2NvcGU6IGRvbS5nZXRBdHRyaWIoY2VsbCwgJ3Njb3BlJyksXG4gICAgY2VsbHR5cGU6IFV0aWxzLmdldE5vZGVOYW1lKGNlbGwpIGFzICd0ZCcgfCAndGgnLFxuICAgIGNsYXNzOiBkb20uZ2V0QXR0cmliKGNlbGwsICdjbGFzcycsICcnKSxcbiAgICBoYWxpZ246IGdldEhBbGlnbm1lbnQoZWRpdG9yLCBjZWxsKSxcbiAgICB2YWxpZ246IGdldFZBbGlnbm1lbnQoZWRpdG9yLCBjZWxsKSxcbiAgICAuLi4oaGFzQWR2YW5jZWRDZWxsVGFiID8gZXh0cmFjdEFkdmFuY2VkU3R5bGVzKGNlbGwpIDoge30pXG4gIH07XG59O1xuXG5leHBvcnQge1xuICBleHRyYWN0QWR2YW5jZWRTdHlsZXMsXG4gIGdldFNoYXJlZFZhbHVlcyxcbiAgZXh0cmFjdERhdGFGcm9tVGFibGVFbGVtZW50LFxuICBleHRyYWN0RGF0YUZyb21Sb3dFbGVtZW50LFxuICBleHRyYWN0RGF0YUZyb21DZWxsRWxlbWVudCxcbiAgZXh0cmFjdERhdGFGcm9tU2V0dGluZ3Ncbn07XG5cbiIsImltcG9ydCB7IEFyciwgRnVuLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IE1lbnUgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0ICogYXMgRmFrZUNsaXBib2FyZCBmcm9tICcuLi9hcGkvQ2xpcGJvYXJkJztcbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuaW1wb3J0IHsgdHlwZSBTZWxlY3Rpb25UYXJnZXRzLCBMb2NrZWREaXNhYmxlIH0gZnJvbSAnLi4vc2VsZWN0aW9uL1NlbGVjdGlvblRhcmdldHMnO1xuXG5pbXBvcnQgeyB2ZXJ0aWNhbEFsaWduVmFsdWVzIH0gZnJvbSAnLi9DZWxsQWxpZ25WYWx1ZXMnO1xuaW1wb3J0IHsgYXBwbHlUYWJsZUNlbGxTdHlsZSwgY2hhbmdlQ29sdW1uSGVhZGVyLCBjaGFuZ2VSb3dIZWFkZXIsIGZpbHRlck5vbmVJdGVtLCBidWlsZENvbG9yTWVudSwgYnVpbGRNZW51SXRlbXMgfSBmcm9tICcuL1VpVXRpbHMnO1xuXG5pbnRlcmZhY2UgQWRkTWVudVNwZWM8VD4ge1xuICByZWFkb25seSB0ZXh0OiBzdHJpbmc7XG4gIHJlYWRvbmx5IGNvbW1hbmQ6IHN0cmluZztcbiAgcmVhZG9ubHkgaWNvbj86IHN0cmluZztcbiAgcmVhZG9ubHkgb25TZXR1cDogKGFwaTogVCkgPT4gKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25BY3Rpb24/OiAoYXBpOiBUKSA9PiB2b2lkO1xufVxuXG5jb25zdCBvblNldHVwRWRpdGFibGUgPSAoZWRpdG9yOiBFZGl0b3IpID0+IChhcGk6IE1lbnUuTWVudUl0ZW1JbnN0YW5jZUFwaSk6IFZvaWRGdW5jdGlvbiA9PiB7XG4gIGNvbnN0IG5vZGVDaGFuZ2VkID0gKCkgPT4ge1xuICAgIGFwaS5zZXRFbmFibGVkKGVkaXRvci5zZWxlY3Rpb24uaXNFZGl0YWJsZSgpKTtcbiAgfTtcblxuICBlZGl0b3Iub24oJ05vZGVDaGFuZ2UnLCBub2RlQ2hhbmdlZCk7XG4gIG5vZGVDaGFuZ2VkKCk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBlZGl0b3Iub2ZmKCdOb2RlQ2hhbmdlJywgbm9kZUNoYW5nZWQpO1xuICB9O1xufTtcblxuY29uc3QgYWRkTWVudUl0ZW1zID0gKGVkaXRvcjogRWRpdG9yLCBzZWxlY3Rpb25UYXJnZXRzOiBTZWxlY3Rpb25UYXJnZXRzKTogdm9pZCA9PiB7XG4gIGNvbnN0IGNtZCA9IChjb21tYW5kOiBzdHJpbmcpID0+ICgpID0+IGVkaXRvci5leGVjQ29tbWFuZChjb21tYW5kKTtcblxuICAvLyBUT0RPOiBUSU5ZLTgxNzIgVW53aW5kIHRoaXMgd2hlbiBhbiBhbHRlcm5hdGl2ZSBzb2x1dGlvbiBpcyBmb3VuZFxuICBjb25zdCBhZGRNZW51SWZSZWdpc3RlcmVkID0gKG5hbWU6IHN0cmluZywgc3BlYzogQWRkTWVudVNwZWM8TWVudS5NZW51SXRlbUluc3RhbmNlQXBpPikgPT4ge1xuICAgIGlmIChlZGl0b3IucXVlcnlDb21tYW5kU3VwcG9ydGVkKHNwZWMuY29tbWFuZCkpIHtcbiAgICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGRNZW51SXRlbShuYW1lLCB7XG4gICAgICAgIC4uLnNwZWMsXG4gICAgICAgIG9uQWN0aW9uOiBUeXBlLmlzRnVuY3Rpb24oc3BlYy5vbkFjdGlvbikgPyBzcGVjLm9uQWN0aW9uIDogY21kKHNwZWMuY29tbWFuZClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gVE9ETzogVElOWS04MTcyIFVud2luZCB0aGlzIHdoZW4gYW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gaXMgZm91bmRcbiAgY29uc3QgYWRkVG9nZ2xlTWVudUlmUmVnaXN0ZXJlZCA9IChuYW1lOiBzdHJpbmcsIHNwZWM6IEFkZE1lbnVTcGVjPE1lbnUuVG9nZ2xlTWVudUl0ZW1JbnN0YW5jZUFwaT4pID0+IHtcbiAgICBpZiAoZWRpdG9yLnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChzcGVjLmNvbW1hbmQpKSB7XG4gICAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkVG9nZ2xlTWVudUl0ZW0obmFtZSwge1xuICAgICAgICAuLi5zcGVjLFxuICAgICAgICBvbkFjdGlvbjogVHlwZS5pc0Z1bmN0aW9uKHNwZWMub25BY3Rpb24pID8gc3BlYy5vbkFjdGlvbiA6IGNtZChzcGVjLmNvbW1hbmQpXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW5zZXJ0VGFibGVBY3Rpb24gPSAoZGF0YTogeyBudW1Sb3dzOiBudW1iZXI7IG51bUNvbHVtbnM6IG51bWJlciB9KSA9PiB7XG4gICAgZWRpdG9yLmV4ZWNDb21tYW5kKCdtY2VJbnNlcnRUYWJsZScsIGZhbHNlLCB7XG4gICAgICByb3dzOiBkYXRhLm51bVJvd3MsXG4gICAgICBjb2x1bW5zOiBkYXRhLm51bUNvbHVtbnNcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYXNSb3dNZW51SXRlbXMgPSBbXG4gICAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVpbnNlcnRyb3diZWZvcmUnLCB7XG4gICAgICB0ZXh0OiAnSW5zZXJ0IHJvdyBiZWZvcmUnLFxuICAgICAgaWNvbjogJ3RhYmxlLWluc2VydC1yb3ctYWJvdmUnLFxuICAgICAgY29tbWFuZDogJ21jZVRhYmxlSW5zZXJ0Um93QmVmb3JlJyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pLFxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlaW5zZXJ0cm93YWZ0ZXInLCB7XG4gICAgICB0ZXh0OiAnSW5zZXJ0IHJvdyBhZnRlcicsXG4gICAgICBpY29uOiAndGFibGUtaW5zZXJ0LXJvdy1hZnRlcicsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRSb3dBZnRlcicsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KSxcbiAgICBhZGRNZW51SWZSZWdpc3RlcmVkKCd0YWJsZWRlbGV0ZXJvdycsIHtcbiAgICAgIHRleHQ6ICdEZWxldGUgcm93JyxcbiAgICAgIGljb246ICd0YWJsZS1kZWxldGUtcm93JyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZURlbGV0ZVJvdycsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KSxcbiAgICBhZGRNZW51SWZSZWdpc3RlcmVkKCd0YWJsZXJvd3Byb3BzJywge1xuICAgICAgdGV4dDogJ1JvdyBwcm9wZXJ0aWVzJyxcbiAgICAgIGljb246ICd0YWJsZS1yb3ctcHJvcGVydGllcycsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVSb3dQcm9wcycsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KSxcblxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlY3V0cm93Jywge1xuICAgICAgdGV4dDogJ0N1dCByb3cnLFxuICAgICAgaWNvbjogJ2N1dC1yb3cnLFxuICAgICAgY29tbWFuZDogJ21jZVRhYmxlQ3V0Um93JyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pLFxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlY29weXJvdycsIHtcbiAgICAgIHRleHQ6ICdDb3B5IHJvdycsXG4gICAgICBpY29uOiAnZHVwbGljYXRlLXJvdycsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVDb3B5Um93JyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pLFxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlcGFzdGVyb3diZWZvcmUnLCB7XG4gICAgICB0ZXh0OiAnUGFzdGUgcm93IGJlZm9yZScsXG4gICAgICBpY29uOiAncGFzdGUtcm93LWJlZm9yZScsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVQYXN0ZVJvd0JlZm9yZScsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBQYXN0ZWFibGUoRmFrZUNsaXBib2FyZC5nZXRSb3dzKVxuICAgIH0pLFxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlcGFzdGVyb3dhZnRlcicsIHtcbiAgICAgIHRleHQ6ICdQYXN0ZSByb3cgYWZ0ZXInLFxuICAgICAgaWNvbjogJ3Bhc3RlLXJvdy1hZnRlcicsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVQYXN0ZVJvd0FmdGVyJyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFBhc3RlYWJsZShGYWtlQ2xpcGJvYXJkLmdldFJvd3MpXG4gICAgfSksXG4gIF07XG5cbiAgY29uc3QgaGFzQ29sdW1uTWVudUl0ZW1zID0gW1xuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlaW5zZXJ0Y29sdW1uYmVmb3JlJywge1xuICAgICAgdGV4dDogJ0luc2VydCBjb2x1bW4gYmVmb3JlJyxcbiAgICAgIGljb246ICd0YWJsZS1pbnNlcnQtY29sdW1uLWJlZm9yZScsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVJbnNlcnRDb2xCZWZvcmUnLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25GaXJzdClcbiAgICB9KSxcbiAgICBhZGRNZW51SWZSZWdpc3RlcmVkKCd0YWJsZWluc2VydGNvbHVtbmFmdGVyJywge1xuICAgICAgdGV4dDogJ0luc2VydCBjb2x1bW4gYWZ0ZXInLFxuICAgICAgaWNvbjogJ3RhYmxlLWluc2VydC1jb2x1bW4tYWZ0ZXInLFxuICAgICAgY29tbWFuZDogJ21jZVRhYmxlSW5zZXJ0Q29sQWZ0ZXInLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25MYXN0KVxuICAgIH0pLFxuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlZGVsZXRlY29sdW1uJywge1xuICAgICAgdGV4dDogJ0RlbGV0ZSBjb2x1bW4nLFxuICAgICAgaWNvbjogJ3RhYmxlLWRlbGV0ZS1jb2x1bW4nLFxuICAgICAgY29tbWFuZDogJ21jZVRhYmxlRGVsZXRlQ29sJyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENvbHVtbihMb2NrZWREaXNhYmxlLm9uQW55KVxuICAgIH0pLFxuXG4gICAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVjdXRjb2x1bW4nLCB7XG4gICAgICB0ZXh0OiAnQ3V0IGNvbHVtbicsXG4gICAgICBpY29uOiAnY3V0LWNvbHVtbicsXG4gICAgICBjb21tYW5kOiAnbWNlVGFibGVDdXRDb2wnLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25BbnkpXG4gICAgfSksXG4gICAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVjb3B5Y29sdW1uJywge1xuICAgICAgdGV4dDogJ0NvcHkgY29sdW1uJyxcbiAgICAgIGljb246ICdkdXBsaWNhdGUtY29sdW1uJyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUNvcHlDb2wnLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ29sdW1uKExvY2tlZERpc2FibGUub25BbnkpXG4gICAgfSksXG4gICAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVwYXN0ZWNvbHVtbmJlZm9yZScsIHtcbiAgICAgIHRleHQ6ICdQYXN0ZSBjb2x1bW4gYmVmb3JlJyxcbiAgICAgIGljb246ICdwYXN0ZS1jb2x1bW4tYmVmb3JlJyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZVBhc3RlQ29sQmVmb3JlJyxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFBhc3RlYWJsZUNvbHVtbihGYWtlQ2xpcGJvYXJkLmdldENvbHVtbnMsIExvY2tlZERpc2FibGUub25GaXJzdClcbiAgICB9KSxcbiAgICBhZGRNZW51SWZSZWdpc3RlcmVkKCd0YWJsZXBhc3RlY29sdW1uYWZ0ZXInLCB7XG4gICAgICB0ZXh0OiAnUGFzdGUgY29sdW1uIGFmdGVyJyxcbiAgICAgIGljb246ICdwYXN0ZS1jb2x1bW4tYWZ0ZXInLFxuICAgICAgY29tbWFuZDogJ21jZVRhYmxlUGFzdGVDb2xBZnRlcicsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBQYXN0ZWFibGVDb2x1bW4oRmFrZUNsaXBib2FyZC5nZXRDb2x1bW5zLCBMb2NrZWREaXNhYmxlLm9uTGFzdClcbiAgICB9KSxcbiAgXTtcblxuICBjb25zdCBoYXNDZWxsTWVudUl0ZW1zID0gW1xuICAgIGFkZE1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlY2VsbHByb3BzJywge1xuICAgICAgdGV4dDogJ0NlbGwgcHJvcGVydGllcycsXG4gICAgICBpY29uOiAndGFibGUtY2VsbC1wcm9wZXJ0aWVzJyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZUNlbGxQcm9wcycsXG4gICAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBDZWxsT3JSb3dcbiAgICB9KSxcbiAgICBhZGRNZW51SWZSZWdpc3RlcmVkKCd0YWJsZW1lcmdlY2VsbHMnLCB7XG4gICAgICB0ZXh0OiAnTWVyZ2UgY2VsbHMnLFxuICAgICAgaWNvbjogJ3RhYmxlLW1lcmdlLWNlbGxzJyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZU1lcmdlQ2VsbHMnLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwTWVyZ2VhYmxlXG4gICAgfSksXG4gICAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVzcGxpdGNlbGxzJywge1xuICAgICAgdGV4dDogJ1NwbGl0IGNlbGwnLFxuICAgICAgaWNvbjogJ3RhYmxlLXNwbGl0LWNlbGxzJyxcbiAgICAgIGNvbW1hbmQ6ICdtY2VUYWJsZVNwbGl0Q2VsbHMnLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVW5tZXJnZWFibGVcbiAgICB9KSxcbiAgXTtcblxuICBpZiAoIU9wdGlvbnMuaGFzVGFibGVHcmlkKGVkaXRvcikpIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTWVudUl0ZW0oJ2luc2VydHRhYmxlJywge1xuICAgICAgdGV4dDogJ1RhYmxlJyxcbiAgICAgIGljb246ICd0YWJsZScsXG4gICAgICBvbkFjdGlvbjogY21kKCdtY2VJbnNlcnRUYWJsZURpYWxvZycpLFxuICAgICAgb25TZXR1cDogb25TZXR1cEVkaXRhYmxlKGVkaXRvcilcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ2luc2VydHRhYmxlJywge1xuICAgICAgdGV4dDogJ1RhYmxlJyxcbiAgICAgIGljb246ICd0YWJsZScsXG4gICAgICBnZXRTdWJtZW51SXRlbXM6ICgpID0+IFt7IHR5cGU6ICdmYW5jeW1lbnVpdGVtJywgZmFuY3l0eXBlOiAnaW5zZXJ0dGFibGUnLCBvbkFjdGlvbjogaW5zZXJ0VGFibGVBY3Rpb24gfV0sXG4gICAgICBvblNldHVwOiBvblNldHVwRWRpdGFibGUoZWRpdG9yKVxuICAgIH0pO1xuICB9XG5cbiAgLy8gVElOWS0zNjM2OiBXZSB3YW50IGEgd2F5IHRvIHVzZSB0aGUgZGlhbG9nIGV2ZW4gd2hlbiB0YWJsZWdyaWQgdHJ1ZS5cbiAgLy8gSWYgdGFibGVncmlkIGZhbHNlIHRoZW4gaW5zZXJ0dGFibGUgYW5kIGluc2VydHRhYmxlZGlhbG9nIGFyZSB0aGUgc2FtZSxcbiAgLy8gYnV0IHRoYXQncyBwcmVmZXJyYWJsZSB0byBicmVha2luZyB0aGluZ3MgYXQgdGhpcyBwb2ludC5cbiAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE1lbnVJdGVtKCdpbnNlcnR0YWJsZWRpYWxvZycsIHtcbiAgICB0ZXh0OiAnSW5zZXJ0IHRhYmxlJyxcbiAgICBpY29uOiAndGFibGUnLFxuICAgIG9uQWN0aW9uOiBjbWQoJ21jZUluc2VydFRhYmxlRGlhbG9nJyksXG4gICAgb25TZXR1cDogb25TZXR1cEVkaXRhYmxlKGVkaXRvcilcbiAgfSk7XG5cbiAgYWRkTWVudUlmUmVnaXN0ZXJlZCgndGFibGVwcm9wcycsIHtcbiAgICB0ZXh0OiAnVGFibGUgcHJvcGVydGllcycsXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGUsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlUHJvcHMnXG4gIH0pO1xuICBhZGRNZW51SWZSZWdpc3RlcmVkKCdkZWxldGV0YWJsZScsIHtcbiAgICB0ZXh0OiAnRGVsZXRlIHRhYmxlJyxcbiAgICBpY29uOiAndGFibGUtZGVsZXRlLXRhYmxlJyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBUYWJsZSxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVEZWxldGUnXG4gIH0pO1xuXG4gIC8vIGlmIGFueSBvZiB0aGUgcm93IG1lbnUgaXRlbXMgcmV0dXJuZWQgdHJ1ZVxuICBpZiAoQXJyLmNvbnRhaW5zKGhhc1Jvd01lbnVJdGVtcywgdHJ1ZSkpIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ3JvdycsIHtcbiAgICAgIHR5cGU6ICduZXN0ZWRtZW51aXRlbScsXG4gICAgICB0ZXh0OiAnUm93JyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogRnVuLmNvbnN0YW50KCd0YWJsZWluc2VydHJvd2JlZm9yZSB0YWJsZWluc2VydHJvd2FmdGVyIHRhYmxlZGVsZXRlcm93IHRhYmxlcm93cHJvcHMgfCB0YWJsZWN1dHJvdyB0YWJsZWNvcHlyb3cgdGFibGVwYXN0ZXJvd2JlZm9yZSB0YWJsZXBhc3Rlcm93YWZ0ZXInKVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKEFyci5jb250YWlucyhoYXNDb2x1bW5NZW51SXRlbXMsIHRydWUpKSB7XG4gICAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE5lc3RlZE1lbnVJdGVtKCdjb2x1bW4nLCB7XG4gICAgICB0eXBlOiAnbmVzdGVkbWVudWl0ZW0nLFxuICAgICAgdGV4dDogJ0NvbHVtbicsXG4gICAgICBnZXRTdWJtZW51SXRlbXM6IEZ1bi5jb25zdGFudCgndGFibGVpbnNlcnRjb2x1bW5iZWZvcmUgdGFibGVpbnNlcnRjb2x1bW5hZnRlciB0YWJsZWRlbGV0ZWNvbHVtbiB8IHRhYmxlY3V0Y29sdW1uIHRhYmxlY29weWNvbHVtbiB0YWJsZXBhc3RlY29sdW1uYmVmb3JlIHRhYmxlcGFzdGVjb2x1bW5hZnRlcicpXG4gICAgfSk7XG4gIH1cblxuICBpZiAoQXJyLmNvbnRhaW5zKGhhc0NlbGxNZW51SXRlbXMsIHRydWUpKSB7XG4gICAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE5lc3RlZE1lbnVJdGVtKCdjZWxsJywge1xuICAgICAgdHlwZTogJ25lc3RlZG1lbnVpdGVtJyxcbiAgICAgIHRleHQ6ICdDZWxsJyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogRnVuLmNvbnN0YW50KCd0YWJsZWNlbGxwcm9wcyB0YWJsZW1lcmdlY2VsbHMgdGFibGVzcGxpdGNlbGxzJylcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRvci51aS5yZWdpc3RyeS5hZGRDb250ZXh0TWVudSgndGFibGUnLCB7XG4gICAgdXBkYXRlOiAoKSA9PiB7XG4gICAgICAvLyBjb250ZXh0IG1lbnUgZmlyZXMgYmVmb3JlIG5vZGUgY2hhbmdlLCBzbyBjaGVjayB0aGUgc2VsZWN0aW9uIGhlcmUgZmlyc3RcbiAgICAgIHNlbGVjdGlvblRhcmdldHMucmVzZXRUYXJnZXRzKCk7XG4gICAgICAvLyBpZ25vcmluZyBlbGVtZW50IHNpbmNlIGl0J3MgbW9uaXRvcmVkIGVsc2V3aGVyZVxuICAgICAgcmV0dXJuIHNlbGVjdGlvblRhcmdldHMudGFyZ2V0cygpLmZvbGQoRnVuLmNvbnN0YW50KCcnKSwgKHRhcmdldHMpID0+IHtcbiAgICAgICAgLy8gSWYgY2xpY2tpbmcgaW4gYSBjYXB0aW9uLCB0aGVuIHdlIHNob3VsZG4ndCBzaG93IHRoZSBjZWxsL3Jvdy9jb2x1bW4gb3B0aW9uc1xuICAgICAgICBpZiAoU3VnYXJOb2RlLm5hbWUodGFyZ2V0cy5lbGVtZW50KSA9PT0gJ2NhcHRpb24nKSB7XG4gICAgICAgICAgcmV0dXJuICd0YWJsZXByb3BzIGRlbGV0ZXRhYmxlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gJ2NlbGwgcm93IGNvbHVtbiB8IGFkdnRhYmxlc29ydCB8IHRhYmxlcHJvcHMgZGVsZXRldGFibGUnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHRhYmxlQ2xhc3NMaXN0ID0gZmlsdGVyTm9uZUl0ZW0oT3B0aW9ucy5nZXRUYWJsZUNsYXNzTGlzdChlZGl0b3IpKTtcbiAgaWYgKHRhYmxlQ2xhc3NMaXN0Lmxlbmd0aCAhPT0gMCAmJiBlZGl0b3IucXVlcnlDb21tYW5kU3VwcG9ydGVkKCdtY2VUYWJsZVRvZ2dsZUNsYXNzJykpIHtcbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ3RhYmxlY2xhc3MnLCB7XG4gICAgICBpY29uOiAndGFibGUtY2xhc3NlcycsXG4gICAgICB0ZXh0OiAnVGFibGUgc3R5bGVzJyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogKCkgPT4gYnVpbGRNZW51SXRlbXMoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgdGFibGVDbGFzc0xpc3QsXG4gICAgICAgICd0YWJsZWNsYXNzJyxcbiAgICAgICAgKHZhbHVlKSA9PiBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlVG9nZ2xlQ2xhc3MnLCBmYWxzZSwgdmFsdWUpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGVcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHRhYmxlQ2VsbENsYXNzTGlzdCA9IGZpbHRlck5vbmVJdGVtKE9wdGlvbnMuZ2V0Q2VsbENsYXNzTGlzdChlZGl0b3IpKTtcbiAgaWYgKHRhYmxlQ2VsbENsYXNzTGlzdC5sZW5ndGggIT09IDAgJiYgZWRpdG9yLnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCgnbWNlVGFibGVDZWxsVG9nZ2xlQ2xhc3MnKSkge1xuICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGROZXN0ZWRNZW51SXRlbSgndGFibGVjZWxsY2xhc3MnLCB7XG4gICAgICBpY29uOiAndGFibGUtY2VsbC1jbGFzc2VzJyxcbiAgICAgIHRleHQ6ICdDZWxsIHN0eWxlcycsXG4gICAgICBnZXRTdWJtZW51SXRlbXM6ICgpID0+IGJ1aWxkTWVudUl0ZW1zKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHRhYmxlQ2VsbENsYXNzTGlzdCxcbiAgICAgICAgJ3RhYmxlY2VsbGNsYXNzJyxcbiAgICAgICAgKHZhbHVlKSA9PiBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQ2VsbFRvZ2dsZUNsYXNzJywgZmFsc2UsIHZhbHVlKVxuICAgICAgKSxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogVElOWS04MTcyIFVud2luZCB0aGlzIHdoZW4gYW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gaXMgZm91bmRcbiAgaWYgKGVkaXRvci5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ21jZVRhYmxlQXBwbHlDZWxsU3R5bGUnKSkge1xuICAgIGVkaXRvci51aS5yZWdpc3RyeS5hZGROZXN0ZWRNZW51SXRlbSgndGFibGVjZWxsdmFsaWduJywge1xuICAgICAgaWNvbjogJ3ZlcnRpY2FsLWFsaWduJyxcbiAgICAgIHRleHQ6ICdWZXJ0aWNhbCBhbGlnbicsXG4gICAgICBnZXRTdWJtZW51SXRlbXM6ICgpID0+IGJ1aWxkTWVudUl0ZW1zKFxuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHZlcnRpY2FsQWxpZ25WYWx1ZXMsXG4gICAgICAgICd0YWJsZWNlbGx2ZXJ0aWNhbGFsaWduJyxcbiAgICAgICAgYXBwbHlUYWJsZUNlbGxTdHlsZShlZGl0b3IsICd2ZXJ0aWNhbC1hbGlnbicpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ3RhYmxlY2VsbGJvcmRlcndpZHRoJywge1xuICAgICAgaWNvbjogJ2JvcmRlci13aWR0aCcsXG4gICAgICB0ZXh0OiAnQm9yZGVyIHdpZHRoJyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogKCkgPT4gYnVpbGRNZW51SXRlbXMoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgT3B0aW9ucy5nZXRUYWJsZUJvcmRlcldpZHRocyhlZGl0b3IpLFxuICAgICAgICAndGFibGVjZWxsYm9yZGVyd2lkdGgnLFxuICAgICAgICBhcHBseVRhYmxlQ2VsbFN0eWxlKGVkaXRvciwgJ2JvcmRlci13aWR0aCcpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ3RhYmxlY2VsbGJvcmRlcnN0eWxlJywge1xuICAgICAgaWNvbjogJ2JvcmRlci1zdHlsZScsXG4gICAgICB0ZXh0OiAnQm9yZGVyIHN0eWxlJyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogKCkgPT4gYnVpbGRNZW51SXRlbXMoXG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgT3B0aW9ucy5nZXRUYWJsZUJvcmRlclN0eWxlcyhlZGl0b3IpLFxuICAgICAgICAndGFibGVjZWxsYm9yZGVyc3R5bGUnLFxuICAgICAgICBhcHBseVRhYmxlQ2VsbFN0eWxlKGVkaXRvciwgJ2JvcmRlci1zdHlsZScpXG4gICAgICApLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG5cbiAgICBlZGl0b3IudWkucmVnaXN0cnkuYWRkTmVzdGVkTWVudUl0ZW0oJ3RhYmxlY2VsbGJhY2tncm91bmRjb2xvcicsIHtcbiAgICAgIGljb246ICdjZWxsLWJhY2tncm91bmQtY29sb3InLFxuICAgICAgdGV4dDogJ0JhY2tncm91bmQgY29sb3InLFxuICAgICAgZ2V0U3VibWVudUl0ZW1zOiAoKSA9PiBidWlsZENvbG9yTWVudShlZGl0b3IsIE9wdGlvbnMuZ2V0VGFibGVCYWNrZ3JvdW5kQ29sb3JNYXAoZWRpdG9yKSwgJ2JhY2tncm91bmQtY29sb3InKSxcbiAgICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cENlbGxPclJvd1xuICAgIH0pO1xuXG4gICAgZWRpdG9yLnVpLnJlZ2lzdHJ5LmFkZE5lc3RlZE1lbnVJdGVtKCd0YWJsZWNlbGxib3JkZXJjb2xvcicsIHtcbiAgICAgIGljb246ICdjZWxsLWJvcmRlci1jb2xvcicsXG4gICAgICB0ZXh0OiAnQm9yZGVyIGNvbG9yJyxcbiAgICAgIGdldFN1Ym1lbnVJdGVtczogKCkgPT4gYnVpbGRDb2xvck1lbnUoZWRpdG9yLCBPcHRpb25zLmdldFRhYmxlQm9yZGVyQ29sb3JNYXAoZWRpdG9yKSwgJ2JvcmRlci1jb2xvcicpLFxuICAgICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwQ2VsbE9yUm93XG4gICAgfSk7XG4gIH1cblxuICBhZGRUb2dnbGVNZW51SWZSZWdpc3RlcmVkKCd0YWJsZWNhcHRpb24nLCB7XG4gICAgaWNvbjogJ3RhYmxlLWNhcHRpb24nLFxuICAgIHRleHQ6ICdUYWJsZSBjYXB0aW9uJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVUb2dnbGVDYXB0aW9uJyxcbiAgICBvblNldHVwOiBzZWxlY3Rpb25UYXJnZXRzLm9uU2V0dXBUYWJsZVdpdGhDYXB0aW9uXG4gIH0pO1xuXG4gIGFkZFRvZ2dsZU1lbnVJZlJlZ2lzdGVyZWQoJ3RhYmxlcm93aGVhZGVyJywge1xuICAgIHRleHQ6ICdSb3cgaGVhZGVyJyxcbiAgICBpY29uOiAndGFibGUtdG9wLWhlYWRlcicsXG4gICAgY29tbWFuZDogJ21jZVRhYmxlUm93VHlwZScsXG4gICAgb25BY3Rpb246IGNoYW5nZVJvd0hlYWRlcihlZGl0b3IpLFxuICAgIG9uU2V0dXA6IHNlbGVjdGlvblRhcmdldHMub25TZXR1cFRhYmxlUm93SGVhZGVyc1xuICB9KTtcblxuICBhZGRUb2dnbGVNZW51SWZSZWdpc3RlcmVkKCd0YWJsZWNvbGhlYWRlcicsIHtcbiAgICB0ZXh0OiAnQ29sdW1uIGhlYWRlcicsXG4gICAgaWNvbjogJ3RhYmxlLWxlZnQtaGVhZGVyJyxcbiAgICBjb21tYW5kOiAnbWNlVGFibGVDb2xUeXBlJyxcbiAgICBvbkFjdGlvbjogY2hhbmdlQ29sdW1uSGVhZGVyKGVkaXRvciksXG4gICAgb25TZXR1cDogc2VsZWN0aW9uVGFyZ2V0cy5vblNldHVwVGFibGVSb3dIZWFkZXJzXG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgYWRkTWVudUl0ZW1zXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9iaiB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBUYWJsZUxvb2t1cCB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IFNlbGVjdG9yRmlsdGVyLCBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBEaWFsb2cgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0ICogYXMgU3R5bGVzIGZyb20gJy4uL2FjdGlvbnMvU3R5bGVzJztcbmltcG9ydCAqIGFzIEV2ZW50cyBmcm9tICcuLi9hcGkvRXZlbnRzJztcbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vY29yZS9VdGlscyc7XG5pbXBvcnQgeyBlcGhlbWVyYSB9IGZyb20gJy4uL3NlbGVjdGlvbi9FcGhlbWVyYSc7XG5pbXBvcnQgKiBhcyBUYWJsZVNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vVGFibGVTZWxlY3Rpb24nO1xuXG5pbXBvcnQgeyBnZXRBZHZhbmNlZFRhYiB9IGZyb20gJy4vRGlhbG9nQWR2YW5jZWRUYWInO1xuaW1wb3J0IHsgRG9tTW9kaWZpZXIgfSBmcm9tICcuL0RvbU1vZGlmaWVyJztcbmltcG9ydCAqIGFzIEhlbHBlcnMgZnJvbSAnLi9IZWxwZXJzJztcbmltcG9ydCAqIGFzIFJvd0RpYWxvZ0dlbmVyYWxUYWIgZnJvbSAnLi9Sb3dEaWFsb2dHZW5lcmFsVGFiJztcblxudHlwZSBSb3dEYXRhID0gSGVscGVycy5Sb3dEYXRhO1xuXG5jb25zdCB1cGRhdGVTaW1wbGVQcm9wcyA9IChtb2RpZmllcjogRG9tTW9kaWZpZXIsIGRhdGE6IFJvd0RhdGEsIHNob3VsZFVwZGF0ZTogKGtleTogc3RyaW5nKSA9PiBib29sZWFuKTogdm9pZCA9PiB7XG4gIGlmIChzaG91bGRVcGRhdGUoJ2NsYXNzJykgJiYgZGF0YS5jbGFzcyAhPT0gJ21jZS1uby1tYXRjaCcpIHtcbiAgICBtb2RpZmllci5zZXRBdHRyaWIoJ2NsYXNzJywgZGF0YS5jbGFzcyk7XG4gIH1cbiAgaWYgKHNob3VsZFVwZGF0ZSgnaGVpZ2h0JykpIHtcbiAgICBtb2RpZmllci5zZXRTdHlsZSgnaGVpZ2h0JywgVXRpbHMuYWRkUHhTdWZmaXgoZGF0YS5oZWlnaHQpKTtcbiAgfVxufTtcblxuY29uc3QgdXBkYXRlQWR2YW5jZWRQcm9wcyA9IChtb2RpZmllcjogRG9tTW9kaWZpZXIsIGRhdGE6IFJlcXVpcmVkPFJvd0RhdGE+LCBzaG91bGRVcGRhdGU6IChrZXk6IHN0cmluZykgPT4gYm9vbGVhbik6IHZvaWQgPT4ge1xuICBpZiAoc2hvdWxkVXBkYXRlKCdiYWNrZ3JvdW5kY29sb3InKSkge1xuICAgIG1vZGlmaWVyLnNldFN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgZGF0YS5iYWNrZ3JvdW5kY29sb3IpO1xuICB9XG4gIGlmIChzaG91bGRVcGRhdGUoJ2JvcmRlcmNvbG9yJykpIHtcbiAgICBtb2RpZmllci5zZXRTdHlsZSgnYm9yZGVyLWNvbG9yJywgZGF0YS5ib3JkZXJjb2xvcik7XG4gIH1cbiAgaWYgKHNob3VsZFVwZGF0ZSgnYm9yZGVyc3R5bGUnKSkge1xuICAgIG1vZGlmaWVyLnNldFN0eWxlKCdib3JkZXItc3R5bGUnLCBkYXRhLmJvcmRlcnN0eWxlKTtcbiAgfVxufTtcblxuY29uc3QgYXBwbHlTdHlsZURhdGEgPSAoZWRpdG9yOiBFZGl0b3IsIHJvd3M6IEhUTUxUYWJsZVJvd0VsZW1lbnRbXSwgZGF0YTogUm93RGF0YSwgd2FzQ2hhbmdlZDogKGtleTogc3RyaW5nKSA9PiBib29sZWFuKTogdm9pZCA9PiB7XG4gIGNvbnN0IGlzU2luZ2xlUm93ID0gcm93cy5sZW5ndGggPT09IDE7XG4gIGNvbnN0IHNob3VsZE92ZXJyaWRlQ3VycmVudFZhbHVlID0gaXNTaW5nbGVSb3cgPyBGdW4uYWx3YXlzIDogd2FzQ2hhbmdlZDtcbiAgQXJyLmVhY2gocm93cywgKHJvd0VsbSkgPT4ge1xuICAgIGNvbnN0IHJvd0NlbGxzID0gU2VsZWN0b3JGaWx0ZXIuY2hpbGRyZW48SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJvd0VsbSksICd0ZCx0aCcpO1xuICAgIGNvbnN0IG1vZGlmaWVyID0gRG9tTW9kaWZpZXIubm9ybWFsKGVkaXRvciwgcm93RWxtKTtcblxuICAgIHVwZGF0ZVNpbXBsZVByb3BzKG1vZGlmaWVyLCBkYXRhLCBzaG91bGRPdmVycmlkZUN1cnJlbnRWYWx1ZSk7XG5cbiAgICBpZiAoT3B0aW9ucy5oYXNBZHZhbmNlZFJvd1RhYihlZGl0b3IpKSB7XG4gICAgICB1cGRhdGVBZHZhbmNlZFByb3BzKG1vZGlmaWVyLCBkYXRhIGFzIFJlcXVpcmVkPFJvd0RhdGE+LCBzaG91bGRPdmVycmlkZUN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVElOWS0xMDYxNzogU2ltcGxpZnkgbnVtYmVyIG9mIGhlaWdodCBzdHlsZXMgd2hlbiBhcHBseWluZyBoZWlnaHQgb24gdHJcbiAgICBpZiAod2FzQ2hhbmdlZCgnaGVpZ2h0JykpIHtcbiAgICAgIEFyci5lYWNoKHJvd0NlbGxzLCAoY2VsbCkgPT4ge1xuICAgICAgICBlZGl0b3IuZG9tLnNldFN0eWxlKGNlbGwuZG9tLCAnaGVpZ2h0JywgbnVsbCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAod2FzQ2hhbmdlZCgnYWxpZ24nKSkge1xuICAgICAgU3R5bGVzLnNldEFsaWduKGVkaXRvciwgcm93RWxtLCBkYXRhLmFsaWduKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgYXBwbHlTdHJ1Y3R1cmVEYXRhID0gKGVkaXRvcjogRWRpdG9yLCBkYXRhOiBSb3dEYXRhKTogdm9pZCA9PiB7XG4gIC8vIFN3aXRjaCBjZWxsIHR5cGUgaWYgYXBwbGljYWJsZS4gTm90ZSB0aGF0IHdlIHNwZWNpZmljYWxseSB0ZWxsIHRoZSBjb21tYW5kIHRvIG5vdCBmaXJlIGV2ZW50c1xuICAvLyBhcyB3ZSdsbCBiYXRjaCB0aGUgZXZlbnRzIGFuZCBmaXJlIGEgYFRhYmxlTW9kaWZpZWRgIGV2ZW50IGF0IHRoZSBlbmQgb2YgdGhlIHVwZGF0ZXMuXG4gIGVkaXRvci5leGVjQ29tbWFuZCgnbWNlVGFibGVSb3dUeXBlJywgZmFsc2UsIHsgdHlwZTogZGF0YS50eXBlLCBub19ldmVudHM6IHRydWUgfSk7XG59O1xuXG5jb25zdCBhcHBseVJvd0RhdGEgPSAoZWRpdG9yOiBFZGl0b3IsIHJvd3M6IEhUTUxUYWJsZVJvd0VsZW1lbnRbXSwgb2xkRGF0YTogUm93RGF0YSwgZGF0YTogUm93RGF0YSk6IHZvaWQgPT4ge1xuICBjb25zdCBtb2RpZmllZERhdGEgPSBPYmouZmlsdGVyKGRhdGEsICh2YWx1ZSwga2V5KSA9PiBvbGREYXRhW2tleSBhcyBrZXlvZiBSb3dEYXRhXSAhPT0gdmFsdWUpO1xuXG4gIGlmIChPYmouc2l6ZShtb2RpZmllZERhdGEpID4gMCkge1xuICAgIGNvbnN0IHR5cGVNb2RpZmllZCA9IE9iai5oYXMobW9kaWZpZWREYXRhLCAndHlwZScpO1xuICAgIC8vIHN0eWxlIG1vZGlmaWVkIGlmIHRoZXJlJ3MgYXQgbGVhc3Qgb25lIG90aGVyIGNoYW5nZSBhcGFydCBmcm9tICd0eXBlJ1xuICAgIGNvbnN0IHN0eWxlTW9kaWZpZWQgPSB0eXBlTW9kaWZpZWQgPyBPYmouc2l6ZShtb2RpZmllZERhdGEpID4gMSA6IHRydWU7XG5cbiAgICAvLyBVcGRhdGUgdGhlIHJvd3Mgc3R5bGluZyB1c2luZyB0aGUgZGlhbG9nIGRhdGFcbiAgICBpZiAoc3R5bGVNb2RpZmllZCkge1xuICAgICAgYXBwbHlTdHlsZURhdGEoZWRpdG9yLCByb3dzLCBkYXRhLCBGdW4uY3VycnkoT2JqLmhhcywgbW9kaWZpZWREYXRhKSk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSByb3dzIHN0cnVjdHVyZSB1c2luZyB0aGUgZGlhbG9nIGRhdGFcbiAgICBpZiAodHlwZU1vZGlmaWVkKSB7XG4gICAgICBhcHBseVN0cnVjdHVyZURhdGEoZWRpdG9yLCBkYXRhKTtcbiAgICB9XG5cbiAgICBUYWJsZUxvb2t1cC50YWJsZShTdWdhckVsZW1lbnQuZnJvbURvbShyb3dzWzBdKSkuZWFjaChcbiAgICAgICh0YWJsZSkgPT4gRXZlbnRzLmZpcmVUYWJsZU1vZGlmaWVkKGVkaXRvciwgdGFibGUuZG9tLCB7XG4gICAgICAgIHN0cnVjdHVyZTogdHlwZU1vZGlmaWVkLFxuICAgICAgICBzdHlsZTogc3R5bGVNb2RpZmllZFxuICAgICAgfSlcbiAgICApO1xuICB9XG59O1xuXG5jb25zdCBvblN1Ym1pdFJvd0Zvcm0gPSAoZWRpdG9yOiBFZGl0b3IsIHJvd3M6IEhUTUxUYWJsZVJvd0VsZW1lbnRbXSwgb2xkRGF0YTogUm93RGF0YSwgYXBpOiBEaWFsb2cuRGlhbG9nSW5zdGFuY2VBcGk8Um93RGF0YT4pOiB2b2lkID0+IHtcbiAgY29uc3QgZGF0YSA9IGFwaS5nZXREYXRhKCk7XG4gIGFwaS5jbG9zZSgpO1xuXG4gIGVkaXRvci51bmRvTWFuYWdlci50cmFuc2FjdCgoKSA9PiB7XG4gICAgYXBwbHlSb3dEYXRhKGVkaXRvciwgcm93cywgb2xkRGF0YSwgZGF0YSk7XG4gICAgZWRpdG9yLmZvY3VzKCk7XG4gIH0pO1xufTtcblxuY29uc3Qgb3BlbiA9IChlZGl0b3I6IEVkaXRvcik6IHZvaWQgPT4ge1xuICBjb25zdCByb3dzID0gVGFibGVTZWxlY3Rpb24uZ2V0Um93c0Zyb21TZWxlY3Rpb24oVXRpbHMuZ2V0U2VsZWN0aW9uU3RhcnQoZWRpdG9yKSwgZXBoZW1lcmEuc2VsZWN0ZWQpO1xuXG4gIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgcm93cyB0byBvcGVyYXRlIG9uXG4gIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEdldCBjdXJyZW50IGRhdGEgYW5kIGZpbmQgc2hhcmVkIHZhbHVlcyBiZXR3ZWVuIHJvd3NcbiAgY29uc3Qgcm93c0RhdGEgPSBBcnIubWFwKHJvd3MsIChyb3dFbG0pID0+IEhlbHBlcnMuZXh0cmFjdERhdGFGcm9tUm93RWxlbWVudChlZGl0b3IsIHJvd0VsbS5kb20sIE9wdGlvbnMuaGFzQWR2YW5jZWRSb3dUYWIoZWRpdG9yKSkpO1xuICBjb25zdCBkYXRhID0gSGVscGVycy5nZXRTaGFyZWRWYWx1ZXM8Um93RGF0YT4ocm93c0RhdGEpO1xuXG4gIGNvbnN0IGRpYWxvZ1RhYlBhbmVsOiBEaWFsb2cuVGFiUGFuZWxTcGVjID0ge1xuICAgIHR5cGU6ICd0YWJwYW5lbCcsXG4gICAgdGFiczogW1xuICAgICAge1xuICAgICAgICB0aXRsZTogJ0dlbmVyYWwnLFxuICAgICAgICBuYW1lOiAnZ2VuZXJhbCcsXG4gICAgICAgIGl0ZW1zOiBSb3dEaWFsb2dHZW5lcmFsVGFiLmdldEl0ZW1zKGVkaXRvcilcbiAgICAgIH0sXG4gICAgICBnZXRBZHZhbmNlZFRhYihlZGl0b3IsICdyb3cnKVxuICAgIF1cbiAgfTtcbiAgY29uc3QgZGlhbG9nUGFuZWw6IERpYWxvZy5QYW5lbFNwZWMgPSB7XG4gICAgdHlwZTogJ3BhbmVsJyxcbiAgICBpdGVtczogW1xuICAgICAge1xuICAgICAgICB0eXBlOiAnZ3JpZCcsXG4gICAgICAgIGNvbHVtbnM6IDIsXG4gICAgICAgIGl0ZW1zOiBSb3dEaWFsb2dHZW5lcmFsVGFiLmdldEl0ZW1zKGVkaXRvcilcbiAgICAgIH1cbiAgICBdXG4gIH07XG5cbiAgZWRpdG9yLndpbmRvd01hbmFnZXIub3Blbih7XG4gICAgdGl0bGU6ICdSb3cgUHJvcGVydGllcycsXG4gICAgc2l6ZTogJ25vcm1hbCcsXG4gICAgYm9keTogT3B0aW9ucy5oYXNBZHZhbmNlZFJvd1RhYihlZGl0b3IpID8gZGlhbG9nVGFiUGFuZWwgOiBkaWFsb2dQYW5lbCxcbiAgICBidXR0b25zOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdjYW5jZWwnLFxuICAgICAgICBuYW1lOiAnY2FuY2VsJyxcbiAgICAgICAgdGV4dDogJ0NhbmNlbCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICBuYW1lOiAnc2F2ZScsXG4gICAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgICAgcHJpbWFyeTogdHJ1ZVxuICAgICAgfVxuICAgIF0sXG4gICAgaW5pdGlhbERhdGE6IGRhdGEsXG4gICAgb25TdWJtaXQ6IEZ1bi5jdXJyeShvblN1Ym1pdFJvd0Zvcm0sIGVkaXRvciwgQXJyLm1hcChyb3dzLCAocikgPT4gci5kb20pLCBkYXRhKVxuICB9KTtcbn07XG5cbmV4cG9ydCB7IG9wZW4gfTtcblxuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IERpYWxvZyB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvdWkvVWknO1xuXG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcblxuaW1wb3J0ICogYXMgVWlVdGlscyBmcm9tICcuL1VpVXRpbHMnO1xuXG5jb25zdCBnZXRDbGFzc0xpc3QgPSAoZWRpdG9yOiBFZGl0b3IpOiBPcHRpb25hbDxEaWFsb2cuTGlzdEJveFNwZWM+ID0+XG4gIFVpVXRpbHMuYnVpbGRDbGFzc0xpc3QoT3B0aW9ucy5nZXRSb3dDbGFzc0xpc3QoZWRpdG9yKSlcbiAgICAubWFwKChpdGVtcykgPT4gKHtcbiAgICAgIG5hbWU6ICdjbGFzcycsXG4gICAgICB0eXBlOiAnbGlzdGJveCcsXG4gICAgICBsYWJlbDogJ0NsYXNzJyxcbiAgICAgIGl0ZW1zXG4gICAgfSkpO1xuXG5jb25zdCBmb3JtQ2hpbGRyZW46IERpYWxvZy5Cb2R5Q29tcG9uZW50U3BlY1tdID0gW1xuICB7XG4gICAgdHlwZTogJ2xpc3Rib3gnLFxuICAgIG5hbWU6ICd0eXBlJyxcbiAgICBsYWJlbDogJ1JvdyB0eXBlJyxcbiAgICBpdGVtczogW1xuICAgICAgeyB0ZXh0OiAnSGVhZGVyJywgdmFsdWU6ICdoZWFkZXInIH0sXG4gICAgICB7IHRleHQ6ICdCb2R5JywgdmFsdWU6ICdib2R5JyB9LFxuICAgICAgeyB0ZXh0OiAnRm9vdGVyJywgdmFsdWU6ICdmb290ZXInIH1cbiAgICBdXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnbGlzdGJveCcsXG4gICAgbmFtZTogJ2FsaWduJyxcbiAgICBsYWJlbDogJ0FsaWdubWVudCcsXG4gICAgaXRlbXM6IFtcbiAgICAgIHsgdGV4dDogJ05vbmUnLCB2YWx1ZTogJycgfSxcbiAgICAgIHsgdGV4dDogJ0xlZnQnLCB2YWx1ZTogJ2xlZnQnIH0sXG4gICAgICB7IHRleHQ6ICdDZW50ZXInLCB2YWx1ZTogJ2NlbnRlcicgfSxcbiAgICAgIHsgdGV4dDogJ1JpZ2h0JywgdmFsdWU6ICdyaWdodCcgfVxuICAgIF1cbiAgfSxcbiAge1xuICAgIGxhYmVsOiAnSGVpZ2h0JyxcbiAgICBuYW1lOiAnaGVpZ2h0JyxcbiAgICB0eXBlOiAnaW5wdXQnXG4gIH1cbl07XG5cbmNvbnN0IGdldEl0ZW1zID0gKGVkaXRvcjogRWRpdG9yKTogRGlhbG9nLkJvZHlDb21wb25lbnRTcGVjW10gPT5cbiAgZm9ybUNoaWxkcmVuLmNvbmNhdChnZXRDbGFzc0xpc3QoZWRpdG9yKS50b0FycmF5KCkpO1xuXG5leHBvcnQge1xuICBnZXRJdGVtc1xufTtcbiIsImltcG9ydCB7IEZ1biwgT2JqLCBTdHJpbmdzLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFRhYmxlTG9va3VwIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuXG5pbXBvcnQgdHlwZSBET01VdGlscyBmcm9tICd0aW55bWNlL2NvcmUvYXBpL2RvbS9ET01VdGlscyc7XG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBTdHlsZU1hcCB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvaHRtbC9TdHlsZXMnO1xuaW1wb3J0IHR5cGUgeyBEaWFsb2cgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0ICogYXMgU3R5bGVzIGZyb20gJy4uL2FjdGlvbnMvU3R5bGVzJztcbmltcG9ydCAqIGFzIEV2ZW50cyBmcm9tICcuLi9hcGkvRXZlbnRzJztcbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vY29yZS9VdGlscyc7XG5pbXBvcnQgKiBhcyBUYWJsZVNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vVGFibGVTZWxlY3Rpb24nO1xuXG5pbXBvcnQgeyBnZXRBZHZhbmNlZFRhYiB9IGZyb20gJy4vRGlhbG9nQWR2YW5jZWRUYWInO1xuaW1wb3J0ICogYXMgSGVscGVycyBmcm9tICcuL0hlbHBlcnMnO1xuaW1wb3J0ICogYXMgVGFibGVEaWFsb2dHZW5lcmFsVGFiIGZyb20gJy4vVGFibGVEaWFsb2dHZW5lcmFsVGFiJztcbmltcG9ydCAqIGFzIFVpVXRpbHMgZnJvbSAnLi9VaVV0aWxzJztcblxudHlwZSBUYWJsZURhdGEgPSBIZWxwZXJzLlRhYmxlRGF0YTtcblxuaW50ZXJmYWNlIEFwcGxpY2FibGVDZWxsUHJvcGVydGllcyB7XG4gIHJlYWRvbmx5IGJvcmRlcjogYm9vbGVhbjtcbiAgcmVhZG9ubHkgYm9yZGVyY29sb3I6IGJvb2xlYW47XG4gIHJlYWRvbmx5IGNlbGxwYWRkaW5nOiBib29sZWFuO1xufVxuXG4vLyBFeHBsb3JlIHRoZSBsYXllcnMgb2YgdGhlIHRhYmxlIHRpbGwgd2UgZmluZCB0aGUgZmlyc3QgbGF5ZXIgb2YgdGRzIG9yIHRoc1xuY29uc3Qgc3R5bGVURFRIID0gKGRvbTogRE9NVXRpbHMsIGVsbTogRWxlbWVudCwgbmFtZTogc3RyaW5nIHwgU3R5bGVNYXAsIHZhbHVlPzogc3RyaW5nIHwgbnVtYmVyKTogdm9pZCA9PiB7XG4gIGlmIChlbG0udGFnTmFtZSA9PT0gJ1REJyB8fCBlbG0udGFnTmFtZSA9PT0gJ1RIJykge1xuICAgIGlmIChUeXBlLmlzU3RyaW5nKG5hbWUpICYmIFR5cGUuaXNOb25OdWxsYWJsZSh2YWx1ZSkpIHtcbiAgICAgIGRvbS5zZXRTdHlsZShlbG0sIG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9tLnNldFN0eWxlcyhlbG0sIG5hbWUgYXMgU3R5bGVNYXApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZWxtLmNoaWxkcmVuKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsbS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdHlsZVREVEgoZG9tLCBlbG0uY2hpbGRyZW5baV0sIG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IGFwcGx5RGF0YVRvRWxlbWVudCA9IChlZGl0b3I6IEVkaXRvciwgdGFibGVFbG06IEhUTUxUYWJsZUVsZW1lbnQsIGRhdGE6IFRhYmxlRGF0YSwgc2hvdWxkQXBwbHlPbkNlbGw6IEFwcGxpY2FibGVDZWxsUHJvcGVydGllcyk6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlZGl0b3IuZG9tO1xuICBjb25zdCBhdHRyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7fTtcbiAgY29uc3Qgc3R5bGVzOiBTdHlsZU1hcCA9IHt9O1xuXG4gIGNvbnN0IHNob3VsZFN0eWxlV2l0aENzcyA9IE9wdGlvbnMuc2hvdWxkU3R5bGVXaXRoQ3NzKGVkaXRvcik7XG4gIGNvbnN0IGhhc0FkdmFuY2VkVGFibGVUYWIgPSBPcHRpb25zLmhhc0FkdmFuY2VkVGFibGVUYWIoZWRpdG9yKTtcbiAgY29uc3QgYm9yZGVySXNaZXJvID0gcGFyc2VGbG9hdChkYXRhLmJvcmRlcikgPT09IDA7XG5cbiAgaWYgKCFUeXBlLmlzVW5kZWZpbmVkKGRhdGEuY2xhc3MpICYmIGRhdGEuY2xhc3MgIT09ICdtY2Utbm8tbWF0Y2gnKSB7XG4gICAgYXR0cnMuY2xhc3MgPSBkYXRhLmNsYXNzO1xuICB9XG5cbiAgc3R5bGVzLmhlaWdodCA9IFV0aWxzLmFkZFB4U3VmZml4KGRhdGEuaGVpZ2h0KTtcblxuICBpZiAoc2hvdWxkU3R5bGVXaXRoQ3NzKSB7XG4gICAgc3R5bGVzLndpZHRoID0gVXRpbHMuYWRkUHhTdWZmaXgoZGF0YS53aWR0aCk7XG4gIH0gZWxzZSBpZiAoZG9tLmdldEF0dHJpYih0YWJsZUVsbSwgJ3dpZHRoJykpIHtcbiAgICBhdHRycy53aWR0aCA9IFV0aWxzLnJlbW92ZVB4U3VmZml4KGRhdGEud2lkdGgpO1xuICB9XG5cbiAgaWYgKHNob3VsZFN0eWxlV2l0aENzcykge1xuICAgIGlmIChib3JkZXJJc1plcm8pIHtcbiAgICAgIGF0dHJzLmJvcmRlciA9IDA7XG4gICAgICBzdHlsZXNbJ2JvcmRlci13aWR0aCddID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc1snYm9yZGVyLXdpZHRoJ10gPSBVdGlscy5hZGRQeFN1ZmZpeChkYXRhLmJvcmRlcik7XG4gICAgICBhdHRycy5ib3JkZXIgPSAxO1xuICAgIH1cbiAgICBzdHlsZXNbJ2JvcmRlci1zcGFjaW5nJ10gPSBVdGlscy5hZGRQeFN1ZmZpeChkYXRhLmNlbGxzcGFjaW5nKTtcbiAgfSBlbHNlIHtcbiAgICBhdHRycy5ib3JkZXIgPSBib3JkZXJJc1plcm8gPyAwIDogZGF0YS5ib3JkZXI7XG4gICAgYXR0cnMuY2VsbHBhZGRpbmcgPSBkYXRhLmNlbGxwYWRkaW5nO1xuICAgIGF0dHJzLmNlbGxzcGFjaW5nID0gZGF0YS5jZWxsc3BhY2luZztcbiAgfVxuXG4gIC8vIFRJTlktOTgzNzogUmVsZXZhbnQgZGF0YSBhcmUgYXBwbGllZCBvbiBjaGlsZCBURC9USHMgb25seSBpZiB0aGV5IGhhdmUgYmVlbiBtb2RpZmllZCBzaW5jZSB0aGUgcHJldmlvdXMgZGlhbG9nIHN1Ym1pc3Npb25cbiAgaWYgKHNob3VsZFN0eWxlV2l0aENzcyAmJiB0YWJsZUVsbS5jaGlsZHJlbikge1xuICAgIGNvbnN0IGNlbGxTdHlsZXM6IFN0eWxlTWFwID0ge307XG4gICAgaWYgKGJvcmRlcklzWmVybykge1xuICAgICAgY2VsbFN0eWxlc1snYm9yZGVyLXdpZHRoJ10gPSAnJztcbiAgICB9IGVsc2UgaWYgKHNob3VsZEFwcGx5T25DZWxsLmJvcmRlcikge1xuICAgICAgY2VsbFN0eWxlc1snYm9yZGVyLXdpZHRoJ10gPSBVdGlscy5hZGRQeFN1ZmZpeChkYXRhLmJvcmRlcik7XG4gICAgfVxuICAgIGlmIChzaG91bGRBcHBseU9uQ2VsbC5jZWxscGFkZGluZykge1xuICAgICAgY2VsbFN0eWxlcy5wYWRkaW5nID0gVXRpbHMuYWRkUHhTdWZmaXgoZGF0YS5jZWxscGFkZGluZyk7XG4gICAgfVxuICAgIGlmIChoYXNBZHZhbmNlZFRhYmxlVGFiICYmIHNob3VsZEFwcGx5T25DZWxsLmJvcmRlcmNvbG9yKSB7XG4gICAgICBjZWxsU3R5bGVzWydib3JkZXItY29sb3InXSA9IChkYXRhIGFzIFJlcXVpcmVkPFRhYmxlRGF0YT4pLmJvcmRlcmNvbG9yO1xuICAgIH1cbiAgICBpZiAoIU9iai5pc0VtcHR5KGNlbGxTdHlsZXMpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYmxlRWxtLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0eWxlVERUSChkb20sIHRhYmxlRWxtLmNoaWxkcmVuW2ldLCBjZWxsU3R5bGVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaGFzQWR2YW5jZWRUYWJsZVRhYikge1xuICAgIGNvbnN0IGFkdkRhdGEgPSBkYXRhIGFzIFJlcXVpcmVkPFRhYmxlRGF0YT47XG4gICAgc3R5bGVzWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSBhZHZEYXRhLmJhY2tncm91bmRjb2xvcjtcbiAgICBzdHlsZXNbJ2JvcmRlci1jb2xvciddID0gYWR2RGF0YS5ib3JkZXJjb2xvcjtcbiAgICBzdHlsZXNbJ2JvcmRlci1zdHlsZSddID0gYWR2RGF0YS5ib3JkZXJzdHlsZTtcbiAgfVxuXG4gIGRvbS5zZXRTdHlsZXModGFibGVFbG0sIHsgLi4uT3B0aW9ucy5nZXREZWZhdWx0U3R5bGVzKGVkaXRvciksIC4uLnN0eWxlcyB9KTtcbiAgZG9tLnNldEF0dHJpYnModGFibGVFbG0sIHsgLi4uT3B0aW9ucy5nZXREZWZhdWx0QXR0cmlidXRlcyhlZGl0b3IpLCAuLi5hdHRycyB9KTtcbn07XG5cbmNvbnN0IG9uU3VibWl0VGFibGVGb3JtID0gKGVkaXRvcjogRWRpdG9yLCB0YWJsZUVsbTogSFRNTFRhYmxlRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQsIG9sZERhdGE6IFRhYmxlRGF0YSwgYXBpOiBEaWFsb2cuRGlhbG9nSW5zdGFuY2VBcGk8VGFibGVEYXRhPik6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlZGl0b3IuZG9tO1xuICBjb25zdCBkYXRhID0gYXBpLmdldERhdGEoKTtcbiAgY29uc3QgbW9kaWZpZWREYXRhID0gT2JqLmZpbHRlcihkYXRhLCAodmFsdWUsIGtleSkgPT4gb2xkRGF0YVtrZXkgYXMga2V5b2YgVGFibGVEYXRhXSAhPT0gdmFsdWUpO1xuXG4gIGFwaS5jbG9zZSgpO1xuXG4gIGVkaXRvci51bmRvTWFuYWdlci50cmFuc2FjdCgoKSA9PiB7XG4gICAgaWYgKCF0YWJsZUVsbSkge1xuICAgICAgY29uc3QgY29scyA9IFN0cmluZ3MudG9JbnQoZGF0YS5jb2xzIGFzIHN0cmluZykuZ2V0T3IoMSk7XG4gICAgICBjb25zdCByb3dzID0gU3RyaW5ncy50b0ludChkYXRhLnJvd3MgYXMgc3RyaW5nKS5nZXRPcigxKTtcbiAgICAgIC8vIENhc2VzIDEgJiAzIC0gaW5zZXJ0aW5nIGEgdGFibGVcbiAgICAgIGVkaXRvci5leGVjQ29tbWFuZCgnbWNlSW5zZXJ0VGFibGUnLCBmYWxzZSwgeyByb3dzLCBjb2x1bW5zOiBjb2xzIH0pO1xuICAgICAgdGFibGVFbG0gPSBUYWJsZVNlbGVjdGlvbi5nZXRTZWxlY3Rpb25DZWxsKFV0aWxzLmdldFNlbGVjdGlvblN0YXJ0KGVkaXRvciksIFV0aWxzLmdldElzUm9vdChlZGl0b3IpKVxuICAgICAgICAuYmluZCgoY2VsbCkgPT4gVGFibGVMb29rdXAudGFibGUoY2VsbCwgVXRpbHMuZ2V0SXNSb290KGVkaXRvcikpKVxuICAgICAgICAubWFwKCh0YWJsZSkgPT4gdGFibGUuZG9tKVxuICAgICAgICAuZ2V0T3JEaWUoKTtcbiAgICB9XG5cbiAgICBpZiAoT2JqLnNpemUobW9kaWZpZWREYXRhKSA+IDApIHtcbiAgICAgIGNvbnN0IGFwcGxpY2FibGVDZWxsUHJvcGVydGllczogQXBwbGljYWJsZUNlbGxQcm9wZXJ0aWVzID0ge1xuICAgICAgICBib3JkZXI6IE9iai5oYXMobW9kaWZpZWREYXRhLCAnYm9yZGVyJyksXG4gICAgICAgIGJvcmRlcmNvbG9yOiBPYmouaGFzKG1vZGlmaWVkRGF0YSwgJ2JvcmRlcmNvbG9yJyksXG4gICAgICAgIGNlbGxwYWRkaW5nOiBPYmouaGFzKG1vZGlmaWVkRGF0YSwgJ2NlbGxwYWRkaW5nJylcbiAgICAgIH07XG5cbiAgICAgIGFwcGx5RGF0YVRvRWxlbWVudChlZGl0b3IsIHRhYmxlRWxtLCBkYXRhLCBhcHBsaWNhYmxlQ2VsbFByb3BlcnRpZXMpO1xuXG4gICAgICAvLyBUb2dnbGUgY2FwdGlvbiBvbi9vZmZcbiAgICAgIGNvbnN0IGNhcHRpb25FbG0gPSBkb20uc2VsZWN0KCdjYXB0aW9uJywgdGFibGVFbG0pWzBdO1xuXG4gICAgICBpZiAoY2FwdGlvbkVsbSAmJiAhZGF0YS5jYXB0aW9uIHx8ICFjYXB0aW9uRWxtICYmIGRhdGEuY2FwdGlvbikge1xuICAgICAgICBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlVG9nZ2xlQ2FwdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBTdHlsZXMuc2V0QWxpZ24oZWRpdG9yLCB0YWJsZUVsbSwgZGF0YS5hbGlnbik7XG4gICAgfVxuXG4gICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgZWRpdG9yLmFkZFZpc3VhbCgpO1xuXG4gICAgaWYgKE9iai5zaXplKG1vZGlmaWVkRGF0YSkgPiAwKSB7XG4gICAgICBjb25zdCBjYXB0aW9uTW9kaWZpZWQgPSBPYmouaGFzKG1vZGlmaWVkRGF0YSwgJ2NhcHRpb24nKTtcbiAgICAgIC8vIHN0eWxlIG1vZGlmaWVkIGlmIHRoZXJlJ3MgYXQgbGVhc3Qgb25lIG90aGVyIGNoYW5nZSBhcGFydCBmcm9tICdjYXB0aW9uJ1xuICAgICAgY29uc3Qgc3R5bGVNb2RpZmllZCA9IGNhcHRpb25Nb2RpZmllZCA/IE9iai5zaXplKG1vZGlmaWVkRGF0YSkgPiAxIDogdHJ1ZTtcblxuICAgICAgRXZlbnRzLmZpcmVUYWJsZU1vZGlmaWVkKGVkaXRvciwgdGFibGVFbG0sIHsgc3RydWN0dXJlOiBjYXB0aW9uTW9kaWZpZWQsIHN0eWxlOiBzdHlsZU1vZGlmaWVkIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBvcGVuID0gKGVkaXRvcjogRWRpdG9yLCBpbnNlcnROZXdUYWJsZTogYm9vbGVhbik6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlZGl0b3IuZG9tO1xuICBsZXQgdGFibGVFbG06IEhUTUxUYWJsZUVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkO1xuICBsZXQgZGF0YSA9IEhlbHBlcnMuZXh0cmFjdERhdGFGcm9tU2V0dGluZ3MoZWRpdG9yLCBPcHRpb25zLmhhc0FkdmFuY2VkVGFibGVUYWIoZWRpdG9yKSk7XG5cbiAgLy8gQ2FzZXMgZm9yIGNyZWF0aW9uL3VwZGF0ZSBvZiB0YWJsZXM6XG4gIC8vIDEuIGlzTmV3ID09IHRydWUgLSBjYWxsZWQgYnkgbWNlSW5zZXJ0VGFibGUgLSB3ZSBhcmUgaW5zZXJ0aW5nIGEgbmV3IHRhYmxlIHNvIHdlIGRvbid0IGNhcmUgd2hhdCB0aGUgc2VsZWN0aW9uJ3MgcGFyZW50IGlzLFxuICAvLyAgICBhbmQgd2UgbmVlZCB0byBhZGQgY29scyBhbmQgcm93cyBpbnB1dCBmaWVsZHMgdG8gdGhlIGRpYWxvZ1xuICAvLyAyLiBpc05ldyA9PSBmYWxzZSAmJiBzZWxlY3Rpb24gcGFyZW50IGlzIGEgdGFibGUgLSB1cGRhdGUgdGhlIHRhYmxlXG4gIC8vIDMuIGlzTmV3ID09IGZhbHNlICYmIHNlbGVjdGlvbiBwYXJlbnQgaXNuJ3QgYSB0YWJsZSAtIG9wZW4gZGlhbG9nIHdpdGggZGVmYXVsdCB2YWx1ZXMgYW5kIGluc2VydCBhIHRhYmxlXG5cbiAgaWYgKGluc2VydE5ld1RhYmxlKSB7XG4gICAgLy8gQ2FzZSAxIC0gaXNOZXcgPT0gdHJ1ZS4gV2UncmUgaW5zZXJ0aW5nIGEgbmV3IHRhYmxlIHNvIHVzZSBkZWZhdWx0cyBhbmQgYWRkIGNvbHMgYW5kIHJvd3MgKyBhZHYgcHJvcGVydGllcy5cbiAgICBkYXRhLmNvbHMgPSAnMSc7XG4gICAgZGF0YS5yb3dzID0gJzEnO1xuICAgIGlmIChPcHRpb25zLmhhc0FkdmFuY2VkVGFibGVUYWIoZWRpdG9yKSkge1xuICAgICAgZGF0YS5ib3JkZXJzdHlsZSA9ICcnO1xuICAgICAgZGF0YS5ib3JkZXJjb2xvciA9ICcnO1xuICAgICAgZGF0YS5iYWNrZ3JvdW5kY29sb3IgPSAnJztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGFibGVFbG0gPSBkb20uZ2V0UGFyZW50PEhUTUxUYWJsZUVsZW1lbnQ+KGVkaXRvci5zZWxlY3Rpb24uZ2V0U3RhcnQoKSwgJ3RhYmxlJywgZWRpdG9yLmdldEJvZHkoKSk7XG4gICAgaWYgKHRhYmxlRWxtKSB7XG4gICAgICAvLyBDYXNlIDIgLSBpc05ldyA9PSBmYWxzZSAmJiB0YWJsZSBwYXJlbnRcbiAgICAgIGRhdGEgPSBIZWxwZXJzLmV4dHJhY3REYXRhRnJvbVRhYmxlRWxlbWVudChlZGl0b3IsIHRhYmxlRWxtLCBPcHRpb25zLmhhc0FkdmFuY2VkVGFibGVUYWIoZWRpdG9yKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhc2UgMyAtIGlzTmV3ID09IGZhbHNlICYmIG5vbi10YWJsZSBwYXJlbnQuIGRhdGEgaXMgc2V0IHRvIGJhc2ljIGRlZmF1bHRzIHNvIGp1c3QgYWRkIHRoZSBhZHYgcHJvcGVydGllcyBpZiBuZWVkZWRcbiAgICAgIGlmIChPcHRpb25zLmhhc0FkdmFuY2VkVGFibGVUYWIoZWRpdG9yKSkge1xuICAgICAgICBkYXRhLmJvcmRlcnN0eWxlID0gJyc7XG4gICAgICAgIGRhdGEuYm9yZGVyY29sb3IgPSAnJztcbiAgICAgICAgZGF0YS5iYWNrZ3JvdW5kY29sb3IgPSAnJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBjbGFzc2VzID0gVWlVdGlscy5idWlsZENsYXNzTGlzdChPcHRpb25zLmdldFRhYmxlQ2xhc3NMaXN0KGVkaXRvcikpO1xuXG4gIGlmIChjbGFzc2VzLmlzU29tZSgpKSB7XG4gICAgaWYgKGRhdGEuY2xhc3MpIHtcbiAgICAgIGRhdGEuY2xhc3MgPSBkYXRhLmNsYXNzLnJlcGxhY2UoL1xccyptY2VcXC1pdGVtXFwtdGFibGVcXHMqL2csICcnKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZW5lcmFsUGFuZWw6IERpYWxvZy5HcmlkU3BlYyA9IHtcbiAgICB0eXBlOiAnZ3JpZCcsXG4gICAgY29sdW1uczogMixcbiAgICBpdGVtczogVGFibGVEaWFsb2dHZW5lcmFsVGFiLmdldEl0ZW1zKGVkaXRvciwgY2xhc3Nlcy5nZXRPcihbXSksIGluc2VydE5ld1RhYmxlKVxuICB9O1xuXG4gIGNvbnN0IG5vbkFkdmFuY2VkRm9ybSA9ICgpOiBEaWFsb2cuUGFuZWxTcGVjID0+ICh7XG4gICAgdHlwZTogJ3BhbmVsJyxcbiAgICBpdGVtczogWyBnZW5lcmFsUGFuZWwgXVxuICB9KTtcblxuICBjb25zdCBhZHZhbmNlZEZvcm0gPSAoKTogRGlhbG9nLlRhYlBhbmVsU3BlYyA9PiAoe1xuICAgIHR5cGU6ICd0YWJwYW5lbCcsXG4gICAgdGFiczogW1xuICAgICAge1xuICAgICAgICB0aXRsZTogJ0dlbmVyYWwnLFxuICAgICAgICBuYW1lOiAnZ2VuZXJhbCcsXG4gICAgICAgIGl0ZW1zOiBbIGdlbmVyYWxQYW5lbCBdXG4gICAgICB9LFxuICAgICAgZ2V0QWR2YW5jZWRUYWIoZWRpdG9yLCAndGFibGUnKVxuICAgIF1cbiAgfSk7XG5cbiAgY29uc3QgZGlhbG9nQm9keSA9IE9wdGlvbnMuaGFzQWR2YW5jZWRUYWJsZVRhYihlZGl0b3IpID8gYWR2YW5jZWRGb3JtKCkgOiBub25BZHZhbmNlZEZvcm0oKTtcblxuICBlZGl0b3Iud2luZG93TWFuYWdlci5vcGVuKHtcbiAgICB0aXRsZTogJ1RhYmxlIFByb3BlcnRpZXMnLFxuICAgIHNpemU6ICdub3JtYWwnLFxuICAgIGJvZHk6IGRpYWxvZ0JvZHksXG4gICAgb25TdWJtaXQ6IEZ1bi5jdXJyeShvblN1Ym1pdFRhYmxlRm9ybSwgZWRpdG9yLCB0YWJsZUVsbSwgZGF0YSksXG4gICAgYnV0dG9uczogW1xuICAgICAge1xuICAgICAgICB0eXBlOiAnY2FuY2VsJyxcbiAgICAgICAgbmFtZTogJ2NhbmNlbCcsXG4gICAgICAgIHRleHQ6ICdDYW5jZWwnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgICAgbmFtZTogJ3NhdmUnLFxuICAgICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICAgIHByaW1hcnk6IHRydWVcbiAgICAgIH1cbiAgICBdLFxuICAgIGluaXRpYWxEYXRhOiBkYXRhXG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgb3BlblxufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IERpYWxvZyB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvdWkvVWknO1xuXG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcblxuY29uc3QgZ2V0SXRlbXMgPSAoZWRpdG9yOiBFZGl0b3IsIGNsYXNzZXM6IERpYWxvZy5MaXN0Qm94SXRlbVNwZWNbXSwgaW5zZXJ0TmV3VGFibGU6IGJvb2xlYW4pOiBEaWFsb2cuQm9keUNvbXBvbmVudFNwZWNbXSA9PiB7XG4gIGNvbnN0IHJvd0NvbENvdW50SXRlbXM6IERpYWxvZy5Cb2R5Q29tcG9uZW50U3BlY1tdID0gIWluc2VydE5ld1RhYmxlID8gW10gOiBbXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdjb2xzJyxcbiAgICAgIGxhYmVsOiAnQ29scycsXG4gICAgICBpbnB1dE1vZGU6ICdudW1lcmljJ1xuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdyb3dzJyxcbiAgICAgIGxhYmVsOiAnUm93cycsXG4gICAgICBpbnB1dE1vZGU6ICdudW1lcmljJ1xuICAgIH1cbiAgXTtcblxuICBjb25zdCBhbHdheXNJdGVtczogRGlhbG9nLkJvZHlDb21wb25lbnRTcGVjW10gPSBbXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICd3aWR0aCcsXG4gICAgICBsYWJlbDogJ1dpZHRoJ1xuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdoZWlnaHQnLFxuICAgICAgbGFiZWw6ICdIZWlnaHQnXG4gICAgfVxuICBdO1xuXG4gIGNvbnN0IGFwcGVhcmFuY2VJdGVtczogRGlhbG9nLkJvZHlDb21wb25lbnRTcGVjW10gPSBPcHRpb25zLmhhc0FwcGVhcmFuY2VPcHRpb25zKGVkaXRvcikgPyBbXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdjZWxsc3BhY2luZycsXG4gICAgICBsYWJlbDogJ0NlbGwgc3BhY2luZycsXG4gICAgICBpbnB1dE1vZGU6ICdudW1lcmljJ1xuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdjZWxscGFkZGluZycsXG4gICAgICBsYWJlbDogJ0NlbGwgcGFkZGluZycsXG4gICAgICBpbnB1dE1vZGU6ICdudW1lcmljJ1xuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgIG5hbWU6ICdib3JkZXInLFxuICAgICAgbGFiZWw6ICdCb3JkZXIgd2lkdGgnXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnbGFiZWwnLFxuICAgICAgbGFiZWw6ICdDYXB0aW9uJyxcbiAgICAgIGl0ZW1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgIG5hbWU6ICdjYXB0aW9uJyxcbiAgICAgICAgICBsYWJlbDogJ1Nob3cgY2FwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgXSA6IFtdO1xuXG4gIGNvbnN0IGFsaWdubWVudEl0ZW06IERpYWxvZy5MaXN0Qm94U3BlY1tdID0gW1xuICAgIHtcbiAgICAgIHR5cGU6ICdsaXN0Ym94JyxcbiAgICAgIG5hbWU6ICdhbGlnbicsXG4gICAgICBsYWJlbDogJ0FsaWdubWVudCcsXG4gICAgICBpdGVtczogW1xuICAgICAgICB7IHRleHQ6ICdOb25lJywgdmFsdWU6ICcnIH0sXG4gICAgICAgIHsgdGV4dDogJ0xlZnQnLCB2YWx1ZTogJ2xlZnQnIH0sXG4gICAgICAgIHsgdGV4dDogJ0NlbnRlcicsIHZhbHVlOiAnY2VudGVyJyB9LFxuICAgICAgICB7IHRleHQ6ICdSaWdodCcsIHZhbHVlOiAncmlnaHQnIH1cbiAgICAgIF1cbiAgICB9XG4gIF07XG5cbiAgY29uc3QgY2xhc3NMaXN0SXRlbTogRGlhbG9nLkxpc3RCb3hTcGVjW10gPSBjbGFzc2VzLmxlbmd0aCA+IDAgPyBbXG4gICAge1xuICAgICAgbmFtZTogJ2NsYXNzJyxcbiAgICAgIHR5cGU6ICdsaXN0Ym94JyxcbiAgICAgIGxhYmVsOiAnQ2xhc3MnLFxuICAgICAgaXRlbXM6IGNsYXNzZXNcbiAgICB9XG4gIF0gOiBbXTtcblxuICByZXR1cm4gcm93Q29sQ291bnRJdGVtcy5jb25jYXQoYWx3YXlzSXRlbXMpLmNvbmNhdChhcHBlYXJhbmNlSXRlbXMpLmNvbmNhdChhbGlnbm1lbnRJdGVtKS5jb25jYXQoY2xhc3NMaXN0SXRlbSk7XG59O1xuXG5leHBvcnQgeyBnZXRJdGVtcyB9O1xuIiwiaW1wb3J0IHsgVHJhbnNmb3JtYXRpb25zIH0gZnJvbSAnQGVwaG94L2FjaWQnO1xuaW1wb3J0IHsgQXJyLCBPYmosIE9wdGlvbmFsLCBTaW5nbGV0b24sIFN0cmluZ3MgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuaW1wb3J0IHR5cGUgeyBEaWFsb2csIE1lbnUgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3VpL1VpJztcblxuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyTGlzdFZhbHVlIHtcbiAgcmVhZG9ubHkgdGl0bGU/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IHRleHQ/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IHZhbHVlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckxpc3RHcm91cCB7XG4gIHJlYWRvbmx5IHRpdGxlPzogc3RyaW5nO1xuICByZWFkb25seSB0ZXh0Pzogc3RyaW5nO1xuICByZWFkb25seSBtZW51OiBVc2VyTGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IHR5cGUgVXNlckxpc3RJdGVtID0gVXNlckxpc3RWYWx1ZSB8IFVzZXJMaXN0R3JvdXA7XG5cbmNvbnN0IG9uU2V0dXBUb2dnbGUgPSAoZWRpdG9yOiBFZGl0b3IsIGZvcm1hdE5hbWU6IHN0cmluZywgZm9ybWF0VmFsdWU6IHN0cmluZykgPT4ge1xuICByZXR1cm4gKGFwaTogTWVudS5Ub2dnbGVNZW51SXRlbUluc3RhbmNlQXBpKTogKCkgPT4gdm9pZCA9PiB7XG4gICAgY29uc3QgYm91bmRDYWxsYmFjayA9IFNpbmdsZXRvbi51bmJpbmRhYmxlKCk7XG4gICAgY29uc3QgaXNOb25lID0gU3RyaW5ncy5pc0VtcHR5KGZvcm1hdFZhbHVlKTtcblxuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZENlbGxzID0gVGFibGVTZWxlY3Rpb24uZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvcik7XG5cbiAgICAgIGNvbnN0IGNoZWNrTm9kZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pID0+XG4gICAgICAgIGVkaXRvci5mb3JtYXR0ZXIubWF0Y2goZm9ybWF0TmFtZSwgeyB2YWx1ZTogZm9ybWF0VmFsdWUgfSwgY2VsbC5kb20sIGlzTm9uZSk7XG5cbiAgICAgIC8vIElmIHZhbHVlIGlzIGVtcHR5IChBIE5vbmUtZW50cnkgaW4gdGhlIGxpc3QpLCBjaGVjayBpZiB0aGUgZm9ybWF0IGlzIG5vdCBzZXQgYXQgYWxsLiBPdGhlcndpc2UsIGNoZWNrIGlmIHRoZSBmb3JtYXQgaXMgc2V0IHRvIHRoZSBjb3JyZWN0IHZhbHVlLlxuICAgICAgaWYgKGlzTm9uZSkge1xuICAgICAgICBhcGkuc2V0QWN0aXZlKCFBcnIuZXhpc3RzKHNlbGVjdGVkQ2VsbHMsIGNoZWNrTm9kZSkpO1xuICAgICAgICBib3VuZENhbGxiYWNrLnNldChlZGl0b3IuZm9ybWF0dGVyLmZvcm1hdENoYW5nZWQoZm9ybWF0TmFtZSwgKG1hdGNoKSA9PiBhcGkuc2V0QWN0aXZlKCFtYXRjaCksIHRydWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaS5zZXRBY3RpdmUoQXJyLmZvcmFsbChzZWxlY3RlZENlbGxzLCBjaGVja05vZGUpKTtcbiAgICAgICAgYm91bmRDYWxsYmFjay5zZXQoZWRpdG9yLmZvcm1hdHRlci5mb3JtYXRDaGFuZ2VkKGZvcm1hdE5hbWUsIGFwaS5zZXRBY3RpdmUsIGZhbHNlLCB7IHZhbHVlOiBmb3JtYXRWYWx1ZSB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFRoZSBlZGl0b3IgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNldHVwIHlldCwgc28gY2hlY2sgZm9yIHRoYXRcbiAgICBlZGl0b3IuaW5pdGlhbGl6ZWQgPyBpbml0KCkgOiBlZGl0b3Iub24oJ2luaXQnLCBpbml0KTtcblxuICAgIHJldHVybiBib3VuZENhbGxiYWNrLmNsZWFyO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGlzTGlzdEdyb3VwID0gKGl0ZW06IFVzZXJMaXN0SXRlbSk6IGl0ZW0gaXMgVXNlckxpc3RHcm91cCA9PlxuICBPYmouaGFzTm9uTnVsbGFibGVLZXkoaXRlbSBhcyBVc2VyTGlzdEdyb3VwLCAnbWVudScpO1xuXG5jb25zdCBidWlsZExpc3RJdGVtcyA9IChpdGVtczogVXNlckxpc3RJdGVtW10pOiBEaWFsb2cuTGlzdEJveEl0ZW1TcGVjW10gPT5cbiAgQXJyLm1hcChpdGVtcywgKGl0ZW0pID0+IHtcbiAgICAvLyBpdGVtLnRleHQgaXMgbm90IGRvY3VtZW50ZWQgLSBtYXliZSBkZXByZWNhdGVkIG9wdGlvbiB3ZSBjYW4gZGVsZXRlPz9cbiAgICBjb25zdCB0ZXh0ID0gaXRlbS50ZXh0IHx8IGl0ZW0udGl0bGUgfHwgJyc7XG4gICAgaWYgKGlzTGlzdEdyb3VwKGl0ZW0pKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0LFxuICAgICAgICBpdGVtczogYnVpbGRMaXN0SXRlbXMoaXRlbS5tZW51KVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dCxcbiAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGJ1aWxkQ2xhc3NMaXN0ID0gKGNsYXNzTGlzdDogVXNlckxpc3RJdGVtW10pOiBPcHRpb25hbDxEaWFsb2cuTGlzdEJveEl0ZW1TcGVjW10+ID0+IHtcbiAgaWYgKCFjbGFzc0xpc3QubGVuZ3RoKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgfVxuXG4gIHJldHVybiBPcHRpb25hbC5zb21lKGJ1aWxkTGlzdEl0ZW1zKFt7IHRleHQ6ICdTZWxlY3QuLi4nLCB2YWx1ZTogJ21jZS1uby1tYXRjaCcgfSwgLi4uY2xhc3NMaXN0IF0pKTtcbn07XG5cbmNvbnN0IGJ1aWxkTWVudUl0ZW1zID0gKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgaXRlbXM6IFVzZXJMaXN0SXRlbVtdLFxuICBmb3JtYXQ6IHN0cmluZyxcbiAgb25BY3Rpb246ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4pOiBNZW51Lk5lc3RlZE1lbnVJdGVtQ29udGVudHNbXSA9PlxuICBBcnIubWFwKGl0ZW1zLCAoaXRlbSk6IE1lbnUuTmVzdGVkTWVudUl0ZW1Db250ZW50cyA9PiB7XG4gICAgLy8gaXRlbS50ZXh0IGlzIG5vdCBkb2N1bWVudGVkIC0gbWF5YmUgZGVwcmVjYXRlZCBvcHRpb24gd2UgY2FuIGRlbGV0ZT8/XG4gICAgY29uc3QgdGV4dCA9IGl0ZW0udGV4dCB8fCBpdGVtLnRpdGxlO1xuICAgIGlmIChpc0xpc3RHcm91cChpdGVtKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ25lc3RlZG1lbnVpdGVtJyxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgZ2V0U3VibWVudUl0ZW1zOiAoKSA9PiBidWlsZE1lbnVJdGVtcyhlZGl0b3IsIGl0ZW0ubWVudSwgZm9ybWF0LCBvbkFjdGlvbilcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQsXG4gICAgICAgIHR5cGU6ICd0b2dnbGVtZW51aXRlbScsXG4gICAgICAgIG9uQWN0aW9uOiAoKSA9PiBvbkFjdGlvbihpdGVtLnZhbHVlKSxcbiAgICAgICAgb25TZXR1cDogb25TZXR1cFRvZ2dsZShlZGl0b3IsIGZvcm1hdCwgaXRlbS52YWx1ZSlcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuY29uc3QgYXBwbHlUYWJsZUNlbGxTdHlsZSA9IChlZGl0b3I6IEVkaXRvciwgc3R5bGU6IHN0cmluZykgPT4gKHZhbHVlOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgZWRpdG9yLmV4ZWNDb21tYW5kKCdtY2VUYWJsZUFwcGx5Q2VsbFN0eWxlJywgZmFsc2UsIHsgW3N0eWxlXTogdmFsdWUgfSk7XG59O1xuXG5jb25zdCBmaWx0ZXJOb25lSXRlbSA9IChsaXN0OiBVc2VyTGlzdEl0ZW1bXSk6IFVzZXJMaXN0SXRlbVtdID0+XG4gIEFyci5iaW5kKGxpc3QsIChpdGVtKTogVXNlckxpc3RJdGVtW10gPT4ge1xuICAgIGlmIChpc0xpc3RHcm91cChpdGVtKSkge1xuICAgICAgcmV0dXJuIFt7IC4uLml0ZW0sIG1lbnU6IGZpbHRlck5vbmVJdGVtKGl0ZW0ubWVudSkgfV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBTdHJpbmdzLmlzTm90RW1wdHkoaXRlbS52YWx1ZSkgPyBbIGl0ZW0gXSA6IFtdO1xuICAgIH1cbiAgfSk7XG5cbmNvbnN0IGdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2sgPSAoZWRpdG9yOiBFZGl0b3IsIGl0ZW1zOiBVc2VyTGlzdEl0ZW1bXSwgZm9ybWF0OiBzdHJpbmcsIG9uQWN0aW9uOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZCkgPT5cbiAgKGNhbGxiYWNrOiAoaXRlbXM6IE1lbnUuTmVzdGVkTWVudUl0ZW1Db250ZW50c1tdKSA9PiB2b2lkKTogdm9pZCA9PlxuICAgIGNhbGxiYWNrKGJ1aWxkTWVudUl0ZW1zKGVkaXRvciwgaXRlbXMsIGZvcm1hdCwgb25BY3Rpb24pKTtcblxuY29uc3QgYnVpbGRDb2xvck1lbnUgPSAoZWRpdG9yOiBFZGl0b3IsIGNvbG9yTGlzdDogVXNlckxpc3RWYWx1ZVtdLCBzdHlsZTogc3RyaW5nKTogTWVudS5GYW5jeU1lbnVJdGVtU3BlY1tdID0+IHtcbiAgY29uc3QgY29sb3JNYXAgPSBBcnIubWFwKGNvbG9yTGlzdCwgKGVudHJ5KTogTWVudS5DaG9pY2VNZW51SXRlbVNwZWMgPT4gKHtcbiAgICB0ZXh0OiBlbnRyeS50aXRsZSxcbiAgICB2YWx1ZTogJyMnICsgVHJhbnNmb3JtYXRpb25zLmFueVRvSGV4KGVudHJ5LnZhbHVlKS52YWx1ZSxcbiAgICB0eXBlOiAnY2hvaWNlaXRlbSdcbiAgfSkpO1xuXG4gIHJldHVybiBbe1xuICAgIHR5cGU6ICdmYW5jeW1lbnVpdGVtJyxcbiAgICBmYW5jeXR5cGU6ICdjb2xvcnN3YXRjaCcsXG4gICAgaW5pdERhdGE6IHtcbiAgICAgIGNvbG9yczogY29sb3JNYXAubGVuZ3RoID4gMCA/IGNvbG9yTWFwIDogdW5kZWZpbmVkLFxuICAgICAgYWxsb3dDdXN0b21Db2xvcnM6IGZhbHNlXG4gICAgfSxcbiAgICBvbkFjdGlvbjogKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZGF0YS52YWx1ZSA9PT0gJ3JlbW92ZScgPyAnJyA6IGRhdGEudmFsdWU7XG4gICAgICBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQXBwbHlDZWxsU3R5bGUnLCBmYWxzZSwgeyBbc3R5bGVdOiB2YWx1ZSB9KTtcbiAgICB9XG4gIH1dO1xufTtcblxuY29uc3QgY2hhbmdlUm93SGVhZGVyID0gKGVkaXRvcjogRWRpdG9yKSA9PiAoKTogdm9pZCA9PiB7XG4gIGNvbnN0IGN1cnJlbnRUeXBlID0gZWRpdG9yLnF1ZXJ5Q29tbWFuZFZhbHVlKCdtY2VUYWJsZVJvd1R5cGUnKTtcbiAgY29uc3QgbmV3VHlwZSA9IGN1cnJlbnRUeXBlID09PSAnaGVhZGVyJyA/ICdib2R5JyA6ICdoZWFkZXInO1xuICBlZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlUm93VHlwZScsIGZhbHNlLCB7IHR5cGU6IG5ld1R5cGUgfSk7XG59O1xuXG5jb25zdCBjaGFuZ2VDb2x1bW5IZWFkZXIgPSAoZWRpdG9yOiBFZGl0b3IpID0+ICgpOiB2b2lkID0+IHtcbiAgY29uc3QgY3VycmVudFR5cGUgPSBlZGl0b3IucXVlcnlDb21tYW5kVmFsdWUoJ21jZVRhYmxlQ29sVHlwZScpO1xuICBjb25zdCBuZXdUeXBlID0gY3VycmVudFR5cGUgPT09ICd0aCcgPyAndGQnIDogJ3RoJztcbiAgZWRpdG9yLmV4ZWNDb21tYW5kKCdtY2VUYWJsZUNvbFR5cGUnLCBmYWxzZSwgeyB0eXBlOiBuZXdUeXBlIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgb25TZXR1cFRvZ2dsZSxcbiAgYnVpbGRNZW51SXRlbXMsXG4gIGJ1aWxkTGlzdEl0ZW1zLFxuICBidWlsZENvbG9yTWVudSxcbiAgZ2VuZXJhdGVNZW51SXRlbXNDYWxsYmFjayxcbiAgZmlsdGVyTm9uZUl0ZW0sXG4gIGNoYW5nZVJvd0hlYWRlcixcbiAgY2hhbmdlQ29sdW1uSGVhZGVyLFxuICBhcHBseVRhYmxlQ2VsbFN0eWxlXG59O1xuIiwiaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuLi9jb3JlL1R5cGUnO1xuaW1wb3J0ICogYXMgQXJyYXlVdGlsIGZyb20gJy4uL2NvcmUvQXJyYXlVdGlsJztcblxuLyoqIEEgd2F5IG9mIGNvbXBhcmluZyB0d28gdmFsdWVzIG9mIHRoZSBzYW1lIHR5cGUgZm9yIGVxdWFsaXR5LiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcTxBPiB7XG4gIGVxOiAoeDogQSwgeTogQSkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGNvbnRyYW1hcCA9IDxBLCBCPiAoZXFhOiBFcTxBPiwgZjogKGI6IEIpID0+IEEpOiBFcTxCPiA9PlxuICBlcSgoeCwgeSkgPT4gZXFhLmVxKGYoeCksIGYoeSkpKTtcblxuZXhwb3J0IGNvbnN0IGVxID0gPEE+IChmOiAoeDogQSwgeTogQSkgPT4gYm9vbGVhbik6IEVxPEE+ID0+XG4gICh7IGVxOiBmIH0pO1xuXG5leHBvcnQgY29uc3QgdHJpcGxlRXE6IEVxPGFueT4gPSBlcSgoeCwgeSkgPT4geCA9PT0geSk7XG5cbmV4cG9ydCBjb25zdCBlcVN0cmluZzogRXE8c3RyaW5nPiA9IHRyaXBsZUVxO1xuXG5leHBvcnQgY29uc3QgZXFCb29sZWFuOiBFcTxib29sZWFuPiA9IHRyaXBsZUVxO1xuXG5leHBvcnQgY29uc3QgZXFOdW1iZXI6IEVxPG51bWJlcj4gPSB0cmlwbGVFcTtcblxuZXhwb3J0IGNvbnN0IGVxVW5kZWZpbmVkOiBFcTx1bmRlZmluZWQ+ID0gdHJpcGxlRXE7XG5cbmV4cG9ydCBjb25zdCBlcU51bGw6IEVxPG51bGw+ID0gdHJpcGxlRXE7XG5cbmV4cG9ydCBjb25zdCBlcUFycmF5ID0gPEE+IChlcWE6IEVxPEE+KTogRXE8QXJyYXlMaWtlPEE+PiA9PiBlcSgoeCwgeSkgPT4ge1xuICBpZiAoeC5sZW5ndGggIT09IHkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGxlbiA9IHgubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFlcWEuZXEoeFtpXSwgeVtpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59KTtcblxuLy8gVE9ETzogTWFrZSBhbiBPcmQgdHlwZWNsYXNzXG5jb25zdCBlcVNvcnRlZEFycmF5ID0gPEE+KGVxYTogRXE8QT4sIGNvbXBhcmVGbj86IChhOiBBLCBiOiBBKSA9PiBudW1iZXIpOiBFcTxBcnJheUxpa2U8QT4+ID0+XG4gIGNvbnRyYW1hcChlcUFycmF5KGVxYSksICh4cykgPT4gQXJyYXlVdGlsLnNvcnQoeHMsIGNvbXBhcmVGbikpO1xuXG5leHBvcnQgY29uc3QgZXFSZWNvcmQgPSA8QT4gKGVxYTogRXE8QT4pOiBFcTxSZWNvcmQ8c3RyaW5nLCBBPj4gPT4gZXEoKHgsIHkpID0+IHtcbiAgY29uc3Qga3ggPSBPYmplY3Qua2V5cyh4KTtcbiAgY29uc3Qga3kgPSBPYmplY3Qua2V5cyh5KTtcbiAgaWYgKCFlcVNvcnRlZEFycmF5KGVxU3RyaW5nKS5lcShreCwga3kpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGxlbiA9IGt4Lmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHEgPSBreFtpXTtcbiAgICBpZiAoIWVxYS5lcSh4W3FdLCB5W3FdKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn0pO1xuXG5leHBvcnQgY29uc3QgZXFBbnk6IEVxPGFueT4gPSBlcSgoeCwgeSkgPT4ge1xuICBpZiAoeCA9PT0geSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgdHggPSBUeXBlLnR5cGVPZih4KTtcbiAgY29uc3QgdHkgPSBUeXBlLnR5cGVPZih5KTtcbiAgaWYgKHR4ICE9PSB0eSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChUeXBlLmlzRXF1YXRhYmxlVHlwZSh0eCkpIHtcbiAgICByZXR1cm4geCA9PT0geTtcblxuICB9IGVsc2UgaWYgKHR4ID09PSAnYXJyYXknKSB7XG4gICAgcmV0dXJuIGVxQXJyYXkoZXFBbnkpLmVxKHgsIHkpO1xuXG4gIH0gZWxzZSBpZiAodHggPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGVxUmVjb3JkKGVxQW55KS5lcSh4LCB5KTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn0pO1xuIiwiZXhwb3J0IGNvbnN0IG1hcCA9IDxBLCBCPih4czogQXJyYXlMaWtlPEE+LCBmOiAoYTogQSkgPT4gQik6IEJbXSA9PiB7XG4gIGNvbnN0IGxlbiA9IHhzLmxlbmd0aDtcbiAgY29uc3QgciA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIHJbaV0gPSBmKHgpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuLyoqIG1hcCBhIGZ1bmN0aW9uIG92ZXIgYW4gYXJyYXksIHRoZW4gbWFwIGFub3RoZXIgZnVuY3Rpb24gb3ZlciBldmVyeSBpdGVtIGV4Y2VwdCB0aGUgbGFzdCAqL1xuZXhwb3J0IGNvbnN0IG1hcERlbGltaXQgPSA8QSwgQj4gKHhzOiBBcnJheUxpa2U8QT4sIGY6IChhOiBBKSA9PiBCLCBkZWxpbWl0OiAoYjogQikgPT4gQik6IEJbXSA9PiB7XG4gIGNvbnN0IGxlbiA9IHhzLmxlbmd0aDtcbiAgY29uc3QgciA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICByW2ldID0gZGVsaW1pdChmKHgpKTtcbiAgfVxuICBpZiAobGVuID4gMCkge1xuICAgIHJbbGVuIC0gMV0gPSAoZih4c1tsZW4gLSAxXSkpO1xuICB9XG5cbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3Qgc29ydCA9IDxBPiAoeHM6IEFycmF5TGlrZTxBPiwgY29tcGFyZUZuPzogKGE6IEEsIGI6IEEpID0+IG51bWJlcik6IEFbXSA9PiB7XG4gIGNvbnN0IGNsb25lOiBBW10gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh4cyk7XG4gIHJldHVybiBjbG9uZS5zb3J0KGNvbXBhcmVGbik7XG59O1xuIiwiZXhwb3J0IGNvbnN0IHR5cGVPZiA9ICh4OiBhbnkpID0+IHtcbiAgaWYgKHggPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9XG4gIGlmICh4ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIH1cbiAgY29uc3QgdCA9IHR5cGVvZiB4O1xuICBpZiAodCA9PT0gJ29iamVjdCcgJiYgKEFycmF5LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHgpIHx8IHguY29uc3RydWN0b3IgJiYgeC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQXJyYXknKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG4gIGlmICh0ID09PSAnb2JqZWN0JyAmJiAoU3RyaW5nLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHgpIHx8IHguY29uc3RydWN0b3IgJiYgeC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnU3RyaW5nJykpIHtcbiAgICByZXR1cm4gJ3N0cmluZyc7XG4gIH1cbiAgcmV0dXJuIHQ7XG59O1xuXG5jb25zdCBpc1R5cGUgPSA8VD4odHlwZTogc3RyaW5nKSA9PiAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFQgPT4gdHlwZU9mKHZhbHVlKSA9PT0gdHlwZTtcblxuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gaXNUeXBlPHN0cmluZz4oJ3N0cmluZycpO1xuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gaXNUeXBlPE9iamVjdD4oJ29iamVjdCcpO1xuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBpc1R5cGU8QXJyYXk8dW5rbm93bj4+KCdhcnJheScpO1xuZXhwb3J0IGNvbnN0IGlzTnVsbCA9IGlzVHlwZTxudWxsPignbnVsbCcpO1xuZXhwb3J0IGNvbnN0IGlzQm9vbGVhbiA9IGlzVHlwZTxib29sZWFuPignYm9vbGVhbicpO1xuZXhwb3J0IGNvbnN0IGlzVW5kZWZpbmVkID0gaXNUeXBlPHVuZGVmaW5lZD4oJ3VuZGVmaW5lZCcpO1xuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb24gPSBpc1R5cGU8RnVuY3Rpb24+KCdmdW5jdGlvbicpO1xuZXhwb3J0IGNvbnN0IGlzTnVtYmVyID0gaXNUeXBlPG51bWJlcj4oJ251bWJlcicpO1xuXG5leHBvcnQgY29uc3QgaXNFcXVhdGFibGVUeXBlID0gKHg6IHN0cmluZyk6IGJvb2xlYW4gPT5cbiAgWyAndW5kZWZpbmVkJywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ3N0cmluZycsICdmdW5jdGlvbicsICd4bWwnLCAnbnVsbCcgXS5pbmRleE9mKHgpICE9PSAtMTtcbiIsIl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcbiAgICAgICAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ydiA9ICgpID0+IChcIjEuNS4yXCIpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5ydWlkID0gXCJidW5kbGVyPXJzcGFja0AxLjUuMlwiO1xuIiwiaW1wb3J0IFBsdWdpbiBmcm9tICcuL1BsdWdpbic7XG5cblBsdWdpbigpO1xuXG4vKiogKioqKipcbiAqIERPIE5PVCBFWFBPUlQgQU5ZVEhJTkdcbiAqXG4gKiBJRiBZT1UgRE8gUk9MTFVQIFdJTEwgTEVBVkUgQSBHTE9CQUwgT04gVEhFIFBBR0VcbiAqKioqKioqL1xuIl0sIm5hbWVzIjpbIlN0cmluZ3MiLCJPcHRpb25hbCIsImhleENvbG91ciIsInZhbHVlIiwibm9ybWFsaXplSGV4Iiwic2hvcnRoYW5kUmVnZXgiLCJsb25nZm9ybVJlZ2V4IiwiaXNIZXhTdHJpbmciLCJoZXgiLCJmcm9tU3RyaW5nIiwiZ2V0TG9uZ0Zvcm0iLCJoZXhTdHJpbmciLCJtIiwiciIsImciLCJiIiwiZXh0cmFjdFZhbHVlcyIsImxvbmdGb3JtIiwic3BsaXRGb3JtIiwidG9IZXgiLCJjb21wb25lbnQiLCJmcm9tUmdiYSIsInJnYmFDb2xvdXIiLCJoc3ZDb2xvdXIiLCJodWUiLCJzYXR1cmF0aW9uIiwiZnJvbVJnYiIsImgiLCJzIiwidiIsIm1pblJHQiIsIk1hdGgiLCJtYXhSR0IiLCJkIiwiSGV4Q29sb3VyIiwibWluIiwibWF4Iiwicm91bmQiLCJyZ2JSZWdleCIsInJnYmFSZWdleCIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImFscGhhIiwiaXNSZ2JhQ29tcG9uZW50IiwibnVtIiwicGFyc2VJbnQiLCJmcm9tSHN2IiwiaHN2IiwiYnJpZ2h0bmVzcyIsInNpZGUiLCJjaHJvbWEiLCJ4IiwibWF0Y2giLCJmcm9tSGV4IiwicmVzdWx0IiwiZnJvbVN0cmluZ1ZhbHVlcyIsImEiLCJwYXJzZUZsb2F0IiwiZ2V0Q29sb3JGb3JtYXQiLCJjb2xvclN0cmluZyIsInJnYmFTdHJpbmciLCJyZ2JNYXRjaCIsInJnYmFNYXRjaCIsInRvU3RyaW5nIiwicmdiYSIsIkhzdkNvbG91ciIsIlJnYmFDb2xvdXIiLCJoZXhUb0hzdiIsImhzdlRvSGV4IiwiYW55VG9IZXgiLCJjb2xvciIsImNhbnZhcyIsImRvY3VtZW50IiwiY2FudmFzQ29udGV4dCIsInJnYmFUb0hleFN0cmluZyIsIkFyciIsIkZ1biIsIkF0dHJpYnV0ZSIsIkNvbXBhcmUiLCJDc3MiLCJJbnNlcnQiLCJJbnNlcnRBbGwiLCJQcmVkaWNhdGVGaWx0ZXIiLCJQcmVkaWNhdGVGaW5kIiwiUmVtb3ZlIiwiU2VsZWN0b3JGaWx0ZXIiLCJTZWxlY3RvckZpbmQiLCJTdWdhckVsZW1lbnQiLCJTdWdhck5vZGUiLCJTdWdhclRleHQiLCJUcmF2ZXJzZSIsIlRhZ0JvdW5kYXJpZXMiLCJjbG9uZSIsImVsZW1lbnQiLCJpc0JvdW5kYXJ5IiwiaXNFbXB0eVRhZyIsImlzTm9uRWRpdGFibGUiLCJjb21wYXJlUG9zaXRpb24iLCJvdGhlciIsImNvcHlBdHRyaWJ1dGVzVG8iLCJzb3VyY2UiLCJkZXN0aW5hdGlvbiIsImFzIiwiaXNTcGVjaWFsIiwidGFnIiwiZ2V0TGFuZ3VhZ2UiLCJUYWJsZVBvc2l0aW9ucyIsIkNlbGxTZWxlY3Rpb24iLCJyZXRyaWV2ZSIsImNvbnRhaW5lciIsInNlbGVjdG9yIiwicmV0cmlldmVCb3giLCJmaXJzdFNlbGVjdGVkU2VsZWN0b3IiLCJsYXN0U2VsZWN0ZWRTZWxlY3RvciIsImVkZ2VzIiwiaXNSb290IiwiYW5jZXN0b3IiLCJzZWN0aW9uU2VsZWN0b3IiLCJmaXJzdEFuY2VzdG9yIiwibGFzdEFuY2VzdG9yIiwiZkEiLCJsQSIsIlRhYmxlU2VsZWN0aW9uIiwic2VsZWN0aW9uIiwidW5tZXJnYWJsZSIsInNlbGVjdGVkQ2VsbHMiLCJoYXNTcGFuIiwiZWxlbSIsInR5cGUiLCJzcGFuIiwiaGFzUm93T3JDb2xTcGFuIiwibWVyZ2FibGUiLCJ0YWJsZSIsImVwaGVtZXJhIiwiYm91bmRzIiwiRG9tUGFyZW50IiwiU2VsZWN0b3JzIiwibG9va3VwVGFibGUiLCJpZGVudGlmeSIsInN0YXJ0IiwiZmluaXNoIiwiZ2V0SXNSb290Iiwicm9vdFRhYmxlIiwidW5kZWZpbmVkIiwic3RhcnRUYWJsZSIsImZpbmlzaFRhYmxlIiwiYW5jZXN0b3JDZWxscyIsImZpbmlzaENlbGwiLCJzdGFydENlbGwiLCJsY2EiLCJsY2FUYWJsZSIsImZpbmlzaEFuY2VzdG9yQ2VsbHMiLCJzdGFydEFuY2VzdG9yQ2VsbHMiLCJzZWxzIiwiZ2V0TGFzdCIsImJveGVzIiwiYm94IiwiZ2V0RWRnZXMiLCJmaXJzdCIsImxhc3QiLCJleHBhbmRUbyIsImlkZW50aWZpZWQiLCJzaGlmdFNlbGVjdGlvbiIsImRlbHRhUm93IiwiZGVsdGFDb2x1bW4iLCJPYmoiLCJUeXBlIiwiZ2VuZXJhdGUiLCJjYXNlcyIsIkVycm9yIiwiY29uc3RydWN0b3JzIiwiYWR0IiwiYWNhc2UiLCJjb3VudCIsImtleXMiLCJrZXkiLCJhcmdzIiwiYXJnTGVuZ3RoIiwiYnJhbmNoZXMiLCJicmFuY2hLZXlzIiwiYWxsUmVxZCIsInJlcUtleSIsImZvbGRBcmdzIiwidGFyZ2V0IiwibGFiZWwiLCJjb25zb2xlIiwiQWR0IiwiRXEiLCJuYXRpdmVTbGljZSIsIkFycmF5IiwibmF0aXZlSW5kZXhPZiIsIm5hdGl2ZVB1c2giLCJyYXdJbmRleE9mIiwidHMiLCJ0IiwiaW5kZXhPZiIsInhzIiwiY29udGFpbnMiLCJleGlzdHMiLCJwcmVkIiwiaSIsImxlbiIsInJhbmdlIiwiZiIsImNodW5rIiwiYXJyYXkiLCJzaXplIiwibWFwIiwiZWFjaCIsImVhY2hyIiwicGFydGl0aW9uIiwicGFzcyIsImZhaWwiLCJhcnIiLCJmaWx0ZXIiLCJncm91cEJ5Iiwid2FzVHlwZSIsImdyb3VwIiwiZm9sZHIiLCJhY2MiLCJmb2xkbCIsImZpbmRVbnRpbCIsInVudGlsIiwiZmluZCIsImZpbmRJbmRleCIsImZpbmRMYXN0SW5kZXgiLCJmbGF0dGVuIiwiYmluZCIsImZvcmFsbCIsImVxdWFsIiwiYTEiLCJhMiIsImVxIiwicmV2ZXJzZSIsImRpZmZlcmVuY2UiLCJtYXBUb09iamVjdCIsIlN0cmluZyIsInB1cmUiLCJzb3J0IiwiY29tcGFyYXRvciIsImNvcHkiLCJnZXQiLCJoZWFkIiwiZnJvbSIsImZpbmRNYXAiLCJ1bmlxdWUiLCJpc0R1cGxpY2F0ZWQiLCJDZWxsIiwiaW5pdGlhbCIsInNldCIsIm5vb3AiLCJub2FyZyIsImNvbXBvc2UiLCJmYSIsImZiIiwiY29tcG9zZTEiLCJmYmMiLCJmYWIiLCJjb25zdGFudCIsImlkZW50aXR5IiwidHJpcGxlRXF1YWxzIiwiY3VycnkiLCJmbiIsImluaXRpYWxBcmdzIiwicmVzdEFyZ3MiLCJhbGwiLCJub3QiLCJkaWUiLCJtc2ciLCJhcHBseSIsImNhbGwiLCJuZXZlciIsImFsd2F5cyIsIndlYWtlbiIsInBpcGUiLCJhYiIsImJjIiwiY2QiLCJkZSIsImVmIiwiZmciLCJnaCIsImMiLCJlIiwiR2xvYmFsIiwid2luZG93IiwiRnVuY3Rpb24iLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsIm9iaiIsInByb3BzIiwiayIsInR1cGxlTWFwIiwidHVwbGUiLCJvYmpBY2MiLCJpbnRlcm5hbEZpbHRlciIsIm9uVHJ1ZSIsIm9uRmFsc2UiLCJiaWZpbHRlciIsIm1hcFRvQXJyYXkiLCJuYW1lIiwidmFsdWVzIiwiaGFzIiwiaGFzTm9uTnVsbGFibGVLZXkiLCJpc0VtcHR5Iiwib25Ob25lIiwib25Tb21lIiwibWFwcGVyIiwiYmluZGVyIiwicHJlZGljYXRlIiwicmVwbGFjZW1lbnQiLCJ0aHVuayIsIm1lc3NhZ2UiLCJ3b3JrZXIiLCJpcyIsImxocyIsInJocyIsImxlZnQiLCJlcXVhbHMiLCJsaWZ0MiIsImNhdCIsInB1c2giLCJzZXF1ZW5jZSIsInRyYXZlcnNlIiwib2EiLCJvYiIsImxpZnQzIiwib2MiLCJsaWZ0NCIsIm9kIiwibGlmdDUiLCJvZSIsIm1hcEZyb20iLCJiaW5kRnJvbSIsIm9vdCIsInNvbWVJZiIsInBhdGgiLCJwYXJ0cyIsInNjb3BlIiwibyIsInJlc29sdmUiLCJwIiwic3RlcCIsInBhcnQiLCJmb3JnZSIsIm5hbWVzcGFjZSIsImFwcGx5SGVscGVyIiwiY29uc3RIZWxwZXIiLCJvdXRwdXRIZWxwZXIiLCJvdXRwdXQiLCJfb25FcnJvciIsIm9uVmFsdWUiLCJSZXN1bHQiLCJlcnJvciIsIm9uRXJyb3IiLCJfb25WYWx1ZSIsImZyb21PcHRpb24iLCJvcHRpb25hbCIsImVyciIsInNpbmdsZXRvbiIsImRvUmV2b2tlIiwic3ViamVjdCIsInJldm9rZSIsImNsZWFyIiwiaXNTZXQiLCJyZXBlYXRhYmxlIiwiZGVsYXkiLCJpbnRlcnZhbElkIiwiaWQiLCJjbGVhckludGVydmFsIiwiZnVuY3Rpb25Ub1JlcGVhdCIsInNldEludGVydmFsIiwiZGVzdHJveWFibGUiLCJ1bmJpbmRhYmxlIiwiYXBpIiwicnVuIiwib24iLCJTdHJBcHBlbmQiLCJjaGVja1JhbmdlIiwic3RyIiwic3Vic3RyIiwic3VwcGxhbnQiLCJpc1N0cmluZ09yTnVtYmVyIiwiZnVsbE1hdGNoIiwicmVtb3ZlTGVhZGluZyIsInByZWZpeCIsInN0YXJ0c1dpdGgiLCJyZW1vdmVUcmFpbGluZyIsInN1ZmZpeCIsImVuZHNXaXRoIiwiZW5zdXJlTGVhZGluZyIsImVuc3VyZVRyYWlsaW5nIiwiZW5kIiwiaWR4IiwiY2FwaXRhbGl6ZSIsImJsYW5rIiwidHJpbSIsImxUcmltIiwiclRyaW0iLCJpc05vdEVtcHR5IiwicmVwZWF0IiwiZnJvbUNvZGVQb2ludCIsInRvSW50IiwicmFkaXgiLCJpc05hTiIsInRvRmxvYXQiLCJjYWNoZWQiLCJjYWxsZWQiLCJnZXRQcm90b3R5cGVPZiIsImhhc1Byb3RvIiwiY29uc3RydWN0b3IiLCJ0eXBlT2YiLCJwcm90byIsImlzVHlwZSIsImlzU2ltcGxlVHlwZSIsImlzT2JqZWN0IiwiaXNTdHJpbmciLCJpc1BsYWluT2JqZWN0IiwiaXNBcnJheSIsImlzTnVsbCIsImlzQm9vbGVhbiIsImlzVW5kZWZpbmVkIiwiaXNOdWxsYWJsZSIsImlzTm9uTnVsbGFibGUiLCJpc0Z1bmN0aW9uIiwiaXNOdW1iZXIiLCJpc0FycmF5T2YiLCJpc1Byb21pc2VMaWtlIiwiemVyb1dpZHRoIiwibmJzcCIsInNvZnRIeXBoZW4iLCJlbGxpcHNpcyIsImlzWndzcCIsImNoYXIiLCJyZW1vdmVad3NwIiwiYWRkVG9TdGFydCIsImFkZFRvRW5kIiwicmVtb3ZlRnJvbVN0YXJ0IiwibnVtQ2hhcnMiLCJyZW1vdmVGcm9tRW5kIiwiRG9tVW5pdmVyc2UiLCJQYXJlbnQiLCJ1bml2ZXJzZSIsInNoYXJlZE9uZSIsImxvb2siLCJlbGVtZW50cyIsIl91bml2ZXJzZSIsInN1YnNldCIsImFuY2VzdG9ycyIsImJyZWFrVG9MZWZ0IiwicGFyZW50IiwiY2hpbGQiLCJicmVha1RvUmlnaHQiLCJicmVha1BhdGgiLCJpc1RvcCIsImJyZWFrZXIiLCJ1IiwiU3RydWN0dXJlIiwiaXNCbG9jayIsImlzTGlzdCIsImlzRm9ybWF0dGluZyIsImlzSGVhZGluZyIsImlzQ29udGFpbmVyIiwiaXNGcmFtZSIsImlzSW5saW5lIiwieEJyZWFrUGF0aCIsInhCcmVha1RvTGVmdCIsInhCcmVha1RvUmlnaHQiLCJvbmVBbGwiLCJTdWJzZXRGbiIsImJsb2NrTGlzdCIsIml0ZW0iLCJ0YWdOYW1lIiwibGVmdFJpZ2h0IiwicmlnaHQiLCJicm9rZW5QYXRoIiwic2Vjb25kIiwic3BsaXRzIiwiYmlzZWN0IiwiY2hpbGRyZW4iLCJpbmRleCIsImluZCIsInByaW9yIiwibmV4dCIsImZhbGxiYWNrIiwiYnJlYWthZ2UiLCJleHRyYSIsIm5leHRDaGlsZCIsInRhaWwiLCJ1bnNhZmVPbmUiLCJjdXJyZW50IiwiY29tbW9uRWxlbWVudCIsInVuc2FmZVN1YnNldCIsImNvbW1vbiIsInBzMSIsInBzMiIsImZpbmRlciIsInBzIiwidG9wRG93biIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInNJbmRleCIsImVJbmRleCIsInBydW5lIiwicHJ1bmVkMSIsInBydW5lZDIiLCJzaGFyZWQiLCJhbmNzIiwiVGh1bmsiLCJQbGF0Zm9ybURldGVjdGlvbiIsIm1lZGlhTWF0Y2giLCJxdWVyeSIsInBsYXRmb3JtIiwiZGV0ZWN0Iiwib3ZlcnJpZGUiLCJvdmVycmlkZXMiLCJSZXNvbHZlIiwic2FuZEhUTUxFbGVtZW50IiwiaXNQcm90b3R5cGVPZiIsIlZlcnNpb24iLCJlZGdlIiwiY2hyb21pdW0iLCJpZSIsIm9wZXJhIiwiZmlyZWZveCIsInNhZmFyaSIsInVua25vd24iLCJudSIsImluZm8iLCJ2ZXJzaW9uIiwiaXNCcm93c2VyIiwiQnJvd3NlciIsIndpbmRvd3MiLCJpb3MiLCJhbmRyb2lkIiwibGludXgiLCJtYWNvcyIsInNvbGFyaXMiLCJmcmVlYnNkIiwiY2hyb21lb3MiLCJpc09TIiwiT3BlcmF0aW5nU3lzdGVtIiwiRGV2aWNlVHlwZSIsIlVhRGF0YSIsIlVhU3RyaW5nIiwiUGxhdGZvcm1JbmZvIiwidXNlckFnZW50IiwidXNlckFnZW50RGF0YU9wdCIsImJyb3dzZXJzIiwib3NlcyIsImJyb3dzZXIiLCJ1c2VyQWdlbnREYXRhIiwib3MiLCJkZXZpY2VUeXBlIiwiaXNpUGFkIiwiaXNpUGhvbmUiLCJpc01vYmlsZSIsImlzVG91Y2giLCJpc1RhYmxldCIsImlzUGhvbmUiLCJpT1N3ZWJ2aWV3IiwiaXNEZXNrdG9wIiwiZGV0ZWN0QnJvd3NlciIsInVhQnJhbmQiLCJsY0JyYW5kIiwiY2FuZGlkYXRlcyIsImFnZW50IiwiY2FuZGlkYXRlIiwiZGV0ZWN0T3MiLCJmaXJzdE1hdGNoIiwicmVnZXhlcyIsIk51bWJlciIsInZlcnNpb25SZWdleGVzIiwiY2xlYW5lZEFnZW50IiwibWFqb3IiLCJtaW5vciIsIm5vcm1hbFZlcnNpb25SZWdleCIsImNoZWNrQ29udGFpbnMiLCJ1YXN0cmluZyIsInVuc2FmZSIsImdldE9yRGllIiwiYWN0dWFsIiwiT3B0aW9uYWxzIiwiZ2V0QXR0clZhbHVlIiwiaXNDb2wiLCJpc0NvbGdyb3VwIiwiaXNSb3ciLCJlbGVtZW50VG9EYXRhIiwiY29sc3BhbiIsInJvd3NwYW4iLCJtb2RpZmljYXRpb24iLCJnZW5lcmF0b3JzIiwidG9EYXRhIiwibnVDZWxsIiwiZGF0YSIsIm51Um93IiwiYWRkIiwiY2VsbCIsInJlY2VudCIsImdldE9ySW5pdCIsInRyYW5zZm9ybSIsImxpc3QiLCJtYWtlTmV3IiwiYXR0cnMiLCJyZXBsYWNlT3JJbml0IiwiZ2V0U2NvcGVBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJtZXJnaW5nIiwidW5tZXJnZSIsInJhdyIsIm1lcmdlIiwiY2VsbHMiLCJnZXRTY29wZVByb3BlcnR5Iiwic3RyaW5nQXR0cmlidXRlcyIsImJhc2VTY29wZSIsInNjb3BlcyIsImlzTWl4ZWQiLCJHZW5lcmF0b3JzIiwiemVybyIsInN1cnJvdW5kIiwic2l6ZXMiLCJyZXN1bHRzIiwiY2xhbXBEZWx0YUhlbHBlciIsImRlbHRhIiwibWluQ2VsbFNpemUiLCJuZXdTaXplIiwiZGlmZiIsImNsYW1wTmVnYXRpdmVEZWx0YSIsImNsYW1wRGVsdGEiLCJyZXNpemVUYWJsZSIsImNhbGNGaXhlZERlbHRhcyIsImNsYW1wZWREZWx0YSIsImNhbGNSZWxhdGl2ZURlbHRhcyIsInJhdGlvIiwibmV3VGhpcyIsImNhbGNMZWZ0RWRnZURlbHRhcyIsImlzUmVsYXRpdmUiLCJjYWxjTWlkZGxlRGVsdGFzIiwiX3ByZXYiLCJyZXNpemVyIiwiY2FsY1JpZ2h0RWRnZURlbHRhcyIsImNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzIiwidG90YWxXaWR0aCIsInBpeGVsRGVsdGEiLCJ0YWJsZVdpZHRoIiwibmV3U2l6ZXMiLCJwcmVzZXJ2ZVRhYmxlIiwiaXNMYXN0Q29sdW1uIiwiX2luZGV4IiwiX21pbkNlbGxTaXplIiwiY2xhbXBUYWJsZURlbHRhIiwibWF4RGVsdGEiLCJfdG90YWxXaWR0aCIsIl9waXhlbERlbHRhIiwiX2lzUmVsYXRpdmUiLCJ2YWxpZFNlY3Rpb25MaXN0IiwiaXNWYWxpZFNlY3Rpb24iLCJwYXJlbnROYW1lIiwiZGltZW5zaW9uIiwid2lkdGgiLCJoZWlnaHQiLCJkaW1lbnNpb25zIiwiZ3JpZCIsInJvd3MiLCJjb2x1bW5zIiwiYWRkcmVzcyIsInJvdyIsImNvbHVtbiIsImNvb3JkcyIsInkiLCJkZXRhaWwiLCJkZXRhaWxuZXciLCJpc05ldyIsImV4dGVuZGVkIiwiaXNMb2NrZWQiLCJyb3dkZXRhaWwiLCJzZWN0aW9uIiwicm93ZGV0YWlsbmV3IiwiZWxlbWVudG5ldyIsInJvd2NlbGxzIiwic3RhcnRSb3ciLCJzdGFydENvbCIsImZpbmlzaFJvdyIsImZpbmlzaENvbCIsImNvbHVtbmV4dCIsImNvbGdyb3VwIiwiRG9tU3RydWN0dXJlIiwiQ3Vyc29yUG9zaXRpb24iLCJpc0JyIiwiYWR2YW5jZWRCciIsImlzTGlzdEl0ZW0iLCJlbCIsInNpYmxpbmdJc0Jsb2NrIiwicmlnaHRTaWJsaW5nIiwibWFya0NlbGwiLCJyaWdodEVkZ2UiLCJyaWdodFNpYmxpbmdJc0Jsb2NrIiwibWFya0NvbnRlbnQiLCJjb250ZW50IiwiY29udGVudHMiLCJMYXllclNlbGVjdG9yIiwiU3RydWN0cyIsImxvb2t1cCIsInRhZ3MiLCJpc1Jvb3RPclVwcGVyVGFibGUiLCJlbG0iLCJjb2x1bW5Hcm91cHMiLCJjb2x1bW5Hcm91cCIsIm5vdENlbGwiLCJuZWlnaGJvdXJzIiwibmVpZ2hib3VyQ2VsbHMiLCJuZWlnaGJvdXJSb3dzIiwiZmlyc3RDZWxsIiwiYXR0ciIsInByb3BlcnR5Iiwicm93UHJvcCIsImNvbFByb3AiLCJyb3dzQ291bnQiLCJjb2xzIiwiQ29udGVudEVkaXRhYmxlIiwiV2lkdGgiLCJCbG9ja3MiLCJmaW5kQ29tbW9uQ2VsbFR5cGUiLCJmaW5kQ29tbW9uUm93VHlwZSIsIkRldGFpbHNMaXN0IiwiR3JpZFJvdyIsIlJ1bk9wZXJhdGlvbiIsIlRhYmxlTWVyZ2UiLCJUcmFuc2l0aW9ucyIsIk1lcmdpbmdPcGVyYXRpb25zIiwiTW9kaWZpY2F0aW9uT3BlcmF0aW9ucyIsIlRyYW5zZm9ybU9wZXJhdGlvbnMiLCJBZGp1c3RtZW50cyIsIkNvbFV0aWxzIiwiVGFibGVDb250ZW50IiwiVGFibGVMb29rdXAiLCJXYXJlaG91c2UiLCJpc0VkaXRhYmxlIiwib3V0Y29tZSIsImN1cnNvciIsImZpbmRFZGl0YWJsZUN1cnNvclBvc2l0aW9uIiwiZWxlbWVudEZyb21HcmlkIiwiYnVuZGxlIiwiY3Vyc29yRWxlbWVudCIsInVuaXF1ZVJvd3MiLCJkZXRhaWxzIiwicm93Q29tcGlsYXRpb24iLCJyZXN0Iiwicm93RXhpc3RzIiwiY3VycmVudERldGFpbCIsImRldGFpbEEiLCJkZXRhaWxCIiwib3BJbnNlcnRSb3dCZWZvcmUiLCJnZW5XcmFwcGVycyIsImV4YW1wbGUiLCJ0YXJnZXRJbmRleCIsIm5ld0dyaWQiLCJvcEluc2VydFJvd3NCZWZvcmUiLCJuZXdHIiwib3BJbnNlcnRSb3dBZnRlciIsIm9wSW5zZXJ0Um93c0FmdGVyIiwib3BJbnNlcnRDb2x1bW5CZWZvcmUiLCJleHRyYWN0RGV0YWlsIiwib3BJbnNlcnRDb2x1bW5zQmVmb3JlIiwiY29sIiwib3BJbnNlcnRDb2x1bW5BZnRlciIsIm9wSW5zZXJ0Q29sdW1uc0FmdGVyIiwib3BNYWtlQ29sdW1uSGVhZGVyIiwiaW5pdGlhbEdyaWQiLCJvcE1ha2VDb2x1bW5zSGVhZGVyIiwiY29sdW1uSW5kZXhlcyIsIm9wTWFrZUNlbGxIZWFkZXIiLCJvcE1ha2VDZWxsc0hlYWRlciIsIm9wVW5tYWtlQ29sdW1uSGVhZGVyIiwib3BVbm1ha2VDb2x1bW5zSGVhZGVyIiwib3BVbm1ha2VDZWxsSGVhZGVyIiwib3BVbm1ha2VDZWxsc0hlYWRlciIsIm1ha2VSb3dTZWN0aW9uIiwiYXBwbHlTY29wZSIsInRhYmxlU2VjdGlvbiIsIm1ha2VSb3dzU2VjdGlvbiIsInJvd0luZGV4ZXMiLCJvcE1ha2VSb3dIZWFkZXIiLCJvcE1ha2VSb3dzSGVhZGVyIiwib3BNYWtlUm93Qm9keSIsIm9wTWFrZVJvd3NCb2R5Iiwib3BNYWtlUm93Rm9vdGVyIiwib3BNYWtlUm93c0Zvb3RlciIsIm9wU3BsaXRDZWxsSW50b0NvbHVtbnMiLCJvcFNwbGl0Q2VsbEludG9Sb3dzIiwib3BFcmFzZUNvbHVtbnMiLCJfY29tcGFyYXRvciIsIl9nZW5XcmFwcGVycyIsIm1heENvbEluZGV4Iiwib3BFcmFzZVJvd3MiLCJtYXhSb3dJbmRleCIsIm9wTWVyZ2VDZWxscyIsIm9wVW5tZXJnZUNlbGxzIiwib3BQYXN0ZUNlbGxzIiwicGFzdGVEZXRhaWxzIiwiZ3JpZGlmeSIsIndoIiwiZ3JpZEIiLCJzdGFydEFkZHJlc3MiLCJtZXJnZWRHcmlkIiwiZ3JpZGlmeVJvd3MiLCJjb250ZXh0Iiwib3BQYXN0ZUNvbHNCZWZvcmUiLCJvcFBhc3RlQ29sc0FmdGVyIiwib3BQYXN0ZVJvd3NCZWZvcmUiLCJvcFBhc3RlUm93c0FmdGVyIiwib3BHZXRDb2x1bW5zVHlwZSIsImhvdXNlIiwibGFzdFNlbGVjdGVkQ2VsbCIsIm1pbkNvbFJhbmdlIiwibWF4Q29sUmFuZ2UiLCJzZWxlY3RlZENvbHVtbkNlbGxzIiwib3BHZXRDZWxsc1R5cGUiLCJvcEdldFJvd3NUeXBlIiwibWluUm93UmFuZ2UiLCJtYXhSb3dSYW5nZSIsInNlbGVjdGVkUm93cyIsInJlc2l6ZSIsImJlaGF2aW91cnMiLCJhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHMiLCJmaXJzdENvbHVtbklzTG9ja2VkIiwiX3dhcmVob3VzZSIsImxhc3RDb2x1bW5Jc0xvY2tlZCIsIndhcmVob3VzZSIsImdldENvbHVtbnNXaWR0aCIsInVuaXF1ZUNvbHMiLCJjb2xXaWR0aCIsImluc2VydENvbHVtbkV4dHJhY3RvciIsImJlZm9yZSIsImNoZWNrTG9ja2VkIiwiaW5zZXJ0Q29sdW1uc0V4dHJhY3RvciIsImVyYXNlQ29sdW1uc0V4dHJhY3RvciIsInBhc3RlQ29sdW1uc0V4dHJhY3RvciIsImhlYWRlckNlbGxHZW5lcmF0b3IiLCJib2R5Q2VsbEdlbmVyYXRvciIsImluc2VydFJvd0JlZm9yZSIsImluc2VydFJvd3NCZWZvcmUiLCJpbnNlcnRSb3dBZnRlciIsImluc2VydFJvd3NBZnRlciIsImluc2VydENvbHVtbkJlZm9yZSIsImluc2VydENvbHVtbnNCZWZvcmUiLCJpbnNlcnRDb2x1bW5BZnRlciIsImluc2VydENvbHVtbnNBZnRlciIsInNwbGl0Q2VsbEludG9Db2x1bW5zIiwic3BsaXRDZWxsSW50b1Jvd3MiLCJlcmFzZUNvbHVtbnMiLCJlcmFzZVJvd3MiLCJtYWtlQ29sdW1uSGVhZGVyIiwibWFrZUNvbHVtbnNIZWFkZXIiLCJ1bm1ha2VDb2x1bW5IZWFkZXIiLCJ1bm1ha2VDb2x1bW5zSGVhZGVyIiwibWFrZVJvd0hlYWRlciIsIm1ha2VSb3dzSGVhZGVyIiwibWFrZVJvd0JvZHkiLCJtYWtlUm93c0JvZHkiLCJtYWtlUm93Rm9vdGVyIiwibWFrZVJvd3NGb290ZXIiLCJtYWtlQ2VsbEhlYWRlciIsIm1ha2VDZWxsc0hlYWRlciIsInVubWFrZUNlbGxIZWFkZXIiLCJ1bm1ha2VDZWxsc0hlYWRlciIsIm1lcmdlQ2VsbHMiLCJ1bm1lcmdlQ2VsbHMiLCJwYXN0ZUNlbGxzIiwicGFzdGVDb2xzQmVmb3JlIiwicGFzdGVDb2xzQWZ0ZXIiLCJwYXN0ZVJvd3NCZWZvcmUiLCJwYXN0ZVJvd3NBZnRlciIsImdldENvbHVtbnNUeXBlIiwiZ2V0Q2VsbHNUeXBlIiwiZ2V0Um93c1R5cGUiLCJDZWxsRmluZGVyIiwiQ2VsbEdyb3VwIiwibW92ZUJ5IiwiZ2V0V2FyZWhvdXNlIiwiaW50ZXJjZXB0cyIsIm5lc3RlZEludGVyY2VwdHMiLCJmaXJzdFRhYmxlIiwibGFzdFRhYmxlIiwib3B0U3RhcnRDZWxsIiwib3B0TGFzdENlbGwiLCJsYXN0Q2VsbCIsImdldEJveCIsIlJlcGxpY2F0aW9uIiwiZmluZFRhYmxlUm93SGVhZGVyVHlwZSIsInRyYW5zZm9ybUNlbGwiLCJzdWJzdGl0dXRpb24iLCJ0cmFuc2Zvcm1Sb3ciLCJuZXdDZWxsIiwiZml4ZWRDZWxsIiwic2VjdGlvbkNlbGxzIiwibmV3U2VjdGlvbiIsImdldFRhYmxlU2VjdGlvblR5cGUiLCJUYWJsZVNlY3Rpb24iLCJTdWdhckJvZHkiLCJDb2x1bW5TaXplcyIsIlNpemVzIiwiQ2VsbFV0aWxzIiwid2lkdGhMb29rdXAiLCJnZXR0ZXIiLCJub25lU2l6ZSIsImdldFdpZHRoIiwiZ2V0V2lkdGhzIiwidGFibGVTaXplIiwicGVyY2VudGFnZVNpemUiLCJnZXRGbG9hdFdpZHRoIiwiZ2V0Q2VsbERlbHRhIiwic2luZ2xlQ29sdW1uV2lkdGgiLCJ3IiwiX2RlbHRhIiwibWluQ2VsbFdpZHRoIiwiYWRqdXN0VGFibGVXaWR0aCIsImN1cnJlbnRXaWR0aCIsImNoYW5nZSIsIm5ld1dpZHRoIiwicGl4ZWxTaXplIiwibmV3TmV4dCIsImNob29zZVNpemUiLCJwZXJjZW50TWF0Y2giLCJnZXRUYWJsZVNpemUiLCJUYWJsZVNpemUiLCJMb2NrZWRDb2x1bW5VdGlscyIsImdldEF0IiwiZmluZEl0ZW0iLCJmaWx0ZXJlZCIsImZpbHRlckl0ZW1zIiwiZ2VuZXJhdGVDb2x1bW5zIiwicm93RGF0YSIsImNvbHVtbnNHcm91cCIsImNvbHVtbkluZGV4IiwiY29sSW5kZXgiLCJhY2Nlc3MiLCJ0YWJsZU9wdCIsImxvY2tlZENvbHVtbnMiLCJtYXhSb3dzIiwibWF4Q29sdW1ucyIsInJvd0NvdW50IiwiY29sZ3JvdXBSb3dzIiwiY3VycmVudFJvdyIsInJvd0NlbGwiLCJvY2N1cGllZENvbHVtblBvc2l0aW9uIiwib2NjdXBpZWRSb3dQb3NpdGlvbiIsInJvd1Bvc2l0aW9uIiwiY29sdW1uUG9zaXRpb24iLCJuZXdwb3MiLCJjb2xncm91cHMiLCJmcm9tVGFibGUiLCJqdXN0Q2VsbHMiLCJqdXN0Q29sdW1ucyIsImhhc0NvbHVtbnMiLCJnZXRDb2x1bW5BdCIsIkNvbHVtbkNvbnRleHQiLCJpbnB1dCIsImRldGVybWluZSIsIm9uT25seSIsIm9uTGVmdCIsIm9uTWlkZGxlIiwicHJldiIsIm9uUmlnaHQiLCJpc1ZhbGlkQ2VsbCIsInJvd3NBcnIiLCJnZXRCbG9jayIsImlzVmFsaWQiLCJnZXRGYWxsYmFjayIsImRlY2lkZSIsImluQmxvY2siLCJ2YWxpZEluQmxvY2siLCJkZXRhaWxPcHRpb24iLCJpc1NpbmdsZSIsImlzSGVhZGVyQ2VsbCIsImlzSGVhZGVyQ2VsbHMiLCJnZXRSb3dIZWFkZXJUeXBlIiwiaXNIZWFkZXJSb3ciLCJnZXRSb3dUeXBlIiwiaGVhZGVyQ2VsbHMiLCJyb3dUeXBlcyIsImhhc0hlYWRlciIsImhhc0Zvb3RlciIsImhhc0JvZHkiLCJyb3dUeXBlIiwiZnJvbVJvd3NPckNvbEdyb3VwcyIsImVsZW1zIiwiZ2V0U2VjdGlvbiIsImdldFBhcmVudFNlY3Rpb24iLCJmcm9tUGFzdGVkUm93cyIsIm1lYXN1cmUiLCJncmlkQSIsInJvd1JlbWFpbmRlciIsImNvbFJlbWFpbmRlciIsImNvbFJlcXVpcmVkIiwicm93UmVxdWlyZWQiLCJtZWFzdXJlV2lkdGgiLCJjb2xMZW5ndGhBIiwiY29sTGVuZ3RoQiIsIm1lYXN1cmVIZWlnaHQiLCJyb3dMZW5ndGhBIiwicm93TGVuZ3RoQiIsImdlbmVyYXRlRWxlbWVudHMiLCJhbW91bnQiLCJnZW5lcmF0b3IiLCJyb3dGaWxsIiwiZXhhbXBsZVJvdyIsImNvbEZpbGwiLCJuZXdDaGlsZHJlbiIsImxvY2tlZENvbEZpbGwiLCJjb2xOdW0iLCJuZXdDaGlsZCIsInRhaWxvciIsImZpbGxDb2xzIiwiZmlsbFJvd3MiLCJncmlkV2lkdGgiLCJpc0xhc3RDb2xMb2NrZWQiLCJsb2NrZWQiLCJtb2RpZmllZENvbHMiLCJuZXdMb2NrZWRDb2x1bW5zIiwiYWRkQ2VsbHMiLCJncmlkUm93IiwiZXhpc3RpbmdDZWxscyIsImFmdGVyIiwibmV3Q2VsbHMiLCJzZXRDZWxscyIsImFkZENlbGwiLCJtdXRhdGVDZWxsIiwibWFwQ2VsbHMiLCJnZXRDZWxsIiwiZ2V0Q2VsbEVsZW1lbnQiLCJjZWxsTGVuZ3RoIiwiZXh0cmFjdEdyaWREZXRhaWxzIiwiY2xvbmVSb3ciLCJjbG9uZUNlbGwiLCJSZXNpemVCZWhhdmlvdXIiLCJSZWRyYXciLCJmcm9tV2FyZWhvdXNlIiwidG9EZXRhaWxMaXN0IiwiZmluZEluV2FyZWhvdXNlIiwiZXh0cmFjdENlbGxzIiwibGMiLCJvcGVyYXRpb24iLCJleHRyYWN0IiwiYWRqdXN0bWVudCIsInBvc3RBY3Rpb24iLCJtb2RlbCIsIm91dCIsIm5ld0VsZW1lbnRzIiwidGFibGVTaXppbmciLCJyZXNpemluZyIsIm9uQ2VsbCIsIm9uUGFzdGUiLCJvblBhc3RlQnlFZGl0b3IiLCJvbk1lcmdhYmxlIiwib25Vbm1lcmdhYmxlIiwib25DZWxscyIsIm9uVW5sb2NrZWRDZWxsIiwib25VbmxvY2tlZENlbGxzIiwiaXNVbmxvY2tlZFRhYmxlQ2VsbCIsImFsbFVubG9ja2VkIiwib25VbmxvY2tlZE1lcmdhYmxlIiwibWVyZ2VhYmxlIiwib25VbmxvY2tlZFVubWVyZ2FibGUiLCJnZXRDb2x1bW4iLCJnZXRSb3ciLCJmaW5kRGlmZiIsImNvbXAiLCJzdWJncmlkIiwiaXNDb2xSb3ciLCJGaXRtZW50IiwiaXNTcGFubmluZyIsIm1hdGNoaW5nIiwibWVyZ2VUYWJsZXMiLCJncmlkQlJvd3MiLCJtZXJnZUhlaWdodCIsIm1lcmdlV2lkdGgiLCJlbmRSb3ciLCJlbmRDb2wiLCJsb2NrZWRDb2x1bW5PYmoiLCJza2lwcGVkQ29sIiwiZ3JpZEJDb2xJbmRleCIsIm5ld0NlbGxFbG0iLCJnZXRWYWxpZFN0YXJ0QWRkcmVzcyIsImN1cnJlbnRTdGFydEFkZHJlc3MiLCJncmlkQ29sTGVuZ3RoIiwiYWRqdXN0ZWRSb3dBZGRyZXNzIiwicG9zc2libGVDb2xBZGRyZXNzZXMiLCJ2YWxpZENvbEFkZHJlc3MiLCJnZXRMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzIiwidmFsaWRTdGFydEFkZHJlc3MiLCJsb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzIiwiZml0dGVkR3JpZCIsIm5ld0xvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMiLCJpbnNlcnRDb2xzIiwiZml0dGVkTmV3R3JpZCIsInNlY29uZERlbHRhIiwiZml0dGVkT2xkR3JpZCIsImluc2VydFJvd3MiLCJvbGRDb2xzIiwib2xkUm93cyIsIm5ld0xvY2tlZCIsInNlY29uZERpZmYiLCJmaXR0ZWRHcmlkQiIsIlRhYmxlR3JpZCIsInRvRGV0YWlscyIsInNlZW4iLCJ1cGRhdGVTZWVuIiwicm93SW5kZXgiLCJ0b0dyaWQiLCJjb2xncm91cENvbHMiLCJyb3dDZWxscyIsInJvd0RldGFpbCIsImoiLCJjdXJyZW50Q2VsbCIsImN1cnJlbnRDZWxsRWxtIiwiaXNUb1JlcGxhY2UiLCJ1bmlxdWVDZWxscyIsInNwbGl0Q29scyIsInByZXZDZWxsIiwib2Zmc2V0Iiwic3Vic3RpdHV0ZSIsInNwbGl0Um93cyIsInJvd1ByZXZDZWxscyIsInN1YiIsImluc2VydFJvd0F0IiwibmV3Um93IiwiZXgiLCJ3aXRoaW5TcGFuIiwicmV0IiwiZ2V0RWxlbWVudEZvciIsImluc2VydENvbHVtbkF0IiwiZXhhbXBsZUNvbCIsImlzVGFyZ2V0Q2VsbCIsImRlbGV0ZUNvbHVtbnNBdCIsImRlbGV0ZVJvd3NBdCIsInNldElmTm90IiwiaWdub3JlIiwiaW5zZXJ0IiwiZ2VuZXJhdGVTZWN0aW9uIiwic2VjdGlvbk5hbWUiLCJyZW5kZXIiLCJuZXdSb3dzIiwic3luY1Jvd3MiLCJncmlkU2VjdGlvbiIsInRyIiwic3luY0NvbEdyb3VwIiwiY29sR3JvdXAiLCJyZW5kZXJTZWN0aW9uIiwic3luYyIsInNlY3Rpb25FbGVtcyIsInJlbW92ZVNlY3Rpb24iLCJyZW5kZXJPclJlbW92ZVNlY3Rpb24iLCJoZWFkU2VjdGlvbiIsImJvZHlTZWN0aW9uIiwiZm9vdFNlY3Rpb24iLCJjb2x1bW5Hcm91cHNTZWN0aW9uIiwiY2xvbmVkQ2VsbCIsIm5vdEluU3RhcnRSb3ciLCJub3RJblN0YXJ0Q29sdW1uIiwiaXNEdXBsaWNhdGVkQ2VsbCIsInJvd1JlcGxhY2VyUHJlZGljYXRlIiwidGFyZ2V0Um93IiwiY29sdW1uSGVhZGVycyIsImVudGlyZVRhYmxlSXNIZWFkZXIiLCJfcm93SW5kZXgiLCJjb2x1bW5SZXBsYWNlUHJlZGljYXRlIiwidGFyZ2V0Q29sdW1uIiwicm93SGVhZGVycyIsIl9jb2xJbmRleCIsImRldGVybWluZVNjb3BlIiwibmV3U2NvcGUiLCJpc0luSGVhZGVyIiwiZ2V0U2NvcGUiLCJvcHBvc2l0ZVNjb3BlIiwicm93U2NvcGVHZW5lcmF0b3IiLCJjb2x1bW5TY29wZUdlbmVyYXRvciIsInJlcGxhY2UiLCJyZXBsYWNlSW4iLCJ0YXJnZXRzIiwicmVwbGFjZXIiLCJnZW5TY29wZSIsInNob3VsZFJlcGxhY2UiLCJpc1RhcmdldCIsImdldENvbHVtbkNlbGxzIiwiZ2V0Um93Q2VsbHMiLCJyZXBsYWNlQ29sdW1uIiwicmVwbGFjZUNvbHVtbnMiLCJpbmRleGVzIiwic2hvdWxkUmVwbGFjZUNlbGwiLCJzY29wZUdlbmVyYXRvciIsInJlcGxhY2VSb3ciLCJyZXBsYWNlUm93cyIsIl9jZWxsIiwicmVwbGFjZUNlbGwiLCJyZXBsYWNlQ2VsbHMiLCJ0YXJnZXRDZWxscyIsIkRlbHRhcyIsIlJlY2FsY3VsYXRpb25zIiwic3VtVXAiLCJyZWNhbGN1bGF0ZSIsIndpZHRocyIsInJlY2FsY3VsYXRlQW5kQXBwbHkiLCJhZGp1c3RXaWR0aCIsImNsYW1wZWRTdGVwIiwiZGVsdGFzIiwibmV3V2lkdGhzIiwiZHgiLCJhZGp1c3RIZWlnaHQiLCJoZWlnaHRzIiwibmV3SGVpZ2h0cyIsImR5IiwibmV3Um93U2l6ZXMiLCJ0b3RhbCIsIl90YWJsZSIsInJlc2l6ZUJlaGF2aW91ciIsInRhYmxlUGl4ZWxXaWR0aCIsImFkanVzdFdpZHRoVG8iLCJfaW5mbyIsIkRpcmVjdGlvbiIsIkhlaWdodCIsIlN1Z2FyTG9jYXRpb24iLCJyb3dJbmZvIiwiY29sSW5mbyIsInJ0bEVkZ2UiLCJwb3MiLCJsdHJFZGdlIiwiZ2V0TGVmdEVkZ2UiLCJnZXRSaWdodEVkZ2UiLCJnZXRUb3AiLCJnZXRUb3BFZGdlIiwiZ2V0Qm90dG9tRWRnZSIsImZpbmRQb3NpdGlvbnMiLCJnZXRJbm5lckVkZ2UiLCJnZXRPdXRlckVkZ2UiLCJsaW5lcyIsImNlbGxPcHRpb24iLCJsYXN0TGluZSIsIm5lZ2F0ZSIsIm9wdEVsZW1lbnRzIiwibHRyIiwicnRsIiwiVXRpbCIsImdldFJhd1ciLCJnZXRSYXdIIiwianVzdENvbHMiLCJpc1ZhbGlkQ29sdW1uIiwic3VwcG9ydHNDb2xXaWR0aHMiLCJnZXREaW1lbnNpb24iLCJjZWxsT3B0IiwiYmFja3VwcyIsImdldFdpZHRoRnJvbSIsImNvbHVtbkNlbGxzIiwiY29sRmlsdGVyIiwiZ2V0RGVkdWNlZCIsImRlZHVjZWQiLCJnZXRSYXdXaWR0aHMiLCJnZXRQZXJjZW50YWdlV2lkdGhzIiwiY2VsbFdpZHRoIiwiZ2V0UGl4ZWxXaWR0aHMiLCJnZXRIZWlnaHRGcm9tIiwiZ2V0SGVpZ2h0IiwiZ2V0UGl4ZWxIZWlnaHRzIiwiZ2V0UmF3SGVpZ2h0cyIsIm1lYXN1cmVzIiwicmVjYWxjdWxhdGVXaWR0aEZvckNlbGxzIiwicmVjYWxjdWxhdGVXaWR0aEZvckNvbHVtbnMiLCJncm91cHMiLCJyZWNhbGN1bGF0ZUhlaWdodEZvckNlbGxzIiwibWF0Y2hSb3dIZWlnaHQiLCJEaW1lbnNpb24iLCJnZXRTcGFuIiwiclBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCIsInJQaXhlbEJhc2VkU2l6ZVJlZ2V4IiwiZ2V0UGVyY2VudFNpemUiLCJvdXRlckdldHRlciIsImlubmVyR2V0dGVyIiwicmVsYXRpdmVQYXJlbnQiLCJzZXRQaXhlbFdpZHRoIiwic2V0UGVyY2VudGFnZVdpZHRoIiwic2V0SGVpZ2h0IiwicmVtb3ZlSGVpZ2h0IiwiZ2V0SGVpZ2h0VmFsdWUiLCJjb252ZXJ0IiwibnVtYmVyIiwic2V0dGVyIiwibm9ybWFsaXplUGl4ZWxTaXplIiwiZ2V0VG90YWxIZWlnaHQiLCJnZXRSYXciLCJwcm9wIiwidmFsIiwiZ2V0UmF3V2lkdGgiLCJnZXRSYXdIZWlnaHQiLCJnZXRQZXJjZW50YWdlV2lkdGgiLCJnZXRQaXhlbFdpZHRoIiwiZ2V0R2VuZXJpY1dpZHRoIiwic2V0R2VuZXJpY1dpZHRoIiwidW5pdCIsImdldFBpeGVsVGFibGVXaWR0aCIsImdldFBpeGVsVGFibGVIZWlnaHQiLCJnZXRQZXJjZW50VGFibGVXaWR0aCIsImdldFBlcmNlbnRUYWJsZUhlaWdodCIsImlzUGVyY2VudFNpemluZyIsImlzUGl4ZWxTaXppbmciLCJpc05vbmVTaXppbmciLCJwZXJjZW50YWdlQmFzZWRTaXplUmVnZXgiLCJwaXhlbEJhc2VkU2l6ZVJlZ2V4IiwiaW5TZWxlY3Rpb24iLCJsZWZ0RWRnZSIsInRvcEVkZ2UiLCJib3R0b21FZGdlIiwiaXNXaXRoaW4iLCJpc1JlY3Rhbmd1bGFyIiwiaXNSZWN0IiwiZGV0YWlsSXNXaXRoaW4iLCJDZWxsQm91bmRzIiwiZGVzdCIsImluc2lkZSIsInBhcmVudENlbGwiLCJpbm5lckNlbGwiLCJpc0NvbnRhaW5lZEJ5IiwiYzEiLCJjMiIsImdldEJvdW5kcyIsImdldEFueUJveCIsInN0YXJ0Q29vcmRzIiwiZmluaXNoQ29vcmRzIiwic2MiLCJmYyIsImhhc0NvbHNwYW4iLCJjZWxsT3JDb2wiLCJoYXNSb3dzcGFuIiwiZ2V0Q3NzVmFsdWUiLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsInVuaXF1ZUNvbHVtbnMiLCJ1bmlxdWVDaGVjayIsImNvbHVtbkV4aXN0cyIsImZpcnN0TGF5ZXIiLCJmaWx0ZXJGaXJzdExheWVyIiwiTE9DS0VEX0NPTF9BVFRSIiwiZ2V0TG9ja2VkQ29sdW1uc0Zyb21UYWJsZSIsImxvY2tlZENvbFN0ciIsImxvY2tlZENvbHMiLCJnZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQiLCJsb2NrZWRBcnIiLCJfdmFsIiwiZGVkdWNlIiwiYWEiLCJuIiwiZXh0cmFzIiwidG9BcnJheSIsInJlY3Vyc2UiLCJjdXIiLCJlMSIsImUyIiwiaXNFcXVhbE5vZGUiLCJtZW1iZXIiLCJkMSIsImQyIiwibWFya2VyIiwic2libGluZyIsImFwcGVuZCIsInByZXBlbmQiLCJmaXJzdENoaWxkIiwiYXBwZW5kQXQiLCJ3cmFwIiwid3JhcHBlciIsImVtcHR5Iiwicm9ndWUiLCJyZW1vdmUiLCJkb20iLCJ1bndyYXAiLCJvcmlnaW5hbCIsImlzRGVlcCIsInNoYWxsb3ciLCJkZWVwIiwic2hhbGxvd0FzIiwiYXR0cmlidXRlcyIsImNsb25lQ2hpbGRyZW4iLCJtdXRhdGUiLCJBVFRSSUJVVEUiLCJDREFUQV9TRUNUSU9OIiwiQ09NTUVOVCIsIkRPQ1VNRU5UIiwiRE9DVU1FTlRfVFlQRSIsIkRPQ1VNRU5UX0ZSQUdNRU5UIiwiRUxFTUVOVCIsIlRFWFQiLCJQUk9DRVNTSU5HX0lOU1RSVUNUSU9OIiwiRU5USVRZX1JFRkVSRU5DRSIsIkVOVElUWSIsIk5PVEFUSU9OIiwiZ2V0U2hhZG93SG9zdCIsImdldFNoYWRvd1Jvb3QiLCJpbkJvZHkiLCJkb2MiLCJib2R5IiwiZ2V0Qm9keSIsImZyb21IdG1sIiwiaHRtbCIsImRpdiIsImZyb21Eb20iLCJmcm9tVGFnIiwibm9kZSIsImZyb21UZXh0IiwidGV4dCIsImZyb21Qb2ludCIsImRvY0VsbSIsImZyb21UYWdzIiwidGV4dHMiLCJub2RlcyIsImdldEhlYWQiLCJTYW5kSFRNTEVsZW1lbnQiLCJOb2RlVHlwZXMiLCJpc0NvbW1lbnQiLCJpc0hUTUxFbGVtZW50IiwiaXNFbGVtZW50IiwiaXNUZXh0IiwiaXNEb2N1bWVudCIsImlzRG9jdW1lbnRGcmFnbWVudCIsImlzVGFnIiwiU3VnYXJIZWFkIiwiaXNTaGFkb3dSb290IiwiZG9zIiwiZ2V0Um9vdE5vZGUiLCJjcmVhdGVFbGVtZW50IiwiZ2V0U3R5bGVDb250YWluZXIiLCJnZXRDb250ZW50Q29udGFpbmVyIiwiaXNJblNoYWRvd1Jvb3QiLCJnZXRPcmlnaW5hbEV2ZW50VGFyZ2V0IiwiZXZlbnQiLCJpc09wZW5TaGFkb3dIb3N0IiwiY29tcG9zZWRQYXRoIiwiaXNPcGVuU2hhZG93Um9vdCIsInNyIiwiaXNDbG9zZWRTaGFkb3dSb290IiwiTm9kZVZhbHVlIiwiZ2V0T3B0aW9uIiwicmF3U2V0Iiwic2V0QWxsIiwic2V0T3B0aW9ucyIsImdldE9wdCIsImhhc05vbmUiLCJ0cmFuc2Zlck9uZSIsInNyY1ZhbHVlIiwidHJhbnNmZXIiLCJjbG9zZXN0IiwiYXNzdW1lRWRpdGFibGUiLCJlZGl0YWJsZSIsIlN0eWxlIiwiaW50ZXJuYWxTZXQiLCJpbnRlcm5hbFJlbW92ZSIsImNzcyIsInN0eWxlcyIsImdldFVuc2FmZVByb3BlcnR5IiwiZ2V0QWxsUmF3IiwicnVsZU5hbWUiLCJpc1ZhbGlkVmFsdWUiLCJzdHlsZSIsInByZXNlcnZlIiwib2xkU3R5bGVzIiwic291cmNlRG9tIiwidGFyZ2V0RG9tIiwicmVmbG93Iiwib25EaXJlY3Rpb24iLCJpc0x0ciIsImlzUnRsIiwiZ2V0RGlyZWN0aW9uIiwiZGVzY2VuZGFudHMiLCJzaWJsaW5ncyIsIkNsb3Nlc3RPckFuY2VzdG9yIiwiZGVzY2VuZGFudCIsInN0b3AiLCJ0ZXN0IiwiZGVzY2VuZCIsInJlcyIsImFueSIsImJ5cGFzc1NlbGVjdG9yIiwiYmFzZSIsIm9uZSIsIlJlY3Vyc2UiLCJvd25lciIsImRvY3VtZW50T3JPd25lciIsImRvY3VtZW50RWxlbWVudCIsImRlZmF1bHRWaWV3IiwicGFyZW50Tm9kZSIsInBhcmVudEVsZW1lbnQiLCJraW4iLCJwYXJlbnRzIiwicmF3UGFyZW50IiwiZmlsdGVyU2VsZiIsIm9mZnNldFBhcmVudCIsInByZXZTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJwcmV2U2libGluZ3MiLCJuZXh0U2libGluZ3MiLCJjcyIsImxhc3RDaGlsZCIsImNoaWxkTm9kZXNDb3VudCIsImhhc0NoaWxkTm9kZXMiLCJzcG90IiwibGVhZiIsIlVuaWNvZGUiLCJnZXRFbmQiLCJpc0VuZCIsImlzU3RhcnQiLCJpc1RleHROb2RlV2l0aEN1cnNvclBvc2l0aW9uIiwiaXNDb250ZW50RWRpdGFibGVGYWxzZSIsImVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uIiwiaXNDdXJzb3JQb3NpdGlvbiIsImhhc0N1cnNvclBvc2l0aW9uIiwiQXdhcmVuZXNzIiwiZGVzY2VuZGFudFJ0bCIsInVuaXRzIiwicGF0dGVybiIsImRlY2ltYWxEaWdpdHMiLCJzaWduZWRJbnRlZ2VyIiwiZXhwb25lbnRQYXJ0IiwiZG90Iiwib3B0IiwidW5zaWduZWREZWNpbWFsTGl0ZXJhbCIsImZsb2F0IiwiUmVnRXhwIiwiaXNVbml0IiwiYWNjZXB0ZWQiLCJjaGVjayIsInBhcnNlIiwidW5pdFJhdyIsIm5vcm1hbGlzZSIsIlJ1bnRpbWVTaXplIiwiZ2V0T3V0ZXIiLCJnZXRJbm5lciIsImdldFJ1bnRpbWUiLCJzZXRNYXgiLCJpbmNsdXNpb25zIiwiYWJzTWF4IiwiU3VnYXJQb3NpdGlvbiIsImJveFBvc2l0aW9uIiwiZmlyc3REZWZpbmVkT3JaZXJvIiwiYWJzb2x1dGUiLCJ3aW4iLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50TGVmdCIsInZpZXdwb3J0IiwicmVsYXRpdmUiLCJ0b3AiLCJ0cmFuc2xhdGUiLCJnZXRPZmZzZXQiLCJhZ2dyZWdhdGUiLCJwcm9wZXJ0aWVzIiwiY3VtdWxhdGl2ZUluY2x1c2lvbnMiLCJhYnNvbHV0ZU1heCIsInRvTnVtYmVyIiwicHgiLCJnZXRQcm9wIiwiY2FsY0NvbnRlbnRCb3hTaXplIiwidXBwZXIiLCJsb3dlciIsInBhZGRpbmdVcHBlciIsInBhZGRpbmdMb3dlciIsImJvcmRlclVwcGVyIiwiYm9yZGVyTG93ZXIiLCJnZXRDYWxjdWxhdGVkSGVpZ2h0IiwiYm94U2l6aW5nIiwiZ2V0Q2FsY3VsYXRlZFdpZHRoIiwiZ2V0SW5uZXJIZWlnaHQiLCJnZXRJbm5lcldpZHRoIiwiaXNTdXBwb3J0ZWQiLCJQbHVnaW5NYW5hZ2VyIiwiQ29tbWFuZHMiLCJPcHRpb25zIiwiZ2V0U2VsZWN0aW9uVGFyZ2V0cyIsIkJ1dHRvbnMiLCJNZW51SXRlbXMiLCJQbHVnaW4iLCJlZGl0b3IiLCJzZWxlY3Rpb25UYXJnZXRzIiwiVG9vbHMiLCJnZXRURFRIT3ZlcmFsbFN0eWxlIiwiZmlyc3RDaGlsZFN0eWxlIiwiY3VycmVudFN0eWxlIiwic2V0QWxpZ24iLCJhbGlnbiIsInNldFZBbGlnbiIsIkZha2VDbGlwYm9hcmQiLCJ0YWJsZVR5cGVCYXNlIiwidGFibGVUeXBlUm93IiwidGFibGVUeXBlQ29sdW1uIiwic2V0RGF0YSIsIml0ZW1zIiwiZmFrZUNsaXBib2FyZEl0ZW0iLCJnZXREYXRhIiwiY2xlYXJEYXRhIiwic2V0Um93cyIsInJvd3NPcHQiLCJjbGVhclJvd3MiLCJnZXRSb3dzIiwic2V0Q29sdW1ucyIsImNvbHVtbnNPcHQiLCJjbGVhckNvbHVtbnMiLCJnZXRDb2x1bW5zIiwiVXRpbHMiLCJDZWxsRGlhbG9nIiwiUm93RGlhbG9nIiwiVGFibGVEaWFsb2ciLCJyZWdpc3RlckNvbW1hbmRzIiwicnVuQWN0aW9uIiwiZnVuYyIsImZpcmVOZXdSb3ciLCJmaXJlTmV3Q2VsbCIsImZpcmVUYWJsZU1vZGlmaWVkIiwic3R5bGVNb2RpZmllZCIsInN0cnVjdHVyZU1vZGlmaWVkIiwic3R5bGVBbmRTdHJ1Y3R1cmVNb2RpZmllZCIsIkVudiIsImRlZmF1bHRUYWJsZVRvb2xiYXIiLCJkZWZhdWx0Q2VsbEJvcmRlcldpZHRocyIsImRlZmF1bHRDZWxsQm9yZGVyU3R5bGVzIiwiZGVmYXVsdFdpZHRoIiwiZ2V0UGl4ZWxGb3JjZWRXaWR0aCIsInBhcmVudEJsb2NrIiwiZGV0ZXJtaW5lRGVmYXVsdFN0eWxlcyIsImRlZmF1bHRTdHlsZXMiLCJpc1Jlc3BvbnNpdmVGb3JjZWQiLCJzaG91bGRTdHlsZVdpdGhDc3MiLCJpc1BpeGVsc0ZvcmNlZCIsImRldGVybWluZURlZmF1bHRBdHRyaWJ1dGVzIiwiZGVmYXVsdEF0dHJpYnV0ZXMiLCJvcHRpb24iLCJyZWdpc3RlciIsInJlZ2lzdGVyT3B0aW9uIiwiZ2V0VGFibGVTaXppbmdNb2RlIiwiZ2V0VGFibGVCb3JkZXJXaWR0aHMiLCJnZXRUYWJsZUJvcmRlclN0eWxlcyIsImhhc0FkdmFuY2VkQ2VsbFRhYiIsImhhc0FkdmFuY2VkUm93VGFiIiwiaGFzQWR2YW5jZWRUYWJsZVRhYiIsImhhc0FwcGVhcmFuY2VPcHRpb25zIiwiaGFzVGFibGVHcmlkIiwiZ2V0Q2VsbENsYXNzTGlzdCIsImdldFJvd0NsYXNzTGlzdCIsImdldFRhYmxlQ2xhc3NMaXN0IiwiZ2V0VG9vbGJhciIsImdldFRhYmxlQmFja2dyb3VuZENvbG9yTWFwIiwiZ2V0VGFibGVCb3JkZXJDb2xvck1hcCIsImdldERlZmF1bHRTdHlsZXMiLCJvcHRpb25zIiwiZ2V0RGVmYXVsdEF0dHJpYnV0ZXMiLCJnZXROb2RlTmFtZSIsInJlbW92ZVB4U3VmZml4IiwiYWRkUHhTdWZmaXgiLCJnZXRTZWxlY3Rpb25TdGFydCIsImdldFNlbGVjdGlvbkVuZCIsImlzSW5FZGl0YWJsZUNvbnRleHQiLCJDZWxsT3BTZWxlY3Rpb24iLCJub01lbnUiLCJmb3JNZW51Iiwic3RyU2VsZWN0ZWQiLCJzdHJTZWxlY3RlZFNlbGVjdG9yIiwic3RyQXR0cmlidXRlU2VsZWN0b3IiLCJzdHJGaXJzdFNlbGVjdGVkIiwic3RyRmlyc3RTZWxlY3RlZFNlbGVjdG9yIiwic3RyTGFzdFNlbGVjdGVkIiwic3RyTGFzdFNlbGVjdGVkU2VsZWN0b3IiLCJhdHRyaWJ1dGVTZWxlY3RvciIsIlNlbGVjdG9yRXhpc3RzIiwiVGFibGVUYXJnZXRzIiwiTG9ja2VkRGlzYWJsZSIsImNoYW5nZUhhbmRsZXJzIiwic2VsZWN0aW9uRGV0YWlscyIsImlzQ2FwdGlvbiIsImlzRGlzYWJsZWRGb3JTZWxlY3Rpb24iLCJnZXRTdGFydCIsImZpbmRUYXJnZXRzIiwic3RhcnRDZWxsT3JDYXB0aW9uIiwiZW5kVGFibGUiLCJnZXRFeHRyYWN0ZWREZXRhaWxzIiwicmVzZXRUYXJnZXRzIiwic2V0dXBIYW5kbGVyIiwiaGFuZGxlciIsIm9uU2V0dXAiLCJpc0Rpc2FibGVkIiwib25TZXR1cFdpdGhUb2dnbGUiLCJpc0FjdGl2ZSIsImlzRGlzYWJsZWRGcm9tTG9ja2VkIiwibG9ja2VkRGlzYWJsZSIsIm9uU2V0dXBUYWJsZSIsIl8iLCJvblNldHVwQ2VsbE9yUm93Iiwib25TZXR1cENvbHVtbiIsIm9uU2V0dXBQYXN0ZWFibGUiLCJnZXRDbGlwYm9hcmREYXRhIiwib25TZXR1cFBhc3RlYWJsZUNvbHVtbiIsIm9uU2V0dXBNZXJnZWFibGUiLCJfdGFyZ2V0cyIsIm9uU2V0dXBVbm1lcmdlYWJsZSIsIm9uU2V0dXBUYWJsZVdpdGhDYXB0aW9uIiwib25TZXR1cFRhYmxlSGVhZGVycyIsImNvbW1hbmQiLCJoZWFkZXJUeXBlIiwib25TZXR1cFRhYmxlUm93SGVhZGVycyIsIm9uU2V0dXBUYWJsZUNvbHVtbkhlYWRlcnMiLCJTdWdhckVsZW1lbnRzIiwiZ2V0U2VsZWN0aW9uQ2VsbEZhbGxiYWNrIiwiZ2V0U2VsZWN0aW9uRnJvbVNlbGVjdG9yIiwiaW5pdENlbGwiLCJjZWxsTmFtZSIsImdldFNlbGVjdGlvbkNlbGxPckNhcHRpb24iLCJnZXRTZWxlY3Rpb25DZWxsIiwiZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uIiwiZ2V0Um93c0Zyb21TZWxlY3Rpb24iLCJzZWxlY3RlZCIsInZlcnRpY2FsQWxpZ25WYWx1ZXMiLCJhcHBseVRhYmxlQ2VsbFN0eWxlIiwiY2hhbmdlQ29sdW1uSGVhZGVyIiwiY2hhbmdlUm93SGVhZGVyIiwiZmlsdGVyTm9uZUl0ZW0iLCJidWlsZENvbG9yTWVudSIsImdlbmVyYXRlTWVudUl0ZW1zQ2FsbGJhY2siLCJvblNldHVwRWRpdGFibGUiLCJub2RlQ2hhbmdlZCIsImFkZEJ1dHRvbnMiLCJjYWxsYmFjayIsImNtZCIsImFkZEJ1dHRvbklmUmVnaXN0ZXJlZCIsInNwZWMiLCJhZGRUb2dnbGVCdXR0b25JZlJlZ2lzdGVyZWQiLCJ0YWJsZUNsYXNzTGlzdCIsInRhYmxlQ2VsbENsYXNzTGlzdCIsImFkZFRvb2xiYXJzIiwiaXNFZGl0YWJsZVRhYmxlIiwidG9vbGJhciIsIlN0eWxlcyIsIkV2ZW50cyIsIkNlbGxEaWFsb2dHZW5lcmFsVGFiIiwiZ2V0QWR2YW5jZWRUYWIiLCJEb21Nb2RpZmllciIsIkhlbHBlcnMiLCJnZXRTZWxlY3RlZENlbGxzIiwiYWxsQ2VsbHMiLCJjZWxsQSIsImNlbGxCIiwidXBkYXRlU2ltcGxlUHJvcHMiLCJtb2RpZmllciIsImNvbE1vZGlmaWVyIiwic2hvdWxkVXBkYXRlIiwidXBkYXRlQWR2YW5jZWRQcm9wcyIsImFwcGx5U3R5bGVEYXRhIiwid2FzQ2hhbmdlZCIsImlzU2luZ2xlQ2VsbCIsImNlbGxFbG0iLCJzaG91bGRPdmVycmlkZUN1cnJlbnRWYWx1ZSIsImFwcGx5U3RydWN0dXJlRGF0YSIsImFwcGx5Q2VsbERhdGEiLCJvbGREYXRhIiwibW9kaWZpZWREYXRhIiwiX3ZhbHVlIiwib25TdWJtaXRDZWxsRm9ybSIsImNlbGxzRGF0YSIsIm9wZW4iLCJkaWFsb2dUYWJQYW5lbCIsImRpYWxvZ1BhbmVsIiwiVWlVdGlscyIsImdldENsYXNzTGlzdCIsImdldEl0ZW1zIiwiYnVpbGRMaXN0SXRlbXMiLCJkaWFsb2dOYW1lIiwiZW1wdHlCb3JkZXJTdHlsZSIsImFkdlRhYkl0ZW1zIiwiYm9yZGVyV2lkdGgiLCJub3JtYWwiLCJzZXRBdHRyaWIiLCJzZXRTdHlsZSIsInNldEZvcm1hdCIsImZvcm1hdE5hbWUiLCJUcmFuc2Zvcm1hdGlvbnMiLCJUYWJsZU9wZXJhdGlvbnMiLCJyZ2JUb0hleCIsImV4dHJhY3RBZHZhbmNlZFN0eWxlcyIsImdldFNoYXJlZFZhbHVlcyIsImJhc2VEYXRhIiwiY29tcGFyaXNvbkRhdGEiLCJpdGVtVmFsdWUiLCJpdGVtS2V5IiwiY29tcGFyaXNvblZhbHVlIiwiZ2V0QWxpZ25tZW50IiwiZm9ybWF0cyIsImdldEhBbGlnbm1lbnQiLCJnZXRWQWxpZ25tZW50IiwiZXh0cmFjdERhdGFGcm9tU2V0dGluZ3MiLCJoYXNBZHZUYWJsZVRhYiIsImV4dHJhY3RBZHZhbmNlZFN0eWxlRGF0YSIsImRlZmF1bHREYXRhIiwiZ2V0Qm9yZGVyIiwiYm9yZGVyIiwiYWR2U3R5bGUiLCJnZXRDZWxsUGFkZGluZ0NlbGxTcGFjaW5nIiwic3BhY2luZyIsImNlbGxzcGFjaW5nIiwicGFkZGluZyIsImNlbGxwYWRkaW5nIiwiZXh0cmFjdERhdGFGcm9tVGFibGVFbGVtZW50Iiwib3B0Qm9yZGVyV2lkdGgiLCJleHRyYWN0RGF0YUZyb21Sb3dFbGVtZW50IiwiZXh0cmFjdERhdGFGcm9tQ2VsbEVsZW1lbnQiLCJjb2xFbG0iLCJnZXRTdHlsZSIsImJ1aWxkTWVudUl0ZW1zIiwiYWRkTWVudUl0ZW1zIiwiYWRkTWVudUlmUmVnaXN0ZXJlZCIsImFkZFRvZ2dsZU1lbnVJZlJlZ2lzdGVyZWQiLCJpbnNlcnRUYWJsZUFjdGlvbiIsImhhc1Jvd01lbnVJdGVtcyIsImhhc0NvbHVtbk1lbnVJdGVtcyIsImhhc0NlbGxNZW51SXRlbXMiLCJSb3dEaWFsb2dHZW5lcmFsVGFiIiwiaXNTaW5nbGVSb3ciLCJyb3dFbG0iLCJhcHBseVJvd0RhdGEiLCJ0eXBlTW9kaWZpZWQiLCJvblN1Ym1pdFJvd0Zvcm0iLCJyb3dzRGF0YSIsImZvcm1DaGlsZHJlbiIsIlRhYmxlRGlhbG9nR2VuZXJhbFRhYiIsInN0eWxlVERUSCIsImFwcGx5RGF0YVRvRWxlbWVudCIsInRhYmxlRWxtIiwic2hvdWxkQXBwbHlPbkNlbGwiLCJib3JkZXJJc1plcm8iLCJjZWxsU3R5bGVzIiwiYWR2RGF0YSIsIm9uU3VibWl0VGFibGVGb3JtIiwiYXBwbGljYWJsZUNlbGxQcm9wZXJ0aWVzIiwiY2FwdGlvbkVsbSIsImNhcHRpb25Nb2RpZmllZCIsImluc2VydE5ld1RhYmxlIiwiY2xhc3NlcyIsImdlbmVyYWxQYW5lbCIsIm5vbkFkdmFuY2VkRm9ybSIsImFkdmFuY2VkRm9ybSIsImRpYWxvZ0JvZHkiLCJyb3dDb2xDb3VudEl0ZW1zIiwiYWx3YXlzSXRlbXMiLCJhcHBlYXJhbmNlSXRlbXMiLCJhbGlnbm1lbnRJdGVtIiwiY2xhc3NMaXN0SXRlbSIsIlNpbmdsZXRvbiIsIm9uU2V0dXBUb2dnbGUiLCJmb3JtYXRWYWx1ZSIsImJvdW5kQ2FsbGJhY2siLCJpc05vbmUiLCJpbml0IiwiY2hlY2tOb2RlIiwiaXNMaXN0R3JvdXAiLCJidWlsZENsYXNzTGlzdCIsImNsYXNzTGlzdCIsImZvcm1hdCIsIm9uQWN0aW9uIiwiY29sb3JMaXN0IiwiY29sb3JNYXAiLCJlbnRyeSIsImN1cnJlbnRUeXBlIiwibmV3VHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7OztBQ0hQOztBQUVBLDZEQUFlLE1BQU0sRUFBQztBQUNmOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSDZDO0FBSXBELE1BQU1FLFlBQVksQ0FBQ0MsUUFBd0I7UUFDekMsT0FBT0MsYUFBYUQ7SUFDdEI7QUFFQSxNQUFNRSxpQkFBaUI7QUFDdkIsTUFBTUMsZ0JBQWdCO0FBRXRCLE1BQU1DLGNBQWMsQ0FBQ0MsTUFBeUJILGVBQWUsSUFBSSxDQUFDRyxRQUFRRixjQUFjLElBQUksQ0FBQ0U7QUFFN0YsTUFBTUosZUFBZSxDQUFDSSxNQUF3QlIsMERBQXFCLENBQUNRLEtBQUssS0FBSyxXQUFXO0FBRXpGLE1BQU1DLGFBQWEsQ0FBQ0QsTUFBK0JELFlBQVlDLE9BQU9QLDBEQUFhLENBQUM7UUFBRSxPQUFPRyxhQUFhSTtJQUFLLEtBQUtQLDBEQUFhO0FBRWpJLGtFQUFrRTtBQUNsRSxNQUFNUyxjQUFjLENBQUNGO0lBQ25CLE1BQU1HLFlBQVlILElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQ0gsZ0JBQWdCLENBQUNPLEdBQUdDLEdBQUdDLEdBQUdDLElBQzVE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
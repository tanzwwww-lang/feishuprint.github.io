(() => { // webpackBootstrap
"use strict";
var __webpack_modules__ = ({
"./lib/globals/tinymce/core/api/FakeClipboard.js": 
/*!*******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/FakeClipboard.js ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  FakeClipboard: () => (FakeClipboard),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.FakeClipboard');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var FakeClipboard = global;


}),
"./lib/globals/tinymce/core/api/ModelManager.js": 
/*!******************************************************!*\
  !*** ./lib/globals/tinymce/core/api/ModelManager.js ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ModelManager: () => (ModelManager),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
var global = tinymce.util.Tools.resolve('tinymce.ModelManager');

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (global);
var ModelManager = global;


}),
"../boss/src/main/ts/ephox/boss/api/DomUniverse.ts": 
/*!*********************************************************!*\
  !*** ../boss/src/main/ts/ephox/boss/api/DomUniverse.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _common_TagBoundaries__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/TagBoundaries */ "../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts");



/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{
    const clone = (element)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(element.dom.cloneNode(false));
    };
    const document = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.documentOrOwner(element).dom;
    const isBoundary = (element)=>{
        if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
            return false;
        }
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element) === 'body') {
            return true;
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains(_common_TagBoundaries__WEBPACK_IMPORTED_MODULE_4__["default"], _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element));
    };
    const isEmptyTag = (element)=>{
        if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
            return false;
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains([
            'br',
            'img',
            'hr',
            'input'
        ], _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element));
    };
    const isNonEditable = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.get(element, 'contenteditable') === 'false';
    const comparePosition = (element, other)=>{
        return element.dom.compareDocumentPosition(other.dom);
    };
    const copyAttributesTo = (source, destination)=>{
        const as = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.clone(source);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.setAll(destination, as);
    };
    const isSpecial = (element)=>{
        const tag = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name(element);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains([
            'script',
            'noscript',
            'iframe',
            'noframes',
            'noembed',
            'title',
            'style',
            'textarea',
            'xmp'
        ], tag);
    };
    const getLanguage = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.getOpt(element, 'lang') : _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.none();
    return {
        up: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            selector: _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.ancestor,
            closest: _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.closest,
            predicate: _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.ancestor,
            all: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parents
        }),
        down: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            selector: _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.descendants,
            predicate: _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.descendants
        }),
        styles: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            get: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.get,
            getRaw: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.getRaw,
            set: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.set,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.remove
        }),
        attrs: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            get: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.get,
            set: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.set,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove,
            copyTo: copyAttributesTo
        }),
        insert: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            before: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.before,
            after: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.after,
            afterAll: _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.after,
            append: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.append,
            appendAll: _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.append,
            prepend: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.prepend,
            wrap: _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.wrap
        }),
        remove: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            unwrap: _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.unwrap,
            remove: _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.remove
        }),
        create: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            nu: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag,
            clone,
            text: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromText
        }),
        query: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            comparePosition,
            prevSibling: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.prevSibling,
            nextSibling: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.nextSibling
        }),
        property: _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant({
            children: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.children,
            name: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.name,
            parent: _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parent,
            document,
            isText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isText,
            isComment: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isComment,
            isElement: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement,
            isSpecial,
            getLanguage,
            getText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.get,
            setText: _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.set,
            isBoundary,
            isEmptyTag,
            isNonEditable
        }),
        eq: _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.eq,
        is: _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.is
    };
});


}),
"../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts": 
/*!**************************************************************!*\
  !*** ../boss/src/main/ts/ephox/boss/common/TagBoundaries.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([
    'body',
    'p',
    'div',
    'article',
    'aside',
    'figcaption',
    'figure',
    'footer',
    'header',
    'nav',
    'section',
    'ol',
    'ul',
    'li',
    'table',
    'thead',
    'tbody',
    'tfoot',
    'caption',
    'tr',
    'td',
    'th',
    'h1',
    'h2',
    'h3',
    'h4',
    'h5',
    'h6',
    'blockquote',
    'pre',
    'address'
]);


}),
"../darwin/src/main/ts/ephox/darwin/api/InputHandlers.ts": 
/*!***************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/InputHandlers.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  external: () => (external),
  keyboard: () => (keyboard),
  mouse: () => (mouse)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");
/* ESM import */var _keyboard_KeySelection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../keyboard/KeySelection */ "../darwin/src/main/ts/ephox/darwin/keyboard/KeySelection.ts");
/* ESM import */var _keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../keyboard/VerticalMovement */ "../darwin/src/main/ts/ephox/darwin/keyboard/VerticalMovement.ts");
/* ESM import */var _mouse_MouseSelection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mouse/MouseSelection */ "../darwin/src/main/ts/ephox/darwin/mouse/MouseSelection.ts");
/* ESM import */var _navigation_KeyDirection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../navigation/KeyDirection */ "../darwin/src/main/ts/ephox/darwin/navigation/KeyDirection.ts");
/* ESM import */var _selection_CellSelection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../selection/CellSelection */ "../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts");
/* ESM import */var _selection_Response__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../selection/Response */ "../darwin/src/main/ts/ephox/darwin/selection/Response.ts");
/* ESM import */var _SelectionKeys__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SelectionKeys */ "../darwin/src/main/ts/ephox/darwin/api/SelectionKeys.ts");
/* ESM import */var _WindowBridge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WindowBridge */ "../darwin/src/main/ts/ephox/darwin/api/WindowBridge.ts");










const rc = (rows, cols)=>({
        rows,
        cols
    });
const mouse = (win, container, isRoot, annotations)=>{
    const bridge = (0,_WindowBridge__WEBPACK_IMPORTED_MODULE_0__.WindowBridge)(win);
    const handlers = (0,_mouse_MouseSelection__WEBPACK_IMPORTED_MODULE_1__.MouseSelection)(bridge, container, isRoot, annotations);
    return {
        clearstate: handlers.clearstate,
        mousedown: handlers.mousedown,
        mouseover: handlers.mouseover,
        mouseup: handlers.mouseup
    };
};
const isEditableNode = (node)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.closest(node, _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement).exists(_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.isEditable);
const isEditableSelection = (start, finish)=>isEditableNode(start) || isEditableNode(finish);
const keyboard = (win, container, isRoot, annotations)=>{
    const bridge = (0,_WindowBridge__WEBPACK_IMPORTED_MODULE_0__.WindowBridge)(win);
    const clearToNavigate = ()=>{
        annotations.clear(container);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
    };
    const keydown = (event, start, soffset, finish, foffset, direction)=>{
        const realEvent = event.raw;
        const keycode = realEvent.which;
        const shiftKey = realEvent.shiftKey === true;
        const handler = _selection_CellSelection__WEBPACK_IMPORTED_MODULE_6__.retrieve(container, annotations.selectedSelector).fold(()=>{
            // Make sure any possible lingering annotations are cleared
            if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isNavigation(keycode) && !shiftKey) {
                annotations.clearBeforeUpdate(container);
            }
            // Shift down should predict the movement and set the selection.
            if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isNavigation(keycode) && shiftKey && !isEditableSelection(start, finish)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none;
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isDown(keycode) && shiftKey) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.curry(_keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.select, bridge, container, isRoot, _navigation_KeyDirection__WEBPACK_IMPORTED_MODULE_10__.down, finish, start, annotations.selectRange);
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isUp(keycode) && shiftKey) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.curry(_keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.select, bridge, container, isRoot, _navigation_KeyDirection__WEBPACK_IMPORTED_MODULE_10__.up, finish, start, annotations.selectRange);
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isDown(keycode)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.curry(_keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.navigate, bridge, isRoot, _navigation_KeyDirection__WEBPACK_IMPORTED_MODULE_10__.down, finish, start, _keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.lastDownCheck);
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isUp(keycode)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.curry(_keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.navigate, bridge, isRoot, _navigation_KeyDirection__WEBPACK_IMPORTED_MODULE_10__.up, finish, start, _keyboard_VerticalMovement__WEBPACK_IMPORTED_MODULE_9__.firstUpCheck);
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none;
            }
        }, (selected)=>{
            const update = (attempts)=>{
                return ()=>{
                    const navigation = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.findMap(attempts, (delta)=>{
                        return _keyboard_KeySelection__WEBPACK_IMPORTED_MODULE_12__.update(delta.rows, delta.cols, container, selected, annotations);
                    });
                    // Shift the selected rows and update the selection.
                    return navigation.fold(()=>{
                        // The cell selection went outside the table, so clear it and bridge from the first box to before/after
                        // the table
                        return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_6__.getEdges(container, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map((edges)=>{
                            const relative = _SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isDown(keycode) || direction.isForward(keycode) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.Situ.after : _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.Situ.before;
                            bridge.setRelativeSelection(_ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.Situ.on(edges.first, 0), relative(edges.table));
                            annotations.clear(container);
                            return _selection_Response__WEBPACK_IMPORTED_MODULE_14__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none(), true);
                        });
                    }, (_)=>{
                        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.some(_selection_Response__WEBPACK_IMPORTED_MODULE_14__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none(), true));
                    });
                };
            };
            if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isNavigation(keycode) && shiftKey && !isEditableSelection(start, finish)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none;
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isDown(keycode) && shiftKey) {
                return update([
                    rc(+1, 0)
                ]);
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isUp(keycode) && shiftKey) {
                return update([
                    rc(-1, 0)
                ]);
            } else if (direction.isBackward(keycode) && shiftKey) {
                return update([
                    rc(0, -1),
                    rc(-1, 0)
                ]);
            } else if (direction.isForward(keycode) && shiftKey) {
                return update([
                    rc(0, +1),
                    rc(+1, 0)
                ]);
            } else if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isNavigation(keycode) && !shiftKey) {
                return clearToNavigate;
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none;
            }
        });
        return handler();
    };
    const keyup = (event, start, soffset, finish, foffset)=>{
        return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_6__.retrieve(container, annotations.selectedSelector).fold(()=>{
            const realEvent = event.raw;
            const keycode = realEvent.which;
            const shiftKey = realEvent.shiftKey === true;
            if (!shiftKey) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
            }
            if (_SelectionKeys__WEBPACK_IMPORTED_MODULE_7__.isNavigation(keycode) && isEditableSelection(start, finish)) {
                return _keyboard_KeySelection__WEBPACK_IMPORTED_MODULE_12__.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
            }
        }, _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none);
    };
    return {
        keydown,
        keyup
    };
};
const external = (win, container, isRoot, annotations)=>{
    const bridge = (0,_WindowBridge__WEBPACK_IMPORTED_MODULE_0__.WindowBridge)(win);
    return (start, finish)=>{
        annotations.clearBeforeUpdate(container);
        _selection_CellSelection__WEBPACK_IMPORTED_MODULE_6__.identify(start, finish, isRoot).each((cellSel)=>{
            const boxes = cellSel.boxes.getOr([]);
            annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);
            // stop the browser from creating a big text selection, place the selection at the end of the cell where the cursor is
            bridge.selectContents(finish);
            bridge.collapseSelection();
        });
    };
};



}),
"../darwin/src/main/ts/ephox/darwin/api/SelectionAnnotation.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/SelectionAnnotation.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SelectionAnnotation: () => (SelectionAnnotation)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/OnNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");


const byClass = (ephemera)=>{
    const addSelectionClass = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.addClass(ephemera.selected);
    const removeSelectionClasses = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.removeClasses([
        ephemera.selected,
        ephemera.lastSelected,
        ephemera.firstSelected
    ]);
    const clear = (container)=>{
        const sels = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.descendants(container, ephemera.selectedSelector);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(sels, removeSelectionClasses);
    };
    const selectRange = (container, cells, start, finish)=>{
        clear(container);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(cells, addSelectionClass);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.add(start, ephemera.firstSelected);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.add(finish, ephemera.lastSelected);
    };
    return {
        clearBeforeUpdate: clear,
        clear,
        selectRange,
        selectedSelector: ephemera.selectedSelector,
        firstSelectedSelector: ephemera.firstSelectedSelector,
        lastSelectedSelector: ephemera.lastSelectedSelector
    };
};
const byAttr = (ephemera, onSelection, onClear)=>{
    const removeSelectionAttributes = (element)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(element, ephemera.selected);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(element, ephemera.firstSelected);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(element, ephemera.lastSelected);
    };
    const addSelectionAttribute = (element)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(element, ephemera.selected, '1');
    };
    const clear = (container)=>{
        clearBeforeUpdate(container);
        onClear();
    };
    const clearBeforeUpdate = (container)=>{
        const sels = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.descendants(container, `${ephemera.selectedSelector},${ephemera.firstSelectedSelector},${ephemera.lastSelectedSelector}`);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(sels, removeSelectionAttributes);
    };
    const selectRange = (container, cells, start, finish)=>{
        clear(container);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(cells, addSelectionAttribute);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(start, ephemera.firstSelected, '1');
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(finish, ephemera.lastSelected, '1');
        onSelection(cells, start, finish);
    };
    return {
        clearBeforeUpdate,
        clear,
        selectRange,
        selectedSelector: ephemera.selectedSelector,
        firstSelectedSelector: ephemera.firstSelectedSelector,
        lastSelectedSelector: ephemera.lastSelectedSelector
    };
};
const SelectionAnnotation = {
    byClass,
    byAttr
};


}),
"../darwin/src/main/ts/ephox/darwin/api/SelectionKeys.ts": 
/*!***************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/SelectionKeys.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isDown: () => (isDown),
  isNavigation: () => (isNavigation),
  isUp: () => (isUp),
  ltr: () => (ltr),
  rtl: () => (rtl)
});
const isKey = (key)=>{
    return (keycode)=>{
        return keycode === key;
    };
};
const isUp = isKey(38);
const isDown = isKey(40);
const isNavigation = (keycode)=>{
    return keycode >= 37 && keycode <= 40;
};
const ltr = {
    // We need to move KEYS out of keytar and into something much more low-level.
    isBackward: isKey(37),
    isForward: isKey(39)
};
const rtl = {
    isBackward: isKey(39),
    isForward: isKey(37)
};



}),
"../darwin/src/main/ts/ephox/darwin/api/SelectionTypes.ts": 
/*!****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/SelectionTypes.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SelectionTypeTag: () => (SelectionTypeTag),
  fold: () => (fold),
  multiple: () => (multiple),
  none: () => (none),
  single: () => (single)
});
var SelectionTypeTag = /*#__PURE__*/ function(SelectionTypeTag) {
    SelectionTypeTag["None"] = "none";
    SelectionTypeTag["Single"] = "single";
    SelectionTypeTag["Multiple"] = "multiple";
    return SelectionTypeTag;
}({});
const fold = (subject, onNone, onMultiple, onSingle)=>{
    switch(subject.tag){
        case "none":
            return onNone();
        case "single":
            return onSingle(subject.element);
        case "multiple":
            return onMultiple(subject.elements);
    }
};
const none = ()=>({
        tag: "none"
    });
const multiple = (elements)=>({
        tag: "multiple",
        elements
    });
const single = (element)=>({
        tag: "single",
        element
    });


}),
"../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts": 
/*!****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  retrieve: () => (retrieve),
  retrieveBox: () => (retrieveBox)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../selection/CellSelection */ "../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts");




// Explicitly calling CellSelection.retrieve so that we can see the API signature.
const retrieve = (container, selector)=>{
    return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__.retrieve(container, selector);
};
const retrieveBox = (container, firstSelectedSelector, lastSelectedSelector)=>{
    return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_0__.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind((edges)=>{
        const isRoot = (ancestor)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(container, ancestor);
        };
        const sectionSelector = 'thead,tfoot,tbody,table';
        const firstAncestor = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.ancestor(edges.first, sectionSelector, isRoot);
        const lastAncestor = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.ancestor(edges.last, sectionSelector, isRoot);
        return firstAncestor.bind((fA)=>{
            return lastAncestor.bind((lA)=>{
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(fA, lA) ? _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.getBox(edges.table, edges.first, edges.last) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            });
        });
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/api/WindowBridge.ts": 
/*!**************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/api/WindowBridge.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  WindowBridge: () => (WindowBridge)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/WindowSelection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Scroll.ts");
/* ESM import */var _selection_Situs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/Situs */ "../darwin/src/main/ts/ephox/darwin/selection/Situs.ts");
/* ESM import */var _selection_Util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../selection/Util */ "../darwin/src/main/ts/ephox/darwin/selection/Util.ts");



const WindowBridge = (win)=>{
    const elementFromPoint = (x, y)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromPoint(_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(win.document), x, y);
    };
    const getRect = (element)=>{
        return element.dom.getBoundingClientRect();
    };
    const getRangedRect = (start, soffset, finish, foffset)=>{
        const sel = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SimSelection.exact(start, soffset, finish, foffset);
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getFirstRect(win, sel);
    };
    const getSelection = ()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(win).map((exactAdt)=>{
            return _selection_Util__WEBPACK_IMPORTED_MODULE_3__.convertToRange(win, exactAdt);
        });
    };
    const fromSitus = (situs)=>{
        const relative = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SimSelection.relative(situs.start, situs.finish);
        return _selection_Util__WEBPACK_IMPORTED_MODULE_3__.convertToRange(win, relative);
    };
    const situsFromPoint = (x, y)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getAtPoint(win, x, y).map((exact)=>{
            return _selection_Situs__WEBPACK_IMPORTED_MODULE_4__.Situs.create(exact.start, exact.soffset, exact.finish, exact.foffset);
        });
    };
    const clearSelection = ()=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.clear(win);
    };
    const collapseSelection = (toStart = false)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(win).each((sel)=>sel.fold((rng)=>rng.collapse(toStart), (startSitu, finishSitu)=>{
                const situ = toStart ? startSitu : finishSitu;
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setRelative(win, situ, situ);
            }, (start, soffset, finish, foffset)=>{
                const node = toStart ? start : finish;
                const offset = toStart ? soffset : foffset;
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setExact(win, node, offset, node, offset);
            }));
    };
    const selectNode = (element)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setToElement(win, element, false);
    };
    const selectContents = (element)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setToElement(win, element);
    };
    const setSelection = (sel)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setExact(win, sel.start, sel.soffset, sel.finish, sel.foffset);
    };
    const setRelativeSelection = (start, finish)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setRelative(win, start, finish);
    };
    const getInnerHeight = ()=>{
        return win.innerHeight;
    };
    const getScrollY = ()=>{
        const pos = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.get(_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(win.document));
        return pos.top;
    };
    const scrollBy = (x, y)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.by(x, y, _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(win.document));
    };
    return {
        elementFromPoint,
        getRect,
        getRangedRect,
        getSelection,
        fromSitus,
        situsFromPoint,
        clearSelection,
        collapseSelection,
        setSelection,
        setRelativeSelection,
        selectNode,
        selectContents,
        getInnerHeight,
        getScrollY,
        scrollBy
    };
};


}),
"../darwin/src/main/ts/ephox/darwin/keyboard/Carets.ts": 
/*!*************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/Carets.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getBottom: () => (getBottom),
  getTop: () => (getTop),
  moveBottomTo: () => (moveBottomTo),
  moveDown: () => (moveDown),
  moveTopTo: () => (moveTopTo),
  moveUp: () => (moveUp),
  toString: () => (toString),
  translate: () => (translate)
});
const moveDown = (caret, amount)=>{
    return {
        left: caret.left,
        top: caret.top + amount,
        right: caret.right,
        bottom: caret.bottom + amount
    };
};
const moveUp = (caret, amount)=>{
    return {
        left: caret.left,
        top: caret.top - amount,
        right: caret.right,
        bottom: caret.bottom - amount
    };
};
const moveBottomTo = (caret, bottom)=>{
    const height = caret.bottom - caret.top;
    return {
        left: caret.left,
        top: bottom - height,
        right: caret.right,
        bottom
    };
};
const moveTopTo = (caret, top)=>{
    const height = caret.bottom - caret.top;
    return {
        left: caret.left,
        top,
        right: caret.right,
        bottom: top + height
    };
};
const translate = (caret, xDelta, yDelta)=>{
    return {
        left: caret.left + xDelta,
        top: caret.top + yDelta,
        right: caret.right + xDelta,
        bottom: caret.bottom + yDelta
    };
};
const getTop = (caret)=>{
    return caret.top;
};
const getBottom = (caret)=>{
    return caret.bottom;
};
const toString = (caret)=>{
    return '(' + caret.left + ', ' + caret.top + ') -> (' + caret.right + ', ' + caret.bottom + ')';
};



}),
"../darwin/src/main/ts/ephox/darwin/keyboard/KeySelection.ts": 
/*!*******************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/KeySelection.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detect: () => (detect),
  sync: () => (sync),
  update: () => (update)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");
/* ESM import */var _selection_CellSelection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../selection/CellSelection */ "../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts");
/* ESM import */var _selection_Response__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/Response */ "../darwin/src/main/ts/ephox/darwin/selection/Response.ts");
/* ESM import */var _selection_Util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../selection/Util */ "../darwin/src/main/ts/ephox/darwin/selection/Util.ts");





// Based on a start and finish, select the appropriate box of cells
const sync = (container, isRoot, start, soffset, finish, foffset, selectRange)=>{
    if (!(_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.eq(start, finish) && soffset === foffset)) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(start, 'td,th', isRoot).bind((s)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(finish, 'td,th', isRoot).bind((f)=>{
                return detect(container, isRoot, s, f, selectRange);
            });
        });
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    }
};
// If the cells are different, and there is a rectangle to connect them, select the cells.
const detect = (container, isRoot, start, finish, selectRange)=>{
    if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.eq(start, finish)) {
        return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_3__.identify(start, finish, isRoot).bind((cellSel)=>{
            const boxes = cellSel.boxes.getOr([]);
            if (boxes.length > 1) {
                selectRange(container, boxes, cellSel.start, cellSel.finish);
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(_selection_Response__WEBPACK_IMPORTED_MODULE_4__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(_selection_Util__WEBPACK_IMPORTED_MODULE_5__.makeSitus(start, 0, start, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getEnd(start))), true));
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
            }
        });
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    }
};
const update = (rows, columns, container, selected, annotations)=>{
    const updateSelection = (newSels)=>{
        annotations.clearBeforeUpdate(container);
        annotations.selectRange(container, newSels.boxes, newSels.start, newSels.finish);
        return newSels.boxes;
    };
    return _selection_CellSelection__WEBPACK_IMPORTED_MODULE_3__.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector, annotations.lastSelectedSelector).map(updateSelection);
};



}),
"../darwin/src/main/ts/ephox/darwin/keyboard/Rectangles.ts": 
/*!*****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/Rectangles.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getBoxAt: () => (getBoxAt),
  getEntireBox: () => (getEntireBox)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const getPartialBox = (bridge, element, offset)=>{
    if (offset >= 0 && offset < _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getEnd(element)) {
        return bridge.getRangedRect(element, offset, element, offset + 1);
    } else if (offset > 0) {
        return bridge.getRangedRect(element, offset - 1, element, offset);
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const toCaret = (rect)=>({
        left: rect.left,
        top: rect.top,
        right: rect.right,
        bottom: rect.bottom
    });
const getElemBox = (bridge, element)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(bridge.getRect(element));
};
const getBoxAt = (bridge, element, offset)=>{
    // Note, we might need to consider this offset and descend.
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
        return getElemBox(bridge, element).map(toCaret);
    } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isText(element)) {
        return getPartialBox(bridge, element, offset).map(toCaret);
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
};
const getEntireBox = (bridge, element)=>{
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isElement(element)) {
        return getElemBox(bridge, element).map(toCaret);
    } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isText(element)) {
        return bridge.getRangedRect(element, 0, element, _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getEnd(element)).map(toCaret);
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
};



}),
"../darwin/src/main/ts/ephox/darwin/keyboard/Retries.ts": 
/*!**************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/Retries.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Retries: () => (Retries)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/dom/DomGather.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _Carets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Carets */ "../darwin/src/main/ts/ephox/darwin/keyboard/Carets.ts");
/* ESM import */var _Rectangles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Rectangles */ "../darwin/src/main/ts/ephox/darwin/keyboard/Rectangles.ts");






const JUMP_SIZE = 5;
const NUM_RETRIES = 100;
const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        none: []
    },
    {
        retry: [
            'caret'
        ]
    }
]);
const isOutside = (caret, box)=>{
    return caret.left < box.left || Math.abs(box.right - caret.left) < 1 || caret.left > box.right;
};
// Find the block and determine whether or not that block is outside. If it is outside, move up/down and right.
const inOutsideBlock = (bridge, element, caret)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(element, _ephox_robin__WEBPACK_IMPORTED_MODULE_2__.isBlock).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.never, (cell)=>{
        return _Rectangles__WEBPACK_IMPORTED_MODULE_4__.getEntireBox(bridge, cell).exists((box)=>{
            return isOutside(caret, box);
        });
    });
};
/*
 * The approach is as follows.
 *
 * The browser APIs for caret ranges return elements that are the closest text elements to your (x, y) position, even if those
 * closest elements are miles away. This causes problems when you are trying to identify what is immediately above or below
 * a cell, because often the closest text is in a cell that is in a completely different column. Therefore, the approach needs
 * to keep moving down until the thing that we are hitting is likely to be a true positive.
 *
 * Steps:
 *
 * 1. If the y position of the next guess is not different from the original, keep going.
 * 2a. If the guess box doesn't actually include the position looked for, then the browser has returned a node that does not have
 *    a rectangle which truly intercepts the point. So, keep going. Note, we used to jump straight away here, but that means that
 *    we might skip over something that wasn't considered close enough but was a better guess than just making the y value skip.
 * 2b. If the guess box exactly aligns with the caret, then adjust by 1 and go again. This is to get a more accurate offset.
 * 3. if the guess box does include the caret, but the guess box's parent cell does not *really* contain the caret, try again shifting
 *    only the x value. If the guess box's parent cell does *really* contain the caret (i.e. it is horizontally-aligned), then stop
 *    because the guess is GOOD.
 */ const adjustDown = (bridge, element, guessBox, original, caret)=>{
    const lowerCaret = _Carets__WEBPACK_IMPORTED_MODULE_5__.moveDown(caret, JUMP_SIZE);
    if (Math.abs(guessBox.bottom - original.bottom) < 1) {
        return adt.retry(lowerCaret);
    } else if (guessBox.top > caret.bottom) {
        return adt.retry(lowerCaret);
    } else if (guessBox.top === caret.bottom) {
        return adt.retry(_Carets__WEBPACK_IMPORTED_MODULE_5__.moveDown(caret, 1));
    } else {
        return inOutsideBlock(bridge, element, caret) ? adt.retry(_Carets__WEBPACK_IMPORTED_MODULE_5__.translate(lowerCaret, JUMP_SIZE, 0)) : adt.none();
    }
};
const adjustUp = (bridge, element, guessBox, original, caret)=>{
    const higherCaret = _Carets__WEBPACK_IMPORTED_MODULE_5__.moveUp(caret, JUMP_SIZE);
    if (Math.abs(guessBox.top - original.top) < 1) {
        return adt.retry(higherCaret);
    } else if (guessBox.bottom < caret.top) {
        return adt.retry(higherCaret);
    } else if (guessBox.bottom === caret.top) {
        return adt.retry(_Carets__WEBPACK_IMPORTED_MODULE_5__.moveUp(caret, 1));
    } else {
        return inOutsideBlock(bridge, element, caret) ? adt.retry(_Carets__WEBPACK_IMPORTED_MODULE_5__.translate(higherCaret, JUMP_SIZE, 0)) : adt.none();
    }
};
const upMovement = {
    point: _Carets__WEBPACK_IMPORTED_MODULE_5__.getTop,
    adjuster: adjustUp,
    move: _Carets__WEBPACK_IMPORTED_MODULE_5__.moveUp,
    gather: _ephox_phoenix__WEBPACK_IMPORTED_MODULE_6__.before
};
const downMovement = {
    point: _Carets__WEBPACK_IMPORTED_MODULE_5__.getBottom,
    adjuster: adjustDown,
    move: _Carets__WEBPACK_IMPORTED_MODULE_5__.moveDown,
    gather: _ephox_phoenix__WEBPACK_IMPORTED_MODULE_6__.after
};
const isAtTable = (bridge, x, y)=>{
    return bridge.elementFromPoint(x, y).filter((elm)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.name(elm) === 'table';
    }).isSome();
};
const adjustForTable = (bridge, movement, original, caret, numRetries)=>{
    return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);
};
const adjustTil = (bridge, movement, original, caret, numRetries)=>{
    if (numRetries === 0) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.some(caret);
    }
    if (isAtTable(bridge, caret.left, movement.point(caret))) {
        return adjustForTable(bridge, movement, original, caret, numRetries - 1);
    }
    return bridge.situsFromPoint(caret.left, movement.point(caret)).bind((guess)=>{
        return guess.start.fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.none, (element)=>{
            return _Rectangles__WEBPACK_IMPORTED_MODULE_4__.getEntireBox(bridge, element).bind((guessBox)=>{
                return movement.adjuster(bridge, element, guessBox, original, caret).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.none, (newCaret)=>{
                    return adjustTil(bridge, movement, original, newCaret, numRetries - 1);
                });
            }).orThunk(()=>{
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.some(caret);
            });
        }, _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.none);
    });
};
const checkScroll = (movement, adjusted, bridge)=>{
    // I'm not convinced that this is right. Let's re-examine it later.
    if (movement.point(adjusted) > bridge.getInnerHeight()) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.some(movement.point(adjusted) - bridge.getInnerHeight());
    } else if (movement.point(adjusted) < 0) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.some(-movement.point(adjusted));
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.Optional.none();
    }
};
const retry = (movement, bridge, caret)=>{
    const moved = movement.move(caret, JUMP_SIZE);
    const adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);
    return checkScroll(movement, adjusted, bridge).fold(()=>{
        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted));
    }, (delta)=>{
        bridge.scrollBy(0, delta);
        return bridge.situsFromPoint(adjusted.left, movement.point(adjusted) - delta);
    });
};
const Retries = {
    tryUp: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.curry(retry, upMovement),
    tryDown: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.curry(retry, downMovement),
    getJumpSize: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(JUMP_SIZE)
};


}),
"../darwin/src/main/ts/ephox/darwin/keyboard/TableKeys.ts": 
/*!****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/TableKeys.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  handle: () => (handle)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/data/Spot.ts");
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");
/* ESM import */var _navigation_BeforeAfter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../navigation/BeforeAfter */ "../darwin/src/main/ts/ephox/darwin/navigation/BeforeAfter.ts");
/* ESM import */var _navigation_BrTags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../navigation/BrTags */ "../darwin/src/main/ts/ephox/darwin/navigation/BrTags.ts");
/* ESM import */var _Carets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Carets */ "../darwin/src/main/ts/ephox/darwin/keyboard/Carets.ts");
/* ESM import */var _Rectangles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Rectangles */ "../darwin/src/main/ts/ephox/darwin/keyboard/Rectangles.ts");
/* ESM import */var _Retries__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Retries */ "../darwin/src/main/ts/ephox/darwin/keyboard/Retries.ts");









const MAX_RETRIES = 20;
const findSpot = (bridge, isRoot, direction)=>{
    return bridge.getSelection().bind((sel)=>{
        return _navigation_BrTags__WEBPACK_IMPORTED_MODULE_0__.tryBr(isRoot, sel.finish, sel.foffset, direction).fold(()=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(_ephox_phoenix__WEBPACK_IMPORTED_MODULE_2__.point(sel.finish, sel.foffset));
        }, (brNeighbour)=>{
            const range = bridge.fromSitus(brNeighbour);
            const analysis = _navigation_BeforeAfter__WEBPACK_IMPORTED_MODULE_3__.BeforeAfter.verify(bridge, sel.finish, sel.foffset, range.finish, range.foffset, direction.failure, isRoot);
            return _navigation_BrTags__WEBPACK_IMPORTED_MODULE_0__.process(analysis);
        });
    });
};
const scan = (bridge, isRoot, element, offset, direction, numRetries)=>{
    if (numRetries === 0) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
    // Firstly, move the (x, y) and see what element we end up on.
    return tryCursor(bridge, isRoot, element, offset, direction).bind((situs)=>{
        const range = bridge.fromSitus(situs);
        // Now, check to see if the element is a new cell.
        const analysis = _navigation_BeforeAfter__WEBPACK_IMPORTED_MODULE_3__.BeforeAfter.verify(bridge, element, offset, range.finish, range.foffset, direction.failure, isRoot);
        return _navigation_BeforeAfter__WEBPACK_IMPORTED_MODULE_3__.BeforeAfter.cata(analysis, ()=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        }, ()=>{
            // We have a new cell, so we stop looking.
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(situs);
        }, (cell)=>{
            if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.eq(element, cell) && offset === 0) {
                return tryAgain(bridge, element, offset, _Carets__WEBPACK_IMPORTED_MODULE_5__.moveUp, direction);
            } else {
                return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);
            }
        }, (cell)=>{
            // If we were here last time, move and try again.
            if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.eq(element, cell) && offset === _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getEnd(cell)) {
                return tryAgain(bridge, element, offset, _Carets__WEBPACK_IMPORTED_MODULE_5__.moveDown, direction);
            } else {
                return scan(bridge, isRoot, cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.getEnd(cell), direction, numRetries - 1);
            }
        });
    });
};
const tryAgain = (bridge, element, offset, move, direction)=>{
    return _Rectangles__WEBPACK_IMPORTED_MODULE_7__.getBoxAt(bridge, element, offset).bind((box)=>{
        return tryAt(bridge, direction, move(box, _Retries__WEBPACK_IMPORTED_MODULE_8__.Retries.getJumpSize()));
    });
};
const tryAt = (bridge, direction, box)=>{
    const browser = _ephox_sand__WEBPACK_IMPORTED_MODULE_9__.detect().browser;
    // NOTE: As we attempt to take over selection everywhere, we'll probably need to separate these again.
    if (browser.isChromium() || browser.isSafari() || browser.isFirefox()) {
        return direction.retry(bridge, box);
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
};
const tryCursor = (bridge, isRoot, element, offset, direction)=>{
    return _Rectangles__WEBPACK_IMPORTED_MODULE_7__.getBoxAt(bridge, element, offset).bind((box)=>{
        return tryAt(bridge, direction, box);
    });
};
const handle = (bridge, isRoot, direction)=>{
    return findSpot(bridge, isRoot, direction).bind((spot)=>{
        // There is a point to start doing box-hitting from
        return scan(bridge, isRoot, spot.element, spot.offset, direction, MAX_RETRIES).map(bridge.fromSitus);
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/keyboard/VerticalMovement.ts": 
/*!***********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/keyboard/VerticalMovement.ts ***!
  \***********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  firstUpCheck: () => (firstUpCheck),
  lastDownCheck: () => (lastDownCheck),
  navigate: () => (navigate),
  select: () => (select)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/dom/DomGather.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateExists.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");
/* ESM import */var _selection_Response__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../selection/Response */ "../darwin/src/main/ts/ephox/darwin/selection/Response.ts");
/* ESM import */var _selection_Util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../selection/Util */ "../darwin/src/main/ts/ephox/darwin/selection/Util.ts");
/* ESM import */var _KeySelection__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./KeySelection */ "../darwin/src/main/ts/ephox/darwin/keyboard/KeySelection.ts");
/* ESM import */var _TableKeys__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TableKeys */ "../darwin/src/main/ts/ephox/darwin/keyboard/TableKeys.ts");







const inSameTable = (elem, table)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.ancestor(elem, (e)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parent(e).exists((p)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(p, table);
        });
    });
};
// Note: initial is the finishing element, because that's where the cursor starts from
// Anchor is the starting element, and is only used to work out if we are in the same table
const simulate = (bridge, isRoot, direction, initial, anchor)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(initial, 'td,th', isRoot).bind((start)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(start, 'table', isRoot).bind((table)=>{
            if (!inSameTable(anchor, table)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            }
            return _TableKeys__WEBPACK_IMPORTED_MODULE_5__.handle(bridge, isRoot, direction).bind((range)=>{
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(range.finish, 'td,th', isRoot).map((finish)=>{
                    return {
                        start,
                        finish,
                        range
                    };
                });
            });
        });
    });
};
const navigate = (bridge, isRoot, direction, initial, anchor, precheck)=>{
    return precheck(initial, isRoot).orThunk(()=>{
        return simulate(bridge, isRoot, direction, initial, anchor).map((info)=>{
            const range = info.range;
            return _selection_Response__WEBPACK_IMPORTED_MODULE_6__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_selection_Util__WEBPACK_IMPORTED_MODULE_7__.makeSitus(range.start, range.soffset, range.finish, range.foffset)), true);
        });
    });
};
const firstUpCheck = (initial, isRoot)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(initial, 'tr', isRoot).bind((startRow)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(startRow, 'table', isRoot).bind((table)=>{
            const rows = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.descendants(table, 'tr');
            if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(startRow, rows[0])) {
                return _ephox_phoenix__WEBPACK_IMPORTED_MODULE_9__.seekLeft(table, (element)=>{
                    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.last(element).isSome();
                }, isRoot).map((last)=>{
                    const lastOffset = _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.getEnd(last);
                    return _selection_Response__WEBPACK_IMPORTED_MODULE_6__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_selection_Util__WEBPACK_IMPORTED_MODULE_7__.makeSitus(last, lastOffset, last, lastOffset)), true);
                });
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            }
        });
    });
};
const lastDownCheck = (initial, isRoot)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(initial, 'tr', isRoot).bind((startRow)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.closest(startRow, 'table', isRoot).bind((table)=>{
            const rows = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.descendants(table, 'tr');
            if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(startRow, rows[rows.length - 1])) {
                return _ephox_phoenix__WEBPACK_IMPORTED_MODULE_9__.seekRight(table, (element)=>{
                    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.first(element).isSome();
                }, isRoot).map((first)=>{
                    return _selection_Response__WEBPACK_IMPORTED_MODULE_6__.Response.create(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_selection_Util__WEBPACK_IMPORTED_MODULE_7__.makeSitus(first, 0, first, 0)), true);
                });
            } else {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
            }
        });
    });
};
const select = (bridge, container, isRoot, direction, initial, anchor, selectRange)=>{
    return simulate(bridge, isRoot, direction, initial, anchor).bind((info)=>{
        return _KeySelection__WEBPACK_IMPORTED_MODULE_12__.detect(container, isRoot, info.start, info.finish, selectRange);
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/mouse/MouseSelection.ts": 
/*!******************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/mouse/MouseSelection.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  MouseSelection: () => (MouseSelection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Singleton.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _selection_CellSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/CellSelection */ "../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts");



const findCell = (target, isRoot)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.closest(target, 'td,th', isRoot);
const isInEditableContext = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parentElement(cell).exists(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.isEditable);
const MouseSelection = (bridge, container, isRoot, annotations)=>{
    const cursor = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.value();
    const clearstate = cursor.clear;
    const applySelection = (event)=>{
        cursor.on((start)=>{
            annotations.clearBeforeUpdate(container);
            findCell(event.target, isRoot).each((finish)=>{
                _selection_CellSelection__WEBPACK_IMPORTED_MODULE_4__.identify(start, finish, isRoot).each((cellSel)=>{
                    const boxes = cellSel.boxes.getOr([]);
                    if (boxes.length === 1) {
                        // If a single noneditable cell is selected and the actual selection target within the cell
                        // is also noneditable, make sure it is annotated
                        const singleCell = boxes[0];
                        const isNonEditableCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getRaw(singleCell) === 'false';
                        const isCellClosestContentEditable = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.is(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.closest(event.target), singleCell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.eq);
                        if (isNonEditableCell && isCellClosestContentEditable) {
                            // Not selecting the contents or the node of the actual cell as shown below, keeping the selection on the offscreen element.
                            annotations.selectRange(container, boxes, singleCell, singleCell);
                        }
                    } else if (boxes.length > 1) {
                        // Wait until we have more than one, otherwise you can't do text selection inside a cell.
                        annotations.selectRange(container, boxes, cellSel.start, cellSel.finish);
                        // stop the browser from creating a big text selection, select the cell where the cursor is
                        bridge.selectContents(finish);
                    }
                });
            });
        });
    };
    /* Keep this as lightweight as possible when we're not in a table selection, it runs constantly */ const mousedown = (event)=>{
        annotations.clear(container);
        findCell(event.target, isRoot).filter(isInEditableContext).each(cursor.set);
    };
    /* Keep this as lightweight as possible when we're not in a table selection, it runs constantly */ const mouseover = (event)=>{
        applySelection(event);
    };
    /* Keep this as lightweight as possible when we're not in a table selection, it runs constantly */ const mouseup = (event)=>{
        // Needed as Firefox will change the selection between the mouseover and mouseup when selecting
        // just 2 cells as Firefox supports multiple selection ranges
        applySelection(event);
        clearstate();
    };
    return {
        clearstate,
        mousedown,
        mouseover,
        mouseup
    };
};


}),
"../darwin/src/main/ts/ephox/darwin/navigation/BeforeAfter.ts": 
/*!********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/navigation/BeforeAfter.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  BeforeAfter: () => (BeforeAfter)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");



const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        none: [
            'message'
        ]
    },
    {
        success: []
    },
    {
        failedUp: [
            'cell'
        ]
    },
    {
        failedDown: [
            'cell'
        ]
    }
]);
// Let's get some bounding rects, and see if they overlap (x-wise)
const isOverlapping = (bridge, before, after)=>{
    const beforeBounds = bridge.getRect(before);
    const afterBounds = bridge.getRect(after);
    return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;
};
const isRow = (elem)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(elem, 'tr');
};
const verify = (bridge, before, beforeOffset, after, afterOffset, failure, isRoot)=>{
    // Identify the cells that the before and after are in.
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(after, 'td,th', isRoot).bind((afterCell)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.closest(before, 'td,th', isRoot).map((beforeCell)=>{
            // If they are not in the same cell
            if (!_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(afterCell, beforeCell)) {
                return _ephox_robin__WEBPACK_IMPORTED_MODULE_3__.sharedOne(isRow, [
                    afterCell,
                    beforeCell
                ]).fold(()=>{
                    // No shared row, and they overlap x-wise -> success, otherwise: failed
                    return isOverlapping(bridge, beforeCell, afterCell) ? adt.success() : failure(beforeCell);
                }, (_sharedRow)=>{
                    // In the same row, so it failed.
                    return failure(beforeCell);
                });
            } else {
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(after, afterCell) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt.none('in same cell');
            }
        });
    }).getOr(adt.none('default'));
};
const cata = (subject, onNone, onSuccess, onFailedUp, onFailedDown)=>{
    return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);
};
const BeforeAfter = {
    ...adt,
    verify,
    cata
};


}),
"../darwin/src/main/ts/ephox/darwin/navigation/BrTags.ts": 
/*!***************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/navigation/BrTags.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  process: () => (process),
  tryBr: () => (tryBr)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/data/Spot.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/ElementAddress.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");
/* ESM import */var _BeforeAfter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./BeforeAfter */ "../darwin/src/main/ts/ephox/darwin/navigation/BeforeAfter.ts");




const isBr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('br');
const gatherer = (cand, gather, isRoot)=>{
    return gather(cand, isRoot).bind((target)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isText(target) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.get(target).trim().length === 0 ? gatherer(target, gather, isRoot) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(target);
    });
};
const handleBr = (isRoot, element, direction)=>{
    // 1. Has a neighbouring sibling ... position relative to neighbouring element
    // 2. Has no neighbouring sibling ... position relative to gathered element
    return direction.traverse(element).orThunk(()=>{
        return gatherer(element, direction.gather, isRoot);
    }).map(direction.relative);
};
const findBr = (element, offset)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.child(element, offset).filter(isBr).orThunk(()=>{
        // Can be either side of the br, and still be a br.
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.child(element, offset - 1).filter(isBr);
    });
};
const handleParent = (isRoot, element, offset, direction)=>{
    // 1. Has no neighbouring sibling, position relative to gathered element
    // 2. Has a neighbouring sibling, position at the neighbouring sibling with respect to parent
    return findBr(element, offset).bind((br)=>{
        return direction.traverse(br).fold(()=>{
            return gatherer(br, direction.gather, isRoot).map(direction.relative);
        }, (adjacent)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.indexInParent(adjacent).map((info)=>{
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.Situ.on(info.parent, info.index);
            });
        });
    });
};
const tryBr = (isRoot, element, offset, direction)=>{
    // Three different situations
    // 1. the br is the child, and it has a previous sibling. Use parent, index-1)
    // 2. the br is the child and it has no previous sibling, set to before the previous gather result
    // 3. the br is the element and it has a previous sibling, use parent index-1)
    // 4. the br is the element and it has no previous sibling, set to before the previous gather result.
    // 2. the element is the br itself,
    const target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);
    return target.map((tgt)=>{
        return {
            start: tgt,
            finish: tgt
        };
    });
};
const process = (analysis)=>{
    return _BeforeAfter__WEBPACK_IMPORTED_MODULE_6__.BeforeAfter.cata(analysis, (_message)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    }, ()=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    }, (cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(_ephox_phoenix__WEBPACK_IMPORTED_MODULE_7__.point(cell, 0));
    }, (cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(_ephox_phoenix__WEBPACK_IMPORTED_MODULE_7__.point(cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.getEnd(cell)));
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/navigation/KeyDirection.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/navigation/KeyDirection.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  down: () => (down),
  up: () => (up)
});
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/dom/DomGather.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");
/* ESM import */var _keyboard_Retries__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../keyboard/Retries */ "../darwin/src/main/ts/ephox/darwin/keyboard/Retries.ts");
/* ESM import */var _BeforeAfter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BeforeAfter */ "../darwin/src/main/ts/ephox/darwin/navigation/BeforeAfter.ts");




const down = {
    traverse: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.nextSibling,
    gather: _ephox_phoenix__WEBPACK_IMPORTED_MODULE_1__.after,
    relative: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.Situ.before,
    retry: _keyboard_Retries__WEBPACK_IMPORTED_MODULE_3__.Retries.tryDown,
    failure: _BeforeAfter__WEBPACK_IMPORTED_MODULE_4__.BeforeAfter.failedDown
};
const up = {
    traverse: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.prevSibling,
    gather: _ephox_phoenix__WEBPACK_IMPORTED_MODULE_1__.before,
    relative: _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.Situ.before,
    retry: _keyboard_Retries__WEBPACK_IMPORTED_MODULE_3__.Retries.tryUp,
    failure: _BeforeAfter__WEBPACK_IMPORTED_MODULE_4__.BeforeAfter.failedUp
};



}),
"../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  mergable: () => (mergable),
  selection: () => (selection),
  unmergable: () => (unmergable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/TableSelection */ "../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts");



const selection = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity;
const unmergable = (selectedCells)=>{
    const hasSpan = (elem, type)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getOpt(elem, type).exists((span)=>parseInt(span, 10) > 1);
    const hasRowOrColSpan = (elem)=>hasSpan(elem, 'rowspan') || hasSpan(elem, 'colspan');
    return selectedCells.length > 0 && _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(selectedCells, hasRowOrColSpan) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(selectedCells) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
};
const mergable = (table, selectedCells, ephemera)=>{
    if (selectedCells.length <= 1) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    } else {
        return _api_TableSelection__WEBPACK_IMPORTED_MODULE_4__.retrieveBox(table, ephemera.firstSelectedSelector, ephemera.lastSelectedSelector).map((bounds)=>({
                bounds,
                cells: selectedCells
            }));
    }
};



}),
"../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts": 
/*!*********************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/CellSelection.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getEdges: () => (getEdges),
  identify: () => (identify),
  retrieve: () => (retrieve),
  shiftSelection: () => (shiftSelection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");




const lookupTable = (container)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.ancestor(container, 'table');
};
const identify = (start, finish, isRoot)=>{
    const getIsRoot = (rootTable)=>{
        return (element)=>{
            return isRoot !== undefined && isRoot(element) || _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, rootTable);
        };
    };
    // Optimisation: If the cells are equal, it's a single cell array
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(start, finish)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
            boxes: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some([
                start
            ]),
            start,
            finish
        });
    } else {
        return lookupTable(start).bind((startTable)=>{
            return lookupTable(finish).bind((finishTable)=>{
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(startTable, finishTable)) {
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.intercepts(startTable, start, finish),
                        start,
                        finish
                    });
                } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(startTable, finishTable)) {
                    const ancestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(finish, 'td,th', getIsRoot(startTable));
                    const finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(startTable, start, startTable, finish, finishTable),
                        start,
                        finish: finishCell
                    });
                } else if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(finishTable, startTable)) {
                    const ancestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(start, 'td,th', getIsRoot(finishTable));
                    const startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                        boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(finishTable, start, startTable, finish, finishTable),
                        start,
                        finish: startCell
                    });
                } else {
                    return _ephox_robin__WEBPACK_IMPORTED_MODULE_5__.ancestors(start, finish).shared.bind((lca)=>{
                        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.closest(lca, 'table', isRoot).bind((lcaTable)=>{
                            const finishAncestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(finish, 'td,th', getIsRoot(lcaTable));
                            const finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;
                            const startAncestorCells = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.ancestors(start, 'td,th', getIsRoot(lcaTable));
                            const startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;
                            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                                boxes: _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),
                                start: startCell,
                                finish: finishCell
                            });
                        });
                    });
                }
            });
        });
    }
};
const retrieve = (container, selector)=>{
    const sels = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.descendants(container, selector);
    return sels.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(sels) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
};
const getLast = (boxes, lastSelectedSelector)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.find(boxes, (box)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.is(box, lastSelectedSelector);
    });
};
const getEdges = (container, firstSelectedSelector, lastSelectedSelector)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(container, firstSelectedSelector).bind((first)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(container, lastSelectedSelector).bind((last)=>{
            return _ephox_robin__WEBPACK_IMPORTED_MODULE_5__.sharedOne(lookupTable, [
                first,
                last
            ]).map((table)=>{
                return {
                    first,
                    last,
                    table
                };
            });
        });
    });
};
const expandTo = (finish, firstSelectedSelector)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.ancestor(finish, 'table').bind((table)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.descendant(table, firstSelectedSelector).bind((start)=>{
            return identify(start, finish).bind((identified)=>{
                return identified.boxes.map((boxes)=>{
                    return {
                        boxes,
                        start: identified.start,
                        finish: identified.finish
                    };
                });
            });
        });
    });
};
const shiftSelection = (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector)=>{
    return getLast(boxes, lastSelectedSelector).bind((last)=>{
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.moveBy(last, deltaRow, deltaColumn).bind((finish)=>{
            return expandTo(finish, firstSelectedSelector);
        });
    });
};



}),
"../darwin/src/main/ts/ephox/darwin/selection/Response.ts": 
/*!****************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/Response.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Response: () => (Response)
});
const create = (selection, kill)=>({
        selection,
        kill
    });
const Response = {
    create
};


}),
"../darwin/src/main/ts/ephox/darwin/selection/Selections.ts": 
/*!******************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/Selections.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Selections: () => (Selections)
});
/* ESM import */var _api_SelectionTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/SelectionTypes */ "../darwin/src/main/ts/ephox/darwin/api/SelectionTypes.ts");
/* ESM import */var _api_TableSelection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/TableSelection */ "../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts");


const Selections = (lazyRoot, getStart, selectedSelector)=>{
    const get = ()=>_api_TableSelection__WEBPACK_IMPORTED_MODULE_0__.retrieve(lazyRoot(), selectedSelector).fold(()=>getStart().fold(_api_SelectionTypes__WEBPACK_IMPORTED_MODULE_1__.none, _api_SelectionTypes__WEBPACK_IMPORTED_MODULE_1__.single), _api_SelectionTypes__WEBPACK_IMPORTED_MODULE_1__.multiple);
    return {
        get
    };
};


}),
"../darwin/src/main/ts/ephox/darwin/selection/Situs.ts": 
/*!*************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/Situs.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Situs: () => (Situs)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");

const create = (start, soffset, finish, foffset)=>{
    return {
        start: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.Situ.on(start, soffset),
        finish: _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.Situ.on(finish, foffset)
    };
};
const Situs = {
    create
};


}),
"../darwin/src/main/ts/ephox/darwin/selection/Util.ts": 
/*!************************************************************!*\
  !*** ../darwin/src/main/ts/ephox/darwin/selection/Util.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  convertToRange: () => (convertToRange),
  makeSitus: () => (makeSitus)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _Situs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Situs */ "../darwin/src/main/ts/ephox/darwin/selection/Situs.ts");


const convertToRange = (win, selection)=>{
    // TODO: Use API packages of sugar
    const rng = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.asLtrRange(win, selection);
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SimRange.create(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(rng.startContainer), rng.startOffset, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(rng.endContainer), rng.endOffset);
};
const makeSitus = _Situs__WEBPACK_IMPORTED_MODULE_3__.Situs.create;



}),
"../dragster/src/main/ts/ephox/dragster/api/DragApis.ts": 
/*!**************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/api/DragApis.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DragApi: () => (DragApi),
  DragMode: () => (DragMode),
  DragSink: () => (DragSink),
  api: () => (api),
  mode: () => (mode),
  sink: () => (sink)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Contracts.ts");

const DragMode = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exactly([
    'compare',
    'extract',
    'mutate',
    'sink'
]);
const DragSink = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exactly([
    'element',
    'start',
    'stop',
    'destroy'
]);
const DragApi = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exactly([
    'forceDrop',
    'drop',
    'move',
    'delayDrop'
]);
// API for backwards compatibility
const mode = DragMode;
const sink = DragSink;
const api = DragApi;



}),
"../dragster/src/main/ts/ephox/dragster/api/Dragger.ts": 
/*!*************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/api/Dragger.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  transform: () => (transform)
});
/* ESM import */var _core_Dragging__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Dragging */ "../dragster/src/main/ts/ephox/dragster/core/Dragging.ts");
/* ESM import */var _MouseDrag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MouseDrag */ "../dragster/src/main/ts/ephox/dragster/api/MouseDrag.ts");


const transform = (mutation, settings = {})=>{
    const mode = settings.mode ?? _MouseDrag__WEBPACK_IMPORTED_MODULE_0__["default"];
    return _core_Dragging__WEBPACK_IMPORTED_MODULE_1__.setup(mutation, mode, settings);
};



}),
"../dragster/src/main/ts/ephox/dragster/api/MouseDrag.ts": 
/*!***************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/api/MouseDrag.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/events/DomEvent.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _detect_Blocker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../detect/Blocker */ "../dragster/src/main/ts/ephox/dragster/detect/Blocker.ts");
/* ESM import */var _DragApis__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DragApis */ "../dragster/src/main/ts/ephox/dragster/api/DragApis.ts");




const compare = (old, nu)=>{
    return (0,_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(nu.left - old.left, nu.top - old.top);
};
const extract = (event)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some((0,_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(event.x, event.y));
};
const mutate = (mutation, info)=>{
    mutation.mutate(info.left, info.top);
};
const sink = (dragApi, settings)=>{
    const blocker = (0,_detect_Blocker__WEBPACK_IMPORTED_MODULE_2__.Blocker)(settings);
    // Included for safety. If the blocker has stayed on the screen, get rid of it on a click.
    const mdown = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.bind(blocker.element(), 'mousedown', dragApi.forceDrop);
    const mup = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.bind(blocker.element(), 'mouseup', dragApi.drop);
    const mmove = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.bind(blocker.element(), 'mousemove', dragApi.move);
    const mout = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.bind(blocker.element(), 'mouseout', dragApi.delayDrop);
    const destroy = ()=>{
        blocker.destroy();
        mup.unbind();
        mmove.unbind();
        mout.unbind();
        mdown.unbind();
    };
    const start = (parent)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.append(parent, blocker.element());
    };
    const stop = ()=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(blocker.element());
    };
    return (0,_DragApis__WEBPACK_IMPORTED_MODULE_6__.DragSink)({
        element: blocker.element,
        start,
        stop,
        destroy
    });
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_DragApis__WEBPACK_IMPORTED_MODULE_6__.DragMode)({
    compare,
    extract,
    sink,
    mutate
}));


}),
"../dragster/src/main/ts/ephox/dragster/core/Dragging.ts": 
/*!***************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/core/Dragging.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  setup: () => (setup)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Throttler.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");
/* ESM import */var _api_DragApis__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/DragApis */ "../dragster/src/main/ts/ephox/dragster/api/DragApis.ts");
/* ESM import */var _detect_Movement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../detect/Movement */ "../dragster/src/main/ts/ephox/dragster/detect/Movement.ts");




const setup = (mutation, mode, settings)=>{
    let active = false;
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__.create({
        start: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.Event)([]),
        stop: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.Event)([])
    });
    const movement = (0,_detect_Movement__WEBPACK_IMPORTED_MODULE_2__.Movement)();
    const drop = ()=>{
        sink.stop();
        if (movement.isOn()) {
            movement.off();
            events.trigger.stop();
        }
    };
    const throttledDrop = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.last(drop, 200);
    const go = (parent)=>{
        sink.start(parent);
        movement.on();
        events.trigger.start();
    };
    const mousemove = (event)=>{
        throttledDrop.cancel();
        movement.onEvent(event, mode);
    };
    movement.events.move.bind((event)=>{
        mode.mutate(mutation, event.info);
    });
    const on = ()=>{
        active = true;
    };
    const off = ()=>{
        active = false;
    // acivate some events here?
    };
    const isActive = ()=>active;
    const runIfActive = (f)=>{
        return (...args)=>{
            if (active) {
                f.apply(null, args);
            }
        };
    };
    const sink = mode.sink((0,_api_DragApis__WEBPACK_IMPORTED_MODULE_4__.DragApi)({
        // ASSUMPTION: runIfActive is not needed for mousedown. This is pretty much a safety measure for
        // inconsistent situations so that we don't block input.
        forceDrop: drop,
        drop: runIfActive(drop),
        move: runIfActive(mousemove),
        delayDrop: runIfActive(throttledDrop.throttle)
    }), settings);
    const destroy = ()=>{
        sink.destroy();
    };
    return {
        element: sink.element,
        go,
        on,
        off,
        isActive,
        destroy,
        events: events.registry
    };
};



}),
"../dragster/src/main/ts/ephox/dragster/detect/Blocker.ts": 
/*!****************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/detect/Blocker.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Blocker: () => (Blocker)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _style_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/Styles */ "../dragster/src/main/ts/ephox/dragster/style/Styles.ts");



const Blocker = (options)=>{
    const settings = {
        layerClass: _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('blocker'),
        ...options
    };
    const div = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag('div');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.set(div, 'role', 'presentation');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.set(div, 'data-mce-bogus', 'all');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.setAll(div, {
        position: 'fixed',
        left: '0px',
        top: '0px',
        width: '100%',
        height: '100%'
    });
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.add(div, _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('blocker'));
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.add(div, settings.layerClass);
    const element = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.constant(div);
    const destroy = ()=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.remove(div);
    };
    return {
        element,
        destroy
    };
};


}),
"../dragster/src/main/ts/ephox/dragster/detect/InDrag.ts": 
/*!***************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/detect/InDrag.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  InDrag: () => (InDrag)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");


const InDrag = ()=>{
    let previous = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    const reset = ()=>{
        previous = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    };
    // Return position delta between previous position and nu position,
    // or None if this is the first. Set the previous position to nu.
    const update = (mode, nu)=>{
        const result = previous.map((old)=>{
            return mode.compare(old, nu);
        });
        previous = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(nu);
        return result;
    };
    const onEvent = (event, mode)=>{
        const dataOption = mode.extract(event);
        // Dragster move events require a position delta. The moveevent is only triggered
        // on the second and subsequent dragster move events. The first is dropped.
        dataOption.each((data)=>{
            const offset = update(mode, data);
            offset.each((d)=>{
                events.trigger.move(d);
            });
        });
    };
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.create({
        move: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_2__.Event)([
            'info'
        ])
    });
    return {
        onEvent,
        reset,
        events: events.registry
    };
};


}),
"../dragster/src/main/ts/ephox/dragster/detect/Movement.ts": 
/*!*****************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/detect/Movement.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Movement: () => (Movement)
});
/* ESM import */var _InDrag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InDrag */ "../dragster/src/main/ts/ephox/dragster/detect/InDrag.ts");
/* ESM import */var _NoDrag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NoDrag */ "../dragster/src/main/ts/ephox/dragster/detect/NoDrag.ts");


const Movement = ()=>{
    const noDragState = (0,_NoDrag__WEBPACK_IMPORTED_MODULE_0__.NoDrag)();
    const inDragState = (0,_InDrag__WEBPACK_IMPORTED_MODULE_1__.InDrag)();
    let dragState = noDragState;
    const on = ()=>{
        dragState.reset();
        dragState = inDragState;
    };
    const off = ()=>{
        dragState.reset();
        dragState = noDragState;
    };
    const onEvent = (event, mode)=>{
        dragState.onEvent(event, mode);
    };
    const isOn = ()=>{
        return dragState === inDragState;
    };
    return {
        on,
        off,
        isOn,
        onEvent,
        events: inDragState.events
    };
};


}),
"../dragster/src/main/ts/ephox/dragster/detect/NoDrag.ts": 
/*!***************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/detect/NoDrag.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  NoDrag: () => (NoDrag)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");


const NoDrag = ()=>{
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__.create({
        move: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.Event)([
            'info'
        ])
    });
    return {
        onEvent: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.noop,
        reset: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.noop,
        events: events.registry
    };
};


}),
"../dragster/src/main/ts/ephox/dragster/style/Styles.ts": 
/*!**************************************************************!*\
  !*** ../dragster/src/main/ts/ephox/dragster/style/Styles.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  resolve: () => (resolve)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Namespace.ts");

const styles = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.css('ephox-dragster');
const resolve = styles.resolve;


}),
"../katamari/src/main/ts/ephox/katamari/api/Adt.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Adt.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Adt: () => (Adt)
});
/* ESM import */var _Arr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Obj__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Obj */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");



/*
 * Generates a church encoded ADT (https://en.wikipedia.org/wiki/Church_encoding)
 * For syntax and use, look at the test code.
 */ const generate = (cases)=>{
    // validation
    if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isArray(cases)) {
        throw new Error('cases must be an array');
    }
    if (cases.length === 0) {
        throw new Error('there must be at least one case');
    }
    const constructors = [];
    // adt is mutated to add the individual cases
    const adt = {};
    _Arr__WEBPACK_IMPORTED_MODULE_1__.each(cases, (acase, count)=>{
        const keys = _Obj__WEBPACK_IMPORTED_MODULE_2__.keys(acase);
        // validation
        if (keys.length !== 1) {
            throw new Error('one and only one name per case');
        }
        const key = keys[0];
        const value = acase[key];
        // validation
        if (adt[key] !== undefined) {
            throw new Error('duplicate key detected:' + key);
        } else if (key === 'cata') {
            throw new Error('cannot have a case named cata (sorry)');
        } else if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isArray(value)) {
            // this implicitly checks if acase is an object
            throw new Error('case arguments must be an array');
        }
        constructors.push(key);
        //
        // constructor for key
        //
        adt[key] = (...args)=>{
            const argLength = args.length;
            // validation
            if (argLength !== value.length) {
                throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);
            }
            const match = (branches)=>{
                const branchKeys = _Obj__WEBPACK_IMPORTED_MODULE_2__.keys(branches);
                if (constructors.length !== branchKeys.length) {
                    throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\nActual: ' + branchKeys.join(','));
                }
                const allReqd = _Arr__WEBPACK_IMPORTED_MODULE_1__.forall(constructors, (reqKey)=>{
                    return _Arr__WEBPACK_IMPORTED_MODULE_1__.contains(branchKeys, reqKey);
                });
                if (!allReqd) {
                    throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\nRequired: ' + constructors.join(', '));
                }
                return branches[key].apply(null, args);
            };
            //
            // the fold function for key
            //
            return {
                fold: (...foldArgs)=>{
                    // runtime validation
                    if (foldArgs.length !== cases.length) {
                        throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);
                    }
                    const target = foldArgs[count];
                    return target.apply(null, args);
                },
                match,
                // NOTE: Only for debugging.
                log: (label)=>{
                    // eslint-disable-next-line no-console
                    console.log(label, {
                        constructors,
                        constructor: key,
                        params: args
                    });
                }
            };
        };
    });
    return adt;
};
const Adt = {
    generate
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Arr.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Arr.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bind: () => (bind),
  chunk: () => (chunk),
  contains: () => (contains),
  difference: () => (difference),
  each: () => (each),
  eachr: () => (eachr),
  equal: () => (equal),
  exists: () => (exists),
  filter: () => (filter),
  find: () => (find),
  findIndex: () => (findIndex),
  findLastIndex: () => (findLastIndex),
  findMap: () => (findMap),
  findUntil: () => (findUntil),
  flatten: () => (flatten),
  foldl: () => (foldl),
  foldr: () => (foldr),
  forall: () => (forall),
  from: () => (from),
  get: () => (get),
  groupBy: () => (groupBy),
  head: () => (head),
  indexOf: () => (indexOf),
  last: () => (last),
  map: () => (map),
  mapToObject: () => (mapToObject),
  partition: () => (partition),
  pure: () => (pure),
  range: () => (range),
  reverse: () => (reverse),
  sort: () => (sort),
  unique: () => (unique)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");




const nativeSlice = Array.prototype.slice;
const nativeIndexOf = Array.prototype.indexOf;
const nativePush = Array.prototype.push;
const rawIndexOf = (ts, t)=>nativeIndexOf.call(ts, t);
const indexOf = (xs, x)=>{
    // The rawIndexOf method does not wrap up in an option. This is for performance reasons.
    const r = rawIndexOf(xs, x);
    return r === -1 ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(r);
};
const contains = (xs, x)=>rawIndexOf(xs, x) > -1;
const exists = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return true;
        }
    }
    return false;
};
const range = (num, f)=>{
    const r = [];
    for(let i = 0; i < num; i++){
        r.push(f(i));
    }
    return r;
};
// It's a total micro optimisation, but these do make some difference.
// Particularly for browsers other than Chrome.
// - length caching
// http://jsperf.com/browser-diet-jquery-each-vs-for-loop/69
// - not using push
// http://jsperf.com/array-direct-assignment-vs-push/2
const chunk = (array, size)=>{
    const r = [];
    for(let i = 0; i < array.length; i += size){
        const s = nativeSlice.call(array, i, i + size);
        r.push(s);
    }
    return r;
};
const map = (xs, f)=>{
    // pre-allocating array size when it's guaranteed to be known
    // http://jsperf.com/push-allocated-vs-dynamic/22
    const len = xs.length;
    const r = new Array(len);
    for(let i = 0; i < len; i++){
        const x = xs[i];
        r[i] = f(x, i);
    }
    return r;
};
// Unwound implementing other functions in terms of each.
// The code size is roughly the same, and it should allow for better optimisation.
// const each = function<T, U>(xs: T[], f: (x: T, i?: number, xs?: T[]) => void): void {
const each = (xs, f)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        f(x, i);
    }
};
const eachr = (xs, f)=>{
    for(let i = xs.length - 1; i >= 0; i--){
        const x = xs[i];
        f(x, i);
    }
};
const partition = (xs, pred)=>{
    const pass = [];
    const fail = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        const arr = pred(x, i) ? pass : fail;
        arr.push(x);
    }
    return {
        pass,
        fail
    };
};
const filter = (xs, pred)=>{
    const r = [];
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            r.push(x);
        }
    }
    return r;
};
/*
 * Groups an array into contiguous arrays of like elements. Whether an element is like or not depends on f.
 *
 * f is a function that derives a value from an element - e.g. true or false, or a string.
 * Elements are like if this function generates the same value for them (according to ===).
 *
 *
 * Order of the elements is preserved. Arr.flatten() on the result will return the original list, as with Haskell groupBy function.
 *  For a good explanation, see the group function (which is a special case of groupBy)
 *  http://hackage.haskell.org/package/base-4.7.0.0/docs/Data-List.html#v:group
 */ const groupBy = (xs, f)=>{
    if (xs.length === 0) {
        return [];
    } else {
        let wasType = f(xs[0]); // initial case for matching
        const r = [];
        let group = [];
        for(let i = 0, len = xs.length; i < len; i++){
            const x = xs[i];
            const type = f(x);
            if (type !== wasType) {
                r.push(group);
                group = [];
            }
            wasType = type;
            group.push(x);
        }
        if (group.length !== 0) {
            r.push(group);
        }
        return r;
    }
};
const foldr = (xs, f, acc)=>{
    eachr(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const foldl = (xs, f, acc)=>{
    each(xs, (x, i)=>{
        acc = f(acc, x, i);
    });
    return acc;
};
const findUntil = (xs, pred, until)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(x);
        } else if (until(x, i)) {
            break;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const find = (xs, pred)=>{
    return findUntil(xs, pred, _Fun__WEBPACK_IMPORTED_MODULE_1__.never);
};
const findIndex = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (pred(x, i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const findLastIndex = (arr, pred)=>{
    for(let i = arr.length - 1; i >= 0; i--){
        if (pred(arr[i], i)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(i);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const flatten = (xs)=>{
    // Note, this is possible because push supports multiple arguments:
    // http://jsperf.com/concat-push/6
    // Note that in the past, concat() would silently work (very slowly) for array-like objects.
    // With this change it will throw an error.
    const r = [];
    for(let i = 0, len = xs.length; i < len; ++i){
        // Ensure that each value is an array itself
        if (!_Type__WEBPACK_IMPORTED_MODULE_2__.isArray(xs[i])) {
            throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);
        }
        nativePush.apply(r, xs[i]);
    }
    return r;
};
const bind = (xs, f)=>flatten(map(xs, f));
const forall = (xs, pred)=>{
    for(let i = 0, len = xs.length; i < len; ++i){
        const x = xs[i];
        if (pred(x, i) !== true) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_3__.eqArray(eq).eq(a1, a2);
const reverse = (xs)=>{
    const r = nativeSlice.call(xs, 0);
    r.reverse();
    return r;
};
const difference = (a1, a2)=>filter(a1, (x)=>!contains(a2, x));
const mapToObject = (xs, f)=>{
    const r = {};
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        r[String(x)] = f(x, i);
    }
    return r;
};
const pure = (x)=>[
        x
    ];
const sort = (xs, comparator)=>{
    const copy = nativeSlice.call(xs, 0);
    copy.sort(comparator);
    return copy;
};
const get = (xs, i)=>i >= 0 && i < xs.length ? _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.some(xs[i]) : _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
const head = (xs)=>get(xs, 0);
const last = (xs)=>get(xs, xs.length - 1);
const from = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(Array.from) ? Array.from : (x)=>nativeSlice.call(x);
const findMap = (arr, f)=>{
    for(let i = 0; i < arr.length; i++){
        const r = f(arr[i], i);
        if (r.isSome()) {
            return r;
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const unique = (xs, comparator)=>{
    const r = [];
    const isDuplicated = _Type__WEBPACK_IMPORTED_MODULE_2__.isFunction(comparator) ? (x)=>exists(r, (i)=>comparator(i, x)) : (x)=>contains(r, x);
    for(let i = 0, len = xs.length; i < len; i++){
        const x = xs[i];
        if (!isDuplicated(x)) {
            r.push(x);
        }
    }
    return r;
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Cell.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Cell.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Cell: () => (Cell)
});
const Cell = (initial)=>{
    let value = initial;
    const get = ()=>{
        return value;
    };
    const set = (v)=>{
        value = v;
    };
    return {
        get,
        set
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Contracts.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Contracts.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ensure: () => (ensure),
  ensureWith: () => (ensureWith),
  exactly: () => (exactly)
});
/* ESM import */var _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/BagUtils */ "../katamari/src/main/ts/ephox/katamari/util/BagUtils.ts");
/* ESM import */var _Arr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Obj__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Obj */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");





// Ensure that the object has all required fields. They must be functions.
const base = (handleUnsupported, required)=>{
    return baseWith(handleUnsupported, required, {
        validate: _Type__WEBPACK_IMPORTED_MODULE_0__.isFunction,
        label: 'function'
    });
};
// Ensure that the object has all required fields. They must satisy predicates.
const baseWith = (handleUnsupported, required, pred)=>{
    if (required.length === 0) {
        throw new Error('You must specify at least one required field.');
    }
    _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__.validateStrArr('required', required);
    _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__.checkDupes(required);
    return (obj)=>{
        const keys = _Obj__WEBPACK_IMPORTED_MODULE_2__.keys(obj);
        // Ensure all required keys are present.
        const allReqd = _Arr__WEBPACK_IMPORTED_MODULE_3__.forall(required, (req)=>{
            return _Arr__WEBPACK_IMPORTED_MODULE_3__.contains(keys, req);
        });
        if (!allReqd) {
            _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__.reqMessage(required, keys);
        }
        handleUnsupported(required, keys);
        const invalidKeys = _Arr__WEBPACK_IMPORTED_MODULE_3__.filter(required, (key)=>{
            return !pred.validate(obj[key], key);
        });
        if (invalidKeys.length > 0) {
            _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__.invalidTypeMessage(invalidKeys, pred.label);
        }
        return obj;
    };
};
const handleExact = (required, keys)=>{
    const unsupported = _Arr__WEBPACK_IMPORTED_MODULE_3__.filter(keys, (key)=>{
        return !_Arr__WEBPACK_IMPORTED_MODULE_3__.contains(required, key);
    });
    if (unsupported.length > 0) {
        _util_BagUtils__WEBPACK_IMPORTED_MODULE_1__.unsuppMessage(unsupported);
    }
};
const allowExtra = _Fun__WEBPACK_IMPORTED_MODULE_4__.noop;
const exactly = (required)=>base(handleExact, required);
const ensure = (required)=>base(allowExtra, required);
const ensureWith = (required, condition)=>baseWith(allowExtra, required, condition);


}),
"../katamari/src/main/ts/ephox/katamari/api/Fun.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Fun.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  always: () => (always),
  apply: () => (apply),
  call: () => (call),
  compose: () => (compose),
  compose1: () => (compose1),
  constant: () => (constant),
  curry: () => (curry),
  die: () => (die),
  identity: () => (identity),
  never: () => (never),
  noarg: () => (noarg),
  noop: () => (noop),
  not: () => (not),
  pipe: () => (pipe),
  tripleEquals: () => (tripleEquals),
  weaken: () => (weaken)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

const noop = ()=>{};
const noarg = (f)=>()=>f();
/** Compose a unary function with an n-ary function */ const compose = (fa, fb)=>{
    return (...args)=>{
        return fa(fb.apply(null, args));
    };
};
/** Compose two unary functions. Similar to compose, but avoids using Function.prototype.apply. */ const compose1 = (fbc, fab)=>(a)=>fbc(fab(a));
const constant = (value)=>{
    return ()=>{
        return value;
    };
};
const identity = (x)=>{
    return x;
};
const tripleEquals = (a, b)=>{
    return a === b;
};
function curry(fn, ...initialArgs) {
    return (...restArgs)=>{
        const all = initialArgs.concat(restArgs);
        return fn.apply(null, all);
    };
}
const not = (f)=>(t)=>!f(t);
const die = (msg)=>{
    return ()=>{
        throw new Error(msg);
    };
};
const apply = (f)=>{
    return f();
};
const call = (f)=>{
    f();
};
const never = constant(false);
const always = constant(true);
/* Used to weaken types */ const weaken = (b)=>b;
const pipe = (a, ab, bc, cd, de, ef, fg, gh)=>{
    const b = ab(a);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(bc)) {
        return b;
    }
    const c = bc(b);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(cd)) {
        return c;
    }
    const d = cd(c);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(de)) {
        return d;
    }
    const e = de(d);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(ef)) {
        return e;
    }
    const f = ef(e);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(fg)) {
        return f;
    }
    const g = fg(f);
    if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNullable(gh)) {
        return g;
    }
    return gh(g);
};



}),
"../katamari/src/main/ts/ephox/katamari/api/Global.ts": 
/*!************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Global.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Global: () => (Global)
});
// Use window object as the global if it's available since CSP will block script evals
// eslint-disable-next-line @typescript-eslint/no-implied-eval
const Global = typeof window !== 'undefined' ? window : Function('return this;')();


}),
"../katamari/src/main/ts/ephox/katamari/api/Namespace.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Namespace.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  css: () => (css)
});
// This API is intended to give the capability to return namespaced strings.
// For CSS, since dots are not valid class names, the dots are turned into dashes.
const css = (namespace)=>{
    const dashNamespace = namespace.replace(/\./g, '-');
    const resolve = (str)=>{
        return dashNamespace + '-' + str;
    };
    return {
        resolve
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Obj.ts": 
/*!*********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Obj.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bifilter: () => (bifilter),
  each: () => (each),
  equal: () => (equal),
  filter: () => (filter),
  find: () => (find),
  get: () => (get),
  has: () => (has),
  hasNonNullableKey: () => (hasNonNullableKey),
  hasOwnProperty: () => (hasOwnProperty),
  isEmpty: () => (isEmpty),
  keys: () => (keys),
  map: () => (map),
  mapToArray: () => (mapToArray),
  size: () => (size),
  tupleMap: () => (tupleMap),
  values: () => (values)
});
/* ESM import */var _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/dispute */ "../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



// There are many variations of Object iteration that are faster than the 'for-in' style:
// http://jsperf.com/object-keys-iteration/107
//
// Use the native keys if it is available (IE9+), otherwise fall back to manually filtering
const keys = Object.keys;
const hasOwnProperty = Object.hasOwnProperty;
const each = (obj, f)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        f(x, i);
    }
};
const map = (obj, f)=>{
    return tupleMap(obj, (x, i)=>({
            k: i,
            v: f(x, i)
        }));
};
const tupleMap = (obj, f)=>{
    const r = {};
    each(obj, (x, i)=>{
        const tuple = f(x, i);
        r[tuple.k] = tuple.v;
    });
    return r;
};
const objAcc = (r)=>(x, i)=>{
        r[i] = x;
    };
const internalFilter = (obj, pred, onTrue, onFalse)=>{
    each(obj, (x, i)=>{
        (pred(x, i) ? onTrue : onFalse)(x, i);
    });
};
const bifilter = (obj, pred)=>{
    const t = {};
    const f = {};
    internalFilter(obj, pred, objAcc(t), objAcc(f));
    return {
        t,
        f
    };
};
const filter = (obj, pred)=>{
    const t = {};
    internalFilter(obj, pred, objAcc(t), _Fun__WEBPACK_IMPORTED_MODULE_0__.noop);
    return t;
};
const mapToArray = (obj, f)=>{
    const r = [];
    each(obj, (value, name)=>{
        r.push(f(value, name));
    });
    return r;
};
const find = (obj, pred)=>{
    const props = keys(obj);
    for(let k = 0, len = props.length; k < len; k++){
        const i = props[k];
        const x = obj[i];
        if (pred(x, i, obj)) {
            return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(x);
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const values = (obj)=>{
    return mapToArray(obj, _Fun__WEBPACK_IMPORTED_MODULE_0__.identity);
};
const size = (obj)=>{
    return keys(obj).length;
};
const get = (obj, key)=>{
    return has(obj, key) ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.from(obj[key]) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const has = (obj, key)=>hasOwnProperty.call(obj, key);
const hasNonNullableKey = (obj, key)=>has(obj, key) && obj[key] !== undefined && obj[key] !== null;
const isEmpty = (r)=>{
    for(const x in r){
        if (hasOwnProperty.call(r, x)) {
            return false;
        }
    }
    return true;
};
const equal = (a1, a2, eq = _ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqAny)=>_ephox_dispute__WEBPACK_IMPORTED_MODULE_2__.eqRecord(eq).eq(a1, a2);


}),
"../katamari/src/main/ts/ephox/katamari/api/Optional.ts": 
/*!**************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Optional.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Optional: () => (Optional)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

/**
 * The `Optional` type represents a value (of any type) that potentially does
 * not exist. Any `Optional<T>` can either be a `Some<T>` (in which case the
 * value does exist) or a `None` (in which case the value does not exist). This
 * module defines a whole lot of FP-inspired utility functions for dealing with
 * `Optional` objects.
 *
 * Comparison with null or undefined:
 * - We don't get fancy null coalescing operators with `Optional`
 * - We do get fancy helper functions with `Optional`
 * - `Optional` support nesting, and allow for the type to still be nullable (or
 * another `Optional`)
 * - There is no option to turn off strict-optional-checks like there is for
 * strict-null-checks
 */ class Optional {
    tag;
    value;
    // Sneaky optimisation: every instance of Optional.none is identical, so just
    // reuse the same object
    static singletonNone = new Optional(false);
    // The internal representation has a `tag` and a `value`, but both are
    // private: able to be console.logged, but not able to be accessed by code
    constructor(tag, value){
        this.tag = tag;
        this.value = value;
    }
    // --- Identities ---
    /**
   * Creates a new `Optional<T>` that **does** contain a value.
   */ static some(value) {
        return new Optional(true, value);
    }
    /**
   * Create a new `Optional<T>` that **does not** contain a value. `T` can be
   * any type because we don't actually have a `T`.
   */ static none() {
        return Optional.singletonNone;
    }
    /**
   * Perform a transform on an `Optional` type. Regardless of whether this
   * `Optional` contains a value or not, `fold` will return a value of type `U`.
   * If this `Optional` does not contain a value, the `U` will be created by
   * calling `onNone`. If this `Optional` does contain a value, the `U` will be
   * created by calling `onSome`.
   *
   * For the FP enthusiasts in the room, this function:
   * 1. Could be used to implement all of the functions below
   * 2. Forms a catamorphism
   */ fold(onNone, onSome) {
        if (this.tag) {
            return onSome(this.value);
        } else {
            return onNone();
        }
    }
    /**
   * Determine if this `Optional` object contains a value.
   */ isSome() {
        return this.tag;
    }
    /**
   * Determine if this `Optional` object **does not** contain a value.
   */ isNone() {
        return !this.tag;
    }
    // --- Functor (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value. If
   * you provide a function to turn a T into a U, this is the function you use
   * to turn an `Optional<T>` into an `Optional<U>`. If this **does** contain
   * a value then the output will also contain a value (that value being the
   * output of `mapper(this.value)`), and if this **does not** contain a value
   * then neither will the output.
   */ map(mapper) {
        if (this.tag) {
            return Optional.some(mapper(this.value));
        } else {
            return Optional.none();
        }
    }
    // --- Monad (name stolen from Haskell / maths) ---
    /**
   * Perform a transform on an `Optional` object, **if** there is a value.
   * Unlike `map`, here the transform itself also returns an `Optional`.
   */ bind(binder) {
        if (this.tag) {
            return binder(this.value);
        } else {
            return Optional.none();
        }
    }
    // --- Traversable (name stolen from Haskell / maths) ---
    /**
   * For a given predicate, this function finds out if there **exists** a value
   * inside this `Optional` object that meets the predicate. In practice, this
   * means that for `Optional`s that do not contain a value it returns false (as
   * no predicate-meeting value exists).
   */ exists(predicate) {
        return this.tag && predicate(this.value);
    }
    /**
   * For a given predicate, this function finds out if **all** the values inside
   * this `Optional` object meet the predicate. In practice, this means that
   * for `Optional`s that do not contain a value it returns true (as all 0
   * objects do meet the predicate).
   */ forall(predicate) {
        return !this.tag || predicate(this.value);
    }
    filter(predicate) {
        if (!this.tag || predicate(this.value)) {
            return this;
        } else {
            return Optional.none();
        }
    }
    // --- Getters ---
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.
   */ getOr(replacement) {
        return this.tag ? this.value : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value.  Unlike `getOr`, in this method the `replacement` object is also
   * `Optional` - meaning that this method will always return an `Optional`.
   */ or(replacement) {
        return this.tag ? this : replacement;
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided `Optional` object does not contain a
   * value. Unlike `getOr`, in this method the `replacement` value is
   * "thunked" - that is to say that you don't pass a value to `getOrThunk`, you
   * pass a function which (if called) will **return** the `value` you want to
   * use.
   */ getOrThunk(thunk) {
        return this.tag ? this.value : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, using a default
   * `replacement` value if the provided Optional object does not contain a
   * value.
   *
   * Unlike `or`, in this method the `replacement` value is "thunked" - that is
   * to say that you don't pass a value to `orThunk`, you pass a function which
   * (if called) will **return** the `value` you want to use.
   *
   * Unlike `getOrThunk`, in this method the `replacement` value is also
   * `Optional`, meaning that this method will always return an `Optional`.
   */ orThunk(thunk) {
        return this.tag ? this : thunk();
    }
    /**
   * Get the value out of the inside of the `Optional` object, throwing an
   * exception if the provided `Optional` object does not contain a value.
   *
   * WARNING:
   * You should only be using this function if you know that the `Optional`
   * object **is not** empty (otherwise you're throwing exceptions in production
   * code, which is bad).
   *
   * In tests this is more acceptable.
   *
   * Prefer other methods to this, such as `.each`.
   */ getOrDie(message) {
        if (!this.tag) {
            throw new Error(message ?? 'Called getOrDie on None');
        } else {
            return this.value;
        }
    }
    // --- Interop with null and undefined ---
    /**
   * Creates an `Optional` value from a nullable (or undefined-able) input.
   * Null, or undefined, is converted to `None`, and anything else is converted
   * to `Some`.
   */ static from(value) {
        return _Type__WEBPACK_IMPORTED_MODULE_0__.isNonNullable(value) ? Optional.some(value) : Optional.none();
    }
    /**
   * Converts an `Optional` to a nullable type, by getting the value if it
   * exists, or returning `null` if it does not.
   */ getOrNull() {
        return this.tag ? this.value : null;
    }
    /**
   * Converts an `Optional` to an undefined-able type, by getting the value if
   * it exists, or returning `undefined` if it does not.
   */ getOrUndefined() {
        return this.value;
    }
    // --- Utilities ---
    /**
   * If the `Optional` contains a value, perform an action on that value.
   * Unlike the rest of the methods on this type, `.each` has side-effects. If
   * you want to transform an `Optional<T>` **into** something, then this is not
   * the method for you. If you want to use an `Optional<T>` to **do**
   * something, then this is the method for you - provided you're okay with not
   * doing anything in the case where the `Optional` doesn't have a value inside
   * it. If you're not sure whether your use-case fits into transforming
   * **into** something or **doing** something, check whether it has a return
   * value. If it does, you should be performing a transform.
   */ each(worker) {
        if (this.tag) {
            worker(this.value);
        }
    }
    /**
   * Turn the `Optional` object into an array that contains all of the values
   * stored inside the `Optional`. In practice, this means the output will have
   * either 0 or 1 elements.
   */ toArray() {
        return this.tag ? [
            this.value
        ] : [];
    }
    /**
   * Turn the `Optional` object into a string for debugging or printing. Not
   * recommended for production code, but good for debugging. Also note that
   * these days an `Optional` object can be logged to the console directly, and
   * its inner value (if it exists) will be visible.
   */ toString() {
        return this.tag ? `some(${this.value})` : 'none()';
    }
}


}),
"../katamari/src/main/ts/ephox/katamari/api/Optionals.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Optionals.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bindFrom: () => (bindFrom),
  cat: () => (cat),
  equals: () => (equals),
  findMap: () => (findMap),
  flatten: () => (flatten),
  is: () => (is),
  lift2: () => (lift2),
  lift3: () => (lift3),
  lift4: () => (lift4),
  lift5: () => (lift5),
  mapFrom: () => (mapFrom),
  sequence: () => (sequence),
  someIf: () => (someIf),
  traverse: () => (traverse)
});
/* ESM import */var _Arr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



/**
 * **Is** the value stored inside this Optional object equal to `rhs`?
 */ const is = (lhs, rhs, comparator = _Fun__WEBPACK_IMPORTED_MODULE_0__.tripleEquals)=>lhs.exists((left)=>comparator(left, rhs));
/**
 * Are these two Optional objects equal? Equality here means either they're both
 * `Some` (and the values are equal under the comparator) or they're both `None`.
 */ const equals = (lhs, rhs, comparator = _Fun__WEBPACK_IMPORTED_MODULE_0__.tripleEquals)=>lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());
const cat = (arr)=>{
    const r = [];
    const push = (x)=>{
        r.push(x);
    };
    for(let i = 0; i < arr.length; i++){
        arr[i].each(push);
    }
    return r;
};
const sequence = (arr)=>{
    const r = [];
    for(let i = 0; i < arr.length; i++){
        const x = arr[i];
        if (x.isSome()) {
            r.push(x.getOrDie());
        } else {
            return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        }
    }
    return _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(r);
};
/** @deprecated Use Arr.findMap instead. */ const findMap = _Arr__WEBPACK_IMPORTED_MODULE_2__.findMap;
/** Map each element of an array to an Optional and collect the results.
 *  If all results are "some", return Optional.some of the results.
 *  If any result is "none", return Optional.none
 */ const traverse = (arr, f)=>sequence(_Arr__WEBPACK_IMPORTED_MODULE_2__.map(arr, f));
/*
Notes on the lift functions:
- We used to have a generic liftN, but we were concerned about its type-safety, and the below variants were faster in microbenchmarks.
- The getOrDie calls are partial functions, but are checked beforehand. This is faster and more convenient (but less safe) than folds.
- && is used instead of a loop for simplicity and performance.
*/ const lift2 = (oa, ob, f)=>oa.isSome() && ob.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift3 = (oa, ob, oc, f)=>oa.isSome() && ob.isSome() && oc.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift4 = (oa, ob, oc, od, f)=>oa.isSome() && ob.isSome() && oc.isSome() && od.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie(), od.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const lift5 = (oa, ob, oc, od, oe, f)=>oa.isSome() && ob.isSome() && oc.isSome() && od.isSome() && oe.isSome() ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie(), od.getOrDie(), oe.getOrDie())) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const mapFrom = (a, f)=>a !== undefined && a !== null ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(f(a)) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const bindFrom = (a, f)=>a !== undefined && a !== null ? f(a) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
const flatten = (oot)=>oot.bind(_Fun__WEBPACK_IMPORTED_MODULE_0__.identity);
// This can help with type inference, by specifying the type param on the none case, so the caller doesn't have to.
const someIf = (b, a)=>b ? _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(a) : _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none();


}),
"../katamari/src/main/ts/ephox/katamari/api/Resolve.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Resolve.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  forge: () => (forge),
  namespace: () => (namespace),
  path: () => (path),
  resolve: () => (resolve),
  step: () => (step)
});
/* ESM import */var _Global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Global */ "../katamari/src/main/ts/ephox/katamari/api/Global.ts");

/** path :: ([String], JsObj?) -> JsObj */ const path = (parts, scope)=>{
    let o = scope !== undefined && scope !== null ? scope : _Global__WEBPACK_IMPORTED_MODULE_0__.Global;
    for(let i = 0; i < parts.length && o !== undefined && o !== null; ++i){
        o = o[parts[i]];
    }
    return o;
};
/** resolve :: (String, JsObj?) -> JsObj */ const resolve = (p, scope)=>{
    const parts = p.split('.');
    return path(parts, scope);
};
/** step :: (JsObj, String) -> JsObj */ const step = (o, part)=>{
    if (o[part] === undefined || o[part] === null) {
        o[part] = {};
    }
    return o[part];
};
/** forge :: ([String], JsObj?) -> JsObj */ const forge = (parts, target)=>{
    let o = target !== undefined ? target : _Global__WEBPACK_IMPORTED_MODULE_0__.Global;
    for(let i = 0; i < parts.length; ++i){
        o = step(o, parts[i]);
    }
    return o;
};
/** namespace :: (String, JsObj?) -> JsObj */ const namespace = (name, target)=>{
    const parts = name.split('.');
    return forge(parts, target);
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Result.ts": 
/*!************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Result.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Result: () => (Result)
});
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");


/**
 * Creates a new `Result<T, E>` that **does** contain a value.
 */ const value = (value)=>{
    const applyHelper = (fn)=>fn(value);
    const constHelper = _Fun__WEBPACK_IMPORTED_MODULE_0__.constant(value);
    const outputHelper = ()=>output;
    const output = {
        // Debug info
        tag: true,
        inner: value,
        // Actual Result methods
        fold: (_onError, onValue)=>onValue(value),
        isValue: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        isError: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        map: (mapper)=>Result.value(mapper(value)),
        mapError: outputHelper,
        bind: applyHelper,
        exists: applyHelper,
        forall: applyHelper,
        getOr: constHelper,
        or: outputHelper,
        getOrThunk: constHelper,
        orThunk: outputHelper,
        getOrDie: constHelper,
        each: (fn)=>{
            // Can't write the function inline because we don't want to return something by mistake
            fn(value);
        },
        toOptional: ()=>_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(value)
    };
    return output;
};
/**
 * Creates a new `Result<T, E>` that **does not** contain a value, and therefore
 * contains an error.
 */ const error = (error)=>{
    const outputHelper = ()=>output;
    const output = {
        // Debug info
        tag: false,
        inner: error,
        // Actual Result methods
        fold: (onError, _onValue)=>onError(error),
        isValue: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        isError: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        map: outputHelper,
        mapError: (mapper)=>Result.error(mapper(error)),
        bind: outputHelper,
        exists: _Fun__WEBPACK_IMPORTED_MODULE_0__.never,
        forall: _Fun__WEBPACK_IMPORTED_MODULE_0__.always,
        getOr: _Fun__WEBPACK_IMPORTED_MODULE_0__.identity,
        or: _Fun__WEBPACK_IMPORTED_MODULE_0__.identity,
        getOrThunk: _Fun__WEBPACK_IMPORTED_MODULE_0__.apply,
        orThunk: _Fun__WEBPACK_IMPORTED_MODULE_0__.apply,
        getOrDie: _Fun__WEBPACK_IMPORTED_MODULE_0__.die(String(error)),
        each: _Fun__WEBPACK_IMPORTED_MODULE_0__.noop,
        toOptional: _Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none
    };
    return output;
};
/**
 * Creates a new `Result<T, E>` from an `Optional<T>` and an `E`. If the
 * `Optional` contains a value, so will the outputted `Result`. If it does not,
 * the outputted `Result` will contain an error (and that error will be the
 * error passed in).
 */ const fromOption = (optional, err)=>optional.fold(()=>error(err), value);
const Result = {
    value,
    error,
    fromOption
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Singleton.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Singleton.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  api: () => (api),
  destroyable: () => (destroyable),
  repeatable: () => (repeatable),
  unbindable: () => (unbindable),
  value: () => (value)
});
/* ESM import */var _Cell__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Cell */ "../katamari/src/main/ts/ephox/katamari/api/Cell.ts");
/* ESM import */var _Fun__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Fun */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");



const singleton = (doRevoke)=>{
    const subject = (0,_Cell__WEBPACK_IMPORTED_MODULE_0__.Cell)(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    const revoke = ()=>subject.get().each(doRevoke);
    const clear = ()=>{
        revoke();
        subject.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    };
    const isSet = ()=>subject.get().isSome();
    const get = ()=>subject.get();
    const set = (s)=>{
        revoke();
        subject.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(s));
    };
    return {
        clear,
        isSet,
        get,
        set
    };
};
const repeatable = (delay)=>{
    const intervalId = (0,_Cell__WEBPACK_IMPORTED_MODULE_0__.Cell)(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    const revoke = ()=>intervalId.get().each((id)=>clearInterval(id));
    const clear = ()=>{
        revoke();
        intervalId.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.none());
    };
    const isSet = ()=>intervalId.get().isSome();
    const get = ()=>intervalId.get();
    const set = (functionToRepeat)=>{
        revoke();
        intervalId.set(_Optional__WEBPACK_IMPORTED_MODULE_1__.Optional.some(setInterval(functionToRepeat, delay)));
    };
    return {
        clear,
        isSet,
        get,
        set
    };
};
const destroyable = ()=>singleton((s)=>s.destroy());
const unbindable = ()=>singleton((s)=>s.unbind());
const api = ()=>{
    const subject = destroyable();
    const run = (f)=>subject.get().each(f);
    return {
        ...subject,
        run
    };
};
const value = ()=>{
    const subject = singleton(_Fun__WEBPACK_IMPORTED_MODULE_2__.noop);
    const on = (f)=>subject.get().each(f);
    return {
        ...subject,
        on
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Strings.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Strings.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  capitalize: () => (capitalize),
  contains: () => (contains),
  endsWith: () => (endsWith),
  ensureLeading: () => (ensureLeading),
  ensureTrailing: () => (ensureTrailing),
  fromCodePoint: () => (fromCodePoint),
  isEmpty: () => (isEmpty),
  isNotEmpty: () => (isNotEmpty),
  lTrim: () => (lTrim),
  rTrim: () => (rTrim),
  removeLeading: () => (removeLeading),
  removeTrailing: () => (removeTrailing),
  repeat: () => (repeat),
  startsWith: () => (startsWith),
  supplant: () => (supplant),
  toFloat: () => (toFloat),
  toInt: () => (toInt),
  trim: () => (trim)
});
/* ESM import */var _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../str/StrAppend */ "../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts");
/* ESM import */var _Optional__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Optional */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");



const checkRange = (str, substr, start)=>substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;
/** Given a string and object, perform template-replacements on the string, as specified by the object.
 * Any template fields of the form ${name} are replaced by the string or number specified as obj["name"]
 * Based on Douglas Crockford's 'supplant' method for template-replace of strings. Uses different template format.
 */ const supplant = (str, obj)=>{
    const isStringOrNumber = (a)=>{
        const t = typeof a;
        return t === 'string' || t === 'number';
    };
    return str.replace(/\$\{([^{}]*)\}/g, (fullMatch, key)=>{
        const value = obj[key];
        return isStringOrNumber(value) ? value.toString() : fullMatch;
    });
};
const removeLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromStart(str, prefix.length) : str;
};
const removeTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.removeFromEnd(str, suffix.length) : str;
};
const ensureLeading = (str, prefix)=>{
    return startsWith(str, prefix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToStart(str, prefix);
};
const ensureTrailing = (str, suffix)=>{
    return endsWith(str, suffix) ? str : _str_StrAppend__WEBPACK_IMPORTED_MODULE_0__.addToEnd(str, suffix);
};
const contains = (str, substr, start = 0, end)=>{
    const idx = str.indexOf(substr, start);
    if (idx !== -1) {
        return _Type__WEBPACK_IMPORTED_MODULE_1__.isUndefined(end) ? true : idx + substr.length <= end;
    } else {
        return false;
    }
};
const capitalize = (str)=>{
    return str === '' ? '' : str.charAt(0).toUpperCase() + str.substring(1);
};
/** Does 'str' start with 'prefix'?
 *  Note: all strings start with the empty string.
 *        More formally, for all strings x, startsWith(x, "").
 *        This is so that for all strings x and y, startsWith(y + x, y)
 */ const startsWith = (str, prefix)=>{
    return checkRange(str, prefix, 0);
};
/** Does 'str' end with 'suffix'?
 *  Note: all strings end with the empty string.
 *        More formally, for all strings x, endsWith(x, "").
 *        This is so that for all strings x and y, endsWith(x + y, y)
 */ const endsWith = (str, suffix)=>{
    return checkRange(str, suffix, str.length - suffix.length);
};
const blank = (r)=>(s)=>s.replace(r, '');
/** removes all leading and trailing spaces */ const trim = blank(/^\s+|\s+$/g);
const lTrim = blank(/^\s+/g);
const rTrim = blank(/\s+$/g);
const isNotEmpty = (s)=>s.length > 0;
const isEmpty = (s)=>!isNotEmpty(s);
const repeat = (s, count)=>count <= 0 ? '' : new Array(count + 1).join(s);
const fromCodePoint = String.fromCodePoint;
const toInt = (value, radix = 10)=>{
    const num = parseInt(value, radix);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};
const toFloat = (value)=>{
    const num = parseFloat(value);
    return isNaN(num) ? _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _Optional__WEBPACK_IMPORTED_MODULE_2__.Optional.some(num);
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Throttler.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Throttler.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  adaptable: () => (adaptable),
  first: () => (first),
  last: () => (last)
});
/* ESM import */var _Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

// Run a function fn after rate ms. If another invocation occurs
// during the time it is waiting, update the arguments f will run
// with (but keep the current schedule)
const adaptable = (fn, rate)=>{
    let timer = null;
    let args = null;
    const cancel = ()=>{
        if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isNull(timer)) {
            clearTimeout(timer);
            timer = null;
            args = null;
        }
    };
    const throttle = (...newArgs)=>{
        args = newArgs;
        if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNull(timer)) {
            timer = setTimeout(()=>{
                const tempArgs = args;
                timer = null;
                args = null;
                fn.apply(null, tempArgs);
            }, rate);
        }
    };
    return {
        cancel,
        throttle
    };
};
// Run a function fn after rate ms. If another invocation occurs
// during the time it is waiting, ignore it completely.
const first = (fn, rate)=>{
    let timer = null;
    const cancel = ()=>{
        if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isNull(timer)) {
            clearTimeout(timer);
            timer = null;
        }
    };
    const throttle = (...args)=>{
        if (_Type__WEBPACK_IMPORTED_MODULE_0__.isNull(timer)) {
            timer = setTimeout(()=>{
                timer = null;
                fn.apply(null, args);
            }, rate);
        }
    };
    return {
        cancel,
        throttle
    };
};
// Run a function fn after rate ms. If another invocation occurs
// during the time it is waiting, reschedule the function again
// with the new arguments.
const last = (fn, rate)=>{
    let timer = null;
    const cancel = ()=>{
        if (!_Type__WEBPACK_IMPORTED_MODULE_0__.isNull(timer)) {
            clearTimeout(timer);
            timer = null;
        }
    };
    const throttle = (...args)=>{
        cancel();
        timer = setTimeout(()=>{
            timer = null;
            fn.apply(null, args);
        }, rate);
    };
    return {
        cancel,
        throttle
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Thunk.ts": 
/*!***********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Thunk.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  cached: () => (cached)
});
const cached = (f)=>{
    let called = false;
    let r;
    return (...args)=>{
        if (!called) {
            called = true;
            r = f.apply(null, args);
        }
        return r;
    };
};


}),
"../katamari/src/main/ts/ephox/katamari/api/Type.ts": 
/*!**********************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Type.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  is: () => (is),
  isArray: () => (isArray),
  isArrayOf: () => (isArrayOf),
  isBoolean: () => (isBoolean),
  isFunction: () => (isFunction),
  isNonNullable: () => (isNonNullable),
  isNull: () => (isNull),
  isNullable: () => (isNullable),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isPlainObject: () => (isPlainObject),
  isPromiseLike: () => (isPromiseLike),
  isString: () => (isString),
  isUndefined: () => (isUndefined)
});
/* eslint-disable @typescript-eslint/no-wrapper-object-types */ const getPrototypeOf = Object.getPrototypeOf;
const hasProto = (v, constructor, predicate)=>{
    if (predicate(v, constructor.prototype)) {
        return true;
    } else {
        // String-based fallback time
        return v.constructor?.name === constructor.name;
    }
};
const typeOf = (x)=>{
    const t = typeof x;
    if (x === null) {
        return 'null';
    } else if (t === 'object' && Array.isArray(x)) {
        return 'array';
    } else if (t === 'object' && hasProto(x, String, (o, proto)=>proto.isPrototypeOf(o))) {
        return 'string';
    } else {
        return t;
    }
};
const isType = (type)=>(value)=>typeOf(value) === type;
const isSimpleType = (type)=>(value)=>typeof value === type;
const eq = (t)=>(a)=>t === a;
const is = (value, constructor)=>isObject(value) && hasProto(value, constructor, (o, proto)=>getPrototypeOf(o) === proto);
const isString = isType('string');
const isObject = isType('object');
const isPlainObject = (value)=>is(value, Object);
const isArray = isType('array');
const isNull = eq(null);
const isBoolean = isSimpleType('boolean');
const isUndefined = eq(undefined);
const isNullable = (a)=>a === null || a === undefined;
const isNonNullable = (a)=>!isNullable(a);
const isFunction = isSimpleType('function');
const isNumber = isSimpleType('number');
const isArrayOf = (value, pred)=>{
    if (isArray(value)) {
        for(let i = 0, len = value.length; i < len; ++i){
            if (!pred(value[i])) {
                return false;
            }
        }
        return true;
    }
    return false;
};
const isPromiseLike = (x)=>isObject(x) && isFunction(x.then) && isFunction(x.catch);


}),
"../katamari/src/main/ts/ephox/katamari/api/Unicode.ts": 
/*!*************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/api/Unicode.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ellipsis: () => (ellipsis),
  isZwsp: () => (isZwsp),
  nbsp: () => (nbsp),
  removeZwsp: () => (removeZwsp),
  softHyphen: () => (softHyphen),
  zeroWidth: () => (zeroWidth)
});
const zeroWidth = '\uFEFF';
const nbsp = '\u00A0';
const softHyphen = '\u00AD';
const ellipsis = '\u2026';
const isZwsp = (char)=>char === zeroWidth;
const removeZwsp = (s)=>s.replace(/\uFEFF/g, '');


}),
"../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/str/StrAppend.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addToEnd: () => (addToEnd),
  addToStart: () => (addToStart),
  removeFromEnd: () => (removeFromEnd),
  removeFromStart: () => (removeFromStart)
});
const addToStart = (str, prefix)=>{
    return prefix + str;
};
const addToEnd = (str, suffix)=>{
    return str + suffix;
};
const removeFromStart = (str, numChars)=>{
    return str.substring(numChars);
};
const removeFromEnd = (str, numChars)=>{
    return str.substring(0, str.length - numChars);
};


}),
"../katamari/src/main/ts/ephox/katamari/util/BagUtils.ts": 
/*!***************************************************************!*\
  !*** ../katamari/src/main/ts/ephox/katamari/util/BagUtils.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  checkDupes: () => (checkDupes),
  invalidTypeMessage: () => (invalidTypeMessage),
  reqMessage: () => (reqMessage),
  sort: () => (sort),
  unsuppMessage: () => (unsuppMessage),
  validateStrArr: () => (validateStrArr)
});
/* ESM import */var _api_Arr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Arr */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Type */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");


const sort = (arr)=>{
    return arr.slice(0).sort();
};
const reqMessage = (required, keys)=>{
    throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');
};
const unsuppMessage = (unsupported)=>{
    throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));
};
const validateStrArr = (label, array)=>{
    if (!_api_Type__WEBPACK_IMPORTED_MODULE_0__.isArray(array)) {
        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');
    }
    _api_Arr__WEBPACK_IMPORTED_MODULE_1__.each(array, (a)=>{
        if (!_api_Type__WEBPACK_IMPORTED_MODULE_0__.isString(a)) {
            throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');
        }
    });
};
const invalidTypeMessage = (incorrect, type)=>{
    throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');
};
const checkDupes = (everything)=>{
    const sorted = sort(everything);
    const dupe = _api_Arr__WEBPACK_IMPORTED_MODULE_1__.find(sorted, (s, i)=>{
        return i < sorted.length - 1 && s === sorted[i + 1];
    });
    dupe.each((d)=>{
        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');
    });
};


}),
"../phoenix/src/main/ts/ephox/phoenix/api/data/Spot.ts": 
/*!*************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/api/data/Spot.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  delta: () => (delta),
  point: () => (point),
  points: () => (points),
  range: () => (range),
  text: () => (text)
});
const point = (element, offset)=>({
        element,
        offset
    });
const delta = (element, deltaOffset)=>({
        element,
        deltaOffset
    });
const range = (element, start, finish)=>({
        element,
        start,
        finish
    });
const points = (begin, end)=>({
        begin,
        end
    });
const text = (element, text)=>({
        element,
        text
    });



}),
"../phoenix/src/main/ts/ephox/phoenix/api/dom/DomDescent.ts": 
/*!******************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/api/dom/DomDescent.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  freefallLtr: () => (freefallLtr),
  freefallRtl: () => (freefallRtl),
  toLeaf: () => (toLeaf)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Descent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Descent */ "../phoenix/src/main/ts/ephox/phoenix/api/general/Descent.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const toLeaf = (element, offset)=>{
    return _general_Descent__WEBPACK_IMPORTED_MODULE_1__.toLeaf(universe, element, offset);
};
/* The purpose of freefall is that they will land on an element that is not whitespace text. This
 * can be very useful inside beautified content
 */ const freefallLtr = (element)=>{
    return _general_Descent__WEBPACK_IMPORTED_MODULE_1__.freefallLtr(universe, element);
};
const freefallRtl = (element)=>{
    return _general_Descent__WEBPACK_IMPORTED_MODULE_1__.freefallRtl(universe, element);
};



}),
"../phoenix/src/main/ts/ephox/phoenix/api/dom/DomGather.ts": 
/*!*****************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/api/dom/DomGather.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  before: () => (before),
  seekLeft: () => (seekLeft),
  seekRight: () => (seekRight),
  walk: () => (walk),
  walkers: () => (walkers)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Gather__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Gather */ "../phoenix/src/main/ts/ephox/phoenix/api/general/Gather.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const before = (element, isRoot)=>{
    return _general_Gather__WEBPACK_IMPORTED_MODULE_1__.before(universe, element, isRoot);
};
const after = (element, isRoot)=>{
    return _general_Gather__WEBPACK_IMPORTED_MODULE_1__.after(universe, element, isRoot);
};
const seekLeft = (element, predicate, isRoot)=>{
    return _general_Gather__WEBPACK_IMPORTED_MODULE_1__.seekLeft(universe, element, predicate, isRoot);
};
const seekRight = (element, predicate, isRoot)=>{
    return _general_Gather__WEBPACK_IMPORTED_MODULE_1__.seekRight(universe, element, predicate, isRoot);
};
const walkers = _general_Gather__WEBPACK_IMPORTED_MODULE_1__.walkers;
const walk = (item, mode, direction, rules)=>{
    return _general_Gather__WEBPACK_IMPORTED_MODULE_1__.walk(universe, item, mode, direction, rules);
};



}),
"../phoenix/src/main/ts/ephox/phoenix/api/general/Descent.ts": 
/*!*******************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/api/general/Descent.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  freefallLtr: () => (freefallLtr),
  freefallRtl: () => (freefallRtl),
  toLeaf: () => (toLeaf)
});
/* ESM import */var _wrap_Navigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../wrap/Navigation */ "../phoenix/src/main/ts/ephox/phoenix/wrap/Navigation.ts");

const toLeaf = _wrap_Navigation__WEBPACK_IMPORTED_MODULE_0__.toLeaf;
const freefallLtr = _wrap_Navigation__WEBPACK_IMPORTED_MODULE_0__.freefallLtr;
const freefallRtl = _wrap_Navigation__WEBPACK_IMPORTED_MODULE_0__.freefallRtl;



}),
"../phoenix/src/main/ts/ephox/phoenix/api/general/Gather.ts": 
/*!******************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/api/general/Gather.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  advance: () => (/* reexport safe */ _gather_Walker__WEBPACK_IMPORTED_MODULE_0__.advance),
  after: () => (after),
  backtrack: () => (/* reexport safe */ _gather_Walker__WEBPACK_IMPORTED_MODULE_0__.backtrack),
  before: () => (before),
  seekLeft: () => (seekLeft),
  seekRight: () => (seekRight),
  sidestep: () => (/* reexport safe */ _gather_Walker__WEBPACK_IMPORTED_MODULE_0__.sidestep),
  walk: () => (walk),
  walkers: () => (walkers)
});
/* ESM import */var _gather_Seeker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../gather/Seeker */ "../phoenix/src/main/ts/ephox/phoenix/gather/Seeker.ts");
/* ESM import */var _gather_Walker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gather/Walker */ "../phoenix/src/main/ts/ephox/phoenix/gather/Walker.ts");
/* ESM import */var _gather_Walkers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../gather/Walkers */ "../phoenix/src/main/ts/ephox/phoenix/gather/Walkers.ts");



const isLeaf = (universe)=>(element)=>universe.property().children(element).length === 0;
const before = (universe, item, isRoot)=>{
    return seekLeft(universe, item, isLeaf(universe), isRoot);
};
const after = (universe, item, isRoot)=>{
    return seekRight(universe, item, isLeaf(universe), isRoot);
};
const seekLeft = _gather_Seeker__WEBPACK_IMPORTED_MODULE_1__.left;
const seekRight = _gather_Seeker__WEBPACK_IMPORTED_MODULE_1__.right;
const walkers = ()=>({
        left: _gather_Walkers__WEBPACK_IMPORTED_MODULE_2__.Walkers.left,
        right: _gather_Walkers__WEBPACK_IMPORTED_MODULE_2__.Walkers.right
    });
const walk = _gather_Walker__WEBPACK_IMPORTED_MODULE_0__.go;



}),
"../phoenix/src/main/ts/ephox/phoenix/gather/Seeker.ts": 
/*!*************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/gather/Seeker.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  left: () => (left),
  right: () => (right)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _Walker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Walker */ "../phoenix/src/main/ts/ephox/phoenix/gather/Walker.ts");
/* ESM import */var _Walkers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Walkers */ "../phoenix/src/main/ts/ephox/phoenix/gather/Walkers.ts");



const hone = (universe, item, predicate, mode, direction, isRoot)=>{
    const next = _Walker__WEBPACK_IMPORTED_MODULE_0__.go(universe, item, mode, direction);
    return next.bind((n)=>{
        if (isRoot(n.item)) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        } else {
            return predicate(n.item) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(n.item) : hone(universe, n.item, predicate, n.mode, direction, isRoot);
        }
    });
};
const left = (universe, item, predicate, isRoot)=>{
    return hone(universe, item, predicate, _Walker__WEBPACK_IMPORTED_MODULE_0__.sidestep, _Walkers__WEBPACK_IMPORTED_MODULE_2__.Walkers.left(), isRoot);
};
const right = (universe, item, predicate, isRoot)=>{
    return hone(universe, item, predicate, _Walker__WEBPACK_IMPORTED_MODULE_0__.sidestep, _Walkers__WEBPACK_IMPORTED_MODULE_2__.Walkers.right(), isRoot);
};



}),
"../phoenix/src/main/ts/ephox/phoenix/gather/Walker.ts": 
/*!*************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/gather/Walker.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  advance: () => (advance),
  backtrack: () => (backtrack),
  go: () => (go),
  sidestep: () => (sidestep)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const traverse = (item, mode)=>({
        item,
        mode
    });
const backtrack = (universe, item, _direction, transition = sidestep)=>{
    return universe.property().parent(item).map((p)=>{
        return traverse(p, transition);
    });
};
const sidestep = (universe, item, direction, transition = advance)=>{
    return direction.sibling(universe, item).map((p)=>{
        return traverse(p, transition);
    });
};
const advance = (universe, item, direction, transition = advance)=>{
    const children = universe.property().children(item);
    const result = direction.first(children);
    return result.map((r)=>{
        return traverse(r, transition);
    });
};
/*
 * Rule breakdown:
 *
 * current: the traversal that we are applying.
 * next: the next traversal to apply if the current traversal succeeds (e.g. advance after sidestepping)
 * fallback: the traversal to fallback to when the current traversal does not find a node
 */ const successors = [
    {
        current: backtrack,
        next: sidestep,
        fallback: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none()
    },
    {
        current: sidestep,
        next: advance,
        fallback: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(backtrack)
    },
    {
        current: advance,
        next: advance,
        fallback: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(sidestep)
    }
];
const go = (universe, item, mode, direction, rules = successors)=>{
    // INVESTIGATE: Find a way which doesn't require an array search first to identify the current mode.
    const ruleOpt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.find(rules, (succ)=>{
        return succ.current === mode;
    });
    return ruleOpt.bind((rule)=>{
        // Attempt the current mode. If not, use the fallback and try again.
        return rule.current(universe, item, direction, rule.next).orThunk(()=>{
            return rule.fallback.bind((fb)=>{
                return go(universe, item, fb, direction);
            });
        });
    });
};



}),
"../phoenix/src/main/ts/ephox/phoenix/gather/Walkers.ts": 
/*!**************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/gather/Walkers.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Walkers: () => (Walkers)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const left = ()=>{
    const sibling = (universe, item)=>{
        return universe.query().prevSibling(item);
    };
    const first = (children)=>{
        return children.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(children[children.length - 1]) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    };
    return {
        sibling,
        first
    };
};
const right = ()=>{
    const sibling = (universe, item)=>{
        return universe.query().nextSibling(item);
    };
    const first = (children)=>{
        return children.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(children[0]) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    };
    return {
        sibling,
        first
    };
};
const Walkers = {
    left,
    right
};


}),
"../phoenix/src/main/ts/ephox/phoenix/wrap/Navigation.ts": 
/*!***************************************************************!*\
  !*** ../phoenix/src/main/ts/ephox/phoenix/wrap/Navigation.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  freefallLtr: () => (freefallLtr),
  freefallRtl: () => (freefallRtl),
  toLast: () => (toLast),
  toLeaf: () => (toLeaf),
  toLower: () => (toLower)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/data/Spot */ "../phoenix/src/main/ts/ephox/phoenix/api/data/Spot.ts");


/**
 * Return the last available cursor position in the node.
 */ const toLast = (universe, node)=>{
    if (universe.property().isText(node)) {
        return _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(node, universe.property().getText(node).length);
    } else {
        const children = universe.property().children(node);
        // keep descending if there are children.
        return children.length > 0 ? toLast(universe, children[children.length - 1]) : _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(node, children.length);
    }
};
const toLower = (universe, node)=>{
    const lastOffset = universe.property().isText(node) ? universe.property().getText(node).length : universe.property().children(node).length;
    return _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(node, lastOffset);
};
/**
 * Descend down to a leaf node at the given offset.
 */ const toLeaf = (universe, element, offset)=>{
    const children = universe.property().children(element);
    if (children.length > 0 && offset < children.length) {
        return toLeaf(universe, children[offset], 0);
    } else if (children.length > 0 && universe.property().isElement(element) && children.length === offset) {
        return toLast(universe, children[children.length - 1]);
    } else {
        return _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(element, offset);
    }
};
const scan = (universe, element, direction)=>{
    // if a comment or zero-length text, scan the siblings
    if (universe.property().isText(element) && universe.property().getText(element).trim().length === 0 || universe.property().isComment(element)) {
        return direction(element).bind((elem)=>{
            return scan(universe, elem, direction).orThunk(()=>{
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(elem);
            });
        });
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
};
const freefallLtr = (universe, element)=>{
    const candidate = scan(universe, element, universe.query().nextSibling).getOr(element);
    if (universe.property().isText(candidate)) {
        return _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(candidate, 0);
    }
    const children = universe.property().children(candidate);
    return children.length > 0 ? freefallLtr(universe, children[0]) : _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(candidate, 0);
};
const toEnd = (universe, element)=>{
    if (universe.property().isText(element)) {
        return universe.property().getText(element).length;
    }
    const children = universe.property().children(element);
    return children.length;
};
const freefallRtl = (universe, element)=>{
    const candidate = scan(universe, element, universe.query().prevSibling).getOr(element);
    if (universe.property().isText(candidate)) {
        return _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(candidate, toEnd(universe, candidate));
    }
    const children = universe.property().children(candidate);
    return children.length > 0 ? freefallRtl(universe, children[children.length - 1]) : _api_data_Spot__WEBPACK_IMPORTED_MODULE_0__.point(candidate, toEnd(universe, candidate));
};



}),
"../porkbun/src/main/ts/ephox/porkbun/Event.ts": 
/*!*****************************************************!*\
  !*** ../porkbun/src/main/ts/ephox/porkbun/Event.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Event: () => (Event)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const Event = (fields)=>{
    let handlers = [];
    const bind = (handler)=>{
        if (handler === undefined) {
            throw new Error('Event bind error: undefined handler');
        }
        handlers.push(handler);
    };
    const unbind = (handler)=>{
        // This is quite a bit slower than handlers.splice() but we hate mutation.
        // Unbind isn't used very often so it should be ok.
        handlers = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.filter(handlers, (h)=>{
            return h !== handler;
        });
    };
    const trigger = (...args)=>{
        const event = {};
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(fields, (name, i)=>{
            event[name] = args[i];
        });
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(handlers, (handler)=>{
            handler(event);
        });
    };
    return {
        bind,
        unbind,
        trigger
    };
};


}),
"../porkbun/src/main/ts/ephox/porkbun/Events.ts": 
/*!******************************************************!*\
  !*** ../porkbun/src/main/ts/ephox/porkbun/Events.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  create: () => (create)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");

/** :: {name : Event} -> Events */ const create = (typeDefs)=>{
    const registry = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(typeDefs, (event)=>{
        return {
            bind: event.bind,
            unbind: event.unbind
        };
    });
    const trigger = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(typeDefs, (event)=>{
        return event.trigger;
    });
    return {
        registry,
        trigger
    };
};



}),
"../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts": 
/*!*************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight),
  sharedOne: () => (sharedOne),
  subset: () => (subset)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Parent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Parent */ "../robin/src/main/ts/ephox/robin/api/general/Parent.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const sharedOne = (look, elements)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.sharedOne(universe, (_universe, element)=>{
        return look(element);
    }, elements);
};
const subset = (start, finish)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.subset(universe, start, finish);
};
const ancestors = (start, finish, isRoot)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.ancestors(universe, start, finish, isRoot);
};
const breakToLeft = (parent, child)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakToLeft(universe, parent, child);
};
const breakToRight = (parent, child)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakToRight(universe, parent, child);
};
const breakPath = (child, isTop, breaker)=>{
    return _general_Parent__WEBPACK_IMPORTED_MODULE_1__.breakPath(universe, child, isTop, (u, p, c)=>{
        return breaker(p, c);
    });
};



}),
"../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts": 
/*!****************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isBlock: () => (isBlock),
  isContainer: () => (isContainer),
  isEmptyTag: () => (isEmptyTag),
  isFormatting: () => (isFormatting),
  isFrame: () => (isFrame),
  isHeading: () => (isHeading),
  isInline: () => (isInline),
  isList: () => (isList)
});
/* ESM import */var _ephox_boss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/boss */ "../boss/src/main/ts/ephox/boss/api/DomUniverse.ts");
/* ESM import */var _general_Structure__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../general/Structure */ "../robin/src/main/ts/ephox/robin/api/general/Structure.ts");


const universe = (0,_ephox_boss__WEBPACK_IMPORTED_MODULE_0__["default"])();
const isBlock = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isBlock(universe, element);
};
const isList = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isList(universe, element);
};
const isFormatting = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isFormatting(universe, element);
};
const isHeading = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isHeading(universe, element);
};
const isContainer = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isContainer(universe, element);
};
const isEmptyTag = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isEmptyTag(universe, element);
};
const isFrame = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isFrame(universe, element);
};
const isInline = (element)=>{
    return _general_Structure__WEBPACK_IMPORTED_MODULE_1__.isInline(universe, element);
};



}),
"../robin/src/main/ts/ephox/robin/api/general/Parent.ts": 
/*!**************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/general/Parent.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight),
  sharedOne: () => (sharedOne),
  subset: () => (subset)
});
/* ESM import */var _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../parent/Breaker */ "../robin/src/main/ts/ephox/robin/parent/Breaker.ts");
/* ESM import */var _parent_Shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../parent/Shared */ "../robin/src/main/ts/ephox/robin/parent/Shared.ts");
/* ESM import */var _parent_Subset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../parent/Subset */ "../robin/src/main/ts/ephox/robin/parent/Subset.ts");



const sharedOne = _parent_Shared__WEBPACK_IMPORTED_MODULE_0__.oneAll;
const subset = _parent_Subset__WEBPACK_IMPORTED_MODULE_1__.subset;
const ancestors = _parent_Subset__WEBPACK_IMPORTED_MODULE_1__.ancestors;
const breakToLeft = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakToLeft;
const breakToRight = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakToRight;
const breakPath = _parent_Breaker__WEBPACK_IMPORTED_MODULE_2__.breakPath;



}),
"../robin/src/main/ts/ephox/robin/api/general/Structure.ts": 
/*!*****************************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/api/general/Structure.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isBlock: () => (isBlock),
  isContainer: () => (isContainer),
  isEmptyTag: () => (isEmptyTag),
  isFormatting: () => (isFormatting),
  isFrame: () => (isFrame),
  isHeading: () => (isHeading),
  isInline: () => (isInline),
  isList: () => (isList)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const blockList = [
    'body',
    'p',
    'div',
    'article',
    'aside',
    'figcaption',
    'figure',
    'footer',
    'header',
    'nav',
    'section',
    'ol',
    'ul',
    // --- NOTE, TagBoundaries has li here. That means universe.isBoundary => true for li tags.
    'table',
    'thead',
    'tfoot',
    'tbody',
    'caption',
    'tr',
    'td',
    'th',
    'h1',
    'h2',
    'h3',
    'h4',
    'h5',
    'h6',
    'blockquote',
    'pre',
    'address'
];
const isList = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'ol',
        'ul'
    ], tagName);
};
const isBlock = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(blockList, tagName);
};
const isFormatting = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'address',
        'pre',
        'p',
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6'
    ], tagName);
};
const isHeading = (universe, item)=>{
    const tagName = universe.property().name(item);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6'
    ], tagName);
};
const isContainer = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'div',
        'li',
        'td',
        'th',
        'blockquote',
        'body',
        'caption'
    ], universe.property().name(item));
};
const isEmptyTag = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains([
        'br',
        'img',
        'hr',
        'input'
    ], universe.property().name(item));
};
const isFrame = (universe, item)=>{
    return universe.property().name(item) === 'iframe';
};
const isInline = (universe, item)=>{
    return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';
};



}),
"../robin/src/main/ts/ephox/robin/parent/Breaker.ts": 
/*!**********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Breaker.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  breakPath: () => (breakPath),
  breakToLeft: () => (breakToLeft),
  breakToRight: () => (breakToRight)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const leftRight = (left, right)=>({
        left,
        right
    });
const brokenPath = (first, second, splits)=>({
        first,
        second,
        splits
    });
const bisect = (universe, parent, child)=>{
    const children = universe.property().children(parent);
    const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findIndex(children, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(universe.eq, child));
    return index.map((ind)=>{
        return {
            before: children.slice(0, ind),
            after: children.slice(ind + 1)
        };
    });
};
/**
 * Clone parent to the RIGHT and move everything after child in the parent element into
 * a clone of the parent (placed after parent).
 */ const breakToRight = (universe, parent, child)=>{
    return bisect(universe, parent, child).map((parts)=>{
        const second = universe.create().clone(parent);
        universe.insert().appendAll(second, parts.after);
        universe.insert().after(parent, second);
        return leftRight(parent, second);
    });
};
/**
 * Clone parent to the LEFT and move everything before and including child into
 * the a clone of the parent (placed before parent)
 */ const breakToLeft = (universe, parent, child)=>{
    return bisect(universe, parent, child).map((parts)=>{
        const prior = universe.create().clone(parent);
        universe.insert().appendAll(prior, parts.before.concat([
            child
        ]));
        universe.insert().appendAll(parent, parts.after);
        universe.insert().before(parent, prior);
        return leftRight(prior, parent);
    });
};
/*
 * Using the breaker, break from the child up to the top element defined by the predicate.
 * It returns three values:
 *   first: the top level element that completed the break
 *   second: the optional element representing second part of the top-level split if the breaking completed successfully to the top
 *   splits: a list of (Element, Element) pairs that represent the splits that have occurred on the way to the top.
 */ const breakPath = (universe, item, isTop, breaker)=>{
    const next = (child, group, splits)=>{
        const fallback = brokenPath(child, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none(), splits);
        // Found the top, so stop.
        if (isTop(child)) {
            return brokenPath(child, group, splits);
        } else {
            // Split the child at parent, and keep going
            return universe.property().parent(child).bind((parent)=>{
                return breaker(universe, parent, child).map((breakage)=>{
                    const extra = [
                        {
                            first: breakage.left,
                            second: breakage.right
                        }
                    ];
                    // Our isTop is based on the left-side parent, so keep it regardless of split.
                    const nextChild = isTop(parent) ? parent : breakage.left;
                    return next(nextChild, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(breakage.right), splits.concat(extra));
                });
            }).getOr(fallback);
        }
    };
    return next(item, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none(), []);
};



}),
"../robin/src/main/ts/ephox/robin/parent/Shared.ts": 
/*!*********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Shared.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  oneAll: () => (oneAll)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const all = (universe, look, elements, f)=>{
    const head = elements[0];
    const tail = elements.slice(1);
    return f(universe, look, head, tail);
};
/**
 * Check if look returns the same element for all elements, and return it if it exists.
 */ const oneAll = (universe, look, elements)=>{
    return elements.length > 0 ? all(universe, look, elements, unsafeOne) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const unsafeOne = (universe, look, head, tail)=>{
    const start = look(universe, head);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.foldr(tail, (b, a)=>{
        const current = look(universe, a);
        return commonElement(universe, b, current);
    }, start);
};
const commonElement = (universe, start, end)=>{
    return start.bind((s)=>{
        return end.filter(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.curry(universe.eq, s));
    });
};



}),
"../robin/src/main/ts/ephox/robin/parent/Subset.ts": 
/*!*********************************************************!*\
  !*** ../robin/src/main/ts/ephox/robin/parent/Subset.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestors: () => (ancestors),
  subset: () => (subset)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const eq = (universe, item)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.curry(universe.eq, item);
};
const unsafeSubset = (universe, common, ps1, ps2)=>{
    const children = universe.property().children(common);
    if (universe.eq(common, ps1[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some([
            ps1[0]
        ]);
    }
    if (universe.eq(common, ps2[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some([
            ps2[0]
        ]);
    }
    const finder = (ps)=>{
        // ps is calculated bottom-up, but logically we're searching top-down
        const topDown = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.reverse(ps);
        // find the child of common in the ps array
        const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(topDown, eq(universe, common)).getOr(-1);
        const item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];
        // find the index of that child in the common children
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(children, eq(universe, item));
    };
    const startIndex = finder(ps1);
    const endIndex = finder(ps2);
    // Return all common children between first and last
    return startIndex.bind((sIndex)=>{
        return endIndex.map((eIndex)=>{
            // This is required because the range could be backwards.
            const first = Math.min(sIndex, eIndex);
            const last = Math.max(sIndex, eIndex);
            return children.slice(first, last + 1);
        });
    });
};
// Note: this can be exported if it is required in the future.
const ancestors = (universe, start, end, isRoot = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.never)=>{
    // Inefficient if no isRoot is supplied.
    // TODO: Andy knows there is a graph-based algorithm to find a common parent, but can't remember it
    //        This also includes something to get the subset after finding the common parent
    const ps1 = [
        start
    ].concat(universe.up().all(start));
    const ps2 = [
        end
    ].concat(universe.up().all(end));
    const prune = (path)=>{
        const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findIndex(path, isRoot);
        return index.fold(()=>{
            return path;
        }, (ind)=>{
            return path.slice(0, ind + 1);
        });
    };
    const pruned1 = prune(ps1);
    const pruned2 = prune(ps2);
    const shared = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(pruned1, (x)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(pruned2, eq(universe, x));
    });
    return {
        firstpath: pruned1,
        secondpath: pruned2,
        shared
    };
};
/**
 * Find the common element in the parents of start and end.
 *
 * Then return all children of the common element such that start and end are included.
 */ const subset = (universe, start, end)=>{
    const ancs = ancestors(universe, start, end);
    return ancs.shared.bind((shared)=>{
        return unsafeSubset(universe, shared, ancs.firstpath, ancs.secondpath);
    });
};



}),
"../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts": 
/*!***************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detect: () => (detect),
  override: () => (override)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Thunk.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _core_PlatformDetection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/PlatformDetection */ "../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts");


const mediaMatch = (query)=>window.matchMedia(query).matches;
// IMPORTANT: Must be in a thunk, otherwise rollup thinks calling this immediately
// causes side effects and won't tree shake this away
// Note: navigator.userAgentData is not part of the native typescript types yet
let platform = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.cached(()=>_core_PlatformDetection__WEBPACK_IMPORTED_MODULE_1__.PlatformDetection.detect(window.navigator.userAgent, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(window.navigator.userAgentData), mediaMatch));
const detect = ()=>platform();
const override = (overrides)=>{
    platform = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant({
        ...detect(),
        ...overrides
    });
};


}),
"../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts": 
/*!*************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isPrototypeOf: () => (isPrototypeOf)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Resolve.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _util_Global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/Global */ "../sand/src/main/ts/ephox/sand/util/Global.ts");


const getPrototypeOf = Object.getPrototypeOf;
/*
 * IE9 and above
 *
 * MDN no use on this one, but here's the link anyway:
 * https://developer.mozilla.org/en/docs/Web/API/HTMLElement
 */ const sandHTMLElement = (scope)=>{
    return _util_Global__WEBPACK_IMPORTED_MODULE_0__.getOrDie('HTMLElement', scope);
};
const isPrototypeOf = (x)=>{
    // use Resolve to get the window object for x and just return undefined if it can't find it.
    // undefined scope later triggers using the global window.
    const scope = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.resolve('ownerDocument.defaultView', x);
    // TINY-7374: We can't rely on looking at the owner window HTMLElement as the element may have
    // been constructed in a different window and then appended to the current window document.
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\w*Element$/.test(getPrototypeOf(x).constructor.name));
};



}),
"../sand/src/main/ts/ephox/sand/core/Browser.ts": 
/*!******************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/Browser.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Browser: () => (Browser)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _detect_Version__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../detect/Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const edge = 'Edge';
const chromium = 'Chromium';
const ie = 'IE';
const opera = 'Opera';
const firefox = 'Firefox';
const safari = 'Safari';
const unknown = ()=>{
    return nu({
        current: undefined,
        version: _detect_Version__WEBPACK_IMPORTED_MODULE_0__.Version.unknown()
    });
};
const nu = (info)=>{
    const current = info.current;
    const version = info.version;
    const isBrowser = (name)=>()=>current === name;
    return {
        current,
        version,
        isEdge: isBrowser(edge),
        isChromium: isBrowser(chromium),
        // NOTE: isIe just looks too weird
        isIE: isBrowser(ie),
        isOpera: isBrowser(opera),
        isFirefox: isBrowser(firefox),
        isSafari: isBrowser(safari)
    };
};
const Browser = {
    unknown,
    nu,
    edge: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(edge),
    chromium: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(chromium),
    ie: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(ie),
    opera: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(opera),
    firefox: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(firefox),
    safari: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(safari)
};


}),
"../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts": 
/*!**************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  OperatingSystem: () => (OperatingSystem)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _detect_Version__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../detect/Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const windows = 'Windows';
const ios = 'iOS';
const android = 'Android';
const linux = 'Linux';
const macos = 'macOS';
const solaris = 'Solaris';
const freebsd = 'FreeBSD';
const chromeos = 'ChromeOS';
// Though there is a bit of dupe with this and Browser, trying to
// reuse code makes it much harder to follow and change.
const unknown = ()=>{
    return nu({
        current: undefined,
        version: _detect_Version__WEBPACK_IMPORTED_MODULE_0__.Version.unknown()
    });
};
const nu = (info)=>{
    const current = info.current;
    const version = info.version;
    const isOS = (name)=>()=>current === name;
    return {
        current,
        version,
        isWindows: isOS(windows),
        // TODO: Fix capitalisation
        isiOS: isOS(ios),
        isAndroid: isOS(android),
        isMacOS: isOS(macos),
        isLinux: isOS(linux),
        isSolaris: isOS(solaris),
        isFreeBSD: isOS(freebsd),
        isChromeOS: isOS(chromeos)
    };
};
const OperatingSystem = {
    unknown,
    nu,
    windows: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(windows),
    ios: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(ios),
    android: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(android),
    linux: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(linux),
    macos: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(macos),
    solaris: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(solaris),
    freebsd: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(freebsd),
    chromeos: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(chromeos)
};


}),
"../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts": 
/*!****************************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/core/PlatformDetection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PlatformDetection: () => (PlatformDetection)
});
/* ESM import */var _detect_DeviceType__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../detect/DeviceType */ "../sand/src/main/ts/ephox/sand/detect/DeviceType.ts");
/* ESM import */var _detect_UaData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../detect/UaData */ "../sand/src/main/ts/ephox/sand/detect/UaData.ts");
/* ESM import */var _detect_UaString__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../detect/UaString */ "../sand/src/main/ts/ephox/sand/detect/UaString.ts");
/* ESM import */var _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../info/PlatformInfo */ "../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts");
/* ESM import */var _Browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Browser */ "../sand/src/main/ts/ephox/sand/core/Browser.ts");
/* ESM import */var _OperatingSystem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OperatingSystem */ "../sand/src/main/ts/ephox/sand/core/OperatingSystem.ts");






const detect = (userAgent, userAgentDataOpt, mediaMatch)=>{
    const browsers = _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__.PlatformInfo.browsers();
    const oses = _info_PlatformInfo__WEBPACK_IMPORTED_MODULE_0__.PlatformInfo.oses();
    const browser = userAgentDataOpt.bind((userAgentData)=>_detect_UaData__WEBPACK_IMPORTED_MODULE_1__.detectBrowser(browsers, userAgentData)).orThunk(()=>_detect_UaString__WEBPACK_IMPORTED_MODULE_2__.detectBrowser(browsers, userAgent)).fold(_Browser__WEBPACK_IMPORTED_MODULE_3__.Browser.unknown, _Browser__WEBPACK_IMPORTED_MODULE_3__.Browser.nu);
    const os = _detect_UaString__WEBPACK_IMPORTED_MODULE_2__.detectOs(oses, userAgent).fold(_OperatingSystem__WEBPACK_IMPORTED_MODULE_4__.OperatingSystem.unknown, _OperatingSystem__WEBPACK_IMPORTED_MODULE_4__.OperatingSystem.nu);
    const deviceType = (0,_detect_DeviceType__WEBPACK_IMPORTED_MODULE_5__.DeviceType)(os, browser, userAgent, mediaMatch);
    return {
        browser,
        os,
        deviceType
    };
};
const PlatformDetection = {
    detect
};


}),
"../sand/src/main/ts/ephox/sand/detect/DeviceType.ts": 
/*!***********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/DeviceType.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  DeviceType: () => (DeviceType)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const DeviceType = (os, browser, userAgent, mediaMatch)=>{
    const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;
    const isiPhone = os.isiOS() && !isiPad;
    const isMobile = os.isiOS() || os.isAndroid();
    const isTouch = isMobile || mediaMatch('(pointer:coarse)');
    const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');
    const isPhone = isiPhone || isMobile && !isTablet;
    const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;
    const isDesktop = !isPhone && !isTablet && !iOSwebview;
    return {
        isiPad: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isiPad),
        isiPhone: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isiPhone),
        isTablet: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isTablet),
        isPhone: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isPhone),
        isTouch: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isTouch),
        isAndroid: os.isAndroid,
        isiOS: os.isiOS,
        isWebView: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(iOSwebview),
        isDesktop: _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant(isDesktop)
    };
};


}),
"../sand/src/main/ts/ephox/sand/detect/UaData.ts": 
/*!*******************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/UaData.ts ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detectBrowser: () => (detectBrowser)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const detectBrowser = (browsers, userAgentData)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(userAgentData.brands, (uaBrand)=>{
        const lcBrand = uaBrand.brand.toLowerCase();
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.find(browsers, (browser)=>lcBrand === browser.brand?.toLowerCase()).map((info)=>({
                current: info.name,
                version: _Version__WEBPACK_IMPORTED_MODULE_1__.Version.nu(parseInt(uaBrand.version, 10), 0)
            }));
    });
};



}),
"../sand/src/main/ts/ephox/sand/detect/UaString.ts": 
/*!*********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/UaString.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  detectBrowser: () => (detectBrowser),
  detectOs: () => (detectOs)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Version */ "../sand/src/main/ts/ephox/sand/detect/Version.ts");


const detect = (candidates, userAgent)=>{
    const agent = String(userAgent).toLowerCase();
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.find(candidates, (candidate)=>{
        return candidate.search(agent);
    });
};
// They (browser and os) are the same at the moment, but they might
// not stay that way.
const detectBrowser = (browsers, userAgent)=>{
    return detect(browsers, userAgent).map((browser)=>{
        const version = _Version__WEBPACK_IMPORTED_MODULE_1__.Version.detect(browser.versionRegexes, userAgent);
        return {
            current: browser.name,
            version
        };
    });
};
const detectOs = (oses, userAgent)=>{
    return detect(oses, userAgent).map((os)=>{
        const version = _Version__WEBPACK_IMPORTED_MODULE_1__.Version.detect(os.versionRegexes, userAgent);
        return {
            current: os.name,
            version
        };
    });
};



}),
"../sand/src/main/ts/ephox/sand/detect/Version.ts": 
/*!********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/detect/Version.ts ***!
  \********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Version: () => (Version)
});
const firstMatch = (regexes, s)=>{
    for(let i = 0; i < regexes.length; i++){
        const x = regexes[i];
        if (x.test(s)) {
            return x;
        }
    }
    return undefined;
};
const find = (regexes, agent)=>{
    const r = firstMatch(regexes, agent);
    if (!r) {
        return {
            major: 0,
            minor: 0
        };
    }
    const group = (i)=>{
        return Number(agent.replace(r, '$' + i));
    };
    return nu(group(1), group(2));
};
const detect = (versionRegexes, agent)=>{
    const cleanedAgent = String(agent).toLowerCase();
    if (versionRegexes.length === 0) {
        return unknown();
    }
    return find(versionRegexes, cleanedAgent);
};
const unknown = ()=>{
    return nu(0, 0);
};
const nu = (major, minor)=>{
    return {
        major,
        minor
    };
};
const Version = {
    nu,
    detect,
    unknown
};


}),
"../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts": 
/*!***********************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/info/PlatformInfo.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PlatformInfo: () => (PlatformInfo)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const normalVersionRegex = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/;
const checkContains = (target)=>{
    return (uastring)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, target);
    };
};
const browsers = [
    // This is legacy Edge
    {
        name: 'Edge',
        versionRegexes: [
            /.*?edge\/ ?([0-9]+)\.([0-9]+)$/
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'edge/') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chrome') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'safari') && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'applewebkit');
        }
    },
    // This is Google Chrome and Chromium Edge
    {
        name: 'Chromium',
        brand: 'Chromium',
        versionRegexes: [
            /.*?chrome\/([0-9]+)\.([0-9]+).*/,
            normalVersionRegex
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chrome') && !_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'chromeframe');
        }
    },
    {
        name: 'IE',
        versionRegexes: [
            /.*?msie\ ?([0-9]+)\.([0-9]+).*/,
            /.*?rv:([0-9]+)\.([0-9]+).*/
        ],
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'msie') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'trident');
        }
    },
    // INVESTIGATE: Is this still the Opera user agent?
    {
        name: 'Opera',
        versionRegexes: [
            normalVersionRegex,
            /.*?opera\/([0-9]+)\.([0-9]+).*/
        ],
        search: checkContains('opera')
    },
    {
        name: 'Firefox',
        versionRegexes: [
            /.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/
        ],
        search: checkContains('firefox')
    },
    {
        name: 'Safari',
        versionRegexes: [
            normalVersionRegex,
            /.*?cpu os ([0-9]+)_([0-9]+).*/
        ],
        search: (uastring)=>{
            return (_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'safari') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'mobile/')) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'applewebkit');
        }
    }
];
const oses = [
    {
        name: 'Windows',
        search: checkContains('win'),
        versionRegexes: [
            /.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/
        ]
    },
    {
        name: 'iOS',
        search: (uastring)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'iphone') || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(uastring, 'ipad');
        },
        versionRegexes: [
            /.*?version\/\ ?([0-9]+)\.([0-9]+).*/,
            /.*cpu os ([0-9]+)_([0-9]+).*/,
            /.*cpu iphone os ([0-9]+)_([0-9]+).*/
        ]
    },
    {
        name: 'Android',
        search: checkContains('android'),
        versionRegexes: [
            /.*?android\ ?([0-9]+)\.([0-9]+).*/
        ]
    },
    {
        name: 'macOS',
        search: checkContains('mac os x'),
        versionRegexes: [
            /.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/
        ]
    },
    {
        name: 'Linux',
        search: checkContains('linux'),
        versionRegexes: []
    },
    {
        name: 'Solaris',
        search: checkContains('sunos'),
        versionRegexes: []
    },
    {
        name: 'FreeBSD',
        search: checkContains('freebsd'),
        versionRegexes: []
    },
    {
        name: 'ChromeOS',
        search: checkContains('cros'),
        versionRegexes: [
            /.*?chrome\/([0-9]+)\.([0-9]+).*/
        ]
    }
];
const PlatformInfo = {
    browsers: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(browsers),
    oses: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(oses)
};


}),
"../sand/src/main/ts/ephox/sand/util/Global.ts": 
/*!*****************************************************!*\
  !*** ../sand/src/main/ts/ephox/sand/util/Global.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getOrDie: () => (getOrDie)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Resolve.ts");

const unsafe = (name, scope)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.resolve(name, scope);
};
const getOrDie = (name, scope)=>{
    const actual = unsafe(name, scope);
    if (actual === undefined || actual === null) {
        throw new Error(name + ' not available on this browser');
    }
    return actual;
};



}),
"../snooker/src/main/ts/ephox/snooker/api/CellMutations.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/CellMutations.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  halve: () => (halve)
});
/* ESM import */var _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../resize/Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");


const halve = (main, other)=>{
    // Only set width on the new cell if we have a colspan of 1 (or no colspan) as we can only safely do that for cells
    // that are a single column, since we don't know the individual column widths for a cell with a colspan.
    // Instead, we'll rely on the adjustments/postAction logic to set the widths based on other cells in the column
    if (!_util_CellUtils__WEBPACK_IMPORTED_MODULE_0__.hasColspan(main)) {
        const width = _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.getGenericWidth(main);
        width.each((w)=>{
            const newWidth = w.value / 2;
            _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.setGenericWidth(main, newWidth, w.unit);
            _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.setGenericWidth(other, newWidth, w.unit);
        });
    }
};



}),
"../snooker/src/main/ts/ephox/snooker/api/CopyCols.ts": 
/*!************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/CopyCols.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copyCols: () => (copyCols)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _model_RunOperation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../model/RunOperation */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");





const constrainSpan = (element, property, value)=>{
    const currentColspan = _util_CellUtils__WEBPACK_IMPORTED_MODULE_0__.getAttrValue(element, property, 1);
    if (value === 1 || currentColspan <= 1) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.remove(element, property);
    } else {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.set(element, property, Math.min(value, currentColspan));
    }
};
const isColInRange = (minColRange, maxColRange)=>(cell)=>{
        const endCol = cell.column + cell.colspan - 1;
        const startCol = cell.column;
        return endCol >= minColRange && startCol < maxColRange;
    };
const generateColGroup = (house, minColRange, maxColRange)=>{
    if (_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.hasColumns(house)) {
        const colsToCopy = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.justColumns(house), isColInRange(minColRange, maxColRange));
        const copiedCols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(colsToCopy, (c)=>{
            const clonedCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.deep(c.element);
            constrainSpan(clonedCol, 'span', maxColRange - minColRange);
            return clonedCol;
        });
        const fakeColgroup = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag('colgroup');
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.append(fakeColgroup, copiedCols);
        return [
            fakeColgroup
        ];
    } else {
        return [];
    }
};
const generateRows = (house, minColRange, maxColRange)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(house.all, (row)=>{
        const cellsToCopy = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(row.cells, isColInRange(minColRange, maxColRange));
        const copiedCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(cellsToCopy, (cell)=>{
            const clonedCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.deep(cell.element);
            constrainSpan(clonedCell, 'colspan', maxColRange - minColRange);
            return clonedCell;
        });
        const fakeTR = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag('tr');
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.append(fakeTR, copiedCells);
        return fakeTR;
    });
const copyCols = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.fromTable(table);
    const details = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_7__.onUnlockedCells)(house, target);
    return details.map((selectedCells)=>{
        const lastSelectedCell = selectedCells[selectedCells.length - 1];
        const minColRange = selectedCells[0].column;
        const maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;
        const fakeColGroups = generateColGroup(house, minColRange, maxColRange);
        const fakeRows = generateRows(house, minColRange, maxColRange);
        return [
            ...fakeColGroups,
            ...fakeRows
        ];
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/api/CopyRows.ts": 
/*!************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/CopyRows.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copyRows: () => (copyRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _model_RunOperation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model/RunOperation */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _model_Transitions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");
/* ESM import */var _operate_Redraw__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../operate/Redraw */ "../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");






const copyRows = (table, target, generators)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.fromTable(table);
    // Cannot use onUnlockedCells like extractor here as if only cells in a locked column are selected, then this will be Optional.none and
    // there is now no way of knowing which rows are selected
    const details = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_1__.onCells)(warehouse, target);
    return details.bind((selectedCells)=>{
        const grid = _model_Transitions__WEBPACK_IMPORTED_MODULE_2__.toGrid(warehouse, generators, false);
        const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_3__.extractGridDetails(grid).rows;
        const slicedGrid = rows.slice(selectedCells[0].row, selectedCells[selectedCells.length - 1].row + selectedCells[selectedCells.length - 1].rowspan);
        // Remove any locked cells from the copied grid rows
        const filteredGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.bind(slicedGrid, (row)=>{
            const newCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.filter(row.cells, (cell)=>!cell.isLocked);
            return newCells.length > 0 ? [
                {
                    ...row,
                    cells: newCells
                }
            ] : [];
        });
        const slicedDetails = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_1__.toDetailList)(filteredGrid);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.someIf(slicedDetails.length > 0, slicedDetails);
    }).map((slicedDetails)=>_operate_Redraw__WEBPACK_IMPORTED_MODULE_6__.copy(slicedDetails));
};



}),
"../snooker/src/main/ts/ephox/snooker/api/CopySelected.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/CopySelected.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  extract: () => (extract)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _model_DetailsList__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../model/DetailsList */ "../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts");
/* ESM import */var _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../resize/ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/LayerSelector */ "../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _TableSize__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./TableSize */ "../snooker/src/main/ts/ephox/snooker/api/TableSize.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");








const statsStruct = (minRow, minCol, maxRow, maxCol, allCells, selectedCells)=>({
        minRow,
        minCol,
        maxRow,
        maxCol,
        allCells,
        selectedCells
    });
const findSelectedStats = (house, isSelected)=>{
    const totalColumns = house.grid.columns;
    const totalRows = house.grid.rows;
    /* Refactor into a method returning a struct to hide the mutation */ let minRow = totalRows;
    let minCol = totalColumns;
    let maxRow = 0;
    let maxCol = 0;
    const allCells = [];
    const selectedCells = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(house.access, (detail)=>{
        allCells.push(detail);
        if (isSelected(detail)) {
            selectedCells.push(detail);
            const startRow = detail.row;
            const endRow = startRow + detail.rowspan - 1;
            const startCol = detail.column;
            const endCol = startCol + detail.colspan - 1;
            if (startRow < minRow) {
                minRow = startRow;
            } else if (endRow > maxRow) {
                maxRow = endRow;
            }
            if (startCol < minCol) {
                minCol = startCol;
            } else if (endCol > maxCol) {
                maxCol = endCol;
            }
        }
    });
    return statsStruct(minRow, minCol, maxRow, maxCol, allCells, selectedCells);
};
const makeCell = (list, seenSelected, rowIndex)=>{
    // no need to check bounds, as anything outside this index is removed in the nested for loop
    const row = list[rowIndex].element;
    const td = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag('td');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(td, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag('br'));
    const f = seenSelected ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append : _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.prepend;
    f(row, td);
};
const fillInGaps = (list, house, stats, isSelected)=>{
    const rows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(list, (row)=>row.section !== 'colgroup');
    const totalColumns = house.grid.columns;
    const totalRows = house.grid.rows;
    // unselected cells have been deleted, now fill in the gaps in the model
    for(let i = 0; i < totalRows; i++){
        let seenSelected = false;
        for(let j = 0; j < totalColumns; j++){
            if (!(i < stats.minRow || i > stats.maxRow || j < stats.minCol || j > stats.maxCol)) {
                // if there is a hole in the table itself, or it's an unselected position, we need a cell
                const needCell = _Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.getAt(house, i, j).filter(isSelected).isNone();
                if (needCell) {
                    makeCell(rows, seenSelected, i);
                } else {
                    seenSelected = true;
                }
            }
        }
    }
};
const clean = (replica, stats, house, widthDelta)=>{
    // remove columns that are not in the new table
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(house.columns, (col)=>{
        if (col.column < stats.minCol || col.column > stats.maxCol) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(col.element);
        }
    });
    // can't use :empty selector as that will not include TRs made up of whitespace
    const emptyRows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(replica, 'tr'), (row)=>// there is no sugar method for this, and Traverse.children() does too much processing
        row.dom.childElementCount === 0);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(emptyRows, _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove);
    // If there is only one column, or only one row, delete all the colspan/rowspan
    if (stats.minCol === stats.maxCol || stats.minRow === stats.maxRow) {
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(replica, 'th,td'), (cell)=>{
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove(cell, 'rowspan');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove(cell, 'colspan');
        });
    }
    // Remove any attributes that should not be in the replicated table
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove(replica, _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.LOCKED_COL_ATTR);
    // TODO: TINY-6944 - need to figure out a better way of handling this
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove(replica, 'data-snooker-col-series'); // For advtable series column feature
    const tableSize = _TableSize__WEBPACK_IMPORTED_MODULE_9__.TableSize.getTableSize(replica);
    tableSize.adjustTableWidth(widthDelta);
// TODO TINY-6863: If using relative widths, ensure cell and column widths are redistributed
};
const getTableWidthDelta = (table, warehouse, tableSize, stats)=>{
    // short circuit entire table selected
    if (stats.minCol === 0 && warehouse.grid.columns === stats.maxCol + 1) {
        return 0;
    }
    const colWidths = _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_10__.getPixelWidths(warehouse, table, tableSize);
    const allColsWidth = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(colWidths, (acc, width)=>acc + width, 0);
    const selectedColsWidth = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(colWidths.slice(stats.minCol, stats.maxCol + 1), (acc, width)=>acc + width, 0);
    const newWidth = selectedColsWidth / allColsWidth * tableSize.pixelWidth();
    const delta = newWidth - tableSize.pixelWidth();
    return tableSize.getCellDelta(delta);
};
const extract = (table, selectedSelector)=>{
    const isSelected = (detail)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.is(detail.element, selectedSelector);
    const replica = _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.deep(table);
    const list = _model_DetailsList__WEBPACK_IMPORTED_MODULE_13__.fromTable(replica);
    const tableSize = _TableSize__WEBPACK_IMPORTED_MODULE_9__.TableSize.getTableSize(table);
    const replicaHouse = _Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.generate(list);
    const replicaStats = findSelectedStats(replicaHouse, isSelected);
    // remove unselected cells
    const selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';
    const unselectedCells = _util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.filterFirstLayer(replica, 'th,td', (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.is(cell, selector));
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(unselectedCells, _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove);
    fillInGaps(list, replicaHouse, replicaStats, isSelected);
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.fromTable(table);
    const widthDelta = getTableWidthDelta(table, house, tableSize, replicaStats);
    clean(replica, replicaStats, replicaHouse, widthDelta);
    return replica;
};



}),
"../snooker/src/main/ts/ephox/snooker/api/Generators.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Generators.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Generators: () => (Generators)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");



const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const isColgroup = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('colgroup');
const isRow = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(element) === 'tr' || isColgroup(element);
const elementToData = (element)=>{
    const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_1__.getAttrValue)(element, 'colspan', 1);
    const rowspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_1__.getAttrValue)(element, 'rowspan', 1);
    return {
        element,
        colspan,
        rowspan
    };
};
// note that `toData` seems to be only for testing
const modification = (generators, toData = elementToData)=>{
    const nuCell = (data)=>isCol(data.element) ? generators.col(data) : generators.cell(data);
    const nuRow = (data)=>isColgroup(data.element) ? generators.colgroup(data) : generators.row(data);
    const add = (element)=>{
        if (isRow(element)) {
            return nuRow({
                element
            });
        } else {
            const cell = element;
            const replacement = nuCell(toData(cell));
            recent = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some({
                item: cell,
                replacement
            });
            return replacement;
        }
    };
    let recent = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    const getOrInit = (element, comparator)=>{
        return recent.fold(()=>{
            return add(element);
        }, (p)=>{
            return comparator(element, p.item) ? p.replacement : add(element);
        });
    };
    return {
        getOrInit
    };
};
const transform = (tag)=>{
    return (generators)=>{
        const list = [];
        const find = (element, comparator)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.find(list, (x)=>{
                return comparator(x.item, element);
            });
        };
        const makeNew = (element)=>{
            // Ensure scope is never set on a td element as it's a deprecated attribute
            const attrs = tag === 'td' ? {
                scope: null
            } : {};
            const cell = generators.replace(element, tag, attrs);
            list.push({
                item: element,
                sub: cell
            });
            return cell;
        };
        const replaceOrInit = (element, comparator)=>{
            if (isRow(element) || isCol(element)) {
                return element;
            } else {
                const cell = element;
                return find(cell, comparator).fold(()=>{
                    return makeNew(cell);
                }, (p)=>{
                    return comparator(element, p.item) ? p.sub : makeNew(cell);
                });
            }
        };
        return {
            replaceOrInit
        };
    };
};
const getScopeAttribute = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getOpt(cell, 'scope').map(// Attribute can be col, colgroup, row, and rowgroup.
    // As col and colgroup are to be treated as if they are the same, lob off everything after the first three characters and there is no difference.
    (attribute)=>attribute.substr(0, 3));
const merging = (generators)=>{
    const unmerge = (cell)=>{
        const scope = getScopeAttribute(cell);
        scope.each((attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(cell, 'scope', attribute));
        return ()=>{
            const raw = generators.cell({
                element: cell,
                colspan: 1,
                rowspan: 1
            });
            // Remove any width calculations because they are no longer relevant.
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(raw, 'width');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(cell, 'width');
            scope.each((attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(raw, 'scope', attribute));
            return raw;
        };
    };
    const merge = (cells)=>{
        const getScopeProperty = ()=>{
            const stringAttributes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.cat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(cells, getScopeAttribute));
            if (stringAttributes.length === 0) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
            } else {
                const baseScope = stringAttributes[0];
                const scopes = [
                    'row',
                    'col'
                ];
                const isMixed = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(stringAttributes, (attribute)=>{
                    return attribute !== baseScope && _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.contains(scopes, attribute);
                });
                return isMixed ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none() : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(baseScope);
            }
        };
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.remove(cells[0], 'width');
        getScopeProperty().fold(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(cells[0], 'scope'), (attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(cells[0], 'scope', attribute + 'group'));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.constant(cells[0]);
    };
    return {
        unmerge,
        merge
    };
};
const Generators = {
    modification,
    transform,
    merging
};


}),
"../snooker/src/main/ts/ephox/snooker/api/OtherCells.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/OtherCells.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getOtherCells: () => (getOtherCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _model_RunOperation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/RunOperation */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _model_Transitions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");





const getUpOrLeftCells = (grid, selectedCells)=>{
    // Get rows up or at the row of the bottom right cell
    const upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row + 1);
    const upDetails = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_0__.toDetailList)(upGrid);
    // Get an array of the cells up or to the left of the bottom right cell
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(upDetails, (detail)=>{
        const slicedCells = detail.cells.slice(0, selectedCells[selectedCells.length - 1].column + 1);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(slicedCells, (cell)=>cell.element);
    });
};
const getDownOrRightCells = (grid, selectedCells)=>{
    // Get rows down or at the row of the top left cell (including rowspans)
    const downGrid = grid.slice(selectedCells[0].row + selectedCells[0].rowspan - 1, grid.length);
    const downDetails = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_0__.toDetailList)(downGrid);
    // Get an array of the cells down or to the right of the bottom right cell
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(downDetails, (detail)=>{
        const slicedCells = detail.cells.slice(selectedCells[0].column + selectedCells[0].colspan - 1, detail.cells.length);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(slicedCells, (cell)=>cell.element);
    });
};
const getOtherCells = (table, target, generators)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.fromTable(table);
    const details = (0,_model_RunOperation__WEBPACK_IMPORTED_MODULE_0__.onCells)(warehouse, target);
    return details.map((selectedCells)=>{
        const grid = _model_Transitions__WEBPACK_IMPORTED_MODULE_3__.toGrid(warehouse, generators, false);
        const { rows } = _model_GridRow__WEBPACK_IMPORTED_MODULE_4__.extractGridDetails(grid);
        const upOrLeftCells = getUpOrLeftCells(rows, selectedCells);
        const downOrRightCells = getDownOrRightCells(rows, selectedCells);
        return {
            upOrLeftCells,
            downOrRightCells
        };
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  preserveTable: () => (preserveTable),
  resizeTable: () => (resizeTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const zero = (array)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(array, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(0));
const surround = (sizes, startIndex, endIndex, results, f)=>f(sizes.slice(0, startIndex)).concat(results).concat(f(sizes.slice(endIndex)));
// Clamp positive or negative delta so that a column/row cannot be reduced past its min size
const clampDeltaHelper = (predicate)=>(sizes, index, delta, minCellSize)=>{
        if (!predicate(delta)) {
            return delta;
        } else {
            const newSize = Math.max(minCellSize, sizes[index] - Math.abs(delta));
            const diff = Math.abs(newSize - sizes[index]);
            return delta >= 0 ? diff : -diff;
        }
    };
const clampNegativeDelta = clampDeltaHelper((delta)=>delta < 0);
const clampDelta = clampDeltaHelper(_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.always);
// Preserve the size of the columns/rows and adjust the table size
const resizeTable = ()=>{
    const calcFixedDeltas = (sizes, index, next, delta, minCellSize)=>{
        const clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);
        return surround(sizes, index, next + 1, [
            clampedDelta,
            0
        ], zero);
    };
    // Calculate delta for adjusted column
    // Also need to calculate deltas for all other columns/rows to ensure they stay at the same visual width/height
    // when the table width/height is adjusted
    const calcRelativeDeltas = (sizes, index, delta, minCellSize)=>{
        // ASSUMPTION: The delta will be a percentage. This may not be correct if other relative sizing is added, so we probably
        // need a better way to calc the ratio.
        const ratio = (100 + delta) / 100;
        const newThis = Math.max(minCellSize, (sizes[index] + delta) / ratio);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, (size, idx)=>{
            const newSize = idx === index ? newThis : size / ratio;
            return newSize - size;
        });
    };
    // Calculations for the inner columns/rows
    const calcLeftEdgeDeltas = (sizes, index, next, delta, minCellSize, isRelative)=>{
        if (isRelative) {
            return calcRelativeDeltas(sizes, index, delta, minCellSize);
        } else {
            return calcFixedDeltas(sizes, index, next, delta, minCellSize);
        }
    };
    const calcMiddleDeltas = (sizes, _prev, index, next, delta, minCellSize, isRelative)=>calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize, isRelative);
    const resizeTable = (resizer, delta)=>resizer(delta);
    // Calculations for the last column/row resizer
    const calcRightEdgeDeltas = (sizes, _prev, index, delta, minCellSize, isRelative)=>{
        if (isRelative) {
            return calcRelativeDeltas(sizes, index, delta, minCellSize);
        } else {
            const clampedDelta = clampNegativeDelta(sizes, index, delta, minCellSize);
            return zero(sizes.slice(0, index)).concat([
                clampedDelta
            ]);
        }
    };
    const calcRedestributedWidths = (sizes, totalWidth, pixelDelta, isRelative)=>{
        if (isRelative) {
            const tableWidth = totalWidth + pixelDelta;
            const ratio = tableWidth / totalWidth;
            const newSizes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, (size)=>size / ratio);
            return {
                delta: ratio * 100 - 100,
                newSizes
            };
        } else {
            return {
                delta: pixelDelta,
                newSizes: sizes
            };
        }
    };
    return {
        resizeTable,
        clampTableDelta: clampNegativeDelta,
        calcLeftEdgeDeltas,
        calcMiddleDeltas,
        calcRightEdgeDeltas,
        calcRedestributedWidths
    };
};
// Distribute the column/rows and try to preserve the table size
const preserveTable = ()=>{
    // Calculations for the inner columns/rows
    const calcLeftEdgeDeltas = (sizes, index, next, delta, minCellSize)=>{
        const idx = delta >= 0 ? next : index;
        const clampedDelta = clampDelta(sizes, idx, delta, minCellSize);
        // negative delta -> deltas becomes [ neg, pos ], positive delta -> deltas becomes [ pos, neg ]
        return surround(sizes, index, next + 1, [
            clampedDelta,
            -clampedDelta
        ], zero);
    };
    const calcMiddleDeltas = (sizes, _prev, index, next, delta, minCellSize)=>calcLeftEdgeDeltas(sizes, index, next, delta, minCellSize);
    const resizeTable = (resizer, delta, isLastColumn)=>{
        if (isLastColumn) {
            resizer(delta);
        }
    };
    // Calculations for the last column/row resizer
    const calcRightEdgeDeltas = (sizes, _prev, _index, delta, _minCellSize, isRelative)=>{
        if (isRelative) {
            return zero(sizes);
        } else {
            // Distribute the delta amongst all of the columns/rows
            const diff = delta / sizes.length;
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(sizes, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(diff));
        }
    };
    const clampTableDelta = (sizes, index, delta, minCellSize, isLastColumn)=>{
        // Don't clamp the last resizer using normal methods
        // Need to allow table width to be reduced past the last column position to allow for distributive resizing
        if (isLastColumn) {
            if (delta >= 0) {
                return delta;
            } else {
                // Clamp delta so that none of the columns/rows can reduce below their min size
                const maxDelta = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldl(sizes, (a, b)=>a + b - minCellSize, 0);
                return Math.max(-maxDelta, delta);
            }
        } else {
            return clampNegativeDelta(sizes, index, delta, minCellSize);
        }
    };
    const calcRedestributedWidths = (sizes, _totalWidth, _pixelDelta, _isRelative)=>({
            delta: 0,
            newSizes: sizes
        });
    return {
        resizeTable,
        clampTableDelta,
        calcLeftEdgeDeltas,
        calcMiddleDeltas,
        calcRightEdgeDeltas,
        calcRedestributedWidths
    };
};



}),
"../snooker/src/main/ts/ephox/snooker/api/ResizeWire.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/ResizeWire.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ResizeWire: () => (ResizeWire)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts");


const only = (element, isResizable)=>{
    // If element is a 'document', use the document element ('HTML' tag) for appending.
    const parent = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isDocument(element) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.documentElement(element) : element;
    return {
        parent: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(parent),
        view: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(element),
        dragContainer: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(parent),
        origin: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant((0,_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.SugarPosition)(0, 0)),
        isResizable
    };
};
const detached = (editable, chrome, isResizable)=>{
    const origin = ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.absolute(chrome);
    return {
        parent: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(chrome),
        view: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(editable),
        dragContainer: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(chrome),
        origin,
        isResizable
    };
};
const body = (editable, isResizable)=>{
    return {
        parent: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(editable),
        view: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(editable),
        dragContainer: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(editable),
        origin: ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.absolute(editable),
        isResizable
    };
};
const ResizeWire = {
    only,
    detached,
    body
};


}),
"../snooker/src/main/ts/ephox/snooker/api/Sizes.ts": 
/*!*********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Sizes.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getPercentTableHeight: () => (getPercentTableHeight),
  getPercentTableWidth: () => (getPercentTableWidth),
  isNoneSizing: () => (isNoneSizing),
  isPercentSizing: () => (isPercentSizing),
  isPixelSizing: () => (isPixelSizing),
  redistribute: () => (redistribute)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../resize/ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../resize/Redistribution */ "../snooker/src/main/ts/ephox/snooker/resize/Redistribution.ts");
/* ESM import */var _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../resize/Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");







const redistributeToW = (newWidths, cells, unit)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(cells, (cell)=>{
        const widths = newWidths.slice(cell.column, cell.colspan + cell.column);
        const w = _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__.sum(widths, _util_CellUtils__WEBPACK_IMPORTED_MODULE_2__.minWidth());
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell.element, 'width', w + unit);
    });
};
const redistributeToColumns = (newWidths, columns, unit)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(columns, (column, index)=>{
        const width = _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__.sum([
            newWidths[index]
        ], _util_CellUtils__WEBPACK_IMPORTED_MODULE_2__.minWidth());
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(column.element, 'width', width + unit);
    });
};
const redistributeToH = (newHeights, rows, cells)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(cells, (cell)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.remove(cell.element, 'height');
    });
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(rows, (row, i)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(row.element, 'height', newHeights[i]);
    });
};
const getUnit = (newSize)=>{
    return _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__.validate(newSize).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.constant('px'), _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.constant('px'), _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.constant('%'));
};
// Procedure to resize table dimensions to optWidth x optHeight and redistribute cell and row dimensions.
// Updates CSS of the table, rows, and cells.
const redistribute = (table, optWidth, optHeight)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.fromTable(table);
    const rows = warehouse.all;
    const cells = _Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.justCells(warehouse);
    const columns = _Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.justColumns(warehouse);
    optWidth.each((newWidth)=>{
        const widthUnit = getUnit(newWidth);
        const totalWidth = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.get(table);
        const oldWidths = _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_7__.getRawWidths(warehouse, table);
        const nuWidths = _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__.redistribute(oldWidths, totalWidth, newWidth);
        if (_Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.hasColumns(warehouse)) {
            redistributeToColumns(nuWidths, columns, widthUnit);
        } else {
            redistributeToW(nuWidths, cells, widthUnit);
        }
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(table, 'width', newWidth);
    });
    optHeight.each((newHeight)=>{
        const totalHeight = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.get(table);
        const oldHeights = _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_7__.getRawHeights(warehouse, table);
        const nuHeights = _resize_Redistribution__WEBPACK_IMPORTED_MODULE_1__.redistribute(oldHeights, totalHeight, newHeight);
        redistributeToH(nuHeights, rows, cells);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(table, 'height', newHeight);
    });
};
const isPercentSizing = _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__.isPercentSizing;
const isPixelSizing = _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__.isPixelSizing;
const isNoneSizing = _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__.isNoneSizing;
const getPercentTableWidth = _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__.getPercentTableWidth;
const getPercentTableHeight = _resize_Sizes__WEBPACK_IMPORTED_MODULE_9__.getPercentTableHeight;



}),
"../snooker/src/main/ts/ephox/snooker/api/Structs.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Structs.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  address: () => (address),
  bounds: () => (bounds),
  colgroup: () => (colgroup),
  columnext: () => (columnext),
  coords: () => (coords),
  detail: () => (detail),
  detailnew: () => (detailnew),
  dimension: () => (dimension),
  dimensions: () => (dimensions),
  elementnew: () => (elementnew),
  extended: () => (extended),
  grid: () => (grid),
  isValidSection: () => (isValidSection),
  rowcells: () => (rowcells),
  rowdetail: () => (rowdetail),
  rowdetailnew: () => (rowdetailnew)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const validSectionList = [
    'tfoot',
    'thead',
    'tbody',
    'colgroup'
];
const isValidSection = (parentName)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.contains(validSectionList, parentName);
const dimension = (width, height)=>({
        width,
        height
    });
const dimensions = (width, height)=>({
        width,
        height
    });
const grid = (rows, columns)=>({
        rows,
        columns
    });
const address = (row, column)=>({
        row,
        column
    });
const coords = (x, y)=>({
        x,
        y
    });
const detail = (element, rowspan, colspan)=>({
        element,
        rowspan,
        colspan
    });
const detailnew = (element, rowspan, colspan, isNew)=>({
        element,
        rowspan,
        colspan,
        isNew
    });
const extended = (element, rowspan, colspan, row, column, isLocked)=>({
        element,
        rowspan,
        colspan,
        row,
        column,
        isLocked
    });
const rowdetail = (element, cells, section)=>({
        element,
        cells,
        section
    });
const rowdetailnew = (element, cells, section, isNew)=>({
        element,
        cells,
        section,
        isNew
    });
const elementnew = (element, isNew, isLocked)=>({
        element,
        isNew,
        isLocked
    });
const rowcells = (element, cells, section, isNew)=>({
        element,
        cells,
        section,
        isNew
    });
const bounds = (startRow, startCol, finishRow, finishCol)=>({
        startRow,
        startCol,
        finishRow,
        finishCol
    });
const columnext = (element, colspan, column)=>({
        element,
        colspan,
        column
    });
const colgroup = (element, columns)=>({
        element,
        columns
    });



}),
"../snooker/src/main/ts/ephox/snooker/api/TableContent.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableContent.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  merge: () => (merge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomStructure.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");



const merge = (cells)=>{
    const isBr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('br');
    const advancedBr = (children)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(children, (c)=>{
            return isBr(c) || _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isText(c) && _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(c).trim().length === 0;
        });
    };
    const isListItem = (el)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(el) === 'li' || _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.ancestor(el, _ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isList).isSome();
    };
    const siblingIsBlock = (el)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.nextSibling(el).map((rightSibling)=>{
            if (_ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isBlock(rightSibling)) {
                return true;
            }
            if (_ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isEmptyTag(rightSibling)) {
                return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(rightSibling) === 'img' ? false : true;
            }
            return false;
        }).getOr(false);
    };
    const markCell = (cell)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.last(cell).bind((rightEdge)=>{
            const rightSiblingIsBlock = siblingIsBlock(rightEdge);
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.parent(rightEdge).map((parent)=>{
                return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || _ephox_robin__WEBPACK_IMPORTED_MODULE_4__.isBlock(parent) && !_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.eq(cell, parent) ? [] : [
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.SugarElement.fromTag('br')
                ];
            });
        }).getOr([]);
    };
    const markContent = ()=>{
        const content = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(cells, (cell)=>{
            const children = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.children(cell);
            return advancedBr(children) ? [] : children.concat(markCell(cell));
        });
        return content.length === 0 ? [
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.SugarElement.fromTag('br')
        ] : content;
    };
    const contents = markContent();
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.empty(cells[0]);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.append(cells[0], contents);
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableConversions.ts": 
/*!********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableConversions.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  convertToNoneSizeWidth: () => (convertToNoneSizeWidth),
  convertToPercentSizeWidth: () => (convertToPercentSizeWidth),
  convertToPixelSizeHeight: () => (convertToPixelSizeHeight),
  convertToPixelSizeWidth: () => (convertToPixelSizeWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../resize/Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");
/* ESM import */var _Sizes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Sizes */ "../snooker/src/main/ts/ephox/snooker/api/Sizes.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");





// Remove legacy sizing attributes such as "width"
const cleanupLegacyAttributes = (element)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.remove(element, 'width');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.remove(element, 'height');
};
const convertToPercentSizeWidth = (table)=>{
    const newWidth = _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.getPercentTableWidth(table);
    (0,_Sizes__WEBPACK_IMPORTED_MODULE_2__.redistribute)(table, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(newWidth), _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none());
    cleanupLegacyAttributes(table);
};
const convertToPixelSizeWidth = (table)=>{
    const newWidth = _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelTableWidth(table);
    (0,_Sizes__WEBPACK_IMPORTED_MODULE_2__.redistribute)(table, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(newWidth), _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none());
    cleanupLegacyAttributes(table);
};
const convertToPixelSizeHeight = (table)=>{
    const newHeight = _resize_Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelTableHeight(table);
    (0,_Sizes__WEBPACK_IMPORTED_MODULE_2__.redistribute)(table, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none(), _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(newHeight));
    cleanupLegacyAttributes(table);
};
const convertToNoneSizeWidth = (table)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(table, 'width');
    const columns = _TableLookup__WEBPACK_IMPORTED_MODULE_5__.columns(table);
    const rowElements = columns.length > 0 ? columns : _TableLookup__WEBPACK_IMPORTED_MODULE_5__.cells(table);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.each(rowElements, (cell)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(cell, 'width');
        cleanupLegacyAttributes(cell);
    });
    cleanupLegacyAttributes(table);
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableFill.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableFill.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  cellOperations: () => (cellOperations),
  paste: () => (paste)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const transferableAttributes = {
    scope: [
        'row',
        'col'
    ]
};
// NOTE: This may create a td instead of a th, but it is for irregular table handling.
const createCell = (doc)=>()=>{
        const td = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('td', doc.dom);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.append(td, _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('br', doc.dom));
        return td;
    };
const createCol = (doc)=>()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('col', doc.dom);
    };
const createColgroup = (doc)=>()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('colgroup', doc.dom);
    };
const createRow = (doc)=>()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('tr', doc.dom);
    };
const replace = (cell, tag, attrs)=>{
    const replica = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.copy(cell, tag);
    // TODO: Snooker passes null to indicate 'remove attribute'
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(attrs, (v, k)=>{
        if (v === null) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(replica, k);
        } else {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(replica, k, v);
        }
    });
    return replica;
};
// eslint-disable-next-line @tinymce/prefer-fun
const pasteReplace = (cell)=>{
    // TODO: check for empty content and don't return anything
    return cell;
};
const cloneFormats = (oldCell, newCell, formats)=>{
    const first = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.first(oldCell);
    return first.map((firstText)=>{
        const formatSelector = formats.join(',');
        // Find the ancestors of the first text node that match the given formats.
        const parents = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.ancestors(firstText, formatSelector, (element)=>{
            return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.eq(element, oldCell);
        });
        // Add the matched ancestors to the new cell, then return the new cell.
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.foldr(parents, (last, parent)=>{
            const clonedFormat = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.shallow(parent);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.append(last, clonedFormat);
            return clonedFormat;
        }, newCell);
    }).getOr(newCell);
};
const cloneAppropriateAttributes = (original, clone)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(transferableAttributes, (validAttributes, attributeName)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getOpt(original, attributeName).filter((attribute)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.contains(validAttributes, attribute)).each((attribute)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(clone, attributeName, attribute)));
};
const cellOperations = (mutate, doc, formatsToClone)=>{
    const cloneCss = (prev, clone)=>{
        // inherit the style and width, dont inherit the row height
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.copy(prev.element, clone);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.remove(clone, 'height');
        // dont inherit the width of spanning columns
        if (prev.colspan !== 1) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.remove(clone, 'width');
        }
    };
    const newCell = (prev)=>{
        const td = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag(_ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.name(prev.element), doc.dom);
        const formats = formatsToClone.getOr([
            'strong',
            'em',
            'b',
            'i',
            'span',
            'font',
            'h1',
            'h2',
            'h3',
            'h4',
            'h5',
            'h6',
            'p',
            'div'
        ]);
        // If we aren't cloning the child formatting, we can just give back the new td immediately.
        const lastNode = formats.length > 0 ? cloneFormats(prev.element, td, formats) : td;
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.append(lastNode, _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('br'));
        cloneCss(prev, td);
        cloneAppropriateAttributes(prev.element, td);
        mutate(prev.element, td);
        return td;
    };
    const newCol = (prev)=>{
        const col = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag(_ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.name(prev.element), doc.dom);
        cloneCss(prev, col);
        mutate(prev.element, col);
        return col;
    };
    return {
        col: newCol,
        colgroup: createColgroup(doc),
        row: createRow(doc),
        cell: newCell,
        replace,
        colGap: createCol(doc),
        gap: createCell(doc)
    };
};
const paste = (doc)=>{
    return {
        col: createCol(doc),
        colgroup: createColgroup(doc),
        row: createRow(doc),
        cell: createCell(doc),
        replace: pasteReplace,
        colGap: createCol(doc),
        gap: createCell(doc)
    };
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableGridSize.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableGridSize.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getGridSize: () => (getGridSize)
});
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");

const getGridSize = (table)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.fromTable(table);
    return warehouse.grid;
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  attr: () => (attr),
  cell: () => (cell),
  cells: () => (cells),
  columnGroups: () => (columnGroups),
  columns: () => (columns),
  firstCell: () => (firstCell),
  grid: () => (grid),
  neighbourCells: () => (neighbourCells),
  neighbourRows: () => (neighbourRows),
  notCell: () => (notCell),
  row: () => (row),
  rows: () => (rows),
  table: () => (table)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/LayerSelector */ "../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");





// lookup inside this table
const lookup = (tags, element, isRoot = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.never)=>{
    // If the element we're inspecting is the root, we definitely don't want it.
    if (isRoot(element)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
    // This looks a lot like SelectorFind.closest, with one big exception - the isRoot check.
    // The code here will look for parents if passed a table, SelectorFind.closest with that specific isRoot check won't.
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains(tags, _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.name(element))) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(element);
    }
    const isRootOrUpperTable = (elm)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.is(elm, 'table') || isRoot(elm);
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.ancestor(element, tags.join(','), isRootOrUpperTable);
};
/*
 * Identify the optional cell that element represents.
 */ const cell = (element, isRoot)=>lookup([
        'td',
        'th'
    ], element, isRoot);
const cells = (ancestor)=>_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(ancestor, 'th,td');
const columns = (ancestor)=>{
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.is(ancestor, 'colgroup')) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(ancestor, 'col');
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.bind(columnGroups(ancestor), (columnGroup)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(columnGroup, 'col'));
    }
};
const notCell = (element, isRoot)=>lookup([
        'caption',
        'tr',
        'tbody',
        'tfoot',
        'thead'
    ], element, isRoot);
const neighbours = (selector)=>(element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.parent(element).map((parent)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(parent, selector));
const neighbourCells = neighbours('th,td');
const neighbourRows = neighbours('tr');
const firstCell = (ancestor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.descendant(ancestor, 'th,td');
const table = (element, isRoot)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.closest(element, 'table', isRoot);
const row = (element, isRoot)=>lookup([
        'tr'
    ], element, isRoot);
const rows = (ancestor)=>_util_LayerSelector__WEBPACK_IMPORTED_MODULE_6__.firstLayer(ancestor, 'tr');
const columnGroups = (ancestor)=>table(ancestor).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant([]), (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.children(table, 'colgroup'));
const attr = (element, property)=>(0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_9__.getAttrValue)(element, property);
const grid = (element, rowProp, colProp)=>{
    const rowsCount = attr(element, rowProp);
    const cols = attr(element, colProp);
    return _Structs__WEBPACK_IMPORTED_MODULE_10__.grid(rowsCount, cols);
};



}),
"../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  eraseColumns: () => (eraseColumns),
  eraseRows: () => (eraseRows),
  getCellsType: () => (getCellsType),
  getColumnsType: () => (getColumnsType),
  getRowsType: () => (getRowsType),
  insertColumnAfter: () => (insertColumnAfter),
  insertColumnBefore: () => (insertColumnBefore),
  insertColumnsAfter: () => (insertColumnsAfter),
  insertColumnsBefore: () => (insertColumnsBefore),
  insertRowAfter: () => (insertRowAfter),
  insertRowBefore: () => (insertRowBefore),
  insertRowsAfter: () => (insertRowsAfter),
  insertRowsBefore: () => (insertRowsBefore),
  makeCellHeader: () => (makeCellHeader),
  makeCellsHeader: () => (makeCellsHeader),
  makeColumnHeader: () => (makeColumnHeader),
  makeColumnsHeader: () => (makeColumnsHeader),
  makeRowBody: () => (makeRowBody),
  makeRowFooter: () => (makeRowFooter),
  makeRowHeader: () => (makeRowHeader),
  makeRowsBody: () => (makeRowsBody),
  makeRowsFooter: () => (makeRowsFooter),
  makeRowsHeader: () => (makeRowsHeader),
  mergeCells: () => (mergeCells),
  pasteCells: () => (pasteCells),
  pasteColsAfter: () => (pasteColsAfter),
  pasteColsBefore: () => (pasteColsBefore),
  pasteRowsAfter: () => (pasteRowsAfter),
  pasteRowsBefore: () => (pasteRowsBefore),
  splitCellIntoColumns: () => (splitCellIntoColumns),
  splitCellIntoRows: () => (splitCellIntoRows),
  unmakeCellHeader: () => (unmakeCellHeader),
  unmakeCellsHeader: () => (unmakeCellsHeader),
  unmakeColumnHeader: () => (unmakeColumnHeader),
  unmakeColumnsHeader: () => (unmakeColumnsHeader),
  unmergeCells: () => (unmergeCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _lookup_Blocks__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../lookup/Blocks */ "../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _model_DetailsList__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../model/DetailsList */ "../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../model/RunOperation */ "../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts");
/* ESM import */var _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../model/TableMerge */ "../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts");
/* ESM import */var _model_Transitions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../model/Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");
/* ESM import */var _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../operate/MergingOperations */ "../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts");
/* ESM import */var _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../operate/ModificationOperations */ "../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts");
/* ESM import */var _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../operate/TransformOperations */ "../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts");
/* ESM import */var _resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../resize/Adjustments */ "../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts");
/* ESM import */var _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/ColUtils */ "../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts");
/* ESM import */var _Generators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Generators */ "../snooker/src/main/ts/ephox/snooker/api/Generators.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _TableContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./TableContent */ "../snooker/src/main/ts/ephox/snooker/api/TableContent.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");



















// This uses a slight variation to the default `ContentEditable.isEditable` behaviour,
// as when the element is detached we assume it is editable because it is a new cell.
const isEditable = (elem)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isEditable(elem, true);
const prune = (table)=>{
    const cells = _TableLookup__WEBPACK_IMPORTED_MODULE_1__.cells(table);
    if (cells.length === 0) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.remove(table);
    }
};
const outcome = (grid, cursor)=>({
        grid,
        cursor
    });
const findEditableCursorPosition = (rows)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findMap(rows, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findMap(row.cells, (cell)=>{
            const elem = cell.element;
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.someIf(isEditable(elem), elem);
        }));
const elementFromGrid = (grid, row, column)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(rows[row]?.cells[column]?.element).filter(isEditable)// Fallback to the first valid position in the table
    .orThunk(()=>findEditableCursorPosition(rows));
};
const bundle = (grid, row, column)=>{
    const cursorElement = elementFromGrid(grid, row, column);
    return outcome(grid, cursorElement);
};
const uniqueRows = (details)=>{
    const rowCompilation = (rest, detail)=>{
        const rowExists = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(rest, (currentDetail)=>currentDetail.row === detail.row);
        return rowExists ? rest : rest.concat([
            detail
        ]);
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(details, rowCompilation, []).sort((detailA, detailB)=>detailA.row - detailB.row);
};
const opInsertRowBefore = (grid, detail, comparator, genWrappers)=>{
    const example = detail.row;
    const targetIndex = detail.row;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, targetIndex, detail.column);
};
const opInsertRowsBefore = (grid, details, comparator, genWrappers)=>{
    const targetIndex = details[0].row;
    const rows = uniqueRows(details);
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(rows, (acc, row)=>{
        const newG = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(acc.grid, targetIndex, row.row + acc.delta, comparator, genWrappers.getOrInit);
        return {
            grid: newG,
            delta: acc.delta + 1
        };
    }, {
        grid,
        delta: 0
    }).grid;
    return bundle(newGrid, targetIndex, details[0].column);
};
const opInsertRowAfter = (grid, detail, comparator, genWrappers)=>{
    const example = detail.row;
    const targetIndex = detail.row + detail.rowspan;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, targetIndex, detail.column);
};
const opInsertRowsAfter = (grid, details, comparator, genWrappers)=>{
    const rows = uniqueRows(details);
    const target = rows[rows.length - 1];
    const targetIndex = target.row + target.rowspan;
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(rows, (newG, row)=>{
        return _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertRowAt(newG, targetIndex, row.row, comparator, genWrappers.getOrInit);
    }, grid);
    return bundle(newGrid, targetIndex, details[0].column);
};
const opInsertColumnBefore = (grid, extractDetail, comparator, genWrappers)=>{
    const detail = extractDetail.detail;
    const example = detail.column;
    const targetIndex = detail.column;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, targetIndex);
};
const opInsertColumnsBefore = (grid, extractDetail, comparator, genWrappers)=>{
    const details = extractDetail.details;
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const targetIndex = columns[0].column;
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(columns, (acc, col)=>{
        const newG = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(acc.grid, targetIndex, col.column + acc.delta, comparator, genWrappers.getOrInit);
        return {
            grid: newG,
            delta: acc.delta + 1
        };
    }, {
        grid,
        delta: 0
    }).grid;
    return bundle(newGrid, details[0].row, targetIndex);
};
const opInsertColumnAfter = (grid, extractDetail, comparator, genWrappers)=>{
    const detail = extractDetail.detail;
    const example = detail.column;
    const targetIndex = detail.column + detail.colspan;
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, targetIndex);
};
const opInsertColumnsAfter = (grid, extractDetail, comparator, genWrappers)=>{
    const details = extractDetail.details;
    const target = details[details.length - 1];
    const targetIndex = target.column + target.colspan;
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(columns, (newG, col)=>{
        return _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.insertColumnAt(newG, targetIndex, col.column, comparator, genWrappers.getOrInit);
    }, grid);
    return bundle(newGrid, details[0].row, targetIndex);
};
const opMakeColumnHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumn(initialGrid, detail.column, true, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opMakeColumnsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const columnIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (detail)=>detail.column);
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumns(initialGrid, columnIndexes, true, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opMakeCellHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCell(initialGrid, detail, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opMakeCellsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opUnmakeColumnHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumn(initialGrid, detail.column, false, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opUnmakeColumnsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    const columnIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (detail)=>detail.column);
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceColumns(initialGrid, columnIndexes, false, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const opUnmakeCellHeader = (initialGrid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCell(initialGrid, detail, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opUnmakeCellsHeader = (initialGrid, details, comparator, genWrappers)=>{
    const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceCells(initialGrid, details, comparator, genWrappers.replaceOrInit);
    return bundle(newGrid, details[0].row, details[0].column);
};
const makeRowSection = (section, applyScope)=>(grid, detail, comparator, genWrappers, tableSection)=>{
        const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceRow(grid, detail.row, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);
        return bundle(newGrid, detail.row, detail.column);
    };
const makeRowsSection = (section, applyScope)=>(initialGrid, details, comparator, genWrappers, tableSection)=>{
        const rows = uniqueRows(details);
        const rowIndexes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(rows, (detail)=>detail.row);
        const newGrid = _operate_TransformOperations__WEBPACK_IMPORTED_MODULE_9__.replaceRows(initialGrid, rowIndexes, section, applyScope, comparator, genWrappers.replaceOrInit, tableSection);
        return bundle(newGrid, details[0].row, details[0].column);
    };
const opMakeRowHeader = makeRowSection('thead', true);
const opMakeRowsHeader = makeRowsSection('thead', true);
const opMakeRowBody = makeRowSection('tbody', false);
const opMakeRowsBody = makeRowsSection('tbody', false);
const opMakeRowFooter = makeRowSection('tfoot', false);
const opMakeRowsFooter = makeRowsSection('tfoot', false);
const opSplitCellIntoColumns = (grid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.splitCellIntoColumns(grid, detail.row, detail.column, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opSplitCellIntoRows = (grid, detail, comparator, genWrappers)=>{
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.splitCellIntoRows(grid, detail.row, detail.column, comparator, genWrappers.getOrInit);
    return bundle(newGrid, detail.row, detail.column);
};
const opEraseColumns = (grid, extractDetail, _comparator, _genWrappers)=>{
    const columns = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(extractDetail.details);
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.deleteColumnsAt(grid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(columns, (column)=>column.column));
    const maxColIndex = newGrid.length > 0 ? newGrid[0].cells.length - 1 : 0;
    return bundle(newGrid, columns[0].row, Math.min(columns[0].column, maxColIndex));
};
const opEraseRows = (grid, details, _comparator, _genWrappers)=>{
    const rows = uniqueRows(details);
    const newGrid = _operate_ModificationOperations__WEBPACK_IMPORTED_MODULE_7__.deleteRowsAt(grid, rows[0].row, rows[rows.length - 1].row);
    const maxRowIndex = Math.max(_model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(newGrid).rows.length - 1, 0);
    return bundle(newGrid, Math.min(details[0].row, maxRowIndex), details[0].column);
};
const opMergeCells = (grid, mergable, comparator, genWrappers)=>{
    const cells = mergable.cells;
    _TableContent__WEBPACK_IMPORTED_MODULE_10__.merge(cells);
    const newGrid = _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__.merge(grid, mergable.bounds, comparator, genWrappers.merge(cells));
    return outcome(newGrid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(cells[0]));
};
const opUnmergeCells = (grid, unmergable, comparator, genWrappers)=>{
    const unmerge = (b, cell)=>_operate_MergingOperations__WEBPACK_IMPORTED_MODULE_11__.unmerge(b, cell, comparator, genWrappers.unmerge(cell));
    const newGrid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldr(unmergable, unmerge, grid);
    return outcome(newGrid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(unmergable[0]));
};
const opPasteCells = (grid, pasteDetails, comparator, _genWrappers)=>{
    const gridify = (table, generators)=>{
        const wh = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
        return _model_Transitions__WEBPACK_IMPORTED_MODULE_13__.toGrid(wh, generators, true);
    };
    const gridB = gridify(pasteDetails.clipboard, pasteDetails.generators);
    const startAddress = _Structs__WEBPACK_IMPORTED_MODULE_14__.address(pasteDetails.row, pasteDetails.column);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.merge(startAddress, grid, gridB, pasteDetails.generators, comparator);
    return mergedGrid.fold(()=>outcome(grid, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(pasteDetails.element)), (newGrid)=>{
        return bundle(newGrid, pasteDetails.row, pasteDetails.column);
    });
};
const gridifyRows = (rows, generators, context)=>{
    const pasteDetails = _model_DetailsList__WEBPACK_IMPORTED_MODULE_16__.fromPastedRows(rows, context.section);
    const wh = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.generate(pasteDetails);
    return _model_Transitions__WEBPACK_IMPORTED_MODULE_13__.toGrid(wh, generators, true);
};
const opPasteColsBefore = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[0].column;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertCols(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);
};
const opPasteColsAfter = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[pasteDetails.cells.length - 1].column + pasteDetails.cells[pasteDetails.cells.length - 1].colspan;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertCols(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, index);
};
const opPasteRowsBefore = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[0].row;
    const context = rows[index];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertRows(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, pasteDetails.cells[0].row, pasteDetails.cells[0].column);
};
const opPasteRowsAfter = (grid, pasteDetails, comparator, _genWrappers)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_5__.extractGridDetails(grid).rows;
    const index = pasteDetails.cells[pasteDetails.cells.length - 1].row + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan;
    const context = rows[pasteDetails.cells[0].row];
    const gridB = gridifyRows(pasteDetails.clipboard, pasteDetails.generators, context);
    const mergedGrid = _model_TableMerge__WEBPACK_IMPORTED_MODULE_15__.insertRows(index, grid, gridB, pasteDetails.generators, comparator);
    return bundle(mergedGrid, index, pasteDetails.cells[0].column);
};
const opGetColumnsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind((selectedCells)=>{
        const lastSelectedCell = selectedCells[selectedCells.length - 1];
        const minColRange = selectedCells[0].column;
        const maxColRange = lastSelectedCell.column + lastSelectedCell.colspan;
        const selectedColumnCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.flatten(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(house.all, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(row.cells, (cell)=>cell.column >= minColRange && cell.column < maxColRange)));
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonCellType)(selectedColumnCells);
    }).getOr('');
};
const opGetCellsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind(_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonCellType).getOr('');
};
const opGetRowsType = (table, target)=>{
    const house = _Warehouse__WEBPACK_IMPORTED_MODULE_12__.Warehouse.fromTable(table);
    const details = _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(house, target);
    return details.bind((selectedCells)=>{
        const lastSelectedCell = selectedCells[selectedCells.length - 1];
        const minRowRange = selectedCells[0].row;
        const maxRowRange = lastSelectedCell.row + lastSelectedCell.rowspan;
        const selectedRows = house.all.slice(minRowRange, maxRowRange);
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_18__.findCommonRowType)(selectedRows);
    }).getOr('');
};
// Only column modifications force a resizing. Everything else just tries to preserve the table as is.
const resize = (table, list, details, behaviours)=>_resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__.adjustWidthTo(table, list, details, behaviours.sizing);
const adjustAndRedistributeWidths = (table, list, details, behaviours)=>_resize_Adjustments__WEBPACK_IMPORTED_MODULE_19__.adjustAndRedistributeWidths(table, list, details, behaviours.sizing, behaviours.resize);
// Custom selection extractors
const firstColumnIsLocked = (_warehouse, details)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(details, (detail)=>detail.column === 0 && detail.isLocked);
// TODO: Maybe have an Arr.existsR which would be more efficient for most cases below
const lastColumnIsLocked = (warehouse, details)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.exists(details, (detail)=>detail.column + detail.colspan >= warehouse.grid.columns && detail.isLocked);
const getColumnsWidth = (warehouse, details)=>{
    const columns = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_20__.columns(warehouse);
    const uniqueCols = _util_ColUtils__WEBPACK_IMPORTED_MODULE_8__.uniqueColumns(details);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(uniqueCols, (acc, detail)=>{
        const column = columns[detail.column];
        const colWidth = column.map(_ephox_sugar__WEBPACK_IMPORTED_MODULE_21__.getOuter).getOr(0);
        return acc + colWidth;
    }, 0);
};
const insertColumnExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell(warehouse, target).filter((detail)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, [
                detail
            ]);
        }).map((detail)=>({
                detail,
                pixelDelta: getColumnsWidth(warehouse, [
                    detail
                ])
            }));
const insertColumnsExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells(warehouse, target).filter((details)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, details);
        }).map((details)=>({
                details,
                pixelDelta: getColumnsWidth(warehouse, details)
            }));
const eraseColumnsExtractor = (warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells(warehouse, target).map((details)=>({
            details,
            pixelDelta: -getColumnsWidth(warehouse, details)
        }));
const pasteColumnsExtractor = (before)=>(warehouse, target)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor(warehouse, target).filter((details)=>{
            const checkLocked = before ? firstColumnIsLocked : lastColumnIsLocked;
            return !checkLocked(warehouse, details.cells);
        });
const headerCellGenerator = _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.transform('th');
const bodyCellGenerator = _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.transform('td');
const insertRowBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowsBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertRowsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertRowsAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnBefore, insertColumnExtractor(true), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnsBefore, insertColumnsExtractor(true), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnAfter, insertColumnExtractor(false), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const insertColumnsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opInsertColumnsAfter, insertColumnsExtractor(false), adjustAndRedistributeWidths, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const splitCellIntoColumns = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opSplitCellIntoColumns, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const splitCellIntoRows = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opSplitCellIntoRows, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const eraseColumns = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opEraseColumns, eraseColumnsExtractor, adjustAndRedistributeWidths, prune, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const eraseRows = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opEraseRows, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, prune, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const makeColumnHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeColumnHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeColumnsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeColumnsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const unmakeColumnHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeColumnHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const unmakeColumnsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeColumnsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeRowsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeRowBody = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowBody, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowsBody = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsBody, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowFooter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowFooter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeRowsFooter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeRowsFooter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const makeCellHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeCellHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const makeCellsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMakeCellsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, headerCellGenerator, table, target, generators, behaviours);
const unmakeCellHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeCellHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCell, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const unmakeCellsHeader = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmakeCellsHeader, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, bodyCellGenerator, table, target, generators, behaviours);
const mergeCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opMergeCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedMergable, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.merging, table, target, generators, behaviours);
const unmergeCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opUnmergeCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onUnlockedUnmergable, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.merging, table, target, generators, behaviours);
const pasteCells = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteCells, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPaste, resize, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteColsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteColsBefore, pasteColumnsExtractor(true), _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteColsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteColsAfter, pasteColumnsExtractor(false), _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteRowsBefore = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteRowsBefore, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const pasteRowsAfter = (table, target, generators, behaviours)=>_model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.run(opPasteRowsAfter, _model_RunOperation__WEBPACK_IMPORTED_MODULE_17__.onPasteByEditor, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.noop, _Generators__WEBPACK_IMPORTED_MODULE_22__.Generators.modification, table, target, generators, behaviours);
const getColumnsType = opGetColumnsType;
const getCellsType = opGetCellsType;
const getRowsType = opGetRowsType;


}),
"../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TablePositions.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getBox: () => (getBox),
  intercepts: () => (intercepts),
  moveBy: () => (moveBy),
  nestedIntercepts: () => (nestedIntercepts)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selection/CellFinder */ "../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts");
/* ESM import */var _selection_CellGroup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/CellGroup */ "../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");






const moveBy = (cell, deltaRow, deltaColumn)=>{
    return _TableLookup__WEBPACK_IMPORTED_MODULE_0__.table(cell).bind((table)=>{
        const warehouse = getWarehouse(table);
        return _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.moveBy(warehouse, cell, deltaRow, deltaColumn);
    });
};
const intercepts = (table, first, last)=>{
    const warehouse = getWarehouse(table);
    return _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.intercepts(warehouse, first, last);
};
const nestedIntercepts = (table, first, firstTable, last, lastTable)=>{
    const warehouse = getWarehouse(table);
    const optStartCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(table, firstTable) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(first) : _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.parentCell(warehouse, first);
    const optLastCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq(table, lastTable) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(last) : _selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.parentCell(warehouse, last);
    return optStartCell.bind((startCell)=>optLastCell.bind((lastCell)=>_selection_CellFinder__WEBPACK_IMPORTED_MODULE_1__.intercepts(warehouse, startCell, lastCell)));
};
const getBox = (table, first, last)=>{
    const warehouse = getWarehouse(table);
    return _selection_CellGroup__WEBPACK_IMPORTED_MODULE_4__.getBox(warehouse, first, last);
};
// Private method ... keep warehouse in snooker, please.
const getWarehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.fromTable;



}),
"../snooker/src/main/ts/ephox/snooker/api/TableResize.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableResize.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableResize: () => (TableResize)
});
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");
/* ESM import */var _resize_Adjustments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../resize/Adjustments */ "../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts");
/* ESM import */var _resize_BarManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../resize/BarManager */ "../snooker/src/main/ts/ephox/snooker/resize/BarManager.ts");
/* ESM import */var _resize_BarPositions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../resize/BarPositions */ "../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts");




const create = (wire, resizing, lazySizing)=>{
    const hdirection = _resize_BarPositions__WEBPACK_IMPORTED_MODULE_0__.height;
    const vdirection = _resize_BarPositions__WEBPACK_IMPORTED_MODULE_0__.width;
    const manager = (0,_resize_BarManager__WEBPACK_IMPORTED_MODULE_1__.BarManager)(wire);
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_2__.create({
        beforeResize: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_3__.Event)([
            'table',
            'type'
        ]),
        afterResize: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_3__.Event)([
            'table',
            'type'
        ]),
        startDrag: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_3__.Event)([])
    });
    manager.events.adjustHeight.bind((event)=>{
        const table = event.table;
        events.trigger.beforeResize(table, 'row');
        const delta = hdirection.delta(event.delta, table);
        // TODO: Use the resizing behaviour for heights as well
        _resize_Adjustments__WEBPACK_IMPORTED_MODULE_4__.adjustHeight(table, delta, event.row);
        events.trigger.afterResize(table, 'row');
    });
    manager.events.startAdjust.bind((_event)=>{
        events.trigger.startDrag();
    });
    manager.events.adjustWidth.bind((event)=>{
        const table = event.table;
        events.trigger.beforeResize(table, 'col');
        const delta = vdirection.delta(event.delta, table);
        const tableSize = lazySizing(table);
        _resize_Adjustments__WEBPACK_IMPORTED_MODULE_4__.adjustWidth(table, delta, event.column, resizing, tableSize);
        events.trigger.afterResize(table, 'col');
    });
    return {
        on: manager.on,
        off: manager.off,
        refreshBars: manager.refresh,
        hideBars: manager.hideBars,
        showBars: manager.showBars,
        destroy: manager.destroy,
        events: events.registry
    };
};
const TableResize = {
    create
};


}),
"../snooker/src/main/ts/ephox/snooker/api/TableSection.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableSection.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableSection: () => (TableSection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _Warehouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");





const transformCell = (cell, comparator, substitution)=>_Structs__WEBPACK_IMPORTED_MODULE_0__.elementnew(substitution(cell.element, comparator), true, cell.isLocked);
const transformRow = (row, section)=>row.section !== section ? _Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(row.element, row.cells, section, row.isNew) : row;
const section = ()=>({
        transformRow,
        transformCell: (cell, comparator, substitution)=>{
            const newCell = substitution(cell.element, comparator);
            // Convert the cell to a td element as "section" should always use td element
            const fixedCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(newCell) !== 'td' ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.mutate(newCell, 'td') : newCell;
            return _Structs__WEBPACK_IMPORTED_MODULE_0__.elementnew(fixedCell, cell.isNew, cell.isLocked);
        }
    });
const sectionCells = ()=>({
        transformRow,
        transformCell
    });
const cells = ()=>({
        transformRow: (row, section)=>{
            // Ensure that cells are always within the tbody for headers
            const newSection = section === 'thead' ? 'tbody' : section;
            return transformRow(row, newSection);
        },
        transformCell
    });
// A fallback legacy type that won't adjust the row/section type
// and instead will only modify cells
const fallback = ()=>({
        transformRow: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.identity,
        transformCell
    });
const getTableSectionType = (table, fallback)=>{
    const warehouse = _Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.fromTable(table);
    const type = (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_5__.findTableRowHeaderType)(warehouse).getOr(fallback);
    switch(type){
        case 'section':
            return section();
        case 'sectionCells':
            return sectionCells();
        case 'cells':
            return cells();
    }
};
const TableSection = {
    getTableSectionType,
    section,
    sectionCells,
    cells,
    fallback
};


}),
"../snooker/src/main/ts/ephox/snooker/api/TableSize.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/TableSize.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableSize: () => (TableSize)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../resize/ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../resize/Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");





const widthLookup = (table, getter)=>()=>{
        // Use the actual width if attached, otherwise fallback to the raw width
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.inBody(table)) {
            return getter(table);
        } else {
            return parseFloat(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getRaw(table, 'width').getOr('0'));
        }
    };
const noneSize = (table)=>{
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const zero = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(0);
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelWidths(warehouse, table, tableSize);
    // Note: The 3 delta functions below return 0 to signify a change shouldn't be made
    // however this is currently not used, so may need changing if ever used
    return {
        width: getWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta: zero,
        singleColumnWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant([
            0
        ]),
        minCellWidth: zero,
        setElementWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.noop,
        adjustTableWidth: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.noop,
        isRelative: true,
        label: 'none'
    };
};
const percentageSize = (table)=>{
    const getFloatWidth = widthLookup(table, (elem)=>parseFloat(_resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.getPercentTableWidth(elem)));
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const getCellDelta = (delta)=>delta / getWidth() * 100;
    // If we have one column in a percent based table, that column should be 100% of the width of the table.
    const singleColumnWidth = (w, _delta)=>[
            100 - w
        ];
    // Get the width of a 10 pixel wide cell over the width of the table as a percentage
    const minCellWidth = ()=>_util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth() / getWidth() * 100;
    const adjustTableWidth = (delta)=>{
        const currentWidth = getFloatWidth();
        const change = delta / 100 * currentWidth;
        const newWidth = currentWidth + change;
        _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPercentageWidth(table, newWidth);
    };
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPercentageWidths(warehouse, table, tableSize);
    return {
        width: getFloatWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta,
        singleColumnWidth,
        minCellWidth,
        setElementWidth: _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPercentageWidth,
        adjustTableWidth,
        isRelative: true,
        label: 'percent'
    };
};
const pixelSize = (table)=>{
    const getWidth = widthLookup(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get);
    const getCellDelta = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.identity;
    const singleColumnWidth = (w, delta)=>{
        const newNext = Math.max(_util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth(), w + delta);
        return [
            newNext - w
        ];
    };
    const adjustTableWidth = (delta)=>{
        const newWidth = getWidth() + delta;
        _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPixelWidth(table, newWidth);
    };
    const getWidths = (warehouse, tableSize)=>_resize_ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelWidths(warehouse, table, tableSize);
    return {
        width: getWidth,
        pixelWidth: getWidth,
        getWidths,
        getCellDelta,
        singleColumnWidth,
        minCellWidth: _util_CellUtils__WEBPACK_IMPORTED_MODULE_6__.minWidth,
        setElementWidth: _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.setPixelWidth,
        adjustTableWidth,
        isRelative: false,
        label: 'pixel'
    };
};
const chooseSize = (element, width)=>{
    const percentMatch = _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.percentageBasedSizeRegex().exec(width);
    if (percentMatch !== null) {
        return percentageSize(element);
    } else {
        return pixelSize(element);
    }
};
const getTableSize = (table)=>{
    const width = _resize_Sizes__WEBPACK_IMPORTED_MODULE_5__.getRawWidth(table);
    return width.fold(()=>noneSize(table), (w)=>chooseSize(table, w));
};
const TableSize = {
    getTableSize,
    pixelSize,
    percentageSize,
    noneSize
};


}),
"../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Warehouse: () => (Warehouse)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_DetailsList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../model/DetailsList */ "../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _TableLookup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");





const key = (row, column)=>{
    return row + ',' + column;
};
const getAt = (warehouse, row, column)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(warehouse.access[key(row, column)]);
const findItem = (warehouse, item, comparator)=>{
    const filtered = filterItems(warehouse, (detail)=>{
        return comparator(item, detail.element);
    });
    return filtered.length > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(filtered[0]) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
};
const filterItems = (warehouse, predicate)=>{
    const all = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(warehouse.all, (r)=>{
        return r.cells;
    });
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(all, predicate);
};
const generateColumns = (rowData)=>{
    const columnsGroup = {};
    let index = 0;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rowData.cells, (column)=>{
        const colspan = column.colspan;
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(colspan, (columnIndex)=>{
            const colIndex = index + columnIndex;
            columnsGroup[colIndex] = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.columnext(column.element, colspan, colIndex);
        });
        index += colspan;
    });
    return columnsGroup;
};
/*
 * From a list of list of Detail, generate three pieces of information:
 *  1. the grid size
 *  2. a data structure which can efficiently identify which cell is in which row,column position
 *  3. a list of all cells in order left-to-right, top-to-bottom
 */ const generate = (list)=>{
    // list is an array of objects, made by cells and elements
    // elements: is the TR
    // cells: is an array of objects representing the cells in the row.
    //        It is made of:
    //          colspan (merge cell)
    //          element
    //          rowspan (merge cols)
    const access = {};
    const cells = [];
    const tableOpt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.head(list).map((rowData)=>rowData.element).bind(_TableLookup__WEBPACK_IMPORTED_MODULE_3__.table);
    const lockedColumns = tableOpt.bind(_util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_4__.getLockedColumnsFromTable).getOr({});
    let maxRows = 0;
    let maxColumns = 0;
    let rowCount = 0;
    const { pass: colgroupRows, fail: rows } = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.partition(list, (rowData)=>rowData.section === 'colgroup');
    // Handle rows first
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rows, (rowData)=>{
        const currentRow = [];
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(rowData.cells, (rowCell)=>{
            let start = 0;
            // If this spot has been taken by a previous rowspan, skip it.
            while(access[key(rowCount, start)] !== undefined){
                start++;
            }
            const isLocked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.hasNonNullableKey(lockedColumns, start.toString());
            const current = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.extended(rowCell.element, rowCell.rowspan, rowCell.colspan, rowCount, start, isLocked);
            // Occupy all the (row, column) positions that this cell spans for.
            for(let occupiedColumnPosition = 0; occupiedColumnPosition < rowCell.colspan; occupiedColumnPosition++){
                for(let occupiedRowPosition = 0; occupiedRowPosition < rowCell.rowspan; occupiedRowPosition++){
                    const rowPosition = rowCount + occupiedRowPosition;
                    const columnPosition = start + occupiedColumnPosition;
                    const newpos = key(rowPosition, columnPosition);
                    access[newpos] = current;
                    maxColumns = Math.max(maxColumns, columnPosition + 1);
                }
            }
            currentRow.push(current);
        });
        maxRows++;
        cells.push(_api_Structs__WEBPACK_IMPORTED_MODULE_2__.rowdetail(rowData.element, currentRow, rowData.section));
        rowCount++;
    });
    // Handle colgroups
    // Note: Currently only a single colgroup is supported so just use the last one
    const { columns, colgroups } = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.last(colgroupRows).map((rowData)=>{
        const columns = generateColumns(rowData);
        const colgroup = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.colgroup(rowData.element, _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.values(columns));
        return {
            colgroups: [
                colgroup
            ],
            columns
        };
    }).getOrThunk(()=>({
            colgroups: [],
            columns: {}
        }));
    const grid = _api_Structs__WEBPACK_IMPORTED_MODULE_2__.grid(maxRows, maxColumns);
    return {
        grid,
        access,
        all: cells,
        columns,
        colgroups
    };
};
const fromTable = (table)=>{
    const list = _model_DetailsList__WEBPACK_IMPORTED_MODULE_6__.fromTable(table);
    return generate(list);
};
const justCells = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(warehouse.all, (w)=>w.cells);
const justColumns = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.values(warehouse.columns);
const hasColumns = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.keys(warehouse.columns).length > 0;
const getColumnAt = (warehouse, columnIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(warehouse.columns[columnIndex]);
const Warehouse = {
    fromTable,
    generate,
    getAt,
    findItem,
    filterItems,
    justCells,
    justColumns,
    hasColumns,
    getColumnAt
};


}),
"../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ColumnContext: () => (ColumnContext)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");

const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        none: []
    },
    {
        only: [
            'index'
        ]
    },
    {
        left: [
            'index',
            'next'
        ]
    },
    {
        middle: [
            'prev',
            'index',
            'next'
        ]
    },
    {
        right: [
            'prev',
            'index'
        ]
    }
]);
const ColumnContext = {
    ...adt
};


}),
"../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  determine: () => (determine)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ColumnContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ColumnContext */ "../snooker/src/main/ts/ephox/snooker/calc/ColumnContext.ts");


/*
 * Based on the column index, identify the context
 */ const neighbours = (input, index)=>{
    if (input.length === 0) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.none();
    }
    if (input.length === 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.only(0);
    }
    if (index === 0) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.left(0, 1);
    }
    if (index === input.length - 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.right(index - 1, index);
    }
    if (index > 0 && index < input.length - 1) {
        return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.middle(index - 1, index, index + 1);
    }
    return _ColumnContext__WEBPACK_IMPORTED_MODULE_0__.ColumnContext.none();
};
/*
 * Calculate the offsets to apply to each column width (not the absolute widths themselves)
 * based on a resize at column: column of step: step
 */ const determine = (input, column, step, tableSize, resize)=>{
    const result = input.slice(0);
    const context = neighbours(input, column);
    const onNone = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(result, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.constant(0)));
    const onOnly = (index)=>tableSize.singleColumnWidth(result[index], step);
    const onLeft = (index, next)=>resize.calcLeftEdgeDeltas(result, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);
    const onMiddle = (prev, index, next)=>resize.calcMiddleDeltas(result, prev, index, next, step, tableSize.minCellWidth(), tableSize.isRelative);
    // Applies to the last column bar
    const onRight = (prev, index)=>resize.calcRightEdgeDeltas(result, prev, index, step, tableSize.minCellWidth(), tableSize.isRelative);
    return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);
};



}),
"../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  columns: () => (columns),
  rows: () => (rows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


/*
 * Identify for each column, a cell that has colspan 1. Note, this
 * may actually fail, and future work will be to calculate column
 * sizes that are only available through the difference of two
 * spanning columns.
 */ const columns = (warehouse, isValidCell = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.always)=>{
    const grid = warehouse.grid;
    const cols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.columns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    const rowsArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.rows, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(cols, (col)=>{
        const getBlock = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(rowsArr, (r)=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, r, col).filter((detail)=>detail.column === col).toArray());
        const isValid = (detail)=>detail.colspan === 1 && isValidCell(detail.element);
        const getFallback = ()=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, 0, col);
        return decide(getBlock, isValid, getFallback);
    });
};
const decide = (getBlock, isValid, getFallback)=>{
    const inBlock = getBlock();
    const validInBlock = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.find(inBlock, isValid);
    const detailOption = validInBlock.orThunk(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(inBlock[0]).orThunk(getFallback));
    return detailOption.map((detail)=>detail.element);
};
const rows = (warehouse)=>{
    const grid = warehouse.grid;
    const rowsArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.rows, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    const cols = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(grid.columns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.identity);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rowsArr, (row)=>{
        const getBlock = ()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(cols, (c)=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, row, c).filter((detail)=>detail.row === row).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.constant([]), (detail)=>[
                        detail
                    ]));
        const isSingle = (detail)=>detail.rowspan === 1;
        const getFallback = ()=>_api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getAt(warehouse, row, 0);
        return decide(getBlock, isSingle, getFallback);
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/lookup/Type.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/lookup/Type.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  findCommonCellType: () => (findCommonCellType),
  findCommonRowType: () => (findCommonRowType),
  findTableRowHeaderType: () => (findTableRowHeaderType),
  isHeaderCell: () => (isHeaderCell),
  isHeaderCells: () => (isHeaderCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const isHeaderCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('th');
const isHeaderCells = (cells)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(cells, (cell)=>isHeaderCell(cell.element));
const getRowHeaderType = (isHeaderRow, isHeaderCells)=>{
    if (isHeaderRow && isHeaderCells) {
        return 'sectionCells';
    } else if (isHeaderRow) {
        return 'section';
    } else {
        return 'cells';
    }
};
const getRowType = (row)=>{
    // Header rows can use a combination of theads and ths - want to detect the different combinations
    const isHeaderRow = row.section === 'thead';
    const isHeaderCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.is(findCommonCellType(row.cells), 'th');
    if (row.section === 'tfoot') {
        return {
            type: 'footer'
        };
    } else if (isHeaderRow || isHeaderCells) {
        return {
            type: 'header',
            subType: getRowHeaderType(isHeaderRow, isHeaderCells)
        };
    } else {
        return {
            type: 'body'
        };
    }
};
const findCommonCellType = (cells)=>{
    const headerCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(cells, (cell)=>isHeaderCell(cell.element));
    if (headerCells.length === 0) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('td');
    } else if (headerCells.length === cells.length) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('th');
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    }
};
const findCommonRowType = (rows)=>{
    const rowTypes = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rows, (row)=>getRowType(row).type);
    const hasHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'header');
    const hasFooter = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'footer');
    if (!hasHeader && !hasFooter) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('body');
    } else {
        const hasBody = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(rowTypes, 'body');
        if (hasHeader && !hasBody && !hasFooter) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('header');
        } else if (!hasHeader && !hasBody && hasFooter) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some('footer');
        } else {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
        }
    }
};
const findTableRowHeaderType = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.findMap(warehouse.all, (row)=>{
        const rowType = getRowType(row);
        return rowType.type === 'header' ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(rowType.subType) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    });



}),
"../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/DetailsList.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromPastedRows: () => (fromPastedRows),
  fromTable: () => (fromTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");





const fromRowsOrColGroups = (elems, getSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(elems, (row)=>{
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(row) === 'colgroup') {
            const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(_api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.columns(row), (column)=>{
                const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(column, 'span', 1);
                return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.detail(column, 1, colspan);
            });
            return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.rowdetail(row, cells, 'colgroup');
        } else {
            const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(_api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.cells(row), (cell)=>{
                const rowspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(cell, 'rowspan', 1);
                const colspan = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_3__.getAttrValue)(cell, 'colspan', 1);
                return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.detail(cell, rowspan, colspan);
            });
            return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.rowdetail(row, cells, getSection(row));
        }
    });
const getParentSection = (group)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.parent(group).map((parent)=>{
        const parentName = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.name(parent);
        return _api_Structs__WEBPACK_IMPORTED_MODULE_4__.isValidSection(parentName) ? parentName : 'tbody';
    }).getOr('tbody');
/*
 * Takes a DOM table and returns a list of list of:
   element: row element
   cells: (id, rowspan, colspan) structs
 */ const fromTable = (table)=>{
    const rows = _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.rows(table);
    const columnGroups = _api_TableLookup__WEBPACK_IMPORTED_MODULE_2__.columnGroups(table);
    const elems = [
        ...columnGroups,
        ...rows
    ];
    return fromRowsOrColGroups(elems, getParentSection);
};
const fromPastedRows = (elems, section)=>fromRowsOrColGroups(elems, ()=>section);



}),
"../snooker/src/main/ts/ephox/snooker/model/Fitment.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/Fitment.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  lockedColFill: () => (lockedColFill),
  measure: () => (measure),
  measureHeight: () => (measureHeight),
  measureWidth: () => (measureWidth),
  tailor: () => (tailor)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Result.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");




/*
  Fitment, is a module used to ensure that the Inserted table (gridB) can fit squareley within the Host table (gridA).
    - measure returns a delta of rows and cols, eg:
        - col: 3 means gridB can fit with 3 spaces to spare
        - row: -5 means gridB can needs 5 more rows to completely fit into gridA
        - col: 0, row: 0 depics perfect fitment

    - tailor, requires a delta and returns grid that is built to match the delta, tailored to fit.
      eg: 3x3 gridA, with a delta col: -3, row: 2 returns a new grid 3 rows x 6 cols

    - assumptions: All grids used by this module should be rectangular
*/ const measure = (startAddress, gridA, gridB)=>{
    if (startAddress.row >= gridA.length || startAddress.column > _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0])) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Result.error('invalid start address out of table bounds, row: ' + startAddress.row + ', column: ' + startAddress.column);
    }
    const rowRemainder = gridA.slice(startAddress.row);
    const colRemainder = rowRemainder[0].cells.slice(startAddress.column);
    const colRequired = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridB[0]);
    const rowRequired = gridB.length;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Result.value({
        rowDelta: rowRemainder.length - rowRequired,
        colDelta: colRemainder.length - colRequired
    });
};
const measureWidth = (gridA, gridB)=>{
    const colLengthA = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0]);
    const colLengthB = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridB[0]);
    return {
        rowDelta: 0,
        colDelta: colLengthA - colLengthB
    };
};
const measureHeight = (gridA, gridB)=>{
    const rowLengthA = gridA.length;
    const rowLengthB = gridB.length;
    return {
        rowDelta: rowLengthA - rowLengthB,
        colDelta: 0
    };
};
const generateElements = (amount, row, generators, isLocked)=>{
    const generator = row.section === 'colgroup' ? generators.col : generators.cell;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(amount, (idx)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generator(), true, isLocked(idx)));
};
const rowFill = (grid, amount, generators, lockedColumns)=>{
    const exampleRow = grid[grid.length - 1];
    return grid.concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(amount, ()=>{
        const generator = exampleRow.section === 'colgroup' ? generators.colgroup : generators.row;
        const row = _GridRow__WEBPACK_IMPORTED_MODULE_0__.clone(exampleRow, generator, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity);
        const elements = generateElements(row.cells.length, row, generators, (idx)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.has(lockedColumns, idx.toString()));
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.setCells(row, elements);
    }));
};
const colFill = (grid, amount, generators, startIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        const newChildren = generateElements(amount, row, generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.never);
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCells(row, startIndex, newChildren);
    });
const lockedColFill = (grid, generators, lockedColumns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(lockedColumns, (acc, colNum)=>{
            const newChild = generateElements(1, row, generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.always)[0];
            return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(acc, colNum, newChild);
        }, row);
    });
const tailor = (gridA, delta, generators)=>{
    const fillCols = delta.colDelta < 0 ? colFill : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity;
    const fillRows = delta.rowDelta < 0 ? rowFill : _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity;
    const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__.getLockedColumnsFromGrid(gridA);
    const gridWidth = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridA[0]);
    const isLastColLocked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(lockedColumns, (locked)=>locked === gridWidth - 1);
    const modifiedCols = fillCols(gridA, Math.abs(delta.colDelta), generators, isLastColLocked ? gridWidth - 1 : gridWidth);
    // Need to recalculate locked column positions
    const newLockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_6__.getLockedColumnsFromGrid(modifiedCols);
    return fillRows(modifiedCols, Math.abs(delta.rowDelta), generators, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(newLockedColumns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.always));
};



}),
"../snooker/src/main/ts/ephox/snooker/model/GridRow.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/GridRow.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addCell: () => (addCell),
  addCells: () => (addCells),
  cellLength: () => (cellLength),
  clone: () => (clone),
  extractGridDetails: () => (extractGridDetails),
  getCell: () => (getCell),
  getCellElement: () => (getCellElement),
  mapCells: () => (mapCells),
  mutateCell: () => (mutateCell),
  setCells: () => (setCells)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");


const addCells = (gridRow, index, cells)=>{
    const existingCells = gridRow.cells;
    const before = existingCells.slice(0, index);
    const after = existingCells.slice(index);
    const newCells = before.concat(cells).concat(after);
    return setCells(gridRow, newCells);
};
const addCell = (gridRow, index, cell)=>addCells(gridRow, index, [
        cell
    ]);
const mutateCell = (gridRow, index, cell)=>{
    const cells = gridRow.cells;
    cells[index] = cell;
};
const setCells = (gridRow, cells)=>_api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(gridRow.element, cells, gridRow.section, gridRow.isNew);
const mapCells = (gridRow, f)=>{
    const cells = gridRow.cells;
    const r = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(cells, f);
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(gridRow.element, r, gridRow.section, gridRow.isNew);
};
const getCell = (gridRow, index)=>gridRow.cells[index];
const getCellElement = (gridRow, index)=>getCell(gridRow, index).element;
const cellLength = (gridRow)=>gridRow.cells.length;
const extractGridDetails = (grid)=>{
    const result = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.partition(grid, (row)=>row.section === 'colgroup');
    return {
        rows: result.fail,
        cols: result.pass
    };
};
const clone = (gridRow, cloneRow, cloneCell)=>{
    const newCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(gridRow.cells, cloneCell);
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.rowcells(cloneRow(gridRow.element), newCells, gridRow.section, true);
};



}),
"../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/RunOperation.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  onCell: () => (onCell),
  onCells: () => (onCells),
  onMergable: () => (onMergable),
  onPaste: () => (onPaste),
  onPasteByEditor: () => (onPasteByEditor),
  onUnlockedCell: () => (onUnlockedCell),
  onUnlockedCells: () => (onUnlockedCells),
  onUnlockedMergable: () => (onUnlockedMergable),
  onUnlockedUnmergable: () => (onUnlockedUnmergable),
  onUnmergable: () => (onUnmergable),
  run: () => (run),
  toDetailList: () => (toDetailList)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_ResizeBehaviour__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../api/ResizeBehaviour */ "../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _api_TableSection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/TableSection */ "../snooker/src/main/ts/ephox/snooker/api/TableSection.ts");
/* ESM import */var _api_TableSize__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../api/TableSize */ "../snooker/src/main/ts/ephox/snooker/api/TableSize.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _operate_Redraw__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../operate/Redraw */ "../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _Transitions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Transitions */ "../snooker/src/main/ts/ephox/snooker/model/Transitions.ts");










const fromWarehouse = (warehouse, generators)=>_Transitions__WEBPACK_IMPORTED_MODULE_0__.toGrid(warehouse, generators, false);
const toDetailList = (grid)=>_Transitions__WEBPACK_IMPORTED_MODULE_0__.toDetails(grid, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq);
const findInWarehouse = (warehouse, element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.findMap(warehouse.all, (r)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(r.cells, (e)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, e.element)));
const extractCells = (warehouse, target, predicate)=>{
    const details = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(target.selection, (cell)=>{
        return _api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(cell).bind((lc)=>findInWarehouse(warehouse, lc)).filter(predicate);
    });
    const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cat(details);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.someIf(cells.length > 0, cells);
};
const run = (operation, extract, adjustment, postAction, genWrappers, table, target, generators, behaviours)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_5__.Warehouse.fromTable(table);
    const tableSection = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.section).getOrThunk(_api_TableSection__WEBPACK_IMPORTED_MODULE_7__.TableSection.fallback);
    const output = extract(warehouse, target).map((info)=>{
        const model = fromWarehouse(warehouse, generators);
        const result = operation(model, info, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq, genWrappers(generators), tableSection);
        const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.getLockedColumnsFromGrid(result.grid);
        const grid = toDetailList(result.grid);
        return {
            info,
            grid,
            cursor: result.cursor,
            lockedColumns
        };
    });
    return output.bind((out)=>{
        const newElements = _operate_Redraw__WEBPACK_IMPORTED_MODULE_9__.render(table, out.grid);
        const tableSizing = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.sizing).getOrThunk(()=>_api_TableSize__WEBPACK_IMPORTED_MODULE_10__.TableSize.getTableSize(table));
        const resizing = _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(behaviours?.resize).getOrThunk(_api_ResizeBehaviour__WEBPACK_IMPORTED_MODULE_11__.preserveTable);
        adjustment(table, out.grid, out.info, {
            sizing: tableSizing,
            resize: resizing,
            section: tableSection
        });
        postAction(table);
        // Update locked cols attribute
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.remove(table, _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.LOCKED_COL_ATTR);
        if (out.lockedColumns.length > 0) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.set(table, _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_8__.LOCKED_COL_ATTR, out.lockedColumns.join(','));
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some({
            cursor: out.cursor,
            newRows: newElements.newRows,
            newCells: newElements.newCells
        });
    });
};
const onCell = (warehouse, target)=>_api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(target.element).bind((cell)=>findInWarehouse(warehouse, cell));
const onPaste = (warehouse, target)=>_api_TableLookup__WEBPACK_IMPORTED_MODULE_3__.cell(target.element).bind((cell)=>findInWarehouse(warehouse, cell).map((details)=>{
            const value = {
                ...details,
                generators: target.generators,
                clipboard: target.clipboard
            };
            return value;
        }));
const onPasteByEditor = (warehouse, target)=>extractCells(warehouse, target, _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.always).map((cells)=>({
            cells,
            generators: target.generators,
            clipboard: target.clipboard
        }));
const onMergable = (_warehouse, target)=>target.mergable;
const onUnmergable = (_warehouse, target)=>target.unmergable;
const onCells = (warehouse, target)=>extractCells(warehouse, target, _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.always);
// Custom unlocked extractors
const onUnlockedCell = (warehouse, target)=>onCell(warehouse, target).filter((detail)=>!detail.isLocked);
const onUnlockedCells = (warehouse, target)=>extractCells(warehouse, target, (detail)=>!detail.isLocked);
const isUnlockedTableCell = (warehouse, cell)=>findInWarehouse(warehouse, cell).exists((detail)=>!detail.isLocked);
const allUnlocked = (warehouse, cells)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(cells, (cell)=>isUnlockedTableCell(warehouse, cell));
// If any locked columns are present in the selection, then don't want to be able to merge
const onUnlockedMergable = (warehouse, target)=>onMergable(warehouse, target).filter((mergeable)=>allUnlocked(warehouse, mergeable.cells));
// If any locked columns are present in the selection, then don't want to be able to unmerge
const onUnlockedUnmergable = (warehouse, target)=>onUnmergable(warehouse, target).filter((cells)=>allUnlocked(warehouse, cells));



}),
"../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  subgrid: () => (subgrid)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");


const getColumn = (grid, index)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row)=>{
        return _GridRow__WEBPACK_IMPORTED_MODULE_1__.getCell(row, index);
    });
};
const getRow = (grid, index)=>{
    return grid[index];
};
const findDiff = (xs, comp)=>{
    if (xs.length === 0) {
        return 0;
    }
    const first = xs[0];
    const index = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findIndex(xs, (x)=>{
        return !comp(first.element, x.element);
    });
    return index.getOr(xs.length);
};
/*
 * grid is the grid
 * row is the row index into the grid
 * column in the column index into the grid
 *
 * Return
 *   colspan: column span of the cell at (row, column)
 *   rowspan: row span of the cell at (row, column)
 */ const subgrid = (grid, row, column, comparator)=>{
    const gridRow = getRow(grid, row);
    const isColRow = gridRow.section === 'colgroup';
    const colspan = findDiff(gridRow.cells.slice(column), comparator);
    const rowspan = isColRow ? 1 : findDiff(getColumn(grid.slice(row), column), comparator);
    return {
        colspan,
        rowspan
    };
};



}),
"../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts": 
/*!****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/TableMerge.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  insertCols: () => (insertCols),
  insertRows: () => (insertRows),
  merge: () => (merge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../operate/MergingOperations */ "../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts");
/* ESM import */var _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/LockedColumnUtils */ "../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts");
/* ESM import */var _Fitment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Fitment */ "../snooker/src/main/ts/ephox/snooker/model/Fitment.ts");
/* ESM import */var _GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");






const isSpanning = (grid, row, col, comparator)=>{
    const candidate = _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(grid[row], col);
    const matching = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(comparator, candidate.element);
    const currentRow = grid[row];
    // sanity check, 1x1 has no spans
    return grid.length > 1 && _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(currentRow) > 1 && (// search left, if we're not on the left edge
    // search down, if we're not on the bottom edge
    col > 0 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(currentRow, col - 1)) || // search right, if we're not on the right edge
    col < currentRow.cells.length - 1 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(currentRow, col + 1)) || // search up, if we're not on the top edge
    row > 0 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[row + 1], col)));
};
const mergeTables = (startAddress, gridA, gridBRows, generator, comparator, lockedColumns)=>{
    // Assumes
    //  - gridA is square and gridB is square
    const startRow = startAddress.row;
    const startCol = startAddress.column;
    const mergeHeight = gridBRows.length;
    const mergeWidth = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(gridBRows[0]);
    const endRow = startRow + mergeHeight;
    const endCol = startCol + mergeWidth + lockedColumns.length;
    const lockedColumnObj = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(lockedColumns, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.always);
    // embrace the mutation - I think this is easier to follow? To discuss.
    for(let r = startRow; r < endRow; r++){
        let skippedCol = 0;
        for(let c = startCol; c < endCol; c++){
            if (lockedColumnObj[c]) {
                skippedCol++;
                continue;
            }
            if (isSpanning(gridA, r, c, comparator)) {
                // mutation within mutation, it's mutatception
                _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.unmerge(gridA, _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(gridA[r], c), comparator, generator.cell);
            }
            const gridBColIndex = c - startCol - skippedCol;
            const newCell = _GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(gridBRows[r - startRow], gridBColIndex);
            // This can't be a col element at this point so we can cast it to a cell
            const newCellElm = newCell.element;
            const replacement = generator.replace(newCellElm);
            _GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(gridA[r], c, _api_Structs__WEBPACK_IMPORTED_MODULE_4__.elementnew(replacement, true, newCell.isLocked));
        }
    }
    return gridA;
};
const getValidStartAddress = (currentStartAddress, grid, lockedColumns)=>{
    const gridColLength = _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(grid[0]);
    /*
    When we paste from a table without colgroups to a table that has them, we need to ensure we are inserting them at
    the correct row index (the `col`s are treated as cells in the Structs.RowCells array).

    To do this, we get the number of `col`s in the destination table and add that to the startAddress row.
  */ const adjustedRowAddress = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).cols.length + currentStartAddress.row;
    const possibleColAddresses = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.range(gridColLength - currentStartAddress.column, (num)=>num + currentStartAddress.column);
    // Find a starting column address that isn't a locked column
    const validColAddress = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.find(possibleColAddresses, (num)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.forall(lockedColumns, (col)=>col !== num)).getOr(gridColLength - 1);
    return {
        row: adjustedRowAddress,
        column: validColAddress
    };
};
const getLockedColumnsWithinBounds = (startAddress, rows, lockedColumns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.filter(lockedColumns, (colNum)=>colNum >= startAddress.column && colNum <= _GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]) + startAddress.column);
const merge = (startAddress, gridA, gridB, generator, comparator)=>{
    const lockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(gridA);
    const validStartAddress = getValidStartAddress(startAddress, gridA, lockedColumns);
    /*
    We always remove the cols (extract the rows) from the table being pasted. This ensures that if we are pasting from a table with colgroups into a table
    without them, we don't insert the `col` elements as if they were `td`s
  */ const gridBRows = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(gridB).rows;
    const lockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, lockedColumns);
    const result = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measure(validStartAddress, gridA, gridBRows);
    /*
    Need to subtract extra delta for locked columns between startAddress and the startAddress + gridB column count as
    locked column cells cannot be merged into. Therefore, extra column cells need to be added to gridA to allow gridB cells to be merged
  */ return result.map((diff)=>{
        const delta = {
            ...diff,
            colDelta: diff.colDelta - lockedColumnsWithinBounds.length
        };
        const fittedGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, delta, generator);
        // Need to recalculate lockedColumnsWithinBounds as tailoring may have inserted columns before last locked column which changes the locked index
        const newLockedColumns = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(fittedGrid);
        const newLockedColumnsWithinBounds = getLockedColumnsWithinBounds(validStartAddress, gridBRows, newLockedColumns);
        return mergeTables(validStartAddress, fittedGrid, gridBRows, generator, comparator, newLockedColumnsWithinBounds);
    });
};
const insertCols = (index, gridA, gridB, generator, comparator)=>{
    _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.splitCols(gridA, index, comparator, generator.cell);
    const delta = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureHeight(gridB, gridA);
    const fittedNewGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridB, delta, generator);
    const secondDelta = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureHeight(gridA, fittedNewGrid);
    const fittedOldGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, secondDelta, generator);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(fittedOldGrid, (gridRow, i)=>{
        return _GridRow__WEBPACK_IMPORTED_MODULE_0__.addCells(gridRow, index, fittedNewGrid[i].cells);
    });
};
/*
  Inserting rows with locked columns
  - Tailor gridA first (this needs to be done first as the position of the locked columns may change when tailoring gridA and the location of the locked columns needs to be stable before tailoring gridB)
    - measure delta between gridA and gridB (pasted rows) - if negative colDelta, gridA needs extra columns added to match gridB
    - need to calculate how many columns in gridB cannot be directly inserted into gridA - this is how many extra columns need to be added to gridA (this consideres the fact locked column cannot be inserted into)
      - nonLockedGridA + lockedGridA - gridB = colDelta (By subtracting locked column count, can get required diff)
    - tailor gridA by adding the required extra columns if necessary either at the end of gridA or before the last column depending on whether it is locked
  - Recalculate where the locked columns are in gridA after tailoring
  - Measure and determine if extra columns need to be added to gridB (locked columns should not count towards the delta as colFilling (adding extra columns) for locked columns is handled separately)
  - Do a lockedColFill on gridB
  - Tailor gridB by adding extra columns to end of gridB if required
*/ const insertRows = (index, gridA, gridB, generator, comparator)=>{
    _operate_MergingOperations__WEBPACK_IMPORTED_MODULE_3__.splitRows(gridA, index, comparator, generator.cell);
    const locked = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(gridA);
    const diff = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureWidth(gridA, gridB);
    const delta = {
        ...diff,
        colDelta: diff.colDelta - locked.length
    };
    const fittedOldGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(gridA, delta, generator);
    const { cols: oldCols, rows: oldRows } = _GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(fittedOldGrid);
    const newLocked = _util_LockedColumnUtils__WEBPACK_IMPORTED_MODULE_5__.getLockedColumnsFromGrid(fittedOldGrid);
    const secondDiff = _Fitment__WEBPACK_IMPORTED_MODULE_6__.measureWidth(gridB, gridA);
    // Don't want the locked columns to count towards to the colDelta as column filling for locked columns is handled separately
    const secondDelta = {
        ...secondDiff,
        colDelta: secondDiff.colDelta + newLocked.length
    };
    const fittedGridB = _Fitment__WEBPACK_IMPORTED_MODULE_6__.lockedColFill(gridB, generator, newLocked);
    const fittedNewGrid = _Fitment__WEBPACK_IMPORTED_MODULE_6__.tailor(fittedGridB, secondDelta, generator);
    return [
        ...oldCols,
        ...oldRows.slice(0, index),
        ...fittedNewGrid,
        ...oldRows.slice(index, oldRows.length)
    ];
};



}),
"../snooker/src/main/ts/ephox/snooker/model/Transitions.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/model/Transitions.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  toDetails: () => (toDetails),
  toGrid: () => (toGrid)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _TableGrid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableGrid */ "../snooker/src/main/ts/ephox/snooker/model/TableGrid.ts");




const toDetails = (grid, comparator)=>{
    const seen = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(row.cells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.never));
    const updateSeen = (rowIndex, columnIndex, rowspan, colspan)=>{
        for(let row = rowIndex; row < rowIndex + rowspan; row++){
            for(let column = columnIndex; column < columnIndex + colspan; column++){
                seen[row][column] = true;
            }
        }
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(grid, (row, rowIndex)=>{
        const details = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.bind(row.cells, (cell, columnIndex)=>{
            // if we have seen this one, then skip it.
            if (seen[rowIndex][columnIndex] === false) {
                const result = _TableGrid__WEBPACK_IMPORTED_MODULE_2__.subgrid(grid, rowIndex, columnIndex, comparator);
                updateSeen(rowIndex, columnIndex, result.rowspan, result.colspan);
                return [
                    _api_Structs__WEBPACK_IMPORTED_MODULE_3__.detailnew(cell.element, result.rowspan, result.colspan, cell.isNew)
                ];
            } else {
                return [];
            }
        });
        return _api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowdetailnew(row.element, details, row.section, row.isNew);
    });
};
const toGrid = (warehouse, generators, isNew)=>{
    const grid = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(warehouse.colgroups, (colgroup)=>{
        const colgroupCols = [];
        // This will add missing cols as well as clamp the number of cols to the max number of actual columns
        // Note: Spans on cols are unsupported so clamping cols may result in a span on a col element being incorrect
        for(let columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++){
            const element = _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.getColumnAt(warehouse, columnIndex).map((column)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(column.element, isNew, false)).getOrThunk(()=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generators.colGap(), true, false));
            colgroupCols.push(element);
        }
        grid.push(_api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowcells(colgroup.element, colgroupCols, 'colgroup', isNew));
    });
    for(let rowIndex = 0; rowIndex < warehouse.grid.rows; rowIndex++){
        const rowCells = [];
        for(let columnIndex = 0; columnIndex < warehouse.grid.columns; columnIndex++){
            // The element is going to be the element at that position, or a newly generated gap.
            const element = _api_Warehouse__WEBPACK_IMPORTED_MODULE_4__.Warehouse.getAt(warehouse, rowIndex, columnIndex).map((item)=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(item.element, isNew, item.isLocked)).getOrThunk(()=>_api_Structs__WEBPACK_IMPORTED_MODULE_3__.elementnew(generators.gap(), true, false));
            rowCells.push(element);
        }
        const rowDetail = warehouse.all[rowIndex];
        const row = _api_Structs__WEBPACK_IMPORTED_MODULE_3__.rowcells(rowDetail.element, rowCells, rowDetail.section, isNew);
        grid.push(row);
    }
    return grid;
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts": 
/*!*************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/MergingOperations.ts ***!
  \*************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  merge: () => (merge),
  splitCols: () => (splitCols),
  splitRows: () => (splitRows),
  unmerge: () => (unmerge)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



// substitution: () -> item
const merge = (grid, bounds, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    // Mutating. Do we care about the efficiency gain?
    if (rows.length === 0) {
        return grid;
    }
    for(let i = bounds.startRow; i <= bounds.finishRow; i++){
        for(let j = bounds.startCol; j <= bounds.finishCol; j++){
            // We can probably simplify this again now that we aren't reusing merge.
            const row = rows[i];
            const isLocked = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j).isLocked;
            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(), false, isLocked));
        }
    }
    return grid;
};
// substitution: () -> item
const unmerge = (grid, target, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    // Mutating. Do we care about the efficiency gain?
    let first = true;
    // tslint:disable-next-line:prefer-for-of
    for(let i = 0; i < rows.length; i++){
        for(let j = 0; j < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]); j++){
            const row = rows[i];
            const currentCell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j);
            const currentCellElm = currentCell.element;
            const isToReplace = comparator(currentCellElm, target);
            if (isToReplace && !first) {
                _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(), true, currentCell.isLocked));
            } else if (isToReplace) {
                first = false;
            }
        }
    }
    return grid;
};
const uniqueCells = (row, comparator)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(row, (rest, cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.exists(rest, (currentCell)=>{
            return comparator(currentCell.element, cell.element);
        }) ? rest : rest.concat([
            cell
        ]);
    }, []);
};
const splitCols = (grid, index, comparator, substitution)=>{
    // We don't need to split rows if we're inserting at the first or last row of the old table
    if (index > 0 && index < grid[0].cells.length) {
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(grid, (row)=>{
            const prevCell = row.cells[index - 1];
            let offset = 0;
            const substitute = substitution();
            while(row.cells.length > index + offset && comparator(prevCell.element, row.cells[index + offset].element)){
                _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, index + offset, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitute, true, row.cells[index + offset].isLocked));
                offset++;
            }
        });
    }
    return grid;
};
const splitRows = (grid, index, comparator, substitution)=>{
    // We don't need to split rows if we're inserting at the first or last row of the old table
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    if (index > 0 && index < rows.length) {
        const rowPrevCells = rows[index - 1].cells;
        const cells = uniqueCells(rowPrevCells, comparator);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(cells, (cell)=>{
            // only make a sub when we have to
            let replacement = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
            for(let i = index; i < rows.length; i++){
                for(let j = 0; j < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(rows[0]); j++){
                    const row = rows[i];
                    const current = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, j);
                    const isToReplace = comparator(current.element, cell.element);
                    if (isToReplace) {
                        if (replacement.isNone()) {
                            replacement = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(substitution());
                        }
                        replacement.each((sub)=>{
                            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mutateCell(row, j, _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(sub, true, current.isLocked));
                        });
                    }
                }
            }
        });
    }
    return grid;
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts": 
/*!******************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/ModificationOperations.ts ***!
  \******************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  deleteColumnsAt: () => (deleteColumnsAt),
  deleteRowsAt: () => (deleteRowsAt),
  insertColumnAt: () => (insertColumnAt),
  insertRowAt: () => (insertRowAt),
  splitCellIntoColumns: () => (splitCellIntoColumns),
  splitCellIntoRows: () => (splitCellIntoRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



const cloneRow = (row, cloneCell, comparator, substitution)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.clone(row, (elem)=>substitution(elem, comparator), cloneCell);
// substitution :: (item, comparator) -> item
// example is the location of the cursor (the row index)
// index is the insert position (at - or after - example) (the row index)
const insertRowAt = (grid, index, example, comparator, substitution)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const before = rows.slice(0, index);
    const after = rows.slice(index);
    const newRow = cloneRow(rows[example], (ex, c)=>{
        const withinSpan = index > 0 && index < rows.length && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(rows[index - 1], c), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(rows[index], c));
        const ret = withinSpan ? _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(rows[index], c) : _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(ex.element, comparator), true, ex.isLocked);
        return ret;
    }, comparator, substitution);
    return [
        ...cols,
        ...before,
        newRow,
        ...after
    ];
};
const getElementFor = (row, column, section, withinSpan, example, comparator, substitution)=>{
    if (section === 'colgroup' || !withinSpan) {
        const cell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, example);
        // locked is explicitly set to false so the newly inserted column doesn't inherit example column locked state
        return _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(cell.element, comparator), true, false);
    } else {
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, column);
    }
};
// substitution :: (item, comparator) -> item
// example is the location of the cursor (the column index)
// index is the insert position (at - or after - example) (the column index)
const insertColumnAt = (grid, index, example, comparator, substitution)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row)=>{
        const withinSpan = index > 0 && index < _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.cellLength(row) && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index - 1), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index));
        const sub = getElementFor(row, index, row.section, withinSpan, example, comparator, substitution);
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(row, index, sub);
    });
// substitution :: (item, comparator) -> item
// Returns:
// - a new grid with the cell at coords [exampleRow, exampleCol] split into two cells (the
//   new cell follows, and is empty), and
// - the other cells in that column set to span the split cell.
const splitCellIntoColumns = (grid, exampleRow, exampleCol, comparator, substitution)=>{
    const index = exampleCol + 1; // insert after
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(grid, (row, i)=>{
        const isTargetCell = i === exampleRow;
        const cell = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, exampleCol);
        const sub = isTargetCell ? _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(cell.element, comparator), true, cell.isLocked) : cell;
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.addCell(row, index, sub);
    });
};
// substitution :: (item, comparator) -> item
// Returns:
// - a new grid with the cell at coords [exampleRow, exampleCol] split into two cells (the
//   new cell below, and is empty), and
// - the other cells in that row set to span the split cell.
const splitCellIntoRows = (grid, exampleRow, exampleCol, comparator, substitution)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const index = exampleRow + 1; // insert after
    const before = rows.slice(0, index);
    const after = rows.slice(index);
    const newRow = cloneRow(rows[exampleRow], (ex, i)=>{
        const isTargetCell = i === exampleCol;
        return isTargetCell ? _api_Structs__WEBPACK_IMPORTED_MODULE_1__.elementnew(substitution(ex.element, comparator), true, ex.isLocked) : ex;
    }, comparator, substitution);
    return [
        ...cols,
        ...before,
        newRow,
        ...after
    ];
};
const deleteColumnsAt = (grid, columns)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.bind(grid, (row)=>{
        const existingCells = row.cells;
        const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldr(columns, (acc, column)=>column >= 0 && column < acc.length ? acc.slice(0, column).concat(acc.slice(column + 1)) : acc, existingCells);
        return cells.length > 0 ? [
            _api_Structs__WEBPACK_IMPORTED_MODULE_1__.rowcells(row.element, cells, row.section, row.isNew)
        ] : [];
    });
const deleteRowsAt = (grid, start, finish)=>{
    const { rows, cols } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    return [
        ...cols,
        ...rows.slice(0, start),
        ...rows.slice(finish + 1)
    ];
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/Redraw.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  render: () => (render)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");


const setIfNot = (element, property, value, ignore)=>{
    if (value === ignore) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.remove(element, property);
    } else {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.set(element, property, value);
    }
};
const insert = (table, selector, element)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.last(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.children(table, selector)).fold(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.prepend(table, element), (child)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.after(child, element));
};
const generateSection = (table, sectionName)=>{
    const section = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.child(table, sectionName).getOrThunk(()=>{
        const newSection = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag(sectionName, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.owner(table).dom);
        if (sectionName === 'thead') {
            insert(table, 'caption,colgroup', newSection);
        } else if (sectionName === 'colgroup') {
            insert(table, 'caption', newSection);
        } else {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(table, newSection);
        }
        return newSection;
    });
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.empty(section);
    return section;
};
const render = (table, grid)=>{
    const newRows = [];
    const newCells = [];
    const syncRows = (gridSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(gridSection, (row)=>{
            if (row.isNew) {
                newRows.push(row.element);
            }
            const tr = row.element;
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.empty(tr);
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(row.cells, (cell)=>{
                if (cell.isNew) {
                    newCells.push(cell.element);
                }
                setIfNot(cell.element, 'colspan', cell.colspan, 1);
                setIfNot(cell.element, 'rowspan', cell.rowspan, 1);
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(tr, cell.element);
            });
            return tr;
        });
    // Assumption we should only ever have 1 colgroup. The spec allows for multiple, however it's currently unsupported
    const syncColGroup = (gridSection)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(gridSection, (colGroup)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(colGroup.cells, (col)=>{
                setIfNot(col.element, 'span', col.colspan, 1);
                return col.element;
            }));
    const renderSection = (gridSection, sectionName)=>{
        const section = generateSection(table, sectionName);
        const sync = sectionName === 'colgroup' ? syncColGroup : syncRows;
        const sectionElems = sync(gridSection);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.append(section, sectionElems);
    };
    const removeSection = (sectionName)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.child(table, sectionName).each(_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.remove);
    };
    const renderOrRemoveSection = (gridSection, sectionName)=>{
        if (gridSection.length > 0) {
            renderSection(gridSection, sectionName);
        } else {
            removeSection(sectionName);
        }
    };
    const headSection = [];
    const bodySection = [];
    const footSection = [];
    const columnGroupsSection = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(grid, (row)=>{
        switch(row.section){
            case 'thead':
                headSection.push(row);
                break;
            case 'tbody':
                bodySection.push(row);
                break;
            case 'tfoot':
                footSection.push(row);
                break;
            case 'colgroup':
                columnGroupsSection.push(row);
                break;
        }
    });
    renderOrRemoveSection(columnGroupsSection, 'colgroup');
    renderOrRemoveSection(headSection, 'thead');
    renderOrRemoveSection(bodySection, 'tbody');
    renderOrRemoveSection(footSection, 'tfoot');
    return {
        newRows,
        newCells
    };
};
const copy = (grid)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(grid, (row)=>{
        // Shallow copy the row element
        const tr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.shallow(row.element);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(row.cells, (cell)=>{
            const clonedCell = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.deep(cell.element);
            setIfNot(clonedCell, 'colspan', cell.colspan, 1);
            setIfNot(clonedCell, 'rowspan', cell.rowspan, 1);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.append(tr, clonedCell);
        });
        return tr;
    });



}),
"../snooker/src/main/ts/ephox/snooker/operate/Render.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/Render.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  render: () => (render)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");


const DefaultRenderOptions = {
    styles: {
        'border-collapse': 'collapse',
        'width': '100%'
    },
    attributes: {
        border: '1'
    },
    colGroups: false
};
const tableHeaderCell = ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('th');
const tableCell = ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('td');
const tableColumn = ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('col');
const createRow = (columns, rowHeaders, columnHeaders, rowIndex)=>{
    const tr = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('tr');
    for(let j = 0; j < columns; j++){
        const td = rowIndex < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();
        if (j < columnHeaders) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.set(td, 'scope', 'row');
        }
        if (rowIndex < rowHeaders) {
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.set(td, 'scope', 'col');
        }
        // Note, this is a placeholder so that the cells have height. The unicode character didn't work in IE10.
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(td, _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('br'));
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(tr, td);
    }
    return tr;
};
const createGroupRow = (columns)=>{
    const columnGroup = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('colgroup');
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.range(columns, ()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(columnGroup, tableColumn()));
    return columnGroup;
};
const createRows = (rows, columns, rowHeaders, columnHeaders)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.range(rows, (r)=>createRow(columns, rowHeaders, columnHeaders, r));
const render = (rows, columns, rowHeaders, columnHeaders, headerType, renderOpts = DefaultRenderOptions)=>{
    const table = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('table');
    const rowHeadersGoInThead = headerType !== 'cells';
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.setAll(table, renderOpts.styles);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.setAll(table, renderOpts.attributes);
    if (renderOpts.colGroups) {
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(table, createGroupRow(columns));
    }
    const actualRowHeaders = Math.min(rows, rowHeaders);
    if (rowHeadersGoInThead && rowHeaders > 0) {
        const thead = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('thead');
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(table, thead);
        const theadRowHeaders = headerType === 'sectionCells' ? actualRowHeaders : 0;
        const theadRows = createRows(rowHeaders, columns, theadRowHeaders, columnHeaders);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.append(thead, theadRows);
    }
    const tbody = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('tbody');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.append(table, tbody);
    const numRows = rowHeadersGoInThead ? rows - actualRowHeaders : rows;
    const numRowHeaders = rowHeadersGoInThead ? 0 : rowHeaders;
    const tbodyRows = createRows(numRows, columns, numRowHeaders, columnHeaders);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.append(tbody, tbodyRows);
    return table;
};



}),
"../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts": 
/*!***************************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/operate/TransformOperations.ts ***!
  \***************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  replaceCell: () => (replaceCell),
  replaceCells: () => (replaceCells),
  replaceColumn: () => (replaceColumn),
  replaceColumns: () => (replaceColumns),
  replaceRow: () => (replaceRow),
  replaceRows: () => (replaceRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _lookup_Type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lookup/Type */ "../snooker/src/main/ts/ephox/snooker/lookup/Type.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");






const notInStartRow = (grid, rowIndex, colIndex, comparator)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex], colIndex) !== undefined && rowIndex > 0 && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex - 1], colIndex), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(grid[rowIndex], colIndex));
const notInStartColumn = (row, index, comparator)=>index > 0 && comparator(_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index - 1), _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCellElement(row, index));
// This checks for cells that aren't in the "start" position as the model will create duplicate element references for
// each column/row that the cell spans. As an example, for a merged cell with rowspan="2", the cell in the second row is a duplicate
// of the cell in the first row.
const isDuplicatedCell = (grid, rowIndex, colIndex, comparator)=>notInStartRow(grid, rowIndex, colIndex, comparator) || notInStartColumn(grid[rowIndex], colIndex, comparator);
const rowReplacerPredicate = (targetRow, columnHeaders)=>{
    const entireTableIsHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(columnHeaders, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity) && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(targetRow.cells);
    return entireTableIsHeader ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always : (cell, _rowIndex, colIndex)=>{
        const type = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(cell.element);
        return !(type === 'th' && columnHeaders[colIndex]);
    };
};
const columnReplacePredicate = (targetColumn, rowHeaders)=>{
    const entireTableIsHeader = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(rowHeaders, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity) && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(targetColumn);
    return entireTableIsHeader ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always : (cell, rowIndex, _colIndex)=>{
        const type = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(cell.element);
        return !(type === 'th' && rowHeaders[rowIndex]);
    };
};
const determineScope = (applyScope, cell, newScope, isInHeader)=>{
    const hasSpan = (scope)=>scope === 'row' ? _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.hasRowspan(cell) : _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.hasColspan(cell);
    const getScope = (scope)=>hasSpan(scope) ? `${scope}group` : scope;
    if (applyScope) {
        return (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCell)(cell) ? getScope(newScope) : null;
    } else if (isInHeader && (0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCell)(cell)) {
        // The cell is still in a header row/column so ensure the right scope is reverted to
        const oppositeScope = newScope === 'row' ? 'col' : 'row';
        return getScope(oppositeScope);
    } else {
        // No longer a header so ensure the scope is removed
        return null;
    }
};
const rowScopeGenerator = (applyScope, columnHeaders)=>(cell, rowIndex, columnIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(determineScope(applyScope, cell.element, 'col', columnHeaders[columnIndex]));
const columnScopeGenerator = (applyScope, rowHeaders)=>(cell, rowIndex)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.some(determineScope(applyScope, cell.element, 'row', rowHeaders[rowIndex]));
const replace = (cell, comparator, substitute)=>_api_Structs__WEBPACK_IMPORTED_MODULE_7__.elementnew(substitute(cell.element, comparator), true, cell.isLocked);
const replaceIn = (grid, targets, comparator, substitute, replacer, genScope, shouldReplace)=>{
    const isTarget = (cell)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.exists(targets, (target)=>{
            return comparator(cell.element, target.element);
        });
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(grid, (row, rowIndex)=>{
        return _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.mapCells(row, (cell, colIndex)=>{
            if (isTarget(cell)) {
                const newCell = shouldReplace(cell, rowIndex, colIndex) ? replacer(cell, comparator, substitute) : cell;
                // Update the scope
                genScope(newCell, rowIndex, colIndex).each((scope)=>{
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.setOptions(newCell.element, {
                        scope: _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.from(scope)
                    });
                });
                return newCell;
            } else {
                return cell;
            }
        });
    });
};
const getColumnCells = (rows, columnIndex, comparator)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(rows, (row, i)=>{
        // check if already added.
        return isDuplicatedCell(rows, i, columnIndex, comparator) ? [] : [
            _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(row, columnIndex)
        ];
    });
const getRowCells = (rows, rowIndex, comparator)=>{
    const targetRow = rows[rowIndex];
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(targetRow.cells, (item, i)=>{
        // Check that we haven't already added this one.
        return isDuplicatedCell(rows, rowIndex, i, comparator) ? [] : [
            item
        ];
    });
};
const replaceColumn = (grid, index, applyScope, comparator, substitution)=>replaceColumns(grid, [
        index
    ], applyScope, comparator, substitution);
const replaceColumns = (grid, indexes, applyScope, comparator, substitution)=>{
    // Make this efficient later.
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    const targets = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(indexes, (index)=>getColumnCells(rows, index, comparator));
    const rowHeaders = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(rows, (row)=>(0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(row.cells));
    const shouldReplaceCell = columnReplacePredicate(targets, rowHeaders);
    const scopeGenerator = columnScopeGenerator(applyScope, rowHeaders);
    return replaceIn(grid, targets, comparator, substitution, replace, scopeGenerator, shouldReplaceCell);
};
const replaceRow = (grid, index, section, applyScope, comparator, substitution, tableSection)=>replaceRows(grid, [
        index
    ], section, applyScope, comparator, substitution, tableSection);
const replaceRows = (grid, indexes, section, applyScope, comparator, substitution, tableSection)=>{
    const { cols, rows } = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid);
    const targetRow = rows[indexes[0]];
    const targets = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(indexes, (index)=>getRowCells(rows, index, comparator));
    const columnHeaders = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(targetRow.cells, (_cell, index)=>(0,_lookup_Type__WEBPACK_IMPORTED_MODULE_3__.isHeaderCells)(getColumnCells(rows, index, comparator)));
    // Transform and replace the target row
    // TODO: TINY-7776: This doesn't deal with rowspans which can break the layout when moving to a new section
    const newRows = [
        ...rows
    ];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(indexes, (index)=>{
        newRows[index] = tableSection.transformRow(rows[index], section);
    });
    const newGrid = [
        ...cols,
        ...newRows
    ];
    const shouldReplaceCell = rowReplacerPredicate(targetRow, columnHeaders);
    const scopeGenerator = rowScopeGenerator(applyScope, columnHeaders);
    return replaceIn(newGrid, targets, comparator, substitution, tableSection.transformCell, scopeGenerator, shouldReplaceCell);
};
const replaceCell = (grid, detail, comparator, substitution)=>replaceCells(grid, [
        detail
    ], comparator, substitution);
const replaceCells = (grid, details, comparator, substitution)=>{
    const rows = _model_GridRow__WEBPACK_IMPORTED_MODULE_0__.extractGridDetails(grid).rows;
    const targetCells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(details, (detail)=>_model_GridRow__WEBPACK_IMPORTED_MODULE_0__.getCell(rows[detail.row], detail.column));
    return replaceIn(grid, targetCells, comparator, substitution, replace, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.Optional.none, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.always);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  adjustAndRedistributeWidths: () => (adjustAndRedistributeWidths),
  adjustHeight: () => (adjustHeight),
  adjustWidth: () => (adjustWidth),
  adjustWidthTo: () => (adjustWidthTo)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _calc_Deltas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../calc/Deltas */ "../snooker/src/main/ts/ephox/snooker/calc/Deltas.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _ColumnSizes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ColumnSizes */ "../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts");
/* ESM import */var _Recalculations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Recalculations */ "../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts");
/* ESM import */var _Sizes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");







const sumUp = (newSize)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldr(newSize, (b, a)=>b + a, 0);
const recalculate = (warehouse, widths)=>{
    if (_api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.hasColumns(warehouse)) {
        return _Recalculations__WEBPACK_IMPORTED_MODULE_2__.recalculateWidthForColumns(warehouse, widths);
    } else {
        return _Recalculations__WEBPACK_IMPORTED_MODULE_2__.recalculateWidthForCells(warehouse, widths);
    }
};
const recalculateAndApply = (warehouse, widths, tableSize)=>{
    // Set the width of each cell based on the column widths
    const newSizes = recalculate(warehouse, widths);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(newSizes, (cell)=>{
        tableSize.setElementWidth(cell.element, cell.width);
    });
};
const adjustWidth = (table, delta, index, resizing, tableSize)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.fromTable(table);
    const step = tableSize.getCellDelta(delta);
    const widths = tableSize.getWidths(warehouse, tableSize);
    const isLastColumn = index === warehouse.grid.columns - 1;
    const clampedStep = resizing.clampTableDelta(widths, index, step, tableSize.minCellWidth(), isLastColumn);
    // Calculate all of the new widths for columns
    const deltas = _calc_Deltas__WEBPACK_IMPORTED_MODULE_3__.determine(widths, index, clampedStep, tableSize, resizing);
    const newWidths = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(deltas, (dx, i)=>dx + widths[i]);
    recalculateAndApply(warehouse, newWidths, tableSize);
    resizing.resizeTable(tableSize.adjustTableWidth, clampedStep, isLastColumn);
};
const adjustHeight = (table, delta, index)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.fromTable(table);
    const heights = _ColumnSizes__WEBPACK_IMPORTED_MODULE_4__.getPixelHeights(warehouse, table);
    const newHeights = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(heights, (dy, i)=>index === i ? Math.max(delta + dy, _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.minHeight()) : dy);
    const newRowSizes = _Recalculations__WEBPACK_IMPORTED_MODULE_2__.matchRowHeight(warehouse, newHeights);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(newRowSizes, (row)=>{
        _Sizes__WEBPACK_IMPORTED_MODULE_6__.setHeight(row.element, row.height);
    });
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(_api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.justCells(warehouse), (cell)=>{
        _Sizes__WEBPACK_IMPORTED_MODULE_6__.removeHeight(cell.element);
    });
    const total = sumUp(newHeights);
    _Sizes__WEBPACK_IMPORTED_MODULE_6__.setHeight(table, total);
};
// Using the width of the added/removed columns gathered on extraction (pixelDelta), get and apply the new column sizes and overall table width delta
const adjustAndRedistributeWidths = (_table, list, details, tableSize, resizeBehaviour)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.generate(list);
    const sizes = tableSize.getWidths(warehouse, tableSize);
    const tablePixelWidth = tableSize.pixelWidth();
    const { newSizes, delta } = resizeBehaviour.calcRedestributedWidths(sizes, tablePixelWidth, details.pixelDelta, tableSize.isRelative);
    recalculateAndApply(warehouse, newSizes, tableSize);
    tableSize.adjustTableWidth(delta);
};
// Ensure that the width of table cells match the passed in table information.
const adjustWidthTo = (_table, list, _info, tableSize)=>{
    const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.generate(list);
    const widths = tableSize.getWidths(warehouse, tableSize);
    recalculateAndApply(warehouse, widths, tableSize);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Bar.ts": 
/*!**********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Bar.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  col: () => (col),
  row: () => (row)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");

const col = (column, x, y, w, h)=>{
    const bar = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('div');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.setAll(bar, {
        position: 'absolute',
        left: x - w / 2 + 'px',
        top: y + 'px',
        height: h + 'px',
        width: w + 'px'
    });
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setAll(bar, {
        'data-mce-bogus': 'all',
        'data-column': column,
        'role': 'presentation'
    });
    return bar;
};
const row = (r, x, y, w, h)=>{
    const bar = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag('div');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.setAll(bar, {
        position: 'absolute',
        left: x + 'px',
        top: y - h / 2 + 'px',
        height: h + 'px',
        width: w + 'px'
    });
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.setAll(bar, {
        'data-mce-bogus': 'all',
        'data-row': r,
        'role': 'presentation'
    });
    return bar;
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/BarManager.ts": 
/*!*****************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/BarManager.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  BarManager: () => (BarManager)
});
/* ESM import */var _ephox_dragster__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/dragster */ "../dragster/src/main/ts/ephox/dragster/api/Dragger.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/events/DomEvent.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _style_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/Styles */ "../snooker/src/main/ts/ephox/snooker/style/Styles.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _BarMutation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BarMutation */ "../snooker/src/main/ts/ephox/snooker/resize/BarMutation.ts");
/* ESM import */var _Bars__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Bars */ "../snooker/src/main/ts/ephox/snooker/resize/Bars.ts");








const resizeBarDragging = _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('resizer-bar-dragging');
const BarManager = (wire)=>{
    const mutation = (0,_BarMutation__WEBPACK_IMPORTED_MODULE_1__.BarMutation)();
    const resizing = _ephox_dragster__WEBPACK_IMPORTED_MODULE_2__.transform(mutation, {});
    let hoverTable = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    const getResizer = (element, type)=>{
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(element, type));
    };
    /* Reposition the bar as the user drags */ mutation.events.drag.bind((event)=>{
        getResizer(event.target, 'data-row').each((_dataRow)=>{
            const currentRow = _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.getCssValue(event.target, 'top');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.set(event.target, 'top', currentRow + event.yDelta + 'px');
        });
        getResizer(event.target, 'data-column').each((_dataCol)=>{
            const currentCol = _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.getCssValue(event.target, 'left');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.set(event.target, 'left', currentCol + event.xDelta + 'px');
        });
    });
    const getDelta = (target, dir)=>{
        const newX = _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.getCssValue(target, dir);
        const oldX = _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.getAttrValue(target, 'data-initial-' + dir, 0);
        return newX - oldX;
    };
    /* Resize the column once the user releases the mouse */ resizing.events.stop.bind(()=>{
        mutation.get().each((target)=>{
            hoverTable.each((table)=>{
                getResizer(target, 'data-row').each((row)=>{
                    const delta = getDelta(target, 'top');
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(target, 'data-initial-top');
                    events.trigger.adjustHeight(table, delta, parseInt(row, 10));
                });
                getResizer(target, 'data-column').each((column)=>{
                    const delta = getDelta(target, 'left');
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove(target, 'data-initial-left');
                    events.trigger.adjustWidth(table, delta, parseInt(column, 10));
                });
                _Bars__WEBPACK_IMPORTED_MODULE_7__.refresh(wire, table);
            });
        });
    });
    const handler = (target, dir)=>{
        events.trigger.startAdjust();
        mutation.assign(target);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.set(target, 'data-initial-' + dir, _util_CellUtils__WEBPACK_IMPORTED_MODULE_5__.getCssValue(target, dir));
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.add(target, resizeBarDragging);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.set(target, 'opacity', '0.2');
        resizing.go(wire.dragContainer());
    };
    /* mousedown on resize bar: start dragging when the bar is clicked, storing the initial position. */ const mousedown = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.bind(wire.parent(), 'mousedown', (event)=>{
        if (_Bars__WEBPACK_IMPORTED_MODULE_7__.isRowBar(event.target)) {
            handler(event.target, 'top');
        }
        if (_Bars__WEBPACK_IMPORTED_MODULE_7__.isColBar(event.target)) {
            handler(event.target, 'left');
        }
    });
    const isRoot = (e)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.eq(e, wire.view());
    };
    const findClosestEditableTable = (target)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.closest(target, 'table', isRoot).filter(_ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.isEditable);
    const isResizer = (target)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.has(target, 'ephox-snooker-resizer-bar') || _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.has(target, 'ephox-dragster-blocker');
    /* mouseover on table: When the mouse moves within the CONTENT AREA (NOT THE TABLE), refresh the bars. */ const mouseover = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.bind(wire.view(), 'mouseover', (event)=>{
        findClosestEditableTable(event.target).fold(()=>{
            /*
        * mouseout is not reliable within ContentEditable, so for all other mouseover events we clear bars.
        * This is fairly safe to do frequently; it's a single querySelectorAll() on the content and Arr.map on the result.
        * If we _really_ need to optimise it further, we can start caching the bar references in the wire somehow.
        *
        * Because the resizers were moved into the editor for inline mode, we need to check if the event target is not a resizer.
        */ if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.inBody(event.target) && !isResizer(event.target)) {
                _Bars__WEBPACK_IMPORTED_MODULE_7__.destroy(wire);
            }
        }, (table)=>{
            if (resizing.isActive()) {
                hoverTable = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(table);
                _Bars__WEBPACK_IMPORTED_MODULE_7__.refresh(wire, table);
            }
        });
    });
    const destroy = ()=>{
        mousedown.unbind();
        mouseover.unbind();
        resizing.destroy();
        _Bars__WEBPACK_IMPORTED_MODULE_7__.destroy(wire);
    };
    const refresh = (tbl)=>{
        _Bars__WEBPACK_IMPORTED_MODULE_7__.refresh(wire, tbl);
    };
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_14__.create({
        adjustHeight: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_15__.Event)([
            'table',
            'delta',
            'row'
        ]),
        adjustWidth: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_15__.Event)([
            'table',
            'delta',
            'column'
        ]),
        startAdjust: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_15__.Event)([])
    });
    return {
        destroy,
        refresh,
        on: resizing.on,
        off: resizing.off,
        hideBars: _ephox_katamari__WEBPACK_IMPORTED_MODULE_16__.curry(_Bars__WEBPACK_IMPORTED_MODULE_7__.hide, wire),
        showBars: _ephox_katamari__WEBPACK_IMPORTED_MODULE_16__.curry(_Bars__WEBPACK_IMPORTED_MODULE_7__.show, wire),
        events: events.registry
    };
};


}),
"../snooker/src/main/ts/ephox/snooker/resize/BarMutation.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/BarMutation.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  BarMutation: () => (BarMutation)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");
/* ESM import */var _Mutation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Mutation */ "../snooker/src/main/ts/ephox/snooker/resize/Mutation.ts");



const BarMutation = ()=>{
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__.create({
        drag: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.Event)([
            'xDelta',
            'yDelta',
            'target'
        ])
    });
    let target = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
    const delegate = (0,_Mutation__WEBPACK_IMPORTED_MODULE_3__.Mutation)();
    delegate.events.drag.bind((event)=>{
        target.each((t)=>{
            // There is always going to be this padding / border collapse / margin problem with widths. I'll have to resolve that.
            events.trigger.drag(event.xDelta, event.yDelta, t);
        });
    });
    const assign = (t)=>{
        target = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(t);
    };
    const get = ()=>{
        return target;
    };
    return {
        assign,
        get,
        mutate: delegate.mutate,
        events: events.registry
    };
};


}),
"../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  height: () => (height),
  ltr: () => (ltr),
  rtl: () => (rtl),
  width: () => (width)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts");


const rowInfo = (row, y)=>({
        row,
        y
    });
const colInfo = (col, x)=>({
        col,
        x
    });
const rtlEdge = (cell)=>{
    const pos = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell);
    return pos.left + _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.getOuter(cell);
};
const ltrEdge = (cell)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell).left;
};
const getLeftEdge = (index, cell)=>{
    return colInfo(index, ltrEdge(cell));
};
const getRightEdge = (index, cell)=>{
    return colInfo(index, rtlEdge(cell));
};
const getTop = (cell)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.absolute(cell).top;
};
const getTopEdge = (index, cell)=>{
    return rowInfo(index, getTop(cell));
};
const getBottomEdge = (index, cell)=>{
    return rowInfo(index, getTop(cell) + _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getOuter(cell));
};
const findPositions = (getInnerEdge, getOuterEdge, array)=>{
    if (array.length === 0) {
        return [];
    }
    const lines = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(array.slice(1), (cellOption, index)=>{
        return cellOption.map((cell)=>{
            return getInnerEdge(index, cell);
        });
    });
    const lastLine = array[array.length - 1].map((cell)=>{
        return getOuterEdge(array.length - 1, cell);
    });
    return lines.concat([
        lastLine
    ]);
};
const negate = (step)=>{
    return -step;
};
const height = {
    delta: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity,
    positions: (optElements)=>findPositions(getTopEdge, getBottomEdge, optElements),
    edge: getTop
};
const ltr = {
    delta: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.identity,
    edge: ltrEdge,
    positions: (optElements)=>findPositions(getLeftEdge, getRightEdge, optElements)
};
const rtl = {
    delta: negate,
    edge: rtlEdge,
    positions: (optElements)=>findPositions(getRightEdge, getLeftEdge, optElements)
};
const detect = _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.onDirection(ltr, rtl);
const width = {
    delta: (amount, table)=>detect(table).delta(amount, table),
    positions: (cols, table)=>detect(table).positions(cols, table),
    edge: (cell)=>detect(cell).edge(cell)
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Bars.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Bars.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  destroy: () => (destroy),
  hide: () => (hide),
  isColBar: () => (isColBar),
  isRowBar: () => (isRowBar),
  refresh: () => (refresh),
  show: () => (show)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _lookup_Blocks__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../lookup/Blocks */ "../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts");
/* ESM import */var _style_Styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/Styles */ "../snooker/src/main/ts/ephox/snooker/style/Styles.ts");
/* ESM import */var _Bar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Bar */ "../snooker/src/main/ts/ephox/snooker/resize/Bar.ts");
/* ESM import */var _BarPositions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./BarPositions */ "../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts");







const resizeBar = _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('resizer-bar');
const resizeRowBar = _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('resizer-rows');
const resizeColBar = _style_Styles__WEBPACK_IMPORTED_MODULE_0__.resolve('resizer-cols');
const BAR_THICKNESS = 7;
const resizableRows = (warehouse, isResizable)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(warehouse.all, (row, i)=>isResizable(row.element) ? [
            i
        ] : []);
const resizableColumns = (warehouse, isResizable)=>{
    const resizableCols = [];
    // Check col elements and see if they are resizable
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.range(warehouse.grid.columns, (index)=>{
        // With use of forall, index will be included if col doesn't exist meaning the column cells will be checked below
        const colElmOpt = _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.getColumnAt(warehouse, index).map((col)=>col.element);
        if (colElmOpt.forall(isResizable)) {
            resizableCols.push(index);
        }
    });
    // Check cells of the resizable columns and make sure they are resizable
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(resizableCols, (colIndex)=>{
        const columnCells = _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.filterItems(warehouse, (cell)=>cell.column === colIndex);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.forall(columnCells, (cell)=>isResizable(cell.element));
    });
};
const destroy = (wire)=>{
    const previous = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.descendants(wire.parent(), '.' + resizeBar);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(previous, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.remove);
};
const drawBar = (wire, positions, create)=>{
    const origin = wire.origin();
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(positions, (cpOption)=>{
        cpOption.each((cp)=>{
            const bar = create(origin, cp);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.add(bar, resizeBar);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.append(wire.parent(), bar);
        });
    });
};
const refreshCol = (wire, colPositions, position, tableHeight)=>{
    drawBar(wire, colPositions, (origin, cp)=>{
        const colBar = _Bar__WEBPACK_IMPORTED_MODULE_7__.col(cp.col, cp.x - origin.left, position.top - origin.top, BAR_THICKNESS, tableHeight);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.add(colBar, resizeColBar);
        return colBar;
    });
};
const refreshRow = (wire, rowPositions, position, tableWidth)=>{
    drawBar(wire, rowPositions, (origin, cp)=>{
        const rowBar = _Bar__WEBPACK_IMPORTED_MODULE_7__.row(cp.row, position.left - origin.left, cp.y - origin.top, tableWidth, BAR_THICKNESS);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.add(rowBar, resizeRowBar);
        return rowBar;
    });
};
const refreshGrid = (warhouse, wire, table, rows, cols)=>{
    const position = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.absolute(table);
    const isResizable = wire.isResizable;
    const rowPositions = rows.length > 0 ? _BarPositions__WEBPACK_IMPORTED_MODULE_9__.height.positions(rows, table) : [];
    const resizableRowBars = rowPositions.length > 0 ? resizableRows(warhouse, isResizable) : [];
    const resizableRowPositions = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(rowPositions, (_pos, i)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.exists(resizableRowBars, (barIndex)=>i === barIndex));
    refreshRow(wire, resizableRowPositions, position, _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.getOuter(table));
    const colPositions = cols.length > 0 ? _BarPositions__WEBPACK_IMPORTED_MODULE_9__.width.positions(cols, table) : [];
    const resizableColBars = colPositions.length > 0 ? resizableColumns(warhouse, isResizable) : [];
    const resizableColPositions = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(colPositions, (_pos, i)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.exists(resizableColBars, (barIndex)=>i === barIndex));
    refreshCol(wire, resizableColPositions, position, _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.getOuter(table));
};
const refresh = (wire, table)=>{
    destroy(wire);
    if (wire.isResizable(table)) {
        const warehouse = _api_Warehouse__WEBPACK_IMPORTED_MODULE_2__.Warehouse.fromTable(table);
        const rows = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_12__.rows(warehouse);
        const cols = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_12__.columns(warehouse);
        refreshGrid(warehouse, wire, table, rows, cols);
    }
};
const each = (wire, f)=>{
    const bars = _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.descendants(wire.parent(), '.' + resizeBar);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(bars, f);
};
const hide = (wire)=>{
    each(wire, (bar)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.set(bar, 'display', 'none');
    });
};
const show = (wire)=>{
    each(wire, (bar)=>{
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.set(bar, 'display', 'block');
    });
};
const isRowBar = (element)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.has(element, resizeRowBar);
};
const isColBar = (element)=>{
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.has(element, resizeColBar);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/ColumnSizes.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getPercentageWidths: () => (getPercentageWidths),
  getPixelHeights: () => (getPixelHeights),
  getPixelWidths: () => (getPixelWidths),
  getRawHeights: () => (getRawHeights),
  getRawWidths: () => (getRawWidths)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lookup/Blocks */ "../snooker/src/main/ts/ephox/snooker/lookup/Blocks.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");
/* ESM import */var _util_Util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util/Util */ "../snooker/src/main/ts/ephox/snooker/util/Util.ts");
/* ESM import */var _BarPositions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BarPositions */ "../snooker/src/main/ts/ephox/snooker/resize/BarPositions.ts");
/* ESM import */var _Sizes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sizes */ "../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts");









const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const getRawW = (cell)=>{
    return _Sizes__WEBPACK_IMPORTED_MODULE_1__.getRawWidth(cell).getOrThunk(()=>_Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelWidth(cell) + 'px');
};
const getRawH = (cell)=>{
    return _Sizes__WEBPACK_IMPORTED_MODULE_1__.getRawHeight(cell).getOrThunk(()=>_Sizes__WEBPACK_IMPORTED_MODULE_1__.getHeight(cell) + 'px');
};
const justCols = (warehouse)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_api_Warehouse__WEBPACK_IMPORTED_MODULE_3__.Warehouse.justColumns(warehouse), (column)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.from(column.element));
// Col elements don't have valid computed widths/positions in all browsers, so treat them as invalid in that case
const isValidColumn = (cell)=>{
    const browser = _ephox_sand__WEBPACK_IMPORTED_MODULE_5__.detect().browser;
    const supportsColWidths = browser.isChromium() || browser.isFirefox();
    return isCol(cell) ? supportsColWidths : true;
};
const getDimension = (cellOpt, index, backups, filter, getter, fallback)=>cellOpt.filter(filter).fold(// Can't just read the width of a cell, so calculate.
    ()=>fallback(_util_Util__WEBPACK_IMPORTED_MODULE_6__.deduce(backups, index)), (cell)=>getter(cell));
const getWidthFrom = (warehouse, table, getWidth, fallback)=>{
    // Only treat a cell as being valid for a column representation if it has a raw width, otherwise we won't be able to calculate the expected width.
    // This is needed as one cell may have a width but others may not, so we need to try and use one with a specified width first.
    const columnCells = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__.columns(warehouse);
    const columns = _api_Warehouse__WEBPACK_IMPORTED_MODULE_3__.Warehouse.hasColumns(warehouse) ? justCols(warehouse) : columnCells;
    const backups = [
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.width.edge(table))
    ].concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.width.positions(columnCells, table), (pos)=>pos.map((p)=>p.x)));
    // Only use the width of cells that have no column span (or colspan 1)
    const colFilter = _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.not(_util_CellUtils__WEBPACK_IMPORTED_MODULE_10__.hasColspan);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(columns, (cellOption, c)=>{
        return getDimension(cellOption, c, backups, colFilter, (column)=>{
            if (isValidColumn(column)) {
                return getWidth(column);
            } else {
                // Invalid column so fallback to trying to get the computed width from the cell
                const cell = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.bindFrom(columnCells[c], _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.identity);
                return getDimension(cell, c, backups, colFilter, (cell)=>fallback(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(Math.round(_ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.get(cell)))), fallback);
            }
        }, fallback);
    });
};
const getDeduced = (deduced)=>{
    return deduced.map((d)=>{
        return d + 'px';
    }).getOr('');
};
const getRawWidths = (warehouse, table)=>{
    return getWidthFrom(warehouse, table, getRawW, getDeduced);
};
const getPercentageWidths = (warehouse, table, tableSize)=>{
    return getWidthFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getPercentageWidth, (deduced)=>{
        return deduced.fold(()=>{
            return tableSize.minCellWidth();
        }, (cellWidth)=>{
            return cellWidth / tableSize.pixelWidth() * 100;
        });
    });
};
const getPixelWidths = (warehouse, table, tableSize)=>{
    return getWidthFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getPixelWidth, (deduced)=>{
        // Minimum cell width when all else fails.
        return deduced.getOrThunk(tableSize.minCellWidth);
    });
};
const getHeightFrom = (warehouse, table, getHeight, fallback)=>{
    const rowCells = _lookup_Blocks__WEBPACK_IMPORTED_MODULE_7__.rows(warehouse);
    const rows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(warehouse.all, (r)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(r.element));
    const backups = [
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.height.edge(table))
    ].concat(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(_BarPositions__WEBPACK_IMPORTED_MODULE_8__.height.positions(rowCells, table), (pos)=>pos.map((p)=>p.y)));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(rows, (row, i)=>getDimension(row, i, backups, _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.always, getHeight, fallback));
};
const getPixelHeights = (warehouse, table)=>{
    return getHeightFrom(warehouse, table, _Sizes__WEBPACK_IMPORTED_MODULE_1__.getHeight, (deduced)=>{
        return deduced.getOrThunk(_util_CellUtils__WEBPACK_IMPORTED_MODULE_10__.minHeight);
    });
};
const getRawHeights = (warehouse, table)=>{
    return getHeightFrom(warehouse, table, getRawH, getDeduced);
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Mutation.ts": 
/*!***************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Mutation.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Mutation: () => (Mutation)
});
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Events.ts");
/* ESM import */var _ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/porkbun */ "../porkbun/src/main/ts/ephox/porkbun/Event.ts");

const Mutation = ()=>{
    const events = _ephox_porkbun__WEBPACK_IMPORTED_MODULE_0__.create({
        drag: (0,_ephox_porkbun__WEBPACK_IMPORTED_MODULE_1__.Event)([
            'xDelta',
            'yDelta'
        ])
    });
    const mutate = (x, y)=>{
        events.trigger.drag(x, y);
    };
    return {
        mutate,
        events: events.registry
    };
};


}),
"../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts": 
/*!*********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Recalculations.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  matchRowHeight: () => (matchRowHeight),
  recalculateHeightForCells: () => (recalculateHeightForCells),
  recalculateWidthForCells: () => (recalculateWidthForCells),
  recalculateWidthForColumns: () => (recalculateWidthForColumns)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


// Returns the sum of elements of measures in the half-open range [start, end)
// Measures is in pixels, treated as an array of integers or integers in string format.
// NOTE: beware of accumulated rounding errors over multiple columns - could result in noticeable table width changes
const total = (start, end, measures)=>{
    let r = 0;
    for(let i = start; i < end; i++){
        r += measures[i] !== undefined ? measures[i] : 0;
    }
    return r;
};
// Returns an array of all cells in warehouse with updated cell-widths, using
// the array 'widths' of the representative widths of each column of the table 'warehouse'
const recalculateWidthForCells = (warehouse, widths)=>{
    const all = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justCells(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(all, (cell)=>{
        // width of a spanning cell is sum of widths of representative columns it spans
        const width = total(cell.column, cell.column + cell.colspan, widths);
        return {
            element: cell.element,
            width,
            colspan: cell.colspan
        };
    });
};
const recalculateWidthForColumns = (warehouse, widths)=>{
    const groups = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justColumns(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(groups, (column, index)=>({
            element: column.element,
            width: widths[index],
            colspan: column.colspan
        }));
};
const recalculateHeightForCells = (warehouse, heights)=>{
    const all = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.justCells(warehouse);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(all, (cell)=>{
        const height = total(cell.row, cell.row + cell.rowspan, heights);
        return {
            element: cell.element,
            height,
            rowspan: cell.rowspan
        };
    });
};
const matchRowHeight = (warehouse, heights)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(warehouse.all, (row, i)=>{
        return {
            element: row.element,
            height: heights[i]
        };
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/resize/Redistribution.ts": 
/*!*********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Redistribution.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  normalize: () => (normalize),
  redistribute: () => (redistribute),
  sum: () => (sum),
  validate: () => (validate)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _Size__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Size */ "../snooker/src/main/ts/ephox/snooker/resize/Size.ts");


// Convert all column widths to percent.
const redistributeToPercent = (widths, totalWidth)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(widths, (w)=>{
        const colType = _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(w);
        return colType.fold(()=>{
            return w;
        }, (px)=>{
            const ratio = px / totalWidth * 100;
            return ratio + '%';
        }, (pc)=>{
            return pc + '%';
        });
    });
};
const redistributeToPx = (widths, totalWidth, newTotalWidth)=>{
    const scale = newTotalWidth / totalWidth;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.map(widths, (w)=>{
        const colType = _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(w);
        return colType.fold(()=>{
            return w;
        }, (px)=>{
            return px * scale + 'px';
        }, (pc)=>{
            return pc / 100 * newTotalWidth + 'px';
        });
    });
};
const redistributeEmpty = (newWidthType, columns)=>{
    const f = newWidthType.fold(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(''), (pixels)=>{
        const num = pixels / columns;
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(num + 'px');
    }, ()=>{
        const num = 100 / columns;
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(num + '%');
    });
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.range(columns, f);
};
const redistributeValues = (newWidthType, widths, totalWidth)=>{
    return newWidthType.fold(()=>{
        return widths;
    }, (px)=>{
        return redistributeToPx(widths, totalWidth, px);
    }, (_pc)=>{
        return redistributeToPercent(widths, totalWidth);
    });
};
const redistribute = (widths, totalWidth, newWidth)=>{
    const newType = _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(newWidth);
    const floats = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.forall(widths, (s)=>{
        return s === '0px';
    }) ? redistributeEmpty(newType, widths.length) : redistributeValues(newType, widths, totalWidth);
    return normalize(floats);
};
const sum = (values, fallback)=>{
    if (values.length === 0) {
        return fallback;
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldr(values, (rest, v)=>{
        return _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(v).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(0), _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity, _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.identity) + rest;
    }, 0);
};
const roundDown = (num, unit)=>{
    const floored = Math.floor(num);
    return {
        value: floored + unit,
        remainder: num - floored
    };
};
const add = (value, amount)=>{
    return _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(value).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(value), (px)=>{
        return px + amount + 'px';
    }, (pc)=>{
        return pc + amount + '%';
    });
};
const normalize = (values)=>{
    if (values.length === 0) {
        return values;
    }
    const scan = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldr(values, (rest, value)=>{
        const info = _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from(value).fold(()=>({
                value,
                remainder: 0
            }), (num)=>roundDown(num, 'px'), (num)=>({
                value: num + '%',
                remainder: 0
            }));
        return {
            output: [
                info.value
            ].concat(rest.output),
            remainder: rest.remainder + info.remainder
        };
    }, {
        output: [],
        remainder: 0
    });
    const r = scan.output;
    return r.slice(0, r.length - 1).concat([
        add(r[r.length - 1], Math.round(scan.remainder))
    ]);
};
const validate = _Size__WEBPACK_IMPORTED_MODULE_1__.Size.from;



}),
"../snooker/src/main/ts/ephox/snooker/resize/Size.ts": 
/*!***********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Size.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Size: () => (Size)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");

const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        invalid: [
            'raw'
        ]
    },
    {
        pixels: [
            'value'
        ]
    },
    {
        percent: [
            'value'
        ]
    }
]);
const validateFor = (suffix, type, value)=>{
    const rawAmount = value.substring(0, value.length - suffix.length);
    const amount = parseFloat(rawAmount);
    return rawAmount === amount.toString() ? type(amount) : adt.invalid(value);
};
const from = (value)=>{
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.endsWith(value, '%')) {
        return validateFor('%', adt.percent, value);
    }
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.endsWith(value, 'px')) {
        return validateFor('px', adt.pixels, value);
    }
    return adt.invalid(value);
};
const Size = {
    ...adt,
    from
};


}),
"../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts": 
/*!************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/resize/Sizes.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getGenericWidth: () => (getGenericWidth),
  getHeight: () => (getHeight),
  getPercentTableHeight: () => (getPercentTableHeight),
  getPercentTableWidth: () => (getPercentTableWidth),
  getPercentageWidth: () => (getPercentageWidth),
  getPixelTableHeight: () => (getPixelTableHeight),
  getPixelTableWidth: () => (getPixelTableWidth),
  getPixelWidth: () => (getPixelWidth),
  getRawHeight: () => (getRawHeight),
  getRawWidth: () => (getRawWidth),
  isNoneSizing: () => (isNoneSizing),
  isPercentSizing: () => (isPercentSizing),
  isPixelSizing: () => (isPixelSizing),
  percentageBasedSizeRegex: () => (percentageBasedSizeRegex),
  pixelBasedSizeRegex: () => (pixelBasedSizeRegex),
  removeHeight: () => (removeHeight),
  setGenericWidth: () => (setGenericWidth),
  setHeight: () => (setHeight),
  setPercentageWidth: () => (setPercentageWidth),
  setPixelWidth: () => (setPixelWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Height.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts");
/* ESM import */var _api_TableLookup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../api/TableLookup */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _util_CellUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../util/CellUtils */ "../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts");




const rPercentageBasedSizeRegex = /(\d+(\.\d+)?)%/;
const rPixelBasedSizeRegex = /(\d+(\.\d+)?)px|em/;
const isCol = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('col');
const isRow = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.isTag('tr');
const getPercentSize = (elm, outerGetter, innerGetter)=>{
    const relativeParent = _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.parentElement(elm).getOrThunk(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.getBody(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.owner(elm)));
    return outerGetter(elm) / innerGetter(relativeParent) * 100;
};
const setPixelWidth = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + 'px');
};
const setPercentageWidth = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + '%');
};
const setHeight = (cell, amount)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'height', amount + 'px');
};
const removeHeight = (cell)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.remove(cell, 'height');
};
const getHeightValue = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getRuntime(cell) + 'px';
const convert = (cell, number, getter, setter)=>{
    const newSize = _api_TableLookup__WEBPACK_IMPORTED_MODULE_5__.table(cell).map((table)=>{
        const total = getter(table);
        return Math.floor(number / 100.0 * total);
    }).getOr(number);
    setter(cell, newSize);
    return newSize;
};
const normalizePixelSize = (value, cell, getter, setter)=>{
    const number = parseFloat(value);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.endsWith(value, '%') && _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;
};
const getTotalHeight = (cell)=>{
    const value = getHeightValue(cell);
    if (!value) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(cell);
    }
    return normalizePixelSize(value, cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get, setHeight);
};
const get = (cell, type, f)=>{
    const v = f(cell);
    const span = (0,_util_CellUtils__WEBPACK_IMPORTED_MODULE_7__.getSpan)(cell, type);
    return v / span;
};
const getRaw = (element, prop)=>{
    // Try to use the style first, otherwise attempt to get the value from an attribute
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.getRaw(element, prop).orThunk(()=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.getOpt(element, prop).map((val)=>val + 'px');
    });
};
const getRawWidth = (element)=>getRaw(element, 'width');
const getRawHeight = (element)=>getRaw(element, 'height');
// Get a percentage size for a percentage parent table
const getPercentageWidth = (cell)=>getPercentSize(cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getInner);
const getPixelWidth = (cell)=>// For col elements use the computed width as col elements aren't affected by borders, padding, etc...
    isCol(cell) ? Math.round(_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get(cell)) : _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getRuntime(cell);
const getHeight = (cell)=>{
    return isRow(cell) ? _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(cell) : get(cell, 'rowspan', getTotalHeight);
};
const getGenericWidth = (cell)=>{
    const width = getRawWidth(cell);
    return width.bind((w)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.parse(w, [
            'fixed',
            'relative',
            'empty'
        ]));
};
const setGenericWidth = (cell, amount, unit)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.set(cell, 'width', amount + unit);
};
const getPixelTableWidth = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get(table) + 'px';
const getPixelTableHeight = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get(table) + 'px';
const getPercentTableWidth = (table)=>getPercentSize(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.getInner) + '%';
const getPercentTableHeight = (table)=>getPercentSize(table, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.get, _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.getInner) + '%';
const isPercentSizing = (table)=>getRawWidth(table).exists((size)=>rPercentageBasedSizeRegex.test(size));
const isPixelSizing = (table)=>getRawWidth(table).exists((size)=>rPixelBasedSizeRegex.test(size));
const isNoneSizing = (table)=>getRawWidth(table).isNone();
const percentageBasedSizeRegex = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.constant(rPercentageBasedSizeRegex);
const pixelBasedSizeRegex = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.constant(rPixelBasedSizeRegex);


}),
"../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts": 
/*!********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  inSelection: () => (inSelection),
  isRectangular: () => (isRectangular),
  isWithin: () => (isWithin)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");


const inSelection = (bounds, detail)=>{
    const leftEdge = detail.column;
    const rightEdge = detail.column + detail.colspan - 1;
    const topEdge = detail.row;
    const bottomEdge = detail.row + detail.rowspan - 1;
    return leftEdge <= bounds.finishCol && rightEdge >= bounds.startCol && topEdge <= bounds.finishRow && bottomEdge >= bounds.startRow;
};
// Note, something is *within* if it is completely contained within the bounds.
const isWithin = (bounds, detail)=>{
    return detail.column >= bounds.startCol && detail.column + detail.colspan - 1 <= bounds.finishCol && detail.row >= bounds.startRow && detail.row + detail.rowspan - 1 <= bounds.finishRow;
};
const isRectangular = (warehouse, bounds)=>{
    let isRect = true;
    const detailIsWithin = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.curry(isWithin, bounds);
    for(let i = bounds.startRow; i <= bounds.finishRow; i++){
        for(let j = bounds.startCol; j <= bounds.finishCol; j++){
            isRect = isRect && _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);
        }
    }
    return isRect ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.some(bounds) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.none();
};



}),
"../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts": 
/*!********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellFinder.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  intercepts: () => (intercepts),
  moveBy: () => (moveBy),
  parentCell: () => (parentCell)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _CellBounds__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CellBounds */ "../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts");
/* ESM import */var _CellGroup__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CellGroup */ "../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts");





const moveBy = (warehouse, cell, row, column)=>{
    return _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.findItem(warehouse, cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq).bind((detail)=>{
        const startRow = row > 0 ? detail.row + detail.rowspan - 1 : detail.row;
        const startCol = column > 0 ? detail.column + detail.colspan - 1 : detail.column;
        const dest = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.getAt(warehouse, startRow + row, startCol + column);
        return dest.map((d)=>{
            return d.element;
        });
    });
};
const intercepts = (warehouse, start, finish)=>{
    return _CellGroup__WEBPACK_IMPORTED_MODULE_2__.getAnyBox(warehouse, start, finish).map((bounds)=>{
        const inside = _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.filterItems(warehouse, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.curry(_CellBounds__WEBPACK_IMPORTED_MODULE_4__.inSelection, bounds));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.map(inside, (detail)=>{
            return detail.element;
        });
    });
};
const parentCell = (warehouse, innerCell)=>{
    const isContainedBy = (c1, c2)=>{
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.contains(c2, c1);
    };
    return _api_Warehouse__WEBPACK_IMPORTED_MODULE_0__.Warehouse.findItem(warehouse, innerCell, isContainedBy).map((detail)=>{
        return detail.element;
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts": 
/*!*******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/selection/CellGroup.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAnyBox: () => (getAnyBox),
  getBox: () => (getBox)
});
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _api_Structs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Structs */ "../snooker/src/main/ts/ephox/snooker/api/Structs.ts");
/* ESM import */var _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Warehouse */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _CellBounds__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CellBounds */ "../snooker/src/main/ts/ephox/snooker/selection/CellBounds.ts");




const getBounds = (detailA, detailB)=>{
    return _api_Structs__WEBPACK_IMPORTED_MODULE_0__.bounds(Math.min(detailA.row, detailB.row), Math.min(detailA.column, detailB.column), Math.max(detailA.row + detailA.rowspan - 1, detailB.row + detailB.rowspan - 1), Math.max(detailA.column + detailA.colspan - 1, detailB.column + detailB.colspan - 1));
};
const getAnyBox = (warehouse, startCell, finishCell)=>{
    const startCoords = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.findItem(warehouse, startCell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq);
    const finishCoords = _api_Warehouse__WEBPACK_IMPORTED_MODULE_1__.Warehouse.findItem(warehouse, finishCell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.eq);
    return startCoords.bind((sc)=>{
        return finishCoords.map((fc)=>{
            return getBounds(sc, fc);
        });
    });
};
const getBox = (warehouse, startCell, finishCell)=>{
    return getAnyBox(warehouse, startCell, finishCell).bind((bounds)=>{
        return _CellBounds__WEBPACK_IMPORTED_MODULE_3__.isRectangular(warehouse, bounds);
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/style/Styles.ts": 
/*!************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/style/Styles.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  resolve: () => (resolve)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Namespace.ts");

const styles = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.css('ephox-snooker');
const resolve = styles.resolve;


}),
"../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts": 
/*!**************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/CellUtils.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getAttrValue: () => (getAttrValue),
  getCssValue: () => (getCssValue),
  getSpan: () => (getSpan),
  hasColspan: () => (hasColspan),
  hasRowspan: () => (hasRowspan),
  minHeight: () => (minHeight),
  minWidth: () => (minWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");


const getAttrValue = (cell, name, fallback = 0)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getOpt(cell, name).map((value)=>parseInt(value, 10)).getOr(fallback);
const getSpan = (cell, type)=>getAttrValue(cell, type, 1);
const hasColspan = (cellOrCol)=>{
    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.isTag('col')(cellOrCol)) {
        return getAttrValue(cellOrCol, 'span', 1) > 1;
    } else {
        return getSpan(cellOrCol, 'colspan') > 1;
    }
};
const hasRowspan = (cell)=>getSpan(cell, 'rowspan') > 1;
const getCssValue = (element, property)=>parseInt(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.get(element, property), 10);
const minWidth = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(10);
const minHeight = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(10);


}),
"../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts": 
/*!*************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/ColUtils.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  uniqueColumns: () => (uniqueColumns)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");

const uniqueColumns = (details)=>{
    const uniqueCheck = (rest, detail)=>{
        const columnExists = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(rest, (currentDetail)=>currentDetail.column === detail.column);
        return columnExists ? rest : rest.concat([
            detail
        ]);
    };
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.foldl(details, uniqueCheck, []).sort((detailA, detailB)=>detailA.column - detailB.column);
};


}),
"../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts": 
/*!******************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/LayerSelector.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  filterFirstLayer: () => (filterFirstLayer),
  firstLayer: () => (firstLayer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const firstLayer = (scope, selector)=>{
    return filterFirstLayer(scope, selector, _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.always);
};
const filterFirstLayer = (scope, selector, predicate)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.bind(_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.children(scope), (x)=>{
        if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.is(x, selector)) {
            return predicate(x) ? [
                x
            ] : [];
        } else {
            return filterFirstLayer(x, selector, predicate);
        }
    });
};



}),
"../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts": 
/*!**********************************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/LockedColumnUtils.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  LOCKED_COL_ATTR: () => (LOCKED_COL_ATTR),
  getLockedColumnsFromGrid: () => (getLockedColumnsFromGrid),
  getLockedColumnsFromTable: () => (getLockedColumnsFromTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _model_GridRow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/GridRow */ "../snooker/src/main/ts/ephox/snooker/model/GridRow.ts");



const LOCKED_COL_ATTR = 'data-snooker-locked-cols';
const getLockedColumnsFromTable = (table)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getOpt(table, LOCKED_COL_ATTR).bind((lockedColStr)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.from(lockedColStr.match(/\d+/g))).map((lockedCols)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.mapToObject(lockedCols, _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.always));
// Need to check all of the cells to determine which columns are locked - reasoning is because rowspan and colspan cells where the same cell is used by multiple columns
const getLockedColumnsFromGrid = (grid)=>{
    const locked = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.foldl(_model_GridRow__WEBPACK_IMPORTED_MODULE_4__.extractGridDetails(grid).rows, (acc, row)=>{
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(row.cells, (cell, idx)=>{
            if (cell.isLocked) {
                acc[idx] = true;
            }
        });
        return acc;
    }, {});
    const lockedArr = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.mapToArray(locked, (_val, key)=>parseInt(key, 10));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.sort(lockedArr);
};



}),
"../snooker/src/main/ts/ephox/snooker/util/Util.ts": 
/*!*********************************************************!*\
  !*** ../snooker/src/main/ts/ephox/snooker/util/Util.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  deduce: () => (deduce),
  unique: () => (unique)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const unique = (xs, eq)=>{
    const result = [];
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(xs, (x, i)=>{
        if (i < xs.length - 1 && !eq(x, xs[i + 1])) {
            result.push(x);
        } else if (i === xs.length - 1) {
            result.push(x);
        }
    });
    return result;
};
const deduce = (xs, index)=>{
    if (index < 0 || index >= xs.length - 1) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
    }
    const current = xs[index].fold(()=>{
        const rest = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.reverse(xs.slice(0, index));
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(rest, (a, i)=>a.map((aa)=>({
                    value: aa,
                    delta: i + 1
                })));
    }, (c)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
            value: c,
            delta: 0
        }));
    const next = xs[index + 1].fold(()=>{
        const rest = xs.slice(index + 1);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.findMap(rest, (a, i)=>a.map((aa)=>({
                    value: aa,
                    delta: i + 1
                })));
    }, (n)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
            value: n,
            delta: 1
        }));
    return current.bind((c)=>next.map((n)=>{
            const extras = n.delta + c.delta;
            return Math.abs(n.value - c.value) / extras;
        }));
};



}),
"../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts": 
/*!*********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  toArray: () => (toArray)
});
/**
 * Applies f repeatedly until it completes (by returning Optional.none()).
 *
 * Normally would just use recursion, but JavaScript lacks tail call optimisation.
 *
 * This is what recursion looks like when manually unravelled :)
 */ const toArray = (target, f)=>{
    const r = [];
    const recurse = (e)=>{
        r.push(e);
        return f(e);
    };
    let cur = f(target);
    do {
        cur = cur.bind(recurse);
    }while (cur.isSome())
    return r;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts": 
/*!***********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  contains: () => (contains),
  eq: () => (eq),
  is: () => (is),
  isEqualNode: () => (isEqualNode),
  member: () => (member)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _search_Selectors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const eq = (e1, e2)=>e1.dom === e2.dom;
const isEqualNode = (e1, e2)=>e1.dom.isEqualNode(e2.dom);
const member = (element, elements)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(elements, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.curry(eq, element));
// Returns: true if node e1 contains e2, otherwise false.
// (returns false if e1===e2: A node does not contain itself).
const contains = (e1, e2)=>{
    const d1 = e1.dom;
    const d2 = e2.dom;
    return d1 === d2 ? false : d1.contains(d2);
};
const is = _search_Selectors__WEBPACK_IMPORTED_MODULE_2__.is;



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/DocumentPosition.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/DocumentPosition.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  commonAncestorContainer: () => (commonAncestorContainer)
});
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _Compare__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");



const makeRange = (start, soffset, finish, foffset)=>{
    const doc = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.owner(start);
    // TODO: We need to think about a better place to put native range creation code. Does it even belong in sugar?
    // Could the `Compare` checks (node.compareDocumentPosition) handle these situations better?
    const rng = doc.dom.createRange();
    rng.setStart(start.dom, soffset);
    rng.setEnd(finish.dom, foffset);
    return rng;
};
// Return the deepest - or furthest down the document tree - Node that contains both boundary points
// of the range (start:soffset, finish:foffset).
const commonAncestorContainer = (start, soffset, finish, foffset)=>{
    const r = makeRange(start, soffset, finish, foffset);
    return _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(r.commonAncestorContainer);
};
const after = (start, soffset, finish, foffset)=>{
    const r = makeRange(start, soffset, finish, foffset);
    const same = _Compare__WEBPACK_IMPORTED_MODULE_2__.eq(start, finish) && soffset === foffset;
    return r.collapsed && !same;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  append: () => (append),
  appendAt: () => (appendAt),
  before: () => (before),
  prepend: () => (prepend),
  wrap: () => (wrap)
});
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");

const before = (marker, element)=>{
    const parent = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.parent(marker);
    parent.each((v)=>{
        v.dom.insertBefore(element.dom, marker.dom);
    });
};
const after = (marker, element)=>{
    const sibling = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.nextSibling(marker);
    sibling.fold(()=>{
        const parent = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.parent(marker);
        parent.each((v)=>{
            append(v, element);
        });
    }, (v)=>{
        before(v, element);
    });
};
const prepend = (parent, element)=>{
    const firstChild = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.firstChild(parent);
    firstChild.fold(()=>{
        append(parent, element);
    }, (v)=>{
        parent.dom.insertBefore(element.dom, v.dom);
    });
};
const append = (parent, element)=>{
    parent.dom.appendChild(element.dom);
};
const appendAt = (parent, element, index)=>{
    _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.child(parent, index).fold(()=>{
        append(parent, element);
    }, (v)=>{
        before(v, element);
    });
};
const wrap = (element, wrapper)=>{
    before(element, wrapper);
    append(wrapper, element);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts": 
/*!*************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  after: () => (after),
  append: () => (append),
  before: () => (before),
  prepend: () => (prepend)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Insert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");


const before = (marker, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.before(marker, x);
    });
};
const after = (marker, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x, i)=>{
        const e = i === 0 ? marker : elements[i - 1];
        _Insert__WEBPACK_IMPORTED_MODULE_1__.after(e, x);
    });
};
const prepend = (parent, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements.slice().reverse(), (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.prepend(parent, x);
    });
};
const append = (parent, elements)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (x)=>{
        _Insert__WEBPACK_IMPORTED_MODULE_1__.append(parent, x);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  empty: () => (empty),
  remove: () => (remove),
  unwrap: () => (unwrap)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _InsertAll__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InsertAll */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");



const empty = (element)=>{
    // shortcut "empty node" trick. Requires IE 9.
    element.dom.textContent = '';
    // If the contents was a single empty text node, the above doesn't remove it. But, it's still faster in general
    // than removing every child node manually.
    // The following is (probably) safe for performance as 99.9% of the time the trick works and
    // Traverse.children will return an empty array.
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(_search_Traverse__WEBPACK_IMPORTED_MODULE_1__.children(element), (rogue)=>{
        remove(rogue);
    });
};
const remove = (element)=>{
    const dom = element.dom;
    if (dom.parentNode !== null) {
        dom.parentNode.removeChild(dom);
    }
};
const unwrap = (wrapper)=>{
    const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_1__.children(wrapper);
    if (children.length > 0) {
        _InsertAll__WEBPACK_IMPORTED_MODULE_2__.after(wrapper, children);
    }
    remove(wrapper);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  deep: () => (deep),
  mutate: () => (mutate),
  shallow: () => (shallow),
  shallowAs: () => (shallowAs)
});
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../properties/Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _Insert__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _InsertAll__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./InsertAll */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _Remove__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Remove */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");






const clone = (original, isDeep)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(original.dom.cloneNode(isDeep));
/** Shallow clone - just the tag, no children */ const shallow = (original)=>clone(original, false);
/** Deep clone - everything copied including children */ const deep = (original)=>clone(original, true);
/** Shallow clone, with a new tag */ const shallowAs = (original, tag)=>{
    const nu = _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromTag(tag);
    const attributes = _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__.clone(original);
    _properties_Attribute__WEBPACK_IMPORTED_MODULE_1__.setAll(nu, attributes);
    return nu;
};
/** Deep clone, with a new tag */ const copy = (original, tag)=>{
    const nu = shallowAs(original, tag);
    // NOTE
    // previously this used serialisation:
    // nu.dom.innerHTML = original.dom.innerHTML;
    //
    // Clone should be equivalent (and faster), but if TD <-> TH toggle breaks, put it back.
    const cloneChildren = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(deep(original));
    _InsertAll__WEBPACK_IMPORTED_MODULE_3__.append(nu, cloneChildren);
    return nu;
};
/** Change the tag name, but keep all children */ const mutate = (original, tag)=>{
    const nu = shallowAs(original, tag);
    _Insert__WEBPACK_IMPORTED_MODULE_4__.after(original, nu);
    const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(original);
    _InsertAll__WEBPACK_IMPORTED_MODULE_3__.append(nu, children);
    _Remove__WEBPACK_IMPORTED_MODULE_5__.remove(original);
    return nu;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/events/DomEvent.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/events/DomEvent.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bind: () => (bind),
  capture: () => (capture),
  fromRawEvent: () => (fromRawEvent)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _impl_FilteredEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../impl/FilteredEvent */ "../sugar/src/main/ts/ephox/sugar/impl/FilteredEvent.ts");


const filter = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.always; // no filter on plain DomEvents
const bind = (element, event, handler)=>_impl_FilteredEvent__WEBPACK_IMPORTED_MODULE_1__.bind(element, event, filter, handler);
const capture = (element, event, handler)=>_impl_FilteredEvent__WEBPACK_IMPORTED_MODULE_1__.capture(element, event, filter, handler);
const fromRawEvent = _impl_FilteredEvent__WEBPACK_IMPORTED_MODULE_1__.fromRawEvent;



}),
"../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ATTRIBUTE: () => (ATTRIBUTE),
  CDATA_SECTION: () => (CDATA_SECTION),
  COMMENT: () => (COMMENT),
  DOCUMENT: () => (DOCUMENT),
  DOCUMENT_FRAGMENT: () => (DOCUMENT_FRAGMENT),
  DOCUMENT_TYPE: () => (DOCUMENT_TYPE),
  ELEMENT: () => (ELEMENT),
  ENTITY: () => (ENTITY),
  ENTITY_REFERENCE: () => (ENTITY_REFERENCE),
  NOTATION: () => (NOTATION),
  PROCESSING_INSTRUCTION: () => (PROCESSING_INSTRUCTION),
  TEXT: () => (TEXT)
});
const ATTRIBUTE = 2;
const CDATA_SECTION = 4;
const COMMENT = 8;
const DOCUMENT = 9;
const DOCUMENT_TYPE = 10;
const DOCUMENT_FRAGMENT = 11;
const ELEMENT = 1;
const TEXT = 3;
const PROCESSING_INSTRUCTION = 7;
const ENTITY_REFERENCE = 5;
const ENTITY = 6;
const NOTATION = 12;



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  body: () => (body),
  getBody: () => (getBody),
  inBody: () => (inBody)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarShadowDom */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts");




// Node.contains() is very, very, very good performance
// http://jsperf.com/closest-vs-contains/5
const inBody = (element)=>{
    // Technically this is only required on IE, where contains() returns false for text nodes.
    // But it's cheap enough to run everywhere and Sugar doesn't have platform detection (yet).
    const dom = _SugarNode__WEBPACK_IMPORTED_MODULE_0__.isText(element) ? element.dom.parentNode : element.dom;
    // use ownerDocument.body to ensure this works inside iframes.
    // Normally contains is bad because an element "contains" itself, but here we want that.
    if (dom === undefined || dom === null || dom.ownerDocument === null) {
        return false;
    }
    const doc = dom.ownerDocument;
    return (0,_SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__.getShadowRoot)(_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(dom)).fold(()=>doc.body.contains(dom), _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.compose1(inBody, _SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__.getShadowHost));
};
const body = ()=>getBody(_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(document));
const getBody = (doc)=>{
    const b = doc.dom.body;
    if (b === null || b === undefined) {
        throw new Error('Body is not available yet');
    }
    return _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(b);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts": 
/*!*****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SugarElement: () => (SugarElement)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const fromHtml = (html, scope)=>{
    const doc = scope || document;
    const div = doc.createElement('div');
    div.innerHTML = html;
    if (!div.hasChildNodes() || div.childNodes.length > 1) {
        const message = 'HTML does not have a single root node';
        // eslint-disable-next-line no-console
        console.error(message, html);
        throw new Error(message);
    }
    return fromDom(div.childNodes[0]);
};
const fromTag = (tag, scope)=>{
    const doc = scope || document;
    const node = doc.createElement(tag);
    return fromDom(node);
};
const fromText = (text, scope)=>{
    const doc = scope || document;
    const node = doc.createTextNode(text);
    return fromDom(node);
};
const fromDom = (node)=>{
    // TODO: Consider removing this check, but left atm for safety
    if (node === null || node === undefined) {
        throw new Error('Node cannot be null or undefined');
    }
    return {
        dom: node
    };
};
const fromPoint = (docElm, x, y)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);
// tslint:disable-next-line:variable-name
const SugarElement = {
    fromHtml,
    fromTag,
    fromText,
    fromDom,
    fromPoint
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromDom: () => (fromDom),
  fromHtml: () => (fromHtml),
  fromTags: () => (fromTags),
  fromText: () => (fromText)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");



const fromHtml = (html, scope)=>{
    const doc = scope || document;
    const div = doc.createElement('div');
    div.innerHTML = html;
    return _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.children(_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(div));
};
const fromTags = (tags, scope)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(tags, (x)=>_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag(x, scope));
const fromText = (texts, scope)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(texts, (x)=>_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromText(x, scope));
const fromDom = (nodes)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.map(nodes, _SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom);



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarFragment.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarFragment.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromElements: () => (fromElements)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");


const fromElements = (elements, scope)=>{
    const doc = scope || document;
    const fragment = doc.createDocumentFragment();
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(elements, (element)=>{
        fragment.appendChild(element.dom);
    });
    return _SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(fragment);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getHead: () => (getHead),
  head: () => (head)
});
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");

const head = ()=>getHead(_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(document));
const getHead = (doc)=>{
    /*
   * IE9 and above per
   * https://developer.mozilla.org/en-US/docs/Web/API/Document/head
   */ const b = doc.dom.head;
    if (b === null || b === undefined) {
        throw new Error('Head is not available yet');
    }
    return _SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(b);
};


}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isComment: () => (isComment),
  isDocument: () => (isDocument),
  isDocumentFragment: () => (isDocumentFragment),
  isElement: () => (isElement),
  isHTMLElement: () => (isHTMLElement),
  isTag: () => (isTag),
  isText: () => (isText),
  name: () => (name),
  type: () => (type),
  value: () => (value)
});
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/SandHTMLElement.ts");
/* ESM import */var _NodeTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NodeTypes */ "../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts");


const name = (element)=>{
    const r = element.dom.nodeName;
    return r.toLowerCase();
};
const type = (element)=>element.dom.nodeType;
const value = (element)=>element.dom.nodeValue;
const isType = (t)=>(element)=>type(element) === t;
const isComment = (element)=>type(element) === _NodeTypes__WEBPACK_IMPORTED_MODULE_0__.COMMENT || name(element) === '#comment';
const isHTMLElement = (element)=>isElement(element) && _ephox_sand__WEBPACK_IMPORTED_MODULE_1__.isPrototypeOf(element.dom);
const isElement = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT);
const isText = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.TEXT);
const isDocument = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT);
const isDocumentFragment = isType(_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_FRAGMENT);
const isTag = (tag)=>(e)=>isElement(e) && name(e) === tag;



}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  createElement: () => (createElement),
  getContentContainer: () => (getContentContainer),
  getOriginalEventTarget: () => (getOriginalEventTarget),
  getRootNode: () => (getRootNode),
  getShadowHost: () => (getShadowHost),
  getShadowRoot: () => (getShadowRoot),
  getStyleContainer: () => (getStyleContainer),
  isClosedShadowRoot: () => (isClosedShadowRoot),
  isInShadowRoot: () => (isInShadowRoot),
  isOpenShadowHost: () => (isOpenShadowHost),
  isOpenShadowRoot: () => (isOpenShadowRoot),
  isShadowRoot: () => (isShadowRoot)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _SugarHead__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SugarHead */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarHead.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");





/**
 * Is the element a ShadowRoot?
 *
 * Note: this is insufficient to test if any element is a shadow root, but it is sufficient to differentiate between
 * a Document and a ShadowRoot.
 */ const isShadowRoot = (dos)=>_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isDocumentFragment(dos) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(dos.dom.host);
const getRootNode = (e)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(e.dom.getRootNode());
/** Create an element, using the actual document. */ const createElement = (dos, tag)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromTag(tag, _search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos).dom);
/** Where style tags need to go. ShadowRoot or document head */ const getStyleContainer = (dos)=>isShadowRoot(dos) ? dos : _SugarHead__WEBPACK_IMPORTED_MODULE_4__.getHead(_search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos));
/** Where content needs to go. ShadowRoot or document body */ const getContentContainer = (dos)=>// Can't use SugarBody.body without causing a circular module reference (since SugarBody.inBody uses SugarShadowDom)
    isShadowRoot(dos) ? dos : _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(_search_Traverse__WEBPACK_IMPORTED_MODULE_3__.documentOrOwner(dos).dom.body);
/** Is this element either a ShadowRoot or a descendent of a ShadowRoot. */ const isInShadowRoot = (e)=>getShadowRoot(e).isSome();
/** If this element is in a ShadowRoot, return it. */ const getShadowRoot = (e)=>{
    const r = getRootNode(e);
    return isShadowRoot(r) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.some(r) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.none();
};
/** Return the host of a ShadowRoot.
 *
 * This function will throw if Shadow DOM is unsupported in the browser, or if the host is null.
 * If you actually have a ShadowRoot, this shouldn't happen.
 */ const getShadowHost = (e)=>_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(e.dom.host);
/**
 * When Events bubble up through a ShadowRoot, the browser changes the target to be the shadow host.
 * This function gets the "original" event target if possible.
 * This only works if the shadow tree is open - if the shadow tree is closed, event.target is returned.
 * See: https://developers.google.com/web/fundamentals/web-components/shadowdom#events
 */ const getOriginalEventTarget = (event)=>{
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(event.target)) {
        const el = _SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(event.target);
        if (_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isElement(el) && isOpenShadowHost(el)) {
            // When target element is inside Shadow DOM we need to take first element from composedPath
            // otherwise we'll get Shadow Root parent, not actual target element.
            if (event.composed && event.composedPath) {
                const composedPath = event.composedPath();
                if (composedPath) {
                    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.head(composedPath);
                }
            }
        }
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.from(event.target);
};
const isOpenShadowRoot = (sr)=>sr.dom.mode === 'open';
const isClosedShadowRoot = (sr)=>sr.dom.mode === 'closed';
/** Return true if the element is a host of an open shadow root.
 *  Return false if the element is a host of a closed shadow root, or if the element is not a host.
 */ const isOpenShadowHost = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isNonNullable(element.dom.shadowRoot);


}),
"../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getOption: () => (getOption),
  set: () => (set)
});
/* ESM import */var _impl_NodeValue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/NodeValue */ "../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts");
/* ESM import */var _SugarNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const api = (0,_impl_NodeValue__WEBPACK_IMPORTED_MODULE_0__.NodeValue)(_SugarNode__WEBPACK_IMPORTED_MODULE_1__.isText, 'text');
const get = (element)=>api.get(element);
const getOption = (element)=>api.getOption(element);
const set = (element, value)=>api.set(element, value);



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/AttrList.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/AttrList.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  add: () => (add),
  read: () => (read),
  remove: () => (remove)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _Attribute__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");


// Methods for handling attributes that contain a list of values <div foo="alpha beta theta">
const read = (element, attr)=>{
    const value = _Attribute__WEBPACK_IMPORTED_MODULE_0__.get(element, attr);
    return value === undefined || value === '' ? [] : value.split(' ');
};
const add = (element, attr, id)=>{
    const old = read(element, attr);
    const nu = old.concat([
        id
    ]);
    _Attribute__WEBPACK_IMPORTED_MODULE_0__.set(element, attr, nu.join(' '));
    return true;
};
const remove = (element, attr, id)=>{
    const nu = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(read(element, attr), (v)=>v !== id);
    if (nu.length > 0) {
        _Attribute__WEBPACK_IMPORTED_MODULE_0__.set(element, attr, nu.join(' '));
    } else {
        _Attribute__WEBPACK_IMPORTED_MODULE_0__.remove(element, attr);
    }
    return false;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  clone: () => (clone),
  get: () => (get),
  getOpt: () => (getOpt),
  has: () => (has),
  hasNone: () => (hasNone),
  remove: () => (remove),
  set: () => (set),
  setAll: () => (setAll),
  setOptions: () => (setOptions),
  transfer: () => (transfer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");


const rawSet = (dom, key, value)=>{
    /*
   * JQuery coerced everything to a string, and silently did nothing on text node/null/undefined.
   *
   * We fail on those invalid cases, only allowing numbers and booleans.
   */ if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isString(value) || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isBoolean(value) || _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isNumber(value)) {
        dom.setAttribute(key, value + '');
    } else {
        // eslint-disable-next-line no-console
        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);
        throw new Error('Attribute value was not simple');
    }
};
const set = (element, key, value)=>{
    rawSet(element.dom, key, value);
};
const setAll = (element, attrs)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(attrs, (v, k)=>{
        rawSet(dom, k, v);
    });
};
const setOptions = (element, attrs)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(attrs, (v, k)=>{
        v.fold(()=>{
            remove(element, k);
        }, (value)=>{
            rawSet(element.dom, k, value);
        });
    });
};
const get = (element, key)=>{
    const v = element.dom.getAttribute(key);
    // undefined is the more appropriate value for JS, and this matches JQuery
    return v === null ? undefined : v;
};
const getOpt = (element, key)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(get(element, key));
const has = (element, key)=>{
    const dom = element.dom;
    // return false for non-element nodes, no point in throwing an error
    return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;
};
const remove = (element, key)=>{
    element.dom.removeAttribute(key);
};
const hasNone = (element)=>{
    const attrs = element.dom.attributes;
    return attrs === undefined || attrs === null || attrs.length === 0;
};
const clone = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(element.dom.attributes, (acc, attr)=>{
        acc[attr.name] = attr.value;
        return acc;
    }, {});
const transferOne = (source, destination, attr)=>{
    // NOTE: We don't want to clobber any existing attributes
    if (!has(destination, attr)) {
        getOpt(source, attr).each((srcValue)=>set(destination, attr, srcValue));
    }
};
// Transfer attributes(attrs) from source to destination, unless they are already present
const transfer = (source, destination, attrs)=>{
    if (!_node_SugarNode__WEBPACK_IMPORTED_MODULE_4__.isElement(source) || !_node_SugarNode__WEBPACK_IMPORTED_MODULE_4__.isElement(destination)) {
        return;
    }
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(attrs, (attr)=>{
        transferOne(source, destination, attr);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts": 
/*!****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  add: () => (add),
  has: () => (has),
  remove: () => (remove),
  toggle: () => (toggle),
  toggler: () => (toggler)
});
/* ESM import */var _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/ClassList */ "../sugar/src/main/ts/ephox/sugar/impl/ClassList.ts");
/* ESM import */var _Attribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _Toggler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Toggler */ "../sugar/src/main/ts/ephox/sugar/api/properties/Toggler.ts");



/*
 * ClassList is IE10 minimum:
 * https://developer.mozilla.org/en-US/docs/Web/API/Element.classList
 *
 * Note that IE doesn't support the second argument to toggle (at all).
 * If it did, the toggler could be better.
 */ const add = (element, clazz)=>{
    if (_impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element)) {
        element.dom.classList.add(clazz);
    } else {
        _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.add(element, clazz);
    }
};
const cleanClass = (element)=>{
    const classList = _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element) ? element.dom.classList : _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.get(element);
    // classList is a "live list", so this is up to date already
    if (classList.length === 0) {
        // No more classes left, remove the class attribute as well
        _Attribute__WEBPACK_IMPORTED_MODULE_1__.remove(element, 'class');
    }
};
const remove = (element, clazz)=>{
    if (_impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element)) {
        const classList = element.dom.classList;
        classList.remove(clazz);
    } else {
        _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.remove(element, clazz);
    }
    cleanClass(element);
};
const toggle = (element, clazz)=>{
    const result = _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element) ? element.dom.classList.toggle(clazz) : _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.toggle(element, clazz);
    cleanClass(element);
    return result;
};
const toggler = (element, clazz)=>{
    const hasClasslist = _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element);
    const classList = element.dom.classList;
    const off = ()=>{
        if (hasClasslist) {
            classList.remove(clazz);
        } else {
            _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.remove(element, clazz);
        }
        cleanClass(element);
    };
    const on = ()=>{
        if (hasClasslist) {
            classList.add(clazz);
        } else {
            _impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.add(element, clazz);
        }
    };
    return (0,_Toggler__WEBPACK_IMPORTED_MODULE_2__.Toggler)(off, on, has(element, clazz));
};
const has = (element, clazz)=>_impl_ClassList__WEBPACK_IMPORTED_MODULE_0__.supports(element) && element.dom.classList.contains(clazz);



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Classes.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Classes.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  add: () => (add),
  get: () => (get),
  hasAll: () => (hasAll),
  hasAny: () => (hasAny),
  remove: () => (remove),
  toggle: () => (toggle)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _impl_ClassList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/ClassList */ "../sugar/src/main/ts/ephox/sugar/impl/ClassList.ts");
/* ESM import */var _Class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Class */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");



/*
 * ClassList is IE10 minimum:
 * https://developer.mozilla.org/en-US/docs/Web/API/Element.classList
 */ const add = (element, classes)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(classes, (x)=>{
        _Class__WEBPACK_IMPORTED_MODULE_1__.add(element, x);
    });
};
const remove = (element, classes)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(classes, (x)=>{
        _Class__WEBPACK_IMPORTED_MODULE_1__.remove(element, x);
    });
};
const toggle = (element, classes)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.each(classes, (x)=>{
        _Class__WEBPACK_IMPORTED_MODULE_1__.toggle(element, x);
    });
};
const hasAll = (element, classes)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.forall(classes, (clazz)=>_Class__WEBPACK_IMPORTED_MODULE_1__.has(element, clazz));
const hasAny = (element, classes)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(classes, (clazz)=>_Class__WEBPACK_IMPORTED_MODULE_1__.has(element, clazz));
const getNative = (element)=>{
    const classList = element.dom.classList;
    const r = new Array(classList.length);
    for(let i = 0; i < classList.length; i++){
        const item = classList.item(i);
        if (item !== null) {
            r[i] = item;
        }
    }
    return r;
};
const get = (element)=>_impl_ClassList__WEBPACK_IMPORTED_MODULE_2__.supports(element) ? getNative(element) : _impl_ClassList__WEBPACK_IMPORTED_MODULE_2__.get(element);



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts": 
/*!**************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts ***!
  \**************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  closest: () => (closest),
  get: () => (get),
  getRaw: () => (getRaw),
  isEditable: () => (isEditable),
  set: () => (set)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _search_SelectorFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/SelectorFind */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");



const closest = (target)=>_search_SelectorFind__WEBPACK_IMPORTED_MODULE_0__.closest(target, '[contenteditable]');
const isEditable = (element, assumeEditable = false)=>{
    if (_node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element)) {
        return element.dom.isContentEditable;
    } else {
        // Find the closest contenteditable element and check if it's editable
        return closest(element).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(assumeEditable), (editable)=>getRaw(editable) === 'true');
    }
};
const getRaw = (element)=>element.dom.contentEditable;
const get = (element)=>isEditable(element, false);
const set = (element, editable)=>{
    element.dom.contentEditable = editable ? 'true' : 'false';
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  copy: () => (copy),
  get: () => (get),
  getAllRaw: () => (getAllRaw),
  getRaw: () => (getRaw),
  isValidValue: () => (isValidValue),
  preserve: () => (preserve),
  reflow: () => (reflow),
  remove: () => (remove),
  set: () => (set),
  setAll: () => (setAll),
  setOptions: () => (setOptions),
  transfer: () => (transfer)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optionals.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _impl_Style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../impl/Style */ "../sugar/src/main/ts/ephox/sugar/impl/Style.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _Attribute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");






const internalSet = (dom, property, value)=>{
    // This is going to hurt. Apologies.
    // JQuery coerces numbers to pixels for certain property names, and other times lets numbers through.
    // we're going to be explicit; strings only.
    if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isString(value)) {
        // eslint-disable-next-line no-console
        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);
        throw new Error('CSS value must be a string: ' + value);
    }
    // removed: support for dom().style[property] where prop is camel case instead of normal property name
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        dom.style.setProperty(property, value);
    }
};
const internalRemove = (dom, property)=>{
    /*
   * IE9 and above - MDN doesn't have details, but here's a couple of random internet claims
   *
   * http://help.dottoro.com/ljopsjck.php
   * http://stackoverflow.com/a/7901886/7546
   */ if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        dom.style.removeProperty(property);
    }
};
const set = (element, property, value)=>{
    const dom = element.dom;
    internalSet(dom, property, value);
};
const setAll = (element, css)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(css, (v, k)=>{
        internalSet(dom, k, v);
    });
};
const setOptions = (element, css)=>{
    const dom = element.dom;
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.each(css, (v, k)=>{
        v.fold(()=>{
            internalRemove(dom, k);
        }, (value)=>{
            internalSet(dom, k, value);
        });
    });
};
/*
 * NOTE: For certain properties, this returns the "used value" which is subtly different to the "computed value" (despite calling getComputedStyle).
 * Blame CSS 2.0.
 *
 * https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
 */ const get = (element, property)=>{
    const dom = element.dom;
    /*
   * IE9 and above per
   * https://developer.mozilla.org/en/docs/Web/API/window.getComputedStyle
   *
   * Not in numerosity, because it doesn't memoize and looking this up dynamically in performance critical code would be horrendous.
   *
   * JQuery has some magic here for IE popups, but we don't really need that.
   * It also uses element.ownerDocument.defaultView to handle iframes but that hasn't been required since FF 3.6.
   */ const styles = window.getComputedStyle(dom);
    const r = styles.getPropertyValue(property);
    // jquery-ism: If r is an empty string, check that the element is not in a document. If it isn't, return the raw value.
    // Turns out we do this a lot.
    return r === '' && !_node_SugarBody__WEBPACK_IMPORTED_MODULE_3__.inBody(element) ? getUnsafeProperty(dom, property) : r;
};
// removed: support for dom().style[property] where prop is camel case instead of normal property name
// empty string is what the browsers (IE11 and Chrome) return when the propertyValue doesn't exists.
const getUnsafeProperty = (dom, property)=>_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom) ? dom.style.getPropertyValue(property) : '';
/*
 * Gets the raw value from the style attribute. Useful for retrieving "used values" from the DOM:
 * https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
 *
 * Returns NONE if the property isn't set, or the value is an empty string.
 */ const getRaw = (element, property)=>{
    const dom = element.dom;
    const raw = getUnsafeProperty(dom, property);
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.from(raw).filter((r)=>r.length > 0);
};
const getAllRaw = (element)=>{
    const css = {};
    const dom = element.dom;
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
        for(let i = 0; i < dom.style.length; i++){
            const ruleName = dom.style.item(i);
            css[ruleName] = dom.style[ruleName];
        }
    }
    return css;
};
const isValidValue = (tag, property, value)=>{
    const element = _node_SugarElement__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromTag(tag);
    set(element, property, value);
    const style = getRaw(element, property);
    return style.isSome();
};
const remove = (element, property)=>{
    const dom = element.dom;
    internalRemove(dom, property);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.is(_Attribute__WEBPACK_IMPORTED_MODULE_7__.getOpt(element, 'style').map(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.trim), '')) {
        // No more styles left, remove the style attribute as well
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.remove(element, 'style');
    }
};
const preserve = (element, f)=>{
    const oldStyles = _Attribute__WEBPACK_IMPORTED_MODULE_7__.get(element, 'style');
    const result = f(element);
    if (oldStyles === undefined) {
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.remove(element, 'style');
    } else {
        _Attribute__WEBPACK_IMPORTED_MODULE_7__.set(element, 'style', oldStyles);
    }
    return result;
};
const copy = (source, target)=>{
    const sourceDom = source.dom;
    const targetDom = target.dom;
    if (_impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(sourceDom) && _impl_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(targetDom)) {
        targetDom.style.cssText = sourceDom.style.cssText;
    }
};
/* NOTE: This function is here for the side effect it triggers.
The value itself is not used.
Be sure to not use the return value, and that it is not removed by a minifier.
 */ const reflow = (e)=>e.dom.offsetWidth;
const transferOne = (source, destination, style)=>{
    getRaw(source, style).each((value)=>{
        // NOTE: We don't want to clobber any existing inline styles.
        if (getRaw(destination, style).isNone()) {
            set(destination, style, value);
        }
    });
};
const transfer = (source, destination, styles)=>{
    if (!_node_SugarNode__WEBPACK_IMPORTED_MODULE_9__.isElement(source) || !_node_SugarNode__WEBPACK_IMPORTED_MODULE_9__.isElement(destination)) {
        return;
    }
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each(styles, (style)=>{
        transferOne(source, destination, style);
    });
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getDirection: () => (getDirection),
  onDirection: () => (onDirection)
});
/* ESM import */var _Css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");

const onDirection = (isLtr, isRtl)=>(element)=>getDirection(element) === 'rtl' ? isRtl : isLtr;
const getDirection = (element)=>_Css__WEBPACK_IMPORTED_MODULE_0__.get(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Html.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Html.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getOuter: () => (getOuter),
  set: () => (set)
});
/* ESM import */var _dom_Insert__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dom/Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _dom_InsertAll__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dom/InsertAll */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _dom_Remove__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dom/Remove */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarElements__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node/SugarElements */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");






const get = (element)=>element.dom.innerHTML;
const set = (element, content)=>{
    const owner = _search_Traverse__WEBPACK_IMPORTED_MODULE_0__.owner(element);
    const docDom = owner.dom;
    // FireFox has *terrible* performance when using innerHTML = x
    const fragment = _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(docDom.createDocumentFragment());
    const contentElements = _node_SugarElements__WEBPACK_IMPORTED_MODULE_2__.fromHtml(content, docDom);
    _dom_InsertAll__WEBPACK_IMPORTED_MODULE_3__.append(fragment, contentElements);
    _dom_Remove__WEBPACK_IMPORTED_MODULE_4__.empty(element);
    _dom_Insert__WEBPACK_IMPORTED_MODULE_5__.append(element, fragment);
};
const getOuter = (element)=>{
    const container = _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromTag('div');
    const clone = _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(element.dom.cloneNode(true));
    _dom_Insert__WEBPACK_IMPORTED_MODULE_5__.append(container, clone);
    return get(container);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/OnNode.ts": 
/*!*****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/OnNode.ts ***!
  \*****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  addClass: () => (addClass),
  hasClass: () => (hasClass),
  removeClass: () => (removeClass),
  removeClasses: () => (removeClasses)
});
/* ESM import */var _Class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Class */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _Classes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Classes */ "../sugar/src/main/ts/ephox/sugar/api/properties/Classes.ts");


const addClass = (clazz)=>(element)=>{
        _Class__WEBPACK_IMPORTED_MODULE_0__.add(element, clazz);
    };
const removeClass = (clazz)=>(element)=>{
        _Class__WEBPACK_IMPORTED_MODULE_0__.remove(element, clazz);
    };
const removeClasses = (classes)=>(element)=>{
        _Classes__WEBPACK_IMPORTED_MODULE_1__.remove(element, classes);
    };
const hasClass = (clazz)=>(element)=>_Class__WEBPACK_IMPORTED_MODULE_0__.has(element, clazz);



}),
"../sugar/src/main/ts/ephox/sugar/api/properties/Toggler.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/properties/Toggler.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Toggler: () => (Toggler)
});
const Toggler = (turnOff, turnOn, initial)=>{
    let active = initial || false;
    const on = ()=>{
        turnOn();
        active = true;
    };
    const off = ()=>{
        turnOff();
        active = false;
    };
    const toggle = ()=>{
        const f = active ? off : on;
        f();
    };
    const isOn = ()=>active;
    return {
        on,
        off,
        toggle,
        isOn
    };
};


}),
"../sugar/src/main/ts/ephox/sugar/api/search/ElementAddress.ts": 
/*!*********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/ElementAddress.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  childOf: () => (childOf),
  descendantsInAncestor: () => (descendantsInAncestor),
  indexInParent: () => (indexInParent),
  indexOf: () => (indexOf),
  selectorsInParent: () => (selectorsInParent)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _PredicateFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _SelectorFilter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SelectorFilter */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _SelectorFind__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SelectorFind */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _Traverse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");






const inAncestor = (ancestor, descendants, element, index)=>({
        ancestor,
        descendants,
        element,
        index
    });
const inParent = (parent, children, element, index)=>({
        parent,
        children,
        element,
        index
    });
const childOf = (element, ancestor)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.closest(element, (elem)=>_Traverse__WEBPACK_IMPORTED_MODULE_1__.parent(elem).exists((parent)=>_dom_Compare__WEBPACK_IMPORTED_MODULE_2__.eq(parent, ancestor)));
const indexInParent = (element)=>_Traverse__WEBPACK_IMPORTED_MODULE_1__.parent(element).bind((parent)=>{
        const children = _Traverse__WEBPACK_IMPORTED_MODULE_1__.children(parent);
        return indexOf(children, element).map((index)=>inParent(parent, children, element, index));
    });
const indexOf = (elements, element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findIndex(elements, _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.curry(_dom_Compare__WEBPACK_IMPORTED_MODULE_2__.eq, element));
const selectorsInParent = (element, selector)=>_Traverse__WEBPACK_IMPORTED_MODULE_1__.parent(element).bind((parent)=>{
        const children = _SelectorFilter__WEBPACK_IMPORTED_MODULE_5__.children(parent, selector);
        return indexOf(children, element).map((index)=>inParent(parent, children, element, index));
    });
const descendantsInAncestor = (element, ancestorSelector, descendantSelector)=>_SelectorFind__WEBPACK_IMPORTED_MODULE_6__.closest(element, ancestorSelector).bind((ancestor)=>{
        const descendants = _SelectorFilter__WEBPACK_IMPORTED_MODULE_5__.descendants(ancestor, descendantSelector);
        return indexOf(descendants, element).map((index)=>inAncestor(ancestor, descendants, element, index));
    });



}),
"../sugar/src/main/ts/ephox/sugar/api/search/PredicateExists.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/PredicateExists.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  any: () => (any),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  sibling: () => (sibling)
});
/* ESM import */var _PredicateFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");

const any = (predicate)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.first(predicate).isSome();
const ancestor = (scope, predicate, isRoot)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.ancestor(scope, predicate, isRoot).isSome();
const closest = (scope, predicate, isRoot)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.closest(scope, predicate, isRoot).isSome();
const sibling = (scope, predicate)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.sibling(scope, predicate).isSome();
const child = (scope, predicate)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.child(scope, predicate).isSome();
const descendant = (scope, predicate)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.descendant(scope, predicate).isSome();



}),
"../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  ancestors: () => (ancestors),
  children: () => (children),
  descendants: () => (descendants),
  siblings: () => (siblings)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");



// maybe TraverseWith, similar to traverse but with a predicate?
const all = (predicate)=>descendants(_node_SugarBody__WEBPACK_IMPORTED_MODULE_0__.body(), predicate);
const ancestors = (scope, predicate, isRoot)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.parents(scope, isRoot), predicate);
const siblings = (scope, predicate)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.siblings(scope), predicate);
const children = (scope, predicate)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.filter(_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(scope), predicate);
const descendants = (scope, predicate)=>{
    let result = [];
    // Recurse.toArray() might help here
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.each(_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(scope), (x)=>{
        if (predicate(x)) {
            result = result.concat([
                x
            ]);
        }
        result = result.concat(descendants(x, predicate));
    });
    return result;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts": 
/*!********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts ***!
  \********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  first: () => (first),
  sibling: () => (sibling)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../impl/ClosestOrAncestor */ "../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");





const first = (predicate)=>descendant(_node_SugarBody__WEBPACK_IMPORTED_MODULE_0__.body(), predicate);
const ancestor = (scope, predicate, isRoot)=>{
    let element = scope.dom;
    const stop = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isFunction(isRoot) ? isRoot : _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.never;
    while(element.parentNode){
        element = element.parentNode;
        const el = _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(element);
        if (predicate(el)) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(el);
        } else if (stop(el)) {
            break;
        }
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
};
const closest = (scope, predicate, isRoot)=>{
    // This is required to avoid ClosestOrAncestor passing the predicate to itself
    const is = (s, test)=>test(s);
    return (0,_impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_5__["default"])(is, ancestor, scope, predicate, isRoot);
};
const sibling = (scope, predicate)=>{
    const element = scope.dom;
    if (!element.parentNode) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
    }
    return child(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(element.parentNode), (x)=>!_dom_Compare__WEBPACK_IMPORTED_MODULE_6__.eq(scope, x) && predicate(x));
};
const child = (scope, predicate)=>{
    const pred = (node)=>predicate(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(node));
    const result = _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.find(scope.dom.childNodes, pred);
    return result.map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom);
};
const descendant = (scope, predicate)=>{
    const descend = (node)=>{
        // tslint:disable-next-line:prefer-for-of
        for(let i = 0; i < node.childNodes.length; i++){
            const child = _node_SugarElement__WEBPACK_IMPORTED_MODULE_3__.SugarElement.fromDom(node.childNodes[i]);
            if (predicate(child)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.some(child);
            }
            const res = descend(node.childNodes[i]);
            if (res.isSome()) {
                return res;
            }
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.Optional.none();
    };
    return descend(scope.dom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts": 
/*!*********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts ***!
  \*********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  ancestors: () => (ancestors),
  children: () => (children),
  descendants: () => (descendants),
  siblings: () => (siblings)
});
/* ESM import */var _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PredicateFilter */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFilter.ts");
/* ESM import */var _Selectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");


const all = (selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.all(selector);
// For all of the following:
//
// jQuery does siblings of firstChild. IE9+ supports scope.dom.children (similar to Traverse.children but elements only).
// Traverse should also do this (but probably not by default).
//
const ancestors = (scope, selector, isRoot)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all this wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.ancestors(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector), isRoot);
const siblings = (scope, selector)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all the wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.siblings(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const children = (scope, selector)=>// It may surprise you to learn this is exactly what JQuery does
    // TODO: Avoid all the wrapping and unwrapping
    _PredicateFilter__WEBPACK_IMPORTED_MODULE_1__.children(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const descendants = (scope, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.all(selector, scope);



}),
"../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ancestor: () => (ancestor),
  child: () => (child),
  closest: () => (closest),
  descendant: () => (descendant),
  first: () => (first),
  sibling: () => (sibling)
});
/* ESM import */var _impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/ClosestOrAncestor */ "../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts");
/* ESM import */var _PredicateFind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _Selectors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");



// TODO: An internal SelectorFilter module that doesn't SugarElement.fromDom() everything
const first = (selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.one(selector);
const ancestor = (scope, selector, isRoot)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.ancestor(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector), isRoot);
const sibling = (scope, selector)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.sibling(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const child = (scope, selector)=>_PredicateFind__WEBPACK_IMPORTED_MODULE_1__.child(scope, (e)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(e, selector));
const descendant = (scope, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.one(selector, scope);
// Returns Some(closest ancestor element (sugared)) matching 'selector' up to isRoot, or None() otherwise
const closest = (scope, selector, isRoot)=>{
    const is = (element, selector)=>_Selectors__WEBPACK_IMPORTED_MODULE_0__.is(element, selector);
    return (0,_impl_ClosestOrAncestor__WEBPACK_IMPORTED_MODULE_2__["default"])(is, ancestor, scope, selector, isRoot);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts": 
/*!****************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  all: () => (all),
  is: () => (is),
  one: () => (one)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/NodeTypes */ "../sugar/src/main/ts/ephox/sugar/api/node/NodeTypes.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");



const is = (element, selector)=>{
    const dom = element.dom;
    if (dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT) {
        return false;
    } else {
        const elem = dom;
        if (elem.matches !== undefined) {
            return elem.matches(selector);
        } else if (elem.msMatchesSelector !== undefined) {
            return elem.msMatchesSelector(selector);
        } else if (elem.webkitMatchesSelector !== undefined) {
            return elem.webkitMatchesSelector(selector);
        } else if (elem.mozMatchesSelector !== undefined) {
            // cast to any as mozMatchesSelector doesn't exist in TS DOM lib
            return elem.mozMatchesSelector(selector);
        } else {
            throw new Error('Browser lacks native selectors');
        } // unfortunately we can't throw this on startup :(
    }
};
const bypassSelector = (dom)=>// Only elements, documents and shadow roots support querySelector
    // shadow root element type is DOCUMENT_FRAGMENT
    dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.ELEMENT && dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT && dom.nodeType !== _node_NodeTypes__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_FRAGMENT || // IE fix for complex queries on empty nodes: http://jsfiddle.net/spyder/fv9ptr5L/
    dom.childElementCount === 0;
const all = (selector, scope)=>{
    const base = scope === undefined ? document : scope.dom;
    return bypassSelector(base) ? [] : _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.map(base.querySelectorAll(selector), _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom);
};
const one = (selector, scope)=>{
    const base = scope === undefined ? document : scope.dom;
    return bypassSelector(base) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none() : _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(base.querySelector(selector)).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts": 
/*!***************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts ***!
  \***************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  child: () => (child),
  childNodesCount: () => (childNodesCount),
  children: () => (children),
  defaultView: () => (defaultView),
  documentElement: () => (documentElement),
  documentOrOwner: () => (documentOrOwner),
  findIndex: () => (findIndex),
  firstChild: () => (firstChild),
  hasChildNodes: () => (hasChildNodes),
  lastChild: () => (lastChild),
  leaf: () => (leaf),
  nextSibling: () => (nextSibling),
  nextSiblings: () => (nextSiblings),
  offsetParent: () => (offsetParent),
  owner: () => (owner),
  parent: () => (parent),
  parentElement: () => (parentElement),
  parentNode: () => (parentNode),
  parents: () => (parents),
  prevSibling: () => (prevSibling),
  prevSiblings: () => (prevSiblings),
  siblings: () => (siblings)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _alien_Recurse__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../alien/Recurse */ "../sugar/src/main/ts/ephox/sugar/alien/Recurse.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");





/**
 * The document associated with the current element
 * NOTE: this will throw if the owner is null.
 */ const owner = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(element.dom.ownerDocument);
/**
 * If the element is a document, return it. Otherwise, return its ownerDocument.
 * @param dos
 */ const documentOrOwner = (dos)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_1__.isDocument(dos) ? dos : owner(dos);
const documentElement = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(documentOrOwner(element).dom.documentElement);
/**
 * The window element associated with the element
 * NOTE: this will throw if the defaultView is null.
 */ const defaultView = (element)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(documentOrOwner(element).dom.defaultView);
const parent = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.parentNode).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
// Cast down to just be SugarElement<Node>
const parentNode = (element)=>parent(element);
const parentElement = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.parentElement).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const findIndex = (element)=>parent(element).bind((p)=>{
        // TODO: Refactor out children so we can avoid the constant unwrapping
        const kin = children(p);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.findIndex(kin, (elem)=>_dom_Compare__WEBPACK_IMPORTED_MODULE_4__.eq(element, elem));
    });
const parents = (element, isRoot)=>{
    const stop = _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(isRoot) ? isRoot : _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.never;
    // This is used a *lot* so it needs to be performant, not recursive
    let dom = element.dom;
    const ret = [];
    while(dom.parentNode !== null && dom.parentNode !== undefined){
        const rawParent = dom.parentNode;
        const p = _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(rawParent);
        ret.push(p);
        if (stop(p) === true) {
            break;
        } else {
            dom = rawParent;
        }
    }
    return ret;
};
const siblings = (element)=>{
    // TODO: Refactor out children so we can just not add self instead of filtering afterwards
    const filterSelf = (elements)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(elements, (x)=>!_dom_Compare__WEBPACK_IMPORTED_MODULE_4__.eq(element, x));
    return parent(element).map(children).map(filterSelf).getOr([]);
};
const offsetParent = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.offsetParent).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const prevSibling = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.previousSibling).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const nextSibling = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(element.dom.nextSibling).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
// This one needs to be reversed, so they're still in DOM order
const prevSiblings = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.reverse(_alien_Recurse__WEBPACK_IMPORTED_MODULE_7__.toArray(element, prevSibling));
const nextSiblings = (element)=>_alien_Recurse__WEBPACK_IMPORTED_MODULE_7__.toArray(element, nextSibling);
const children = (element)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.map(element.dom.childNodes, _node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
const child = (element, index)=>{
    const cs = element.dom.childNodes;
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(cs[index]).map(_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom);
};
const firstChild = (element)=>child(element, 0);
const lastChild = (element)=>child(element, element.dom.childNodes.length - 1);
const childNodesCount = (element)=>element.dom.childNodes.length;
const hasChildNodes = (element)=>element.dom.hasChildNodes();
const spot = (element, offset)=>({
        element,
        offset
    });
const leaf = (element, offset)=>{
    const cs = children(element);
    return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts": 
/*!*******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts ***!
  \*******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getEnd: () => (getEnd),
  isCursorPosition: () => (isCursorPosition),
  isEnd: () => (isEnd),
  isStart: () => (isStart)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Unicode.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _node_SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _node_SugarText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarText */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarText.ts");
/* ESM import */var _properties_Attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../properties/Attribute */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");





const getEnd = (element)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.name(element) === 'img' ? 1 : _node_SugarText__WEBPACK_IMPORTED_MODULE_1__.getOption(element).fold(()=>_search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(element).length, (v)=>v.length);
const isEnd = (element, offset)=>getEnd(element) === offset;
const isStart = (element, offset)=>offset === 0;
const isTextNodeWithCursorPosition = (el)=>_node_SugarText__WEBPACK_IMPORTED_MODULE_1__.getOption(el).filter((text)=>// For the purposes of finding cursor positions only allow text nodes with content,
        // but trim removes &nbsp; and that's allowed
        text.trim().length !== 0 || text.indexOf(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.nbsp) > -1).isSome();
const isContentEditableFalse = (elem)=>_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.isHTMLElement(elem) && _properties_Attribute__WEBPACK_IMPORTED_MODULE_4__.get(elem, 'contenteditable') === 'false';
const elementsWithCursorPosition = [
    'img',
    'br'
];
const isCursorPosition = (elem)=>{
    const hasCursorPosition = isTextNodeWithCursorPosition(elem);
    return hasCursorPosition || _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.contains(elementsWithCursorPosition, _node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.name(elem)) || isContentEditableFalse(elem);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts": 
/*!************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/CursorPosition.ts ***!
  \************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  first: () => (first),
  last: () => (last)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _search_PredicateFind__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../search/PredicateFind */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _Awareness__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Awareness */ "../sugar/src/main/ts/ephox/sugar/api/selection/Awareness.ts");




const first = (element)=>_search_PredicateFind__WEBPACK_IMPORTED_MODULE_0__.descendant(element, _Awareness__WEBPACK_IMPORTED_MODULE_1__.isCursorPosition);
const last = (element)=>descendantRtl(element, _Awareness__WEBPACK_IMPORTED_MODULE_1__.isCursorPosition);
// Note, sugar probably needs some RTL traversals.
const descendantRtl = (scope, predicate)=>{
    const descend = (element)=>{
        const children = _search_Traverse__WEBPACK_IMPORTED_MODULE_2__.children(element);
        for(let i = children.length - 1; i >= 0; i--){
            const child = children[i];
            if (predicate(child)) {
                return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(child);
            }
            const res = descend(child);
            if (res.isSome()) {
                return res;
            }
        }
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    };
    return descend(scope);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SimRange: () => (SimRange)
});
const create = (start, soffset, finish, foffset)=>({
        start,
        soffset,
        finish,
        foffset
    });
// tslint:disable-next-line:variable-name
const SimRange = {
    create
};


}),
"../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SimSelection: () => (SimSelection)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _search_Traverse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../search/Traverse */ "../sugar/src/main/ts/ephox/sugar/api/search/Traverse.ts");
/* ESM import */var _SimRange__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SimRange */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts");
/* ESM import */var _Situ__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Situ */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");





// Consider adding a type for "element"
const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        domRange: [
            'rng'
        ]
    },
    {
        relative: [
            'startSitu',
            'finishSitu'
        ]
    },
    {
        exact: [
            'start',
            'soffset',
            'finish',
            'foffset'
        ]
    }
]);
const exactFromRange = (simRange)=>adt.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);
const getStart = (selection)=>selection.match({
        domRange: (rng)=>_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(rng.startContainer),
        relative: (startSitu, _finishSitu)=>_Situ__WEBPACK_IMPORTED_MODULE_2__.Situ.getStart(startSitu),
        exact: (start, _soffset, _finish, _foffset)=>start
    });
const domRange = adt.domRange;
const relative = adt.relative;
const exact = adt.exact;
const getWin = (selection)=>{
    const start = getStart(selection);
    return _search_Traverse__WEBPACK_IMPORTED_MODULE_3__.defaultView(start);
};
// This is out of place but it's API so I can't remove it
const range = _SimRange__WEBPACK_IMPORTED_MODULE_4__.SimRange.create;
// tslint:disable-next-line:variable-name
const SimSelection = {
    domRange,
    relative,
    exact,
    exactFromRange,
    getWin,
    range
};


}),
"../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Situ: () => (Situ)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");

const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        before: [
            'element'
        ]
    },
    {
        on: [
            'element',
            'offset'
        ]
    },
    {
        after: [
            'element'
        ]
    }
]);
// Probably don't need this given that we now have "match"
const cata = (subject, onBefore, onOn, onAfter)=>subject.fold(onBefore, onOn, onAfter);
const getStart = (situ)=>situ.fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.identity, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.identity, _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.identity);
const before = adt.before;
const on = adt.on;
const after = adt.after;
// tslint:disable-next-line:variable-name
const Situ = {
    before,
    on,
    after,
    cata,
    getStart
};


}),
"../sugar/src/main/ts/ephox/sugar/api/selection/WindowSelection.ts": 
/*!*************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/selection/WindowSelection.ts ***!
  \*************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  clear: () => (clear),
  clone: () => (clone),
  deleteAt: () => (deleteAt),
  findWithin: () => (findWithin),
  forElement: () => (forElement),
  get: () => (get),
  getAsString: () => (getAsString),
  getAtPoint: () => (getAtPoint),
  getBounds: () => (getBounds),
  getExact: () => (getExact),
  getFirstRect: () => (getFirstRect),
  isCollapsed: () => (isCollapsed),
  replace: () => (replace),
  setExact: () => (setExact),
  setRelative: () => (setRelative),
  setToElement: () => (setToElement),
  toNative: () => (toNative)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../selection/core/NativeRange */ "../sugar/src/main/ts/ephox/sugar/selection/core/NativeRange.ts");
/* ESM import */var _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../selection/core/SelectionDirection */ "../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts");
/* ESM import */var _selection_query_CaretRange__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../selection/query/CaretRange */ "../sugar/src/main/ts/ephox/sugar/selection/query/CaretRange.ts");
/* ESM import */var _selection_query_Within__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../selection/query/Within */ "../sugar/src/main/ts/ephox/sugar/selection/query/Within.ts");
/* ESM import */var _selection_quirks_Prefilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../selection/quirks/Prefilter */ "../sugar/src/main/ts/ephox/sugar/selection/quirks/Prefilter.ts");
/* ESM import */var _dom_Compare__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dom/Compare */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _dom_DocumentPosition__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dom/DocumentPosition */ "../sugar/src/main/ts/ephox/sugar/api/dom/DocumentPosition.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _node_SugarFragment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../node/SugarFragment */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarFragment.ts");
/* ESM import */var _SimRange__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SimRange */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts");
/* ESM import */var _SimSelection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SimSelection */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts");












const getNativeSelection = (win)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(win.getSelection());
const doSetNativeRange = (win, rng)=>{
    getNativeSelection(win).each((selection)=>{
        selection.removeAllRanges();
        selection.addRange(rng);
    });
};
const doSetRange = (win, start, soffset, finish, foffset)=>{
    const rng = _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.exactToNative(win, start, soffset, finish, foffset);
    doSetNativeRange(win, rng);
};
const findWithin = (win, selection, selector)=>_selection_query_Within__WEBPACK_IMPORTED_MODULE_2__.find(win, selection, selector);
const setLegacyRtlRange = (win, selection, start, soffset, finish, foffset)=>{
    selection.collapse(start.dom, soffset);
    selection.extend(finish.dom, foffset);
};
const setRangeFromRelative = (win, relative)=>_selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.diagnose(win, relative).match({
        ltr: (start, soffset, finish, foffset)=>{
            doSetRange(win, start, soffset, finish, foffset);
        },
        rtl: (start, soffset, finish, foffset)=>{
            getNativeSelection(win).each((selection)=>{
                // If this selection is backwards, then we need to use extend.
                if (selection.setBaseAndExtent) {
                    selection.setBaseAndExtent(start.dom, soffset, finish.dom, foffset);
                } else if (selection.extend) {
                    // This try catch is for older browsers (Firefox 52) as they're sometimes unable to handle setting backwards selections using selection.extend and error out.
                    try {
                        setLegacyRtlRange(win, selection, start, soffset, finish, foffset);
                    } catch  {
                        // If it does fail, try again with ltr.
                        doSetRange(win, finish, foffset, start, soffset);
                    }
                } else {
                    doSetRange(win, finish, foffset, start, soffset);
                }
            });
        }
    });
const setExact = (win, start, soffset, finish, foffset)=>{
    const relative = _selection_quirks_Prefilter__WEBPACK_IMPORTED_MODULE_4__.preprocessExact(start, soffset, finish, foffset);
    setRangeFromRelative(win, relative);
};
const setRelative = (win, startSitu, finishSitu)=>{
    const relative = _selection_quirks_Prefilter__WEBPACK_IMPORTED_MODULE_4__.preprocessRelative(startSitu, finishSitu);
    setRangeFromRelative(win, relative);
};
const toNative = (selection)=>{
    const win = _SimSelection__WEBPACK_IMPORTED_MODULE_5__.SimSelection.getWin(selection).dom;
    const getDomRange = (start, soffset, finish, foffset)=>_selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.exactToNative(win, start, soffset, finish, foffset);
    const filtered = _selection_quirks_Prefilter__WEBPACK_IMPORTED_MODULE_4__.preprocess(selection);
    return _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.diagnose(win, filtered).match({
        ltr: getDomRange,
        rtl: getDomRange
    });
};
// NOTE: We are still reading the range because it gives subtly different behaviour
// than using the anchorNode and focusNode. I'm not sure if this behaviour is any
// better or worse; it's just different.
const readRange = (selection)=>{
    if (selection.rangeCount > 0) {
        const firstRng = selection.getRangeAt(0);
        const lastRng = selection.getRangeAt(selection.rangeCount - 1);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(_SimRange__WEBPACK_IMPORTED_MODULE_6__.SimRange.create(_node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, _node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    }
};
const doGetExact = (selection)=>{
    if (selection.anchorNode === null || selection.focusNode === null) {
        return readRange(selection);
    } else {
        const anchor = _node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(selection.anchorNode);
        const focus = _node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(selection.focusNode);
        // if this returns true anchor is _after_ focus, so we need a custom selection object to maintain the RTL selection
        return _dom_DocumentPosition__WEBPACK_IMPORTED_MODULE_8__.after(anchor, selection.anchorOffset, focus, selection.focusOffset) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(_SimRange__WEBPACK_IMPORTED_MODULE_6__.SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);
    }
};
const setToElement = (win, element, selectNodeContents = true)=>{
    const rngGetter = selectNodeContents ? _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.selectNodeContents : _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.selectNode;
    const rng = rngGetter(win, element);
    doSetNativeRange(win, rng);
};
const forElement = (win, element)=>{
    const rng = _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.selectNodeContents(win, element);
    return _SimRange__WEBPACK_IMPORTED_MODULE_6__.SimRange.create(_node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(rng.startContainer), rng.startOffset, _node_SugarElement__WEBPACK_IMPORTED_MODULE_7__.SugarElement.fromDom(rng.endContainer), rng.endOffset);
};
const getExact = (win)=>// We want to retrieve the selection as it is.
    getNativeSelection(win).filter((sel)=>sel.rangeCount > 0).bind(doGetExact);
// TODO: Test this.
const get = (win)=>getExact(win).map((range)=>_SimSelection__WEBPACK_IMPORTED_MODULE_5__.SimSelection.exact(range.start, range.soffset, range.finish, range.foffset));
const getFirstRect = (win, selection)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    return _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.getFirstRect(rng);
};
const getBounds = (win, selection)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    return _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.getBounds(rng);
};
const getAtPoint = (win, x, y)=>_selection_query_CaretRange__WEBPACK_IMPORTED_MODULE_9__.fromPoint(win, x, y);
const getAsString = (win, selection)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    return _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.toString(rng);
};
const clear = (win)=>{
    getNativeSelection(win).each((selection)=>selection.removeAllRanges());
};
const clone = (win, selection)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    return _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.cloneFragment(rng);
};
const replace = (win, selection, elements)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    const fragment = _node_SugarFragment__WEBPACK_IMPORTED_MODULE_10__.fromElements(elements, win.document);
    _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.replaceWith(rng, fragment);
};
const deleteAt = (win, selection)=>{
    const rng = _selection_core_SelectionDirection__WEBPACK_IMPORTED_MODULE_3__.asLtrRange(win, selection);
    _selection_core_NativeRange__WEBPACK_IMPORTED_MODULE_1__.deleteContents(rng);
};
const isCollapsed = (start, soffset, finish, foffset)=>_dom_Compare__WEBPACK_IMPORTED_MODULE_11__.eq(start, finish) && soffset === foffset;



}),
"../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Dimension.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  normalise: () => (normalise),
  parse: () => (parse)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const units = {
    // we don't really support all of these different ways to express a length
    unsupportedLength: [
        'em',
        'ex',
        'cap',
        'ch',
        'ic',
        'rem',
        'lh',
        'rlh',
        'vw',
        'vh',
        'vi',
        'vb',
        'vmin',
        'vmax',
        'cm',
        'mm',
        'Q',
        'in',
        'pc',
        'pt',
        'px'
    ],
    // these are the length values we do support
    fixed: [
        'px',
        'pt'
    ],
    relative: [
        '%'
    ],
    empty: [
        ''
    ]
};
// Built from https://tc39.es/ecma262/#prod-StrDecimalLiteral
// Matches a float followed by a trailing set of characters
const pattern = (()=>{
    const decimalDigits = '[0-9]+';
    const signedInteger = '[+-]?' + decimalDigits;
    const exponentPart = '[eE]' + signedInteger;
    const dot = '\\.';
    const opt = (input)=>`(?:${input})?`;
    const unsignedDecimalLiteral = [
        'Infinity',
        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),
        dot + decimalDigits + opt(exponentPart),
        decimalDigits + opt(exponentPart)
    ].join('|');
    const float = `[+-]?(?:${unsignedDecimalLiteral})`;
    return new RegExp(`^(${float})(.*)$`);
})();
const isUnit = (unit, accepted)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(accepted, (acc)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.exists(units[acc], (check)=>unit === check));
const parse = (input, accepted)=>{
    const match = _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.from(pattern.exec(input));
    return match.bind((array)=>{
        const value = Number(array[1]);
        const unitRaw = array[2];
        if (isUnit(unitRaw, accepted)) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some({
                value,
                unit: unitRaw
            });
        } else {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
        }
    });
};
const normalise = (input, accepted)=>parse(input, accepted).map(({ value, unit })=>value + unit);


}),
"../sugar/src/main/ts/ephox/sugar/api/view/Height.ts": 
/*!***********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Height.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getInner: () => (getInner),
  getOuter: () => (getOuter),
  getRuntime: () => (getRuntime),
  set: () => (set),
  setMax: () => (setMax)
});
/* ESM import */var _impl_Dimension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/Dimension */ "../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts");
/* ESM import */var _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/RuntimeSize */ "../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _properties_Css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");




const api = (0,_impl_Dimension__WEBPACK_IMPORTED_MODULE_0__.Dimension)('height', (element)=>{
    // getBoundingClientRect gives better results than offsetHeight for tables with captions on Firefox
    const dom = element.dom;
    return _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;
});
const set = (element, h)=>api.set(element, h);
const get = (element)=>api.get(element);
const getOuter = (element)=>api.getOuter(element);
const getInner = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getInnerHeight;
const getRuntime = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getHeight;
const setMax = (element, value)=>{
    // These properties affect the absolute max-height, they are not counted natively, we want to include these properties.
    const inclusions = [
        'margin-top',
        'border-top-width',
        'padding-top',
        'padding-bottom',
        'border-bottom-width',
        'margin-bottom'
    ];
    const absMax = api.max(element, value, inclusions);
    _properties_Css__WEBPACK_IMPORTED_MODULE_3__.set(element, 'max-height', absMax + 'px');
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/Scroll.ts": 
/*!***********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Scroll.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  by: () => (by),
  capture: () => (capture),
  get: () => (get),
  intoView: () => (intoView),
  intoViewIfNeeded: () => (intoViewIfNeeded),
  preserve: () => (preserve),
  scrollBarWidth: () => (scrollBarWidth),
  setToElement: () => (setToElement),
  to: () => (to)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_sand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sand */ "../sand/src/main/ts/ephox/sand/api/PlatformDetection.ts");
/* ESM import */var _dom_Insert__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dom/Insert */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _dom_Remove__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dom/Remove */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _SugarLocation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SugarLocation */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts");
/* ESM import */var _SugarPosition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarPosition */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts");








// get scroll position (x,y) relative to document _doc (or global if not supplied)
const get = (_DOC)=>{
    const doc = _DOC !== undefined ? _DOC.dom : document;
    // ASSUMPTION: This is for cross-browser support, body works for Safari & EDGE, and when we have an iframe body scroller
    const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;
    const y = doc.body.scrollTop || doc.documentElement.scrollTop;
    return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(x, y);
};
// Scroll content to (x,y) relative to document _doc (or global if not supplied)
const to = (x, y, _DOC)=>{
    const doc = _DOC !== undefined ? _DOC.dom : document;
    const win = doc.defaultView;
    if (win) {
        win.scrollTo(x, y);
    }
};
// Scroll content by (x,y) relative to document _doc (or global if not supplied)
const by = (x, y, _DOC)=>{
    const doc = _DOC !== undefined ? _DOC.dom : document;
    const win = doc.defaultView;
    if (win) {
        win.scrollBy(x, y);
    }
};
// Set the window scroll position to the element
const setToElement = (win, element)=>{
    const pos = _SugarLocation__WEBPACK_IMPORTED_MODULE_1__.absolute(element);
    const doc = _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(win.document);
    to(pos.left, pos.top, doc);
};
// call f() preserving the original scroll position relative to document doc
const preserve = (doc, f)=>{
    const before = get(doc);
    f();
    const after = get(doc);
    if (before.top !== after.top || before.left !== after.left) {
        to(before.left, before.top, doc);
    }
};
// capture the current scroll location and provide save and restore methods
const capture = (doc)=>{
    let previous = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    const save = ()=>{
        previous = _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(get(doc));
    };
    // TODO: this is quite similar to the code in nomad.
    const restore = ()=>{
        previous.each((p)=>{
            to(p.left, p.top, doc);
        });
    };
    save();
    return {
        save,
        /* Saves the current page scroll position */ restore
    };
};
// TBIO-4472 Safari 10 - Scrolling typeahead with keyboard scrolls page
const intoView = (element, alignToTop)=>{
    const isSafari = _ephox_sand__WEBPACK_IMPORTED_MODULE_4__.detect().browser.isSafari();
    // this method isn't in TypeScript
    if (isSafari && _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isFunction(element.dom.scrollIntoViewIfNeeded)) {
        element.dom.scrollIntoViewIfNeeded(false); // false=align to nearest edge
    } else {
        element.dom.scrollIntoView(alignToTop); // true=to top, false=to bottom
    }
};
// If the element is above the container, or below the container, then scroll to the top or bottom
const intoViewIfNeeded = (element, container)=>{
    const containerBox = container.dom.getBoundingClientRect();
    const elementBox = element.dom.getBoundingClientRect();
    if (elementBox.top < containerBox.top) {
        // element top is above the viewport top, scroll so it's at the top
        intoView(element, true);
    } else if (elementBox.bottom > containerBox.bottom) {
        // element bottom is below the viewport bottom, scroll so it's at the bottom
        intoView(element, false);
    }
};
// Return the scroll bar width (calculated by temporarily inserting an element into the dom)
const scrollBarWidth = ()=>{
    // From https://davidwalsh.name/detect-scrollbar-width
    const scrollDiv = _node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');
    _dom_Insert__WEBPACK_IMPORTED_MODULE_6__.after(_node_SugarBody__WEBPACK_IMPORTED_MODULE_7__.body(), scrollDiv);
    const w = scrollDiv.dom.offsetWidth - scrollDiv.dom.clientWidth;
    _dom_Remove__WEBPACK_IMPORTED_MODULE_8__.remove(scrollDiv);
    return w;
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/SugarLocation.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  absolute: () => (absolute),
  relative: () => (relative),
  viewport: () => (viewport)
});
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _SugarPosition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SugarPosition */ "../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts");


const boxPosition = (dom)=>{
    const box = dom.getBoundingClientRect();
    return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(box.left, box.top);
};
// Avoids falsy false fallthrough
const firstDefinedOrZero = (a, b)=>{
    if (a !== undefined) {
        return a;
    } else {
        return b !== undefined ? b : 0;
    }
};
const absolute = (element)=>{
    const doc = element.dom.ownerDocument;
    const body = doc.body;
    const win = doc.defaultView;
    const html = doc.documentElement;
    if (body === element.dom) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(body.offsetLeft, body.offsetTop);
    }
    const scrollTop = firstDefinedOrZero(win?.pageYOffset, html.scrollTop);
    const scrollLeft = firstDefinedOrZero(win?.pageXOffset, html.scrollLeft);
    const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);
    const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);
    return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);
};
// This is the old $.position(), but JQuery does nonsense calculations.
// We're only 1 <-> 1 with the old value in the single place we use this function
// (ego.api.Dragging) so the rest can bite me.
const relative = (element)=>{
    const dom = element.dom;
    // jquery-ism: when style="position: fixed", this === boxPosition()
    // but tests reveal it returns the same thing anyway
    return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(dom.offsetLeft, dom.offsetTop);
};
const viewport = (element)=>{
    const dom = element.dom;
    const doc = dom.ownerDocument;
    const body = doc.body;
    if (body === dom) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(body.offsetLeft, body.offsetTop);
    }
    if (!(0,_node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody)(element)) {
        return (0,_SugarPosition__WEBPACK_IMPORTED_MODULE_0__.SugarPosition)(0, 0);
    }
    return boxPosition(dom);
};



}),
"../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/SugarPosition.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SugarPosition: () => (SugarPosition)
});
const r = (left, top)=>{
    const translate = (x, y)=>r(left + x, top + y);
    return {
        left,
        top,
        translate
    };
};
// tslint:disable-next-line:variable-name
const SugarPosition = r;


}),
"../sugar/src/main/ts/ephox/sugar/api/view/Width.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/api/view/Width.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get),
  getInner: () => (getInner),
  getOuter: () => (getOuter),
  getRuntime: () => (getRuntime),
  set: () => (set),
  setMax: () => (setMax)
});
/* ESM import */var _impl_Dimension__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../impl/Dimension */ "../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts");
/* ESM import */var _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../impl/RuntimeSize */ "../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts");
/* ESM import */var _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node/SugarBody */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _properties_Css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");




const api = (0,_impl_Dimension__WEBPACK_IMPORTED_MODULE_0__.Dimension)('width', (element)=>{
    const dom = element.dom;
    return _node_SugarBody__WEBPACK_IMPORTED_MODULE_1__.inBody(element) ? dom.getBoundingClientRect().width : dom.offsetWidth;
});
const set = (element, h)=>api.set(element, h);
const get = (element)=>api.get(element);
const getOuter = (element)=>api.getOuter(element);
const getInner = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getInnerWidth;
const getRuntime = _impl_RuntimeSize__WEBPACK_IMPORTED_MODULE_2__.getWidth;
const setMax = (element, value)=>{
    // These properties affect the absolute max-height, they are not counted natively, we want to include these properties.
    const inclusions = [
        'margin-left',
        'border-left-width',
        'padding-left',
        'padding-right',
        'border-right-width',
        'margin-right'
    ];
    const absMax = api.max(element, value, inclusions);
    _properties_Css__WEBPACK_IMPORTED_MODULE_3__.set(element, 'max-width', absMax + 'px');
};



}),
"../sugar/src/main/ts/ephox/sugar/impl/ClassList.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/ClassList.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  add: () => (add),
  get: () => (get),
  remove: () => (remove),
  supports: () => (supports),
  toggle: () => (toggle)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_properties_AttrList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/properties/AttrList */ "../sugar/src/main/ts/ephox/sugar/api/properties/AttrList.ts");


// IE11 Can return undefined for a classList on elements such as math, so we make sure it's not undefined before attempting to use it.
const supports = (element)=>element.dom.classList !== undefined;
const get = (element)=>_api_properties_AttrList__WEBPACK_IMPORTED_MODULE_0__.read(element, 'class');
const add = (element, clazz)=>_api_properties_AttrList__WEBPACK_IMPORTED_MODULE_0__.add(element, 'class', clazz);
const remove = (element, clazz)=>_api_properties_AttrList__WEBPACK_IMPORTED_MODULE_0__.remove(element, 'class', clazz);
const toggle = (element, clazz)=>{
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.contains(get(element), clazz)) {
        return remove(element, clazz);
    } else {
        return add(element, clazz);
    }
};



}),
"../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/ClosestOrAncestor.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((is, ancestor, scope, a, isRoot)=>{
    if (is(scope, a)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(scope);
    } else if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.isFunction(isRoot) && isRoot(scope)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    } else {
        return ancestor(scope, a, isRoot);
    }
});


}),
"../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/Dimension.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Dimension: () => (Dimension)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _Style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Style */ "../sugar/src/main/ts/ephox/sugar/impl/Style.ts");



const Dimension = (name, getOffset)=>{
    const set = (element, h)=>{
        if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isNumber(h) && !h.match(/^[0-9]+$/)) {
            throw new Error(name + '.set accepts only positive integer values. Value was ' + h);
        }
        const dom = element.dom;
        if (_Style__WEBPACK_IMPORTED_MODULE_1__.isSupported(dom)) {
            dom.style[name] = h + 'px';
        }
    };
    /*
   * jQuery supports querying width and height on the document and window objects.
   *
   * TBIO doesn't do this, so the code is removed to save space, but left here just in case.
   */ /*
  var getDocumentWidth = (element) => {
    var dom = element.dom;
    if (Node.isDocument(element)) {
      var body = dom.body;
      var doc = dom.documentElement;
      return Math.max(
        body.scrollHeight,
        doc.scrollHeight,
        body.offsetHeight,
        doc.offsetHeight,
        doc.clientHeight
      );
    }
  };

  var getWindowWidth = (element) => {
    var dom = element.dom;
    if (dom.window === dom) {
      // There is no offsetHeight on a window, so use the clientHeight of the document
      return dom.document.documentElement.clientHeight;
    }
  };
*/ const get = (element)=>{
        const r = getOffset(element);
        // zero or null means non-standard or disconnected, fall back to CSS
        if (r <= 0 || r === null) {
            const css = _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__.get(element, name);
            // ugh this feels dirty, but it saves cycles
            return parseFloat(css) || 0;
        }
        return r;
    };
    // in jQuery, getOuter replicates (or uses) box-sizing: border-box calculations
    // although these calculations only seem relevant for quirks mode, and edge cases TBIO doesn't rely on
    const getOuter = get;
    const aggregate = (element, properties)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.foldl(properties, (acc, property)=>{
            const val = _api_properties_Css__WEBPACK_IMPORTED_MODULE_2__.get(element, property);
            const value = val === undefined ? 0 : parseInt(val, 10);
            return isNaN(value) ? acc : acc + value;
        }, 0);
    const max = (element, value, properties)=>{
        const cumulativeInclusions = aggregate(element, properties);
        // if max-height is 100px and your cumulativeInclusions is 150px, there is no way max-height can be 100px, so we return 0.
        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;
        return absoluteMax;
    };
    return {
        set,
        get,
        getOuter,
        aggregate,
        max
    };
};


}),
"../sugar/src/main/ts/ephox/sugar/impl/FilteredEvent.ts": 
/*!**************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/FilteredEvent.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  bind: () => (bind),
  capture: () => (capture),
  fromRawEvent: () => (fromRawEvent)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _api_node_SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/node/SugarShadowDom */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts");



const mkEvent = (target, x, y, stop, prevent, kill, raw)=>({
        target,
        x,
        y,
        stop,
        prevent,
        kill,
        raw
    });
/** Wraps an Event in an EventArgs structure.
 * The returned EventArgs structure has its target set to the "original" target if possible.
 * See SugarShadowDom.getOriginalEventTarget
 */ const fromRawEvent = (rawEvent)=>{
    const target = _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(_api_node_SugarShadowDom__WEBPACK_IMPORTED_MODULE_1__.getOriginalEventTarget(rawEvent).getOr(rawEvent.target));
    const stop = ()=>rawEvent.stopPropagation();
    const prevent = ()=>rawEvent.preventDefault();
    const kill = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.compose(prevent, stop); // more of a sequence than a compose, but same effect
    // FIX: Don't just expose the raw event. Need to identify what needs standardisation.
    return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);
};
const handle = (filter, handler)=>(rawEvent)=>{
        if (filter(rawEvent)) {
            handler(fromRawEvent(rawEvent));
        }
    };
const binder = (element, event, filter, handler, useCapture)=>{
    const wrapped = handle(filter, handler);
    // IE9 minimum
    element.dom.addEventListener(event, wrapped, useCapture);
    return {
        unbind: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.curry(unbind, element, event, wrapped, useCapture)
    };
};
const bind = (element, event, filter, handler)=>binder(element, event, filter, handler, false);
const capture = (element, event, filter, handler)=>binder(element, event, filter, handler, true);
const unbind = (element, event, handler, useCapture)=>{
    // IE9 minimum
    element.dom.removeEventListener(event, handler, useCapture);
};



}),
"../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts": 
/*!**********************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/NodeValue.ts ***!
  \**********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  NodeValue: () => (NodeValue)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");

const NodeValue = (is, name)=>{
    const get = (element)=>{
        if (!is(element)) {
            throw new Error('Can only get ' + name + ' value of a ' + name + ' node');
        }
        return getOption(element).getOr('');
    };
    const getOption = (element)=>is(element) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(element.dom.nodeValue) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
    const set = (element, value)=>{
        if (!is(element)) {
            throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');
        }
        element.dom.nodeValue = value;
    };
    return {
        get,
        getOption,
        set
    };
};


}),
"../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts": 
/*!************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/RuntimeSize.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getHeight: () => (getHeight),
  getInnerHeight: () => (getInnerHeight),
  getInnerWidth: () => (getInnerWidth),
  getWidth: () => (getWidth)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _api_properties_Css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/properties/Css */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");


const toNumber = (px, fallback)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.toFloat(px).getOr(fallback);
const getProp = (element, name, fallback)=>toNumber(_api_properties_Css__WEBPACK_IMPORTED_MODULE_1__.get(element, name), fallback);
const calcContentBoxSize = (element, size, upper, lower)=>{
    const paddingUpper = getProp(element, `padding-${upper}`, 0);
    const paddingLower = getProp(element, `padding-${lower}`, 0);
    const borderUpper = getProp(element, `border-${upper}-width`, 0);
    const borderLower = getProp(element, `border-${lower}-width`, 0);
    return size - paddingUpper - paddingLower - borderUpper - borderLower;
};
const getCalculatedHeight = (element, boxSizing)=>{
    const dom = element.dom;
    const height = dom.getBoundingClientRect().height || dom.offsetHeight;
    return boxSizing === 'border-box' ? height : calcContentBoxSize(element, height, 'top', 'bottom');
};
const getCalculatedWidth = (element, boxSizing)=>{
    const dom = element.dom;
    const width = dom.getBoundingClientRect().width || dom.offsetWidth;
    return boxSizing === 'border-box' ? width : calcContentBoxSize(element, width, 'left', 'right');
};
const getHeight = (element)=>getProp(element, 'height', element.dom.offsetHeight);
const getWidth = (element)=>getProp(element, 'width', element.dom.offsetWidth);
const getInnerHeight = (element)=>getCalculatedHeight(element, 'content-box');
const getInnerWidth = (element)=>getCalculatedWidth(element, 'content-box');



}),
"../sugar/src/main/ts/ephox/sugar/impl/Style.ts": 
/*!******************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/impl/Style.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isSupported: () => (isSupported)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");

// some elements, such as mathml, don't have style attributes
// others, such as angular elements, have style attributes that aren't a CSSStyleDeclaration
const isSupported = (dom)=>dom.style !== undefined && _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.isFunction(dom.style.getPropertyValue);



}),
"../sugar/src/main/ts/ephox/sugar/selection/core/NativeRange.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/selection/core/NativeRange.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  cloneFragment: () => (cloneFragment),
  create: () => (create),
  deleteContents: () => (deleteContents),
  exactToNative: () => (exactToNative),
  getBounds: () => (getBounds),
  getFirstRect: () => (getFirstRect),
  isWithin: () => (isWithin),
  relativeToNative: () => (relativeToNative),
  replaceWith: () => (replaceWith),
  selectNode: () => (selectNode),
  selectNodeContents: () => (selectNodeContents),
  selectNodeContentsUsing: () => (selectNodeContentsUsing),
  toString: () => (toString)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");


const selectNode = (win, element)=>{
    const rng = win.document.createRange();
    rng.selectNode(element.dom);
    return rng;
};
const selectNodeContents = (win, element)=>{
    const rng = win.document.createRange();
    selectNodeContentsUsing(rng, element);
    return rng;
};
const selectNodeContentsUsing = (rng, element)=>rng.selectNodeContents(element.dom);
const isWithin = (outerRange, innerRange)=>// Adapted from: http://stackoverflow.com/questions/5605401/insert-link-in-contenteditable-element
    innerRange.compareBoundaryPoints(outerRange.END_TO_START, outerRange) < 1 && innerRange.compareBoundaryPoints(outerRange.START_TO_END, outerRange) > -1;
const create = (win)=>win.document.createRange();
// NOTE: Mutates the range.
const setStart = (rng, situ)=>{
    situ.fold((e)=>{
        rng.setStartBefore(e.dom);
    }, (e, o)=>{
        rng.setStart(e.dom, o);
    }, (e)=>{
        rng.setStartAfter(e.dom);
    });
};
const setFinish = (rng, situ)=>{
    situ.fold((e)=>{
        rng.setEndBefore(e.dom);
    }, (e, o)=>{
        rng.setEnd(e.dom, o);
    }, (e)=>{
        rng.setEndAfter(e.dom);
    });
};
const replaceWith = (rng, fragment)=>{
    // Note: this document fragment approach may not work on IE9.
    deleteContents(rng);
    rng.insertNode(fragment.dom);
};
const relativeToNative = (win, startSitu, finishSitu)=>{
    const range = win.document.createRange();
    setStart(range, startSitu);
    setFinish(range, finishSitu);
    return range;
};
const exactToNative = (win, start, soffset, finish, foffset)=>{
    const rng = win.document.createRange();
    rng.setStart(start.dom, soffset);
    rng.setEnd(finish.dom, foffset);
    return rng;
};
const deleteContents = (rng)=>{
    rng.deleteContents();
};
const cloneFragment = (rng)=>{
    const fragment = rng.cloneContents();
    return _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(fragment);
};
const toRect = (rect)=>({
        left: rect.left,
        top: rect.top,
        right: rect.right,
        bottom: rect.bottom,
        width: rect.width,
        height: rect.height
    });
const getFirstRect = (rng)=>{
    const rects = rng.getClientRects();
    // ASSUMPTION: The first rectangle is the start of the selection
    const rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();
    return rect.width > 0 || rect.height > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(rect).map(toRect) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const getBounds = (rng)=>{
    const rect = rng.getBoundingClientRect();
    return rect.width > 0 || rect.height > 0 ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.some(rect).map(toRect) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none();
};
const toString = (rng)=>rng.toString();



}),
"../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts": 
/*!*****************************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts ***!
  \*****************************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  asLtrRange: () => (asLtrRange),
  diagnose: () => (diagnose),
  ltr: () => (ltr),
  rtl: () => (rtl)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Adt.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Thunk.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _NativeRange__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./NativeRange */ "../sugar/src/main/ts/ephox/sugar/selection/core/NativeRange.ts");



const adt = _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Adt.generate([
    {
        ltr: [
            'start',
            'soffset',
            'finish',
            'foffset'
        ]
    },
    {
        rtl: [
            'start',
            'soffset',
            'finish',
            'foffset'
        ]
    }
]);
const fromRange = (win, type, range)=>type(_api_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(range.startContainer), range.startOffset, _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(range.endContainer), range.endOffset);
const getRanges = (win, selection)=>selection.match({
        domRange: (rng)=>{
            return {
                ltr: _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.constant(rng),
                rtl: _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none
            };
        },
        relative: (startSitu, finishSitu)=>{
            return {
                ltr: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cached(()=>_NativeRange__WEBPACK_IMPORTED_MODULE_5__.relativeToNative(win, startSitu, finishSitu)),
                rtl: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cached(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(_NativeRange__WEBPACK_IMPORTED_MODULE_5__.relativeToNative(win, finishSitu, startSitu)))
            };
        },
        exact: (start, soffset, finish, foffset)=>{
            return {
                ltr: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cached(()=>_NativeRange__WEBPACK_IMPORTED_MODULE_5__.exactToNative(win, start, soffset, finish, foffset)),
                rtl: _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.cached(()=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(_NativeRange__WEBPACK_IMPORTED_MODULE_5__.exactToNative(win, finish, foffset, start, soffset)))
            };
        }
    });
const doDiagnose = (win, ranges)=>{
    // If we cannot create a ranged selection from start > finish, it could be RTL
    const rng = ranges.ltr();
    if (rng.collapsed) {
        // Let's check if it's RTL ... if it is, then reversing the direction will not be collapsed
        const reversed = ranges.rtl().filter((rev)=>rev.collapsed === false);
        return reversed.map((rev)=>// We need to use "reversed" here, because the original only has one point (collapsed)
            adt.rtl(_api_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(rev.endContainer), rev.endOffset, _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(()=>fromRange(win, adt.ltr, rng));
    } else {
        return fromRange(win, adt.ltr, rng);
    }
};
const diagnose = (win, selection)=>{
    const ranges = getRanges(win, selection);
    return doDiagnose(win, ranges);
};
const asLtrRange = (win, selection)=>{
    const diagnosis = diagnose(win, selection);
    return diagnosis.match({
        ltr: (start, soffset, finish, foffset)=>{
            const rng = win.document.createRange();
            rng.setStart(start.dom, soffset);
            rng.setEnd(finish.dom, foffset);
            return rng;
        },
        rtl: (start, soffset, finish, foffset)=>{
            // NOTE: Reversing start and finish
            const rng = win.document.createRange();
            rng.setStart(finish.dom, foffset);
            rng.setEnd(start.dom, soffset);
            return rng;
        }
    });
};
const ltr = adt.ltr;
const rtl = adt.rtl;



}),
"../sugar/src/main/ts/ephox/sugar/selection/query/CaretRange.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/selection/query/CaretRange.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fromPoint: () => (fromPoint)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _api_selection_SimRange__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/selection/SimRange */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimRange.ts");



const caretPositionFromPoint = (doc, x, y)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(doc.caretPositionFromPoint?.(x, y)).bind((pos)=>{
        // It turns out that Firefox can return null for pos.offsetNode
        if (pos.offsetNode === null) {
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none();
        }
        const r = doc.createRange();
        r.setStart(pos.offsetNode, pos.offset);
        r.collapse();
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.some(r);
    });
const caretRangeFromPoint = (doc, x, y)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.from(doc.caretRangeFromPoint?.(x, y));
const availableSearch = (doc, x, y)=>{
    if (doc.caretPositionFromPoint) {
        return caretPositionFromPoint(doc, x, y); // defined standard, firefox only
    } else if (doc.caretRangeFromPoint) {
        return caretRangeFromPoint(doc, x, y); // webkit/blink implementation
    } else {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_0__.Optional.none(); // unsupported browser
    }
};
const fromPoint = (win, x, y)=>{
    const doc = win.document;
    return availableSearch(doc, x, y).map((rng)=>_api_selection_SimRange__WEBPACK_IMPORTED_MODULE_1__.SimRange.create(_api_node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(rng.startContainer), rng.startOffset, _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_2__.SugarElement.fromDom(rng.endContainer), rng.endOffset));
};



}),
"../sugar/src/main/ts/ephox/sugar/selection/query/Within.ts": 
/*!******************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/selection/query/Within.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  find: () => (find)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _api_node_SugarNode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _api_search_SelectorFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/search/SelectorFilter */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _api_search_Selectors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/search/Selectors */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _core_NativeRange__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/NativeRange */ "../sugar/src/main/ts/ephox/sugar/selection/core/NativeRange.ts");
/* ESM import */var _core_SelectionDirection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/SelectionDirection */ "../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts");







const withinContainer = (win, ancestor, outerRange, selector)=>{
    const innerRange = _core_NativeRange__WEBPACK_IMPORTED_MODULE_0__.create(win);
    const ancestorArray = _api_search_Selectors__WEBPACK_IMPORTED_MODULE_1__.is(ancestor, selector) ? [
        ancestor
    ] : [];
    const elements = ancestorArray.concat(_api_search_SelectorFilter__WEBPACK_IMPORTED_MODULE_2__.descendants(ancestor, selector));
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.filter(elements, (elem)=>{
        // Mutate the selection to save creating new ranges each time
        _core_NativeRange__WEBPACK_IMPORTED_MODULE_0__.selectNodeContentsUsing(innerRange, elem);
        return _core_NativeRange__WEBPACK_IMPORTED_MODULE_0__.isWithin(outerRange, innerRange);
    });
};
const find = (win, selection, selector)=>{
    // Reverse the selection if it is RTL when doing the comparison
    const outerRange = _core_SelectionDirection__WEBPACK_IMPORTED_MODULE_4__.asLtrRange(win, selection);
    const ancestor = _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_5__.SugarElement.fromDom(outerRange.commonAncestorContainer);
    // Note, this might need to change when we have to start looking for non elements.
    return _api_node_SugarNode__WEBPACK_IMPORTED_MODULE_6__.isElement(ancestor) ? withinContainer(win, ancestor, outerRange, selector) : [];
};



}),
"../sugar/src/main/ts/ephox/sugar/selection/quirks/Prefilter.ts": 
/*!**********************************************************************!*\
  !*** ../sugar/src/main/ts/ephox/sugar/selection/quirks/Prefilter.ts ***!
  \**********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  beforeSpecial: () => (beforeSpecial),
  preprocess: () => (preprocess),
  preprocessExact: () => (preprocessExact),
  preprocessRelative: () => (preprocessRelative)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/node/SugarElement */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _api_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/node/SugarNode */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _api_selection_SimSelection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/selection/SimSelection */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts");
/* ESM import */var _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/selection/Situ */ "../sugar/src/main/ts/ephox/sugar/api/selection/Situ.ts");





const beforeSpecial = (element, offset)=>{
    // From memory, we don't want to use <br> directly on Firefox because it locks the keyboard input.
    // It turns out that <img> directly on IE locks the keyboard as well.
    // If the offset is 0, use before. If the offset is 1, use after.
    // TBIO-3889: Firefox Situ.on <input> results in a child of the <input>; Situ.before <input> results in platform inconsistencies
    const name = _api_node_SugarNode__WEBPACK_IMPORTED_MODULE_0__.name(element);
    if ('input' === name) {
        return _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.after(element);
    } else if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains([
        'br',
        'img'
    ], name)) {
        return _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.on(element, offset);
    } else {
        return offset === 0 ? _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.before(element) : _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.after(element);
    }
};
const preprocessRelative = (startSitu, finishSitu)=>{
    const start = startSitu.fold(_api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.before, beforeSpecial, _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.after);
    const finish = finishSitu.fold(_api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.before, beforeSpecial, _api_selection_Situ__WEBPACK_IMPORTED_MODULE_1__.Situ.after);
    return _api_selection_SimSelection__WEBPACK_IMPORTED_MODULE_3__.SimSelection.relative(start, finish);
};
const preprocessExact = (start, soffset, finish, foffset)=>{
    const startSitu = beforeSpecial(start, soffset);
    const finishSitu = beforeSpecial(finish, foffset);
    return _api_selection_SimSelection__WEBPACK_IMPORTED_MODULE_3__.SimSelection.relative(startSitu, finishSitu);
};
const preprocess = (selection)=>selection.match({
        domRange: (rng)=>{
            const start = _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_4__.SugarElement.fromDom(rng.startContainer);
            const finish = _api_node_SugarElement__WEBPACK_IMPORTED_MODULE_4__.SugarElement.fromDom(rng.endContainer);
            return preprocessExact(start, rng.startOffset, finish, rng.endOffset);
        },
        relative: preprocessRelative,
        exact: preprocessExact
    });



}),
"./src/models/dom/main/ts/Model.ts": 
/*!*****************************************!*\
  !*** ./src/models/dom/main/ts/Model.ts ***!
  \*****************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var tinymce_core_api_ModelManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/ModelManager */ "./lib/globals/tinymce/core/api/ModelManager.js");
/* ESM import */var _table_Table__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./table/Table */ "./src/models/dom/main/ts/table/Table.ts");


const DomModel = (editor)=>{
    const table = _table_Table__WEBPACK_IMPORTED_MODULE_1__.setupTable(editor);
    return {
        table
    };
};
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (()=>{
    tinymce_core_api_ModelManager__WEBPACK_IMPORTED_MODULE_0__["default"].add('dom', DomModel);
});


}),
"./src/models/dom/main/ts/table/Table.ts": 
/*!***********************************************!*\
  !*** ./src/models/dom/main/ts/table/Table.ts ***!
  \***********************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  setupTable: () => (setupTable)
});
/* ESM import */var _actions_Clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./actions/Clipboard */ "./src/models/dom/main/ts/table/actions/Clipboard.ts");
/* ESM import */var _actions_TableActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/TableActions */ "./src/models/dom/main/ts/table/actions/TableActions.ts");
/* ESM import */var _api_Commands__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./api/Commands */ "./src/models/dom/main/ts/table/api/Commands.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./api/Options */ "./src/models/dom/main/ts/table/api/Options.ts");
/* ESM import */var _api_QueryCommands__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api/QueryCommands */ "./src/models/dom/main/ts/table/api/QueryCommands.ts");
/* ESM import */var _api_TableCellSelectionHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./api/TableCellSelectionHandler */ "./src/models/dom/main/ts/table/api/TableCellSelectionHandler.ts");
/* ESM import */var _api_TableResizeHandler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./api/TableResizeHandler */ "./src/models/dom/main/ts/table/api/TableResizeHandler.ts");







const setupTable = (editor)=>{
    _api_Options__WEBPACK_IMPORTED_MODULE_3__.register(editor);
    const resizeHandler = (0,_api_TableResizeHandler__WEBPACK_IMPORTED_MODULE_6__.TableResizeHandler)(editor);
    const cellSelectionHandler = (0,_api_TableCellSelectionHandler__WEBPACK_IMPORTED_MODULE_5__.TableCellSelectionHandler)(editor, resizeHandler);
    const actions = (0,_actions_TableActions__WEBPACK_IMPORTED_MODULE_1__.TableActions)(editor, resizeHandler, cellSelectionHandler);
    _api_Commands__WEBPACK_IMPORTED_MODULE_2__.registerCommands(editor, actions);
    _api_QueryCommands__WEBPACK_IMPORTED_MODULE_4__.registerQueryCommands(editor, actions);
    // TODO: TINY-8385 Maybe move to core. Although, will need RTC to have that working first
    _actions_Clipboard__WEBPACK_IMPORTED_MODULE_0__.registerEvents(editor, actions);
    return {
        getSelectedCells: cellSelectionHandler.getSelectedCells,
        clearSelectedCells: cellSelectionHandler.clearSelectedCells
    };
};



}),
"./src/models/dom/main/ts/table/actions/Clipboard.ts": 
/*!***********************************************************!*\
  !*** ./src/models/dom/main/ts/table/actions/Clipboard.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  registerEvents: () => (registerEvents)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/CopySelected.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableFill.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarShadowDom.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/InsertAll.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/models/dom/main/ts/table/api/Options.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _queries_TableTargets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/TableTargets */ "./src/models/dom/main/ts/table/queries/TableTargets.ts");
/* ESM import */var _selection_Ephemera__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../selection/Ephemera */ "./src/models/dom/main/ts/table/selection/Ephemera.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/models/dom/main/ts/table/selection/TableSelection.ts");








const extractSelected = (cells)=>{
    // Assume for now that we only have one table (also handles the case where we multi select outside a table)
    return _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__.table(cells[0]).map((table)=>{
        const replica = _ephox_snooker__WEBPACK_IMPORTED_MODULE_6__.extract(table, _selection_Ephemera__WEBPACK_IMPORTED_MODULE_3__.attributeSelector);
        _core_TableUtils__WEBPACK_IMPORTED_MODULE_1__.removeDataStyle(replica);
        return [
            replica
        ];
    });
};
const serializeElements = (editor, elements)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.map(elements, (elm)=>editor.selection.serializer.serialize(elm.dom, {})).join('');
const getTextContent = (editor, replicaElements)=>{
    const doc = editor.getDoc();
    const dos = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.getRootNode(_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromDom(editor.getBody()));
    // Set up offscreen div so that the extracted table element can be inserted into the DOM
    // TINY-10847: If the table element is detached from the DOM, calling innerText is equivalent to calling
    // textContent which does not include '\n' and '\t' characters to separate rows and cells respectively
    const offscreenDiv = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromTag('div', doc);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.set(offscreenDiv, 'data-mce-bogus', 'all');
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.setAll(offscreenDiv, {
        position: 'fixed',
        left: '-9999999px',
        top: '0',
        overflow: 'hidden',
        opacity: '0'
    });
    const root = _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.getContentContainer(dos);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.append(offscreenDiv, replicaElements);
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_13__.append(root, offscreenDiv);
    const textContent = offscreenDiv.dom.innerText;
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_14__.remove(offscreenDiv);
    return textContent;
};
const registerEvents = (editor, actions)=>{
    editor.on('BeforeGetContent', (e)=>{
        const multiCellContext = (cells)=>{
            e.preventDefault();
            extractSelected(cells).each((replicaElements)=>{
                const content = e.format === 'text' ? getTextContent(editor, replicaElements) : serializeElements(editor, replicaElements);
                e.content = content;
            });
        };
        if (e.selection === true) {
            const cells = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromFakeSelection(editor);
            if (cells.length >= 1) {
                multiCellContext(cells);
            }
        }
    });
    editor.on('BeforeSetContent', (e)=>{
        if (e.selection === true && e.paste === true) {
            const selectedCells = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor);
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.head(selectedCells).each((cell)=>{
                _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__.table(cell).each((table)=>{
                    const elements = _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.filter(_ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.fromHtml(e.content), (content)=>{
                        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.name(content) !== 'meta';
                    });
                    const isTable = _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.isTag('table');
                    if (_api_Options__WEBPACK_IMPORTED_MODULE_0__.shouldMergeContentOnPaste(editor) && elements.length === 1 && isTable(elements[0])) {
                        e.preventDefault();
                        const doc = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromDom(editor.getDoc());
                        const generators = _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__.paste(doc);
                        const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_2__.paste(cell, elements[0], generators);
                        actions.pasteCells(table, targets).each(()=>{
                            editor.focus();
                        });
                    }
                });
            });
        }
    });
};



}),
"./src/models/dom/main/ts/table/actions/InsertTable.ts": 
/*!*************************************************************!*\
  !*** ./src/models/dom/main/ts/table/actions/InsertTable.ts ***!
  \*************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  insertTable: () => (insertTable)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/operate/Render.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableConversions.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFilter.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Html.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Events */ "./src/models/dom/main/ts/table/api/Events.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/models/dom/main/ts/table/api/Options.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");






const placeCaretInCell = (editor, cell)=>{
    editor.selection.select(cell.dom, true);
    editor.selection.collapse(true);
};
const selectFirstCellInTable = (editor, tableElm)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.descendant(tableElm, 'td,th').each(_ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.curry(placeCaretInCell, editor));
};
const fireEvents = (editor, table)=>{
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.each(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.descendants(table, 'tr'), (row)=>{
        _api_Events__WEBPACK_IMPORTED_MODULE_0__.fireNewRow(editor, row.dom);
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.each(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.descendants(row, 'th,td'), (cell)=>{
            _api_Events__WEBPACK_IMPORTED_MODULE_0__.fireNewCell(editor, cell.dom);
        });
    });
};
const isPercentage = (width)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.isString(width) && width.indexOf('%') !== -1;
const insert = (editor, columns, rows, colHeaders, rowHeaders)=>{
    const defaultStyles = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableDefaultStyles(editor);
    const options = {
        styles: defaultStyles,
        attributes: _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableDefaultAttributes(editor),
        colGroups: _api_Options__WEBPACK_IMPORTED_MODULE_1__.tableUseColumnGroup(editor)
    };
    // Don't create an undo level when inserting the base table HTML otherwise we can end up with 2 undo levels
    editor.undoManager.ignore(()=>{
        const table = _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.render(rows, columns, rowHeaders, colHeaders, _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableHeaderType(editor), options);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.set(table, 'data-mce-id', '__mce');
        const html = _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.getOuter(table);
        editor.insertContent(html);
        editor.addVisual();
    });
    // Enforce the sizing mode of the table
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_3__.descendant(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getBody(editor), 'table[data-mce-id="__mce"]').map((table)=>{
        if (_api_Options__WEBPACK_IMPORTED_MODULE_1__.isTablePixelsForced(editor)) {
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_11__.convertToPixelSizeWidth(table);
        } else if (_api_Options__WEBPACK_IMPORTED_MODULE_1__.isTableResponsiveForced(editor)) {
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_11__.convertToNoneSizeWidth(table);
        } else if (_api_Options__WEBPACK_IMPORTED_MODULE_1__.isTablePercentagesForced(editor) || isPercentage(defaultStyles.width)) {
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_11__.convertToPercentSizeWidth(table);
        }
        _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.removeDataStyle(table);
        _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.remove(table, 'data-mce-id');
        fireEvents(editor, table);
        selectFirstCellInTable(editor, table);
        return table.dom;
    }).getOrNull();
};
const insertTable = (editor, rows, columns, options = {})=>{
    const checkInput = (val)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.isNumber(val) && val > 0;
    if (checkInput(rows) && checkInput(columns)) {
        const headerRows = options.headerRows || 0;
        const headerColumns = options.headerColumns || 0;
        return insert(editor, columns, rows, headerColumns, headerRows);
    } else {
        // eslint-disable-next-line no-console
        console.error('Invalid values for mceInsertTable - rows and columns values are required to insert a table.');
        return null;
    }
};



}),
"./src/models/dom/main/ts/table/actions/TableActions.ts": 
/*!**************************************************************!*\
  !*** ./src/models/dom/main/ts/table/actions/TableActions.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableActions: () => (TableActions)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_phoenix__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/phoenix */ "../phoenix/src/main/ts/ephox/phoenix/api/dom/DomDescent.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableGridSize.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/CellMutations.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableSection.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableFill.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableOperations.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Events */ "./src/models/dom/main/ts/table/api/Events.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Options */ "./src/models/dom/main/ts/table/api/Options.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _queries_TableSize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queries/TableSize */ "./src/models/dom/main/ts/table/queries/TableSize.ts");








const TableActions = (editor, resizeHandler, cellSelectionHandler)=>{
    const isTableBody = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getBody(editor)) === 'table';
    const lastRowGuard = (table)=>!isTableBody(editor) || _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__.getGridSize(table).rows > 1;
    const lastColumnGuard = (table)=>!isTableBody(editor) || _ephox_snooker__WEBPACK_IMPORTED_MODULE_5__.getGridSize(table).columns > 1;
    // Optional.none gives the default cloneFormats.
    const cloneFormats = _api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableCloneElements(editor);
    const colMutationOp = _api_Options__WEBPACK_IMPORTED_MODULE_1__.isResizeTableColumnResizing(editor) ? _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop : _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.halve;
    const getTableSectionType = (table)=>{
        switch(_api_Options__WEBPACK_IMPORTED_MODULE_1__.getTableHeaderType(editor)){
            case 'section':
                return _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.TableSection.section();
            case 'sectionCells':
                return _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.TableSection.sectionCells();
            case 'cells':
                return _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.TableSection.cells();
            default:
                // Attempt to automatically find the type. If a type can't be found
                // then fallback to "section" to maintain backwards compatibility.
                return _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.TableSection.getTableSectionType(table, 'section');
        }
    };
    const setSelectionFromAction = (table, result)=>result.cursor.fold(()=>{
            // Snooker has reported we don't have a good cursor position. However, we may have a locked column
            // with noneditable cells, so lets check if we have a noneditable cell and if so place the selection
            const cells = _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.cells(table);
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.head(cells).filter(_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.inBody).map((firstCell)=>{
                cellSelectionHandler.clearSelectedCells(table.dom);
                const rng = editor.dom.createRng();
                rng.selectNode(firstCell.dom);
                editor.selection.setRng(rng);
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_12__.set(firstCell, 'data-mce-selected', '1');
                return rng;
            });
        }, (cell)=>{
            const des = _ephox_phoenix__WEBPACK_IMPORTED_MODULE_13__.freefallRtl(cell);
            const rng = editor.dom.createRng();
            rng.setStart(des.element.dom, des.offset);
            rng.setEnd(des.element.dom, des.offset);
            editor.selection.setRng(rng);
            cellSelectionHandler.clearSelectedCells(table.dom);
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.Optional.some(rng);
        });
    const execute = (operation, guard, mutate, effect)=>(table, target, noEvents = false)=>{
            _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.removeDataStyle(table);
            const doc = _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.SugarElement.fromDom(editor.getDoc());
            const generators = _ephox_snooker__WEBPACK_IMPORTED_MODULE_16__.cellOperations(mutate, doc, cloneFormats);
            const behaviours = {
                sizing: _queries_TableSize__WEBPACK_IMPORTED_MODULE_3__.get(editor, table),
                resize: _api_Options__WEBPACK_IMPORTED_MODULE_1__.isResizeTableColumnResizing(editor) ? _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__.resizeTable() : _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__.preserveTable(),
                section: getTableSectionType(table)
            };
            return guard(table) ? operation(table, target, generators, behaviours).bind((result)=>{
                // Update the resize bars after the table operation
                resizeHandler.refresh(table.dom);
                // INVESTIGATE: Should "noEvents" prevent these from firing as well?
                _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each(result.newRows, (row)=>{
                    _api_Events__WEBPACK_IMPORTED_MODULE_0__.fireNewRow(editor, row.dom);
                });
                _ephox_katamari__WEBPACK_IMPORTED_MODULE_10__.each(result.newCells, (cell)=>{
                    _api_Events__WEBPACK_IMPORTED_MODULE_0__.fireNewCell(editor, cell.dom);
                });
                const range = setSelectionFromAction(table, result);
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.inBody(table)) {
                    _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.removeDataStyle(table);
                    if (!noEvents) {
                        _api_Events__WEBPACK_IMPORTED_MODULE_0__.fireTableModified(editor, table.dom, effect);
                    }
                }
                return range.map((rng)=>({
                        rng,
                        effect
                    }));
            }) : _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.Optional.none();
        };
    const deleteRow = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.eraseRows, lastRowGuard, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const deleteColumn = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.eraseColumns, lastColumnGuard, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const insertRowsBefore = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.insertRowsBefore, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const insertRowsAfter = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.insertRowsAfter, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const insertColumnsBefore = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.insertColumnsBefore, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, colMutationOp, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const insertColumnsAfter = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.insertColumnsAfter, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, colMutationOp, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const mergeCells = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.mergeCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const unmergeCells = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.unmergeCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const pasteColsBefore = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.pasteColsBefore, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const pasteColsAfter = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.pasteColsAfter, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const pasteRowsBefore = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.pasteRowsBefore, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const pasteRowsAfter = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.pasteRowsAfter, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const pasteCells = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.pasteCells, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.styleAndStructureModified);
    const makeCellsHeader = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.makeCellsHeader, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const unmakeCellsHeader = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.unmakeCellsHeader, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const makeColumnsHeader = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.makeColumnsHeader, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const unmakeColumnsHeader = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.unmakeColumnsHeader, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const makeRowsHeader = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.makeRowsHeader, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const makeRowsBody = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.makeRowsBody, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const makeRowsFooter = execute(_ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.makeRowsFooter, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.always, _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.noop, _api_Events__WEBPACK_IMPORTED_MODULE_0__.structureModified);
    const getTableCellType = _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.getCellsType;
    const getTableColType = _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.getColumnsType;
    const getTableRowType = _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.getRowsType;
    return {
        deleteRow,
        deleteColumn,
        insertRowsBefore,
        insertRowsAfter,
        insertColumnsBefore,
        insertColumnsAfter,
        mergeCells,
        unmergeCells,
        pasteColsBefore,
        pasteColsAfter,
        pasteRowsBefore,
        pasteRowsAfter,
        pasteCells,
        makeCellsHeader,
        unmakeCellsHeader,
        makeColumnsHeader,
        unmakeColumnsHeader,
        makeRowsHeader,
        makeRowsBody,
        makeRowsFooter,
        getTableRowType,
        getTableCellType,
        getTableColType
    };
};


}),
"./src/models/dom/main/ts/table/api/Clipboard.ts": 
/*!*******************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/Clipboard.ts ***!
  \*******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  clearColumns: () => (clearColumns),
  clearRows: () => (clearRows),
  getColumns: () => (getColumns),
  getRows: () => (getRows),
  setColumns: () => (setColumns),
  setRows: () => (setRows)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tinymce/core/api/FakeClipboard */ "./lib/globals/tinymce/core/api/FakeClipboard.js");
/*
 NOTE: This file is duplicated in the following locations:
  - plugins/table/api/Clipboard.ts
 Make sure that if making changes to this file, the other files are updated as well
 */ 

const tableTypeBase = 'x-tinymce/dom-table-';
const tableTypeRow = tableTypeBase + 'rows';
const tableTypeColumn = tableTypeBase + 'columns';
const setData = (items)=>{
    const fakeClipboardItem = tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].FakeClipboardItem(items);
    tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].write([
        fakeClipboardItem
    ]);
};
const getData = (type)=>{
    const items = tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].read() ?? [];
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.findMap(items, (item)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.Optional.from(item.getType(type)));
};
const clearData = (type)=>{
    if (getData(type).isSome()) {
        tinymce_core_api_FakeClipboard__WEBPACK_IMPORTED_MODULE_0__["default"].clear();
    }
};
const setRows = (rowsOpt)=>{
    rowsOpt.fold(clearRows, (rows)=>setData({
            [tableTypeRow]: rows
        }));
};
const getRows = ()=>getData(tableTypeRow);
const clearRows = ()=>clearData(tableTypeRow);
const setColumns = (columnsOpt)=>{
    columnsOpt.fold(clearColumns, (columns)=>setData({
            [tableTypeColumn]: columns
        }));
};
const getColumns = ()=>getData(tableTypeColumn);
const clearColumns = ()=>clearData(tableTypeColumn);



}),
"./src/models/dom/main/ts/table/api/Commands.ts": 
/*!******************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/Commands.ts ***!
  \******************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  registerCommands: () => (registerCommands)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/Sizes.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableConversions.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableFill.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/CopyRows.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/CopyCols.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Insert.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Remove.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Replication.ts");
/* ESM import */var _actions_InsertTable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../actions/InsertTable */ "./src/models/dom/main/ts/table/actions/InsertTable.ts");
/* ESM import */var _api_Events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/Events */ "./src/models/dom/main/ts/table/api/Events.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _queries_TableTargets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queries/TableTargets */ "./src/models/dom/main/ts/table/queries/TableTargets.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/models/dom/main/ts/table/selection/TableSelection.ts");
/* ESM import */var _Clipboard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Clipboard */ "./src/models/dom/main/ts/table/api/Clipboard.ts");
/* ESM import */var _Options__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Options */ "./src/models/dom/main/ts/table/api/Options.ts");










const getSelectionStartCellOrCaption = (editor)=>_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getSelectionCellOrCaption(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getSelectionStart(editor), _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getIsRoot(editor)).filter(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.isInEditableContext);
const getSelectionStartCell = (editor)=>_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getSelectionCell(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getSelectionStart(editor), _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getIsRoot(editor)).filter(_core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.isInEditableContext);
const registerCommands = (editor, actions)=>{
    const isRoot = _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.getIsRoot(editor);
    const eraseTable = ()=>getSelectionStartCellOrCaption(editor).each((cellOrCaption)=>{
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(cellOrCaption, isRoot).filter(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.not(isRoot)).each((table)=>{
                const cursor = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromText('');
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.after(table, cursor);
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.remove(table);
                if (editor.dom.isEmpty(editor.getBody())) {
                    editor.setContent('');
                    editor.selection.setCursorLocation();
                } else {
                    const rng = editor.dom.createRng();
                    rng.setStart(cursor.dom, 0);
                    rng.setEnd(cursor.dom, 0);
                    editor.selection.setRng(rng);
                    editor.nodeChanged();
                }
            });
        });
    const setSizingMode = (sizing)=>getSelectionStartCellOrCaption(editor).each((cellOrCaption)=>{
            // Do nothing if tables are forced to use a specific sizing mode
            const isForcedSizing = _Options__WEBPACK_IMPORTED_MODULE_6__.isTableResponsiveForced(editor) || _Options__WEBPACK_IMPORTED_MODULE_6__.isTablePixelsForced(editor) || _Options__WEBPACK_IMPORTED_MODULE_6__.isTablePercentagesForced(editor);
            if (!isForcedSizing) {
                _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(cellOrCaption, isRoot).each((table)=>{
                    if (sizing === 'relative' && !_ephox_snooker__WEBPACK_IMPORTED_MODULE_12__.isPercentSizing(table)) {
                        _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.convertToPercentSizeWidth(table);
                    } else if (sizing === 'fixed' && !_ephox_snooker__WEBPACK_IMPORTED_MODULE_12__.isPixelSizing(table)) {
                        _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.convertToPixelSizeWidth(table);
                    } else if (sizing === 'responsive' && !_ephox_snooker__WEBPACK_IMPORTED_MODULE_12__.isNoneSizing(table)) {
                        _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.convertToNoneSizeWidth(table);
                    }
                    _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.removeDataStyle(table);
                    _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, _api_Events__WEBPACK_IMPORTED_MODULE_1__.structureModified);
                });
            }
        });
    const getTableFromCell = (cell)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(cell, isRoot);
    const performActionOnSelection = (action)=>getSelectionStartCell(editor).bind((cell)=>getTableFromCell(cell).map((table)=>action(table, cell)));
    const toggleTableClass = (_ui, clazz)=>{
        performActionOnSelection((table)=>{
            editor.formatter.toggle('tableclass', {
                value: clazz
            }, table.dom);
            _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, _api_Events__WEBPACK_IMPORTED_MODULE_1__.styleModified);
        });
    };
    const toggleTableCellClass = (_ui, clazz)=>{
        performActionOnSelection((table)=>{
            const selectedCells = _selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor);
            const allHaveClass = _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.forall(selectedCells, (cell)=>editor.formatter.match('tablecellclass', {
                    value: clazz
                }, cell.dom));
            const formatterAction = allHaveClass ? editor.formatter.remove : editor.formatter.apply;
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.each(selectedCells, (cell)=>formatterAction('tablecellclass', {
                    value: clazz
                }, cell.dom));
            _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, _api_Events__WEBPACK_IMPORTED_MODULE_1__.styleModified);
        });
    };
    const toggleCaption = ()=>{
        getSelectionStartCellOrCaption(editor).each((cellOrCaption)=>{
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.table(cellOrCaption, isRoot).each((table)=>{
                _ephox_sugar__WEBPACK_IMPORTED_MODULE_15__.child(table, 'caption').fold(()=>{
                    const caption = _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromTag('caption');
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.append(caption, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromText('Caption'));
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.appendAt(table, caption, 0);
                    editor.selection.setCursorLocation(caption.dom, 0);
                }, (caption)=>{
                    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_16__.isTag('caption')(cellOrCaption)) {
                        _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.one('td', table).each((td)=>editor.selection.setCursorLocation(td.dom, 0));
                    }
                    _ephox_sugar__WEBPACK_IMPORTED_MODULE_11__.remove(caption);
                });
                _api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, _api_Events__WEBPACK_IMPORTED_MODULE_1__.structureModified);
            });
        });
    };
    const postExecute = (_data)=>{
        editor.focus();
    };
    const actOnSelection = (execute, noEvents = false)=>performActionOnSelection((table, startCell)=>{
            const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_3__.forMenu(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor), table, startCell);
            execute(table, targets, noEvents).each(postExecute);
        });
    const copyRowSelection = ()=>performActionOnSelection((table, startCell)=>{
            const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_3__.forMenu(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor), table, startCell);
            const generators = _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.cellOperations(_ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.noop, _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromDom(editor.getDoc()), _ephox_katamari__WEBPACK_IMPORTED_MODULE_19__.Optional.none());
            return _ephox_snooker__WEBPACK_IMPORTED_MODULE_20__.copyRows(table, targets, generators);
        });
    const copyColSelection = ()=>performActionOnSelection((table, startCell)=>{
            const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_3__.forMenu(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor), table, startCell);
            return _ephox_snooker__WEBPACK_IMPORTED_MODULE_21__.copyCols(table, targets);
        });
    const pasteOnSelection = (execute, getRows)=>// If we have FakeClipboard rows to paste
        getRows().each((rows)=>{
            const clonedRows = _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.map(rows, (row)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_22__.deep(row));
            performActionOnSelection((table, startCell)=>{
                const generators = _ephox_snooker__WEBPACK_IMPORTED_MODULE_18__.paste(_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.SugarElement.fromDom(editor.getDoc()));
                const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_3__.pasteRows(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor), startCell, clonedRows, generators);
                execute(table, targets).each(postExecute);
            });
        });
    const actOnType = (getAction)=>(_ui, args)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.get(args, 'type').each((type)=>{
                actOnSelection(getAction(type), args.no_events);
            });
    // Register action commands
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.each({
        mceTableSplitCells: ()=>actOnSelection(actions.unmergeCells),
        mceTableMergeCells: ()=>actOnSelection(actions.mergeCells),
        mceTableInsertRowBefore: ()=>actOnSelection(actions.insertRowsBefore),
        mceTableInsertRowAfter: ()=>actOnSelection(actions.insertRowsAfter),
        mceTableInsertColBefore: ()=>actOnSelection(actions.insertColumnsBefore),
        mceTableInsertColAfter: ()=>actOnSelection(actions.insertColumnsAfter),
        mceTableDeleteCol: ()=>actOnSelection(actions.deleteColumn),
        mceTableDeleteRow: ()=>actOnSelection(actions.deleteRow),
        mceTableCutCol: ()=>copyColSelection().each((selection)=>{
                _Clipboard__WEBPACK_IMPORTED_MODULE_5__.setColumns(selection);
                actOnSelection(actions.deleteColumn);
            }),
        mceTableCutRow: ()=>copyRowSelection().each((selection)=>{
                _Clipboard__WEBPACK_IMPORTED_MODULE_5__.setRows(selection);
                actOnSelection(actions.deleteRow);
            }),
        mceTableCopyCol: ()=>copyColSelection().each((selection)=>_Clipboard__WEBPACK_IMPORTED_MODULE_5__.setColumns(selection)),
        mceTableCopyRow: ()=>copyRowSelection().each((selection)=>_Clipboard__WEBPACK_IMPORTED_MODULE_5__.setRows(selection)),
        mceTablePasteColBefore: ()=>pasteOnSelection(actions.pasteColsBefore, _Clipboard__WEBPACK_IMPORTED_MODULE_5__.getColumns),
        mceTablePasteColAfter: ()=>pasteOnSelection(actions.pasteColsAfter, _Clipboard__WEBPACK_IMPORTED_MODULE_5__.getColumns),
        mceTablePasteRowBefore: ()=>pasteOnSelection(actions.pasteRowsBefore, _Clipboard__WEBPACK_IMPORTED_MODULE_5__.getRows),
        mceTablePasteRowAfter: ()=>pasteOnSelection(actions.pasteRowsAfter, _Clipboard__WEBPACK_IMPORTED_MODULE_5__.getRows),
        mceTableDelete: eraseTable,
        mceTableCellToggleClass: toggleTableCellClass,
        mceTableToggleClass: toggleTableClass,
        mceTableToggleCaption: toggleCaption,
        mceTableSizingMode: (_ui, sizing)=>setSizingMode(sizing),
        mceTableCellType: actOnType((type)=>type === 'th' ? actions.makeCellsHeader : actions.unmakeCellsHeader),
        mceTableColType: actOnType((type)=>type === 'th' ? actions.makeColumnsHeader : actions.unmakeColumnsHeader),
        mceTableRowType: actOnType((type)=>{
            switch(type){
                case 'header':
                    return actions.makeRowsHeader;
                case 'footer':
                    return actions.makeRowsFooter;
                default:
                    return actions.makeRowsBody;
            }
        })
    }, (func, name)=>editor.addCommand(name, func));
    editor.addCommand('mceInsertTable', (_ui, args)=>{
        _actions_InsertTable__WEBPACK_IMPORTED_MODULE_0__.insertTable(editor, args.rows, args.columns, args.options);
    });
    // Apply cell style using command (background color, border color, border style and border width)
    // tinyMCE.activeEditor.execCommand('mceTableApplyCellStyle', false, { backgroundColor: 'red', borderColor: 'blue' })
    // Remove cell style using command (an empty string indicates to remove the style)
    // tinyMCE.activeEditor.execCommand('mceTableApplyCellStyle', false, { backgroundColor: '' })
    editor.addCommand('mceTableApplyCellStyle', (_ui, args)=>{
        const getFormatName = (style)=>'tablecell' + style.toLowerCase().replace('-', '');
        if (!_ephox_katamari__WEBPACK_IMPORTED_MODULE_24__.isObject(args)) {
            return;
        }
        const cells = _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.filter(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_4__.getCellsFromSelection(editor), _core_TableUtils__WEBPACK_IMPORTED_MODULE_2__.isInEditableContext);
        if (cells.length === 0) {
            return;
        }
        const validArgs = _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.filter(args, (value, style)=>editor.formatter.has(getFormatName(style)) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_24__.isString(value));
        if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.isEmpty(validArgs)) {
            return;
        }
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_23__.each(validArgs, (value, style)=>{
            const formatName = getFormatName(style);
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_14__.each(cells, (cell)=>{
                if (value === '') {
                    editor.formatter.remove(formatName, {
                        value: null
                    }, cell.dom, true);
                } else {
                    editor.formatter.apply(formatName, {
                        value
                    }, cell.dom);
                }
            });
        });
        /*
      Use the first cell in the selection to get the table and fire the TableModified event.
      If this command is applied over multiple tables, only the first table selected
      will have a TableModified event thrown.
    */ getTableFromCell(cells[0]).each((table)=>_api_Events__WEBPACK_IMPORTED_MODULE_1__.fireTableModified(editor, table.dom, _api_Events__WEBPACK_IMPORTED_MODULE_1__.styleModified));
    });
};



}),
"./src/models/dom/main/ts/table/api/Events.ts": 
/*!****************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/Events.ts ***!
  \****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fireNewCell: () => (fireNewCell),
  fireNewRow: () => (fireNewRow),
  fireObjectResizeStart: () => (fireObjectResizeStart),
  fireObjectResized: () => (fireObjectResized),
  fireTableModified: () => (fireTableModified),
  fireTableSelectionChange: () => (fireTableSelectionChange),
  fireTableSelectionClear: () => (fireTableSelectionClear),
  structureModified: () => (structureModified),
  styleAndStructureModified: () => (styleAndStructureModified),
  styleModified: () => (styleModified)
});
/*
 NOTE: This file is duplicated in the following locations:
  - core/api/TableEvents.ts
  - plugins/table/api/Events.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ const fireNewRow = (editor, row)=>editor.dispatch('NewRow', {
        node: row
    });
const fireNewCell = (editor, cell)=>editor.dispatch('NewCell', {
        node: cell
    });
const fireTableModified = (editor, table, data)=>{
    editor.dispatch('TableModified', {
        ...data,
        table
    });
};
const fireTableSelectionChange = (editor, cells, start, finish, otherCells)=>{
    editor.dispatch('TableSelectionChange', {
        cells,
        start,
        finish,
        otherCells
    });
};
const fireTableSelectionClear = (editor)=>{
    editor.dispatch('TableSelectionClear');
};
const fireObjectResizeStart = (editor, target, width, height, origin)=>{
    editor.dispatch('ObjectResizeStart', {
        target,
        width,
        height,
        origin
    });
};
const fireObjectResized = (editor, target, width, height, origin)=>{
    editor.dispatch('ObjectResized', {
        target,
        width,
        height,
        origin
    });
};
const styleModified = {
    structure: false,
    style: true
};
const structureModified = {
    structure: true,
    style: false
};
const styleAndStructureModified = {
    structure: true,
    style: true
};



}),
"./src/models/dom/main/ts/table/api/Options.ts": 
/*!*****************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/Options.ts ***!
  \*****************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getTableCloneElements: () => (getTableCloneElements),
  getTableColumnResizingBehaviour: () => (getTableColumnResizingBehaviour),
  getTableDefaultAttributes: () => (getTableDefaultAttributes),
  getTableDefaultStyles: () => (getTableDefaultStyles),
  getTableHeaderType: () => (getTableHeaderType),
  hasTableObjectResizing: () => (hasTableObjectResizing),
  hasTableResizeBars: () => (hasTableResizeBars),
  isPreserveTableColumnResizing: () => (isPreserveTableColumnResizing),
  isResizeTableColumnResizing: () => (isResizeTableColumnResizing),
  isSplitUiMode: () => (isSplitUiMode),
  isTablePercentagesForced: () => (isTablePercentagesForced),
  isTablePixelsForced: () => (isTablePixelsForced),
  isTableResponsiveForced: () => (isTableResponsiveForced),
  register: () => (register),
  shouldMergeContentOnPaste: () => (shouldMergeContentOnPaste),
  tableUseColumnGroup: () => (tableUseColumnGroup)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/view/Width.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarBody.ts");


const option = (name)=>(editor)=>editor.options.get(name);
// Note: This is also contained in the table plugin Options.ts file
const defaultWidth = '100%';
const getPixelForcedWidth = (editor)=>{
    // Determine the inner size of the parent block element where the table will be inserted
    const dom = editor.dom;
    const parentBlock = dom.getParent(editor.selection.getStart(), dom.isBlock) ?? editor.getBody();
    return _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.getInner(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(parentBlock)) + 'px';
};
// Note: This is also contained in the table plugin Options.ts file
const determineDefaultTableStyles = (editor, defaultStyles)=>{
    if (isTableResponsiveForced(editor) || !shouldStyleWithCss(editor)) {
        return defaultStyles;
    } else if (isTablePixelsForced(editor)) {
        return {
            ...defaultStyles,
            width: getPixelForcedWidth(editor)
        };
    } else {
        return {
            ...defaultStyles,
            width: defaultWidth
        };
    }
};
// Note: This is also contained in the table plugin Options.ts file
const determineDefaultTableAttributes = (editor, defaultAttributes)=>{
    if (isTableResponsiveForced(editor) || shouldStyleWithCss(editor)) {
        return defaultAttributes;
    } else if (isTablePixelsForced(editor)) {
        return {
            ...defaultAttributes,
            width: getPixelForcedWidth(editor)
        };
    } else {
        return {
            ...defaultAttributes,
            width: defaultWidth
        };
    }
};
const register = (editor)=>{
    const registerOption = editor.options.register;
    registerOption('table_clone_elements', {
        processor: 'string[]'
    });
    registerOption('table_use_colgroups', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_header_type', {
        processor: (value)=>{
            const valid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains([
                'section',
                'cells',
                'sectionCells',
                'auto'
            ], value);
            return valid ? {
                value,
                valid
            } : {
                valid: false,
                message: 'Must be one of: section, cells, sectionCells or auto.'
            };
        },
        default: 'section'
    });
    registerOption('table_sizing_mode', {
        processor: 'string',
        default: 'auto'
    });
    registerOption('table_default_attributes', {
        processor: 'object',
        default: {
            border: '1'
        }
    });
    registerOption('table_default_styles', {
        processor: 'object',
        default: {
            'border-collapse': 'collapse'
        }
    });
    registerOption('table_column_resizing', {
        processor: (value)=>{
            const valid = _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains([
                'preservetable',
                'resizetable'
            ], value);
            return valid ? {
                value,
                valid
            } : {
                valid: false,
                message: 'Must be preservetable, or resizetable.'
            };
        },
        default: 'preservetable'
    });
    registerOption('table_resize_bars', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_style_by_css', {
        processor: 'boolean',
        default: true
    });
    registerOption('table_merge_content_on_paste', {
        processor: 'boolean',
        default: true
    });
};
const getTableCloneElements = (editor)=>{
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.from(editor.options.get('table_clone_elements'));
};
const hasTableObjectResizing = (editor)=>{
    const objectResizing = editor.options.get('object_resizing');
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_2__.contains(objectResizing.split(','), 'table');
};
const getTableHeaderType = option('table_header_type');
const getTableColumnResizingBehaviour = option('table_column_resizing');
const isPreserveTableColumnResizing = (editor)=>getTableColumnResizingBehaviour(editor) === 'preservetable';
const isResizeTableColumnResizing = (editor)=>getTableColumnResizingBehaviour(editor) === 'resizetable';
const getTableSizingMode = option('table_sizing_mode');
const isTablePercentagesForced = (editor)=>getTableSizingMode(editor) === 'relative';
const isTablePixelsForced = (editor)=>getTableSizingMode(editor) === 'fixed';
const isTableResponsiveForced = (editor)=>getTableSizingMode(editor) === 'responsive';
const hasTableResizeBars = option('table_resize_bars');
const shouldStyleWithCss = option('table_style_by_css');
const shouldMergeContentOnPaste = option('table_merge_content_on_paste');
const getTableDefaultAttributes = (editor)=>{
    // Note: The we don't rely on the default here as we need to dynamically lookup the widths based on the current editor state
    const options = editor.options;
    const defaultAttributes = options.get('table_default_attributes');
    return options.isSet('table_default_attributes') ? defaultAttributes : determineDefaultTableAttributes(editor, defaultAttributes);
};
const getTableDefaultStyles = (editor)=>{
    // Note: The we don't rely on the default here as we need to dynamically lookup the widths based on the current editor state
    const options = editor.options;
    const defaultStyles = options.get('table_default_styles');
    return options.isSet('table_default_styles') ? defaultStyles : determineDefaultTableStyles(editor, defaultStyles);
};
const tableUseColumnGroup = option('table_use_colgroups');
const fixedContainerSelector = option('fixed_toolbar_container');
const fixedToolbarContainerTarget = option('fixed_toolbar_container_target');
const fixedContainerTarget = (editor)=>{
    if (!editor.inline) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
    }
    const selector = fixedContainerSelector(editor) ?? '';
    if (selector.length > 0) {
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.descendant(_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.body(), selector);
    }
    const element = fixedToolbarContainerTarget(editor);
    if (_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.isNonNullable(element)) {
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.some(_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.SugarElement.fromDom(element));
    }
    return _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.Optional.none();
};
const useFixedContainer = (editor)=>editor.inline && fixedContainerTarget(editor).isSome();
const getUiMode = option('ui_mode');
const isSplitUiMode = (editor)=>!useFixedContainer(editor) && getUiMode(editor) === 'split';



}),
"./src/models/dom/main/ts/table/api/QueryCommands.ts": 
/*!***********************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/QueryCommands.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  registerQueryCommands: () => (registerQueryCommands)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _queries_TableTargets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../queries/TableTargets */ "./src/models/dom/main/ts/table/queries/TableTargets.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/models/dom/main/ts/table/selection/TableSelection.ts");





const registerQueryCommands = (editor, actions)=>{
    const isRoot = _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor);
    const lookupOnSelection = (action)=>_selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getSelectionCell(_core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getSelectionStart(editor)).bind((cell)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_3__.table(cell, isRoot).map((table)=>{
                const targets = _queries_TableTargets__WEBPACK_IMPORTED_MODULE_1__.forMenu(_selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getCellsFromSelection(editor), table, cell);
                return action(table, targets);
            })).getOr('');
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_4__.each({
        mceTableRowType: ()=>lookupOnSelection(actions.getTableRowType),
        mceTableCellType: ()=>lookupOnSelection(actions.getTableCellType),
        mceTableColType: ()=>lookupOnSelection(actions.getTableColType)
    }, (func, name)=>editor.addQueryValueHandler(name, func));
};



}),
"./src/models/dom/main/ts/table/api/TableCellSelectionHandler.ts": 
/*!***********************************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/TableCellSelectionHandler.ts ***!
  \***********************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableCellSelectionHandler: () => (TableCellSelectionHandler)
});
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/selection/Selections.ts");
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/SelectionAnnotation.ts");
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/InputHandlers.ts");
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/SelectionKeys.ts");
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/SelectionTypes.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Obj.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Cell.ts");
/* ESM import */var _ephox_robin__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/robin */ "../robin/src/main/ts/ephox/robin/api/dom/DomParent.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableFill.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/OtherCells.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Class.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/selection/SimSelection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/selection/core/SelectionDirection.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/events/DomEvent.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Direction.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _selection_Ephemera__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selection/Ephemera */ "./src/models/dom/main/ts/table/selection/Ephemera.ts");
/* ESM import */var _selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../selection/TableSelection */ "./src/models/dom/main/ts/table/selection/TableSelection.ts");
/* ESM import */var _Events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Events */ "./src/models/dom/main/ts/table/api/Events.ts");
/* ESM import */var _Options__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Options */ "./src/models/dom/main/ts/table/api/Options.ts");











const hasInternalTarget = (e)=>!_ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.has(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(e.target), 'ephox-snooker-resizer-bar');
const TableCellSelectionHandler = (editor, resizeHandler)=>{
    const cellSelection = (0,_ephox_darwin__WEBPACK_IMPORTED_MODULE_7__.Selections)(()=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(editor.getBody()), ()=>_selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getSelectionCell(_core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getSelectionStart(editor), _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor)), _selection_Ephemera__WEBPACK_IMPORTED_MODULE_1__.ephemera.selectedSelector);
    const onSelection = (cells, start, finish)=>{
        const tableOpt = _ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.table(start);
        tableOpt.each((table)=>{
            const cellsDom = _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.map(cells, (cell)=>cell.dom);
            const cloneFormats = _Options__WEBPACK_IMPORTED_MODULE_4__.getTableCloneElements(editor);
            const generators = _ephox_snooker__WEBPACK_IMPORTED_MODULE_10__.cellOperations(_ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.noop, _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(editor.getDoc()), cloneFormats);
            const selectedCells = (0,_selection_TableSelection__WEBPACK_IMPORTED_MODULE_2__.getCellsFromSelection)(editor);
            const otherCellsDom = _ephox_snooker__WEBPACK_IMPORTED_MODULE_12__.getOtherCells(table, {
                selection: selectedCells
            }, generators).map((otherCells)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_13__.map(otherCells, (cellArr)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.map(cellArr, (cell)=>cell.dom))).getOrUndefined();
            _Events__WEBPACK_IMPORTED_MODULE_3__.fireTableSelectionChange(editor, cellsDom, start.dom, finish.dom, otherCellsDom);
        });
    };
    const onClear = ()=>_Events__WEBPACK_IMPORTED_MODULE_3__.fireTableSelectionClear(editor);
    const annotations = _ephox_darwin__WEBPACK_IMPORTED_MODULE_14__.SelectionAnnotation.byAttr(_selection_Ephemera__WEBPACK_IMPORTED_MODULE_1__.ephemera, onSelection, onClear);
    editor.on('init', (_e)=>{
        const win = editor.getWin();
        const body = _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getBody(editor);
        const isRoot = _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getIsRoot(editor);
        // When the selection changes through either the mouse or keyboard, and the selection is no longer within the table.
        // Remove the selection.
        const syncSelection = ()=>{
            const sel = editor.selection;
            const start = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(sel.getStart());
            const end = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(sel.getEnd());
            const shared = _ephox_robin__WEBPACK_IMPORTED_MODULE_15__.sharedOne(_ephox_snooker__WEBPACK_IMPORTED_MODULE_8__.table, [
                start,
                end
            ]);
            shared.fold(()=>annotations.clear(body), _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.noop);
        };
        const mouseHandlers = _ephox_darwin__WEBPACK_IMPORTED_MODULE_16__.mouse(win, body, isRoot, annotations);
        const keyHandlers = _ephox_darwin__WEBPACK_IMPORTED_MODULE_16__.keyboard(win, body, isRoot, annotations);
        const external = _ephox_darwin__WEBPACK_IMPORTED_MODULE_16__.external(win, body, isRoot, annotations);
        const hasShiftKey = (event)=>event.raw.shiftKey === true;
        editor.on('TableSelectorChange', (e)=>external(e.start, e.finish));
        const handleResponse = (event, response)=>{
            // Only handle shift key non shiftkey cell navigation is handled by core
            if (!hasShiftKey(event)) {
                return;
            }
            if (response.kill) {
                event.kill();
            }
            response.selection.each((ns)=>{
                const relative = _ephox_sugar__WEBPACK_IMPORTED_MODULE_17__.SimSelection.relative(ns.start, ns.finish);
                const rng = _ephox_sugar__WEBPACK_IMPORTED_MODULE_18__.asLtrRange(win, relative);
                editor.selection.setRng(rng);
            });
        };
        const keyup = (event)=>{
            const wrappedEvent = _ephox_sugar__WEBPACK_IMPORTED_MODULE_19__.fromRawEvent(event);
            // Note, this is an optimisation.
            if (wrappedEvent.raw.shiftKey && _ephox_darwin__WEBPACK_IMPORTED_MODULE_20__.isNavigation(wrappedEvent.raw.which)) {
                const rng = editor.selection.getRng();
                const start = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(rng.startContainer);
                const end = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(rng.endContainer);
                keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each((response)=>{
                    handleResponse(wrappedEvent, response);
                });
            }
        };
        const keydown = (event)=>{
            const wrappedEvent = _ephox_sugar__WEBPACK_IMPORTED_MODULE_19__.fromRawEvent(event);
            resizeHandler.hide();
            const rng = editor.selection.getRng();
            const start = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(rng.startContainer);
            const end = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(rng.endContainer);
            const direction = _ephox_sugar__WEBPACK_IMPORTED_MODULE_21__.onDirection(_ephox_darwin__WEBPACK_IMPORTED_MODULE_20__.ltr, _ephox_darwin__WEBPACK_IMPORTED_MODULE_20__.rtl)(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(editor.selection.getStart()));
            keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each((response)=>{
                handleResponse(wrappedEvent, response);
            });
            resizeHandler.show();
        };
        const isLeftMouse = (raw)=>raw.button === 0;
        // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons
        const isLeftButtonPressed = (raw)=>{
            // Only added by Chrome/Firefox in June 2015.
            // This is only to fix a 1px bug (TBIO-2836) so return true if we're on an older browser
            if (raw.buttons === undefined) {
                return true;
            }
            // use bitwise & for optimal comparison
            // eslint-disable-next-line no-bitwise
            return (raw.buttons & 1) !== 0;
        };
        const dragStart = (_e)=>{
            mouseHandlers.clearstate();
        };
        const mouseDown = (e)=>{
            if (isLeftMouse(e) && hasInternalTarget(e)) {
                mouseHandlers.mousedown(_ephox_sugar__WEBPACK_IMPORTED_MODULE_19__.fromRawEvent(e));
            }
        };
        const mouseOver = (e)=>{
            if (isLeftButtonPressed(e) && hasInternalTarget(e)) {
                mouseHandlers.mouseover(_ephox_sugar__WEBPACK_IMPORTED_MODULE_19__.fromRawEvent(e));
            }
        };
        const mouseUp = (e)=>{
            if (isLeftMouse(e) && hasInternalTarget(e)) {
                mouseHandlers.mouseup(_ephox_sugar__WEBPACK_IMPORTED_MODULE_19__.fromRawEvent(e));
            }
        };
        const getDoubleTap = ()=>{
            const lastTarget = (0,_ephox_katamari__WEBPACK_IMPORTED_MODULE_22__.Cell)(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(body));
            const lastTimeStamp = (0,_ephox_katamari__WEBPACK_IMPORTED_MODULE_22__.Cell)(0);
            const touchEnd = (t)=>{
                const target = _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(t.target);
                if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_23__.isTag('td')(target) || _ephox_sugar__WEBPACK_IMPORTED_MODULE_23__.isTag('th')(target)) {
                    const lT = lastTarget.get();
                    const lTS = lastTimeStamp.get();
                    if (_ephox_sugar__WEBPACK_IMPORTED_MODULE_24__.eq(lT, target) && t.timeStamp - lTS < 300) {
                        t.preventDefault();
                        external(target, target);
                    }
                }
                lastTarget.set(target);
                lastTimeStamp.set(t.timeStamp);
            };
            return {
                touchEnd
            };
        };
        const doubleTap = getDoubleTap();
        editor.on('dragstart', dragStart);
        editor.on('mousedown', mouseDown);
        editor.on('mouseover', mouseOver);
        editor.on('mouseup', mouseUp);
        editor.on('touchend', doubleTap.touchEnd);
        editor.on('keyup', keyup);
        editor.on('keydown', keydown);
        editor.on('NodeChange', syncSelection);
    });
    editor.on('PreInit', ()=>{
        editor.serializer.addTempAttr(_selection_Ephemera__WEBPACK_IMPORTED_MODULE_1__.ephemera.firstSelected);
        editor.serializer.addTempAttr(_selection_Ephemera__WEBPACK_IMPORTED_MODULE_1__.ephemera.lastSelected);
    });
    const clearSelectedCells = (container)=>annotations.clear(_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.SugarElement.fromDom(container));
    const getSelectedCells = ()=>_ephox_darwin__WEBPACK_IMPORTED_MODULE_25__.fold(cellSelection.get(), // No fake selected cells
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.constant([]), // This path is taken whenever there is fake cell selection even for just a single selected cell
        (cells)=>{
            return _ephox_katamari__WEBPACK_IMPORTED_MODULE_9__.map(cells, (cell)=>cell.dom);
        }, // For this path, the start of the selection whether collapsed or ranged is within a table cell
        (cell)=>[
                cell.dom
            ]);
    return {
        getSelectedCells,
        clearSelectedCells
    };
};


}),
"./src/models/dom/main/ts/table/api/TableResizeHandler.ts": 
/*!****************************************************************!*\
  !*** ./src/models/dom/main/ts/table/api/TableResizeHandler.ts ***!
  \****************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TableResizeHandler: () => (TableResizeHandler)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Type.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Singleton.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/Warehouse.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/ResizeBehaviour.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableGridSize.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableConversions.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/resize/Adjustments.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableResize.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/Sizes.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Css.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/TableUtils */ "./src/models/dom/main/ts/table/core/TableUtils.ts");
/* ESM import */var _core_TableWire__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/TableWire */ "./src/models/dom/main/ts/table/core/TableWire.ts");
/* ESM import */var _queries_TableSize__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/TableSize */ "./src/models/dom/main/ts/table/queries/TableSize.ts");
/* ESM import */var _Events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Events */ "./src/models/dom/main/ts/table/api/Events.ts");
/* ESM import */var _Options__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Options */ "./src/models/dom/main/ts/table/api/Options.ts");








const isTable = (node)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.isNonNullable(node) && node.nodeName === 'TABLE';
const barResizerPrefix = 'bar-';
const isResizable = (elm)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.get(elm, 'data-mce-resize') !== 'false';
const syncTableCellPixels = (table)=>{
    const warehouse = _ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.Warehouse.fromTable(table);
    if (!_ephox_snooker__WEBPACK_IMPORTED_MODULE_7__.Warehouse.hasColumns(warehouse)) {
        // Ensure the specified width matches the actual cell width
        _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.each(_ephox_snooker__WEBPACK_IMPORTED_MODULE_9__.cells(table), (cell)=>{
            const computedWidth = _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.get(cell, 'width');
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.set(cell, 'width', computedWidth);
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.remove(cell, 'width');
        });
    }
};
const isCornerResize = (origin)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.startsWith(origin, 'corner-');
const getCornerLocation = (origin)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.removeLeading(origin, 'corner-');
const TableResizeHandler = (editor)=>{
    const selectionRng = _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.value();
    const tableResize = _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.value();
    const resizeWire = _ephox_katamari__WEBPACK_IMPORTED_MODULE_12__.value();
    let startW;
    let startRawW;
    let startH;
    let startRawH;
    const lazySizing = (table)=>_queries_TableSize__WEBPACK_IMPORTED_MODULE_2__.get(editor, table);
    const lazyResizingBehaviour = ()=>_Options__WEBPACK_IMPORTED_MODULE_4__.isPreserveTableColumnResizing(editor) ? _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.preserveTable() : _ephox_snooker__WEBPACK_IMPORTED_MODULE_13__.resizeTable();
    const getNumColumns = (table)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_14__.getGridSize(table).columns;
    const getNumRows = (table)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_14__.getGridSize(table).rows;
    const afterCornerResize = (table, origin, width, height)=>{
        // Origin will tell us which handle was clicked, eg corner-se or corner-nw
        // so check to see if it ends with `e` (eg east edge)
        const location = getCornerLocation(origin);
        const isRightEdgeResize = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.endsWith(location, 'e');
        const isNorthEdgeResize = _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.startsWith(location, 'n');
        // Responsive tables don't have a width so we need to convert it to a relative/percent
        // table instead, as that's closer to responsive sizing than fixed sizing
        if (startRawW === '') {
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.convertToPercentSizeWidth(table);
        }
        // Responsive tables don't have a height so we need to convert it to a fixed value to be able to resize the table height
        if (startRawH === '') {
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.convertToPixelSizeHeight(table);
        }
        // Adjust the column sizes and update the table width to use the right sizing, if the table changed size.
        // This is needed as core will always use pixels when setting the width.
        if (width !== startW && startRawW !== '') {
            // Restore the original size and then let snooker resize appropriately
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.set(table, 'width', startRawW);
            const resizing = lazyResizingBehaviour();
            const tableSize = lazySizing(table);
            // For preserve table we want to always resize the entire table. So pretend the last column is being resized
            const col = _Options__WEBPACK_IMPORTED_MODULE_4__.isPreserveTableColumnResizing(editor) || isRightEdgeResize ? getNumColumns(table) - 1 : 0;
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_16__.adjustWidth(table, width - startW, col, resizing, tableSize);
        // Handle the edge case where someone might fire this event without resizing.
        // If so then we need to ensure the table is still using percent
        } else if (_core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.isPercentage(startRawW)) {
            const percentW = parseFloat(startRawW.replace('%', ''));
            const targetPercentW = width * percentW / startW;
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.set(table, 'width', targetPercentW + '%');
        }
        // Sync the cell sizes, as the core resizing logic doesn't update them, but snooker does
        if (_core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.isPixel(startRawW)) {
            syncTableCellPixels(table);
        }
        // NOTE: This will only change the height of the first or last tr
        if (height !== startH && startRawH !== '') {
            // Restore the original size and then let snooker resize appropriately
            _ephox_sugar__WEBPACK_IMPORTED_MODULE_10__.set(table, 'height', startRawH);
            const idx = isNorthEdgeResize ? 0 : getNumRows(table) - 1;
            _ephox_snooker__WEBPACK_IMPORTED_MODULE_16__.adjustHeight(table, height - startH, idx);
        }
    };
    const destroy = ()=>{
        tableResize.on((sz)=>{
            sz.destroy();
        });
    };
    editor.on('init', ()=>{
        const rawWire = _core_TableWire__WEBPACK_IMPORTED_MODULE_1__.get(editor, isResizable);
        resizeWire.set(rawWire);
        if (_Options__WEBPACK_IMPORTED_MODULE_4__.hasTableObjectResizing(editor) && _Options__WEBPACK_IMPORTED_MODULE_4__.hasTableResizeBars(editor)) {
            const resizing = lazyResizingBehaviour();
            const sz = _ephox_snooker__WEBPACK_IMPORTED_MODULE_17__.TableResize.create(rawWire, resizing, lazySizing);
            if (!editor.mode.isReadOnly()) {
                sz.on();
            }
            sz.events.startDrag.bind((_event)=>{
                selectionRng.set(editor.selection.getRng());
            });
            sz.events.beforeResize.bind((event)=>{
                const rawTable = event.table.dom;
                _Events__WEBPACK_IMPORTED_MODULE_3__.fireObjectResizeStart(editor, rawTable, _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getPixelWidth(rawTable), _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getPixelHeight(rawTable), barResizerPrefix + event.type);
            });
            sz.events.afterResize.bind((event)=>{
                const table = event.table;
                const rawTable = table.dom;
                _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.removeDataStyle(table);
                selectionRng.on((rng)=>{
                    editor.selection.setRng(rng);
                    editor.focus();
                });
                _Events__WEBPACK_IMPORTED_MODULE_3__.fireObjectResized(editor, rawTable, _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getPixelWidth(rawTable), _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getPixelHeight(rawTable), barResizerPrefix + event.type);
                editor.undoManager.add();
            });
            tableResize.set(sz);
        }
    });
    // If we're updating the table width via the old mechanic, we need to update the constituent cells' widths/heights too.
    editor.on('ObjectResizeStart', (e)=>{
        const targetElm = e.target;
        if (isTable(targetElm) && !editor.mode.isReadOnly()) {
            const table = _ephox_sugar__WEBPACK_IMPORTED_MODULE_18__.SugarElement.fromDom(targetElm);
            // Add a class based on the resizing mode
            _ephox_katamari__WEBPACK_IMPORTED_MODULE_8__.each(editor.dom.select('.mce-clonedresizable'), (clone)=>{
                editor.dom.addClass(clone, 'mce-' + _Options__WEBPACK_IMPORTED_MODULE_4__.getTableColumnResizingBehaviour(editor) + '-columns');
            });
            if (!_ephox_snooker__WEBPACK_IMPORTED_MODULE_19__.isPixelSizing(table) && _Options__WEBPACK_IMPORTED_MODULE_4__.isTablePixelsForced(editor)) {
                _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.convertToPixelSizeWidth(table);
            } else if (!_ephox_snooker__WEBPACK_IMPORTED_MODULE_19__.isPercentSizing(table) && _Options__WEBPACK_IMPORTED_MODULE_4__.isTablePercentagesForced(editor)) {
                _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.convertToPercentSizeWidth(table);
            }
            // TINY-6601: If resizing using a bar, then snooker will base the resizing on the initial size. So
            // when using a responsive table we need to ensure we convert to a relative table before resizing
            if (_ephox_snooker__WEBPACK_IMPORTED_MODULE_19__.isNoneSizing(table) && _ephox_katamari__WEBPACK_IMPORTED_MODULE_11__.startsWith(e.origin, barResizerPrefix)) {
                _ephox_snooker__WEBPACK_IMPORTED_MODULE_15__.convertToPercentSizeWidth(table);
            }
            startW = e.width;
            startRawW = _Options__WEBPACK_IMPORTED_MODULE_4__.isTableResponsiveForced(editor) ? '' : _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getRawWidth(editor, targetElm).getOr('');
            startH = e.height;
            startRawH = _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.getRawHeight(editor, targetElm).getOr('');
        }
    });
    editor.on('ObjectResized', (e)=>{
        const targetElm = e.target;
        if (isTable(targetElm)) {
            const table = _ephox_sugar__WEBPACK_IMPORTED_MODULE_18__.SugarElement.fromDom(targetElm);
            // Resize based on the snooker logic to adjust the individual col/rows if resized from a corner
            const origin = e.origin;
            if (isCornerResize(origin)) {
                afterCornerResize(table, origin, e.width, e.height);
            }
            _core_TableUtils__WEBPACK_IMPORTED_MODULE_0__.removeDataStyle(table);
            _Events__WEBPACK_IMPORTED_MODULE_3__.fireTableModified(editor, table.dom, _Events__WEBPACK_IMPORTED_MODULE_3__.styleModified);
        }
    });
    const showResizeBars = ()=>{
        tableResize.on((resize)=>{
            resize.on();
            resize.showBars();
        });
    };
    const hideResizeBars = ()=>{
        tableResize.on((resize)=>{
            resize.off();
            resize.hideBars();
        });
    };
    editor.on('DisabledStateChange', (e)=>{
        e.state ? hideResizeBars() : showResizeBars();
    });
    editor.on('SwitchMode', ()=>{
        editor.mode.isReadOnly() ? hideResizeBars() : showResizeBars();
    });
    editor.on('dragstart dragend', (e)=>{
        e.type === 'dragstart' ? hideResizeBars() : showResizeBars();
    });
    editor.on('remove', ()=>{
        destroy();
    });
    const refresh = (table)=>{
        tableResize.on((resize)=>resize.refreshBars(_ephox_sugar__WEBPACK_IMPORTED_MODULE_18__.SugarElement.fromDom(table)));
    };
    const hide = ()=>{
        tableResize.on((resize)=>resize.hideBars());
    };
    const show = ()=>{
        tableResize.on((resize)=>resize.showBars());
    };
    return {
        refresh,
        hide,
        show
    };
};


}),
"./src/models/dom/main/ts/table/core/TableUtils.ts": 
/*!*********************************************************!*\
  !*** ./src/models/dom/main/ts/table/core/TableUtils.ts ***!
  \*********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getBody: () => (getBody),
  getIsRoot: () => (getIsRoot),
  getPixelHeight: () => (getPixelHeight),
  getPixelWidth: () => (getPixelWidth),
  getRawHeight: () => (getRawHeight),
  getRawWidth: () => (getRawWidth),
  getSelectionEnd: () => (getSelectionEnd),
  getSelectionStart: () => (getSelectionStart),
  isInEditableContext: () => (isInEditableContext),
  isPercentage: () => (isPercentage),
  isPixel: () => (isPixel),
  removeDataStyle: () => (removeDataStyle)
});
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Strings.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/dom/Compare.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/Attribute.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/PredicateFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/properties/ContentEditable.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - plugins/table/core/Utils.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 


const getBody = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.getBody());
const getIsRoot = (editor)=>(element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_1__.eq(element, getBody(editor));
const removeDataStyle = (table)=>{
    _ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.remove(table, 'data-mce-style');
    const removeStyleAttribute = (element)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_2__.remove(element, 'data-mce-style');
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(_ephox_snooker__WEBPACK_IMPORTED_MODULE_4__.cells(table), removeStyleAttribute);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(_ephox_snooker__WEBPACK_IMPORTED_MODULE_4__.columns(table), removeStyleAttribute);
    _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.each(_ephox_snooker__WEBPACK_IMPORTED_MODULE_4__.rows(table), removeStyleAttribute);
};
const getSelectionStart = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.selection.getStart());
const getSelectionEnd = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.selection.getEnd());
const getPixelWidth = (elm)=>elm.getBoundingClientRect().width;
const getPixelHeight = (elm)=>elm.getBoundingClientRect().height;
const getRawValue = (prop)=>(editor, elm)=>{
        const raw = editor.dom.getStyle(elm, prop) || editor.dom.getAttrib(elm, prop);
        return _ephox_katamari__WEBPACK_IMPORTED_MODULE_5__.Optional.from(raw).filter(_ephox_katamari__WEBPACK_IMPORTED_MODULE_6__.isNotEmpty);
    };
const getRawWidth = getRawValue('width');
const getRawHeight = getRawValue('height');
const isPercentage = (value)=>/^(\d+(\.\d+)?)%$/.test(value);
const isPixel = (value)=>/^(\d+(\.\d+)?)px$/.test(value);
const isInEditableContext = (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_7__.closest(cell, _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.isTag('table')).exists(_ephox_sugar__WEBPACK_IMPORTED_MODULE_9__.isEditable);



}),
"./src/models/dom/main/ts/table/core/TableWire.ts": 
/*!********************************************************!*\
  !*** ./src/models/dom/main/ts/table/core/TableWire.ts ***!
  \********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get)
});
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/ResizeWire.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElement.ts");


const get = (editor, isResizable)=>{
    const editorBody = _ephox_sugar__WEBPACK_IMPORTED_MODULE_0__.SugarElement.fromDom(editor.getBody());
    return _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.ResizeWire.body(editorBody, isResizable);
};



}),
"./src/models/dom/main/ts/table/queries/TableSize.ts": 
/*!***********************************************************!*\
  !*** ./src/models/dom/main/ts/table/queries/TableSize.ts ***!
  \***********************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  get: () => (get)
});
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableSize.ts");
/* ESM import */var _api_Options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/Options */ "./src/models/dom/main/ts/table/api/Options.ts");


const get = (editor, table)=>{
    // Note: We can't enforce none (responsive), as if someone manually resizes a table
    // then it must switch to either pixel (fixed) or percentage (relative) sizing
    if (_api_Options__WEBPACK_IMPORTED_MODULE_0__.isTablePercentagesForced(editor)) {
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.TableSize.percentageSize(table);
    } else if (_api_Options__WEBPACK_IMPORTED_MODULE_0__.isTablePixelsForced(editor)) {
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.TableSize.pixelSize(table);
    } else {
        // Detect based on the table width
        return _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.TableSize.getTableSize(table);
    }
};


}),
"./src/models/dom/main/ts/table/queries/TableTargets.ts": 
/*!**************************************************************!*\
  !*** ./src/models/dom/main/ts/table/queries/TableTargets.ts ***!
  \**************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  forMenu: () => (forMenu),
  noMenu: () => (noMenu),
  paste: () => (paste),
  pasteRows: () => (pasteRows)
});
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/queries/CellOpSelection.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Optional.ts");
/* ESM import */var _selection_Ephemera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../selection/Ephemera */ "./src/models/dom/main/ts/table/selection/Ephemera.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - plugins/table/queries/TableTargets.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 


const noMenu = (cell)=>({
        element: cell,
        mergable: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none(),
        unmergable: _ephox_katamari__WEBPACK_IMPORTED_MODULE_1__.Optional.none(),
        selection: [
            cell
        ]
    });
const forMenu = (selectedCells, table, cell)=>({
        element: cell,
        mergable: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.mergable(table, selectedCells, _selection_Ephemera__WEBPACK_IMPORTED_MODULE_0__.ephemera),
        unmergable: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.unmergable(selectedCells),
        selection: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.selection(selectedCells)
    });
const paste = (element, clipboard, generators)=>({
        element,
        clipboard,
        generators
    });
const pasteRows = (selectedCells, _cell, clipboard, generators)=>({
        selection: _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.selection(selectedCells),
        clipboard,
        generators
    });



}),
"./src/models/dom/main/ts/table/selection/Ephemera.ts": 
/*!************************************************************!*\
  !*** ./src/models/dom/main/ts/table/selection/Ephemera.ts ***!
  \************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  attributeSelector: () => (attributeSelector),
  ephemera: () => (ephemera)
});
/*
 NOTE: This file is duplicated in the following locations:
  - plugins/table/selection/Ephemera.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ const strSelected = 'data-mce-selected';
const strSelectedSelector = 'td[' + strSelected + '],th[' + strSelected + ']';
// used with not selectors
const strAttributeSelector = '[' + strSelected + ']';
const strFirstSelected = 'data-mce-first-selected';
const strFirstSelectedSelector = 'td[' + strFirstSelected + '],th[' + strFirstSelected + ']';
const strLastSelected = 'data-mce-last-selected';
const strLastSelectedSelector = 'td[' + strLastSelected + '],th[' + strLastSelected + ']';
const attributeSelector = strAttributeSelector;
const ephemera = {
    selected: strSelected,
    selectedSelector: strSelectedSelector,
    firstSelected: strFirstSelected,
    firstSelectedSelector: strFirstSelectedSelector,
    lastSelected: strLastSelected,
    lastSelectedSelector: strLastSelectedSelector
};


}),
"./src/models/dom/main/ts/table/selection/TableSelection.ts": 
/*!******************************************************************!*\
  !*** ./src/models/dom/main/ts/table/selection/TableSelection.ts ***!
  \******************************************************************/
(function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  getCellsFromFakeSelection: () => (getCellsFromFakeSelection),
  getCellsFromSelection: () => (getCellsFromSelection),
  getSelectionCell: () => (getSelectionCell),
  getSelectionCellOrCaption: () => (getSelectionCellOrCaption)
});
/* ESM import */var _ephox_darwin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ephox/darwin */ "../darwin/src/main/ts/ephox/darwin/api/TableSelection.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Fun.ts");
/* ESM import */var _ephox_katamari__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ephox/katamari */ "../katamari/src/main/ts/ephox/katamari/api/Arr.ts");
/* ESM import */var _ephox_snooker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ephox/snooker */ "../snooker/src/main/ts/ephox/snooker/api/TableLookup.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarNode.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/SelectorFind.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/node/SugarElements.ts");
/* ESM import */var _ephox_sugar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ephox/sugar */ "../sugar/src/main/ts/ephox/sugar/api/search/Selectors.ts");
/* ESM import */var _Ephemera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ephemera */ "./src/models/dom/main/ts/table/selection/Ephemera.ts");
/*
 NOTE: This file is partially duplicated in the following locations:
  - plugins/table/selection/TableSelection.ts
  - advtable
 Make sure that if making changes to this file, the other files are updated as well
 */ 




const getSelectionCellFallback = (element)=>_ephox_snooker__WEBPACK_IMPORTED_MODULE_1__.table(element).bind((table)=>_ephox_darwin__WEBPACK_IMPORTED_MODULE_2__.retrieve(table, _Ephemera__WEBPACK_IMPORTED_MODULE_0__.ephemera.firstSelectedSelector)).fold(_ephox_katamari__WEBPACK_IMPORTED_MODULE_3__.constant(element), (cells)=>cells[0]);
const getSelectionFromSelector = (selector)=>(initCell, isRoot)=>{
        const cellName = _ephox_sugar__WEBPACK_IMPORTED_MODULE_4__.name(initCell);
        const cell = cellName === 'col' || cellName === 'colgroup' ? getSelectionCellFallback(initCell) : initCell;
        return _ephox_sugar__WEBPACK_IMPORTED_MODULE_5__.closest(cell, selector, isRoot);
    };
const getSelectionCellOrCaption = getSelectionFromSelector('th,td,caption');
const getSelectionCell = getSelectionFromSelector('th,td');
// Note: Includes single cell if the start of the selection whether collapsed or ranged is within a table cell
const getCellsFromSelection = (editor)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_6__.fromDom(editor.model.table.getSelectedCells());
const getCellsFromFakeSelection = (editor)=>_ephox_katamari__WEBPACK_IMPORTED_MODULE_7__.filter(getCellsFromSelection(editor), (cell)=>_ephox_sugar__WEBPACK_IMPORTED_MODULE_8__.is(cell, _Ephemera__WEBPACK_IMPORTED_MODULE_0__.ephemera.selectedSelector));



}),
"../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js": 
/*!***************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/api/Eq.js ***!
  \***************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  contramap: () => (contramap),
  eq: () => (eq),
  eqAny: () => (eqAny),
  eqArray: () => (eqArray),
  eqBoolean: () => (eqBoolean),
  eqNull: () => (eqNull),
  eqNumber: () => (eqNumber),
  eqRecord: () => (eqRecord),
  eqString: () => (eqString),
  eqUndefined: () => (eqUndefined),
  tripleEq: () => (tripleEq)
});
/* ESM import */var _core_Type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Type */ "../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js");
/* ESM import */var _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/ArrayUtil */ "../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js");


var contramap = function (eqa, f) {
    return eq(function (x, y) { return eqa.eq(f(x), f(y)); });
};
var eq = function (f) {
    return ({ eq: f });
};
var tripleEq = eq(function (x, y) { return x === y; });
var eqString = tripleEq;
var eqBoolean = tripleEq;
var eqNumber = tripleEq;
var eqUndefined = tripleEq;
var eqNull = tripleEq;
var eqArray = function (eqa) { return eq(function (x, y) {
    if (x.length !== y.length) {
        return false;
    }
    var len = x.length;
    for (var i = 0; i < len; i++) {
        if (!eqa.eq(x[i], y[i])) {
            return false;
        }
    }
    return true;
}); };
// TODO: Make an Ord typeclass
var eqSortedArray = function (eqa, compareFn) {
    return contramap(eqArray(eqa), function (xs) { return _core_ArrayUtil__WEBPACK_IMPORTED_MODULE_0__.sort(xs, compareFn); });
};
var eqRecord = function (eqa) { return eq(function (x, y) {
    var kx = Object.keys(x);
    var ky = Object.keys(y);
    if (!eqSortedArray(eqString).eq(kx, ky)) {
        return false;
    }
    var len = kx.length;
    for (var i = 0; i < len; i++) {
        var q = kx[i];
        if (!eqa.eq(x[q], y[q])) {
            return false;
        }
    }
    return true;
}); };
var eqAny = eq(function (x, y) {
    if (x === y) {
        return true;
    }
    var tx = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(x);
    var ty = _core_Type__WEBPACK_IMPORTED_MODULE_1__.typeOf(y);
    if (tx !== ty) {
        return false;
    }
    if (_core_Type__WEBPACK_IMPORTED_MODULE_1__.isEquatableType(tx)) {
        return x === y;
    }
    else if (tx === 'array') {
        return eqArray(eqAny).eq(x, y);
    }
    else if (tx === 'object') {
        return eqRecord(eqAny).eq(x, y);
    }
    return false;
});


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js": 
/*!***********************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/ArrayUtil.js ***!
  \***********************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  map: () => (map),
  mapDelimit: () => (mapDelimit),
  sort: () => (sort)
});
var map = function (xs, f) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len; i++) {
        var x = xs[i];
        r[i] = f(x);
    }
    return r;
};
/** map a function over an array, then map another function over every item except the last */
var mapDelimit = function (xs, f, delimit) {
    var len = xs.length;
    var r = new Array(len);
    for (var i = 0; i < len - 1; i++) {
        var x = xs[i];
        r[i] = delimit(f(x));
    }
    if (len > 0) {
        r[len - 1] = (f(xs[len - 1]));
    }
    return r;
};
var sort = function (xs, compareFn) {
    var clone = Array.prototype.slice.call(xs);
    return clone.sort(compareFn);
};


}),
"../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js": 
/*!******************************************************************!*\
  !*** ../../node_modules/@ephox/dispute/lib/main/ts/core/Type.js ***!
  \******************************************************************/
(function (__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  isArray: () => (isArray),
  isBoolean: () => (isBoolean),
  isEquatableType: () => (isEquatableType),
  isFunction: () => (isFunction),
  isNull: () => (isNull),
  isNumber: () => (isNumber),
  isObject: () => (isObject),
  isString: () => (isString),
  isUndefined: () => (isUndefined),
  typeOf: () => (typeOf)
});
var typeOf = function (x) {
    if (x === null) {
        return 'null';
    }
    if (x === undefined) {
        return 'undefined';
    }
    var t = typeof x;
    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {
        return 'array';
    }
    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {
        return 'string';
    }
    return t;
};
var isType = function (type) { return function (value) { return typeOf(value) === type; }; };
var isString = isType('string');
var isObject = isType('object');
var isArray = isType('array');
var isNull = isType('null');
var isBoolean = isType('boolean');
var isUndefined = isType('undefined');
var isFunction = isType('function');
var isNumber = isType('number');
var isEquatableType = function (x) {
    return ['undefined', 'boolean', 'number', 'string', 'function', 'xml', 'null'].indexOf(x) !== -1;
};


}),

});
/************************************************************************/
// The module cache
var __webpack_module_cache__ = {};

// The require function
function __webpack_require__(moduleId) {

// Check if module is in cache
var cachedModule = __webpack_module_cache__[moduleId];
if (cachedModule !== undefined) {
return cachedModule.exports;
}
// Create a new module (and put it into the cache)
var module = (__webpack_module_cache__[moduleId] = {
exports: {}
});
// Execute the module function
__webpack_modules__[moduleId](module, module.exports, __webpack_require__);

// Return the exports of the module
return module.exports;

}

/************************************************************************/
// webpack/runtime/define_property_getters
(() => {
__webpack_require__.d = (exports, definition) => {
	for(var key in definition) {
        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
        }
    }
};
})();
// webpack/runtime/has_own_property
(() => {
__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
})();
// webpack/runtime/make_namespace_object
(() => {
// define __esModule on exports
__webpack_require__.r = (exports) => {
	if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
		Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
	}
	Object.defineProperty(exports, '__esModule', { value: true });
};
})();
// webpack/runtime/rspack_version
(() => {
__webpack_require__.rv = () => ("1.5.2")
})();
// webpack/runtime/rspack_unique_id
(() => {
__webpack_require__.ruid = "bundler=rspack@1.5.2";

})();
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.
(() => {

/*!****************************************!*\
  !*** ./src/models/dom/main/ts/Main.ts ***!
  \****************************************/
__webpack_require__.r(__webpack_exports__);
/* ESM import */var _Model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Model */ "./src/models/dom/main/ts/Model.ts");

(0,_Model__WEBPACK_IMPORTED_MODULE_0__["default"])(); /** *****
 * DO NOT EXPORT ANYTHING
 *
 * IF YOU DO ROLLUP WILL LEAVE A GLOBAL ON THE PAGE
 *******/ 

})();

})()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvdGlueW1jZS9tb2RlbHMvZG9tL21vZGVsLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGlueW1jZS8uL2xpYi9nbG9iYWxzL3RpbnltY2UvY29yZS9hcGkvRmFrZUNsaXBib2FyZC5qcyIsIndlYnBhY2s6Ly90aW55bWNlLy4vbGliL2dsb2JhbHMvdGlueW1jZS9jb3JlL2FwaS9Nb2RlbE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9ib3NzL3NyYy9tYWluL3RzL2VwaG94L2Jvc3MvYXBpL0RvbVVuaXZlcnNlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vYm9zcy9zcmMvbWFpbi90cy9lcGhveC9ib3NzL2NvbW1vbi9UYWdCb3VuZGFyaWVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9hcGkvSW5wdXRIYW5kbGVycy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4vYXBpL1NlbGVjdGlvbkFubm90YXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL2FwaS9TZWxlY3Rpb25LZXlzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9hcGkvU2VsZWN0aW9uVHlwZXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL2FwaS9UYWJsZVNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4vYXBpL1dpbmRvd0JyaWRnZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4va2V5Ym9hcmQvQ2FyZXRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9rZXlib2FyZC9LZXlTZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL2tleWJvYXJkL1JlY3RhbmdsZXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL2tleWJvYXJkL1JldHJpZXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL2tleWJvYXJkL1RhYmxlS2V5cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4va2V5Ym9hcmQvVmVydGljYWxNb3ZlbWVudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4vbW91c2UvTW91c2VTZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL25hdmlnYXRpb24vQmVmb3JlQWZ0ZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL25hdmlnYXRpb24vQnJUYWdzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9uYXZpZ2F0aW9uL0tleURpcmVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2Rhcndpbi9zcmMvbWFpbi90cy9lcGhveC9kYXJ3aW4vcXVlcmllcy9DZWxsT3BTZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL3NlbGVjdGlvbi9DZWxsU2VsZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9zZWxlY3Rpb24vUmVzcG9uc2UudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL3NlbGVjdGlvbi9TZWxlY3Rpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZGFyd2luL3NyYy9tYWluL3RzL2VwaG94L2Rhcndpbi9zZWxlY3Rpb24vU2l0dXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kYXJ3aW4vc3JjL21haW4vdHMvZXBob3gvZGFyd2luL3NlbGVjdGlvbi9VdGlsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZHJhZ3N0ZXIvc3JjL21haW4vdHMvZXBob3gvZHJhZ3N0ZXIvYXBpL0RyYWdBcGlzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZHJhZ3N0ZXIvc3JjL21haW4vdHMvZXBob3gvZHJhZ3N0ZXIvYXBpL0RyYWdnZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kcmFnc3Rlci9zcmMvbWFpbi90cy9lcGhveC9kcmFnc3Rlci9hcGkvTW91c2VEcmFnLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZHJhZ3N0ZXIvc3JjL21haW4vdHMvZXBob3gvZHJhZ3N0ZXIvY29yZS9EcmFnZ2luZy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2RyYWdzdGVyL3NyYy9tYWluL3RzL2VwaG94L2RyYWdzdGVyL2RldGVjdC9CbG9ja2VyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vZHJhZ3N0ZXIvc3JjL21haW4vdHMvZXBob3gvZHJhZ3N0ZXIvZGV0ZWN0L0luRHJhZy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2RyYWdzdGVyL3NyYy9tYWluL3RzL2VwaG94L2RyYWdzdGVyL2RldGVjdC9Nb3ZlbWVudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2RyYWdzdGVyL3NyYy9tYWluL3RzL2VwaG94L2RyYWdzdGVyL2RldGVjdC9Ob0RyYWcudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9kcmFnc3Rlci9zcmMvbWFpbi90cy9lcGhveC9kcmFnc3Rlci9zdHlsZS9TdHlsZXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvQWR0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL0Fyci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9DZWxsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL0NvbnRyYWN0cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9GdW4udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvR2xvYmFsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL05hbWVzcGFjZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9PYmoudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvT3B0aW9uYWwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvT3B0aW9uYWxzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1Jlc29sdmUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9hcGkvUmVzdWx0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1NpbmdsZXRvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9TdHJpbmdzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1Rocm90dGxlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9UaHVuay50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL2thdGFtYXJpL3NyYy9tYWluL3RzL2VwaG94L2thdGFtYXJpL2FwaS9UeXBlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvYXBpL1VuaWNvZGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9rYXRhbWFyaS9zcmMvbWFpbi90cy9lcGhveC9rYXRhbWFyaS9zdHIvU3RyQXBwZW5kLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4va2F0YW1hcmkvc3JjL21haW4vdHMvZXBob3gva2F0YW1hcmkvdXRpbC9CYWdVdGlscy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Bob2VuaXgvc3JjL21haW4vdHMvZXBob3gvcGhvZW5peC9hcGkvZGF0YS9TcG90LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcGhvZW5peC9zcmMvbWFpbi90cy9lcGhveC9waG9lbml4L2FwaS9kb20vRG9tRGVzY2VudC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Bob2VuaXgvc3JjL21haW4vdHMvZXBob3gvcGhvZW5peC9hcGkvZG9tL0RvbUdhdGhlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Bob2VuaXgvc3JjL21haW4vdHMvZXBob3gvcGhvZW5peC9hcGkvZ2VuZXJhbC9EZXNjZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcGhvZW5peC9zcmMvbWFpbi90cy9lcGhveC9waG9lbml4L2FwaS9nZW5lcmFsL0dhdGhlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Bob2VuaXgvc3JjL21haW4vdHMvZXBob3gvcGhvZW5peC9nYXRoZXIvU2Vla2VyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcGhvZW5peC9zcmMvbWFpbi90cy9lcGhveC9waG9lbml4L2dhdGhlci9XYWxrZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9waG9lbml4L3NyYy9tYWluL3RzL2VwaG94L3Bob2VuaXgvZ2F0aGVyL1dhbGtlcnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9waG9lbml4L3NyYy9tYWluL3RzL2VwaG94L3Bob2VuaXgvd3JhcC9OYXZpZ2F0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcG9ya2J1bi9zcmMvbWFpbi90cy9lcGhveC9wb3JrYnVuL0V2ZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcG9ya2J1bi9zcmMvbWFpbi90cy9lcGhveC9wb3JrYnVuL0V2ZW50cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3JvYmluL3NyYy9tYWluL3RzL2VwaG94L3JvYmluL2FwaS9kb20vRG9tUGFyZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vcm9iaW4vc3JjL21haW4vdHMvZXBob3gvcm9iaW4vYXBpL2RvbS9Eb21TdHJ1Y3R1cmUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9hcGkvZ2VuZXJhbC9QYXJlbnQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9hcGkvZ2VuZXJhbC9TdHJ1Y3R1cmUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9wYXJlbnQvQnJlYWtlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3JvYmluL3NyYy9tYWluL3RzL2VwaG94L3JvYmluL3BhcmVudC9TaGFyZWQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9yb2Jpbi9zcmMvbWFpbi90cy9lcGhveC9yb2Jpbi9wYXJlbnQvU3Vic2V0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2FwaS9QbGF0Zm9ybURldGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9hcGkvU2FuZEhUTUxFbGVtZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2NvcmUvQnJvd3Nlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9jb3JlL09wZXJhdGluZ1N5c3RlbS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3NhbmQvc3JjL21haW4vdHMvZXBob3gvc2FuZC9jb3JlL1BsYXRmb3JtRGV0ZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2RldGVjdC9EZXZpY2VUeXBlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2RldGVjdC9VYURhdGEudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zYW5kL3NyYy9tYWluL3RzL2VwaG94L3NhbmQvZGV0ZWN0L1VhU3RyaW5nLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2RldGVjdC9WZXJzaW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL2luZm8vUGxhdGZvcm1JbmZvLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc2FuZC9zcmMvbWFpbi90cy9lcGhveC9zYW5kL3V0aWwvR2xvYmFsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9DZWxsTXV0YXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9Db3B5Q29scy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvQ29weVJvd3MudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL0NvcHlTZWxlY3RlZC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvR2VuZXJhdG9ycy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvT3RoZXJDZWxscy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvUmVzaXplQmVoYXZpb3VyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9SZXNpemVXaXJlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9TaXplcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvU3RydWN0cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvVGFibGVDb250ZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZUNvbnZlcnNpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZUZpbGwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlR3JpZFNpemUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlTG9va3VwLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZU9wZXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1RhYmxlUG9zaXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZVJlc2l6ZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9hcGkvVGFibGVTZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL2FwaS9UYWJsZVNpemUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvYXBpL1dhcmVob3VzZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9jYWxjL0NvbHVtbkNvbnRleHQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvY2FsYy9EZWx0YXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvbG9va3VwL0Jsb2Nrcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9sb29rdXAvVHlwZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9tb2RlbC9EZXRhaWxzTGlzdC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9tb2RlbC9GaXRtZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL0dyaWRSb3cudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvbW9kZWwvUnVuT3BlcmF0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL1RhYmxlR3JpZC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9tb2RlbC9UYWJsZU1lcmdlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL21vZGVsL1RyYW5zaXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL29wZXJhdGUvTWVyZ2luZ09wZXJhdGlvbnMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvb3BlcmF0ZS9Nb2RpZmljYXRpb25PcGVyYXRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL29wZXJhdGUvUmVkcmF3LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL29wZXJhdGUvUmVuZGVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL29wZXJhdGUvVHJhbnNmb3JtT3BlcmF0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQWRqdXN0bWVudHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL0Jhci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQmFyTWFuYWdlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQmFyTXV0YXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL0JhclBvc2l0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQmFycy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvQ29sdW1uU2l6ZXMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL011dGF0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3Jlc2l6ZS9SZWNhbGN1bGF0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3Nub29rZXIvc3JjL21haW4vdHMvZXBob3gvc25vb2tlci9yZXNpemUvUmVkaXN0cmlidXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL1NpemUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvcmVzaXplL1NpemVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsQm91bmRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsRmluZGVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3NlbGVjdGlvbi9DZWxsR3JvdXAudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvc3R5bGUvU3R5bGVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3V0aWwvQ2VsbFV0aWxzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3V0aWwvQ29sVXRpbHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvdXRpbC9MYXllclNlbGVjdG9yLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc25vb2tlci9zcmMvbWFpbi90cy9lcGhveC9zbm9va2VyL3V0aWwvTG9ja2VkQ29sdW1uVXRpbHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zbm9va2VyL3NyYy9tYWluL3RzL2VwaG94L3Nub29rZXIvdXRpbC9VdGlsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYWxpZW4vUmVjdXJzZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9kb20vQ29tcGFyZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9kb20vRG9jdW1lbnRQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9kb20vSW5zZXJ0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL2RvbS9JbnNlcnRBbGwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvZG9tL1JlbW92ZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9kb20vUmVwbGljYXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvZXZlbnRzL0RvbUV2ZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL25vZGUvTm9kZVR5cGVzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL25vZGUvU3VnYXJCb2R5LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL25vZGUvU3VnYXJFbGVtZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL25vZGUvU3VnYXJFbGVtZW50cy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyRnJhZ21lbnQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhckhlYWQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhck5vZGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvbm9kZS9TdWdhclNoYWRvd0RvbS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9ub2RlL1N1Z2FyVGV4dC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL0F0dHJMaXN0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvQXR0cmlidXRlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvQ2xhc3MudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvcHJvcGVydGllcy9DbGFzc2VzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvQ29udGVudEVkaXRhYmxlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvQ3NzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvRGlyZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3Byb3BlcnRpZXMvSHRtbC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL09uTm9kZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9wcm9wZXJ0aWVzL1RvZ2dsZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvc2VhcmNoL0VsZW1lbnRBZGRyZXNzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlYXJjaC9QcmVkaWNhdGVFeGlzdHMudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvc2VhcmNoL1ByZWRpY2F0ZUZpbHRlci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvUHJlZGljYXRlRmluZC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvU2VsZWN0b3JGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvc2VhcmNoL1NlbGVjdG9yRmluZC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWFyY2gvU2VsZWN0b3JzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlYXJjaC9UcmF2ZXJzZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWxlY3Rpb24vQXdhcmVuZXNzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3NlbGVjdGlvbi9DdXJzb3JQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWxlY3Rpb24vU2ltUmFuZ2UudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvc2VsZWN0aW9uL1NpbVNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWxlY3Rpb24vU2l0dS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS9zZWxlY3Rpb24vV2luZG93U2VsZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3ZpZXcvRGltZW5zaW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3ZpZXcvSGVpZ2h0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3ZpZXcvU2Nyb2xsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvYXBpL3ZpZXcvU3VnYXJMb2NhdGlvbi50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2FwaS92aWV3L1N1Z2FyUG9zaXRpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9hcGkvdmlldy9XaWR0aC50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2ltcGwvQ2xhc3NMaXN0LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvaW1wbC9DbG9zZXN0T3JBbmNlc3Rvci50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL2ltcGwvRGltZW5zaW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvaW1wbC9GaWx0ZXJlZEV2ZW50LnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvaW1wbC9Ob2RlVmFsdWUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9pbXBsL1J1bnRpbWVTaXplLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvaW1wbC9TdHlsZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4uL3N1Z2FyL3NyYy9tYWluL3RzL2VwaG94L3N1Z2FyL3NlbGVjdGlvbi9jb3JlL05hdGl2ZVJhbmdlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvc2VsZWN0aW9uL2NvcmUvU2VsZWN0aW9uRGlyZWN0aW9uLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvc2VsZWN0aW9uL3F1ZXJ5L0NhcmV0UmFuZ2UudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi9zdWdhci9zcmMvbWFpbi90cy9lcGhveC9zdWdhci9zZWxlY3Rpb24vcXVlcnkvV2l0aGluLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vc3VnYXIvc3JjL21haW4vdHMvZXBob3gvc3VnYXIvc2VsZWN0aW9uL3F1aXJrcy9QcmVmaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9tb2RlbHMvZG9tL21haW4vdHMvTW9kZWwudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9tb2RlbHMvZG9tL21haW4vdHMvdGFibGUvVGFibGUudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9tb2RlbHMvZG9tL21haW4vdHMvdGFibGUvYWN0aW9ucy9DbGlwYm9hcmQudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9tb2RlbHMvZG9tL21haW4vdHMvdGFibGUvYWN0aW9ucy9JbnNlcnRUYWJsZS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL21vZGVscy9kb20vbWFpbi90cy90YWJsZS9hY3Rpb25zL1RhYmxlQWN0aW9ucy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL21vZGVscy9kb20vbWFpbi90cy90YWJsZS9hcGkvQ2xpcGJvYXJkLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2FwaS9Db21tYW5kcy50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL21vZGVscy9kb20vbWFpbi90cy90YWJsZS9hcGkvRXZlbnRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2FwaS9PcHRpb25zLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2FwaS9RdWVyeUNvbW1hbmRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2FwaS9UYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2FwaS9UYWJsZVJlc2l6ZUhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uL3NyYy9tb2RlbHMvZG9tL21haW4vdHMvdGFibGUvY29yZS9UYWJsZVV0aWxzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL2NvcmUvVGFibGVXaXJlLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL3F1ZXJpZXMvVGFibGVTaXplLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL3F1ZXJpZXMvVGFibGVUYXJnZXRzLnRzIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL3RhYmxlL3NlbGVjdGlvbi9FcGhlbWVyYS50cyIsIndlYnBhY2s6Ly90aW55bWNlLy4vc3JjL21vZGVscy9kb20vbWFpbi90cy90YWJsZS9zZWxlY3Rpb24vVGFibGVTZWxlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vdGlueW1jZS8uLi8uLi9ub2RlX21vZHVsZXMvQGVwaG94L2Rpc3B1dGUvc3JjL21haW4vdHMvYXBpL0VxLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vLi4vbm9kZV9tb2R1bGVzL0BlcGhveC9kaXNwdXRlL3NyYy9tYWluL3RzL2NvcmUvQXJyYXlVdGlsLnRzIiwid2VicGFjazovL3RpbnltY2UvLi4vLi4vbm9kZV9tb2R1bGVzL0BlcGhveC9kaXNwdXRlL3NyYy9tYWluL3RzL2NvcmUvVHlwZS50cyIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9kZWZpbmVfcHJvcGVydHlfZ2V0dGVycyIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9oYXNfb3duX3Byb3BlcnR5Iiwid2VicGFjazovL3RpbnltY2Uvd2VicGFjay9ydW50aW1lL21ha2VfbmFtZXNwYWNlX29iamVjdCIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9yc3BhY2tfdmVyc2lvbiIsIndlYnBhY2s6Ly90aW55bWNlL3dlYnBhY2svcnVudGltZS9yc3BhY2tfdW5pcXVlX2lkIiwid2VicGFjazovL3RpbnltY2UvLi9zcmMvbW9kZWxzL2RvbS9tYWluL3RzL01haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGdsb2JhbCA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCd0aW55bWNlLkZha2VDbGlwYm9hcmQnKTtcblxuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsO1xuZXhwb3J0IHZhciBGYWtlQ2xpcGJvYXJkID0gZ2xvYmFsO1xuIiwidmFyIGdsb2JhbCA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCd0aW55bWNlLk1vZGVsTWFuYWdlcicpO1xuXG5leHBvcnQgZGVmYXVsdCBnbG9iYWw7XG5leHBvcnQgdmFyIE1vZGVsTWFuYWdlciA9IGdsb2JhbDtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQge1xuICBBdHRyaWJ1dGUsIENvbXBhcmUsIENzcywgSW5zZXJ0LCBJbnNlcnRBbGwsIFByZWRpY2F0ZUZpbHRlciwgUHJlZGljYXRlRmluZCwgUmVtb3ZlLCBTZWxlY3RvckZpbHRlciwgU2VsZWN0b3JGaW5kLCBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSxcbiAgU3VnYXJUZXh0LCBUcmF2ZXJzZVxufSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgVGFnQm91bmRhcmllcyBmcm9tICcuLi9jb21tb24vVGFnQm91bmRhcmllcyc7XG5cbmltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICcuL1VuaXZlcnNlJztcblxuZXhwb3J0IGRlZmF1bHQgKCk6IFVuaXZlcnNlPFN1Z2FyRWxlbWVudCwgRG9jdW1lbnQ+ID0+IHtcbiAgY29uc3QgY2xvbmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgcmV0dXJuIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsZW1lbnQuZG9tLmNsb25lTm9kZShmYWxzZSkpO1xuICB9O1xuXG4gIGNvbnN0IGRvY3VtZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGVsZW1lbnQpLmRvbTtcblxuICBjb25zdCBpc0JvdW5kYXJ5ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCkgPT4ge1xuICAgIGlmICghU3VnYXJOb2RlLmlzRWxlbWVudChlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkgPT09ICdib2R5Jykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBBcnIuY29udGFpbnMoVGFnQm91bmRhcmllcywgU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkpO1xuICB9O1xuXG4gIGNvbnN0IGlzRW1wdHlUYWcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFTdWdhck5vZGUuaXNFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBBcnIuY29udGFpbnMoWyAnYnInLCAnaW1nJywgJ2hyJywgJ2lucHV0JyBdLCBTdWdhck5vZGUubmFtZShlbGVtZW50KSk7XG4gIH07XG5cbiAgY29uc3QgaXNOb25FZGl0YWJsZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpID0+IFN1Z2FyTm9kZS5pc0VsZW1lbnQoZWxlbWVudCkgJiYgQXR0cmlidXRlLmdldChlbGVtZW50LCAnY29udGVudGVkaXRhYmxlJykgPT09ICdmYWxzZSc7XG5cbiAgY29uc3QgY29tcGFyZVBvc2l0aW9uID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb3RoZXI6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LmRvbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihvdGhlci5kb20pO1xuICB9O1xuXG4gIGNvbnN0IGNvcHlBdHRyaWJ1dGVzVG8gPSAoc291cmNlOiBTdWdhckVsZW1lbnQsIGRlc3RpbmF0aW9uOiBTdWdhckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBhcyA9IEF0dHJpYnV0ZS5jbG9uZShzb3VyY2UpO1xuICAgIEF0dHJpYnV0ZS5zZXRBbGwoZGVzdGluYXRpb24sIGFzKTtcbiAgfTtcblxuICBjb25zdCBpc1NwZWNpYWwgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgY29uc3QgdGFnID0gU3VnYXJOb2RlLm5hbWUoZWxlbWVudCk7XG4gICAgcmV0dXJuIEFyci5jb250YWlucyhbXG4gICAgICAnc2NyaXB0JywgJ25vc2NyaXB0JywgJ2lmcmFtZScsICdub2ZyYW1lcycsICdub2VtYmVkJywgJ3RpdGxlJywgJ3N0eWxlJywgJ3RleHRhcmVhJywgJ3htcCdcbiAgICBdLCB0YWcpO1xuICB9O1xuXG4gIGNvbnN0IGdldExhbmd1YWdlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgICBTdWdhck5vZGUuaXNFbGVtZW50KGVsZW1lbnQpID8gQXR0cmlidXRlLmdldE9wdChlbGVtZW50LCAnbGFuZycpIDogT3B0aW9uYWwubm9uZSgpO1xuXG4gIHJldHVybiB7XG4gICAgdXA6IEZ1bi5jb25zdGFudCh7XG4gICAgICBzZWxlY3RvcjogU2VsZWN0b3JGaW5kLmFuY2VzdG9yLFxuICAgICAgY2xvc2VzdDogU2VsZWN0b3JGaW5kLmNsb3Nlc3QsXG4gICAgICBwcmVkaWNhdGU6IFByZWRpY2F0ZUZpbmQuYW5jZXN0b3IsXG4gICAgICBhbGw6IFRyYXZlcnNlLnBhcmVudHNcbiAgICB9KSxcbiAgICBkb3duOiBGdW4uY29uc3RhbnQoe1xuICAgICAgc2VsZWN0b3I6IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzLFxuICAgICAgcHJlZGljYXRlOiBQcmVkaWNhdGVGaWx0ZXIuZGVzY2VuZGFudHNcbiAgICB9KSxcbiAgICBzdHlsZXM6IEZ1bi5jb25zdGFudCh7XG4gICAgICBnZXQ6IENzcy5nZXQsXG4gICAgICBnZXRSYXc6IENzcy5nZXRSYXcsXG4gICAgICBzZXQ6IENzcy5zZXQsXG4gICAgICByZW1vdmU6IENzcy5yZW1vdmVcbiAgICB9KSxcbiAgICBhdHRyczogRnVuLmNvbnN0YW50KHtcbiAgICAgIGdldDogQXR0cmlidXRlLmdldCxcbiAgICAgIHNldDogQXR0cmlidXRlLnNldCxcbiAgICAgIHJlbW92ZTogQXR0cmlidXRlLnJlbW92ZSxcbiAgICAgIGNvcHlUbzogY29weUF0dHJpYnV0ZXNUb1xuICAgIH0pLFxuICAgIGluc2VydDogRnVuLmNvbnN0YW50KHtcbiAgICAgIGJlZm9yZTogSW5zZXJ0LmJlZm9yZSxcbiAgICAgIGFmdGVyOiBJbnNlcnQuYWZ0ZXIsXG4gICAgICBhZnRlckFsbDogSW5zZXJ0QWxsLmFmdGVyLFxuICAgICAgYXBwZW5kOiBJbnNlcnQuYXBwZW5kLFxuICAgICAgYXBwZW5kQWxsOiBJbnNlcnRBbGwuYXBwZW5kLFxuICAgICAgcHJlcGVuZDogSW5zZXJ0LnByZXBlbmQsXG4gICAgICB3cmFwOiBJbnNlcnQud3JhcFxuICAgIH0pLFxuICAgIHJlbW92ZTogRnVuLmNvbnN0YW50KHtcbiAgICAgIHVud3JhcDogUmVtb3ZlLnVud3JhcCxcbiAgICAgIHJlbW92ZTogUmVtb3ZlLnJlbW92ZVxuICAgIH0pLFxuICAgIGNyZWF0ZTogRnVuLmNvbnN0YW50KHtcbiAgICAgIG51OiBTdWdhckVsZW1lbnQuZnJvbVRhZyxcbiAgICAgIGNsb25lLFxuICAgICAgdGV4dDogU3VnYXJFbGVtZW50LmZyb21UZXh0XG4gICAgfSksXG4gICAgcXVlcnk6IEZ1bi5jb25zdGFudCh7XG4gICAgICBjb21wYXJlUG9zaXRpb24sXG4gICAgICBwcmV2U2libGluZzogVHJhdmVyc2UucHJldlNpYmxpbmcsXG4gICAgICBuZXh0U2libGluZzogVHJhdmVyc2UubmV4dFNpYmxpbmdcbiAgICB9KSxcbiAgICBwcm9wZXJ0eTogRnVuLmNvbnN0YW50KHtcbiAgICAgIGNoaWxkcmVuOiBUcmF2ZXJzZS5jaGlsZHJlbixcbiAgICAgIG5hbWU6IFN1Z2FyTm9kZS5uYW1lLFxuICAgICAgcGFyZW50OiBUcmF2ZXJzZS5wYXJlbnQsXG4gICAgICBkb2N1bWVudCxcbiAgICAgIGlzVGV4dDogU3VnYXJOb2RlLmlzVGV4dCxcbiAgICAgIGlzQ29tbWVudDogU3VnYXJOb2RlLmlzQ29tbWVudCxcbiAgICAgIGlzRWxlbWVudDogU3VnYXJOb2RlLmlzRWxlbWVudCxcbiAgICAgIGlzU3BlY2lhbCxcbiAgICAgIGdldExhbmd1YWdlLFxuICAgICAgZ2V0VGV4dDogU3VnYXJUZXh0LmdldCxcbiAgICAgIHNldFRleHQ6IFN1Z2FyVGV4dC5zZXQsXG4gICAgICBpc0JvdW5kYXJ5LFxuICAgICAgaXNFbXB0eVRhZyxcbiAgICAgIGlzTm9uRWRpdGFibGVcbiAgICB9KSxcbiAgICBlcTogQ29tcGFyZS5lcSxcbiAgICBpczogQ29tcGFyZS5pc1xuICB9O1xufTtcbiIsIlxuZXhwb3J0IGRlZmF1bHQgW1xuICAnYm9keScsXG4gICdwJyxcbiAgJ2RpdicsXG4gICdhcnRpY2xlJyxcbiAgJ2FzaWRlJyxcbiAgJ2ZpZ2NhcHRpb24nLFxuICAnZmlndXJlJyxcbiAgJ2Zvb3RlcicsXG4gICdoZWFkZXInLFxuICAnbmF2JyxcbiAgJ3NlY3Rpb24nLFxuICAnb2wnLFxuICAndWwnLFxuICAnbGknLFxuICAndGFibGUnLFxuICAndGhlYWQnLFxuICAndGJvZHknLFxuICAndGZvb3QnLFxuICAnY2FwdGlvbicsXG4gICd0cicsXG4gICd0ZCcsXG4gICd0aCcsXG4gICdoMScsXG4gICdoMicsXG4gICdoMycsXG4gICdoNCcsXG4gICdoNScsXG4gICdoNicsXG4gICdibG9ja3F1b3RlJyxcbiAgJ3ByZScsXG4gICdhZGRyZXNzJ1xuXTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb250ZW50RWRpdGFibGUsIHR5cGUgRXZlbnRBcmdzLCBQcmVkaWNhdGVGaW5kLCBTaXR1LCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgS2V5U2VsZWN0aW9uIGZyb20gJy4uL2tleWJvYXJkL0tleVNlbGVjdGlvbic7XG5pbXBvcnQgKiBhcyBWZXJ0aWNhbE1vdmVtZW50IGZyb20gJy4uL2tleWJvYXJkL1ZlcnRpY2FsTW92ZW1lbnQnO1xuaW1wb3J0IHsgTW91c2VTZWxlY3Rpb24gfSBmcm9tICcuLi9tb3VzZS9Nb3VzZVNlbGVjdGlvbic7XG5pbXBvcnQgKiBhcyBLZXlEaXJlY3Rpb24gZnJvbSAnLi4vbmF2aWdhdGlvbi9LZXlEaXJlY3Rpb24nO1xuaW1wb3J0ICogYXMgQ2VsbFNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vQ2VsbFNlbGVjdGlvbic7XG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJy4uL3NlbGVjdGlvbi9SZXNwb25zZSc7XG5cbmltcG9ydCB0eXBlIHsgU2VsZWN0aW9uQW5ub3RhdGlvbiB9IGZyb20gJy4vU2VsZWN0aW9uQW5ub3RhdGlvbic7XG5pbXBvcnQgKiBhcyBTZWxlY3Rpb25LZXlzIGZyb20gJy4vU2VsZWN0aW9uS2V5cyc7XG5pbXBvcnQgeyBXaW5kb3dCcmlkZ2UgfSBmcm9tICcuL1dpbmRvd0JyaWRnZSc7XG5cbmludGVyZmFjZSBSQyB7XG4gIHJlYWRvbmx5IHJvd3M6IG51bWJlcjtcbiAgcmVhZG9ubHkgY29sczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBNb3VzZUhhbmRsZXIgPSBNb3VzZVNlbGVjdGlvbjtcbmV4cG9ydCB0eXBlIEV4dGVybmFsSGFuZGxlciA9IChzdGFydDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB2b2lkO1xuXG5leHBvcnQgaW50ZXJmYWNlIEtleWJvYXJkSGFuZGxlciB7XG4gIHJlYWRvbmx5IGtleWRvd246IChldmVudDogRXZlbnRBcmdzPEtleWJvYXJkRXZlbnQ+LCBzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBzb2Zmc2V0OiBudW1iZXIsIGZpbmlzaDogU3VnYXJFbGVtZW50PE5vZGU+LCBmb2Zmc2V0OiBudW1iZXIsIGRpcmVjdGlvbjogdHlwZW9mIFNlbGVjdGlvbktleXMubHRyKSA9PiBPcHRpb25hbDxSZXNwb25zZT47XG4gIHJlYWRvbmx5IGtleXVwOiAoZXZlbnQ6IEV2ZW50QXJnczxLZXlib2FyZEV2ZW50Piwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKSA9PiBPcHRpb25hbDxSZXNwb25zZT47XG59XG5cbmNvbnN0IHJjID0gKHJvd3M6IG51bWJlciwgY29sczogbnVtYmVyKTogUkMgPT4gKHsgcm93cywgY29scyB9KTtcblxuY29uc3QgbW91c2UgPSAod2luOiBXaW5kb3csIGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4sIGFubm90YXRpb25zOiBTZWxlY3Rpb25Bbm5vdGF0aW9uKTogTW91c2VIYW5kbGVyID0+IHtcbiAgY29uc3QgYnJpZGdlID0gV2luZG93QnJpZGdlKHdpbik7XG5cbiAgY29uc3QgaGFuZGxlcnMgPSBNb3VzZVNlbGVjdGlvbihicmlkZ2UsIGNvbnRhaW5lciwgaXNSb290LCBhbm5vdGF0aW9ucyk7XG5cbiAgcmV0dXJuIHtcbiAgICBjbGVhcnN0YXRlOiBoYW5kbGVycy5jbGVhcnN0YXRlLFxuICAgIG1vdXNlZG93bjogaGFuZGxlcnMubW91c2Vkb3duLFxuICAgIG1vdXNlb3ZlcjogaGFuZGxlcnMubW91c2VvdmVyLFxuICAgIG1vdXNldXA6IGhhbmRsZXJzLm1vdXNldXBcbiAgfTtcbn07XG5cbmNvbnN0IGlzRWRpdGFibGVOb2RlID0gKG5vZGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gUHJlZGljYXRlRmluZC5jbG9zZXN0KG5vZGUsIFN1Z2FyTm9kZS5pc0hUTUxFbGVtZW50KS5leGlzdHMoQ29udGVudEVkaXRhYmxlLmlzRWRpdGFibGUpO1xuY29uc3QgaXNFZGl0YWJsZVNlbGVjdGlvbiA9IChzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gaXNFZGl0YWJsZU5vZGUoc3RhcnQpIHx8IGlzRWRpdGFibGVOb2RlKGZpbmlzaCk7XG5cbmNvbnN0IGtleWJvYXJkID0gKHdpbjogV2luZG93LCBjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBhbm5vdGF0aW9uczogU2VsZWN0aW9uQW5ub3RhdGlvbik6IEtleWJvYXJkSGFuZGxlciA9PiB7XG4gIGNvbnN0IGJyaWRnZSA9IFdpbmRvd0JyaWRnZSh3aW4pO1xuXG4gIGNvbnN0IGNsZWFyVG9OYXZpZ2F0ZSA9ICgpID0+IHtcbiAgICBhbm5vdGF0aW9ucy5jbGVhcihjb250YWluZXIpO1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJlc3BvbnNlPigpO1xuICB9O1xuXG4gIGNvbnN0IGtleWRvd24gPSAoZXZlbnQ6IEV2ZW50QXJnczxLZXlib2FyZEV2ZW50Piwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyLCBkaXJlY3Rpb246IHR5cGVvZiBTZWxlY3Rpb25LZXlzLmx0cikgPT4ge1xuICAgIGNvbnN0IHJlYWxFdmVudCA9IGV2ZW50LnJhdztcbiAgICBjb25zdCBrZXljb2RlID0gcmVhbEV2ZW50LndoaWNoO1xuICAgIGNvbnN0IHNoaWZ0S2V5ID0gcmVhbEV2ZW50LnNoaWZ0S2V5ID09PSB0cnVlO1xuXG4gICAgY29uc3QgaGFuZGxlciA9IENlbGxTZWxlY3Rpb24ucmV0cmlldmU8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGNvbnRhaW5lciwgYW5ub3RhdGlvbnMuc2VsZWN0ZWRTZWxlY3RvcikuZm9sZCgoKSA9PiB7XG4gICAgICAvLyBNYWtlIHN1cmUgYW55IHBvc3NpYmxlIGxpbmdlcmluZyBhbm5vdGF0aW9ucyBhcmUgY2xlYXJlZFxuICAgICAgaWYgKFNlbGVjdGlvbktleXMuaXNOYXZpZ2F0aW9uKGtleWNvZGUpICYmICFzaGlmdEtleSkge1xuICAgICAgICBhbm5vdGF0aW9ucy5jbGVhckJlZm9yZVVwZGF0ZShjb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBTaGlmdCBkb3duIHNob3VsZCBwcmVkaWN0IHRoZSBtb3ZlbWVudCBhbmQgc2V0IHRoZSBzZWxlY3Rpb24uXG4gICAgICBpZiAoU2VsZWN0aW9uS2V5cy5pc05hdmlnYXRpb24oa2V5Y29kZSkgJiYgc2hpZnRLZXkgJiYgIWlzRWRpdGFibGVTZWxlY3Rpb24oc3RhcnQsIGZpbmlzaCkpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU7XG4gICAgICB9IGVsc2UgaWYgKFNlbGVjdGlvbktleXMuaXNEb3duKGtleWNvZGUpICYmIHNoaWZ0S2V5KSB7XG4gICAgICAgIHJldHVybiBGdW4uY3VycnkoVmVydGljYWxNb3ZlbWVudC5zZWxlY3QsIGJyaWRnZSwgY29udGFpbmVyLCBpc1Jvb3QsIEtleURpcmVjdGlvbi5kb3duLCBmaW5pc2gsIHN0YXJ0LCBhbm5vdGF0aW9ucy5zZWxlY3RSYW5nZSk7XG4gICAgICB9IGVsc2UgaWYgKFNlbGVjdGlvbktleXMuaXNVcChrZXljb2RlKSAmJiBzaGlmdEtleSkgeyAvLyBTaGlmdCB1cCBzaG91bGQgcHJlZGljdCB0aGUgbW92ZW1lbnQgYW5kIHNldCB0aGUgc2VsZWN0aW9uLlxuICAgICAgICByZXR1cm4gRnVuLmN1cnJ5KFZlcnRpY2FsTW92ZW1lbnQuc2VsZWN0LCBicmlkZ2UsIGNvbnRhaW5lciwgaXNSb290LCBLZXlEaXJlY3Rpb24udXAsIGZpbmlzaCwgc3RhcnQsIGFubm90YXRpb25zLnNlbGVjdFJhbmdlKTtcbiAgICAgIH0gZWxzZSBpZiAoU2VsZWN0aW9uS2V5cy5pc0Rvd24oa2V5Y29kZSkpIHsgLy8gRG93biBzaG91bGQgcHJlZGljdCB0aGUgbW92ZW1lbnQgYW5kIHNldCB0aGUgY3Vyc29yXG4gICAgICAgIHJldHVybiBGdW4uY3VycnkoVmVydGljYWxNb3ZlbWVudC5uYXZpZ2F0ZSwgYnJpZGdlLCBpc1Jvb3QsIEtleURpcmVjdGlvbi5kb3duLCBmaW5pc2gsIHN0YXJ0LCBWZXJ0aWNhbE1vdmVtZW50Lmxhc3REb3duQ2hlY2spO1xuICAgICAgfSBlbHNlIGlmIChTZWxlY3Rpb25LZXlzLmlzVXAoa2V5Y29kZSkpIHsgLy8gVXAgc2hvdWxkIHByZWRpY3QgdGhlIG1vdmVtZW50IGFuZCBzZXQgdGhlIGN1cnNvclxuICAgICAgICByZXR1cm4gRnVuLmN1cnJ5KFZlcnRpY2FsTW92ZW1lbnQubmF2aWdhdGUsIGJyaWRnZSwgaXNSb290LCBLZXlEaXJlY3Rpb24udXAsIGZpbmlzaCwgc3RhcnQsIFZlcnRpY2FsTW92ZW1lbnQuZmlyc3RVcENoZWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lO1xuICAgICAgfVxuICAgIH0sIChzZWxlY3RlZCkgPT4ge1xuXG4gICAgICBjb25zdCB1cGRhdGUgPSAoYXR0ZW1wdHM6IFJDW10pID0+IHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBjb25zdCBuYXZpZ2F0aW9uID0gQXJyLmZpbmRNYXAoYXR0ZW1wdHMsIChkZWx0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIEtleVNlbGVjdGlvbi51cGRhdGUoZGVsdGEucm93cywgZGVsdGEuY29scywgY29udGFpbmVyLCBzZWxlY3RlZCwgYW5ub3RhdGlvbnMpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gU2hpZnQgdGhlIHNlbGVjdGVkIHJvd3MgYW5kIHVwZGF0ZSB0aGUgc2VsZWN0aW9uLlxuICAgICAgICAgIHJldHVybiBuYXZpZ2F0aW9uLmZvbGQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIGNlbGwgc2VsZWN0aW9uIHdlbnQgb3V0c2lkZSB0aGUgdGFibGUsIHNvIGNsZWFyIGl0IGFuZCBicmlkZ2UgZnJvbSB0aGUgZmlyc3QgYm94IHRvIGJlZm9yZS9hZnRlclxuICAgICAgICAgICAgLy8gdGhlIHRhYmxlXG4gICAgICAgICAgICByZXR1cm4gQ2VsbFNlbGVjdGlvbi5nZXRFZGdlcyhjb250YWluZXIsIGFubm90YXRpb25zLmZpcnN0U2VsZWN0ZWRTZWxlY3RvciwgYW5ub3RhdGlvbnMubGFzdFNlbGVjdGVkU2VsZWN0b3IpLm1hcCgoZWRnZXMpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmUgPSBTZWxlY3Rpb25LZXlzLmlzRG93bihrZXljb2RlKSB8fCBkaXJlY3Rpb24uaXNGb3J3YXJkKGtleWNvZGUpID8gU2l0dS5hZnRlciA6IFNpdHUuYmVmb3JlO1xuICAgICAgICAgICAgICBicmlkZ2Uuc2V0UmVsYXRpdmVTZWxlY3Rpb24oU2l0dS5vbihlZGdlcy5maXJzdCwgMCksIHJlbGF0aXZlKGVkZ2VzLnRhYmxlKSk7XG4gICAgICAgICAgICAgIGFubm90YXRpb25zLmNsZWFyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgIHJldHVybiBSZXNwb25zZS5jcmVhdGUoT3B0aW9uYWwubm9uZSgpLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIChfKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShSZXNwb25zZS5jcmVhdGUoT3B0aW9uYWwubm9uZSgpLCB0cnVlKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBpZiAoU2VsZWN0aW9uS2V5cy5pc05hdmlnYXRpb24oa2V5Y29kZSkgJiYgc2hpZnRLZXkgJiYgIWlzRWRpdGFibGVTZWxlY3Rpb24oc3RhcnQsIGZpbmlzaCkpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU7XG4gICAgICB9IGVsc2UgaWYgKFNlbGVjdGlvbktleXMuaXNEb3duKGtleWNvZGUpICYmIHNoaWZ0S2V5KSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUoWyByYygrMSwgMCkgXSk7XG4gICAgICB9IGVsc2UgaWYgKFNlbGVjdGlvbktleXMuaXNVcChrZXljb2RlKSAmJiBzaGlmdEtleSkge1xuICAgICAgICByZXR1cm4gdXBkYXRlKFsgcmMoLTEsIDApIF0pO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24uaXNCYWNrd2FyZChrZXljb2RlKSAmJiBzaGlmdEtleSkgeyAvLyBMZWZ0IGFuZCByaWdodCBzaG91bGQgdHJ5IHVwL2Rvd24gcmVzcGVjdGl2ZWx5IGlmIHRoZXkgZmFpbC5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZShbIHJjKDAsIC0xKSwgcmMoLTEsIDApIF0pO1xuICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24uaXNGb3J3YXJkKGtleWNvZGUpICYmIHNoaWZ0S2V5KSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUoWyByYygwLCArMSksIHJjKCsxLCAwKSBdKTtcbiAgICAgIH0gZWxzZSBpZiAoU2VsZWN0aW9uS2V5cy5pc05hdmlnYXRpb24oa2V5Y29kZSkgJiYgIXNoaWZ0S2V5KSB7IC8vIENsZWFyIHRoZSBzZWxlY3Rpb24gb24gbm9ybWFsIGFycm93IGtleXMuXG4gICAgICAgIHJldHVybiBjbGVhclRvTmF2aWdhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwubm9uZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBoYW5kbGVyKCk7XG4gIH07XG5cbiAgY29uc3Qga2V5dXAgPSAoZXZlbnQ6IEV2ZW50QXJnczxLZXlib2FyZEV2ZW50Piwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIENlbGxTZWxlY3Rpb24ucmV0cmlldmUoY29udGFpbmVyLCBhbm5vdGF0aW9ucy5zZWxlY3RlZFNlbGVjdG9yKS5mb2xkPE9wdGlvbmFsPFJlc3BvbnNlPj4oKCkgPT4ge1xuICAgICAgY29uc3QgcmVhbEV2ZW50ID0gZXZlbnQucmF3O1xuICAgICAgY29uc3Qga2V5Y29kZSA9IHJlYWxFdmVudC53aGljaDtcbiAgICAgIGNvbnN0IHNoaWZ0S2V5ID0gcmVhbEV2ZW50LnNoaWZ0S2V5ID09PSB0cnVlO1xuICAgICAgaWYgKCFzaGlmdEtleSkge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxSZXNwb25zZT4oKTtcbiAgICAgIH1cbiAgICAgIGlmIChTZWxlY3Rpb25LZXlzLmlzTmF2aWdhdGlvbihrZXljb2RlKSAmJiBpc0VkaXRhYmxlU2VsZWN0aW9uKHN0YXJ0LCBmaW5pc2gpKSB7XG4gICAgICAgIHJldHVybiBLZXlTZWxlY3Rpb24uc3luYyhjb250YWluZXIsIGlzUm9vdCwgc3RhcnQsIHNvZmZzZXQsIGZpbmlzaCwgZm9mZnNldCwgYW5ub3RhdGlvbnMuc2VsZWN0UmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8UmVzcG9uc2U+KCk7XG4gICAgICB9XG4gICAgfSwgT3B0aW9uYWwubm9uZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBrZXlkb3duLFxuICAgIGtleXVwXG4gIH07XG59O1xuXG5jb25zdCBleHRlcm5hbCA9ICh3aW46IFdpbmRvdywgY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgYW5ub3RhdGlvbnM6IFNlbGVjdGlvbkFubm90YXRpb24pOiBFeHRlcm5hbEhhbmRsZXIgPT4ge1xuICBjb25zdCBicmlkZ2UgPSBXaW5kb3dCcmlkZ2Uod2luKTtcblxuICByZXR1cm4gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHtcbiAgICBhbm5vdGF0aW9ucy5jbGVhckJlZm9yZVVwZGF0ZShjb250YWluZXIpO1xuICAgIENlbGxTZWxlY3Rpb24uaWRlbnRpZnkoc3RhcnQsIGZpbmlzaCwgaXNSb290KS5lYWNoKChjZWxsU2VsKSA9PiB7XG4gICAgICBjb25zdCBib3hlcyA9IGNlbGxTZWwuYm94ZXMuZ2V0T3IoW10pO1xuICAgICAgYW5ub3RhdGlvbnMuc2VsZWN0UmFuZ2UoY29udGFpbmVyLCBib3hlcywgY2VsbFNlbC5zdGFydCwgY2VsbFNlbC5maW5pc2gpO1xuXG4gICAgICAvLyBzdG9wIHRoZSBicm93c2VyIGZyb20gY3JlYXRpbmcgYSBiaWcgdGV4dCBzZWxlY3Rpb24sIHBsYWNlIHRoZSBzZWxlY3Rpb24gYXQgdGhlIGVuZCBvZiB0aGUgY2VsbCB3aGVyZSB0aGUgY3Vyc29yIGlzXG4gICAgICBicmlkZ2Uuc2VsZWN0Q29udGVudHMoZmluaXNoKTtcbiAgICAgIGJyaWRnZS5jb2xsYXBzZVNlbGVjdGlvbigpO1xuICAgIH0pO1xuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgbW91c2UsXG4gIGtleWJvYXJkLFxuICBleHRlcm5hbFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENsYXNzLCBPbk5vZGUsIFNlbGVjdG9yRmlsdGVyLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgRXBoZW1lcmEgfSBmcm9tICcuL0VwaGVtZXJhJztcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25Bbm5vdGF0aW9uIHtcbiAgY2xlYXJCZWZvcmVVcGRhdGU6IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gdm9pZDtcbiAgY2xlYXI6IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gdm9pZDtcbiAgc2VsZWN0UmFuZ2U6IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgY2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGZpbmlzaDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gdm9pZDtcbiAgc2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nO1xuICBmaXJzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZztcbiAgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZztcbn1cblxuY29uc3QgYnlDbGFzcyA9IChlcGhlbWVyYTogRXBoZW1lcmEpOiBTZWxlY3Rpb25Bbm5vdGF0aW9uID0+IHtcbiAgY29uc3QgYWRkU2VsZWN0aW9uQ2xhc3MgPSBPbk5vZGUuYWRkQ2xhc3MoZXBoZW1lcmEuc2VsZWN0ZWQpO1xuICBjb25zdCByZW1vdmVTZWxlY3Rpb25DbGFzc2VzID0gT25Ob2RlLnJlbW92ZUNsYXNzZXMoWyBlcGhlbWVyYS5zZWxlY3RlZCwgZXBoZW1lcmEubGFzdFNlbGVjdGVkLCBlcGhlbWVyYS5maXJzdFNlbGVjdGVkIF0pO1xuXG4gIGNvbnN0IGNsZWFyID0gKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgY29uc3Qgc2VscyA9IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzKGNvbnRhaW5lciwgZXBoZW1lcmEuc2VsZWN0ZWRTZWxlY3Rvcik7XG4gICAgQXJyLmVhY2goc2VscywgcmVtb3ZlU2VsZWN0aW9uQ2xhc3Nlcyk7XG4gIH07XG5cbiAgY29uc3Qgc2VsZWN0UmFuZ2UgPSAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHtcbiAgICBjbGVhcihjb250YWluZXIpO1xuICAgIEFyci5lYWNoKGNlbGxzLCBhZGRTZWxlY3Rpb25DbGFzcyk7XG4gICAgQ2xhc3MuYWRkKHN0YXJ0LCBlcGhlbWVyYS5maXJzdFNlbGVjdGVkKTtcbiAgICBDbGFzcy5hZGQoZmluaXNoLCBlcGhlbWVyYS5sYXN0U2VsZWN0ZWQpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY2xlYXJCZWZvcmVVcGRhdGU6IGNsZWFyLFxuICAgIGNsZWFyLFxuICAgIHNlbGVjdFJhbmdlLFxuICAgIHNlbGVjdGVkU2VsZWN0b3I6IGVwaGVtZXJhLnNlbGVjdGVkU2VsZWN0b3IsXG4gICAgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBlcGhlbWVyYS5maXJzdFNlbGVjdGVkU2VsZWN0b3IsXG4gICAgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IGVwaGVtZXJhLmxhc3RTZWxlY3RlZFNlbGVjdG9yXG4gIH07XG59O1xuXG5jb25zdCBieUF0dHIgPSAoZXBoZW1lcmE6IEVwaGVtZXJhLCBvblNlbGVjdGlvbjogKGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHZvaWQsIG9uQ2xlYXI6ICgpID0+IHZvaWQpOiBTZWxlY3Rpb25Bbm5vdGF0aW9uID0+IHtcbiAgY29uc3QgcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlcyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB7XG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCBlcGhlbWVyYS5zZWxlY3RlZCk7XG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCBlcGhlbWVyYS5maXJzdFNlbGVjdGVkKTtcbiAgICBBdHRyaWJ1dGUucmVtb3ZlKGVsZW1lbnQsIGVwaGVtZXJhLmxhc3RTZWxlY3RlZCk7XG4gIH07XG5cbiAgY29uc3QgYWRkU2VsZWN0aW9uQXR0cmlidXRlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHtcbiAgICBBdHRyaWJ1dGUuc2V0KGVsZW1lbnQsIGVwaGVtZXJhLnNlbGVjdGVkLCAnMScpO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyID0gKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgY2xlYXJCZWZvcmVVcGRhdGUoY29udGFpbmVyKTtcbiAgICBvbkNsZWFyKCk7XG4gIH07XG5cbiAgY29uc3QgY2xlYXJCZWZvcmVVcGRhdGUgPSAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICBjb25zdCBzZWxzID0gU2VsZWN0b3JGaWx0ZXIuZGVzY2VuZGFudHM8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGNvbnRhaW5lciwgYCR7ZXBoZW1lcmEuc2VsZWN0ZWRTZWxlY3Rvcn0sJHtlcGhlbWVyYS5maXJzdFNlbGVjdGVkU2VsZWN0b3J9LCR7ZXBoZW1lcmEubGFzdFNlbGVjdGVkU2VsZWN0b3J9YCk7XG4gICAgQXJyLmVhY2goc2VscywgcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlcyk7XG4gIH07XG5cbiAgY29uc3Qgc2VsZWN0UmFuZ2UgPSAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHtcbiAgICBjbGVhcihjb250YWluZXIpO1xuICAgIEFyci5lYWNoKGNlbGxzLCBhZGRTZWxlY3Rpb25BdHRyaWJ1dGUpO1xuICAgIEF0dHJpYnV0ZS5zZXQoc3RhcnQsIGVwaGVtZXJhLmZpcnN0U2VsZWN0ZWQsICcxJyk7XG4gICAgQXR0cmlidXRlLnNldChmaW5pc2gsIGVwaGVtZXJhLmxhc3RTZWxlY3RlZCwgJzEnKTtcbiAgICBvblNlbGVjdGlvbihjZWxscywgc3RhcnQsIGZpbmlzaCk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgY2xlYXJCZWZvcmVVcGRhdGUsXG4gICAgY2xlYXIsXG4gICAgc2VsZWN0UmFuZ2UsXG4gICAgc2VsZWN0ZWRTZWxlY3RvcjogZXBoZW1lcmEuc2VsZWN0ZWRTZWxlY3RvcixcbiAgICBmaXJzdFNlbGVjdGVkU2VsZWN0b3I6IGVwaGVtZXJhLmZpcnN0U2VsZWN0ZWRTZWxlY3RvcixcbiAgICBsYXN0U2VsZWN0ZWRTZWxlY3RvcjogZXBoZW1lcmEubGFzdFNlbGVjdGVkU2VsZWN0b3JcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBTZWxlY3Rpb25Bbm5vdGF0aW9uID0ge1xuICBieUNsYXNzLFxuICBieUF0dHJcbn07XG4iLCJjb25zdCBpc0tleSA9IChrZXk6IG51bWJlcikgPT4ge1xuICByZXR1cm4gKGtleWNvZGU6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiBrZXljb2RlID09PSBrZXk7XG4gIH07XG59O1xuXG5jb25zdCBpc1VwID0gaXNLZXkoMzgpO1xuY29uc3QgaXNEb3duID0gaXNLZXkoNDApO1xuY29uc3QgaXNOYXZpZ2F0aW9uID0gKGtleWNvZGU6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4ga2V5Y29kZSA+PSAzNyAmJiBrZXljb2RlIDw9IDQwO1xufTtcblxuY29uc3QgbHRyID0ge1xuICAvLyBXZSBuZWVkIHRvIG1vdmUgS0VZUyBvdXQgb2Yga2V5dGFyIGFuZCBpbnRvIHNvbWV0aGluZyBtdWNoIG1vcmUgbG93LWxldmVsLlxuICBpc0JhY2t3YXJkOiBpc0tleSgzNyksXG4gIGlzRm9yd2FyZDogaXNLZXkoMzkpXG59O1xuXG5jb25zdCBydGwgPSB7XG4gIGlzQmFja3dhcmQ6IGlzS2V5KDM5KSxcbiAgaXNGb3J3YXJkOiBpc0tleSgzNylcbn07XG5cbmV4cG9ydCB7XG4gIGx0cixcbiAgcnRsLFxuICBpc1VwLFxuICBpc0Rvd24sXG4gIGlzTmF2aWdhdGlvblxufTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuZXhwb3J0IGNvbnN0IGVudW0gU2VsZWN0aW9uVHlwZVRhZyB7XG4gIE5vbmUgPSAnbm9uZScsXG4gIFNpbmdsZSA9ICdzaW5nbGUnLFxuICBNdWx0aXBsZSA9ICdtdWx0aXBsZSdcbn1cblxuaW50ZXJmYWNlIFNlbGVjdGlvblR5cGVOb25lIHtcbiAgcmVhZG9ubHkgdGFnOiBTZWxlY3Rpb25UeXBlVGFnLk5vbmU7XG59XG5cbmludGVyZmFjZSBTZWxlY3Rpb25UeXBlU2luZ2xlIHtcbiAgcmVhZG9ubHkgdGFnOiBTZWxlY3Rpb25UeXBlVGFnLlNpbmdsZTtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pjtcbn1cblxuaW50ZXJmYWNlIFNlbGVjdGlvblR5cGVNdWx0aXBsZSB7XG4gIHJlYWRvbmx5IHRhZzogU2VsZWN0aW9uVHlwZVRhZy5NdWx0aXBsZTtcbiAgcmVhZG9ubHkgZWxlbWVudHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXTtcbn1cblxuZXhwb3J0IHR5cGUgU2VsZWN0aW9uVHlwZSA9IFNlbGVjdGlvblR5cGVOb25lIHwgU2VsZWN0aW9uVHlwZVNpbmdsZSB8IFNlbGVjdGlvblR5cGVNdWx0aXBsZTtcblxuZXhwb3J0IGNvbnN0IGZvbGQgPSA8VD4gKHN1YmplY3Q6IFNlbGVjdGlvblR5cGUsIG9uTm9uZTogKCkgPT4gVCwgb25NdWx0aXBsZTogKG11bHRpcGxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pID0+IFQsIG9uU2luZ2xlOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gVCk6IFQgPT4ge1xuICBzd2l0Y2ggKHN1YmplY3QudGFnKSB7XG4gICAgY2FzZSBTZWxlY3Rpb25UeXBlVGFnLk5vbmU6XG4gICAgICByZXR1cm4gb25Ob25lKCk7XG4gICAgY2FzZSBTZWxlY3Rpb25UeXBlVGFnLlNpbmdsZTpcbiAgICAgIHJldHVybiBvblNpbmdsZShzdWJqZWN0LmVsZW1lbnQpO1xuICAgIGNhc2UgU2VsZWN0aW9uVHlwZVRhZy5NdWx0aXBsZTpcbiAgICAgIHJldHVybiBvbk11bHRpcGxlKHN1YmplY3QuZWxlbWVudHMpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgbm9uZSA9ICgpOiBTZWxlY3Rpb25UeXBlID0+ICh7IHRhZzogU2VsZWN0aW9uVHlwZVRhZy5Ob25lIH0pO1xuZXhwb3J0IGNvbnN0IG11bHRpcGxlID0gKGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pOiBTZWxlY3Rpb25UeXBlID0+ICh7IHRhZzogU2VsZWN0aW9uVHlwZVRhZy5NdWx0aXBsZSwgZWxlbWVudHMgfSk7XG5leHBvcnQgY29uc3Qgc2luZ2xlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBTZWxlY3Rpb25UeXBlID0+ICh7IHRhZzogU2VsZWN0aW9uVHlwZVRhZy5TaW5nbGUsIGVsZW1lbnQgfSk7XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyB0eXBlIFN0cnVjdHMsIFRhYmxlUG9zaXRpb25zIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQ29tcGFyZSwgU2VsZWN0b3JGaW5kLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIENlbGxTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL0NlbGxTZWxlY3Rpb24nO1xuXG4vLyBFeHBsaWNpdGx5IGNhbGxpbmcgQ2VsbFNlbGVjdGlvbi5yZXRyaWV2ZSBzbyB0aGF0IHdlIGNhbiBzZWUgdGhlIEFQSSBzaWduYXR1cmUuXG5jb25zdCByZXRyaWV2ZSA9IDxUIGV4dGVuZHMgRWxlbWVudD4gKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+W10+ID0+IHtcbiAgcmV0dXJuIENlbGxTZWxlY3Rpb24ucmV0cmlldmU8VD4oY29udGFpbmVyLCBzZWxlY3Rvcik7XG59O1xuXG5jb25zdCByZXRyaWV2ZUJveCA9IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcsIGxhc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxTdHJ1Y3RzLkJvdW5kcz4gPT4ge1xuICByZXR1cm4gQ2VsbFNlbGVjdGlvbi5nZXRFZGdlcyhjb250YWluZXIsIGZpcnN0U2VsZWN0ZWRTZWxlY3RvciwgbGFzdFNlbGVjdGVkU2VsZWN0b3IpLmJpbmQoKGVkZ2VzKSA9PiB7XG4gICAgY29uc3QgaXNSb290ID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICAgIHJldHVybiBDb21wYXJlLmVxKGNvbnRhaW5lciwgYW5jZXN0b3IpO1xuICAgIH07XG4gICAgY29uc3Qgc2VjdGlvblNlbGVjdG9yID0gJ3RoZWFkLHRmb290LHRib2R5LHRhYmxlJztcbiAgICBjb25zdCBmaXJzdEFuY2VzdG9yID0gU2VsZWN0b3JGaW5kLmFuY2VzdG9yKGVkZ2VzLmZpcnN0LCBzZWN0aW9uU2VsZWN0b3IsIGlzUm9vdCk7XG4gICAgY29uc3QgbGFzdEFuY2VzdG9yID0gU2VsZWN0b3JGaW5kLmFuY2VzdG9yKGVkZ2VzLmxhc3QsIHNlY3Rpb25TZWxlY3RvciwgaXNSb290KTtcbiAgICByZXR1cm4gZmlyc3RBbmNlc3Rvci5iaW5kKChmQSkgPT4ge1xuICAgICAgcmV0dXJuIGxhc3RBbmNlc3Rvci5iaW5kKChsQSkgPT4ge1xuICAgICAgICByZXR1cm4gQ29tcGFyZS5lcShmQSwgbEEpID8gVGFibGVQb3NpdGlvbnMuZ2V0Qm94KGVkZ2VzLnRhYmxlLCBlZGdlcy5maXJzdCwgZWRnZXMubGFzdCkgOiBPcHRpb25hbC5ub25lPFN0cnVjdHMuQm91bmRzPigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHsgcmV0cmlldmUsIHJldHJpZXZlQm94IH07XG5cbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgdHlwZSBSYXdSZWN0LCBTY3JvbGwsIHR5cGUgU2ltUmFuZ2UsIFNpbVNlbGVjdGlvbiwgdHlwZSBTaXR1LCBTdWdhckVsZW1lbnQsIFdpbmRvd1NlbGVjdGlvbiB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IFNpdHVzIH0gZnJvbSAnLi4vc2VsZWN0aW9uL1NpdHVzJztcbmltcG9ydCAqIGFzIFV0aWwgZnJvbSAnLi4vc2VsZWN0aW9uL1V0aWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdpbmRvd0JyaWRnZSB7XG4gIGVsZW1lbnRGcm9tUG9pbnQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PEVsZW1lbnQ+PjtcbiAgZ2V0UmVjdDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PikgPT4gQ2xpZW50UmVjdCB8IERPTVJlY3Q7XG4gIGdldFJhbmdlZFJlY3Q6IChzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBzb2Zmc2V0OiBudW1iZXIsIGZpbmlzaDogU3VnYXJFbGVtZW50PE5vZGU+LCBmb2Zmc2V0OiBudW1iZXIpID0+IE9wdGlvbmFsPFJhd1JlY3Q+O1xuICBnZXRTZWxlY3Rpb246ICgpID0+IE9wdGlvbmFsPFNpbVJhbmdlPjtcbiAgZnJvbVNpdHVzOiAoc2l0dXM6IFNpdHVzKSA9PiBTaW1SYW5nZTtcbiAgc2l0dXNGcm9tUG9pbnQ6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gT3B0aW9uYWw8U2l0dXM+O1xuICBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZDtcbiAgY29sbGFwc2VTZWxlY3Rpb246ICh0b1N0YXJ0PzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0U2VsZWN0aW9uOiAoc2VsOiBTaW1SYW5nZSkgPT4gdm9pZDtcbiAgc2V0UmVsYXRpdmVTZWxlY3Rpb246IChzdGFydDogU2l0dSwgZmluaXNoOiBTaXR1KSA9PiB2b2lkO1xuICBzZWxlY3RDb250ZW50czogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gdm9pZDtcbiAgc2VsZWN0Tm9kZTogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gdm9pZDtcbiAgZ2V0SW5uZXJIZWlnaHQ6ICgpID0+IG51bWJlcjtcbiAgZ2V0U2Nyb2xsWTogKCkgPT4gbnVtYmVyO1xuICBzY3JvbGxCeTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgV2luZG93QnJpZGdlID0gKHdpbjogV2luZG93KTogV2luZG93QnJpZGdlID0+IHtcbiAgY29uc3QgZWxlbWVudEZyb21Qb2ludCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBTdWdhckVsZW1lbnQuZnJvbVBvaW50KFN1Z2FyRWxlbWVudC5mcm9tRG9tKHdpbi5kb2N1bWVudCksIHgsIHkpO1xuICB9O1xuXG4gIGNvbnN0IGdldFJlY3QgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KSA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9O1xuXG4gIGNvbnN0IGdldFJhbmdlZFJlY3QgPSAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogT3B0aW9uYWw8UmF3UmVjdD4gPT4ge1xuICAgIGNvbnN0IHNlbCA9IFNpbVNlbGVjdGlvbi5leGFjdChzdGFydCwgc29mZnNldCwgZmluaXNoLCBmb2Zmc2V0KTtcbiAgICByZXR1cm4gV2luZG93U2VsZWN0aW9uLmdldEZpcnN0UmVjdCh3aW4sIHNlbCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2VsZWN0aW9uID0gKCkgPT4ge1xuICAgIHJldHVybiBXaW5kb3dTZWxlY3Rpb24uZ2V0KHdpbikubWFwKChleGFjdEFkdCkgPT4ge1xuICAgICAgcmV0dXJuIFV0aWwuY29udmVydFRvUmFuZ2Uod2luLCBleGFjdEFkdCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZnJvbVNpdHVzID0gKHNpdHVzOiBTaXR1cykgPT4ge1xuICAgIGNvbnN0IHJlbGF0aXZlID0gU2ltU2VsZWN0aW9uLnJlbGF0aXZlKHNpdHVzLnN0YXJ0LCBzaXR1cy5maW5pc2gpO1xuICAgIHJldHVybiBVdGlsLmNvbnZlcnRUb1JhbmdlKHdpbiwgcmVsYXRpdmUpO1xuICB9O1xuXG4gIGNvbnN0IHNpdHVzRnJvbVBvaW50ID0gKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIFdpbmRvd1NlbGVjdGlvbi5nZXRBdFBvaW50KHdpbiwgeCwgeSkubWFwKChleGFjdCkgPT4ge1xuICAgICAgcmV0dXJuIFNpdHVzLmNyZWF0ZShleGFjdC5zdGFydCwgZXhhY3Quc29mZnNldCwgZXhhY3QuZmluaXNoLCBleGFjdC5mb2Zmc2V0KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBjbGVhclNlbGVjdGlvbiA9ICgpID0+IHtcbiAgICBXaW5kb3dTZWxlY3Rpb24uY2xlYXIod2luKTtcbiAgfTtcblxuICBjb25zdCBjb2xsYXBzZVNlbGVjdGlvbiA9ICh0b1N0YXJ0OiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICBXaW5kb3dTZWxlY3Rpb24uZ2V0KHdpbikuZWFjaCgoc2VsKSA9PiBzZWwuZm9sZChcbiAgICAgIChybmcpID0+IHJuZy5jb2xsYXBzZSh0b1N0YXJ0KSxcbiAgICAgIChzdGFydFNpdHUsIGZpbmlzaFNpdHUpID0+IHtcbiAgICAgICAgY29uc3Qgc2l0dSA9IHRvU3RhcnQgPyBzdGFydFNpdHUgOiBmaW5pc2hTaXR1O1xuICAgICAgICBXaW5kb3dTZWxlY3Rpb24uc2V0UmVsYXRpdmUod2luLCBzaXR1LCBzaXR1KTtcbiAgICAgIH0sXG4gICAgICAoc3RhcnQsIHNvZmZzZXQsIGZpbmlzaCwgZm9mZnNldCkgPT4ge1xuICAgICAgICBjb25zdCBub2RlID0gdG9TdGFydCA/IHN0YXJ0IDogZmluaXNoO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSB0b1N0YXJ0ID8gc29mZnNldCA6IGZvZmZzZXQ7XG4gICAgICAgIFdpbmRvd1NlbGVjdGlvbi5zZXRFeGFjdCh3aW4sIG5vZGUsIG9mZnNldCwgbm9kZSwgb2Zmc2V0KTtcbiAgICAgIH1cbiAgICApKTtcbiAgfTtcblxuICBjb25zdCBzZWxlY3ROb2RlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICAgIFdpbmRvd1NlbGVjdGlvbi5zZXRUb0VsZW1lbnQod2luLCBlbGVtZW50LCBmYWxzZSk7XG4gIH07XG5cbiAgY29uc3Qgc2VsZWN0Q29udGVudHMgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiB7XG4gICAgV2luZG93U2VsZWN0aW9uLnNldFRvRWxlbWVudCh3aW4sIGVsZW1lbnQpO1xuICB9O1xuXG4gIGNvbnN0IHNldFNlbGVjdGlvbiA9IChzZWw6IFNpbVJhbmdlKSA9PiB7XG4gICAgV2luZG93U2VsZWN0aW9uLnNldEV4YWN0KHdpbiwgc2VsLnN0YXJ0LCBzZWwuc29mZnNldCwgc2VsLmZpbmlzaCwgc2VsLmZvZmZzZXQpO1xuICB9O1xuXG4gIGNvbnN0IHNldFJlbGF0aXZlU2VsZWN0aW9uID0gKHN0YXJ0OiBTaXR1LCBmaW5pc2g6IFNpdHUpID0+IHtcbiAgICBXaW5kb3dTZWxlY3Rpb24uc2V0UmVsYXRpdmUod2luLCBzdGFydCwgZmluaXNoKTtcbiAgfTtcblxuICBjb25zdCBnZXRJbm5lckhlaWdodCA9ICgpID0+IHtcbiAgICByZXR1cm4gd2luLmlubmVySGVpZ2h0O1xuICB9O1xuXG4gIGNvbnN0IGdldFNjcm9sbFkgPSAoKSA9PiB7XG4gICAgY29uc3QgcG9zID0gU2Nyb2xsLmdldChTdWdhckVsZW1lbnQuZnJvbURvbSh3aW4uZG9jdW1lbnQpKTtcbiAgICByZXR1cm4gcG9zLnRvcDtcbiAgfTtcblxuICBjb25zdCBzY3JvbGxCeSA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xuICAgIFNjcm9sbC5ieSh4LCB5LCBTdWdhckVsZW1lbnQuZnJvbURvbSh3aW4uZG9jdW1lbnQpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGVsZW1lbnRGcm9tUG9pbnQsXG4gICAgZ2V0UmVjdCxcbiAgICBnZXRSYW5nZWRSZWN0LFxuICAgIGdldFNlbGVjdGlvbixcbiAgICBmcm9tU2l0dXMsXG4gICAgc2l0dXNGcm9tUG9pbnQsXG4gICAgY2xlYXJTZWxlY3Rpb24sXG4gICAgY29sbGFwc2VTZWxlY3Rpb24sXG4gICAgc2V0U2VsZWN0aW9uLFxuICAgIHNldFJlbGF0aXZlU2VsZWN0aW9uLFxuICAgIHNlbGVjdE5vZGUsXG4gICAgc2VsZWN0Q29udGVudHMsXG4gICAgZ2V0SW5uZXJIZWlnaHQsXG4gICAgZ2V0U2Nyb2xsWSxcbiAgICBzY3JvbGxCeVxuICB9O1xufTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ2FyZXRzIHtcbiAgcmVhZG9ubHkgbGVmdDogbnVtYmVyO1xuICByZWFkb25seSB0b3A6IG51bWJlcjtcbiAgcmVhZG9ubHkgcmlnaHQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgYm90dG9tOiBudW1iZXI7XG59XG5cbmNvbnN0IG1vdmVEb3duID0gKGNhcmV0OiBDYXJldHMsIGFtb3VudDogbnVtYmVyKTogQ2FyZXRzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBjYXJldC5sZWZ0LFxuICAgIHRvcDogY2FyZXQudG9wICsgYW1vdW50LFxuICAgIHJpZ2h0OiBjYXJldC5yaWdodCxcbiAgICBib3R0b206IGNhcmV0LmJvdHRvbSArIGFtb3VudFxuICB9O1xufTtcblxuY29uc3QgbW92ZVVwID0gKGNhcmV0OiBDYXJldHMsIGFtb3VudDogbnVtYmVyKTogQ2FyZXRzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBjYXJldC5sZWZ0LFxuICAgIHRvcDogY2FyZXQudG9wIC0gYW1vdW50LFxuICAgIHJpZ2h0OiBjYXJldC5yaWdodCxcbiAgICBib3R0b206IGNhcmV0LmJvdHRvbSAtIGFtb3VudFxuICB9O1xufTtcblxuY29uc3QgbW92ZUJvdHRvbVRvID0gKGNhcmV0OiBDYXJldHMsIGJvdHRvbTogbnVtYmVyKTogQ2FyZXRzID0+IHtcbiAgY29uc3QgaGVpZ2h0ID0gY2FyZXQuYm90dG9tIC0gY2FyZXQudG9wO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IGNhcmV0LmxlZnQsXG4gICAgdG9wOiBib3R0b20gLSBoZWlnaHQsXG4gICAgcmlnaHQ6IGNhcmV0LnJpZ2h0LFxuICAgIGJvdHRvbVxuICB9O1xufTtcblxuY29uc3QgbW92ZVRvcFRvID0gKGNhcmV0OiBDYXJldHMsIHRvcDogbnVtYmVyKTogQ2FyZXRzID0+IHtcbiAgY29uc3QgaGVpZ2h0ID0gY2FyZXQuYm90dG9tIC0gY2FyZXQudG9wO1xuICByZXR1cm4gKHtcbiAgICBsZWZ0OiBjYXJldC5sZWZ0LFxuICAgIHRvcCxcbiAgICByaWdodDogY2FyZXQucmlnaHQsXG4gICAgYm90dG9tOiB0b3AgKyBoZWlnaHRcbiAgfSk7XG59O1xuXG5jb25zdCB0cmFuc2xhdGUgPSAoY2FyZXQ6IENhcmV0cywgeERlbHRhOiBudW1iZXIsIHlEZWx0YTogbnVtYmVyKTogQ2FyZXRzID0+IHtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBjYXJldC5sZWZ0ICsgeERlbHRhLFxuICAgIHRvcDogY2FyZXQudG9wICsgeURlbHRhLFxuICAgIHJpZ2h0OiBjYXJldC5yaWdodCArIHhEZWx0YSxcbiAgICBib3R0b206IGNhcmV0LmJvdHRvbSArIHlEZWx0YVxuICB9O1xufTtcblxuY29uc3QgZ2V0VG9wID0gKGNhcmV0OiBDYXJldHMpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gY2FyZXQudG9wO1xufTtcblxuY29uc3QgZ2V0Qm90dG9tID0gKGNhcmV0OiBDYXJldHMpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gY2FyZXQuYm90dG9tO1xufTtcblxuY29uc3QgdG9TdHJpbmcgPSAoY2FyZXQ6IENhcmV0cyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiAnKCcgKyBjYXJldC5sZWZ0ICsgJywgJyArIGNhcmV0LnRvcCArICcpIC0+ICgnICsgY2FyZXQucmlnaHQgKyAnLCAnICsgY2FyZXQuYm90dG9tICsgJyknO1xufTtcblxuZXhwb3J0IHtcbiAgbW92ZVVwLFxuICBtb3ZlRG93bixcbiAgbW92ZUJvdHRvbVRvLFxuICBtb3ZlVG9wVG8sXG4gIGdldFRvcCxcbiAgZ2V0Qm90dG9tLFxuICB0cmFuc2xhdGUsXG4gIHRvU3RyaW5nXG59O1xuIiwiaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXdhcmVuZXNzLCBDb21wYXJlLCBTZWxlY3RvckZpbmQsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBTZWxlY3Rpb25Bbm5vdGF0aW9uIH0gZnJvbSAnLi4vYXBpL1NlbGVjdGlvbkFubm90YXRpb24nO1xuaW1wb3J0ICogYXMgQ2VsbFNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vQ2VsbFNlbGVjdGlvbic7XG5pbXBvcnQgdHlwZSB7IElkZW50aWZpZWRFeHQgfSBmcm9tICcuLi9zZWxlY3Rpb24vSWRlbnRpZmllZCc7XG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJy4uL3NlbGVjdGlvbi9SZXNwb25zZSc7XG5pbXBvcnQgKiBhcyBVdGlsIGZyb20gJy4uL3NlbGVjdGlvbi9VdGlsJztcblxuLy8gQmFzZWQgb24gYSBzdGFydCBhbmQgZmluaXNoLCBzZWxlY3QgdGhlIGFwcHJvcHJpYXRlIGJveCBvZiBjZWxsc1xuY29uc3Qgc3luYyA9IChcbiAgY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sXG4gIGlzUm9vdDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbixcbiAgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgc29mZnNldDogbnVtYmVyLFxuICBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgZm9mZnNldDogbnVtYmVyLFxuICBzZWxlY3RSYW5nZTogKGNvbnRhaW5lcjogU3VnYXJFbGVtZW50PE5vZGU+LCBib3hlczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBzdGFydDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB2b2lkXG4pOiBPcHRpb25hbDxSZXNwb25zZT4gPT4ge1xuICBpZiAoIShDb21wYXJlLmVxKHN0YXJ0LCBmaW5pc2gpICYmIHNvZmZzZXQgPT09IGZvZmZzZXQpKSB7XG4gICAgcmV0dXJuIFNlbGVjdG9yRmluZC5jbG9zZXN0PEhUTUxUYWJsZUNlbGxFbGVtZW50PihzdGFydCwgJ3RkLHRoJywgaXNSb290KS5iaW5kKChzKSA9PiB7XG4gICAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGZpbmlzaCwgJ3RkLHRoJywgaXNSb290KS5iaW5kKChmKSA9PiB7XG4gICAgICAgIHJldHVybiBkZXRlY3QoY29udGFpbmVyLCBpc1Jvb3QsIHMsIGYsIHNlbGVjdFJhbmdlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJlc3BvbnNlPigpO1xuICB9XG59O1xuXG4vLyBJZiB0aGUgY2VsbHMgYXJlIGRpZmZlcmVudCwgYW5kIHRoZXJlIGlzIGEgcmVjdGFuZ2xlIHRvIGNvbm5lY3QgdGhlbSwgc2VsZWN0IHRoZSBjZWxscy5cbmNvbnN0IGRldGVjdCA9IChcbiAgY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sXG4gIGlzUm9vdDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbixcbiAgc3RhcnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sXG4gIGZpbmlzaDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PixcbiAgc2VsZWN0UmFuZ2U6IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgYm94ZXM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGZpbmlzaDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gdm9pZFxuKTogT3B0aW9uYWw8UmVzcG9uc2U+ID0+IHtcbiAgaWYgKCFDb21wYXJlLmVxKHN0YXJ0LCBmaW5pc2gpKSB7XG4gICAgcmV0dXJuIENlbGxTZWxlY3Rpb24uaWRlbnRpZnkoc3RhcnQsIGZpbmlzaCwgaXNSb290KS5iaW5kKChjZWxsU2VsKSA9PiB7XG4gICAgICBjb25zdCBib3hlcyA9IGNlbGxTZWwuYm94ZXMuZ2V0T3IoW10pO1xuICAgICAgaWYgKGJveGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgc2VsZWN0UmFuZ2UoY29udGFpbmVyLCBib3hlcywgY2VsbFNlbC5zdGFydCwgY2VsbFNlbC5maW5pc2gpO1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShSZXNwb25zZS5jcmVhdGUoXG4gICAgICAgICAgT3B0aW9uYWwuc29tZShVdGlsLm1ha2VTaXR1cyhzdGFydCwgMCwgc3RhcnQsIEF3YXJlbmVzcy5nZXRFbmQoc3RhcnQpKSksXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJlc3BvbnNlPigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJlc3BvbnNlPigpO1xuICB9XG59O1xuXG5jb25zdCB1cGRhdGUgPSAoXG4gIHJvd3M6IG51bWJlcixcbiAgY29sdW1uczogbnVtYmVyLFxuICBjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgc2VsZWN0ZWQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSxcbiAgYW5ub3RhdGlvbnM6IFNlbGVjdGlvbkFubm90YXRpb25cbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXT4gPT4ge1xuICBjb25zdCB1cGRhdGVTZWxlY3Rpb24gPSAobmV3U2VsczogSWRlbnRpZmllZEV4dCkgPT4ge1xuICAgIGFubm90YXRpb25zLmNsZWFyQmVmb3JlVXBkYXRlKGNvbnRhaW5lcik7XG4gICAgYW5ub3RhdGlvbnMuc2VsZWN0UmFuZ2UoY29udGFpbmVyLCBuZXdTZWxzLmJveGVzLCBuZXdTZWxzLnN0YXJ0LCBuZXdTZWxzLmZpbmlzaCk7XG4gICAgcmV0dXJuIG5ld1NlbHMuYm94ZXM7XG4gIH07XG5cbiAgcmV0dXJuIENlbGxTZWxlY3Rpb24uc2hpZnRTZWxlY3Rpb24oc2VsZWN0ZWQsIHJvd3MsIGNvbHVtbnMsIGFubm90YXRpb25zLmZpcnN0U2VsZWN0ZWRTZWxlY3RvciwgYW5ub3RhdGlvbnMubGFzdFNlbGVjdGVkU2VsZWN0b3IpLm1hcCh1cGRhdGVTZWxlY3Rpb24pO1xufTtcblxuZXhwb3J0IHtcbiAgc3luYyxcbiAgZGV0ZWN0LFxuICB1cGRhdGVcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBd2FyZW5lc3MsIHR5cGUgUmF3UmVjdCwgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgV2luZG93QnJpZGdlIH0gZnJvbSAnLi4vYXBpL1dpbmRvd0JyaWRnZSc7XG5cbmltcG9ydCB0eXBlICogYXMgQ2FyZXRzIGZyb20gJy4vQ2FyZXRzJztcblxudHlwZSBDYXJldHMgPSBDYXJldHMuQ2FyZXRzO1xuXG5jb25zdCBnZXRQYXJ0aWFsQm94ID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIG9mZnNldDogbnVtYmVyKSA9PiB7XG4gIGlmIChvZmZzZXQgPj0gMCAmJiBvZmZzZXQgPCBBd2FyZW5lc3MuZ2V0RW5kKGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGJyaWRnZS5nZXRSYW5nZWRSZWN0KGVsZW1lbnQsIG9mZnNldCwgZWxlbWVudCwgb2Zmc2V0ICsgMSk7XG4gIH0gZWxzZSBpZiAob2Zmc2V0ID4gMCkge1xuICAgIHJldHVybiBicmlkZ2UuZ2V0UmFuZ2VkUmVjdChlbGVtZW50LCBvZmZzZXQgLSAxLCBlbGVtZW50LCBvZmZzZXQpO1xuICB9XG4gIHJldHVybiBPcHRpb25hbC5ub25lPFJhd1JlY3Q+KCk7XG59O1xuXG5jb25zdCB0b0NhcmV0ID0gKHJlY3Q6IFJhd1JlY3QpOiBDYXJldHMgPT4gKHtcbiAgbGVmdDogcmVjdC5sZWZ0LFxuICB0b3A6IHJlY3QudG9wLFxuICByaWdodDogcmVjdC5yaWdodCxcbiAgYm90dG9tOiByZWN0LmJvdHRvbVxufSk7XG5cbmNvbnN0IGdldEVsZW1Cb3ggPSAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PikgPT4ge1xuICByZXR1cm4gT3B0aW9uYWwuc29tZShicmlkZ2UuZ2V0UmVjdChlbGVtZW50KSk7XG59O1xuXG5jb25zdCBnZXRCb3hBdCA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlcik6IE9wdGlvbmFsPENhcmV0cz4gPT4ge1xuICAvLyBOb3RlLCB3ZSBtaWdodCBuZWVkIHRvIGNvbnNpZGVyIHRoaXMgb2Zmc2V0IGFuZCBkZXNjZW5kLlxuICBpZiAoU3VnYXJOb2RlLmlzRWxlbWVudChlbGVtZW50KSkge1xuICAgIHJldHVybiBnZXRFbGVtQm94KGJyaWRnZSwgZWxlbWVudCkubWFwKHRvQ2FyZXQpO1xuICB9IGVsc2UgaWYgKFN1Z2FyTm9kZS5pc1RleHQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gZ2V0UGFydGlhbEJveChicmlkZ2UsIGVsZW1lbnQsIG9mZnNldCkubWFwKHRvQ2FyZXQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPENhcmV0cz4oKTtcbiAgfVxufTtcblxuY29uc3QgZ2V0RW50aXJlQm94ID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxDYXJldHM+ID0+IHtcbiAgaWYgKFN1Z2FyTm9kZS5pc0VsZW1lbnQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gZ2V0RWxlbUJveChicmlkZ2UsIGVsZW1lbnQpLm1hcCh0b0NhcmV0KTtcbiAgfSBlbHNlIGlmIChTdWdhck5vZGUuaXNUZXh0KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGJyaWRnZS5nZXRSYW5nZWRSZWN0KGVsZW1lbnQsIDAsIGVsZW1lbnQsIEF3YXJlbmVzcy5nZXRFbmQoZWxlbWVudCkpLm1hcCh0b0NhcmV0KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxDYXJldHM+KCk7XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIGdldEJveEF0LFxuICBnZXRFbnRpcmVCb3hcbn07XG4iLCJpbXBvcnQgeyBBZHQsIEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgRG9tR2F0aGVyIH0gZnJvbSAnQGVwaG94L3Bob2VuaXgnO1xuaW1wb3J0IHsgRG9tU3RydWN0dXJlIH0gZnJvbSAnQGVwaG94L3JvYmluJztcbmltcG9ydCB7IFByZWRpY2F0ZUZpbmQsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFdpbmRvd0JyaWRnZSB9IGZyb20gJy4uL2FwaS9XaW5kb3dCcmlkZ2UnO1xuaW1wb3J0IHR5cGUgeyBTaXR1cyB9IGZyb20gJy4uL3NlbGVjdGlvbi9TaXR1cyc7XG5cbmltcG9ydCAqIGFzIENhcmV0cyBmcm9tICcuL0NhcmV0cyc7XG5pbXBvcnQgKiBhcyBSZWN0YW5nbGVzIGZyb20gJy4vUmVjdGFuZ2xlcyc7XG5cbnR5cGUgQ2FyZXRzID0gQ2FyZXRzLkNhcmV0cztcblxudHlwZSBOb25lSGFuZGxlcjxUPiA9ICgpID0+IFQ7XG50eXBlIFJldHJ5SGFuZGxlcjxUPiA9IChjYXJldDogQ2FyZXRzKSA9PiBUO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJpZXMge1xuICBmb2xkOiA8VD4gKFxuICAgIG5vbmU6IE5vbmVIYW5kbGVyPFQ+LFxuICAgIHJldHJ5OiBSZXRyeUhhbmRsZXI8VD5cbiAgKSA9PiBUO1xuICBtYXRjaDogPFQ+KGJyYW5jaGVzOiB7XG4gICAgbm9uZTogTm9uZUhhbmRsZXI8VD47XG4gICAgcmV0cnk6IFJldHJ5SGFuZGxlcjxUPjtcbiAgfSkgPT4gVDtcbiAgbG9nOiAobGFiZWw6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJldE1vdmVtZW50IHtcbiAgcG9pbnQ6IChjYXJldDogQ2FyZXRzKSA9PiBudW1iZXI7XG4gIGFkanVzdGVyOiAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZ3Vlc3NCb3g6IENhcmV0cywgb3JpZ2luYWw6IENhcmV0cywgY2FyZXQ6IENhcmV0cykgPT4gUmV0cmllcztcbiAgbW92ZTogKGNhcmV0OiBDYXJldHMsIGFtb3VudDogbnVtYmVyKSA9PiBDYXJldHM7XG4gIGdhdGhlcjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZT4+O1xufVxuXG5jb25zdCBKVU1QX1NJWkUgPSA1O1xuY29uc3QgTlVNX1JFVFJJRVMgPSAxMDA7XG5cbmNvbnN0IGFkdDoge1xuICBub25lOiAoKSA9PiBSZXRyaWVzO1xuICByZXRyeTogKGNhcmV0OiBDYXJldHMpID0+IFJldHJpZXM7XG59ID0gQWR0LmdlbmVyYXRlKFtcbiAgeyBub25lOiBbXSB9LFxuICB7IHJldHJ5OiBbICdjYXJldCcgXSB9XG5dKTtcblxuY29uc3QgaXNPdXRzaWRlID0gKGNhcmV0OiBDYXJldHMsIGJveDogQ2FyZXRzKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBjYXJldC5sZWZ0IDwgYm94LmxlZnQgfHwgTWF0aC5hYnMoYm94LnJpZ2h0IC0gY2FyZXQubGVmdCkgPCAxIHx8IGNhcmV0LmxlZnQgPiBib3gucmlnaHQ7XG59O1xuXG4vLyBGaW5kIHRoZSBibG9jayBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IHRoYXQgYmxvY2sgaXMgb3V0c2lkZS4gSWYgaXQgaXMgb3V0c2lkZSwgbW92ZSB1cC9kb3duIGFuZCByaWdodC5cbmNvbnN0IGluT3V0c2lkZUJsb2NrID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGNhcmV0OiBDYXJldHMpID0+IHtcbiAgcmV0dXJuIFByZWRpY2F0ZUZpbmQuY2xvc2VzdChlbGVtZW50LCBEb21TdHJ1Y3R1cmUuaXNCbG9jaykuZm9sZChGdW4ubmV2ZXIsIChjZWxsKSA9PiB7XG4gICAgcmV0dXJuIFJlY3RhbmdsZXMuZ2V0RW50aXJlQm94KGJyaWRnZSwgY2VsbCkuZXhpc3RzKChib3gpID0+IHtcbiAgICAgIHJldHVybiBpc091dHNpZGUoY2FyZXQsIGJveCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLypcbiAqIFRoZSBhcHByb2FjaCBpcyBhcyBmb2xsb3dzLlxuICpcbiAqIFRoZSBicm93c2VyIEFQSXMgZm9yIGNhcmV0IHJhbmdlcyByZXR1cm4gZWxlbWVudHMgdGhhdCBhcmUgdGhlIGNsb3Nlc3QgdGV4dCBlbGVtZW50cyB0byB5b3VyICh4LCB5KSBwb3NpdGlvbiwgZXZlbiBpZiB0aG9zZVxuICogY2xvc2VzdCBlbGVtZW50cyBhcmUgbWlsZXMgYXdheS4gVGhpcyBjYXVzZXMgcHJvYmxlbXMgd2hlbiB5b3UgYXJlIHRyeWluZyB0byBpZGVudGlmeSB3aGF0IGlzIGltbWVkaWF0ZWx5IGFib3ZlIG9yIGJlbG93XG4gKiBhIGNlbGwsIGJlY2F1c2Ugb2Z0ZW4gdGhlIGNsb3Nlc3QgdGV4dCBpcyBpbiBhIGNlbGwgdGhhdCBpcyBpbiBhIGNvbXBsZXRlbHkgZGlmZmVyZW50IGNvbHVtbi4gVGhlcmVmb3JlLCB0aGUgYXBwcm9hY2ggbmVlZHNcbiAqIHRvIGtlZXAgbW92aW5nIGRvd24gdW50aWwgdGhlIHRoaW5nIHRoYXQgd2UgYXJlIGhpdHRpbmcgaXMgbGlrZWx5IHRvIGJlIGEgdHJ1ZSBwb3NpdGl2ZS5cbiAqXG4gKiBTdGVwczpcbiAqXG4gKiAxLiBJZiB0aGUgeSBwb3NpdGlvbiBvZiB0aGUgbmV4dCBndWVzcyBpcyBub3QgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsLCBrZWVwIGdvaW5nLlxuICogMmEuIElmIHRoZSBndWVzcyBib3ggZG9lc24ndCBhY3R1YWxseSBpbmNsdWRlIHRoZSBwb3NpdGlvbiBsb29rZWQgZm9yLCB0aGVuIHRoZSBicm93c2VyIGhhcyByZXR1cm5lZCBhIG5vZGUgdGhhdCBkb2VzIG5vdCBoYXZlXG4gKiAgICBhIHJlY3RhbmdsZSB3aGljaCB0cnVseSBpbnRlcmNlcHRzIHRoZSBwb2ludC4gU28sIGtlZXAgZ29pbmcuIE5vdGUsIHdlIHVzZWQgdG8ganVtcCBzdHJhaWdodCBhd2F5IGhlcmUsIGJ1dCB0aGF0IG1lYW5zIHRoYXRcbiAqICAgIHdlIG1pZ2h0IHNraXAgb3ZlciBzb21ldGhpbmcgdGhhdCB3YXNuJ3QgY29uc2lkZXJlZCBjbG9zZSBlbm91Z2ggYnV0IHdhcyBhIGJldHRlciBndWVzcyB0aGFuIGp1c3QgbWFraW5nIHRoZSB5IHZhbHVlIHNraXAuXG4gKiAyYi4gSWYgdGhlIGd1ZXNzIGJveCBleGFjdGx5IGFsaWducyB3aXRoIHRoZSBjYXJldCwgdGhlbiBhZGp1c3QgYnkgMSBhbmQgZ28gYWdhaW4uIFRoaXMgaXMgdG8gZ2V0IGEgbW9yZSBhY2N1cmF0ZSBvZmZzZXQuXG4gKiAzLiBpZiB0aGUgZ3Vlc3MgYm94IGRvZXMgaW5jbHVkZSB0aGUgY2FyZXQsIGJ1dCB0aGUgZ3Vlc3MgYm94J3MgcGFyZW50IGNlbGwgZG9lcyBub3QgKnJlYWxseSogY29udGFpbiB0aGUgY2FyZXQsIHRyeSBhZ2FpbiBzaGlmdGluZ1xuICogICAgb25seSB0aGUgeCB2YWx1ZS4gSWYgdGhlIGd1ZXNzIGJveCdzIHBhcmVudCBjZWxsIGRvZXMgKnJlYWxseSogY29udGFpbiB0aGUgY2FyZXQgKGkuZS4gaXQgaXMgaG9yaXpvbnRhbGx5LWFsaWduZWQpLCB0aGVuIHN0b3BcbiAqICAgIGJlY2F1c2UgdGhlIGd1ZXNzIGlzIEdPT0QuXG4gKi9cblxuY29uc3QgYWRqdXN0RG93biA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBndWVzc0JveDogQ2FyZXRzLCBvcmlnaW5hbDogQ2FyZXRzLCBjYXJldDogQ2FyZXRzKTogUmV0cmllcyA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FyZXQgPSBDYXJldHMubW92ZURvd24oY2FyZXQsIEpVTVBfU0laRSk7XG4gIGlmIChNYXRoLmFicyhndWVzc0JveC5ib3R0b20gLSBvcmlnaW5hbC5ib3R0b20pIDwgMSkge1xuICAgIHJldHVybiBhZHQucmV0cnkobG93ZXJDYXJldCk7XG4gIH0gZWxzZSBpZiAoZ3Vlc3NCb3gudG9wID4gY2FyZXQuYm90dG9tKSB7XG4gICAgcmV0dXJuIGFkdC5yZXRyeShsb3dlckNhcmV0KTtcbiAgfSBlbHNlIGlmIChndWVzc0JveC50b3AgPT09IGNhcmV0LmJvdHRvbSkge1xuICAgIHJldHVybiBhZHQucmV0cnkoQ2FyZXRzLm1vdmVEb3duKGNhcmV0LCAxKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGluT3V0c2lkZUJsb2NrKGJyaWRnZSwgZWxlbWVudCwgY2FyZXQpID8gYWR0LnJldHJ5KENhcmV0cy50cmFuc2xhdGUobG93ZXJDYXJldCwgSlVNUF9TSVpFLCAwKSkgOiBhZHQubm9uZSgpO1xuICB9XG59O1xuXG5jb25zdCBhZGp1c3RVcCA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBndWVzc0JveDogQ2FyZXRzLCBvcmlnaW5hbDogQ2FyZXRzLCBjYXJldDogQ2FyZXRzKTogUmV0cmllcyA9PiB7XG4gIGNvbnN0IGhpZ2hlckNhcmV0ID0gQ2FyZXRzLm1vdmVVcChjYXJldCwgSlVNUF9TSVpFKTtcbiAgaWYgKE1hdGguYWJzKGd1ZXNzQm94LnRvcCAtIG9yaWdpbmFsLnRvcCkgPCAxKSB7XG4gICAgcmV0dXJuIGFkdC5yZXRyeShoaWdoZXJDYXJldCk7XG4gIH0gZWxzZSBpZiAoZ3Vlc3NCb3guYm90dG9tIDwgY2FyZXQudG9wKSB7XG4gICAgcmV0dXJuIGFkdC5yZXRyeShoaWdoZXJDYXJldCk7XG4gIH0gZWxzZSBpZiAoZ3Vlc3NCb3guYm90dG9tID09PSBjYXJldC50b3ApIHtcbiAgICByZXR1cm4gYWR0LnJldHJ5KENhcmV0cy5tb3ZlVXAoY2FyZXQsIDEpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5PdXRzaWRlQmxvY2soYnJpZGdlLCBlbGVtZW50LCBjYXJldCkgPyBhZHQucmV0cnkoQ2FyZXRzLnRyYW5zbGF0ZShoaWdoZXJDYXJldCwgSlVNUF9TSVpFLCAwKSkgOiBhZHQubm9uZSgpO1xuICB9XG59O1xuXG5jb25zdCB1cE1vdmVtZW50OiBDYXJldE1vdmVtZW50ID0ge1xuICBwb2ludDogQ2FyZXRzLmdldFRvcCxcbiAgYWRqdXN0ZXI6IGFkanVzdFVwLFxuICBtb3ZlOiBDYXJldHMubW92ZVVwLFxuICBnYXRoZXI6IERvbUdhdGhlci5iZWZvcmVcbn07XG5cbmNvbnN0IGRvd25Nb3ZlbWVudDogQ2FyZXRNb3ZlbWVudCA9IHtcbiAgcG9pbnQ6IENhcmV0cy5nZXRCb3R0b20sXG4gIGFkanVzdGVyOiBhZGp1c3REb3duLFxuICBtb3ZlOiBDYXJldHMubW92ZURvd24sXG4gIGdhdGhlcjogRG9tR2F0aGVyLmFmdGVyXG59O1xuXG5jb25zdCBpc0F0VGFibGUgPSAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBicmlkZ2UuZWxlbWVudEZyb21Qb2ludCh4LCB5KS5maWx0ZXIoKGVsbSkgPT4ge1xuICAgIHJldHVybiBTdWdhck5vZGUubmFtZShlbG0pID09PSAndGFibGUnO1xuICB9KS5pc1NvbWUoKTtcbn07XG5cbmNvbnN0IGFkanVzdEZvclRhYmxlID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBtb3ZlbWVudDogQ2FyZXRNb3ZlbWVudCwgb3JpZ2luYWw6IENhcmV0cywgY2FyZXQ6IENhcmV0cywgbnVtUmV0cmllczogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBhZGp1c3RUaWwoYnJpZGdlLCBtb3ZlbWVudCwgb3JpZ2luYWwsIG1vdmVtZW50Lm1vdmUoY2FyZXQsIEpVTVBfU0laRSksIG51bVJldHJpZXMpO1xufTtcblxuY29uc3QgYWRqdXN0VGlsID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBtb3ZlbWVudDogQ2FyZXRNb3ZlbWVudCwgb3JpZ2luYWw6IENhcmV0cywgY2FyZXQ6IENhcmV0cywgbnVtUmV0cmllczogbnVtYmVyKTogT3B0aW9uYWw8Q2FyZXRzPiA9PiB7XG4gIGlmIChudW1SZXRyaWVzID09PSAwKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoY2FyZXQpO1xuICB9XG4gIGlmIChpc0F0VGFibGUoYnJpZGdlLCBjYXJldC5sZWZ0LCBtb3ZlbWVudC5wb2ludChjYXJldCkpKSB7XG4gICAgcmV0dXJuIGFkanVzdEZvclRhYmxlKGJyaWRnZSwgbW92ZW1lbnQsIG9yaWdpbmFsLCBjYXJldCwgbnVtUmV0cmllcyAtIDEpO1xuICB9XG5cbiAgcmV0dXJuIGJyaWRnZS5zaXR1c0Zyb21Qb2ludChjYXJldC5sZWZ0LCBtb3ZlbWVudC5wb2ludChjYXJldCkpLmJpbmQoKGd1ZXNzKSA9PiB7XG4gICAgcmV0dXJuIGd1ZXNzLnN0YXJ0LmZvbGQ8T3B0aW9uYWw8Q2FyZXRzPj4oT3B0aW9uYWwubm9uZSwgKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBSZWN0YW5nbGVzLmdldEVudGlyZUJveChicmlkZ2UsIGVsZW1lbnQpLmJpbmQoKGd1ZXNzQm94KSA9PiB7XG4gICAgICAgIHJldHVybiBtb3ZlbWVudC5hZGp1c3RlcihicmlkZ2UsIGVsZW1lbnQsIGd1ZXNzQm94LCBvcmlnaW5hbCwgY2FyZXQpLmZvbGQ8T3B0aW9uYWw8Q2FyZXRzPj4oXG4gICAgICAgICAgT3B0aW9uYWwubm9uZSxcbiAgICAgICAgICAobmV3Q2FyZXQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhZGp1c3RUaWwoYnJpZGdlLCBtb3ZlbWVudCwgb3JpZ2luYWwsIG5ld0NhcmV0LCBudW1SZXRyaWVzIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSkub3JUaHVuaygoKSA9PiB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKGNhcmV0KTtcbiAgICAgIH0pO1xuICAgIH0sIE9wdGlvbmFsLm5vbmUpO1xuICB9KTtcbn07XG5cbmNvbnN0IGNoZWNrU2Nyb2xsID0gKG1vdmVtZW50OiBDYXJldE1vdmVtZW50LCBhZGp1c3RlZDogQ2FyZXRzLCBicmlkZ2U6IFdpbmRvd0JyaWRnZSk6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICAvLyBJJ20gbm90IGNvbnZpbmNlZCB0aGF0IHRoaXMgaXMgcmlnaHQuIExldCdzIHJlLWV4YW1pbmUgaXQgbGF0ZXIuXG4gIGlmIChtb3ZlbWVudC5wb2ludChhZGp1c3RlZCkgPiBicmlkZ2UuZ2V0SW5uZXJIZWlnaHQoKSkge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKG1vdmVtZW50LnBvaW50KGFkanVzdGVkKSAtIGJyaWRnZS5nZXRJbm5lckhlaWdodCgpKTtcbiAgfSBlbHNlIGlmIChtb3ZlbWVudC5wb2ludChhZGp1c3RlZCkgPCAwKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoLW1vdmVtZW50LnBvaW50KGFkanVzdGVkKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8bnVtYmVyPigpO1xuICB9XG59O1xuXG5jb25zdCByZXRyeSA9IChtb3ZlbWVudDogQ2FyZXRNb3ZlbWVudCwgYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGNhcmV0OiBDYXJldHMpOiBPcHRpb25hbDxTaXR1cz4gPT4ge1xuICBjb25zdCBtb3ZlZCA9IG1vdmVtZW50Lm1vdmUoY2FyZXQsIEpVTVBfU0laRSk7XG4gIGNvbnN0IGFkanVzdGVkID0gYWRqdXN0VGlsKGJyaWRnZSwgbW92ZW1lbnQsIGNhcmV0LCBtb3ZlZCwgTlVNX1JFVFJJRVMpLmdldE9yKG1vdmVkKTtcbiAgcmV0dXJuIGNoZWNrU2Nyb2xsKG1vdmVtZW50LCBhZGp1c3RlZCwgYnJpZGdlKS5mb2xkKCgpID0+IHtcbiAgICByZXR1cm4gYnJpZGdlLnNpdHVzRnJvbVBvaW50KGFkanVzdGVkLmxlZnQsIG1vdmVtZW50LnBvaW50KGFkanVzdGVkKSk7XG4gIH0sIChkZWx0YSkgPT4ge1xuICAgIGJyaWRnZS5zY3JvbGxCeSgwLCBkZWx0YSk7XG4gICAgcmV0dXJuIGJyaWRnZS5zaXR1c0Zyb21Qb2ludChhZGp1c3RlZC5sZWZ0LCBtb3ZlbWVudC5wb2ludChhZGp1c3RlZCkgLSBkZWx0YSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IFJldHJpZXMgPSB7XG4gIHRyeVVwOiBGdW4uY3VycnkocmV0cnksIHVwTW92ZW1lbnQpLFxuICB0cnlEb3duOiBGdW4uY3VycnkocmV0cnksIGRvd25Nb3ZlbWVudCksXG4gIGdldEp1bXBTaXplOiBGdW4uY29uc3RhbnQoSlVNUF9TSVpFKVxufTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFNwb3QsIHR5cGUgU3BvdFBvaW50IH0gZnJvbSAnQGVwaG94L3Bob2VuaXgnO1xuaW1wb3J0IHsgUGxhdGZvcm1EZXRlY3Rpb24gfSBmcm9tICdAZXBob3gvc2FuZCc7XG5pbXBvcnQgeyBBd2FyZW5lc3MsIENvbXBhcmUsIHR5cGUgU2ltUmFuZ2UsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBXaW5kb3dCcmlkZ2UgfSBmcm9tICcuLi9hcGkvV2luZG93QnJpZGdlJztcbmltcG9ydCB7IEJlZm9yZUFmdGVyIH0gZnJvbSAnLi4vbmF2aWdhdGlvbi9CZWZvcmVBZnRlcic7XG5pbXBvcnQgKiBhcyBCclRhZ3MgZnJvbSAnLi4vbmF2aWdhdGlvbi9CclRhZ3MnO1xuaW1wb3J0IHR5cGUgeyBLZXlEaXJlY3Rpb24gfSBmcm9tICcuLi9uYXZpZ2F0aW9uL0tleURpcmVjdGlvbic7XG5pbXBvcnQgdHlwZSB7IFNpdHVzIH0gZnJvbSAnLi4vc2VsZWN0aW9uL1NpdHVzJztcblxuaW1wb3J0ICogYXMgQ2FyZXRzIGZyb20gJy4vQ2FyZXRzJztcbmltcG9ydCAqIGFzIFJlY3RhbmdsZXMgZnJvbSAnLi9SZWN0YW5nbGVzJztcbmltcG9ydCB7IFJldHJpZXMgfSBmcm9tICcuL1JldHJpZXMnO1xuXG50eXBlIENhcmV0cyA9IENhcmV0cy5DYXJldHM7XG5cbmNvbnN0IE1BWF9SRVRSSUVTID0gMjA7XG5cbmNvbnN0IGZpbmRTcG90ID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4sIGRpcmVjdGlvbjogS2V5RGlyZWN0aW9uKTogT3B0aW9uYWw8U3BvdFBvaW50PFN1Z2FyRWxlbWVudDxOb2RlPj4+ID0+IHtcbiAgcmV0dXJuIGJyaWRnZS5nZXRTZWxlY3Rpb24oKS5iaW5kKChzZWwpID0+IHtcbiAgICByZXR1cm4gQnJUYWdzLnRyeUJyKGlzUm9vdCwgc2VsLmZpbmlzaCwgc2VsLmZvZmZzZXQsIGRpcmVjdGlvbikuZm9sZCgoKSA9PiB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShTcG90LnBvaW50KHNlbC5maW5pc2gsIHNlbC5mb2Zmc2V0KSk7XG4gICAgfSwgKGJyTmVpZ2hib3VyKSA9PiB7XG4gICAgICBjb25zdCByYW5nZSA9IGJyaWRnZS5mcm9tU2l0dXMoYnJOZWlnaGJvdXIpO1xuICAgICAgY29uc3QgYW5hbHlzaXMgPSBCZWZvcmVBZnRlci52ZXJpZnkoYnJpZGdlLCBzZWwuZmluaXNoLCBzZWwuZm9mZnNldCwgcmFuZ2UuZmluaXNoLCByYW5nZS5mb2Zmc2V0LCBkaXJlY3Rpb24uZmFpbHVyZSwgaXNSb290KTtcbiAgICAgIHJldHVybiBCclRhZ3MucHJvY2VzcyhhbmFseXNpcyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2NhbiA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIG9mZnNldDogbnVtYmVyLCBkaXJlY3Rpb246IEtleURpcmVjdGlvbiwgbnVtUmV0cmllczogbnVtYmVyKTogT3B0aW9uYWw8U2l0dXM+ID0+IHtcbiAgaWYgKG51bVJldHJpZXMgPT09IDApIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICB9XG4gIC8vIEZpcnN0bHksIG1vdmUgdGhlICh4LCB5KSBhbmQgc2VlIHdoYXQgZWxlbWVudCB3ZSBlbmQgdXAgb24uXG4gIHJldHVybiB0cnlDdXJzb3IoYnJpZGdlLCBpc1Jvb3QsIGVsZW1lbnQsIG9mZnNldCwgZGlyZWN0aW9uKS5iaW5kKChzaXR1cykgPT4ge1xuICAgIGNvbnN0IHJhbmdlID0gYnJpZGdlLmZyb21TaXR1cyhzaXR1cyk7XG4gICAgLy8gTm93LCBjaGVjayB0byBzZWUgaWYgdGhlIGVsZW1lbnQgaXMgYSBuZXcgY2VsbC5cbiAgICBjb25zdCBhbmFseXNpcyA9IEJlZm9yZUFmdGVyLnZlcmlmeShicmlkZ2UsIGVsZW1lbnQsIG9mZnNldCwgcmFuZ2UuZmluaXNoLCByYW5nZS5mb2Zmc2V0LCBkaXJlY3Rpb24uZmFpbHVyZSwgaXNSb290KTtcbiAgICByZXR1cm4gQmVmb3JlQWZ0ZXIuY2F0YShhbmFseXNpcywgKCkgPT4ge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8U2l0dXM+KCk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgLy8gV2UgaGF2ZSBhIG5ldyBjZWxsLCBzbyB3ZSBzdG9wIGxvb2tpbmcuXG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShzaXR1cyk7XG4gICAgfSwgKGNlbGwpID0+IHtcbiAgICAgIGlmIChDb21wYXJlLmVxKGVsZW1lbnQsIGNlbGwpICYmIG9mZnNldCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHJ5QWdhaW4oYnJpZGdlLCBlbGVtZW50LCBvZmZzZXQsIENhcmV0cy5tb3ZlVXAsIGRpcmVjdGlvbik7XG4gICAgICB9IGVsc2UgeyAvLyBXZSBuZWVkIHRvIGxvb2sgYWdhaW4gZnJvbSB0aGUgc3RhcnQgb2Ygb3VyIGN1cnJlbnQgY2VsbFxuICAgICAgICByZXR1cm4gc2NhbihicmlkZ2UsIGlzUm9vdCwgY2VsbCwgMCwgZGlyZWN0aW9uLCBudW1SZXRyaWVzIC0gMSk7XG4gICAgICB9XG4gICAgfSwgKGNlbGwpID0+IHtcbiAgICAgIC8vIElmIHdlIHdlcmUgaGVyZSBsYXN0IHRpbWUsIG1vdmUgYW5kIHRyeSBhZ2Fpbi5cbiAgICAgIGlmIChDb21wYXJlLmVxKGVsZW1lbnQsIGNlbGwpICYmIG9mZnNldCA9PT0gQXdhcmVuZXNzLmdldEVuZChjZWxsKSkge1xuICAgICAgICByZXR1cm4gdHJ5QWdhaW4oYnJpZGdlLCBlbGVtZW50LCBvZmZzZXQsIENhcmV0cy5tb3ZlRG93biwgZGlyZWN0aW9uKTtcbiAgICAgIH0gZWxzZSB7IC8vIFdlIG5lZWQgdG8gbG9vayBhZ2FpbiBmcm9tIHRoZSBlbmQgb2Ygb3VyIGN1cnJlbnQgY2VsbFxuICAgICAgICByZXR1cm4gc2NhbihicmlkZ2UsIGlzUm9vdCwgY2VsbCwgQXdhcmVuZXNzLmdldEVuZChjZWxsKSwgZGlyZWN0aW9uLCBudW1SZXRyaWVzIC0gMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgdHJ5QWdhaW4gPSAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIsIG1vdmU6IChjYXJldHM6IENhcmV0cywganVtcDogbnVtYmVyKSA9PiBDYXJldHMsIGRpcmVjdGlvbjogS2V5RGlyZWN0aW9uKTogT3B0aW9uYWw8U2l0dXM+ID0+IHtcbiAgcmV0dXJuIFJlY3RhbmdsZXMuZ2V0Qm94QXQoYnJpZGdlLCBlbGVtZW50LCBvZmZzZXQpLmJpbmQoKGJveCkgPT4ge1xuICAgIHJldHVybiB0cnlBdChicmlkZ2UsIGRpcmVjdGlvbiwgbW92ZShib3gsIFJldHJpZXMuZ2V0SnVtcFNpemUoKSkpO1xuICB9KTtcbn07XG5cbmNvbnN0IHRyeUF0ID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBkaXJlY3Rpb246IEtleURpcmVjdGlvbiwgYm94OiBDYXJldHMpOiBPcHRpb25hbDxTaXR1cz4gPT4ge1xuICBjb25zdCBicm93c2VyID0gUGxhdGZvcm1EZXRlY3Rpb24uZGV0ZWN0KCkuYnJvd3NlcjtcbiAgLy8gTk9URTogQXMgd2UgYXR0ZW1wdCB0byB0YWtlIG92ZXIgc2VsZWN0aW9uIGV2ZXJ5d2hlcmUsIHdlJ2xsIHByb2JhYmx5IG5lZWQgdG8gc2VwYXJhdGUgdGhlc2UgYWdhaW4uXG4gIGlmIChicm93c2VyLmlzQ2hyb21pdW0oKSB8fCBicm93c2VyLmlzU2FmYXJpKCkgfHwgYnJvd3Nlci5pc0ZpcmVmb3goKSkge1xuICAgIHJldHVybiBkaXJlY3Rpb24ucmV0cnkoYnJpZGdlLCBib3gpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFNpdHVzPigpO1xuICB9XG59O1xuXG5jb25zdCB0cnlDdXJzb3IgPSAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlciwgZGlyZWN0aW9uOiBLZXlEaXJlY3Rpb24pOiBPcHRpb25hbDxTaXR1cz4gPT4ge1xuICByZXR1cm4gUmVjdGFuZ2xlcy5nZXRCb3hBdChicmlkZ2UsIGVsZW1lbnQsIG9mZnNldCkuYmluZCgoYm94KSA9PiB7XG4gICAgcmV0dXJuIHRyeUF0KGJyaWRnZSwgZGlyZWN0aW9uLCBib3gpO1xuICB9KTtcbn07XG5cbmNvbnN0IGhhbmRsZSA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBkaXJlY3Rpb246IEtleURpcmVjdGlvbik6IE9wdGlvbmFsPFNpbVJhbmdlPiA9PiB7XG4gIHJldHVybiBmaW5kU3BvdChicmlkZ2UsIGlzUm9vdCwgZGlyZWN0aW9uKS5iaW5kKChzcG90KSA9PiB7XG4gICAgLy8gVGhlcmUgaXMgYSBwb2ludCB0byBzdGFydCBkb2luZyBib3gtaGl0dGluZyBmcm9tXG4gICAgcmV0dXJuIHNjYW4oYnJpZGdlLCBpc1Jvb3QsIHNwb3QuZWxlbWVudCwgc3BvdC5vZmZzZXQsIGRpcmVjdGlvbiwgTUFYX1JFVFJJRVMpLm1hcChicmlkZ2UuZnJvbVNpdHVzKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBoYW5kbGVcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21HYXRoZXIgfSBmcm9tICdAZXBob3gvcGhvZW5peCc7XG5pbXBvcnQgeyBBd2FyZW5lc3MsIENvbXBhcmUsIEN1cnNvclBvc2l0aW9uLCBQcmVkaWNhdGVFeGlzdHMsIFNlbGVjdG9yRmlsdGVyLCBTZWxlY3RvckZpbmQsIHR5cGUgU2ltUmFuZ2UsIHR5cGUgU3VnYXJFbGVtZW50LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgV2luZG93QnJpZGdlIH0gZnJvbSAnLi4vYXBpL1dpbmRvd0JyaWRnZSc7XG5pbXBvcnQgdHlwZSB7IEtleURpcmVjdGlvbiB9IGZyb20gJy4uL25hdmlnYXRpb24vS2V5RGlyZWN0aW9uJztcbmltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vc2VsZWN0aW9uL1Jlc3BvbnNlJztcbmltcG9ydCAqIGFzIFV0aWwgZnJvbSAnLi4vc2VsZWN0aW9uL1V0aWwnO1xuXG5pbXBvcnQgKiBhcyBLZXlTZWxlY3Rpb24gZnJvbSAnLi9LZXlTZWxlY3Rpb24nO1xuaW1wb3J0ICogYXMgVGFibGVLZXlzIGZyb20gJy4vVGFibGVLZXlzJztcblxuaW50ZXJmYWNlIFNpbXVsYXRlZCB7XG4gIHJlYWRvbmx5IHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IHJhbmdlOiBTaW1SYW5nZTtcbn1cblxuY29uc3QgaW5TYW1lVGFibGUgPSAoZWxlbTogU3VnYXJFbGVtZW50PE5vZGU+LCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBQcmVkaWNhdGVFeGlzdHMuYW5jZXN0b3IoZWxlbSwgKGUpID0+IHtcbiAgICByZXR1cm4gVHJhdmVyc2UucGFyZW50KGUpLmV4aXN0cygocCkgPT4ge1xuICAgICAgcmV0dXJuIENvbXBhcmUuZXEocCwgdGFibGUpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8vIE5vdGU6IGluaXRpYWwgaXMgdGhlIGZpbmlzaGluZyBlbGVtZW50LCBiZWNhdXNlIHRoYXQncyB3aGVyZSB0aGUgY3Vyc29yIHN0YXJ0cyBmcm9tXG4vLyBBbmNob3IgaXMgdGhlIHN0YXJ0aW5nIGVsZW1lbnQsIGFuZCBpcyBvbmx5IHVzZWQgdG8gd29yayBvdXQgaWYgd2UgYXJlIGluIHRoZSBzYW1lIHRhYmxlXG5jb25zdCBzaW11bGF0ZSA9IChicmlkZ2U6IFdpbmRvd0JyaWRnZSwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBkaXJlY3Rpb246IEtleURpcmVjdGlvbiwgaW5pdGlhbDogU3VnYXJFbGVtZW50PE5vZGU+LCBhbmNob3I6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFNpbXVsYXRlZD4gPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGluaXRpYWwsICd0ZCx0aCcsIGlzUm9vdCkuYmluZCgoc3RhcnQpID0+IHtcbiAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlRWxlbWVudD4oc3RhcnQsICd0YWJsZScsIGlzUm9vdCkuYmluZCgodGFibGUpID0+IHtcbiAgICAgIGlmICghaW5TYW1lVGFibGUoYW5jaG9yLCB0YWJsZSkpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8U2ltdWxhdGVkPigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFRhYmxlS2V5cy5oYW5kbGUoYnJpZGdlLCBpc1Jvb3QsIGRpcmVjdGlvbikuYmluZCgocmFuZ2UpID0+IHtcbiAgICAgICAgcmV0dXJuIFNlbGVjdG9yRmluZC5jbG9zZXN0PEhUTUxUYWJsZUNlbGxFbGVtZW50PihyYW5nZS5maW5pc2gsICd0ZCx0aCcsIGlzUm9vdCkubWFwPFNpbXVsYXRlZD4oKGZpbmlzaCkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGZpbmlzaCxcbiAgICAgICAgICAgIHJhbmdlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBuYXZpZ2F0ZSA9IChcbiAgYnJpZGdlOiBXaW5kb3dCcmlkZ2UsXG4gIGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbixcbiAgZGlyZWN0aW9uOiBLZXlEaXJlY3Rpb24sXG4gIGluaXRpYWw6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgYW5jaG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4sXG4gIHByZWNoZWNrOiAoaW5pdGlhbDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+IE9wdGlvbmFsPFJlc3BvbnNlPlxuKTogT3B0aW9uYWw8UmVzcG9uc2U+ID0+IHtcbiAgcmV0dXJuIHByZWNoZWNrKGluaXRpYWwsIGlzUm9vdCkub3JUaHVuaygoKSA9PiB7XG4gICAgcmV0dXJuIHNpbXVsYXRlKGJyaWRnZSwgaXNSb290LCBkaXJlY3Rpb24sIGluaXRpYWwsIGFuY2hvcikubWFwKChpbmZvKSA9PiB7XG4gICAgICBjb25zdCByYW5nZSA9IGluZm8ucmFuZ2U7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuY3JlYXRlKFxuICAgICAgICBPcHRpb25hbC5zb21lKFV0aWwubWFrZVNpdHVzKHJhbmdlLnN0YXJ0LCByYW5nZS5zb2Zmc2V0LCByYW5nZS5maW5pc2gsIHJhbmdlLmZvZmZzZXQpKSxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBmaXJzdFVwQ2hlY2sgPSAoaW5pdGlhbDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxSZXNwb25zZT4gPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlUm93RWxlbWVudD4oaW5pdGlhbCwgJ3RyJywgaXNSb290KS5iaW5kKChzdGFydFJvdykgPT4ge1xuICAgIHJldHVybiBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVFbGVtZW50PihzdGFydFJvdywgJ3RhYmxlJywgaXNSb290KS5iaW5kKCh0YWJsZSkgPT4ge1xuICAgICAgY29uc3Qgcm93cyA9IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzKHRhYmxlLCAndHInKTtcbiAgICAgIGlmIChDb21wYXJlLmVxKHN0YXJ0Um93LCByb3dzWzBdKSkge1xuICAgICAgICByZXR1cm4gRG9tR2F0aGVyLnNlZWtMZWZ0KHRhYmxlLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIHJldHVybiBDdXJzb3JQb3NpdGlvbi5sYXN0KGVsZW1lbnQpLmlzU29tZSgpO1xuICAgICAgICB9LCBpc1Jvb3QpLm1hcCgobGFzdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhc3RPZmZzZXQgPSBBd2FyZW5lc3MuZ2V0RW5kKGxhc3QpO1xuICAgICAgICAgIHJldHVybiBSZXNwb25zZS5jcmVhdGUoXG4gICAgICAgICAgICBPcHRpb25hbC5zb21lKFV0aWwubWFrZVNpdHVzKGxhc3QsIGxhc3RPZmZzZXQsIGxhc3QsIGxhc3RPZmZzZXQpKSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJlc3BvbnNlPigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGxhc3REb3duQ2hlY2sgPSAoaW5pdGlhbDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxSZXNwb25zZT4gPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlUm93RWxlbWVudD4oaW5pdGlhbCwgJ3RyJywgaXNSb290KS5iaW5kKChzdGFydFJvdykgPT4ge1xuICAgIHJldHVybiBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVFbGVtZW50PihzdGFydFJvdywgJ3RhYmxlJywgaXNSb290KS5iaW5kKCh0YWJsZSkgPT4ge1xuICAgICAgY29uc3Qgcm93cyA9IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzKHRhYmxlLCAndHInKTtcbiAgICAgIGlmIChDb21wYXJlLmVxKHN0YXJ0Um93LCByb3dzW3Jvd3MubGVuZ3RoIC0gMV0pKSB7XG4gICAgICAgIHJldHVybiBEb21HYXRoZXIuc2Vla1JpZ2h0KHRhYmxlLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgIHJldHVybiBDdXJzb3JQb3NpdGlvbi5maXJzdChlbGVtZW50KS5pc1NvbWUoKTtcbiAgICAgICAgfSwgaXNSb290KS5tYXAoKGZpcnN0KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmNyZWF0ZShcbiAgICAgICAgICAgIE9wdGlvbmFsLnNvbWUoVXRpbC5tYWtlU2l0dXMoZmlyc3QsIDAsIGZpcnN0LCAwKSksXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxSZXNwb25zZT4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZWxlY3QgPSAoXG4gIGJyaWRnZTogV2luZG93QnJpZGdlLFxuICBjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLFxuICBkaXJlY3Rpb246IEtleURpcmVjdGlvbixcbiAgaW5pdGlhbDogU3VnYXJFbGVtZW50PE5vZGU+LFxuICBhbmNob3I6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgc2VsZWN0UmFuZ2U6IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgYm94ZXM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSwgc3RhcnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGZpbmlzaDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gdm9pZFxuKTogT3B0aW9uYWw8UmVzcG9uc2U+ID0+IHtcbiAgcmV0dXJuIHNpbXVsYXRlKGJyaWRnZSwgaXNSb290LCBkaXJlY3Rpb24sIGluaXRpYWwsIGFuY2hvcikuYmluZCgoaW5mbykgPT4ge1xuICAgIHJldHVybiBLZXlTZWxlY3Rpb24uZGV0ZWN0KGNvbnRhaW5lciwgaXNSb290LCBpbmZvLnN0YXJ0LCBpbmZvLmZpbmlzaCwgc2VsZWN0UmFuZ2UpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIG5hdmlnYXRlLFxuICBzZWxlY3QsXG4gIGZpcnN0VXBDaGVjayxcbiAgbGFzdERvd25DaGVja1xufTtcbiIsImltcG9ydCB7IHR5cGUgT3B0aW9uYWwsIE9wdGlvbmFscywgU2luZ2xldG9uIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IENvbXBhcmUsIENvbnRlbnRFZGl0YWJsZSwgdHlwZSBFdmVudEFyZ3MsIFNlbGVjdG9yRmluZCwgdHlwZSBTdWdhckVsZW1lbnQsIFRyYXZlcnNlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBTZWxlY3Rpb25Bbm5vdGF0aW9uIH0gZnJvbSAnLi4vYXBpL1NlbGVjdGlvbkFubm90YXRpb24nO1xuaW1wb3J0IHR5cGUgeyBXaW5kb3dCcmlkZ2UgfSBmcm9tICcuLi9hcGkvV2luZG93QnJpZGdlJztcbmltcG9ydCAqIGFzIENlbGxTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL0NlbGxTZWxlY3Rpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vdXNlU2VsZWN0aW9uIHtcbiAgcmVhZG9ubHkgY2xlYXJzdGF0ZTogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgbW91c2Vkb3duOiAoZXZlbnQ6IEV2ZW50QXJnczxNb3VzZUV2ZW50PikgPT4gdm9pZDtcbiAgcmVhZG9ubHkgbW91c2VvdmVyOiAoZXZlbnQ6IEV2ZW50QXJnczxNb3VzZUV2ZW50PikgPT4gdm9pZDtcbiAgcmVhZG9ubHkgbW91c2V1cDogKGV2ZW50OiBFdmVudEFyZ3M8TW91c2VFdmVudD4pID0+IHZvaWQ7XG59XG5cbmNvbnN0IGZpbmRDZWxsID0gKHRhcmdldDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PlxuICBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVDZWxsRWxlbWVudD4odGFyZ2V0LCAndGQsdGgnLCBpc1Jvb3QpO1xuXG5jb25zdCBpc0luRWRpdGFibGVDb250ZXh0ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+XG4gIFRyYXZlcnNlLnBhcmVudEVsZW1lbnQoY2VsbCkuZXhpc3RzKENvbnRlbnRFZGl0YWJsZS5pc0VkaXRhYmxlKTtcblxuZXhwb3J0IGNvbnN0IE1vdXNlU2VsZWN0aW9uID0gKGJyaWRnZTogV2luZG93QnJpZGdlLCBjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBhbm5vdGF0aW9uczogU2VsZWN0aW9uQW5ub3RhdGlvbik6IE1vdXNlU2VsZWN0aW9uID0+IHtcbiAgY29uc3QgY3Vyc29yID0gU2luZ2xldG9uLnZhbHVlPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+KCk7XG4gIGNvbnN0IGNsZWFyc3RhdGUgPSBjdXJzb3IuY2xlYXI7XG5cbiAgY29uc3QgYXBwbHlTZWxlY3Rpb24gPSAoZXZlbnQ6IEV2ZW50QXJnczxNb3VzZUV2ZW50PikgPT4ge1xuICAgIGN1cnNvci5vbigoc3RhcnQpID0+IHtcbiAgICAgIGFubm90YXRpb25zLmNsZWFyQmVmb3JlVXBkYXRlKGNvbnRhaW5lcik7XG4gICAgICBmaW5kQ2VsbChldmVudC50YXJnZXQsIGlzUm9vdCkuZWFjaCgoZmluaXNoKSA9PiB7XG4gICAgICAgIENlbGxTZWxlY3Rpb24uaWRlbnRpZnkoc3RhcnQsIGZpbmlzaCwgaXNSb290KS5lYWNoKChjZWxsU2VsKSA9PiB7XG4gICAgICAgICAgY29uc3QgYm94ZXMgPSBjZWxsU2VsLmJveGVzLmdldE9yKFtdKTtcbiAgICAgICAgICBpZiAoYm94ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBJZiBhIHNpbmdsZSBub25lZGl0YWJsZSBjZWxsIGlzIHNlbGVjdGVkIGFuZCB0aGUgYWN0dWFsIHNlbGVjdGlvbiB0YXJnZXQgd2l0aGluIHRoZSBjZWxsXG4gICAgICAgICAgICAvLyBpcyBhbHNvIG5vbmVkaXRhYmxlLCBtYWtlIHN1cmUgaXQgaXMgYW5ub3RhdGVkXG4gICAgICAgICAgICBjb25zdCBzaW5nbGVDZWxsID0gYm94ZXNbMF07XG4gICAgICAgICAgICBjb25zdCBpc05vbkVkaXRhYmxlQ2VsbCA9IENvbnRlbnRFZGl0YWJsZS5nZXRSYXcoc2luZ2xlQ2VsbCkgPT09ICdmYWxzZSc7XG4gICAgICAgICAgICBjb25zdCBpc0NlbGxDbG9zZXN0Q29udGVudEVkaXRhYmxlID0gT3B0aW9uYWxzLmlzKENvbnRlbnRFZGl0YWJsZS5jbG9zZXN0KGV2ZW50LnRhcmdldCksIHNpbmdsZUNlbGwsIENvbXBhcmUuZXEpO1xuICAgICAgICAgICAgaWYgKGlzTm9uRWRpdGFibGVDZWxsICYmIGlzQ2VsbENsb3Nlc3RDb250ZW50RWRpdGFibGUpIHtcbiAgICAgICAgICAgICAgLy8gTm90IHNlbGVjdGluZyB0aGUgY29udGVudHMgb3IgdGhlIG5vZGUgb2YgdGhlIGFjdHVhbCBjZWxsIGFzIHNob3duIGJlbG93LCBrZWVwaW5nIHRoZSBzZWxlY3Rpb24gb24gdGhlIG9mZnNjcmVlbiBlbGVtZW50LlxuICAgICAgICAgICAgICBhbm5vdGF0aW9ucy5zZWxlY3RSYW5nZShjb250YWluZXIsIGJveGVzLCBzaW5nbGVDZWxsLCBzaW5nbGVDZWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGJveGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgd2UgaGF2ZSBtb3JlIHRoYW4gb25lLCBvdGhlcndpc2UgeW91IGNhbid0IGRvIHRleHQgc2VsZWN0aW9uIGluc2lkZSBhIGNlbGwuXG4gICAgICAgICAgICBhbm5vdGF0aW9ucy5zZWxlY3RSYW5nZShjb250YWluZXIsIGJveGVzLCBjZWxsU2VsLnN0YXJ0LCBjZWxsU2VsLmZpbmlzaCk7XG5cbiAgICAgICAgICAgIC8vIHN0b3AgdGhlIGJyb3dzZXIgZnJvbSBjcmVhdGluZyBhIGJpZyB0ZXh0IHNlbGVjdGlvbiwgc2VsZWN0IHRoZSBjZWxsIHdoZXJlIHRoZSBjdXJzb3IgaXNcbiAgICAgICAgICAgIGJyaWRnZS5zZWxlY3RDb250ZW50cyhmaW5pc2gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvKiBLZWVwIHRoaXMgYXMgbGlnaHR3ZWlnaHQgYXMgcG9zc2libGUgd2hlbiB3ZSdyZSBub3QgaW4gYSB0YWJsZSBzZWxlY3Rpb24sIGl0IHJ1bnMgY29uc3RhbnRseSAqL1xuICBjb25zdCBtb3VzZWRvd24gPSAoZXZlbnQ6IEV2ZW50QXJnczxNb3VzZUV2ZW50PikgPT4ge1xuICAgIGFubm90YXRpb25zLmNsZWFyKGNvbnRhaW5lcik7XG4gICAgZmluZENlbGwoZXZlbnQudGFyZ2V0LCBpc1Jvb3QpLmZpbHRlcihpc0luRWRpdGFibGVDb250ZXh0KS5lYWNoKGN1cnNvci5zZXQpO1xuICB9O1xuXG4gIC8qIEtlZXAgdGhpcyBhcyBsaWdodHdlaWdodCBhcyBwb3NzaWJsZSB3aGVuIHdlJ3JlIG5vdCBpbiBhIHRhYmxlIHNlbGVjdGlvbiwgaXQgcnVucyBjb25zdGFudGx5ICovXG4gIGNvbnN0IG1vdXNlb3ZlciA9IChldmVudDogRXZlbnRBcmdzPE1vdXNlRXZlbnQ+KSA9PiB7XG4gICAgYXBwbHlTZWxlY3Rpb24oZXZlbnQpO1xuICB9O1xuXG4gIC8qIEtlZXAgdGhpcyBhcyBsaWdodHdlaWdodCBhcyBwb3NzaWJsZSB3aGVuIHdlJ3JlIG5vdCBpbiBhIHRhYmxlIHNlbGVjdGlvbiwgaXQgcnVucyBjb25zdGFudGx5ICovXG4gIGNvbnN0IG1vdXNldXAgPSAoZXZlbnQ6IEV2ZW50QXJnczxNb3VzZUV2ZW50PikgPT4ge1xuICAgIC8vIE5lZWRlZCBhcyBGaXJlZm94IHdpbGwgY2hhbmdlIHRoZSBzZWxlY3Rpb24gYmV0d2VlbiB0aGUgbW91c2VvdmVyIGFuZCBtb3VzZXVwIHdoZW4gc2VsZWN0aW5nXG4gICAgLy8ganVzdCAyIGNlbGxzIGFzIEZpcmVmb3ggc3VwcG9ydHMgbXVsdGlwbGUgc2VsZWN0aW9uIHJhbmdlc1xuICAgIGFwcGx5U2VsZWN0aW9uKGV2ZW50KTtcbiAgICBjbGVhcnN0YXRlKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjbGVhcnN0YXRlLFxuICAgIG1vdXNlZG93bixcbiAgICBtb3VzZW92ZXIsXG4gICAgbW91c2V1cFxuICB9O1xufTtcbiIsImltcG9ydCB7IEFkdCwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21QYXJlbnQgfSBmcm9tICdAZXBob3gvcm9iaW4nO1xuaW1wb3J0IHsgQXdhcmVuZXNzLCBDb21wYXJlLCBTZWxlY3RvckZpbmQsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBXaW5kb3dCcmlkZ2UgfSBmcm9tICcuLi9hcGkvV2luZG93QnJpZGdlJztcblxudHlwZSBOb25lSGFuZGxlcjxUPiA9IChtZXNzYWdlOiBzdHJpbmcpID0+IFQ7XG50eXBlIFN1Y2Nlc3NIYW5kbGVyPFQ+ID0gKCkgPT4gVDtcbnR5cGUgRmFpbGVkVXBIYW5kbGVyPFQ+ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFQ7XG50eXBlIEZhaWxlZERvd25IYW5kbGVyPFQ+ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmVmb3JlQWZ0ZXIge1xuICBmb2xkOiA8VD4gKFxuICAgIG5vbmU6IE5vbmVIYW5kbGVyPFQ+LFxuICAgIHN1Y2Nlc3M6IFN1Y2Nlc3NIYW5kbGVyPFQ+LFxuICAgIGZhaWxlZFVwOiBGYWlsZWRVcEhhbmRsZXI8VD4sXG4gICAgZmFpbGVkRG93bjogRmFpbGVkRG93bkhhbmRsZXI8VD4sXG4gICkgPT4gVDtcbiAgbWF0Y2g6IDxUPihicmFuY2hlczoge1xuICAgIG5vbmU6IE5vbmVIYW5kbGVyPFQ+O1xuICAgIHN1Y2Nlc3M6IFN1Y2Nlc3NIYW5kbGVyPFQ+O1xuICAgIGZhaWxlZFVwOiBGYWlsZWRVcEhhbmRsZXI8VD47XG4gICAgZmFpbGVkRG93bjogRmFpbGVkRG93bkhhbmRsZXI8VD47XG4gIH0pID0+IFQ7XG4gIGxvZzogKGxhYmVsOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIEJlZm9yZUFmdGVyRmFpbHVyZUNvbnN0cnVjdG9yID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IEJlZm9yZUFmdGVyO1xuXG5jb25zdCBhZHQ6IHtcbiAgbm9uZTogKG1lc3NhZ2U6IHN0cmluZykgPT4gQmVmb3JlQWZ0ZXI7XG4gIHN1Y2Nlc3M6ICgpID0+IEJlZm9yZUFmdGVyO1xuICBmYWlsZWRVcDogQmVmb3JlQWZ0ZXJGYWlsdXJlQ29uc3RydWN0b3I7XG4gIGZhaWxlZERvd246IEJlZm9yZUFmdGVyRmFpbHVyZUNvbnN0cnVjdG9yO1xufSA9IEFkdC5nZW5lcmF0ZShbXG4gIHsgbm9uZTogWyAnbWVzc2FnZScgXSB9LFxuICB7IHN1Y2Nlc3M6IFtdIH0sXG4gIHsgZmFpbGVkVXA6IFsgJ2NlbGwnIF0gfSxcbiAgeyBmYWlsZWREb3duOiBbICdjZWxsJyBdIH1cbl0pO1xuXG4vLyBMZXQncyBnZXQgc29tZSBib3VuZGluZyByZWN0cywgYW5kIHNlZSBpZiB0aGV5IG92ZXJsYXAgKHgtd2lzZSlcbmNvbnN0IGlzT3ZlcmxhcHBpbmcgPSAoYnJpZGdlOiBXaW5kb3dCcmlkZ2UsIGJlZm9yZTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBhZnRlcjogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGJlZm9yZUJvdW5kcyA9IGJyaWRnZS5nZXRSZWN0KGJlZm9yZSk7XG4gIGNvbnN0IGFmdGVyQm91bmRzID0gYnJpZGdlLmdldFJlY3QoYWZ0ZXIpO1xuICByZXR1cm4gYWZ0ZXJCb3VuZHMucmlnaHQgPiBiZWZvcmVCb3VuZHMubGVmdCAmJiBhZnRlckJvdW5kcy5sZWZ0IDwgYmVmb3JlQm91bmRzLnJpZ2h0O1xufTtcblxuY29uc3QgaXNSb3cgPSAoZWxlbTogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+PiA9PiB7XG4gIHJldHVybiBTZWxlY3RvckZpbmQuY2xvc2VzdChlbGVtLCAndHInKTtcbn07XG5cbmNvbnN0IHZlcmlmeSA9IChcbiAgYnJpZGdlOiBXaW5kb3dCcmlkZ2UsXG4gIGJlZm9yZTogU3VnYXJFbGVtZW50PE5vZGU+LFxuICBiZWZvcmVPZmZzZXQ6IG51bWJlcixcbiAgYWZ0ZXI6IFN1Z2FyRWxlbWVudDxOb2RlPixcbiAgYWZ0ZXJPZmZzZXQ6IG51bWJlcixcbiAgZmFpbHVyZTogQmVmb3JlQWZ0ZXJGYWlsdXJlQ29uc3RydWN0b3IsXG4gIGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhblxuKTogQmVmb3JlQWZ0ZXIgPT4ge1xuICAvLyBJZGVudGlmeSB0aGUgY2VsbHMgdGhhdCB0aGUgYmVmb3JlIGFuZCBhZnRlciBhcmUgaW4uXG4gIHJldHVybiBTZWxlY3RvckZpbmQuY2xvc2VzdDxIVE1MVGFibGVDZWxsRWxlbWVudD4oYWZ0ZXIsICd0ZCx0aCcsIGlzUm9vdCkuYmluZCgoYWZ0ZXJDZWxsKSA9PiB7XG4gICAgcmV0dXJuIFNlbGVjdG9yRmluZC5jbG9zZXN0PEhUTUxUYWJsZUNlbGxFbGVtZW50PihiZWZvcmUsICd0ZCx0aCcsIGlzUm9vdCkubWFwKChiZWZvcmVDZWxsKSA9PiB7XG4gICAgICAvLyBJZiB0aGV5IGFyZSBub3QgaW4gdGhlIHNhbWUgY2VsbFxuICAgICAgaWYgKCFDb21wYXJlLmVxKGFmdGVyQ2VsbCwgYmVmb3JlQ2VsbCkpIHtcbiAgICAgICAgcmV0dXJuIERvbVBhcmVudC5zaGFyZWRPbmUoaXNSb3csIFsgYWZ0ZXJDZWxsLCBiZWZvcmVDZWxsIF0pLmZvbGQoKCkgPT4ge1xuICAgICAgICAgIC8vIE5vIHNoYXJlZCByb3csIGFuZCB0aGV5IG92ZXJsYXAgeC13aXNlIC0+IHN1Y2Nlc3MsIG90aGVyd2lzZTogZmFpbGVkXG4gICAgICAgICAgcmV0dXJuIGlzT3ZlcmxhcHBpbmcoYnJpZGdlLCBiZWZvcmVDZWxsLCBhZnRlckNlbGwpID8gYWR0LnN1Y2Nlc3MoKSA6IGZhaWx1cmUoYmVmb3JlQ2VsbCk7XG4gICAgICAgIH0sIChfc2hhcmVkUm93KSA9PiB7XG4gICAgICAgICAgLy8gSW4gdGhlIHNhbWUgcm93LCBzbyBpdCBmYWlsZWQuXG4gICAgICAgICAgcmV0dXJuIGZhaWx1cmUoYmVmb3JlQ2VsbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvbXBhcmUuZXEoYWZ0ZXIsIGFmdGVyQ2VsbCkgJiYgQXdhcmVuZXNzLmdldEVuZChhZnRlckNlbGwpID09PSBhZnRlck9mZnNldCA/IGZhaWx1cmUoYmVmb3JlQ2VsbCkgOiBhZHQubm9uZSgnaW4gc2FtZSBjZWxsJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pLmdldE9yKGFkdC5ub25lKCdkZWZhdWx0JykpO1xufTtcblxuY29uc3QgY2F0YSA9IDxUPihzdWJqZWN0OiBCZWZvcmVBZnRlciwgb25Ob25lOiBOb25lSGFuZGxlcjxUPiwgb25TdWNjZXNzOiBTdWNjZXNzSGFuZGxlcjxUPiwgb25GYWlsZWRVcDogRmFpbGVkVXBIYW5kbGVyPFQ+LCBvbkZhaWxlZERvd246IEZhaWxlZERvd25IYW5kbGVyPFQ+KTogVCA9PiB7XG4gIHJldHVybiBzdWJqZWN0LmZvbGQob25Ob25lLCBvblN1Y2Nlc3MsIG9uRmFpbGVkVXAsIG9uRmFpbGVkRG93bik7XG59O1xuXG5leHBvcnQgY29uc3QgQmVmb3JlQWZ0ZXIgPSB7XG4gIC4uLmFkdCxcbiAgdmVyaWZ5LFxuICBjYXRhXG59O1xuIiwiaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgU3BvdCwgdHlwZSBTcG90UG9pbnQgfSBmcm9tICdAZXBob3gvcGhvZW5peCc7XG5pbXBvcnQgeyBBd2FyZW5lc3MsIEVsZW1lbnRBZGRyZXNzLCBTaXR1LCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlLCBTdWdhclRleHQsIFRyYXZlcnNlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBTaXR1cyB9IGZyb20gJy4uL3NlbGVjdGlvbi9TaXR1cyc7XG5cbmltcG9ydCB7IEJlZm9yZUFmdGVyIH0gZnJvbSAnLi9CZWZvcmVBZnRlcic7XG5pbXBvcnQgdHlwZSB7IEtleURpcmVjdGlvbiB9IGZyb20gJy4vS2V5RGlyZWN0aW9uJztcblxuY29uc3QgaXNCciA9IFN1Z2FyTm9kZS5pc1RhZygnYnInKTtcblxuY29uc3QgZ2F0aGVyZXIgPSAoY2FuZDogU3VnYXJFbGVtZW50PE5vZGU+LCBnYXRoZXI6IEtleURpcmVjdGlvblsnZ2F0aGVyJ10sIGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj4gPT4ge1xuICByZXR1cm4gZ2F0aGVyKGNhbmQsIGlzUm9vdCkuYmluZCgodGFyZ2V0KSA9PiB7XG4gICAgcmV0dXJuIFN1Z2FyTm9kZS5pc1RleHQodGFyZ2V0KSAmJiBTdWdhclRleHQuZ2V0KHRhcmdldCkudHJpbSgpLmxlbmd0aCA9PT0gMCA/IGdhdGhlcmVyKHRhcmdldCwgZ2F0aGVyLCBpc1Jvb3QpIDogT3B0aW9uYWwuc29tZSh0YXJnZXQpO1xuICB9KTtcbn07XG5cbmNvbnN0IGhhbmRsZUJyID0gKGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBkaXJlY3Rpb246IEtleURpcmVjdGlvbikgPT4ge1xuICAvLyAxLiBIYXMgYSBuZWlnaGJvdXJpbmcgc2libGluZyAuLi4gcG9zaXRpb24gcmVsYXRpdmUgdG8gbmVpZ2hib3VyaW5nIGVsZW1lbnRcbiAgLy8gMi4gSGFzIG5vIG5laWdoYm91cmluZyBzaWJsaW5nIC4uLiBwb3NpdGlvbiByZWxhdGl2ZSB0byBnYXRoZXJlZCBlbGVtZW50XG4gIHJldHVybiBkaXJlY3Rpb24udHJhdmVyc2UoZWxlbWVudCkub3JUaHVuaygoKSA9PiB7XG4gICAgcmV0dXJuIGdhdGhlcmVyKGVsZW1lbnQsIGRpcmVjdGlvbi5nYXRoZXIsIGlzUm9vdCk7XG4gIH0pLm1hcChkaXJlY3Rpb24ucmVsYXRpdmUpO1xufTtcblxuY29uc3QgZmluZEJyID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIFRyYXZlcnNlLmNoaWxkKGVsZW1lbnQsIG9mZnNldCkuZmlsdGVyKGlzQnIpLm9yVGh1bmsoKCkgPT4ge1xuICAgIC8vIENhbiBiZSBlaXRoZXIgc2lkZSBvZiB0aGUgYnIsIGFuZCBzdGlsbCBiZSBhIGJyLlxuICAgIHJldHVybiBUcmF2ZXJzZS5jaGlsZChlbGVtZW50LCBvZmZzZXQgLSAxKS5maWx0ZXIoaXNCcik7XG4gIH0pO1xufTtcblxuY29uc3QgaGFuZGxlUGFyZW50ID0gKGlzUm9vdDogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlciwgZGlyZWN0aW9uOiBLZXlEaXJlY3Rpb24pID0+IHtcbiAgLy8gMS4gSGFzIG5vIG5laWdoYm91cmluZyBzaWJsaW5nLCBwb3NpdGlvbiByZWxhdGl2ZSB0byBnYXRoZXJlZCBlbGVtZW50XG4gIC8vIDIuIEhhcyBhIG5laWdoYm91cmluZyBzaWJsaW5nLCBwb3NpdGlvbiBhdCB0aGUgbmVpZ2hib3VyaW5nIHNpYmxpbmcgd2l0aCByZXNwZWN0IHRvIHBhcmVudFxuICByZXR1cm4gZmluZEJyKGVsZW1lbnQsIG9mZnNldCkuYmluZCgoYnIpID0+IHtcbiAgICByZXR1cm4gZGlyZWN0aW9uLnRyYXZlcnNlKGJyKS5mb2xkKCgpID0+IHtcbiAgICAgIHJldHVybiBnYXRoZXJlcihiciwgZGlyZWN0aW9uLmdhdGhlciwgaXNSb290KS5tYXAoZGlyZWN0aW9uLnJlbGF0aXZlKTtcbiAgICB9LCAoYWRqYWNlbnQpID0+IHtcbiAgICAgIHJldHVybiBFbGVtZW50QWRkcmVzcy5pbmRleEluUGFyZW50KGFkamFjZW50KS5tYXAoKGluZm8pID0+IHtcbiAgICAgICAgcmV0dXJuIFNpdHUub24oaW5mby5wYXJlbnQsIGluZm8uaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgdHJ5QnIgPSAoaXNSb290OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIG9mZnNldDogbnVtYmVyLCBkaXJlY3Rpb246IEtleURpcmVjdGlvbik6IE9wdGlvbmFsPFNpdHVzPiA9PiB7XG4gIC8vIFRocmVlIGRpZmZlcmVudCBzaXR1YXRpb25zXG4gIC8vIDEuIHRoZSBiciBpcyB0aGUgY2hpbGQsIGFuZCBpdCBoYXMgYSBwcmV2aW91cyBzaWJsaW5nLiBVc2UgcGFyZW50LCBpbmRleC0xKVxuICAvLyAyLiB0aGUgYnIgaXMgdGhlIGNoaWxkIGFuZCBpdCBoYXMgbm8gcHJldmlvdXMgc2libGluZywgc2V0IHRvIGJlZm9yZSB0aGUgcHJldmlvdXMgZ2F0aGVyIHJlc3VsdFxuICAvLyAzLiB0aGUgYnIgaXMgdGhlIGVsZW1lbnQgYW5kIGl0IGhhcyBhIHByZXZpb3VzIHNpYmxpbmcsIHVzZSBwYXJlbnQgaW5kZXgtMSlcbiAgLy8gNC4gdGhlIGJyIGlzIHRoZSBlbGVtZW50IGFuZCBpdCBoYXMgbm8gcHJldmlvdXMgc2libGluZywgc2V0IHRvIGJlZm9yZSB0aGUgcHJldmlvdXMgZ2F0aGVyIHJlc3VsdC5cbiAgLy8gMi4gdGhlIGVsZW1lbnQgaXMgdGhlIGJyIGl0c2VsZixcbiAgY29uc3QgdGFyZ2V0ID0gaXNCcihlbGVtZW50KSA/IGhhbmRsZUJyKGlzUm9vdCwgZWxlbWVudCwgZGlyZWN0aW9uKSA6IGhhbmRsZVBhcmVudChpc1Jvb3QsIGVsZW1lbnQsIG9mZnNldCwgZGlyZWN0aW9uKTtcbiAgcmV0dXJuIHRhcmdldC5tYXAoKHRndCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogdGd0LFxuICAgICAgZmluaXNoOiB0Z3RcbiAgICB9O1xuICB9KTtcbn07XG5cbmNvbnN0IHByb2Nlc3MgPSAoYW5hbHlzaXM6IEJlZm9yZUFmdGVyKTogT3B0aW9uYWw8U3BvdFBvaW50PFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+PiA9PiB7XG4gIHJldHVybiBCZWZvcmVBZnRlci5jYXRhKGFuYWx5c2lzLFxuICAgIChfbWVzc2FnZSkgPT4ge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9LFxuICAgICgpID0+IHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfSxcbiAgICAoY2VsbCkgPT4ge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoU3BvdC5wb2ludChjZWxsLCAwKSk7XG4gICAgfSxcbiAgICAoY2VsbCkgPT4ge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoU3BvdC5wb2ludChjZWxsLCBBd2FyZW5lc3MuZ2V0RW5kKGNlbGwpKSk7XG4gICAgfVxuICApO1xufTtcblxuZXhwb3J0IHtcbiAgdHJ5QnIsXG4gIHByb2Nlc3Ncbn07XG4iLCJpbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IERvbUdhdGhlciB9IGZyb20gJ0BlcGhveC9waG9lbml4JztcbmltcG9ydCB7IFNpdHUsIHR5cGUgU3VnYXJFbGVtZW50LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgV2luZG93QnJpZGdlIH0gZnJvbSAnLi4vYXBpL1dpbmRvd0JyaWRnZSc7XG5pbXBvcnQgdHlwZSB7IENhcmV0cyB9IGZyb20gJy4uL2tleWJvYXJkL0NhcmV0cyc7XG5pbXBvcnQgeyBSZXRyaWVzIH0gZnJvbSAnLi4va2V5Ym9hcmQvUmV0cmllcyc7XG5pbXBvcnQgdHlwZSB7IFNpdHVzIH0gZnJvbSAnLi4vc2VsZWN0aW9uL1NpdHVzJztcblxuaW1wb3J0IHsgQmVmb3JlQWZ0ZXIsIHR5cGUgQmVmb3JlQWZ0ZXJGYWlsdXJlQ29uc3RydWN0b3IgfSBmcm9tICcuL0JlZm9yZUFmdGVyJztcblxuZXhwb3J0IGludGVyZmFjZSBLZXlEaXJlY3Rpb24ge1xuICB0cmF2ZXJzZTogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PjtcbiAgZ2F0aGVyOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj47XG4gIHJlbGF0aXZlOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBTaXR1O1xuICByZXRyeTogKGJyaWRnZTogV2luZG93QnJpZGdlLCBjYXJldDogQ2FyZXRzKSA9PiBPcHRpb25hbDxTaXR1cz47XG4gIGZhaWx1cmU6IEJlZm9yZUFmdGVyRmFpbHVyZUNvbnN0cnVjdG9yO1xufVxuXG5jb25zdCBkb3duOiBLZXlEaXJlY3Rpb24gPSB7XG4gIHRyYXZlcnNlOiBUcmF2ZXJzZS5uZXh0U2libGluZyxcbiAgZ2F0aGVyOiBEb21HYXRoZXIuYWZ0ZXIsXG4gIHJlbGF0aXZlOiBTaXR1LmJlZm9yZSxcbiAgcmV0cnk6IFJldHJpZXMudHJ5RG93bixcbiAgZmFpbHVyZTogQmVmb3JlQWZ0ZXIuZmFpbGVkRG93blxufTtcblxuY29uc3QgdXA6IEtleURpcmVjdGlvbiA9IHtcbiAgdHJhdmVyc2U6IFRyYXZlcnNlLnByZXZTaWJsaW5nLFxuICBnYXRoZXI6IERvbUdhdGhlci5iZWZvcmUsXG4gIHJlbGF0aXZlOiBTaXR1LmJlZm9yZSxcbiAgcmV0cnk6IFJldHJpZXMudHJ5VXAsXG4gIGZhaWx1cmU6IEJlZm9yZUFmdGVyLmZhaWxlZFVwXG59O1xuXG5leHBvcnQge1xuICBkb3duLFxuICB1cFxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFJ1bk9wZXJhdGlvbiB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IEVwaGVtZXJhIH0gZnJvbSAnLi4vYXBpL0VwaGVtZXJhJztcbmltcG9ydCAqIGFzIFRhYmxlU2VsZWN0aW9uIGZyb20gJy4uL2FwaS9UYWJsZVNlbGVjdGlvbic7XG5cbmNvbnN0IHNlbGVjdGlvbjogKHNlbGVjdGVkQ2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdID0gRnVuLmlkZW50aXR5O1xuXG5jb25zdCB1bm1lcmdhYmxlID0gKHNlbGVjdGVkQ2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXT4gPT4ge1xuICBjb25zdCBoYXNTcGFuID0gKGVsZW06IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgdHlwZTogJ2NvbHNwYW4nIHwgJ3Jvd3NwYW4nKSA9PiBBdHRyaWJ1dGUuZ2V0T3B0KGVsZW0sIHR5cGUpLmV4aXN0cygoc3BhbikgPT4gcGFyc2VJbnQoc3BhbiwgMTApID4gMSk7XG4gIGNvbnN0IGhhc1Jvd09yQ29sU3BhbiA9IChlbGVtOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pID0+IGhhc1NwYW4oZWxlbSwgJ3Jvd3NwYW4nKSB8fCBoYXNTcGFuKGVsZW0sICdjb2xzcGFuJyk7XG5cbiAgcmV0dXJuIHNlbGVjdGVkQ2VsbHMubGVuZ3RoID4gMCAmJiBBcnIuZm9yYWxsKHNlbGVjdGVkQ2VsbHMsIGhhc1Jvd09yQ29sU3BhbikgPyBPcHRpb25hbC5zb21lKHNlbGVjdGVkQ2VsbHMpIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuY29uc3QgbWVyZ2FibGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Piwgc2VsZWN0ZWRDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBlcGhlbWVyYTogRXBoZW1lcmEpOiBPcHRpb25hbDxSdW5PcGVyYXRpb24uRXh0cmFjdE1lcmdhYmxlPiA9PiB7XG4gIGlmIChzZWxlY3RlZENlbGxzLmxlbmd0aCA8PSAxKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gVGFibGVTZWxlY3Rpb24ucmV0cmlldmVCb3godGFibGUsIGVwaGVtZXJhLmZpcnN0U2VsZWN0ZWRTZWxlY3RvciwgZXBoZW1lcmEubGFzdFNlbGVjdGVkU2VsZWN0b3IpXG4gICAgICAubWFwKChib3VuZHMpID0+ICh7IGJvdW5kcywgY2VsbHM6IHNlbGVjdGVkQ2VsbHMgfSkpO1xuICB9XG59O1xuXG5leHBvcnQgeyBtZXJnYWJsZSwgdW5tZXJnYWJsZSwgc2VsZWN0aW9uIH07XG5cbiIsImltcG9ydCB7IEFyciwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgRG9tUGFyZW50IH0gZnJvbSAnQGVwaG94L3JvYmluJztcbmltcG9ydCB7IFRhYmxlUG9zaXRpb25zIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQ29tcGFyZSwgU2VsZWN0b3JGaWx0ZXIsIFNlbGVjdG9yRmluZCwgU2VsZWN0b3JzLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgSWRlbnRpZmllZCwgSWRlbnRpZmllZEV4dCB9IGZyb20gJy4vSWRlbnRpZmllZCc7XG5cbmludGVyZmFjZSBFZGdlcyB7XG4gIHJlYWRvbmx5IGZpcnN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBsYXN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+O1xufVxuXG5jb25zdCBsb29rdXBUYWJsZSA9IChjb250YWluZXI6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmFuY2VzdG9yPEhUTUxUYWJsZUVsZW1lbnQ+KGNvbnRhaW5lciwgJ3RhYmxlJyk7XG59O1xuXG5jb25zdCBpZGVudGlmeSA9IChzdGFydDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBpc1Jvb3Q/OiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8SWRlbnRpZmllZD4gPT4ge1xuICBjb25zdCBnZXRJc1Jvb3QgPSAocm9vdFRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IHtcbiAgICByZXR1cm4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4ge1xuICAgICAgcmV0dXJuIChpc1Jvb3QgIT09IHVuZGVmaW5lZCAmJiBpc1Jvb3QoZWxlbWVudCkpIHx8IENvbXBhcmUuZXEoZWxlbWVudCwgcm9vdFRhYmxlKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIE9wdGltaXNhdGlvbjogSWYgdGhlIGNlbGxzIGFyZSBlcXVhbCwgaXQncyBhIHNpbmdsZSBjZWxsIGFycmF5XG4gIGlmIChDb21wYXJlLmVxKHN0YXJ0LCBmaW5pc2gpKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgYm94ZXM6IE9wdGlvbmFsLnNvbWUoWyBzdGFydCBdKSxcbiAgICAgIHN0YXJ0LFxuICAgICAgZmluaXNoXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxvb2t1cFRhYmxlKHN0YXJ0KS5iaW5kKChzdGFydFRhYmxlKSA9PiB7XG4gICAgICByZXR1cm4gbG9va3VwVGFibGUoZmluaXNoKS5iaW5kKChmaW5pc2hUYWJsZSkgPT4ge1xuICAgICAgICBpZiAoQ29tcGFyZS5lcShzdGFydFRhYmxlLCBmaW5pc2hUYWJsZSkpIHsgLy8gU2VsZWN0aW5nIGZyb20gd2l0aGluIHRoZSBzYW1lIHRhYmxlLlxuICAgICAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKHtcbiAgICAgICAgICAgIGJveGVzOiBUYWJsZVBvc2l0aW9ucy5pbnRlcmNlcHRzKHN0YXJ0VGFibGUsIHN0YXJ0LCBmaW5pc2gpLFxuICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICBmaW5pc2hcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChDb21wYXJlLmNvbnRhaW5zKHN0YXJ0VGFibGUsIGZpbmlzaFRhYmxlKSkgeyAvLyBTZWxlY3RpbmcgZnJvbSB0aGUgcGFyZW50IHRhYmxlIHRvIHRoZSBuZXN0ZWQgdGFibGUuXG4gICAgICAgICAgY29uc3QgYW5jZXN0b3JDZWxscyA9IFNlbGVjdG9yRmlsdGVyLmFuY2VzdG9yczxIVE1MVGFibGVDZWxsRWxlbWVudD4oZmluaXNoLCAndGQsdGgnLCBnZXRJc1Jvb3Qoc3RhcnRUYWJsZSkpO1xuICAgICAgICAgIGNvbnN0IGZpbmlzaENlbGwgPSBhbmNlc3RvckNlbGxzLmxlbmd0aCA+IDAgPyBhbmNlc3RvckNlbGxzW2FuY2VzdG9yQ2VsbHMubGVuZ3RoIC0gMV0gOiBmaW5pc2g7XG4gICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgICAgICAgYm94ZXM6IFRhYmxlUG9zaXRpb25zLm5lc3RlZEludGVyY2VwdHMoc3RhcnRUYWJsZSwgc3RhcnQsIHN0YXJ0VGFibGUsIGZpbmlzaCwgZmluaXNoVGFibGUpLFxuICAgICAgICAgICAgc3RhcnQsXG4gICAgICAgICAgICBmaW5pc2g6IGZpbmlzaENlbGxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChDb21wYXJlLmNvbnRhaW5zKGZpbmlzaFRhYmxlLCBzdGFydFRhYmxlKSkgeyAvLyBTZWxlY3RpbmcgZnJvbSB0aGUgbmVzdGVkIHRhYmxlIHRvIHRoZSBwYXJlbnQgdGFibGUuXG4gICAgICAgICAgY29uc3QgYW5jZXN0b3JDZWxscyA9IFNlbGVjdG9yRmlsdGVyLmFuY2VzdG9yczxIVE1MVGFibGVDZWxsRWxlbWVudD4oc3RhcnQsICd0ZCx0aCcsIGdldElzUm9vdChmaW5pc2hUYWJsZSkpO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0Q2VsbCA9IGFuY2VzdG9yQ2VsbHMubGVuZ3RoID4gMCA/IGFuY2VzdG9yQ2VsbHNbYW5jZXN0b3JDZWxscy5sZW5ndGggLSAxXSA6IHN0YXJ0O1xuICAgICAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKHtcbiAgICAgICAgICAgIGJveGVzOiBUYWJsZVBvc2l0aW9ucy5uZXN0ZWRJbnRlcmNlcHRzKGZpbmlzaFRhYmxlLCBzdGFydCwgc3RhcnRUYWJsZSwgZmluaXNoLCBmaW5pc2hUYWJsZSksXG4gICAgICAgICAgICBzdGFydCxcbiAgICAgICAgICAgIGZpbmlzaDogc3RhcnRDZWxsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7IC8vIFNlbGVjdGluZyBmcm9tIGEgbmVzdGVkIHRhYmxlIHRvIGEgZGlmZmVyZW50IG5lc3RlZCB0YWJsZS5cbiAgICAgICAgICByZXR1cm4gRG9tUGFyZW50LmFuY2VzdG9ycyhzdGFydCwgZmluaXNoKS5zaGFyZWQuYmluZCgobGNhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlRWxlbWVudD4obGNhLCAndGFibGUnLCBpc1Jvb3QpLmJpbmQoKGxjYVRhYmxlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZpbmlzaEFuY2VzdG9yQ2VsbHMgPSBTZWxlY3RvckZpbHRlci5hbmNlc3RvcnM8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGZpbmlzaCwgJ3RkLHRoJywgZ2V0SXNSb290KGxjYVRhYmxlKSk7XG4gICAgICAgICAgICAgIGNvbnN0IGZpbmlzaENlbGwgPSBmaW5pc2hBbmNlc3RvckNlbGxzLmxlbmd0aCA+IDAgPyBmaW5pc2hBbmNlc3RvckNlbGxzW2ZpbmlzaEFuY2VzdG9yQ2VsbHMubGVuZ3RoIC0gMV0gOiBmaW5pc2g7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXJ0QW5jZXN0b3JDZWxscyA9IFNlbGVjdG9yRmlsdGVyLmFuY2VzdG9yczxIVE1MVGFibGVDZWxsRWxlbWVudD4oc3RhcnQsICd0ZCx0aCcsIGdldElzUm9vdChsY2FUYWJsZSkpO1xuICAgICAgICAgICAgICBjb25zdCBzdGFydENlbGwgPSBzdGFydEFuY2VzdG9yQ2VsbHMubGVuZ3RoID4gMCA/IHN0YXJ0QW5jZXN0b3JDZWxsc1tzdGFydEFuY2VzdG9yQ2VsbHMubGVuZ3RoIC0gMV0gOiBzdGFydDtcbiAgICAgICAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgICAgICAgICAgIGJveGVzOiBUYWJsZVBvc2l0aW9ucy5uZXN0ZWRJbnRlcmNlcHRzKGxjYVRhYmxlLCBzdGFydCwgc3RhcnRUYWJsZSwgZmluaXNoLCBmaW5pc2hUYWJsZSksXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0Q2VsbCxcbiAgICAgICAgICAgICAgICBmaW5pc2g6IGZpbmlzaENlbGxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmNvbnN0IHJldHJpZXZlID0gPFQgZXh0ZW5kcyBFbGVtZW50PiAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD5bXT4gPT4ge1xuICBjb25zdCBzZWxzID0gU2VsZWN0b3JGaWx0ZXIuZGVzY2VuZGFudHM8VD4oY29udGFpbmVyLCBzZWxlY3Rvcik7XG4gIHJldHVybiBzZWxzLmxlbmd0aCA+IDAgPyBPcHRpb25hbC5zb21lKHNlbHMpIDogT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8VD5bXT4oKTtcbn07XG5cbmNvbnN0IGdldExhc3QgPSAoYm94ZXM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSwgbGFzdFNlbGVjdGVkU2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+ID0+IHtcbiAgcmV0dXJuIEFyci5maW5kKGJveGVzLCAoYm94KSA9PiB7XG4gICAgcmV0dXJuIFNlbGVjdG9ycy5pczxIVE1MVGFibGVDZWxsRWxlbWVudD4oYm94LCBsYXN0U2VsZWN0ZWRTZWxlY3Rvcik7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0RWRnZXMgPSAoY29udGFpbmVyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZpcnN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nLCBsYXN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8RWRnZXM+ID0+IHtcbiAgcmV0dXJuIFNlbGVjdG9yRmluZC5kZXNjZW5kYW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pihjb250YWluZXIsIGZpcnN0U2VsZWN0ZWRTZWxlY3RvcikuYmluZCgoZmlyc3QpID0+IHtcbiAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmRlc2NlbmRhbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGNvbnRhaW5lciwgbGFzdFNlbGVjdGVkU2VsZWN0b3IpLmJpbmQoKGxhc3QpID0+IHtcbiAgICAgIHJldHVybiBEb21QYXJlbnQuc2hhcmVkT25lKGxvb2t1cFRhYmxlLCBbIGZpcnN0LCBsYXN0IF0pLm1hcCgodGFibGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmaXJzdCxcbiAgICAgICAgICBsYXN0LFxuICAgICAgICAgIHRhYmxlXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBleHBhbmRUbyA9IChmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGZpcnN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8SWRlbnRpZmllZEV4dD4gPT4ge1xuICByZXR1cm4gU2VsZWN0b3JGaW5kLmFuY2VzdG9yPEhUTUxUYWJsZUVsZW1lbnQ+KGZpbmlzaCwgJ3RhYmxlJykuYmluZCgodGFibGUpID0+IHtcbiAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmRlc2NlbmRhbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KHRhYmxlLCBmaXJzdFNlbGVjdGVkU2VsZWN0b3IpLmJpbmQoKHN0YXJ0KSA9PiB7XG4gICAgICByZXR1cm4gaWRlbnRpZnkoc3RhcnQsIGZpbmlzaCkuYmluZCgoaWRlbnRpZmllZCkgPT4ge1xuICAgICAgICByZXR1cm4gaWRlbnRpZmllZC5ib3hlcy5tYXA8SWRlbnRpZmllZEV4dD4oKGJveGVzKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJveGVzLFxuICAgICAgICAgICAgc3RhcnQ6IGlkZW50aWZpZWQuc3RhcnQsXG4gICAgICAgICAgICBmaW5pc2g6IGlkZW50aWZpZWQuZmluaXNoXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBzaGlmdFNlbGVjdGlvbiA9IChib3hlczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBkZWx0YVJvdzogbnVtYmVyLCBkZWx0YUNvbHVtbjogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcsIGxhc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxJZGVudGlmaWVkRXh0PiA9PiB7XG4gIHJldHVybiBnZXRMYXN0KGJveGVzLCBsYXN0U2VsZWN0ZWRTZWxlY3RvcikuYmluZCgobGFzdCkgPT4ge1xuICAgIHJldHVybiBUYWJsZVBvc2l0aW9ucy5tb3ZlQnkobGFzdCwgZGVsdGFSb3csIGRlbHRhQ29sdW1uKS5iaW5kKChmaW5pc2gpID0+IHtcbiAgICAgIHJldHVybiBleHBhbmRUbyhmaW5pc2gsIGZpcnN0U2VsZWN0ZWRTZWxlY3Rvcik7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgaWRlbnRpZnksXG4gIHJldHJpZXZlLFxuICBzaGlmdFNlbGVjdGlvbixcbiAgZ2V0RWRnZXNcbn07XG4iLCJpbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTaXR1cyB9IGZyb20gJy4vU2l0dXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlIHtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uOiBPcHRpb25hbDxTaXR1cz47XG4gIHJlYWRvbmx5IGtpbGw6IGJvb2xlYW47XG59XG5cbmNvbnN0IGNyZWF0ZSA9IChzZWxlY3Rpb246IE9wdGlvbmFsPFNpdHVzPiwga2lsbDogYm9vbGVhbik6IFJlc3BvbnNlID0+ICh7XG4gIHNlbGVjdGlvbixcbiAga2lsbFxufSk7XG5cbmV4cG9ydCBjb25zdCBSZXNwb25zZSA9IHtcbiAgY3JlYXRlXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFNlbGVjdGlvblR5cGVzIGZyb20gJy4uL2FwaS9TZWxlY3Rpb25UeXBlcyc7XG5pbXBvcnQgKiBhcyBUYWJsZVNlbGVjdGlvbiBmcm9tICcuLi9hcGkvVGFibGVTZWxlY3Rpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbnMge1xuICByZWFkb25seSBnZXQ6ICgpID0+IFNlbGVjdGlvblR5cGVzLlNlbGVjdGlvblR5cGU7XG59XG5cbmV4cG9ydCBjb25zdCBTZWxlY3Rpb25zID0gKGxhenlSb290OiAoKSA9PiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGdldFN0YXJ0OiAoKSA9PiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+Piwgc2VsZWN0ZWRTZWxlY3Rvcjogc3RyaW5nKTogU2VsZWN0aW9ucyA9PiB7XG4gIGNvbnN0IGdldCA9ICgpID0+IFRhYmxlU2VsZWN0aW9uLnJldHJpZXZlPEhUTUxUYWJsZUNlbGxFbGVtZW50PihsYXp5Um9vdCgpLCBzZWxlY3RlZFNlbGVjdG9yKS5mb2xkKFxuICAgICgpID0+IGdldFN0YXJ0KCkuZm9sZChTZWxlY3Rpb25UeXBlcy5ub25lLCBTZWxlY3Rpb25UeXBlcy5zaW5nbGUpLFxuICAgIFNlbGVjdGlvblR5cGVzLm11bHRpcGxlXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBTaXR1LCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l0dXMge1xuICByZWFkb25seSBzdGFydDogU2l0dTtcbiAgcmVhZG9ubHkgZmluaXNoOiBTaXR1O1xufVxuXG5jb25zdCBjcmVhdGUgPSAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogU2l0dXMgPT4ge1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBTaXR1Lm9uKHN0YXJ0LCBzb2Zmc2V0KSxcbiAgICBmaW5pc2g6IFNpdHUub24oZmluaXNoLCBmb2Zmc2V0KVxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IFNpdHVzID0ge1xuICBjcmVhdGVcbn07XG4iLCJpbXBvcnQgeyBTZWxlY3Rpb25EaXJlY3Rpb24sIFNpbVJhbmdlLCB0eXBlIFNpbVNlbGVjdGlvbiwgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgU2l0dXMgfSBmcm9tICcuL1NpdHVzJztcblxuY29uc3QgY29udmVydFRvUmFuZ2UgPSAod2luOiBXaW5kb3csIHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogU2ltUmFuZ2UgPT4ge1xuICAvLyBUT0RPOiBVc2UgQVBJIHBhY2thZ2VzIG9mIHN1Z2FyXG4gIGNvbnN0IHJuZyA9IFNlbGVjdGlvbkRpcmVjdGlvbi5hc0x0clJhbmdlKHdpbiwgc2VsZWN0aW9uKTtcbiAgcmV0dXJuIFNpbVJhbmdlLmNyZWF0ZShcbiAgICBTdWdhckVsZW1lbnQuZnJvbURvbShybmcuc3RhcnRDb250YWluZXIpLFxuICAgIHJuZy5zdGFydE9mZnNldCxcbiAgICBTdWdhckVsZW1lbnQuZnJvbURvbShybmcuZW5kQ29udGFpbmVyKSxcbiAgICBybmcuZW5kT2Zmc2V0KTtcbn07XG5cbmNvbnN0IG1ha2VTaXR1cyA9IFNpdHVzLmNyZWF0ZTtcblxuZXhwb3J0IHtcbiAgY29udmVydFRvUmFuZ2UsXG4gIG1ha2VTaXR1c1xufTtcbiIsImltcG9ydCB7IENvbnRyYWN0cywgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IEV2ZW50QXJncywgU3VnYXJFbGVtZW50LCBTdWdhclBvc2l0aW9uIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBCbG9ja2VyT3B0aW9ucyB9IGZyb20gJy4uL2RldGVjdC9CbG9ja2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnTXV0YXRpb24ge1xuICBtdXRhdGU6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnTW9kZTxUPiB7XG4gIGNvbXBhcmU6IChvbGQ6IFN1Z2FyUG9zaXRpb24sIG51OiBTdWdhclBvc2l0aW9uKSA9PiBTdWdhclBvc2l0aW9uO1xuICBleHRyYWN0OiAoZXZlbnQ6IEV2ZW50QXJnczxUPikgPT4gT3B0aW9uYWw8U3VnYXJQb3NpdGlvbj47XG4gIG11dGF0ZTogKG11dGF0aW9uOiBEcmFnTXV0YXRpb24sIGluZm86IFN1Z2FyUG9zaXRpb24pID0+IHZvaWQ7XG4gIHNpbms6IChkcmFnQXBpOiBEcmFnQXBpPFQ+LCBzZXR0aW5nczogUGFydGlhbDxCbG9ja2VyT3B0aW9ucz4pID0+IERyYWdTaW5rO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyYWdTaW5rIHtcbiAgZWxlbWVudDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PjtcbiAgc3RhcnQ6IChwYXJlbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gdm9pZDtcbiAgc3RvcDogKCkgPT4gdm9pZDtcbiAgZGVzdHJveTogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnQXBpPFQ+IHtcbiAgZm9yY2VEcm9wOiAoZXZ0PzogRXZlbnRBcmdzPFQ+KSA9PiB2b2lkO1xuICBkcm9wOiAoZXZ0PzogRXZlbnRBcmdzPFQ+KSA9PiB2b2lkO1xuICBtb3ZlOiAoZXZ0OiBFdmVudEFyZ3M8VD4pID0+IHZvaWQ7XG4gIGRlbGF5RHJvcDogKGV2dD86IEV2ZW50QXJnczxUPikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IERyYWdNb2RlOiA8VD4odmFsdWU6IERyYWdNb2RlPFQ+KSA9PiBEcmFnTW9kZTxUPiA9IENvbnRyYWN0cy5leGFjdGx5KFtcbiAgJ2NvbXBhcmUnLFxuICAnZXh0cmFjdCcsXG4gICdtdXRhdGUnLFxuICAnc2luaydcbl0pO1xuXG5leHBvcnQgY29uc3QgRHJhZ1Npbms6ICh2YWx1ZTogRHJhZ1NpbmspID0+IERyYWdTaW5rID0gQ29udHJhY3RzLmV4YWN0bHkoW1xuICAnZWxlbWVudCcsXG4gICdzdGFydCcsXG4gICdzdG9wJyxcbiAgJ2Rlc3Ryb3knXG5dKTtcblxuZXhwb3J0IGNvbnN0IERyYWdBcGk6IDxUPih2YWx1ZTogRHJhZ0FwaTxUPikgPT4gRHJhZ0FwaTxUPiA9IENvbnRyYWN0cy5leGFjdGx5KFtcbiAgJ2ZvcmNlRHJvcCcsXG4gICdkcm9wJyxcbiAgJ21vdmUnLFxuICAnZGVsYXlEcm9wJ1xuXSk7XG5cbi8vIEFQSSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbmNvbnN0IG1vZGUgPSBEcmFnTW9kZTtcbmNvbnN0IHNpbmsgPSBEcmFnU2luaztcbmNvbnN0IGFwaSA9IERyYWdBcGk7XG5cbmV4cG9ydCB7XG4gIG1vZGUsXG4gIHNpbmssXG4gIGFwaVxufTtcbiIsImltcG9ydCAqIGFzIERyYWdnaW5nIGZyb20gJy4uL2NvcmUvRHJhZ2dpbmcnO1xuaW1wb3J0IHR5cGUgeyBCbG9ja2VyT3B0aW9ucyB9IGZyb20gJy4uL2RldGVjdC9CbG9ja2VyJztcblxuaW1wb3J0IHR5cGUgeyBEcmFnTW9kZSwgRHJhZ011dGF0aW9uIH0gZnJvbSAnLi9EcmFnQXBpcyc7XG5pbXBvcnQgTW91c2VEcmFnIGZyb20gJy4vTW91c2VEcmFnJztcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnZ2VyT3B0aW9ucyBleHRlbmRzIEJsb2NrZXJPcHRpb25zIHtcbiAgcmVhZG9ubHkgbW9kZTogRHJhZ01vZGU8TW91c2VFdmVudD47XG59XG5cbmNvbnN0IHRyYW5zZm9ybSA9IChtdXRhdGlvbjogRHJhZ011dGF0aW9uLCBzZXR0aW5nczogUGFydGlhbDxEcmFnZ2VyT3B0aW9ucz4gPSB7fSk6IERyYWdnaW5nLkRyYWdnaW5nID0+IHtcbiAgY29uc3QgbW9kZSA9IHNldHRpbmdzLm1vZGUgPz8gTW91c2VEcmFnO1xuICByZXR1cm4gRHJhZ2dpbmcuc2V0dXAobXV0YXRpb24sIG1vZGUsIHNldHRpbmdzKTtcbn07XG5cbmV4cG9ydCB7XG4gIHRyYW5zZm9ybVxufTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IERvbUV2ZW50LCB0eXBlIEV2ZW50QXJncywgSW5zZXJ0LCBSZW1vdmUsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhclBvc2l0aW9uIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgQmxvY2tlciwgdHlwZSBCbG9ja2VyT3B0aW9ucyB9IGZyb20gJy4uL2RldGVjdC9CbG9ja2VyJztcblxuaW1wb3J0IHsgdHlwZSBEcmFnQXBpLCBEcmFnTW9kZSwgdHlwZSBEcmFnTXV0YXRpb24sIERyYWdTaW5rIH0gZnJvbSAnLi9EcmFnQXBpcyc7XG5cbmNvbnN0IGNvbXBhcmUgPSAob2xkOiBTdWdhclBvc2l0aW9uLCBudTogU3VnYXJQb3NpdGlvbikgPT4ge1xuICByZXR1cm4gU3VnYXJQb3NpdGlvbihudS5sZWZ0IC0gb2xkLmxlZnQsIG51LnRvcCAtIG9sZC50b3ApO1xufTtcblxuY29uc3QgZXh0cmFjdCA9IChldmVudDogRXZlbnRBcmdzPE1vdXNlRXZlbnQ+KSA9PiB7XG4gIHJldHVybiBPcHRpb25hbC5zb21lKFN1Z2FyUG9zaXRpb24oZXZlbnQueCwgZXZlbnQueSkpO1xufTtcblxuY29uc3QgbXV0YXRlID0gKG11dGF0aW9uOiBEcmFnTXV0YXRpb24sIGluZm86IFN1Z2FyUG9zaXRpb24pID0+IHtcbiAgbXV0YXRpb24ubXV0YXRlKGluZm8ubGVmdCwgaW5mby50b3ApO1xufTtcblxuY29uc3Qgc2luayA9IChkcmFnQXBpOiBEcmFnQXBpPE1vdXNlRXZlbnQ+LCBzZXR0aW5nczogUGFydGlhbDxCbG9ja2VyT3B0aW9ucz4pID0+IHtcbiAgY29uc3QgYmxvY2tlciA9IEJsb2NrZXIoc2V0dGluZ3MpO1xuXG4gIC8vIEluY2x1ZGVkIGZvciBzYWZldHkuIElmIHRoZSBibG9ja2VyIGhhcyBzdGF5ZWQgb24gdGhlIHNjcmVlbiwgZ2V0IHJpZCBvZiBpdCBvbiBhIGNsaWNrLlxuICBjb25zdCBtZG93biA9IERvbUV2ZW50LmJpbmQoYmxvY2tlci5lbGVtZW50KCksICdtb3VzZWRvd24nLCBkcmFnQXBpLmZvcmNlRHJvcCk7XG5cbiAgY29uc3QgbXVwID0gRG9tRXZlbnQuYmluZChibG9ja2VyLmVsZW1lbnQoKSwgJ21vdXNldXAnLCBkcmFnQXBpLmRyb3ApO1xuICBjb25zdCBtbW92ZSA9IERvbUV2ZW50LmJpbmQoYmxvY2tlci5lbGVtZW50KCksICdtb3VzZW1vdmUnLCBkcmFnQXBpLm1vdmUpO1xuICBjb25zdCBtb3V0ID0gRG9tRXZlbnQuYmluZChibG9ja2VyLmVsZW1lbnQoKSwgJ21vdXNlb3V0JywgZHJhZ0FwaS5kZWxheURyb3ApO1xuXG4gIGNvbnN0IGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgYmxvY2tlci5kZXN0cm95KCk7XG4gICAgbXVwLnVuYmluZCgpO1xuICAgIG1tb3ZlLnVuYmluZCgpO1xuICAgIG1vdXQudW5iaW5kKCk7XG4gICAgbWRvd24udW5iaW5kKCk7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnQgPSAocGFyZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICBJbnNlcnQuYXBwZW5kKHBhcmVudCwgYmxvY2tlci5lbGVtZW50KCkpO1xuICB9O1xuXG4gIGNvbnN0IHN0b3AgPSAoKSA9PiB7XG4gICAgUmVtb3ZlLnJlbW92ZShibG9ja2VyLmVsZW1lbnQoKSk7XG4gIH07XG5cbiAgcmV0dXJuIERyYWdTaW5rKHtcbiAgICBlbGVtZW50OiBibG9ja2VyLmVsZW1lbnQsXG4gICAgc3RhcnQsXG4gICAgc3RvcCxcbiAgICBkZXN0cm95XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ01vZGU8TW91c2VFdmVudD4oe1xuICBjb21wYXJlLFxuICBleHRyYWN0LFxuICBzaW5rLFxuICBtdXRhdGVcbn0pO1xuIiwiaW1wb3J0IHsgVGhyb3R0bGVyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IHR5cGUgQmluZGFibGUsIEV2ZW50LCBFdmVudHMgfSBmcm9tICdAZXBob3gvcG9ya2J1bic7XG5pbXBvcnQgdHlwZSB7IEV2ZW50QXJncywgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgRHJhZ0FwaSwgdHlwZSBEcmFnTW9kZSwgdHlwZSBEcmFnTXV0YXRpb24gfSBmcm9tICcuLi9hcGkvRHJhZ0FwaXMnO1xuaW1wb3J0IHR5cGUgeyBCbG9ja2VyT3B0aW9ucyB9IGZyb20gJy4uL2RldGVjdC9CbG9ja2VyJztcbmltcG9ydCB7IE1vdmVtZW50IH0gZnJvbSAnLi4vZGV0ZWN0L01vdmVtZW50JztcblxuaW50ZXJmYWNlIERyYWdBY3Rpb25FdmVudHMge1xuICByZWFkb25seSByZWdpc3RyeToge1xuICAgIHN0YXJ0OiBCaW5kYWJsZTx7fT47XG4gICAgc3RvcDogQmluZGFibGU8e30+O1xuICB9O1xuICByZWFkb25seSB0cmlnZ2VyOiB7XG4gICAgc3RhcnQ6ICgpID0+IHZvaWQ7XG4gICAgc3RvcDogKCkgPT4gdm9pZDtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnZ2luZyB7XG4gIHJlYWRvbmx5IGVsZW1lbnQ6ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD47XG4gIHJlYWRvbmx5IGdvOiAocGFyZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBvZmY6ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGlzQWN0aXZlOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBkZXN0cm95OiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBldmVudHM6IERyYWdBY3Rpb25FdmVudHNbJ3JlZ2lzdHJ5J107XG59XG5cbmNvbnN0IHNldHVwID0gPFQ+KG11dGF0aW9uOiBEcmFnTXV0YXRpb24sIG1vZGU6IERyYWdNb2RlPFQ+LCBzZXR0aW5nczogUGFydGlhbDxCbG9ja2VyT3B0aW9ucz4pOiBEcmFnZ2luZyA9PiB7XG4gIGxldCBhY3RpdmUgPSBmYWxzZTtcblxuICBjb25zdCBldmVudHM6IERyYWdBY3Rpb25FdmVudHMgPSBFdmVudHMuY3JlYXRlKHtcbiAgICBzdGFydDogRXZlbnQoW10pLFxuICAgIHN0b3A6IEV2ZW50KFtdKVxuICB9KTtcblxuICBjb25zdCBtb3ZlbWVudCA9IE1vdmVtZW50KCk7XG5cbiAgY29uc3QgZHJvcCA9ICgpID0+IHtcbiAgICBzaW5rLnN0b3AoKTtcbiAgICBpZiAobW92ZW1lbnQuaXNPbigpKSB7XG4gICAgICBtb3ZlbWVudC5vZmYoKTtcbiAgICAgIGV2ZW50cy50cmlnZ2VyLnN0b3AoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdGhyb3R0bGVkRHJvcCA9IFRocm90dGxlci5sYXN0KGRyb3AsIDIwMCk7XG5cbiAgY29uc3QgZ28gPSAocGFyZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICBzaW5rLnN0YXJ0KHBhcmVudCk7XG4gICAgbW92ZW1lbnQub24oKTtcbiAgICBldmVudHMudHJpZ2dlci5zdGFydCgpO1xuICB9O1xuXG4gIGNvbnN0IG1vdXNlbW92ZSA9IChldmVudDogRXZlbnRBcmdzPFQ+KSA9PiB7XG4gICAgdGhyb3R0bGVkRHJvcC5jYW5jZWwoKTtcbiAgICBtb3ZlbWVudC5vbkV2ZW50KGV2ZW50LCBtb2RlKTtcbiAgfTtcblxuICBtb3ZlbWVudC5ldmVudHMubW92ZS5iaW5kKChldmVudCkgPT4ge1xuICAgIG1vZGUubXV0YXRlKG11dGF0aW9uLCBldmVudC5pbmZvKTtcbiAgfSk7XG5cbiAgY29uc3Qgb24gPSAoKSA9PiB7XG4gICAgYWN0aXZlID0gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBvZmYgPSAoKSA9PiB7XG4gICAgYWN0aXZlID0gZmFsc2U7XG4gICAgLy8gYWNpdmF0ZSBzb21lIGV2ZW50cyBoZXJlP1xuICB9O1xuXG4gIGNvbnN0IGlzQWN0aXZlID0gKCkgPT4gYWN0aXZlO1xuXG4gIGNvbnN0IHJ1bklmQWN0aXZlID0gPEYgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4gKGY6IEYpID0+IHtcbiAgICByZXR1cm4gKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rj4pID0+IHtcbiAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IHNpbmsgPSBtb2RlLnNpbmsoRHJhZ0FwaSh7XG4gICAgLy8gQVNTVU1QVElPTjogcnVuSWZBY3RpdmUgaXMgbm90IG5lZWRlZCBmb3IgbW91c2Vkb3duLiBUaGlzIGlzIHByZXR0eSBtdWNoIGEgc2FmZXR5IG1lYXN1cmUgZm9yXG4gICAgLy8gaW5jb25zaXN0ZW50IHNpdHVhdGlvbnMgc28gdGhhdCB3ZSBkb24ndCBibG9jayBpbnB1dC5cbiAgICBmb3JjZURyb3A6IGRyb3AsXG4gICAgZHJvcDogcnVuSWZBY3RpdmUoZHJvcCksXG4gICAgbW92ZTogcnVuSWZBY3RpdmUobW91c2Vtb3ZlKSxcbiAgICBkZWxheURyb3A6IHJ1bklmQWN0aXZlKHRocm90dGxlZERyb3AudGhyb3R0bGUpXG4gIH0pLCBzZXR0aW5ncyk7XG5cbiAgY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgICBzaW5rLmRlc3Ryb3koKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGVsZW1lbnQ6IHNpbmsuZWxlbWVudCxcbiAgICBnbyxcbiAgICBvbixcbiAgICBvZmYsXG4gICAgaXNBY3RpdmUsXG4gICAgZGVzdHJveSxcbiAgICBldmVudHM6IGV2ZW50cy5yZWdpc3RyeVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgc2V0dXBcbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDbGFzcywgQ3NzLCBSZW1vdmUsIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0eWxlcyBmcm9tICcuLi9zdHlsZS9TdHlsZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrZXJPcHRpb25zIHtcbiAgcmVhZG9ubHkgbGF5ZXJDbGFzczogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrZXIge1xuICByZWFkb25seSBlbGVtZW50OiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+O1xuICByZWFkb25seSBkZXN0cm95OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgQmxvY2tlciA9IChvcHRpb25zOiBQYXJ0aWFsPEJsb2NrZXJPcHRpb25zPik6IEJsb2NrZXIgPT4ge1xuICBjb25zdCBzZXR0aW5nczogQmxvY2tlck9wdGlvbnMgPSB7XG4gICAgbGF5ZXJDbGFzczogU3R5bGVzLnJlc29sdmUoJ2Jsb2NrZXInKSxcbiAgICAuLi5vcHRpb25zXG4gIH07XG5cbiAgY29uc3QgZGl2ID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ2RpdicpO1xuICBBdHRyaWJ1dGUuc2V0KGRpdiwgJ3JvbGUnLCAncHJlc2VudGF0aW9uJyk7XG4gIEF0dHJpYnV0ZS5zZXQoZGl2LCAnZGF0YS1tY2UtYm9ndXMnLCAnYWxsJyk7XG4gIENzcy5zZXRBbGwoZGl2LCB7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgbGVmdDogJzBweCcsXG4gICAgdG9wOiAnMHB4JyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnXG4gIH0pO1xuXG4gIENsYXNzLmFkZChkaXYsIFN0eWxlcy5yZXNvbHZlKCdibG9ja2VyJykpO1xuICBDbGFzcy5hZGQoZGl2LCBzZXR0aW5ncy5sYXllckNsYXNzKTtcblxuICBjb25zdCBlbGVtZW50ID0gRnVuLmNvbnN0YW50KGRpdik7XG5cbiAgY29uc3QgZGVzdHJveSA9ICgpID0+IHtcbiAgICBSZW1vdmUucmVtb3ZlKGRpdik7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBlbGVtZW50LFxuICAgIGRlc3Ryb3lcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBFdmVudCwgRXZlbnRzIH0gZnJvbSAnQGVwaG94L3BvcmtidW4nO1xuaW1wb3J0IHR5cGUgeyBFdmVudEFyZ3MsIFN1Z2FyUG9zaXRpb24gfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IERyYWdNb2RlIH0gZnJvbSAnLi4vYXBpL0RyYWdBcGlzJztcblxuaW1wb3J0IHR5cGUgeyBEcmFnRXZlbnRzLCBEcmFnU3RhdGUgfSBmcm9tICcuL0RyYWdUeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBJbkRyYWcgPSAoKTogRHJhZ1N0YXRlID0+IHtcblxuICBsZXQgcHJldmlvdXMgPSBPcHRpb25hbC5ub25lPFN1Z2FyUG9zaXRpb24+KCk7XG5cbiAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgcHJldmlvdXMgPSBPcHRpb25hbC5ub25lKCk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHBvc2l0aW9uIGRlbHRhIGJldHdlZW4gcHJldmlvdXMgcG9zaXRpb24gYW5kIG51IHBvc2l0aW9uLFxuICAvLyBvciBOb25lIGlmIHRoaXMgaXMgdGhlIGZpcnN0LiBTZXQgdGhlIHByZXZpb3VzIHBvc2l0aW9uIHRvIG51LlxuICBjb25zdCB1cGRhdGUgPSA8VD4obW9kZTogRHJhZ01vZGU8VD4sIG51OiBTdWdhclBvc2l0aW9uKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gcHJldmlvdXMubWFwKChvbGQpID0+IHtcbiAgICAgIHJldHVybiBtb2RlLmNvbXBhcmUob2xkLCBudSk7XG4gICAgfSk7XG5cbiAgICBwcmV2aW91cyA9IE9wdGlvbmFsLnNvbWUobnUpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgY29uc3Qgb25FdmVudCA9IDxUPihldmVudDogRXZlbnRBcmdzPFQ+LCBtb2RlOiBEcmFnTW9kZTxUPikgPT4ge1xuICAgIGNvbnN0IGRhdGFPcHRpb24gPSBtb2RlLmV4dHJhY3QoZXZlbnQpO1xuXG4gICAgLy8gRHJhZ3N0ZXIgbW92ZSBldmVudHMgcmVxdWlyZSBhIHBvc2l0aW9uIGRlbHRhLiBUaGUgbW92ZWV2ZW50IGlzIG9ubHkgdHJpZ2dlcmVkXG4gICAgLy8gb24gdGhlIHNlY29uZCBhbmQgc3Vic2VxdWVudCBkcmFnc3RlciBtb3ZlIGV2ZW50cy4gVGhlIGZpcnN0IGlzIGRyb3BwZWQuXG4gICAgZGF0YU9wdGlvbi5lYWNoKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBvZmZzZXQgPSB1cGRhdGUobW9kZSwgZGF0YSk7XG4gICAgICBvZmZzZXQuZWFjaCgoZCkgPT4ge1xuICAgICAgICBldmVudHMudHJpZ2dlci5tb3ZlKGQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZXZlbnRzOiBEcmFnRXZlbnRzID0gRXZlbnRzLmNyZWF0ZSh7XG4gICAgbW92ZTogRXZlbnQoWyAnaW5mbycgXSlcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbkV2ZW50LFxuICAgIHJlc2V0LFxuICAgIGV2ZW50czogZXZlbnRzLnJlZ2lzdHJ5XG4gIH07XG59O1xuIiwiaW1wb3J0IHR5cGUgeyBFdmVudEFyZ3MgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IERyYWdNb2RlIH0gZnJvbSAnLi4vYXBpL0RyYWdBcGlzJztcblxuaW1wb3J0IHR5cGUgeyBEcmFnRXZlbnRzLCBEcmFnU3RhdGUgfSBmcm9tICcuL0RyYWdUeXBlcyc7XG5pbXBvcnQgeyBJbkRyYWcgfSBmcm9tICcuL0luRHJhZyc7XG5pbXBvcnQgeyBOb0RyYWcgfSBmcm9tICcuL05vRHJhZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW92ZW1lbnQge1xuICByZWFkb25seSBvbjogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb2ZmOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBpc09uOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBvbkV2ZW50OiA8VD4oZXZlbnQ6IEV2ZW50QXJnczxUPiwgbW9kZTogRHJhZ01vZGU8VD4pID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGV2ZW50czogRHJhZ0V2ZW50c1sncmVnaXN0cnknXTtcbn1cblxuZXhwb3J0IGNvbnN0IE1vdmVtZW50ID0gKCk6IE1vdmVtZW50ID0+IHtcbiAgY29uc3Qgbm9EcmFnU3RhdGUgPSBOb0RyYWcoKTtcbiAgY29uc3QgaW5EcmFnU3RhdGUgPSBJbkRyYWcoKTtcbiAgbGV0IGRyYWdTdGF0ZTogRHJhZ1N0YXRlID0gbm9EcmFnU3RhdGU7XG5cbiAgY29uc3Qgb24gPSAoKSA9PiB7XG4gICAgZHJhZ1N0YXRlLnJlc2V0KCk7XG4gICAgZHJhZ1N0YXRlID0gaW5EcmFnU3RhdGU7XG4gIH07XG5cbiAgY29uc3Qgb2ZmID0gKCkgPT4ge1xuICAgIGRyYWdTdGF0ZS5yZXNldCgpO1xuICAgIGRyYWdTdGF0ZSA9IG5vRHJhZ1N0YXRlO1xuICB9O1xuXG4gIGNvbnN0IG9uRXZlbnQgPSA8VD4oZXZlbnQ6IEV2ZW50QXJnczxUPiwgbW9kZTogRHJhZ01vZGU8VD4pID0+IHtcbiAgICBkcmFnU3RhdGUub25FdmVudChldmVudCwgbW9kZSk7XG4gIH07XG5cbiAgY29uc3QgaXNPbiA9ICgpID0+IHtcbiAgICByZXR1cm4gZHJhZ1N0YXRlID09PSBpbkRyYWdTdGF0ZTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG9uLFxuICAgIG9mZixcbiAgICBpc09uLFxuICAgIG9uRXZlbnQsXG4gICAgZXZlbnRzOiBpbkRyYWdTdGF0ZS5ldmVudHNcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgRXZlbnQsIEV2ZW50cyB9IGZyb20gJ0BlcGhveC9wb3JrYnVuJztcblxuaW1wb3J0IHR5cGUgeyBEcmFnRXZlbnRzLCBEcmFnU3RhdGUgfSBmcm9tICcuL0RyYWdUeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBOb0RyYWcgPSAoKTogRHJhZ1N0YXRlID0+IHtcbiAgY29uc3QgZXZlbnRzOiBEcmFnRXZlbnRzID0gRXZlbnRzLmNyZWF0ZSh7XG4gICAgbW92ZTogRXZlbnQoWyAnaW5mbycgXSlcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbkV2ZW50OiBGdW4ubm9vcCxcbiAgICByZXNldDogRnVuLm5vb3AsXG4gICAgZXZlbnRzOiBldmVudHMucmVnaXN0cnlcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBOYW1lc3BhY2UgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCBzdHlsZXMgPSBOYW1lc3BhY2UuY3NzKCdlcGhveC1kcmFnc3RlcicpO1xuXG5leHBvcnQgY29uc3QgcmVzb2x2ZSA9IHN0eWxlcy5yZXNvbHZlO1xuIiwiaW1wb3J0ICogYXMgQXJyIGZyb20gJy4vQXJyJztcbmltcG9ydCAqIGFzIE9iaiBmcm9tICcuL09iaic7XG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gJy4vVHlwZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR0IHtcbiAgcmVhZG9ubHkgZm9sZDogPFQ+ICguLi5jYXNlSGFuZGxlcnM6ICgoLi4uZGF0YTogYW55W10pID0+IFQpW10pID0+IFQ7XG4gIHJlYWRvbmx5IG1hdGNoOiA8VD4gKGJyYW5jaGVzOiB7IFticmFuY2g6IHN0cmluZ106ICguLi5kYXRhOiBhbnlbXSkgPT4gVCB9KSA9PiBUO1xuICByZWFkb25seSBsb2c6IChsYWJlbDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG4vKlxuICogR2VuZXJhdGVzIGEgY2h1cmNoIGVuY29kZWQgQURUIChodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DaHVyY2hfZW5jb2RpbmcpXG4gKiBGb3Igc3ludGF4IGFuZCB1c2UsIGxvb2sgYXQgdGhlIHRlc3QgY29kZS5cbiAqL1xuY29uc3QgZ2VuZXJhdGUgPSA8VCA9IFJlY29yZDxzdHJpbmcsICguLi5kYXRhOiBhbnlbXSkgPT4gQWR0Pj4gKGNhc2VzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZ1tdIH1bXSk6IFQgPT4ge1xuICAvLyB2YWxpZGF0aW9uXG4gIGlmICghVHlwZS5pc0FycmF5KGNhc2VzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2FzZXMgbXVzdCBiZSBhbiBhcnJheScpO1xuICB9XG4gIGlmIChjYXNlcy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3RoZXJlIG11c3QgYmUgYXQgbGVhc3Qgb25lIGNhc2UnKTtcbiAgfVxuXG4gIGNvbnN0IGNvbnN0cnVjdG9yczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBhZHQgaXMgbXV0YXRlZCB0byBhZGQgdGhlIGluZGl2aWR1YWwgY2FzZXNcbiAgY29uc3QgYWR0OiBSZWNvcmQ8c3RyaW5nLCAoLi4uZGF0YTogYW55W10pID0+IEFkdD4gPSB7fTtcbiAgQXJyLmVhY2goY2FzZXMsIChhY2FzZSwgY291bnQpID0+IHtcbiAgICBjb25zdCBrZXlzOiBzdHJpbmdbXSA9IE9iai5rZXlzKGFjYXNlKTtcblxuICAgIC8vIHZhbGlkYXRpb25cbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignb25lIGFuZCBvbmx5IG9uZSBuYW1lIHBlciBjYXNlJyk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5ID0ga2V5c1swXTtcbiAgICBjb25zdCB2YWx1ZSA9IGFjYXNlW2tleV07XG5cbiAgICAvLyB2YWxpZGF0aW9uXG4gICAgaWYgKGFkdFtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZHVwbGljYXRlIGtleSBkZXRlY3RlZDonICsga2V5KTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2NhdGEnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBoYXZlIGEgY2FzZSBuYW1lZCBjYXRhIChzb3JyeSknKTtcbiAgICB9IGVsc2UgaWYgKCFUeXBlLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAvLyB0aGlzIGltcGxpY2l0bHkgY2hlY2tzIGlmIGFjYXNlIGlzIGFuIG9iamVjdFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYXNlIGFyZ3VtZW50cyBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3JzLnB1c2goa2V5KTtcbiAgICAvL1xuICAgIC8vIGNvbnN0cnVjdG9yIGZvciBrZXlcbiAgICAvL1xuICAgIGFkdFtrZXldID0gKC4uLmFyZ3M6IGFueVtdKTogQWR0ID0+IHtcbiAgICAgIGNvbnN0IGFyZ0xlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXG4gICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICBpZiAoYXJnTGVuZ3RoICE9PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGNhc2UgJyArIGtleSArICcuIEV4cGVjdGVkICcgKyB2YWx1ZS5sZW5ndGggKyAnICgnICsgdmFsdWUgKyAnKSwgZ290ICcgKyBhcmdMZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXRjaCA9IChicmFuY2hlczogeyBbYnJhbmNoOiBzdHJpbmddOiBGdW5jdGlvbiB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGJyYW5jaEtleXM6IHN0cmluZ1tdID0gT2JqLmtleXMoYnJhbmNoZXMpO1xuICAgICAgICBpZiAoY29uc3RydWN0b3JzLmxlbmd0aCAhPT0gYnJhbmNoS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dyb25nIG51bWJlciBvZiBhcmd1bWVudHMgdG8gbWF0Y2guIEV4cGVjdGVkOiAnICsgY29uc3RydWN0b3JzLmpvaW4oJywnKSArICdcXG5BY3R1YWw6ICcgKyBicmFuY2hLZXlzLmpvaW4oJywnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbGxSZXFkID0gQXJyLmZvcmFsbChjb25zdHJ1Y3RvcnMsIChyZXFLZXkpID0+IHtcbiAgICAgICAgICByZXR1cm4gQXJyLmNvbnRhaW5zKGJyYW5jaEtleXMsIHJlcUtleSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghYWxsUmVxZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGFsbCBicmFuY2hlcyB3ZXJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIG1hdGNoLiBTcGVjaWZpZWQ6ICcgKyBicmFuY2hLZXlzLmpvaW4oJywgJykgKyAnXFxuUmVxdWlyZWQ6ICcgKyBjb25zdHJ1Y3RvcnMuam9pbignLCAnKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnJhbmNoZXNba2V5XS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH07XG5cbiAgICAgIC8vXG4gICAgICAvLyB0aGUgZm9sZCBmdW5jdGlvbiBmb3Iga2V5XG4gICAgICAvL1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm9sZDogKC4uLmZvbGRBcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgIC8vIHJ1bnRpbWUgdmFsaWRhdGlvblxuICAgICAgICAgIGlmIChmb2xkQXJncy5sZW5ndGggIT09IGNhc2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGZvbGQuIEV4cGVjdGVkICcgKyBjYXNlcy5sZW5ndGggKyAnLCBnb3QgJyArIGZvbGRBcmdzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGZvbGRBcmdzW2NvdW50XTtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBtYXRjaCxcblxuICAgICAgICAvLyBOT1RFOiBPbmx5IGZvciBkZWJ1Z2dpbmcuXG4gICAgICAgIGxvZzogKGxhYmVsKSA9PiB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLmxvZyhsYWJlbCwge1xuICAgICAgICAgICAgY29uc3RydWN0b3JzLFxuICAgICAgICAgICAgY29uc3RydWN0b3I6IGtleSxcbiAgICAgICAgICAgIHBhcmFtczogYXJnc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBhZHQgYXMgYW55O1xufTtcblxuZXhwb3J0IGNvbnN0IEFkdCA9IHtcbiAgZ2VuZXJhdGVcbn07XG4iLCJpbXBvcnQgeyBFcSB9IGZyb20gJ0BlcGhveC9kaXNwdXRlJztcblxuaW1wb3J0ICogYXMgRnVuIGZyb20gJy4vRnVuJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi9PcHRpb25hbCc7XG5pbXBvcnQgKiBhcyBUeXBlIGZyb20gJy4vVHlwZSc7XG5cbnR5cGUgQXJyYXlNb3JwaGlzbTxULCBVPiA9ICh4OiBULCBpOiBudW1iZXIpID0+IFU7XG50eXBlIEFycmF5R3VhcmRQcmVkaWNhdGU8VCwgVSBleHRlbmRzIFQ+ID0gKHg6IFQsIGk6IG51bWJlcikgPT4geCBpcyBVO1xudHlwZSBBcnJheVByZWRpY2F0ZTxUPiA9IEFycmF5TW9ycGhpc208VCwgYm9vbGVhbj47XG50eXBlIENvbXBhcmF0b3I8VD4gPSAoYTogVCwgYjogVCkgPT4gbnVtYmVyO1xuXG5jb25zdCBuYXRpdmVTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbmNvbnN0IG5hdGl2ZUluZGV4T2YgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZjtcbmNvbnN0IG5hdGl2ZVB1c2ggPSBBcnJheS5wcm90b3R5cGUucHVzaDtcblxuY29uc3QgcmF3SW5kZXhPZiA9IDxUPiAodHM6IEFycmF5TGlrZTxUPiwgdDogVCk6IG51bWJlciA9PlxuICBuYXRpdmVJbmRleE9mLmNhbGwodHMsIHQpO1xuXG5leHBvcnQgY29uc3QgaW5kZXhPZiA9IDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCB4OiBUKTogT3B0aW9uYWw8bnVtYmVyPiA9PiB7XG4gIC8vIFRoZSByYXdJbmRleE9mIG1ldGhvZCBkb2VzIG5vdCB3cmFwIHVwIGluIGFuIG9wdGlvbi4gVGhpcyBpcyBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cbiAgY29uc3QgciA9IHJhd0luZGV4T2YoeHMsIHgpO1xuICByZXR1cm4gciA9PT0gLTEgPyBPcHRpb25hbC5ub25lKCkgOiBPcHRpb25hbC5zb21lKHIpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbnRhaW5zID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHg6IFQpOiBib29sZWFuID0+IHJhd0luZGV4T2YoeHMsIHgpID4gLTE7XG5cbmV4cG9ydCBjb25zdCBleGlzdHMgPSA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBib29sZWFuID0+IHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmIChwcmVkKHgsIGkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnQgY29uc3QgcmFuZ2UgPSA8VD4obnVtOiBudW1iZXIsIGY6IChhOiBudW1iZXIpID0+IFQpOiBUW10gPT4ge1xuICBjb25zdCByOiBUW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW07IGkrKykge1xuICAgIHIucHVzaChmKGkpKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbi8vIEl0J3MgYSB0b3RhbCBtaWNybyBvcHRpbWlzYXRpb24sIGJ1dCB0aGVzZSBkbyBtYWtlIHNvbWUgZGlmZmVyZW5jZS5cbi8vIFBhcnRpY3VsYXJseSBmb3IgYnJvd3NlcnMgb3RoZXIgdGhhbiBDaHJvbWUuXG4vLyAtIGxlbmd0aCBjYWNoaW5nXG4vLyBodHRwOi8vanNwZXJmLmNvbS9icm93c2VyLWRpZXQtanF1ZXJ5LWVhY2gtdnMtZm9yLWxvb3AvNjlcbi8vIC0gbm90IHVzaW5nIHB1c2hcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL2FycmF5LWRpcmVjdC1hc3NpZ25tZW50LXZzLXB1c2gvMlxuXG5leHBvcnQgY29uc3QgY2h1bmsgPSA8VD4oYXJyYXk6IEFycmF5TGlrZTxUPiwgc2l6ZTogbnVtYmVyKTogVFtdW10gPT4ge1xuICBjb25zdCByOiBUW11bXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSArPSBzaXplKSB7XG4gICAgY29uc3QgczogVFtdID0gbmF0aXZlU2xpY2UuY2FsbChhcnJheSwgaSwgaSArIHNpemUpO1xuICAgIHIucHVzaChzKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXAgPSA8VCA9IGFueSwgVSA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgZjogQXJyYXlNb3JwaGlzbTxULCBVPik6IFVbXSA9PiB7XG4gIC8vIHByZS1hbGxvY2F0aW5nIGFycmF5IHNpemUgd2hlbiBpdCdzIGd1YXJhbnRlZWQgdG8gYmUga25vd25cbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vcHVzaC1hbGxvY2F0ZWQtdnMtZHluYW1pYy8yMlxuICBjb25zdCBsZW4gPSB4cy5sZW5ndGg7XG4gIGNvbnN0IHIgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICByW2ldID0gZih4LCBpKTtcbiAgfVxuICByZXR1cm4gcjtcbn07XG5cbi8vIFVud291bmQgaW1wbGVtZW50aW5nIG90aGVyIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBlYWNoLlxuLy8gVGhlIGNvZGUgc2l6ZSBpcyByb3VnaGx5IHRoZSBzYW1lLCBhbmQgaXQgc2hvdWxkIGFsbG93IGZvciBiZXR0ZXIgb3B0aW1pc2F0aW9uLlxuLy8gY29uc3QgZWFjaCA9IGZ1bmN0aW9uPFQsIFU+KHhzOiBUW10sIGY6ICh4OiBULCBpPzogbnVtYmVyLCB4cz86IFRbXSkgPT4gdm9pZCk6IHZvaWQge1xuZXhwb3J0IGNvbnN0IGVhY2ggPSA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgZjogQXJyYXlNb3JwaGlzbTxULCB2b2lkPik6IHZvaWQgPT4ge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgZih4LCBpKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGVhY2hyID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIGY6IEFycmF5TW9ycGhpc208VCwgdm9pZD4pOiB2b2lkID0+IHtcbiAgZm9yIChsZXQgaSA9IHhzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGYoeCwgaSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwYXJ0aXRpb24gPSA8VCA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiB7IHBhc3M6IFRbXTsgZmFpbDogVFtdIH0gPT4ge1xuICBjb25zdCBwYXNzOiBUW10gPSBbXTtcbiAgY29uc3QgZmFpbDogVFtdID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBjb25zdCBhcnIgPSBwcmVkKHgsIGkpID8gcGFzcyA6IGZhaWw7XG4gICAgYXJyLnB1c2goeCk7XG4gIH1cbiAgcmV0dXJuIHsgcGFzcywgZmFpbCB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbHRlcjoge1xuICA8VCwgVSBleHRlbmRzIFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5R3VhcmRQcmVkaWNhdGU8VCwgVT4pOiBVW107XG4gIDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IFRbXTtcbn0gPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBUW10gPT4ge1xuICBjb25zdCByOiBUW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmIChwcmVkKHgsIGkpKSB7XG4gICAgICByLnB1c2goeCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByO1xufTtcblxuLypcbiAqIEdyb3VwcyBhbiBhcnJheSBpbnRvIGNvbnRpZ3VvdXMgYXJyYXlzIG9mIGxpa2UgZWxlbWVudHMuIFdoZXRoZXIgYW4gZWxlbWVudCBpcyBsaWtlIG9yIG5vdCBkZXBlbmRzIG9uIGYuXG4gKlxuICogZiBpcyBhIGZ1bmN0aW9uIHRoYXQgZGVyaXZlcyBhIHZhbHVlIGZyb20gYW4gZWxlbWVudCAtIGUuZy4gdHJ1ZSBvciBmYWxzZSwgb3IgYSBzdHJpbmcuXG4gKiBFbGVtZW50cyBhcmUgbGlrZSBpZiB0aGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyB0aGUgc2FtZSB2YWx1ZSBmb3IgdGhlbSAoYWNjb3JkaW5nIHRvID09PSkuXG4gKlxuICpcbiAqIE9yZGVyIG9mIHRoZSBlbGVtZW50cyBpcyBwcmVzZXJ2ZWQuIEFyci5mbGF0dGVuKCkgb24gdGhlIHJlc3VsdCB3aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgbGlzdCwgYXMgd2l0aCBIYXNrZWxsIGdyb3VwQnkgZnVuY3Rpb24uXG4gKiAgRm9yIGEgZ29vZCBleHBsYW5hdGlvbiwgc2VlIHRoZSBncm91cCBmdW5jdGlvbiAod2hpY2ggaXMgYSBzcGVjaWFsIGNhc2Ugb2YgZ3JvdXBCeSlcbiAqICBodHRwOi8vaGFja2FnZS5oYXNrZWxsLm9yZy9wYWNrYWdlL2Jhc2UtNC43LjAuMC9kb2NzL0RhdGEtTGlzdC5odG1sI3Y6Z3JvdXBcbiAqL1xuZXhwb3J0IGNvbnN0IGdyb3VwQnkgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgZjogKGE6IFQpID0+IGFueSk6IFRbXVtdID0+IHtcbiAgaWYgKHhzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgd2FzVHlwZSA9IGYoeHNbMF0pOyAvLyBpbml0aWFsIGNhc2UgZm9yIG1hdGNoaW5nXG4gICAgY29uc3QgcjogVFtdW10gPSBbXTtcbiAgICBsZXQgZ3JvdXA6IFRbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBjb25zdCB4ID0geHNbaV07XG4gICAgICBjb25zdCB0eXBlID0gZih4KTtcbiAgICAgIGlmICh0eXBlICE9PSB3YXNUeXBlKSB7XG4gICAgICAgIHIucHVzaChncm91cCk7XG4gICAgICAgIGdyb3VwID0gW107XG4gICAgICB9XG4gICAgICB3YXNUeXBlID0gdHlwZTtcbiAgICAgIGdyb3VwLnB1c2goeCk7XG4gICAgfVxuICAgIGlmIChncm91cC5sZW5ndGggIT09IDApIHtcbiAgICAgIHIucHVzaChncm91cCk7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZm9sZHIgPSA8VCwgVT4oeHM6IEFycmF5TGlrZTxUPiwgZjogKGFjYzogVSwgeDogVCwgaTogbnVtYmVyKSA9PiBVLCBhY2M6IFUpOiBVID0+IHtcbiAgZWFjaHIoeHMsICh4LCBpKSA9PiB7XG4gICAgYWNjID0gZihhY2MsIHgsIGkpO1xuICB9KTtcbiAgcmV0dXJuIGFjYztcbn07XG5cbmV4cG9ydCBjb25zdCBmb2xkbCA9IDxUID0gYW55LCBVID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBmOiAoYWNjOiBVLCB4OiBULCBpOiBudW1iZXIpID0+IFUsIGFjYzogVSk6IFUgPT4ge1xuICBlYWNoKHhzLCAoeCwgaSkgPT4ge1xuICAgIGFjYyA9IGYoYWNjLCB4LCBpKTtcbiAgfSk7XG4gIHJldHVybiBhY2M7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZFVudGlsOiB7XG4gIDxULCBVIGV4dGVuZHMgVD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlHdWFyZFByZWRpY2F0ZTxULCBVPiwgdW50aWw6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8VT47XG4gIDxUID0gYW55Pih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPiwgdW50aWw6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8VD47XG59ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+LCB1bnRpbDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxUPiA9PiB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICBpZiAocHJlZCh4LCBpKSkge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoeCk7XG4gICAgfSBlbHNlIGlmICh1bnRpbCh4LCBpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZDoge1xuICA8VCwgVSBleHRlbmRzIFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5R3VhcmRQcmVkaWNhdGU8VCwgVT4pOiBPcHRpb25hbDxVPjtcbiAgPFQgPSBhbnk+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8VD47XG59ID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIHByZWQ6IEFycmF5UHJlZGljYXRlPFQ+KTogT3B0aW9uYWw8VD4gPT4ge1xuICByZXR1cm4gZmluZFVudGlsKHhzLCBwcmVkLCBGdW4ubmV2ZXIpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbmRJbmRleCA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBwcmVkOiBBcnJheVByZWRpY2F0ZTxUPik6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKHByZWQoeCwgaSkpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZExhc3RJbmRleCA9IDxUPihhcnI6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChwcmVkKGFycltpXSwgaSkpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmxhdHRlbiA9IDxUPih4czogQXJyYXlMaWtlPFRbXT4pOiBUW10gPT4ge1xuICAvLyBOb3RlLCB0aGlzIGlzIHBvc3NpYmxlIGJlY2F1c2UgcHVzaCBzdXBwb3J0cyBtdWx0aXBsZSBhcmd1bWVudHM6XG4gIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2NvbmNhdC1wdXNoLzZcbiAgLy8gTm90ZSB0aGF0IGluIHRoZSBwYXN0LCBjb25jYXQoKSB3b3VsZCBzaWxlbnRseSB3b3JrICh2ZXJ5IHNsb3dseSkgZm9yIGFycmF5LWxpa2Ugb2JqZWN0cy5cbiAgLy8gV2l0aCB0aGlzIGNoYW5nZSBpdCB3aWxsIHRocm93IGFuIGVycm9yLlxuICBjb25zdCByOiBUW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgLy8gRW5zdXJlIHRoYXQgZWFjaCB2YWx1ZSBpcyBhbiBhcnJheSBpdHNlbGZcbiAgICBpZiAoIVR5cGUuaXNBcnJheSh4c1tpXSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXJyLmZsYXR0ZW4gaXRlbSAnICsgaSArICcgd2FzIG5vdCBhbiBhcnJheSwgaW5wdXQ6ICcgKyB4cyk7XG4gICAgfVxuICAgIG5hdGl2ZVB1c2guYXBwbHkociwgeHNbaV0pO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IGJpbmQgPSA8VCA9IGFueSwgVSA9IGFueT4oeHM6IEFycmF5TGlrZTxUPiwgZjogQXJyYXlNb3JwaGlzbTxULCBVW10+KTogVVtdID0+XG4gIGZsYXR0ZW4obWFwKHhzLCBmKSk7XG5cbmV4cG9ydCBjb25zdCBmb3JhbGwgPSA8VD4oeHM6IEFycmF5TGlrZTxUPiwgcHJlZDogQXJyYXlQcmVkaWNhdGU8VD4pOiBib29sZWFuID0+IHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHhzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIGlmIChwcmVkKHgsIGkpICE9PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGVxdWFsID0gPFQ+KGExOiBBcnJheUxpa2U8VD4sIGEyOiBBcnJheUxpa2U8VD4sIGVxOiBFcS5FcTxUPiA9IEVxLmVxQW55KTogYm9vbGVhbiA9PlxuICBFcS5lcUFycmF5KGVxKS5lcShhMSwgYTIpO1xuXG5leHBvcnQgY29uc3QgcmV2ZXJzZSA9IDxUPih4czogQXJyYXlMaWtlPFQ+KTogVFtdID0+IHtcbiAgY29uc3QgcjogVFtdID0gbmF0aXZlU2xpY2UuY2FsbCh4cywgMCk7XG4gIHIucmV2ZXJzZSgpO1xuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBkaWZmZXJlbmNlID0gPFQ+KGExOiBBcnJheUxpa2U8VD4sIGEyOiBBcnJheUxpa2U8VD4pOiBUW10gPT4gZmlsdGVyKGExLCAoeCkgPT4gIWNvbnRhaW5zKGEyLCB4KSk7XG5cbmV4cG9ydCBjb25zdCBtYXBUb09iamVjdDoge1xuICA8VCBleHRlbmRzIHN0cmluZywgVT4oeHM6IEFycmF5TGlrZTxUPiwgZjogKHg6IFQsIGk6IG51bWJlcikgPT4gVSk6IFJlY29yZDxULCBVPjtcbiAgPFQsIFIgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+Pih4czogQXJyYXlMaWtlPFQ+LCBmOiAoeDogVCwgaTogbnVtYmVyKSA9PiBSW2tleW9mIFJdKTogUjtcbn0gPSA8VCwgUiBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KHhzOiBBcnJheUxpa2U8VD4sIGY6ICh4OiBULCBpOiBudW1iZXIpID0+IFJba2V5b2YgUl0pOiBSID0+IHtcbiAgY29uc3QgciA9IHt9IGFzIFI7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSB4cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IHggPSB4c1tpXTtcbiAgICByW1N0cmluZyh4KSBhcyBrZXlvZiBSXSA9IGYoeCwgaSk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3QgcHVyZSA9IDxUPih4OiBUKTogVFtdID0+IFsgeCBdO1xuXG5leHBvcnQgY29uc3Qgc29ydCA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBjb21wYXJhdG9yPzogQ29tcGFyYXRvcjxUPik6IFRbXSA9PiB7XG4gIGNvbnN0IGNvcHk6IFRbXSA9IG5hdGl2ZVNsaWNlLmNhbGwoeHMsIDApO1xuICBjb3B5LnNvcnQoY29tcGFyYXRvcik7XG4gIHJldHVybiBjb3B5O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldCA9IDxUPih4czogQXJyYXlMaWtlPFQ+LCBpOiBudW1iZXIpOiBPcHRpb25hbDxUPiA9PiBpID49IDAgJiYgaSA8IHhzLmxlbmd0aCA/IE9wdGlvbmFsLnNvbWUoeHNbaV0pIDogT3B0aW9uYWwubm9uZSgpO1xuXG5leHBvcnQgY29uc3QgaGVhZCA9IDxUPih4czogQXJyYXlMaWtlPFQ+KTogT3B0aW9uYWw8VD4gPT4gZ2V0KHhzLCAwKTtcblxuZXhwb3J0IGNvbnN0IGxhc3QgPSA8VD4oeHM6IEFycmF5TGlrZTxUPik6IE9wdGlvbmFsPFQ+ID0+IGdldCh4cywgeHMubGVuZ3RoIC0gMSk7XG5cbmV4cG9ydCBjb25zdCBmcm9tOiA8VD4oeDogQXJyYXlMaWtlPFQ+KSA9PiBUW10gPSBUeXBlLmlzRnVuY3Rpb24oQXJyYXkuZnJvbSkgPyBBcnJheS5mcm9tIDogKHgpID0+IG5hdGl2ZVNsaWNlLmNhbGwoeCk7XG5cbmV4cG9ydCBjb25zdCBmaW5kTWFwID0gPEEsIEI+KGFycjogQXJyYXlMaWtlPEE+LCBmOiAoYTogQSwgaW5kZXg6IG51bWJlcikgPT4gT3B0aW9uYWw8Qj4pOiBPcHRpb25hbDxCPiA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgciA9IGYoYXJyW2ldLCBpKTtcbiAgICBpZiAoci5pc1NvbWUoKSkge1xuICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5ub25lPEI+KCk7XG59O1xuXG5leHBvcnQgY29uc3QgdW5pcXVlID0gPFQ+KHhzOiBBcnJheUxpa2U8VD4sIGNvbXBhcmF0b3I/OiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbik6IFRbXSA9PiB7XG4gIGNvbnN0IHI6IFRbXSA9IFtdO1xuXG4gIGNvbnN0IGlzRHVwbGljYXRlZCA9IFR5cGUuaXNGdW5jdGlvbihjb21wYXJhdG9yKSA/XG4gICAgKHg6IFQpID0+IGV4aXN0cyhyLCAoaSkgPT4gY29tcGFyYXRvcihpLCB4KSkgOlxuICAgICh4OiBUKSA9PiBjb250YWlucyhyLCB4KTtcblxuICBmb3IgKGxldCBpID0gMCwgbGVuID0geHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgaWYgKCFpc0R1cGxpY2F0ZWQoeCkpIHtcbiAgICAgIHIucHVzaCh4KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcjtcbn07XG4iLCJleHBvcnQgaW50ZXJmYWNlIENlbGw8VD4ge1xuICByZWFkb25seSBnZXQ6ICgpID0+IFQ7XG4gIHJlYWRvbmx5IHNldDogKHZhbHVlOiBUKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgQ2VsbCA9IDxUPihpbml0aWFsOiBUKTogQ2VsbDxUPiA9PiB7XG4gIGxldCB2YWx1ZSA9IGluaXRpYWw7XG5cbiAgY29uc3QgZ2V0ID0gKCkgPT4ge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICBjb25zdCBzZXQgPSAodjogVCkgPT4ge1xuICAgIHZhbHVlID0gdjtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldCxcbiAgICBzZXRcbiAgfTtcbn07XG4iLCJpbXBvcnQgKiBhcyBCYWdVdGlscyBmcm9tICcuLi91dGlsL0JhZ1V0aWxzJztcblxuaW1wb3J0ICogYXMgQXJyIGZyb20gJy4vQXJyJztcbmltcG9ydCAqIGFzIEZ1biBmcm9tICcuL0Z1bic7XG5pbXBvcnQgKiBhcyBPYmogZnJvbSAnLi9PYmonO1xuaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuL1R5cGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRyYWN0Q29uZGl0aW9uPFQ+IHtcbiAgcmVhZG9ubHkgbGFiZWw6IHN0cmluZztcbiAgcmVhZG9ubHkgdmFsaWRhdGU6ICh2YWx1ZTogVCwga2V5OiBzdHJpbmcpID0+IGJvb2xlYW47XG59XG5cbnR5cGUgSWRlbnRpdHlGbiA9IDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4ob2JqOiBUKSA9PiBUO1xudHlwZSBJZGVudGl0eVdpdGhDb25kaXRpb25GbjxWPiA9IDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgVj4+KG9iajogVCkgPT4gVDtcbnR5cGUgSGFuZGxlRm4gPSAocmVxdWlyZWQ6IHN0cmluZ1tdLCBrZXlzOiBzdHJpbmdbXSkgPT4gdm9pZDtcblxuLy8gRW5zdXJlIHRoYXQgdGhlIG9iamVjdCBoYXMgYWxsIHJlcXVpcmVkIGZpZWxkcy4gVGhleSBtdXN0IGJlIGZ1bmN0aW9ucy5cbmNvbnN0IGJhc2UgPSAoaGFuZGxlVW5zdXBwb3J0ZWQ6IEhhbmRsZUZuLCByZXF1aXJlZDogc3RyaW5nW10pID0+IHtcbiAgcmV0dXJuIGJhc2VXaXRoKGhhbmRsZVVuc3VwcG9ydGVkLCByZXF1aXJlZCwge1xuICAgIHZhbGlkYXRlOiBUeXBlLmlzRnVuY3Rpb24sXG4gICAgbGFiZWw6ICdmdW5jdGlvbidcbiAgfSk7XG59O1xuXG4vLyBFbnN1cmUgdGhhdCB0aGUgb2JqZWN0IGhhcyBhbGwgcmVxdWlyZWQgZmllbGRzLiBUaGV5IG11c3Qgc2F0aXN5IHByZWRpY2F0ZXMuXG5jb25zdCBiYXNlV2l0aCA9IDxWPihoYW5kbGVVbnN1cHBvcnRlZDogSGFuZGxlRm4sIHJlcXVpcmVkOiBzdHJpbmdbXSwgcHJlZDogQ29udHJhY3RDb25kaXRpb248Vj4pOiBJZGVudGl0eUZuID0+IHtcbiAgaWYgKHJlcXVpcmVkLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQuJyk7XG4gIH1cblxuICBCYWdVdGlscy52YWxpZGF0ZVN0ckFycigncmVxdWlyZWQnLCByZXF1aXJlZCk7XG5cbiAgQmFnVXRpbHMuY2hlY2tEdXBlcyhyZXF1aXJlZCk7XG5cbiAgcmV0dXJuIDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgVj4+KG9iajogVCkgPT4ge1xuICAgIGNvbnN0IGtleXM6IHN0cmluZ1tdID0gT2JqLmtleXMob2JqKTtcblxuICAgIC8vIEVuc3VyZSBhbGwgcmVxdWlyZWQga2V5cyBhcmUgcHJlc2VudC5cbiAgICBjb25zdCBhbGxSZXFkID0gQXJyLmZvcmFsbChyZXF1aXJlZCwgKHJlcSkgPT4ge1xuICAgICAgcmV0dXJuIEFyci5jb250YWlucyhrZXlzLCByZXEpO1xuICAgIH0pO1xuXG4gICAgaWYgKCFhbGxSZXFkKSB7XG4gICAgICBCYWdVdGlscy5yZXFNZXNzYWdlKHJlcXVpcmVkLCBrZXlzKTtcbiAgICB9XG5cbiAgICBoYW5kbGVVbnN1cHBvcnRlZChyZXF1aXJlZCwga2V5cyk7XG5cbiAgICBjb25zdCBpbnZhbGlkS2V5cyA9IEFyci5maWx0ZXIocmVxdWlyZWQsIChrZXkpID0+IHtcbiAgICAgIHJldHVybiAhcHJlZC52YWxpZGF0ZShvYmpba2V5XSwga2V5KTtcbiAgICB9KTtcblxuICAgIGlmIChpbnZhbGlkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICBCYWdVdGlscy5pbnZhbGlkVHlwZU1lc3NhZ2UoaW52YWxpZEtleXMsIHByZWQubGFiZWwpO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH07XG59O1xuXG5jb25zdCBoYW5kbGVFeGFjdCA9IChyZXF1aXJlZDogc3RyaW5nW10sIGtleXM6IHN0cmluZ1tdKSA9PiB7XG4gIGNvbnN0IHVuc3VwcG9ydGVkID0gQXJyLmZpbHRlcihrZXlzLCAoa2V5KSA9PiB7XG4gICAgcmV0dXJuICFBcnIuY29udGFpbnMocmVxdWlyZWQsIGtleSk7XG4gIH0pO1xuXG4gIGlmICh1bnN1cHBvcnRlZC5sZW5ndGggPiAwKSB7XG4gICAgQmFnVXRpbHMudW5zdXBwTWVzc2FnZSh1bnN1cHBvcnRlZCk7XG4gIH1cbn07XG5cbmNvbnN0IGFsbG93RXh0cmEgPSBGdW4ubm9vcDtcblxuZXhwb3J0IGNvbnN0IGV4YWN0bHkgPSAocmVxdWlyZWQ6IHN0cmluZ1tdKTogSWRlbnRpdHlGbiA9PiBiYXNlKGhhbmRsZUV4YWN0LCByZXF1aXJlZCk7XG5leHBvcnQgY29uc3QgZW5zdXJlID0gKHJlcXVpcmVkOiBzdHJpbmdbXSk6IElkZW50aXR5Rm4gPT4gYmFzZShhbGxvd0V4dHJhLCByZXF1aXJlZCk7XG5leHBvcnQgY29uc3QgZW5zdXJlV2l0aCA9IDxWPihyZXF1aXJlZDogc3RyaW5nW10sIGNvbmRpdGlvbjogQ29udHJhY3RDb25kaXRpb248Vj4pOiBJZGVudGl0eVdpdGhDb25kaXRpb25GbjxWPiA9PlxuICBiYXNlV2l0aChhbGxvd0V4dHJhLCByZXF1aXJlZCwgY29uZGl0aW9uKTtcbiIsImltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxuY29uc3Qgbm9vcDogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkXG49ICgpID0+IHsgfTtcblxuY29uc3Qgbm9hcmc6IDxUPihmOiAoKSA9PiBUKSA9PiAoLi4uYXJnczogYW55W10pID0+IHZvaWRcbj0gKGYpID0+ICgpID0+IGYoKTtcblxuLyoqIENvbXBvc2UgYSB1bmFyeSBmdW5jdGlvbiB3aXRoIGFuIG4tYXJ5IGZ1bmN0aW9uICovXG5jb25zdCBjb21wb3NlID0gPFQgZXh0ZW5kcyBhbnlbXSwgVSwgVj4oZmE6ICh2OiBVKSA9PiBWLCBmYjogKC4uLng6IFQpID0+IFUpOiAoLi4ueDogVCkgPT4gViA9PiB7XG4gIHJldHVybiAoLi4uYXJnczogVCkgPT4ge1xuICAgIHJldHVybiBmYShmYi5hcHBseShudWxsLCBhcmdzKSk7XG4gIH07XG59O1xuXG4vKiogQ29tcG9zZSB0d28gdW5hcnkgZnVuY3Rpb25zLiBTaW1pbGFyIHRvIGNvbXBvc2UsIGJ1dCBhdm9pZHMgdXNpbmcgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LiAqL1xuY29uc3QgY29tcG9zZTEgPSA8QSwgQiwgQz4gKGZiYzogKGI6IEIpID0+IEMsIGZhYjogKGE6IEEpID0+IEIpID0+IChhOiBBKTogQyA9PlxuICBmYmMoZmFiKGEpKTtcblxuY29uc3QgY29uc3RhbnQgPSA8VD4odmFsdWU6IFQpOiAoKSA9PiBUID0+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG59O1xuXG5jb25zdCBpZGVudGl0eSA9IDxUID0gYW55Pih4OiBUKTogVCA9PiB7XG4gIHJldHVybiB4O1xufTtcblxuY29uc3QgdHJpcGxlRXF1YWxzID0gPFQ+KGE6IFQsIGI6IFQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGEgPT09IGI7XG59O1xuXG5mdW5jdGlvbiBjdXJyeSA8UkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQyk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRik6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcpOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxBLCBCLCBDLCBELCBFLCBGLCBHLCBILCBSRVNUIGV4dGVuZHMgYW55W10sIE9VVD4oZm46IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBILCAuLi5yZXN0QXJnczogUkVTVCkgPT4gT1VULCBhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFLCBmOiBGLCBnOiBHLCBoOiBIKTogKC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQ7XG5mdW5jdGlvbiBjdXJyeSA8QSwgQiwgQywgRCwgRSwgRiwgRywgSCwgSSwgUkVTVCBleHRlbmRzIGFueVtdLCBPVVQ+KGZuOiAoYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSwgLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVCwgYTogQSwgYjogQiwgYzogQywgZDogRCwgZTogRSwgZjogRiwgZzogRywgaDogSCwgaTogSSk6ICguLi5yZXN0QXJnczogUkVTVCkgPT4gT1VUO1xuZnVuY3Rpb24gY3VycnkgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEgsIEksIEosIFJFU1QgZXh0ZW5kcyBhbnlbXSwgT1VUPihmbjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgsIGk6IEksIGo6IEosIC4uLnJlc3RBcmdzOiBSRVNUKSA9PiBPVVQsIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUsIGY6IEYsIGc6IEcsIGg6IEgsIGk6IEksIGo6IEopOiAoLi4ucmVzdEFyZ3M6IFJFU1QpID0+IE9VVDtcbmZ1bmN0aW9uIGN1cnJ5IDxPVVQ+KGZuOiAoLi4uYWxsQXJnczogYW55W10pID0+IE9VVCwgLi4uaW5pdGlhbEFyZ3M6IGFueVtdKTogKC4uLnJlc3RBcmdzOiBhbnlbXSkgPT4gT1VUIHtcbiAgcmV0dXJuICguLi5yZXN0QXJnczogYW55W10pID0+IHtcbiAgICBjb25zdCBhbGwgPSBpbml0aWFsQXJncy5jb25jYXQocmVzdEFyZ3MpO1xuICAgIHJldHVybiBmbi5hcHBseShudWxsLCBhbGwpO1xuICB9O1xufVxuXG5jb25zdCBub3QgPSA8VD4oZjogKHQ6IFQpID0+IGJvb2xlYW4pID0+ICh0OiBUKTogYm9vbGVhbiA9PlxuICAhZih0KTtcblxuY29uc3QgZGllID0gKG1zZzogc3RyaW5nKSA9PiB7XG4gIHJldHVybiAoKTogbmV2ZXIgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICB9O1xufTtcblxuY29uc3QgYXBwbHkgPSA8VD4oZjogKCkgPT4gVCk6IFQgPT4ge1xuICByZXR1cm4gZigpO1xufTtcblxuY29uc3QgY2FsbCA9IChmOiAoKSA9PiBhbnkpOiB2b2lkID0+IHtcbiAgZigpO1xufTtcblxuY29uc3QgbmV2ZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gZmFsc2UgPSBjb25zdGFudDxmYWxzZT4oZmFsc2UpO1xuY29uc3QgYWx3YXlzOiAoLi4uYXJnczogYW55W10pID0+IHRydWUgPSBjb25zdGFudDx0cnVlPih0cnVlKTtcblxuLyogVXNlZCB0byB3ZWFrZW4gdHlwZXMgKi9cbmNvbnN0IHdlYWtlbiA9IDxBLCBCIGV4dGVuZHMgQT4oYjogQik6IEEgPT4gYjtcblxudHlwZSBGdW48WCwgWT4gPSAoeDogWCkgPT4gWTtcbmNvbnN0IHBpcGU6IHtcbiAgPEEsIEI+KGE6IEEsIGFiOiBGdW48QSwgQj4pOiBCO1xuICA8QSwgQiwgQz4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPik6IEM7XG4gIDxBLCBCLCBDLCBEPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+LCBjZDogRnVuPEMsIEQ+KTogRDtcbiAgPEEsIEIsIEMsIEQsIEU+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4sIGRlOiBGdW48RCwgRT4pOiBFO1xuICA8QSwgQiwgQywgRCwgRSwgRj4oYTogQSwgYWI6IEZ1bjxBLCBCPiwgYmM6IEZ1bjxCLCBDPiwgY2Q6IEZ1bjxDLCBEPiwgZGU6IEZ1bjxELCBFPiwgZWY6IEZ1bjxFLCBGPik6IEY7XG4gIDxBLCBCLCBDLCBELCBFLCBGLCBHPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYzogRnVuPEIsIEM+LCBjZDogRnVuPEMsIEQ+LCBkZTogRnVuPEQsIEU+LCBlZjogRnVuPEUsIEY+LCBmZzogRnVuPEYsIEc+KTogRztcbiAgPEEsIEIsIEMsIEQsIEUsIEYsIEcsIEg+KGE6IEEsIGFiOiBGdW48QSwgQj4sIGJjOiBGdW48QiwgQz4sIGNkOiBGdW48QywgRD4sIGRlOiBGdW48RCwgRT4sIGVmOiBGdW48RSwgRj4sIGZnOiBGdW48RiwgRz4sIGdoOiBGdW48RywgSD4pOiBIO1xufSA9XG4gIDxBLCBCLCBDLCBELCBFLCBGLCBHLCBIPihhOiBBLCBhYjogRnVuPEEsIEI+LCBiYz86IEZ1bjxCLCBDPiwgY2Q/OiBGdW48QywgRD4sIGRlPzogRnVuPEQsIEU+LCBlZj86IEZ1bjxFLCBGPiwgZmc/OiBGdW48RiwgRz4sIGdoPzogRnVuPEcsIEg+KTogQiB8IEMgfCBEIHwgRSB8IEYgfCBHIHwgSCA9PiB7XG4gICAgY29uc3QgYiA9IGFiKGEpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoYmMpKSB7XG4gICAgICByZXR1cm4gYjtcbiAgICB9XG5cbiAgICBjb25zdCBjID0gYmMoYik7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShjZCkpIHtcbiAgICAgIHJldHVybiBjO1xuICAgIH1cblxuICAgIGNvbnN0IGQgPSBjZChjKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGRlKSkge1xuICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuXG4gICAgY29uc3QgZSA9IGRlKGQpO1xuICAgIGlmIChUeXBlLmlzTnVsbGFibGUoZWYpKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG5cbiAgICBjb25zdCBmID0gZWYoZSk7XG4gICAgaWYgKFR5cGUuaXNOdWxsYWJsZShmZykpIHtcbiAgICAgIHJldHVybiBmO1xuICAgIH1cblxuICAgIGNvbnN0IGcgPSBmZyhmKTtcbiAgICBpZiAoVHlwZS5pc051bGxhYmxlKGdoKSkge1xuICAgICAgcmV0dXJuIGc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdoKGcpO1xuICB9O1xuXG5leHBvcnQge1xuICBub29wLFxuICBub2FyZyxcbiAgY29tcG9zZSxcbiAgY29tcG9zZTEsXG4gIGNvbnN0YW50LFxuICBpZGVudGl0eSxcbiAgdHJpcGxlRXF1YWxzLFxuICBjdXJyeSxcbiAgbm90LFxuICBkaWUsXG4gIGFwcGx5LFxuICBjYWxsLFxuICBuZXZlcixcbiAgYWx3YXlzLFxuICB3ZWFrZW4sXG4gIHBpcGVcbn07XG4iLCIvLyBVc2Ugd2luZG93IG9iamVjdCBhcyB0aGUgZ2xvYmFsIGlmIGl0J3MgYXZhaWxhYmxlIHNpbmNlIENTUCB3aWxsIGJsb2NrIHNjcmlwdCBldmFsc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1pbXBsaWVkLWV2YWxcbmV4cG9ydCBjb25zdCBHbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpczsnKSgpO1xuIiwiZXhwb3J0IGludGVyZmFjZSBDc3NOYW1lc3BhY2Uge1xuICByZWFkb25seSByZXNvbHZlOiAoc3RyOiBzdHJpbmcpID0+IHN0cmluZztcbn1cblxuLy8gVGhpcyBBUEkgaXMgaW50ZW5kZWQgdG8gZ2l2ZSB0aGUgY2FwYWJpbGl0eSB0byByZXR1cm4gbmFtZXNwYWNlZCBzdHJpbmdzLlxuLy8gRm9yIENTUywgc2luY2UgZG90cyBhcmUgbm90IHZhbGlkIGNsYXNzIG5hbWVzLCB0aGUgZG90cyBhcmUgdHVybmVkIGludG8gZGFzaGVzLlxuZXhwb3J0IGNvbnN0IGNzcyA9IChuYW1lc3BhY2U6IHN0cmluZyk6IENzc05hbWVzcGFjZSA9PiB7XG4gIGNvbnN0IGRhc2hOYW1lc3BhY2UgPSBuYW1lc3BhY2UucmVwbGFjZSgvXFwuL2csICctJyk7XG5cbiAgY29uc3QgcmVzb2x2ZSA9IChzdHI6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBkYXNoTmFtZXNwYWNlICsgJy0nICsgc3RyO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVzb2x2ZVxuICB9O1xufTtcbiIsImltcG9ydCB7IEVxIH0gZnJvbSAnQGVwaG94L2Rpc3B1dGUnO1xuXG5pbXBvcnQgKiBhcyBGdW4gZnJvbSAnLi9GdW4nO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcblxudHlwZSBPYmpLZXlzPFQgZXh0ZW5kcyB7fT4gPSBFeHRyYWN0PGtleW9mIFQsIHN0cmluZz47XG50eXBlIE9iakNhbGxiYWNrPFQgZXh0ZW5kcyB7fT4gPSAodmFsdWU6IFRba2V5b2YgVF0sIGtleTogT2JqS2V5czxUPikgPT4gdm9pZDtcbnR5cGUgT2JqTW9ycGhpc208VCBleHRlbmRzIHt9LCBSPiA9ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBPYmpLZXlzPFQ+KSA9PiBSO1xudHlwZSBPYmpHdWFyZFByZWRpY2F0ZTxUIGV4dGVuZHMge30sIFUgZXh0ZW5kcyBUW2tleW9mIFRdPiA9ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBPYmpLZXlzPFQ+KSA9PiB2YWx1ZSBpcyBVO1xudHlwZSBPYmpQcmVkaWNhdGU8VCBleHRlbmRzIHt9PiA9ICh2YWx1ZTogVFtrZXlvZiBUXSwga2V5OiBPYmpLZXlzPFQ+KSA9PiBib29sZWFuO1xuXG4vLyBUaGVyZSBhcmUgbWFueSB2YXJpYXRpb25zIG9mIE9iamVjdCBpdGVyYXRpb24gdGhhdCBhcmUgZmFzdGVyIHRoYW4gdGhlICdmb3ItaW4nIHN0eWxlOlxuLy8gaHR0cDovL2pzcGVyZi5jb20vb2JqZWN0LWtleXMtaXRlcmF0aW9uLzEwN1xuLy9cbi8vIFVzZSB0aGUgbmF0aXZlIGtleXMgaWYgaXQgaXMgYXZhaWxhYmxlIChJRTkrKSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBtYW51YWxseSBmaWx0ZXJpbmdcbmV4cG9ydCBjb25zdCBrZXlzID0gT2JqZWN0LmtleXM7XG5cbmV4cG9ydCBjb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eTtcblxuZXhwb3J0IGNvbnN0IGVhY2ggPSA8VCBleHRlbmRzIHt9PihvYmo6IFQsIGY6IE9iakNhbGxiYWNrPFQ+KTogdm9pZCA9PiB7XG4gIGNvbnN0IHByb3BzID0ga2V5cyhvYmopIGFzIEFycmF5PE9iaktleXM8VD4+O1xuICBmb3IgKGxldCBrID0gMCwgbGVuID0gcHJvcHMubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcbiAgICBjb25zdCBpID0gcHJvcHNba107XG4gICAgY29uc3QgeCA9IG9ialtpXTtcbiAgICBmKHgsIGkpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgbWFwID0gPFQgZXh0ZW5kcyB7fSwgUj4ob2JqOiBULCBmOiBPYmpNb3JwaGlzbTxULCBSPik6IHsgW2sgaW4ga2V5b2YgVF06IFIgfSA9PiB7XG4gIHJldHVybiB0dXBsZU1hcDx7IFtrIGluIGtleW9mIFRdOiBSIH0sIFQ+KG9iaiwgKHgsIGkpID0+ICh7XG4gICAgazogaSxcbiAgICB2OiBmKHgsIGkpXG4gIH0pKTtcbn07XG5cbmV4cG9ydCBjb25zdCB0dXBsZU1hcCA9IDxSIGV4dGVuZHMge30sIFQgZXh0ZW5kcyB7fT4ob2JqOiBULCBmOiBPYmpNb3JwaGlzbTxULCB7IGs6IGtleW9mIFI7IHY6IFJba2V5b2YgUl0gfT4pOiBSID0+IHtcbiAgY29uc3QgciA9IHt9IGFzIFI7XG4gIGVhY2gob2JqLCAoeCwgaSkgPT4ge1xuICAgIGNvbnN0IHR1cGxlID0gZih4LCBpKTtcbiAgICByW3R1cGxlLmtdID0gdHVwbGUudjtcbiAgfSk7XG4gIHJldHVybiByO1xufTtcblxuY29uc3Qgb2JqQWNjID0gPFQgZXh0ZW5kcyB7fT4ocjogVCkgPT4gKHg6IFRba2V5b2YgVF0sIGk6IGtleW9mIFQpOiB2b2lkID0+IHtcbiAgcltpXSA9IHg7XG59O1xuXG5jb25zdCBpbnRlcm5hbEZpbHRlciA9IDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogT2JqUHJlZGljYXRlPFQ+LCBvblRydWU6IE9iakNhbGxiYWNrPFQ+LCBvbkZhbHNlOiBPYmpDYWxsYmFjazxUPikgPT4ge1xuICBlYWNoKG9iaiwgKHgsIGkpID0+IHtcbiAgICAocHJlZCh4LCBpKSA/IG9uVHJ1ZSA6IG9uRmFsc2UpKHgsIGkpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBiaWZpbHRlciA9IDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogT2JqUHJlZGljYXRlPFQ+KTogeyB0OiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPjsgZjogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT4gfSA9PiB7XG4gIGNvbnN0IHQ6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+ID0ge307XG4gIGNvbnN0IGY6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+ID0ge307XG4gIGludGVybmFsRmlsdGVyKG9iaiwgcHJlZCwgb2JqQWNjKHQpLCBvYmpBY2MoZikpO1xuICByZXR1cm4geyB0LCBmIH07XG59O1xuXG5leHBvcnQgY29uc3QgZmlsdGVyOiB7XG4gIDxUIGV4dGVuZHMge30sIFUgZXh0ZW5kcyBUW2tleW9mIFRdPihvYmo6IFQsIHByZWQ6IE9iakd1YXJkUHJlZGljYXRlPFQsIFU+KTogUmVjb3JkPHN0cmluZywgVT47XG4gIDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogT2JqUHJlZGljYXRlPFQ+KTogUmVjb3JkPHN0cmluZywgVFtrZXlvZiBUXT47XG59ID0gPFQgZXh0ZW5kcyB7fT4ob2JqOiBULCBwcmVkOiBPYmpQcmVkaWNhdGU8VD4pOiBSZWNvcmQ8c3RyaW5nLCBUW2tleW9mIFRdPiA9PiB7XG4gIGNvbnN0IHQ6IFJlY29yZDxzdHJpbmcsIFRba2V5b2YgVF0+ID0ge307XG4gIGludGVybmFsRmlsdGVyKG9iaiwgcHJlZCwgb2JqQWNjKHQpLCBGdW4ubm9vcCk7XG4gIHJldHVybiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1hcFRvQXJyYXkgPSA8VCBleHRlbmRzIHt9LCBSPihvYmo6IFQsIGY6IE9iak1vcnBoaXNtPFQsIFI+KTogUltdID0+IHtcbiAgY29uc3QgcjogUltdID0gW107XG4gIGVhY2gob2JqLCAodmFsdWUsIG5hbWUpID0+IHtcbiAgICByLnB1c2goZih2YWx1ZSwgbmFtZSkpO1xuICB9KTtcbiAgcmV0dXJuIHI7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZCA9IDxUIGV4dGVuZHMge30+KG9iajogVCwgcHJlZDogKHZhbHVlOiBUW2tleW9mIFRdLCBrZXk6IE9iaktleXM8VD4sIG9iajogVCkgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFRba2V5b2YgVF0+ID0+IHtcbiAgY29uc3QgcHJvcHMgPSBrZXlzKG9iaikgYXMgQXJyYXk8T2JqS2V5czxUPj47XG4gIGZvciAobGV0IGsgPSAwLCBsZW4gPSBwcm9wcy5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xuICAgIGNvbnN0IGkgPSBwcm9wc1trXTtcbiAgICBjb25zdCB4ID0gb2JqW2ldO1xuICAgIGlmIChwcmVkKHgsIGksIG9iaikpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IHZhbHVlcyA9IDxUIGV4dGVuZHMge30+KG9iajogVCk6IEFycmF5PFRba2V5b2YgVF0+ID0+IHtcbiAgcmV0dXJuIG1hcFRvQXJyYXkob2JqLCBGdW4uaWRlbnRpdHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpemUgPSAob2JqOiB7fSk6IG51bWJlciA9PiB7XG4gIHJldHVybiBrZXlzKG9iaikubGVuZ3RoO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldCA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvYmo6IFQsIGtleTogSyk6IE9wdGlvbmFsPE5vbk51bGxhYmxlPFRbS10+PiA9PiB7XG4gIHJldHVybiBoYXMob2JqLCBrZXkpID8gT3B0aW9uYWwuZnJvbShvYmpba2V5XSBhcyBOb25OdWxsYWJsZTxUW0tdPikgOiBPcHRpb25hbC5ub25lKCk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFzID0gPFQgZXh0ZW5kcyB7fSwgSyBleHRlbmRzIGtleW9mIFQ+KG9iajogVCwga2V5OiBLKTogYm9vbGVhbiA9PlxuICBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblxuZXhwb3J0IGNvbnN0IGhhc05vbk51bGxhYmxlS2V5ID0gPFQgZXh0ZW5kcyB7fSwgSyBleHRlbmRzIGtleW9mIFQ+KG9iajogVCwga2V5OiBLKTogb2JqIGlzIFQgJiBSZWNvcmQ8SywgTm9uTnVsbGFibGU8VFtLXT4+ID0+XG4gIGhhcyhvYmosIGtleSkgJiYgb2JqW2tleV0gIT09IHVuZGVmaW5lZCAmJiBvYmpba2V5XSAhPT0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSAocjogUmVjb3JkPGFueSwgYW55Pik6IHIgaXMge30gPT4ge1xuICBmb3IgKGNvbnN0IHggaW4gcikge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHIsIHgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGVxdWFsID0gPFQ+KGExOiBSZWNvcmQ8c3RyaW5nLCBUPiwgYTI6IFJlY29yZDxzdHJpbmcsIFQ+LCBlcTogRXEuRXE8VD4gPSBFcS5lcUFueSk6IGJvb2xlYW4gPT5cbiAgRXEuZXFSZWNvcmQoZXEpLmVxKGExLCBhMik7XG4iLCJpbXBvcnQgKiBhcyBUeXBlIGZyb20gJy4vVHlwZSc7XG5cbi8qKlxuICogVGhlIGBPcHRpb25hbGAgdHlwZSByZXByZXNlbnRzIGEgdmFsdWUgKG9mIGFueSB0eXBlKSB0aGF0IHBvdGVudGlhbGx5IGRvZXNcbiAqIG5vdCBleGlzdC4gQW55IGBPcHRpb25hbDxUPmAgY2FuIGVpdGhlciBiZSBhIGBTb21lPFQ+YCAoaW4gd2hpY2ggY2FzZSB0aGVcbiAqIHZhbHVlIGRvZXMgZXhpc3QpIG9yIGEgYE5vbmVgIChpbiB3aGljaCBjYXNlIHRoZSB2YWx1ZSBkb2VzIG5vdCBleGlzdCkuIFRoaXNcbiAqIG1vZHVsZSBkZWZpbmVzIGEgd2hvbGUgbG90IG9mIEZQLWluc3BpcmVkIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBkZWFsaW5nIHdpdGhcbiAqIGBPcHRpb25hbGAgb2JqZWN0cy5cbiAqXG4gKiBDb21wYXJpc29uIHdpdGggbnVsbCBvciB1bmRlZmluZWQ6XG4gKiAtIFdlIGRvbid0IGdldCBmYW5jeSBudWxsIGNvYWxlc2Npbmcgb3BlcmF0b3JzIHdpdGggYE9wdGlvbmFsYFxuICogLSBXZSBkbyBnZXQgZmFuY3kgaGVscGVyIGZ1bmN0aW9ucyB3aXRoIGBPcHRpb25hbGBcbiAqIC0gYE9wdGlvbmFsYCBzdXBwb3J0IG5lc3RpbmcsIGFuZCBhbGxvdyBmb3IgdGhlIHR5cGUgdG8gc3RpbGwgYmUgbnVsbGFibGUgKG9yXG4gKiBhbm90aGVyIGBPcHRpb25hbGApXG4gKiAtIFRoZXJlIGlzIG5vIG9wdGlvbiB0byB0dXJuIG9mZiBzdHJpY3Qtb3B0aW9uYWwtY2hlY2tzIGxpa2UgdGhlcmUgaXMgZm9yXG4gKiBzdHJpY3QtbnVsbC1jaGVja3NcbiAqL1xuZXhwb3J0IGNsYXNzIE9wdGlvbmFsPFQ+IHtcbiAgcHJpdmF0ZSByZWFkb25seSB0YWc6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgdmFsdWU/OiBUO1xuXG4gIC8vIFNuZWFreSBvcHRpbWlzYXRpb246IGV2ZXJ5IGluc3RhbmNlIG9mIE9wdGlvbmFsLm5vbmUgaXMgaWRlbnRpY2FsLCBzbyBqdXN0XG4gIC8vIHJldXNlIHRoZSBzYW1lIG9iamVjdFxuICBwcml2YXRlIHN0YXRpYyBzaW5nbGV0b25Ob25lID0gbmV3IE9wdGlvbmFsPGFueT4oZmFsc2UpO1xuXG4gIC8vIFRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBoYXMgYSBgdGFnYCBhbmQgYSBgdmFsdWVgLCBidXQgYm90aCBhcmVcbiAgLy8gcHJpdmF0ZTogYWJsZSB0byBiZSBjb25zb2xlLmxvZ2dlZCwgYnV0IG5vdCBhYmxlIHRvIGJlIGFjY2Vzc2VkIGJ5IGNvZGVcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcih0YWc6IGJvb2xlYW4sIHZhbHVlPzogVCkge1xuICAgIHRoaXMudGFnID0gdGFnO1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIC8vIC0tLSBJZGVudGl0aWVzIC0tLVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBPcHRpb25hbDxUPmAgdGhhdCAqKmRvZXMqKiBjb250YWluIGEgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHNvbWU8VD4odGhpczogdm9pZCwgdmFsdWU6IFQpOiBPcHRpb25hbDxUPiB7XG4gICAgcmV0dXJuIG5ldyBPcHRpb25hbCh0cnVlLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBPcHRpb25hbDxUPmAgdGhhdCAqKmRvZXMgbm90KiogY29udGFpbiBhIHZhbHVlLiBgVGAgY2FuIGJlXG4gICAqIGFueSB0eXBlIGJlY2F1c2Ugd2UgZG9uJ3QgYWN0dWFsbHkgaGF2ZSBhIGBUYC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbm9uZTxUID0gbmV2ZXI+KHRoaXM6IHZvaWQpOiBPcHRpb25hbDxUPiB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNpbmdsZXRvbk5vbmU7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhbiBgT3B0aW9uYWxgIHR5cGUuIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzXG4gICAqIGBPcHRpb25hbGAgY29udGFpbnMgYSB2YWx1ZSBvciBub3QsIGBmb2xkYCB3aWxsIHJldHVybiBhIHZhbHVlIG9mIHR5cGUgYFVgLlxuICAgKiBJZiB0aGlzIGBPcHRpb25hbGAgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLCB0aGUgYFVgIHdpbGwgYmUgY3JlYXRlZCBieVxuICAgKiBjYWxsaW5nIGBvbk5vbmVgLiBJZiB0aGlzIGBPcHRpb25hbGAgZG9lcyBjb250YWluIGEgdmFsdWUsIHRoZSBgVWAgd2lsbCBiZVxuICAgKiBjcmVhdGVkIGJ5IGNhbGxpbmcgYG9uU29tZWAuXG4gICAqXG4gICAqIEZvciB0aGUgRlAgZW50aHVzaWFzdHMgaW4gdGhlIHJvb20sIHRoaXMgZnVuY3Rpb246XG4gICAqIDEuIENvdWxkIGJlIHVzZWQgdG8gaW1wbGVtZW50IGFsbCBvZiB0aGUgZnVuY3Rpb25zIGJlbG93XG4gICAqIDIuIEZvcm1zIGEgY2F0YW1vcnBoaXNtXG4gICAqL1xuICBwdWJsaWMgZm9sZDxVPihvbk5vbmU6ICgpID0+IFUsIG9uU29tZTogKHZhbHVlOiBUKSA9PiBVKTogVSB7XG4gICAgaWYgKHRoaXMudGFnKSB7XG4gICAgICByZXR1cm4gb25Tb21lKHRoaXMudmFsdWUgYXMgVCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvbk5vbmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIHRoaXMgYE9wdGlvbmFsYCBvYmplY3QgY29udGFpbnMgYSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBpc1NvbWUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGFnO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGlzIGBPcHRpb25hbGAgb2JqZWN0ICoqZG9lcyBub3QqKiBjb250YWluIGEgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgaXNOb25lKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy50YWc7XG4gIH1cblxuICAvLyAtLS0gRnVuY3RvciAobmFtZSBzdG9sZW4gZnJvbSBIYXNrZWxsIC8gbWF0aHMpIC0tLVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgdHJhbnNmb3JtIG9uIGFuIGBPcHRpb25hbGAgb2JqZWN0LCAqKmlmKiogdGhlcmUgaXMgYSB2YWx1ZS4gSWZcbiAgICogeW91IHByb3ZpZGUgYSBmdW5jdGlvbiB0byB0dXJuIGEgVCBpbnRvIGEgVSwgdGhpcyBpcyB0aGUgZnVuY3Rpb24geW91IHVzZVxuICAgKiB0byB0dXJuIGFuIGBPcHRpb25hbDxUPmAgaW50byBhbiBgT3B0aW9uYWw8VT5gLiBJZiB0aGlzICoqZG9lcyoqIGNvbnRhaW5cbiAgICogYSB2YWx1ZSB0aGVuIHRoZSBvdXRwdXQgd2lsbCBhbHNvIGNvbnRhaW4gYSB2YWx1ZSAodGhhdCB2YWx1ZSBiZWluZyB0aGVcbiAgICogb3V0cHV0IG9mIGBtYXBwZXIodGhpcy52YWx1ZSlgKSwgYW5kIGlmIHRoaXMgKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZVxuICAgKiB0aGVuIG5laXRoZXIgd2lsbCB0aGUgb3V0cHV0LlxuICAgKi9cbiAgcHVibGljIG1hcDxVPihtYXBwZXI6ICh2YWx1ZTogVCkgPT4gVSk6IE9wdGlvbmFsPFU+IHtcbiAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKG1hcHBlcih0aGlzLnZhbHVlIGFzIFQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gTW9uYWQgKG5hbWUgc3RvbGVuIGZyb20gSGFza2VsbCAvIG1hdGhzKSAtLS1cblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhbiBgT3B0aW9uYWxgIG9iamVjdCwgKippZioqIHRoZXJlIGlzIGEgdmFsdWUuXG4gICAqIFVubGlrZSBgbWFwYCwgaGVyZSB0aGUgdHJhbnNmb3JtIGl0c2VsZiBhbHNvIHJldHVybnMgYW4gYE9wdGlvbmFsYC5cbiAgICovXG4gIHB1YmxpYyBiaW5kPFU+KGJpbmRlcjogKHZhbHVlOiBUKSA9PiBPcHRpb25hbDxVPik6IE9wdGlvbmFsPFU+IHtcbiAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgIHJldHVybiBiaW5kZXIodGhpcy52YWx1ZSBhcyBUKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gVHJhdmVyc2FibGUgKG5hbWUgc3RvbGVuIGZyb20gSGFza2VsbCAvIG1hdGhzKSAtLS1cblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gcHJlZGljYXRlLCB0aGlzIGZ1bmN0aW9uIGZpbmRzIG91dCBpZiB0aGVyZSAqKmV4aXN0cyoqIGEgdmFsdWVcbiAgICogaW5zaWRlIHRoaXMgYE9wdGlvbmFsYCBvYmplY3QgdGhhdCBtZWV0cyB0aGUgcHJlZGljYXRlLiBJbiBwcmFjdGljZSwgdGhpc1xuICAgKiBtZWFucyB0aGF0IGZvciBgT3B0aW9uYWxgcyB0aGF0IGRvIG5vdCBjb250YWluIGEgdmFsdWUgaXQgcmV0dXJucyBmYWxzZSAoYXNcbiAgICogbm8gcHJlZGljYXRlLW1lZXRpbmcgdmFsdWUgZXhpc3RzKS5cbiAgICovXG4gIHB1YmxpYyBleGlzdHMocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50YWcgJiYgcHJlZGljYXRlKHRoaXMudmFsdWUgYXMgVCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gcHJlZGljYXRlLCB0aGlzIGZ1bmN0aW9uIGZpbmRzIG91dCBpZiAqKmFsbCoqIHRoZSB2YWx1ZXMgaW5zaWRlXG4gICAqIHRoaXMgYE9wdGlvbmFsYCBvYmplY3QgbWVldCB0aGUgcHJlZGljYXRlLiBJbiBwcmFjdGljZSwgdGhpcyBtZWFucyB0aGF0XG4gICAqIGZvciBgT3B0aW9uYWxgcyB0aGF0IGRvIG5vdCBjb250YWluIGEgdmFsdWUgaXQgcmV0dXJucyB0cnVlIChhcyBhbGwgMFxuICAgKiBvYmplY3RzIGRvIG1lZXQgdGhlIHByZWRpY2F0ZSkuXG4gICAqL1xuICBwdWJsaWMgZm9yYWxsKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnRhZyB8fCBwcmVkaWNhdGUodGhpcy52YWx1ZSBhcyBUKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYSBnaXZlbiBwcmVkaWNhdGUsIGNyZWF0ZSBhIG5ldyBgT3B0aW9uYWxgIG9iamVjdCB0aGF0IHdpbGwgcmV0YWluXG4gICAqIGFsbCB0aGUgdmFsdWVzIGluc2lkZSB0aGUgb2xkIGBPcHRpb25hbGAgb2JqZWN0IHRoYXQgbWVldCB0aGUgcHJlZGljYXRlLlxuICAgKiBJbiBwcmFjdGljZSwgdGhlIGBPcHRpb25hbGAgb2JqZWN0IGNvbnRhaW5zIGVpdGhlciAwIG9yIDEgb2JqZWN0cywgYW5kXG4gICAqIHRoZSBvdXRwdXQgd2lsbCBrZWVwIHRoZSAoc2luZ2xlKSBpbnB1dCBvYmplY3QgKGlmIGl0IGV4aXN0cykgYXMgbG9uZyBhc1xuICAgKiBpdCBwYXNzZXMgdGhlIHByZWRpY2F0ZS5cbiAgICovXG4gIHB1YmxpYyBmaWx0ZXI8VSBleHRlbmRzIFQ+KHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiB2YWx1ZSBpcyBVKTogT3B0aW9uYWw8VT47XG4gIHB1YmxpYyBmaWx0ZXIocHJlZGljYXRlOiAodmFsdWU6IFQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxUPjtcbiAgcHVibGljIGZpbHRlcihwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFQ+IHtcbiAgICBpZiAoIXRoaXMudGFnIHx8IHByZWRpY2F0ZSh0aGlzLnZhbHVlIGFzIFQpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gR2V0dGVycyAtLS1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvdXQgb2YgdGhlIGluc2lkZSBvZiB0aGUgYE9wdGlvbmFsYCBvYmplY3QsIHVzaW5nIGEgZGVmYXVsdFxuICAgKiBgcmVwbGFjZW1lbnRgIHZhbHVlIGlmIHRoZSBwcm92aWRlZCBgT3B0aW9uYWxgIG9iamVjdCBkb2VzIG5vdCBjb250YWluIGFcbiAgICogdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3I8VSA9IFQ+KHJlcGxhY2VtZW50OiBVKTogVCB8IFUge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMudmFsdWUgYXMgVCA6IHJlcGxhY2VtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb3V0IG9mIHRoZSBpbnNpZGUgb2YgdGhlIGBPcHRpb25hbGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLiAgVW5saWtlIGBnZXRPcmAsIGluIHRoaXMgbWV0aG9kIHRoZSBgcmVwbGFjZW1lbnRgIG9iamVjdCBpcyBhbHNvXG4gICAqIGBPcHRpb25hbGAgLSBtZWFuaW5nIHRoYXQgdGhpcyBtZXRob2Qgd2lsbCBhbHdheXMgcmV0dXJuIGFuIGBPcHRpb25hbGAuXG4gICAqL1xuICBwdWJsaWMgb3I8VSA9IFQ+KHJlcGxhY2VtZW50OiBPcHRpb25hbDxVPik6IE9wdGlvbmFsPFQgfCBVPiB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gdGhpcyA6IHJlcGxhY2VtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb3V0IG9mIHRoZSBpbnNpZGUgb2YgdGhlIGBPcHRpb25hbGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYE9wdGlvbmFsYCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLiBVbmxpa2UgYGdldE9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIGByZXBsYWNlbWVudGAgdmFsdWUgaXNcbiAgICogXCJ0aHVua2VkXCIgLSB0aGF0IGlzIHRvIHNheSB0aGF0IHlvdSBkb24ndCBwYXNzIGEgdmFsdWUgdG8gYGdldE9yVGh1bmtgLCB5b3VcbiAgICogcGFzcyBhIGZ1bmN0aW9uIHdoaWNoIChpZiBjYWxsZWQpIHdpbGwgKipyZXR1cm4qKiB0aGUgYHZhbHVlYCB5b3Ugd2FudCB0b1xuICAgKiB1c2UuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JUaHVuazxVID0gVD4odGh1bms6ICgpID0+IFUpOiBUIHwgVSB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gdGhpcy52YWx1ZSBhcyBUIDogdGh1bmsoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdXNpbmcgYSBkZWZhdWx0XG4gICAqIGByZXBsYWNlbWVudGAgdmFsdWUgaWYgdGhlIHByb3ZpZGVkIE9wdGlvbmFsIG9iamVjdCBkb2VzIG5vdCBjb250YWluIGFcbiAgICogdmFsdWUuXG4gICAqXG4gICAqIFVubGlrZSBgb3JgLCBpbiB0aGlzIG1ldGhvZCB0aGUgYHJlcGxhY2VtZW50YCB2YWx1ZSBpcyBcInRodW5rZWRcIiAtIHRoYXQgaXNcbiAgICogdG8gc2F5IHRoYXQgeW91IGRvbid0IHBhc3MgYSB2YWx1ZSB0byBgb3JUaHVua2AsIHlvdSBwYXNzIGEgZnVuY3Rpb24gd2hpY2hcbiAgICogKGlmIGNhbGxlZCkgd2lsbCAqKnJldHVybioqIHRoZSBgdmFsdWVgIHlvdSB3YW50IHRvIHVzZS5cbiAgICpcbiAgICogVW5saWtlIGBnZXRPclRodW5rYCwgaW4gdGhpcyBtZXRob2QgdGhlIGByZXBsYWNlbWVudGAgdmFsdWUgaXMgYWxzb1xuICAgKiBgT3B0aW9uYWxgLCBtZWFuaW5nIHRoYXQgdGhpcyBtZXRob2Qgd2lsbCBhbHdheXMgcmV0dXJuIGFuIGBPcHRpb25hbGAuXG4gICAqL1xuICBwdWJsaWMgb3JUaHVuazxVID0gVD4odGh1bms6ICgpID0+IE9wdGlvbmFsPFU+KTogT3B0aW9uYWw8VCB8IFU+IHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyB0aGlzIDogdGh1bmsoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgT3B0aW9uYWxgIG9iamVjdCwgdGhyb3dpbmcgYW5cbiAgICogZXhjZXB0aW9uIGlmIHRoZSBwcm92aWRlZCBgT3B0aW9uYWxgIG9iamVjdCBkb2VzIG5vdCBjb250YWluIGEgdmFsdWUuXG4gICAqXG4gICAqIFdBUk5JTkc6XG4gICAqIFlvdSBzaG91bGQgb25seSBiZSB1c2luZyB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBrbm93IHRoYXQgdGhlIGBPcHRpb25hbGBcbiAgICogb2JqZWN0ICoqaXMgbm90KiogZW1wdHkgKG90aGVyd2lzZSB5b3UncmUgdGhyb3dpbmcgZXhjZXB0aW9ucyBpbiBwcm9kdWN0aW9uXG4gICAqIGNvZGUsIHdoaWNoIGlzIGJhZCkuXG4gICAqXG4gICAqIEluIHRlc3RzIHRoaXMgaXMgbW9yZSBhY2NlcHRhYmxlLlxuICAgKlxuICAgKiBQcmVmZXIgb3RoZXIgbWV0aG9kcyB0byB0aGlzLCBzdWNoIGFzIGAuZWFjaGAuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3JEaWUobWVzc2FnZT86IHN0cmluZyk6IFQge1xuICAgIGlmICghdGhpcy50YWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlID8/ICdDYWxsZWQgZ2V0T3JEaWUgb24gTm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZSBhcyBUO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLSBJbnRlcm9wIHdpdGggbnVsbCBhbmQgdW5kZWZpbmVkIC0tLVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGBPcHRpb25hbGAgdmFsdWUgZnJvbSBhIG51bGxhYmxlIChvciB1bmRlZmluZWQtYWJsZSkgaW5wdXQuXG4gICAqIE51bGwsIG9yIHVuZGVmaW5lZCwgaXMgY29udmVydGVkIHRvIGBOb25lYCwgYW5kIGFueXRoaW5nIGVsc2UgaXMgY29udmVydGVkXG4gICAqIHRvIGBTb21lYC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbTxUPih0aGlzOiB2b2lkLCB2YWx1ZTogVCB8IG51bGwgfCB1bmRlZmluZWQpOiBPcHRpb25hbDxOb25OdWxsYWJsZTxUPj4ge1xuICAgIHJldHVybiBUeXBlLmlzTm9uTnVsbGFibGUodmFsdWUpID8gT3B0aW9uYWwuc29tZSh2YWx1ZSkgOiBPcHRpb25hbC5ub25lKCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYW4gYE9wdGlvbmFsYCB0byBhIG51bGxhYmxlIHR5cGUsIGJ5IGdldHRpbmcgdGhlIHZhbHVlIGlmIGl0XG4gICAqIGV4aXN0cywgb3IgcmV0dXJuaW5nIGBudWxsYCBpZiBpdCBkb2VzIG5vdC5cbiAgICovXG4gIHB1YmxpYyBnZXRPck51bGwoKTogVCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnRhZyA/IHRoaXMudmFsdWUgYXMgVCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYW4gYE9wdGlvbmFsYCB0byBhbiB1bmRlZmluZWQtYWJsZSB0eXBlLCBieSBnZXR0aW5nIHRoZSB2YWx1ZSBpZlxuICAgKiBpdCBleGlzdHMsIG9yIHJldHVybmluZyBgdW5kZWZpbmVkYCBpZiBpdCBkb2VzIG5vdC5cbiAgICovXG4gIHB1YmxpYyBnZXRPclVuZGVmaW5lZCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIC8vIC0tLSBVdGlsaXRpZXMgLS0tXG5cbiAgLyoqXG4gICAqIElmIHRoZSBgT3B0aW9uYWxgIGNvbnRhaW5zIGEgdmFsdWUsIHBlcmZvcm0gYW4gYWN0aW9uIG9uIHRoYXQgdmFsdWUuXG4gICAqIFVubGlrZSB0aGUgcmVzdCBvZiB0aGUgbWV0aG9kcyBvbiB0aGlzIHR5cGUsIGAuZWFjaGAgaGFzIHNpZGUtZWZmZWN0cy4gSWZcbiAgICogeW91IHdhbnQgdG8gdHJhbnNmb3JtIGFuIGBPcHRpb25hbDxUPmAgKippbnRvKiogc29tZXRoaW5nLCB0aGVuIHRoaXMgaXMgbm90XG4gICAqIHRoZSBtZXRob2QgZm9yIHlvdS4gSWYgeW91IHdhbnQgdG8gdXNlIGFuIGBPcHRpb25hbDxUPmAgdG8gKipkbyoqXG4gICAqIHNvbWV0aGluZywgdGhlbiB0aGlzIGlzIHRoZSBtZXRob2QgZm9yIHlvdSAtIHByb3ZpZGVkIHlvdSdyZSBva2F5IHdpdGggbm90XG4gICAqIGRvaW5nIGFueXRoaW5nIGluIHRoZSBjYXNlIHdoZXJlIHRoZSBgT3B0aW9uYWxgIGRvZXNuJ3QgaGF2ZSBhIHZhbHVlIGluc2lkZVxuICAgKiBpdC4gSWYgeW91J3JlIG5vdCBzdXJlIHdoZXRoZXIgeW91ciB1c2UtY2FzZSBmaXRzIGludG8gdHJhbnNmb3JtaW5nXG4gICAqICoqaW50byoqIHNvbWV0aGluZyBvciAqKmRvaW5nKiogc29tZXRoaW5nLCBjaGVjayB3aGV0aGVyIGl0IGhhcyBhIHJldHVyblxuICAgKiB2YWx1ZS4gSWYgaXQgZG9lcywgeW91IHNob3VsZCBiZSBwZXJmb3JtaW5nIGEgdHJhbnNmb3JtLlxuICAgKi9cbiAgcHVibGljIGVhY2god29ya2VyOiAodmFsdWU6IFQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgIHdvcmtlcih0aGlzLnZhbHVlIGFzIFQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUdXJuIHRoZSBgT3B0aW9uYWxgIG9iamVjdCBpbnRvIGFuIGFycmF5IHRoYXQgY29udGFpbnMgYWxsIG9mIHRoZSB2YWx1ZXNcbiAgICogc3RvcmVkIGluc2lkZSB0aGUgYE9wdGlvbmFsYC4gSW4gcHJhY3RpY2UsIHRoaXMgbWVhbnMgdGhlIG91dHB1dCB3aWxsIGhhdmVcbiAgICogZWl0aGVyIDAgb3IgMSBlbGVtZW50cy5cbiAgICovXG4gIHB1YmxpYyB0b0FycmF5KCk6IFRbXSB7XG4gICAgcmV0dXJuIHRoaXMudGFnID8gWyB0aGlzLnZhbHVlIGFzIFQgXSA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFR1cm4gdGhlIGBPcHRpb25hbGAgb2JqZWN0IGludG8gYSBzdHJpbmcgZm9yIGRlYnVnZ2luZyBvciBwcmludGluZy4gTm90XG4gICAqIHJlY29tbWVuZGVkIGZvciBwcm9kdWN0aW9uIGNvZGUsIGJ1dCBnb29kIGZvciBkZWJ1Z2dpbmcuIEFsc28gbm90ZSB0aGF0XG4gICAqIHRoZXNlIGRheXMgYW4gYE9wdGlvbmFsYCBvYmplY3QgY2FuIGJlIGxvZ2dlZCB0byB0aGUgY29uc29sZSBkaXJlY3RseSwgYW5kXG4gICAqIGl0cyBpbm5lciB2YWx1ZSAoaWYgaXQgZXhpc3RzKSB3aWxsIGJlIHZpc2libGUuXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50YWcgPyBgc29tZSgke3RoaXMudmFsdWV9KWAgOiAnbm9uZSgpJztcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgQXJyIGZyb20gJy4vQXJyJztcbmltcG9ydCAqIGFzIEZ1biBmcm9tICcuL0Z1bic7XG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJy4vT3B0aW9uYWwnO1xuXG4vKipcbiAqICoqSXMqKiB0aGUgdmFsdWUgc3RvcmVkIGluc2lkZSB0aGlzIE9wdGlvbmFsIG9iamVjdCBlcXVhbCB0byBgcmhzYD9cbiAqL1xuZXhwb3J0IGNvbnN0IGlzID0gPFQ+KGxoczogT3B0aW9uYWw8VD4sIHJoczogVCwgY29tcGFyYXRvcjogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4gPSBGdW4udHJpcGxlRXF1YWxzKTogYm9vbGVhbiA9PlxuICBsaHMuZXhpc3RzKChsZWZ0KSA9PiBjb21wYXJhdG9yKGxlZnQsIHJocykpO1xuXG4vKipcbiAqIEFyZSB0aGVzZSB0d28gT3B0aW9uYWwgb2JqZWN0cyBlcXVhbD8gRXF1YWxpdHkgaGVyZSBtZWFucyBlaXRoZXIgdGhleSdyZSBib3RoXG4gKiBgU29tZWAgKGFuZCB0aGUgdmFsdWVzIGFyZSBlcXVhbCB1bmRlciB0aGUgY29tcGFyYXRvcikgb3IgdGhleSdyZSBib3RoIGBOb25lYC5cbiAqL1xuZXhwb3J0IGNvbnN0IGVxdWFsczoge1xuICA8QSwgQj4obGhzOiBPcHRpb25hbDxBPiwgcmhzOiBPcHRpb25hbDxCPiwgY29tcGFyYXRvcjogKGE6IEEsIGI6IEIpID0+IGJvb2xlYW4pOiBib29sZWFuO1xuICA8VD4obGhzOiBPcHRpb25hbDxUPiwgcmhzOiBPcHRpb25hbDxUPik6IGJvb2xlYW47XG59ID0gPEEsIEI+KGxoczogT3B0aW9uYWw8QT4sIHJoczogT3B0aW9uYWw8Qj4sIGNvbXBhcmF0b3I6IChhOiBBLCBiOiBCKSA9PiBib29sZWFuID0gRnVuLnRyaXBsZUVxdWFscyBhcyBhbnkpOiBib29sZWFuID0+XG4gIGxpZnQyKGxocywgcmhzLCBjb21wYXJhdG9yKS5nZXRPcihsaHMuaXNOb25lKCkgJiYgcmhzLmlzTm9uZSgpKTtcblxuZXhwb3J0IGNvbnN0IGNhdCA9IDxBPihhcnI6IE9wdGlvbmFsPEE+W10pOiBBW10gPT4ge1xuICBjb25zdCByOiBBW10gPSBbXTtcbiAgY29uc3QgcHVzaCA9ICh4OiBBKSA9PiB7XG4gICAgci5wdXNoKHgpO1xuICB9O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGFycltpXS5lYWNoKHB1c2gpO1xuICB9XG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlcXVlbmNlID0gPEE+IChhcnI6IEFycmF5TGlrZTxPcHRpb25hbDxBPj4pOiBPcHRpb25hbDxBcnJheTxBPj4gPT4ge1xuICBjb25zdCByOiBBW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB4ID0gYXJyW2ldO1xuICAgIGlmICh4LmlzU29tZSgpKSB7XG4gICAgICByLnB1c2goeC5nZXRPckRpZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8QXJyYXk8QT4+KCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5zb21lKHIpO1xufTtcblxuLyoqIEBkZXByZWNhdGVkIFVzZSBBcnIuZmluZE1hcCBpbnN0ZWFkLiAqL1xuZXhwb3J0IGNvbnN0IGZpbmRNYXAgPSBBcnIuZmluZE1hcDtcblxuLyoqIE1hcCBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXkgdG8gYW4gT3B0aW9uYWwgYW5kIGNvbGxlY3QgdGhlIHJlc3VsdHMuXG4gKiAgSWYgYWxsIHJlc3VsdHMgYXJlIFwic29tZVwiLCByZXR1cm4gT3B0aW9uYWwuc29tZSBvZiB0aGUgcmVzdWx0cy5cbiAqICBJZiBhbnkgcmVzdWx0IGlzIFwibm9uZVwiLCByZXR1cm4gT3B0aW9uYWwubm9uZVxuICovXG5leHBvcnQgY29uc3QgdHJhdmVyc2UgPSA8QSwgQj4gKGFycjogQXJyYXlMaWtlPEE+LCBmOiAoYTogQSkgPT4gT3B0aW9uYWw8Qj4pOiBPcHRpb25hbDxBcnJheTxCPj4gPT5cbiAgc2VxdWVuY2UoQXJyLm1hcChhcnIsIGYpKTtcblxuLypcbk5vdGVzIG9uIHRoZSBsaWZ0IGZ1bmN0aW9uczpcbi0gV2UgdXNlZCB0byBoYXZlIGEgZ2VuZXJpYyBsaWZ0TiwgYnV0IHdlIHdlcmUgY29uY2VybmVkIGFib3V0IGl0cyB0eXBlLXNhZmV0eSwgYW5kIHRoZSBiZWxvdyB2YXJpYW50cyB3ZXJlIGZhc3RlciBpbiBtaWNyb2JlbmNobWFya3MuXG4tIFRoZSBnZXRPckRpZSBjYWxscyBhcmUgcGFydGlhbCBmdW5jdGlvbnMsIGJ1dCBhcmUgY2hlY2tlZCBiZWZvcmVoYW5kLiBUaGlzIGlzIGZhc3RlciBhbmQgbW9yZSBjb252ZW5pZW50IChidXQgbGVzcyBzYWZlKSB0aGFuIGZvbGRzLlxuLSAmJiBpcyB1c2VkIGluc3RlYWQgb2YgYSBsb29wIGZvciBzaW1wbGljaXR5IGFuZCBwZXJmb3JtYW5jZS5cbiovXG5cbmV4cG9ydCBjb25zdCBsaWZ0MiA9IDxBLCBCLCBDPiAob2E6IE9wdGlvbmFsPEE+LCBvYjogT3B0aW9uYWw8Qj4sIGY6IChhOiBBLCBiOiBCKSA9PiBDKTogT3B0aW9uYWw8Qz4gPT5cbiAgb2EuaXNTb21lKCkgJiYgb2IuaXNTb21lKCkgPyBPcHRpb25hbC5zb21lKGYob2EuZ2V0T3JEaWUoKSwgb2IuZ2V0T3JEaWUoKSkpIDogT3B0aW9uYWwubm9uZTxDPigpO1xuXG5leHBvcnQgY29uc3QgbGlmdDMgPSA8QSwgQiwgQywgRD4gKG9hOiBPcHRpb25hbDxBPiwgb2I6IE9wdGlvbmFsPEI+LCBvYzogT3B0aW9uYWw8Qz4sIGY6IChhOiBBLCBiOiBCLCBjOiBDKSA9PiBEKTogT3B0aW9uYWw8RD4gPT5cbiAgb2EuaXNTb21lKCkgJiYgb2IuaXNTb21lKCkgJiYgb2MuaXNTb21lKCkgPyBPcHRpb25hbC5zb21lKGYob2EuZ2V0T3JEaWUoKSwgb2IuZ2V0T3JEaWUoKSwgb2MuZ2V0T3JEaWUoKSkpIDogT3B0aW9uYWwubm9uZTxEPigpO1xuXG5leHBvcnQgY29uc3QgbGlmdDQgPSA8QSwgQiwgQywgRCwgRT4gKG9hOiBPcHRpb25hbDxBPiwgb2I6IE9wdGlvbmFsPEI+LCBvYzogT3B0aW9uYWw8Qz4sIG9kOiBPcHRpb25hbDxEPiwgZjogKGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQpID0+IEUpOiBPcHRpb25hbDxFPiA9PlxuICBvYS5pc1NvbWUoKSAmJiBvYi5pc1NvbWUoKSAmJiBvYy5pc1NvbWUoKSAmJiBvZC5pc1NvbWUoKSA/IE9wdGlvbmFsLnNvbWUoZihvYS5nZXRPckRpZSgpLCBvYi5nZXRPckRpZSgpLCBvYy5nZXRPckRpZSgpLCBvZC5nZXRPckRpZSgpKSkgOiBPcHRpb25hbC5ub25lPEU+KCk7XG5cbmV4cG9ydCBjb25zdCBsaWZ0NSA9IDxBLCBCLCBDLCBELCBFLCBGPiAob2E6IE9wdGlvbmFsPEE+LCBvYjogT3B0aW9uYWw8Qj4sIG9jOiBPcHRpb25hbDxDPiwgb2Q6IE9wdGlvbmFsPEQ+LCBvZTogT3B0aW9uYWw8RT4sIGY6IChhOiBBLCBiOiBCLCBjOiBDLCBkOiBELCBlOiBFKSA9PiBGKTogT3B0aW9uYWw8Rj4gPT5cbiAgb2EuaXNTb21lKCkgJiYgb2IuaXNTb21lKCkgJiYgb2MuaXNTb21lKCkgJiYgb2QuaXNTb21lKCkgJiYgb2UuaXNTb21lKCkgPyBPcHRpb25hbC5zb21lKGYob2EuZ2V0T3JEaWUoKSwgb2IuZ2V0T3JEaWUoKSwgb2MuZ2V0T3JEaWUoKSwgb2QuZ2V0T3JEaWUoKSwgb2UuZ2V0T3JEaWUoKSkpIDogT3B0aW9uYWwubm9uZTxGPigpO1xuXG5leHBvcnQgY29uc3QgbWFwRnJvbSA9IDxBLCBCPiAoYTogQSB8IG51bGwgfCB1bmRlZmluZWQsIGY6IChhOiBBKSA9PiBCKTogT3B0aW9uYWw8Qj4gPT5cbiAgKGEgIT09IHVuZGVmaW5lZCAmJiBhICE9PSBudWxsKSA/IE9wdGlvbmFsLnNvbWUoZihhKSkgOiBPcHRpb25hbC5ub25lPEI+KCk7XG5cbmV4cG9ydCBjb25zdCBiaW5kRnJvbSA9IDxBLCBCPiAoYTogQSB8IG51bGwgfCB1bmRlZmluZWQsIGY6IChhOiBBKSA9PiBPcHRpb25hbDxCPik6IE9wdGlvbmFsPEI+ID0+XG4gIChhICE9PSB1bmRlZmluZWQgJiYgYSAhPT0gbnVsbCkgPyBmKGEpIDogT3B0aW9uYWwubm9uZTxCPigpO1xuXG5leHBvcnQgY29uc3QgZmxhdHRlbiA9IDxUPiAob290OiBPcHRpb25hbDxPcHRpb25hbDxUPj4pOiBPcHRpb25hbDxUPiA9PiBvb3QuYmluZChGdW4uaWRlbnRpdHkpO1xuXG4vLyBUaGlzIGNhbiBoZWxwIHdpdGggdHlwZSBpbmZlcmVuY2UsIGJ5IHNwZWNpZnlpbmcgdGhlIHR5cGUgcGFyYW0gb24gdGhlIG5vbmUgY2FzZSwgc28gdGhlIGNhbGxlciBkb2Vzbid0IGhhdmUgdG8uXG5leHBvcnQgY29uc3Qgc29tZUlmID0gPEE+IChiOiBib29sZWFuLCBhOiBBKTogT3B0aW9uYWw8QT4gPT5cbiAgYiA/IE9wdGlvbmFsLnNvbWUoYSkgOiBPcHRpb25hbC5ub25lPEE+KCk7XG4iLCJpbXBvcnQgeyBHbG9iYWwgfSBmcm9tICcuL0dsb2JhbCc7XG5cbi8qKiBwYXRoIDo6IChbU3RyaW5nXSwgSnNPYmo/KSAtPiBKc09iaiAqL1xuZXhwb3J0IGNvbnN0IHBhdGggPSA8VD4ocGFydHM6IHN0cmluZ1tdLCBzY29wZT86IHt9KTogVCB8IHVuZGVmaW5lZCA9PiB7XG4gIGxldCBvID0gc2NvcGUgIT09IHVuZGVmaW5lZCAmJiBzY29wZSAhPT0gbnVsbCA/IHNjb3BlIDogR2xvYmFsO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAmJiBvICE9PSB1bmRlZmluZWQgJiYgbyAhPT0gbnVsbDsgKytpKSB7XG4gICAgbyA9IG9bcGFydHNbaV1dO1xuICB9XG4gIHJldHVybiBvO1xufTtcblxuLyoqIHJlc29sdmUgOjogKFN0cmluZywgSnNPYmo/KSAtPiBKc09iaiAqL1xuZXhwb3J0IGNvbnN0IHJlc29sdmUgPSA8VD4ocDogc3RyaW5nLCBzY29wZT86IHt9KTogVCB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHBhcnRzID0gcC5zcGxpdCgnLicpO1xuICByZXR1cm4gcGF0aChwYXJ0cywgc2NvcGUpO1xufTtcblxuLyoqIHN0ZXAgOjogKEpzT2JqLCBTdHJpbmcpIC0+IEpzT2JqICovXG5leHBvcnQgY29uc3Qgc3RlcCA9IDxUIGV4dGVuZHMge30sIEsgZXh0ZW5kcyBrZXlvZiBUPihvOiBULCBwYXJ0OiBLKTogVFtLXSA9PiB7XG4gIGlmIChvW3BhcnRdID09PSB1bmRlZmluZWQgfHwgb1twYXJ0XSA9PT0gbnVsbCkge1xuICAgIG9bcGFydF0gPSB7fSBhcyBUW0tdO1xuICB9XG4gIHJldHVybiBvW3BhcnRdO1xufTtcblxuLyoqIGZvcmdlIDo6IChbU3RyaW5nXSwgSnNPYmo/KSAtPiBKc09iaiAqL1xuZXhwb3J0IGNvbnN0IGZvcmdlID0gPFQgZXh0ZW5kcyBzdHJpbmdbXT4ocGFydHM6IFQsIHRhcmdldD86IHt9KTogeyBbIEsgaW4gVFtudW1iZXJdXToge319ID0+IHtcbiAgbGV0IG8gPSB0YXJnZXQgIT09IHVuZGVmaW5lZCA/IHRhcmdldCA6IEdsb2JhbDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7ICsraSkge1xuICAgIG8gPSBzdGVwKG8sIHBhcnRzW2ldKTtcbiAgfVxuICByZXR1cm4gbztcbn07XG5cbi8qKiBuYW1lc3BhY2UgOjogKFN0cmluZywgSnNPYmo/KSAtPiBKc09iaiAqL1xuZXhwb3J0IGNvbnN0IG5hbWVzcGFjZSA9IChuYW1lOiBzdHJpbmcsIHRhcmdldD86IHt9KTogeyBba2V5OiBzdHJpbmddOiB7fX0gPT4ge1xuICBjb25zdCBwYXJ0cyA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgcmV0dXJuIGZvcmdlKHBhcnRzLCB0YXJnZXQpO1xufTtcbiIsImltcG9ydCAqIGFzIEZ1biBmcm9tICcuL0Z1bic7XG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJy4vT3B0aW9uYWwnO1xuXG4vKipcbiAqIFRoZSBgUmVzdWx0YCB0eXBlIHJlcHJlc2VudHMgYSB2YWx1ZSAob2YgYW55IHR5cGUpIHRoYXQgbWF5IGluc3RlYWQgYmUgYW5cbiAqIGVycm9yIChvZiBhbnkgdHlwZSkuIEFueSBgUmVzdWx0PFQsIEU+YCBjYW4gZWl0aGVyIGJlIGEgYFZhbHVlPFQ+YCAod2hpY2hcbiAqIGNvbnRhaW5zIGEgdmFsdWUgb2YgdHlwZSBgVGApIG9yIGFuIGBFcnJvcjxFPmAgKHdoaWNoIGNvbnRhaW5zIGFuIGVycm9yIG9mXG4gKiB0eXBlIGBFYCkuIFRoaXMgbW9kdWxlIGRlZmluZXMgYSB3aG9sZSBsb3Qgb2YgRlAtaW5zcGlyZWQgdXRpbGl0eSBmdW5jdGlvbnNcbiAqIGZvciBkZWFsaW5nIHdpdGggYFJlc3VsdGAgb2JqZWN0cy5cbiAqXG4gKiBDb21wYXJpc29uIHdpdGggZXhjZXB0aW9uczpcbiAqIC0gRWFjaCBmdW5jdGlvbidzIHR5cGUgc2lnbmF0dXJlIHNheXMgd2hldGhlciBpdCByZXR1cm5zIGEgYFJlc3VsdGAgb3Igbm90XG4gKiAodGhleSdyZSBsaWtlIGNoZWNrZWQgZXhjZXB0aW9ucykuXG4gKiAtIFRoZSB0eXBlIG9mIHRoZSBlcnJvciBpbiBhIHJlc3VsdCBjYW4gYmUgY2hlY2tlZCBieSBUeXBlU2NyaXB0LlxuICogLSBZb3UgY2FuJ3QgZm9yZ2V0IHRvIGNhdGNoIGVycm9ycyBmcm9tIGluc2lkZSBhIGBSZXN1bHRgLCB5b3UgbmVlZCB0byBoYW5kbGVcbiAqIHRoZW0gdG8gYWNjZXNzIHRoZSB2YWx1ZS5cbiAqXG4gKiBDb21wYXJpc29uIHdpdGggb3B0aW9uYWxzOlxuICogLSBCb3RoIGBPcHRpb25hbGAgYW5kIGBSZXN1bHRgIGFyZSBhIHR5cGVzYWZlIHdheSB0byBzdG9yZSBkYXRhIHRoYXQgbWlnaHRcbiAqIG5vdCBleGlzdC5cbiAqIC0gU2ltaWxhciBmdW5jdGlvbnMgYXJlIGRlZmluZWQgb24gYm90aCBgT3B0aW9uYWxgIGFuZCBgUmVzdWx0YCB0byBvcGVyYXRlIG9uXG4gKiB0aGUgZGF0YSBpbnNpZGUuXG4gKiAtIFRoZSBkaWZmZXJlbmNlIGlzIGluIHdoYXQgaGFwcGVucyB3aGVuIHRoZSBkYXRhICoqZG9lcyBub3QqKiBleGlzdDpcbiAqICAgLSBgT3B0aW9uYWxgIHN0b3JlcyBub3RoaW5nIGlmIHRoZSBkYXRhIGlzIG5vdCB0aGVyZS5cbiAqICAgLSBgUmVzdWx0YCBzdG9yZXMgYW4gZXJyb3IgaWYgdGhlIGRhdGEgaXMgbm90IHRoZXJlLlxuICogLSBEZWNpZGUgd2hldGhlciB0byB1c2UgYE9wdGlvbmFsYCBvciBgUmVzdWx0YCBiYXNlZCBvbiB3aGF0IG5vIGRhdGEgbWVhbnNcbiAqIGZvciB5b3VyIHVzZS1jYXNlOlxuICogICAtIFVzZSBgT3B0aW9uYWxgIGlmIG5vIGRhdGEganVzdCBtZWFucyB0aGVyZSBpc24ndCBhbnkgZGF0YSwgYW5kIGlzbid0IGFuXG4gKiAgIGlzc3VlLlxuICogICAtIFVzZSBgUmVzdWx0YCBpZiBubyBkYXRhIG1lYW5zIGFuIGVycm9yIG9jY3VycmVkLCBhbmQgeW91IG1pZ2h0IG5lZWQgdG9cbiAqICAgb3BlcmF0ZSBvbiB0aGUgZXJyb3IgbGF0ZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVzdWx0PFQsIEU+IHtcbiAgLy8gLS0tIElkZW50aXRpZXMgLS0tXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYSBgUmVzdWx0YCB0eXBlLiBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBgUmVzdWx0YFxuICAgKiBjb250YWlucyBhbiBlcnJvciBvciBhIHZhbHVlLCBgZm9sZGAgd2lsbCByZXR1cm4gYSB2YWx1ZSBvZiB0eXBlIGBVYC4gSWZcbiAgICogdGhpcyBgUmVzdWx0YCBjb250YWlucyBhbiBlcnJvciwgdGhlIGBVYCB3aWxsIGJlIGNyZWF0ZWQgYnkgY2FsbGluZ1xuICAgKiBgb25FcnJvcmAuIElmIHRoaXMgYFJlc3VsdGAgY29udGFpbnMgYSB2YWx1ZSwgdGhlIGBVYCB3aWxsIGJlIGNyZWF0ZWQgYnlcbiAgICogY2FsbGluZyBgb25WYWx1ZWAuXG4gICAqXG4gICAqIEZvciB0aGUgRlAgZW50aHVzaWFzdHMgaW4gdGhlIHJvb20sIHRoaXMgZnVuY3Rpb246XG4gICAqIDEuIENvdWxkIGJlIHVzZWQgdG8gaW1wbGVtZW50IGFsbCBvZiB0aGUgZnVuY3Rpb25zIGJlbG93XG4gICAqIDIuIEZvcm1zIGEgY2F0YW1vcnBoaXNtXG4gICAqL1xuICByZWFkb25seSBmb2xkOiA8VT4ob25FcnJvcjogKGVycm9yOiBFKSA9PiBVLCBvblZhbHVlOiAodmFsdWU6IFQpID0+IFUpID0+IFU7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhpcyBgUmVzdWx0YCBvYmplY3QgY29udGFpbnMgYSB2YWx1ZS5cbiAgICovXG4gIHJlYWRvbmx5IGlzVmFsdWU6ICgpID0+IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhpcyBgUmVzdWx0YCBvYmplY3QgKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZSAoYW5kXG4gICAqIHRoZXJlZm9yZSBjb250YWlucyBhbiBlcnJvciBpbnN0ZWFkKS5cbiAgICovXG4gIHJlYWRvbmx5IGlzRXJyb3I6ICgpID0+IGJvb2xlYW47XG5cbiAgLy8gLS0tIEZ1bmN0b3IgKG5hbWUgc3RvbGVuIGZyb20gSGFza2VsbCAvIG1hdGhzKSAtLS1cblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhIGBSZXN1bHRgIG9iamVjdCwgKippZioqIHRoZXJlIGlzIGEgdmFsdWUuIElmIHlvdVxuICAgKiBwcm92aWRlIGEgZnVuY3Rpb24gdG8gdHVybiBhIGBUYCBpbnRvIGEgYFVgLCB0aGlzIGlzIHRoZSBmdW5jdGlvbiB5b3UgdXNlXG4gICAqIHRvIHR1cm4gYSBgUmVzdWx0PFQsIEU+YCBpbnRvIGEgYFJlc3VsdDxVLCBFPmAuIElmIHRoaXMgYFJlc3VsdGAgKipkb2VzKipcbiAgICogY29udGFpbiBhIHZhbHVlIHRoZW4gdGhlIG91dHB1dCB3aWxsIGFsc28gY29udGFpbiBhIHZhbHVlICh0aGF0IHZhbHVlIGJlaW5nXG4gICAqIHRoZSBvdXRwdXQgb2YgYG1hcHBlcih0aGlzLnZhbHVlKWApLCBhbmQgaWYgdGhpcyAqKmRvZXMgbm90KiogY29udGFpbiBhXG4gICAqIHZhbHVlIHRoZW4gbmVpdGhlciB3aWxsIHRoZSBvdXRwdXQgKGFuZCB0aGUgZXJyb3Igd2lsbCByZW1haW4gdGhlIHNhbWUpLlxuICAgKi9cbiAgcmVhZG9ubHkgbWFwOiA8VT4obWFwcGVyOiAodmFsdWU6IFQpID0+IFUpID0+IFJlc3VsdDxVLCBFPjtcblxuICAvKipcbiAgICogUGVyZm9ybSBhIHRyYW5zZm9ybSBvbiBhIGBSZXN1bHRgIG9iamVjdCwgaWYgdGhlcmUgKippcyBub3QqKiBhIHZhbHVlLiBJZlxuICAgKiB5b3UgcHJvdmlkZSBhIGZ1bmN0aW9uIHRvIHR1cm4gYW4gYEVgIGludG8gYW4gYEZgLCB0aGlzIGlzIHRoZSBmdW5jdGlvbiB5b3VcbiAgICogdXNlIHRvIHR1cm4gYSBgUmVzdWx0PFQsIEU+YCBpbnRvIGEgYFJlc3VsdDxULCBGPmAuIElmIHRoaXMgYFJlc3VsdGAgKipkb2VzXG4gICAqIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZSwgYW5kIHRoZXJlZm9yZSBjb250YWlucyBhbiBlcnJvciwgdGhlbiB0aGUgb3V0cHV0XG4gICAqIHdpbGwgbm90IGNvbnRhaW4gYSB2YWx1ZSBlaXRoZXIgKGFuZCB0aGUgZXJyb3Igd2lsbCBiZSB0aGUgb3V0cHV0IG9mXG4gICAqIGBtYXBwZXIodGhpcy5lcnJvcilgKS4gSWYgdGhpcyAqKmRvZXMqKiBjb250YWluIGEgdmFsdWUgdGhlbiBzbyB3aWxsIHRoZVxuICAgKiBvdXRwdXQgKGFuZCB0aGUgdmFsdWUgd2lsbCBiZSB0aGUgc2FtZSB2YWx1ZSkuXG4gICAqL1xuICByZWFkb25seSBtYXBFcnJvcjogPEY+KG1hcHBlcjogKGVycm9yOiBFKSA9PiBGKSA9PiBSZXN1bHQ8VCwgRj47XG5cbiAgLy8gLS0tIE1vbmFkIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSB0cmFuc2Zvcm0gb24gYSBgUmVzdWx0YCBvYmplY3QsICoqaWYqKiB0aGVyZSBpcyBhIHZhbHVlLiBJZiB5b3VcbiAgICogaGF2ZSBhIGZ1bmN0aW9uIHRoYXQgYXR0ZW1wdHMgdG8gdHJhbnNmb3JtIGEgYFRgIGludG8gYSBgVWAgKGkuZS4gYVxuICAgKiBmdW5jdGlvbiB0aGF0IHR1cm5zIGBUYCBpbnRvIGBSZXN1bHQ8VSwgRT5gKSB0aGVuIHRoaXMgZnVuY3Rpb24gd2lsbFxuICAgKiB0cmFuc2Zvcm0gYSBgUmVzdWx0PFQsIEU+YCBpbnRvIGEgYFJlc3VsdDxVLCBFPmAuIElmIHRoaXMgYFJlc3VsdGAgKipkb2VzKipcbiAgICogY29udGFpbiBhIHZhbHVlLCB0aGVuIHRoZSBvdXRwdXQgd2lsbCBiZSBgYmluZGVyKHRoaXMudmFsdWUpYCwgYW5kIGlmIHRoaXNcbiAgICogKipkb2VzIG5vdCoqIGNvbnRhaW4gYSB2YWx1ZSB0aGVuIG5laXRoZXIgd2lsbCB0aGUgb3V0cHV0IChhbmQgdGhlIGVycm9yXG4gICAqIHdpbGwgcmVtYWluIHRoZSBzYW1lKS5cbiAgICovXG4gIHJlYWRvbmx5IGJpbmQ6IDxVPihiaW5kZXI6ICh2YWx1ZTogVCkgPT4gUmVzdWx0PFUsIEU+KSA9PiBSZXN1bHQ8VSwgRT47XG5cbiAgLy8gLS0tIFRyYXZlcnNhYmxlIChuYW1lIHN0b2xlbiBmcm9tIEhhc2tlbGwgLyBtYXRocykgLS0tXG5cbiAgLyoqXG4gICAqIEZvciBhIGdpdmVuIHByZWRpY2F0ZSwgdGhpcyBmdW5jdGlvbiBmaW5kcyBvdXQgaWYgdGhlcmUgKipleGlzdHMqKiBhIHZhbHVlXG4gICAqIGluc2lkZSB0aGlzIGBSZXN1bHRgIG9iamVjdCB0aGF0IG1lZXRzIHRoZSBwcmVkaWNhdGUuIEluIHByYWN0aWNlLCB0aGlzXG4gICAqIG1lYW5zIHRoYXQgZm9yIGBSZXN1bHRzYCB0aGF0IGNvbnRhaW4gZXJyb3JzIGl0IHJldHVybnMgZmFsc2UgKGFzIG5vXG4gICAqIHByZWRpY2F0ZS1tZWV0aW5nIHZhbHVlIGV4aXN0cykuXG4gICAqL1xuICByZWFkb25seSBleGlzdHM6IChwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbikgPT4gYm9vbGVhbjtcblxuICAvKipcbiAgICogRm9yIGEgZ2l2ZW4gcHJlZGljYXRlLCB0aGlzIGZ1bmN0aW9uIGZpbmRzIG91dCBpZiAqYWxsKiogdGhlIHZhbHVlcyBpbnNpZGVcbiAgICogdGhpcyBgUmVzdWx0YCBtZWV0IHRoZSBwcmVkaWNhdGUuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHRoYXQgZm9yXG4gICAqIGBSZXN1bHRzYCB0aGF0IGNvbnRhaW4gZXJyb3JzIGl0IHJldHVybnMgdHJ1ZSAoYXMgYWxsIDAgdmFsdWVzIGRvIG1lZXQgdGhlXG4gICAqIHByZWRpY2F0ZSkuXG4gICAqL1xuICByZWFkb25seSBmb3JhbGw6IChwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbikgPT4gYm9vbGVhbjtcblxuICAvLyAtLS0gR2V0dGVycyAtLVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgUmVzdWx0YCBvYmplY3QsIHVzaW5nIGEgZGVmYXVsdFxuICAgKiBgcmVwbGFjZW1lbnRgIHZhbHVlIGlmIHRoZSBwcm92aWRlZCBgUmVzdWx0YCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcmVhZG9ubHkgZ2V0T3I6IDxUMiA9IFQ+KHJlcGxhY2VtZW50OiBUMikgPT4gVCB8IFQyO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoZSBgUmVzdWx0YCBvYmplY3QsIHVzaW5nIGEgZGVmYXVsdFxuICAgKiBgcmVwbGFjZW1lbnRgIHZhbHVlIGlmIHRoZSBwcm92aWRlZCBgUmVzdWx0YCBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhXG4gICAqIHZhbHVlLiBVbmxpa2UgYGdldE9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIGByZXBsYWNlbWVudGAgdmFsdWUgaXMgYWxzbyBhXG4gICAqIGBSZXN1bHRgIC0gbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhIGBSZXN1bHRgLlxuICAgKi9cbiAgcmVhZG9ubHkgb3I6IDxUMiA9IFQsIEUyID0gRT4ocmVwbGFjZW1lbnQ6IFJlc3VsdDxUMiwgRTI+KSA9PiBSZXN1bHQ8VCB8IFQyLCBFIHwgRTI+O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoaXMgYFJlc3VsdGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYFJlc3VsdGAgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKlxuICAgKiBVbmxpa2UgYGdldE9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIHJlcGxhY2VtZW50IHZhbHVlIGlzIFwidGh1bmtlZFwiIC0gdGhhdCBpc1xuICAgKiB0byBzYXkgdGhhdCB5b3UgZG9uJ3QgcGFzcyBhIHZhbHVlIHRvIGBnZXRPclRodW5rYCwgeW91IHBhc3MgYSBmdW5jdGlvblxuICAgKiB3aGljaCAoaWYgY2FsbGVkKSB3aWxsICoqcmV0dXJuKiogdGhlIHZhbHVlIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIHJlYWRvbmx5IGdldE9yVGh1bms6IDxUMiA9IFQ+KHRodW5rOiAoKSA9PiBUMikgPT4gVCB8IFQyO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG91dCBvZiB0aGUgaW5zaWRlIG9mIHRoaXMgYFJlc3VsdGAgb2JqZWN0LCB1c2luZyBhIGRlZmF1bHRcbiAgICogYHJlcGxhY2VtZW50YCB2YWx1ZSBpZiB0aGUgcHJvdmlkZWQgYFJlc3VsdGAgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKlxuICAgKiBVbmxpa2UgYG9yYCwgaW4gdGhpcyBtZXRob2QgdGhlIHJlcGxhY2VtZW50IHZhbHVlIGlzIFwidGh1bmtlZFwiIC0gdGhhdCBpcyB0b1xuICAgKiBzYXkgdGhhdCB5b3UgZG9uJ3QgcGFzcyBhIHZhbHVlIHRvIGBvclRodW5rYCwgeW91IHBhc3MgYSBmdW5jdGlvbiB3aGljaCAoaWZcbiAgICogY2FsbGVkKSB3aWxsICoqcmV0dXJuKiogdGhlIHZhbHVlIHlvdSB3YW50IHRvIHVzZS5cbiAgICpcbiAgICogVW5saWtlIGBnZXRPclRodW5rYCwgaW4gdGhpcyBtZXRob2QgdGhlIHJlcGxhY2VtZW50IHZhbHVlIGlzIGFsc28gYVxuICAgKiBgUmVzdWx0YCwgbWVhbmluZyB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgYWx3YXlzIHJldHVybiBhIGBSZXN1bHRgLlxuICAgKi9cbiAgcmVhZG9ubHkgb3JUaHVuazogPFQyID0gVCwgRTIgPSBFPih0aHVuazogKCkgPT4gUmVzdWx0PFQyLCBFMj4pID0+IFJlc3VsdDxUIHwgVDIsIEUgfCBFMj47XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb3V0IG9mIHRoZSBpbnNpZGUgb2YgdGhlIGBSZXN1bHRgIG9iamVjdCwgdGhyb3dpbmcgYW5cbiAgICogZXhjZXB0aW9uIGlmIHRoZSBwcm92aWRlZCBgUmVzdWx0YCBvYmplY3QgY29udGFpbnMgYW4gZXJyb3IgaW5zdGVhZCBvZiBhXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBXQVJOSU5HOiBZb3Ugc2hvdWxkIG9ubHkgYmUgdXNpbmcgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB0aGF0IHRoZVxuICAgKiBgUmVzdWx0YCBvYmplY3QgKipkb2VzKiogY29udGFpbiBhIHZhbHVlIChvdGhlcndpc2UgeW91J3JlIHRocm93aW5nXG4gICAqIGV4Y2VwdGlvbnMgaW4gcHJvZHVjdGlvbiBjb2RlLCB3aGljaCBpcyBiYWQpLlxuICAgKlxuICAgKiBJbiB0ZXN0cyB0aGlzIGlzIG1vcmUgYWNjZXB0YWJsZS5cbiAgICpcbiAgICogUHJlZmVyIG90aGVyIG1ldGhvZHMgdG8gdGhpcywgc3VjaCBhcyBgLmVhY2hgLlxuICAgKi9cbiAgcmVhZG9ubHkgZ2V0T3JEaWU6ICgpID0+IFQ7XG5cbiAgLy8gLS0tIFV0aWxpdGllcyAtLS1cblxuICAvKipcbiAgICogSWYgdGhpcyBgUmVzdWx0YCBjb250YWlucyBhIHZhbHVlLCBwZXJmb3JtIGFuIGFjdGlvbiBvbiB0aGF0IHZhbHVlLiBVbmxpa2VcbiAgICogdGhlIHJlc3Qgb2YgdGhlIG1ldGhvZHMgb24gdGhpcyB0eXBlLCBgLmVhY2hgIGhhcyBzaWRlLWVmZmVjdHMuIElmIHlvdSB3YW50XG4gICAqIHRvIHRyYW5zZm9ybSBhIGBSZXN1bHQ8VCwgRT5gICoqaW50byoqIHNvbWV0aGluZywgdGhlbiB0aGlzIGlzIG5vdCB0aGVcbiAgICogbWV0aG9kIGZvciB5b3UuIElmIHlvdSB3YW50IHRvIHVzZSBhIGBSZXN1bHQ8VCwgRT5gIHRvICoqZG8qKiBzb21ldGhpbmcsXG4gICAqIHRoZW4gdGhpcyBpcyB0aGUgbWV0aG9kIGZvciB5b3UgLSBwcm92aWRlZCB5b3UncmUgb2theSB3aXRoIG5vdCBkb2luZ1xuICAgKiBhbnl0aGluZyBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgYFJlc3VsdGAgZG9lc24ndCBoYXZlIGEgdmFsdWUgaW5zaWRlIGl0LiBJZlxuICAgKiB5b3UncmUgbm90IHN1cmUgd2hldGhlciB5b3VyIHVzZS1jYXNlIGZpdHMgaW50byB0cmFuc2Zvcm1pbmcgKippbnRvKipcbiAgICogc29tZXRoaW5nIG9yICoqZG9pbmcqKiBzb21ldGhpbmcsIGNoZWNrIHdoZXRoZXIgaXQgaGFzIGEgcmV0dXJuIHZhbHVlLiBJZlxuICAgKiBpdCBkb2VzLCB5b3Ugc2hvdWxkIGJlIHBlcmZvcm1pbmcgYSB0cmFuc2Zvcm0uXG4gICAqL1xuICByZWFkb25seSBlYWNoOiAod29ya2VyOiAodmFsdWU6IFQpID0+IHZvaWQpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhpcyBgUmVzdWx0PFQsIEU+YCB0byBhbiBgT3B0aW9uYWw8VD5gLiBJZiB0aGlzIG9iamVjdCBjb250YWlucyBhXG4gICAqIHZhbHVlLCBzbyB3aWxsIHRoZSBvdXRwdXQuIElmIHRoaXMgb2JqZWN0IGNvbnRhaW5zIGFuIGVycm9yLCB0aGUgZXJyb3Igd2lsbFxuICAgKiBiZSBkaXNjYXJkZWQgYW5kIHRoZSBvdXRwdXQgd2lsbCBub3QgY29udGFpbiBhIHZhbHVlLlxuICAgKi9cbiAgcmVhZG9ubHkgdG9PcHRpb25hbDogKCkgPT4gT3B0aW9uYWw8VD47XG59XG5cbi8qIERlYnVnZ2luZyBpbmZvcm1hdGlvbi4gVGhpcyBpcyBkZWxpYmVyYXRlbHkgbm90IGluY2x1ZGVkIGluIHRoZSBleHBvcnRlZFxuICogdHlwZXMsIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBwcm9kdWN0aW9uIGNvZGUgdG8gdXNlIGl0LCBidXQgaXQncyB2ZXJ5IHVzZWZ1bFxuICogdG8gaGF2ZSB0aGlzIGluZm9ybWF0aW9uIGluY2x1ZGVkIGluIHRoZSBvYmplY3RzIHRoZW1zZWx2ZXMgZm9yIHdoZW4geW91J3JlXG4gKiBsb29raW5nIGF0IHRoZW0gaW4gdGhlIGNvbnNvbGUgb3IgZGVidWdnZXIuXG4gKi9cbmludGVyZmFjZSBEZWJ1Z1Jlc3VsdDxULCBFPiBleHRlbmRzIFJlc3VsdDxULCBFPiB7XG4gIC8qKlxuICAgKiBUcnVlIGZvciBgVmFsdWVgLCBGYWxzZSBmb3IgYEVycm9yYC5cbiAgICovXG4gIHJlYWRvbmx5IHRhZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIHZhbHVlIG9yIGVycm9yIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBSZXN1bHQgb2JqZWN0LlxuICAgKi9cbiAgcmVhZG9ubHkgaW5uZXI6IFQgfCBFO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFJlc3VsdDxULCBFPmAgdGhhdCAqKmRvZXMqKiBjb250YWluIGEgdmFsdWUuXG4gKi9cbmNvbnN0IHZhbHVlID0gPFQsIEUgPSBuZXZlcj4odmFsdWU6IFQpOiBSZXN1bHQ8VCwgRT4gPT4ge1xuXG4gIGNvbnN0IGFwcGx5SGVscGVyID0gPFU+KGZuOiAodmFsdWU6IFQpID0+IFUpOiBVID0+IGZuKHZhbHVlKTtcbiAgY29uc3QgY29uc3RIZWxwZXIgPSBGdW4uY29uc3RhbnQodmFsdWUpO1xuICBjb25zdCBvdXRwdXRIZWxwZXIgPSA8RTIgPSBFPigpID0+IG91dHB1dCBhcyB1bmtub3duIGFzIFJlc3VsdDxULCBFMj47XG5cbiAgY29uc3Qgb3V0cHV0OiBEZWJ1Z1Jlc3VsdDxULCBFPiA9IHtcbiAgICAvLyBEZWJ1ZyBpbmZvXG4gICAgdGFnOiB0cnVlLFxuICAgIGlubmVyOiB2YWx1ZSxcbiAgICAvLyBBY3R1YWwgUmVzdWx0IG1ldGhvZHNcbiAgICBmb2xkOiAoX29uRXJyb3IsIG9uVmFsdWUpID0+IG9uVmFsdWUodmFsdWUpLFxuICAgIGlzVmFsdWU6IEZ1bi5hbHdheXMsXG4gICAgaXNFcnJvcjogRnVuLm5ldmVyLFxuICAgIG1hcDogKG1hcHBlcikgPT4gUmVzdWx0LnZhbHVlKG1hcHBlcih2YWx1ZSkpLFxuICAgIG1hcEVycm9yOiBvdXRwdXRIZWxwZXIsXG4gICAgYmluZDogYXBwbHlIZWxwZXIsXG4gICAgZXhpc3RzOiBhcHBseUhlbHBlcixcbiAgICBmb3JhbGw6IGFwcGx5SGVscGVyLFxuICAgIGdldE9yOiBjb25zdEhlbHBlcixcbiAgICBvcjogb3V0cHV0SGVscGVyLFxuICAgIGdldE9yVGh1bms6IGNvbnN0SGVscGVyLFxuICAgIG9yVGh1bms6IG91dHB1dEhlbHBlcixcbiAgICBnZXRPckRpZTogY29uc3RIZWxwZXIsXG4gICAgZWFjaDogKGZuKSA9PiB7XG4gICAgICAvLyBDYW4ndCB3cml0ZSB0aGUgZnVuY3Rpb24gaW5saW5lIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byByZXR1cm4gc29tZXRoaW5nIGJ5IG1pc3Rha2VcbiAgICAgIGZuKHZhbHVlKTtcbiAgICB9LFxuICAgIHRvT3B0aW9uYWw6ICgpID0+IE9wdGlvbmFsLnNvbWUodmFsdWUpLFxuICB9O1xuXG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFJlc3VsdDxULCBFPmAgdGhhdCAqKmRvZXMgbm90KiogY29udGFpbiBhIHZhbHVlLCBhbmQgdGhlcmVmb3JlXG4gKiBjb250YWlucyBhbiBlcnJvci5cbiAqL1xuY29uc3QgZXJyb3IgPSA8VCA9IG5ldmVyLCBFID0gYW55PihlcnJvcjogRSk6IFJlc3VsdDxULCBFPiA9PiB7XG4gIGNvbnN0IG91dHB1dEhlbHBlciA9IDxVID0gVD4oKSA9PiBvdXRwdXQgYXMgdW5rbm93biBhcyBSZXN1bHQ8VSwgRT47XG5cbiAgY29uc3Qgb3V0cHV0OiBEZWJ1Z1Jlc3VsdDxULCBFPiA9IHtcbiAgICAvLyBEZWJ1ZyBpbmZvXG4gICAgdGFnOiBmYWxzZSxcbiAgICBpbm5lcjogZXJyb3IsXG4gICAgLy8gQWN0dWFsIFJlc3VsdCBtZXRob2RzXG4gICAgZm9sZDogKG9uRXJyb3IsIF9vblZhbHVlKSA9PiBvbkVycm9yKGVycm9yKSxcbiAgICBpc1ZhbHVlOiBGdW4ubmV2ZXIsXG4gICAgaXNFcnJvcjogRnVuLmFsd2F5cyxcbiAgICBtYXA6IG91dHB1dEhlbHBlcixcbiAgICBtYXBFcnJvcjogKG1hcHBlcikgPT4gUmVzdWx0LmVycm9yKG1hcHBlcihlcnJvcikpLFxuICAgIGJpbmQ6IG91dHB1dEhlbHBlcixcbiAgICBleGlzdHM6IEZ1bi5uZXZlcixcbiAgICBmb3JhbGw6IEZ1bi5hbHdheXMsXG4gICAgZ2V0T3I6IEZ1bi5pZGVudGl0eSxcbiAgICBvcjogRnVuLmlkZW50aXR5LFxuICAgIGdldE9yVGh1bms6IEZ1bi5hcHBseSxcbiAgICBvclRodW5rOiBGdW4uYXBwbHksXG4gICAgZ2V0T3JEaWU6IEZ1bi5kaWUoU3RyaW5nKGVycm9yKSksXG4gICAgZWFjaDogRnVuLm5vb3AsXG4gICAgdG9PcHRpb25hbDogT3B0aW9uYWwubm9uZSxcbiAgfTtcblxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBSZXN1bHQ8VCwgRT5gIGZyb20gYW4gYE9wdGlvbmFsPFQ+YCBhbmQgYW4gYEVgLiBJZiB0aGVcbiAqIGBPcHRpb25hbGAgY29udGFpbnMgYSB2YWx1ZSwgc28gd2lsbCB0aGUgb3V0cHV0dGVkIGBSZXN1bHRgLiBJZiBpdCBkb2VzIG5vdCxcbiAqIHRoZSBvdXRwdXR0ZWQgYFJlc3VsdGAgd2lsbCBjb250YWluIGFuIGVycm9yIChhbmQgdGhhdCBlcnJvciB3aWxsIGJlIHRoZVxuICogZXJyb3IgcGFzc2VkIGluKS5cbiAqL1xuY29uc3QgZnJvbU9wdGlvbiA9IDxULCBFPihvcHRpb25hbDogT3B0aW9uYWw8VD4sIGVycjogRSk6IFJlc3VsdDxULCBFPiA9PlxuICBvcHRpb25hbC5mb2xkKCgpID0+IGVycm9yKGVyciksIHZhbHVlKTtcblxuZXhwb3J0IGNvbnN0IFJlc3VsdCA9IHtcbiAgdmFsdWUsXG4gIGVycm9yLFxuICBmcm9tT3B0aW9uXG59O1xuIiwiaW1wb3J0IHsgQ2VsbCB9IGZyb20gJy4vQ2VsbCc7XG5pbXBvcnQgKiBhcyBGdW4gZnJvbSAnLi9GdW4nO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcblxuaW50ZXJmYWNlIFNpbmdsZXRvbjxUPiB7XG4gIHJlYWRvbmx5IGNsZWFyOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBpc1NldDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgZ2V0OiAoKSA9PiBPcHRpb25hbDxUPjtcbiAgcmVhZG9ubHkgc2V0OiAodmFsdWU6IFQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVwZWF0YWJsZSB7XG4gIHJlYWRvbmx5IGNsZWFyOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBpc1NldDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgZ2V0OiAoKSA9PiBPcHRpb25hbDxudW1iZXI+O1xuICByZWFkb25seSBzZXQ6IChmdW5jdGlvblRvUmVwZWF0OiAoKSA9PiB2b2lkKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldm9jYWJsZTxUPiBleHRlbmRzIFNpbmdsZXRvbjxUPiB7IH1cblxuZXhwb3J0IGludGVyZmFjZSBBcGk8VD4gZXh0ZW5kcyBTaW5nbGV0b248VD4ge1xuICByZWFkb25seSBydW46IChmbjogKGRhdGE6IFQpID0+IHZvaWQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsdWU8VD4gZXh0ZW5kcyBTaW5nbGV0b248VD4ge1xuICByZWFkb25seSBvbjogKGZuOiAoZGF0YTogVCkgPT4gdm9pZCkgPT4gdm9pZDtcbn1cblxuY29uc3Qgc2luZ2xldG9uID0gPFQ+IChkb1Jldm9rZTogKGRhdGE6IFQpID0+IHZvaWQpOiBTaW5nbGV0b248VD4gPT4ge1xuICBjb25zdCBzdWJqZWN0ID0gQ2VsbChPcHRpb25hbC5ub25lPFQ+KCkpO1xuXG4gIGNvbnN0IHJldm9rZSA9ICgpOiB2b2lkID0+IHN1YmplY3QuZ2V0KCkuZWFjaChkb1Jldm9rZSk7XG5cbiAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgcmV2b2tlKCk7XG4gICAgc3ViamVjdC5zZXQoT3B0aW9uYWwubm9uZSgpKTtcbiAgfTtcblxuICBjb25zdCBpc1NldCA9ICgpID0+IHN1YmplY3QuZ2V0KCkuaXNTb21lKCk7XG5cbiAgY29uc3QgZ2V0ID0gKCk6IE9wdGlvbmFsPFQ+ID0+IHN1YmplY3QuZ2V0KCk7XG5cbiAgY29uc3Qgc2V0ID0gKHM6IFQpID0+IHtcbiAgICByZXZva2UoKTtcbiAgICBzdWJqZWN0LnNldChPcHRpb25hbC5zb21lKHMpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNsZWFyLFxuICAgIGlzU2V0LFxuICAgIGdldCxcbiAgICBzZXRcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXBlYXRhYmxlID0gKGRlbGF5OiBudW1iZXIpOiBSZXBlYXRhYmxlID0+IHtcbiAgY29uc3QgaW50ZXJ2YWxJZCA9IENlbGwoT3B0aW9uYWwubm9uZTxudW1iZXI+KCkpO1xuXG4gIGNvbnN0IHJldm9rZSA9ICgpOiB2b2lkID0+IGludGVydmFsSWQuZ2V0KCkuZWFjaCgoaWQpID0+IGNsZWFySW50ZXJ2YWwoaWQpKTtcblxuICBjb25zdCBjbGVhciA9ICgpID0+IHtcbiAgICByZXZva2UoKTtcbiAgICBpbnRlcnZhbElkLnNldChPcHRpb25hbC5ub25lKCkpO1xuICB9O1xuXG4gIGNvbnN0IGlzU2V0ID0gKCkgPT4gaW50ZXJ2YWxJZC5nZXQoKS5pc1NvbWUoKTtcblxuICBjb25zdCBnZXQgPSAoKTogT3B0aW9uYWw8bnVtYmVyPiA9PiBpbnRlcnZhbElkLmdldCgpO1xuXG4gIGNvbnN0IHNldCA9IChmdW5jdGlvblRvUmVwZWF0OiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV2b2tlKCk7XG4gICAgaW50ZXJ2YWxJZC5zZXQoT3B0aW9uYWwuc29tZShzZXRJbnRlcnZhbChmdW5jdGlvblRvUmVwZWF0LCBkZWxheSkpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNsZWFyLFxuICAgIGlzU2V0LFxuICAgIGdldCxcbiAgICBzZXQsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZGVzdHJveWFibGUgPSA8VCBleHRlbmRzIHsgZGVzdHJveTogKCkgPT4gdm9pZCB9PiAoKTogUmV2b2NhYmxlPFQ+ID0+IHNpbmdsZXRvbjxUPigocykgPT4gcy5kZXN0cm95KCkpO1xuXG5leHBvcnQgY29uc3QgdW5iaW5kYWJsZSA9IDxUIGV4dGVuZHMgeyB1bmJpbmQ6ICgpID0+IHZvaWQgfT4gKCk6IFJldm9jYWJsZTxUPiA9PiBzaW5nbGV0b248VD4oKHMpID0+IHMudW5iaW5kKCkpO1xuXG5leHBvcnQgY29uc3QgYXBpID0gPFQgZXh0ZW5kcyB7IGRlc3Ryb3k6ICgpID0+IHZvaWQgfT4gKCk6IEFwaTxUPiA9PiB7XG4gIGNvbnN0IHN1YmplY3QgPSBkZXN0cm95YWJsZTxUPigpO1xuXG4gIGNvbnN0IHJ1biA9IChmOiAoZGF0YTogVCkgPT4gdm9pZCkgPT4gc3ViamVjdC5nZXQoKS5lYWNoKGYpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uc3ViamVjdCxcbiAgICBydW5cbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCB2YWx1ZSA9IDxUPiAoKTogVmFsdWU8VD4gPT4ge1xuICBjb25zdCBzdWJqZWN0ID0gc2luZ2xldG9uKEZ1bi5ub29wKTtcblxuICBjb25zdCBvbiA9IChmOiAoZGF0YTogVCkgPT4gdm9pZCkgPT4gc3ViamVjdC5nZXQoKS5lYWNoKGYpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uc3ViamVjdCxcbiAgICBvblxuICB9O1xufTtcbiIsImltcG9ydCAqIGFzIFN0ckFwcGVuZCBmcm9tICcuLi9zdHIvU3RyQXBwZW5kJztcblxuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICcuL09wdGlvbmFsJztcbmltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxuY29uc3QgY2hlY2tSYW5nZSA9IChzdHI6IHN0cmluZywgc3Vic3RyOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIpOiBib29sZWFuID0+XG4gIHN1YnN0ciA9PT0gJycgfHwgc3RyLmxlbmd0aCA+PSBzdWJzdHIubGVuZ3RoICYmIHN0ci5zdWJzdHIoc3RhcnQsIHN0YXJ0ICsgc3Vic3RyLmxlbmd0aCkgPT09IHN1YnN0cjtcblxuLyoqIEdpdmVuIGEgc3RyaW5nIGFuZCBvYmplY3QsIHBlcmZvcm0gdGVtcGxhdGUtcmVwbGFjZW1lbnRzIG9uIHRoZSBzdHJpbmcsIGFzIHNwZWNpZmllZCBieSB0aGUgb2JqZWN0LlxuICogQW55IHRlbXBsYXRlIGZpZWxkcyBvZiB0aGUgZm9ybSAke25hbWV9IGFyZSByZXBsYWNlZCBieSB0aGUgc3RyaW5nIG9yIG51bWJlciBzcGVjaWZpZWQgYXMgb2JqW1wibmFtZVwiXVxuICogQmFzZWQgb24gRG91Z2xhcyBDcm9ja2ZvcmQncyAnc3VwcGxhbnQnIG1ldGhvZCBmb3IgdGVtcGxhdGUtcmVwbGFjZSBvZiBzdHJpbmdzLiBVc2VzIGRpZmZlcmVudCB0ZW1wbGF0ZSBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBwbGFudCA9IChzdHI6IHN0cmluZywgb2JqOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogc3RyaW5nID0+IHtcbiAgY29uc3QgaXNTdHJpbmdPck51bWJlciA9IChhOiB1bmtub3duKTogYSBpcyBzdHJpbmcgfCBudW1iZXIgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgYTtcbiAgICByZXR1cm4gdCA9PT0gJ3N0cmluZycgfHwgdCA9PT0gJ251bWJlcic7XG4gIH07XG5cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXCRcXHsoW157fV0qKVxcfS9nLFxuICAgIChmdWxsTWF0Y2g6IHN0cmluZywga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07XG4gICAgICByZXR1cm4gaXNTdHJpbmdPck51bWJlcih2YWx1ZSkgPyB2YWx1ZS50b1N0cmluZygpIDogZnVsbE1hdGNoO1xuICAgIH1cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVMZWFkaW5nID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoKHN0ciwgcHJlZml4KSA/IFN0ckFwcGVuZC5yZW1vdmVGcm9tU3RhcnQoc3RyLCBwcmVmaXgubGVuZ3RoKSA6IHN0cjtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVUcmFpbGluZyA9IChzdHI6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZW5kc1dpdGgoc3RyLCBzdWZmaXgpID8gU3RyQXBwZW5kLnJlbW92ZUZyb21FbmQoc3RyLCBzdWZmaXgubGVuZ3RoKSA6IHN0cjtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVMZWFkaW5nID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoKHN0ciwgcHJlZml4KSA/IHN0ciA6IFN0ckFwcGVuZC5hZGRUb1N0YXJ0KHN0ciwgcHJlZml4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVUcmFpbGluZyA9IChzdHI6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZW5kc1dpdGgoc3RyLCBzdWZmaXgpID8gc3RyIDogU3RyQXBwZW5kLmFkZFRvRW5kKHN0ciwgc3VmZml4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb250YWlucyA9IChzdHI6IHN0cmluZywgc3Vic3RyOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ/OiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgY29uc3QgaWR4ID0gc3RyLmluZGV4T2Yoc3Vic3RyLCBzdGFydCk7XG4gIGlmIChpZHggIT09IC0xKSB7XG4gICAgcmV0dXJuIFR5cGUuaXNVbmRlZmluZWQoZW5kKSA/IHRydWUgOiBpZHggKyBzdWJzdHIubGVuZ3RoIDw9IGVuZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBjYXBpdGFsaXplID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHN0ciA9PT0gJycgPyAnJyA6IHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHJpbmcoMSk7XG59O1xuXG4vKiogRG9lcyAnc3RyJyBzdGFydCB3aXRoICdwcmVmaXgnP1xuICogIE5vdGU6IGFsbCBzdHJpbmdzIHN0YXJ0IHdpdGggdGhlIGVtcHR5IHN0cmluZy5cbiAqICAgICAgICBNb3JlIGZvcm1hbGx5LCBmb3IgYWxsIHN0cmluZ3MgeCwgc3RhcnRzV2l0aCh4LCBcIlwiKS5cbiAqICAgICAgICBUaGlzIGlzIHNvIHRoYXQgZm9yIGFsbCBzdHJpbmdzIHggYW5kIHksIHN0YXJ0c1dpdGgoeSArIHgsIHkpXG4gKi9cbmV4cG9ydCBjb25zdCBzdGFydHNXaXRoID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gY2hlY2tSYW5nZShzdHIsIHByZWZpeCwgMCk7XG59O1xuXG4vKiogRG9lcyAnc3RyJyBlbmQgd2l0aCAnc3VmZml4Jz9cbiAqICBOb3RlOiBhbGwgc3RyaW5ncyBlbmQgd2l0aCB0aGUgZW1wdHkgc3RyaW5nLlxuICogICAgICAgIE1vcmUgZm9ybWFsbHksIGZvciBhbGwgc3RyaW5ncyB4LCBlbmRzV2l0aCh4LCBcIlwiKS5cbiAqICAgICAgICBUaGlzIGlzIHNvIHRoYXQgZm9yIGFsbCBzdHJpbmdzIHggYW5kIHksIGVuZHNXaXRoKHggKyB5LCB5KVxuICovXG5leHBvcnQgY29uc3QgZW5kc1dpdGggPSAoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBjaGVja1JhbmdlKHN0ciwgc3VmZml4LCBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCk7XG59O1xuXG5jb25zdCBibGFuayA9IChyOiBSZWdFeHApID0+IChzOiBzdHJpbmcpOiBzdHJpbmcgPT5cbiAgcy5yZXBsYWNlKHIsICcnKTtcblxuLyoqIHJlbW92ZXMgYWxsIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcyAqL1xuZXhwb3J0IGNvbnN0IHRyaW06IChzOiBzdHJpbmcpID0+IHN0cmluZyA9XG4gIGJsYW5rKC9eXFxzK3xcXHMrJC9nKTtcblxuZXhwb3J0IGNvbnN0IGxUcmltOiAoczogc3RyaW5nKSA9PiBzdHJpbmcgPVxuICBibGFuaygvXlxccysvZyk7XG5cbmV4cG9ydCBjb25zdCByVHJpbTogKHM6IHN0cmluZykgPT4gc3RyaW5nID1cbiAgYmxhbmsoL1xccyskL2cpO1xuXG5leHBvcnQgY29uc3QgaXNOb3RFbXB0eSA9IChzOiBzdHJpbmcpOiBib29sZWFuID0+IHMubGVuZ3RoID4gMDtcblxuZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSAoczogc3RyaW5nKTogYm9vbGVhbiA9PiAhaXNOb3RFbXB0eShzKTtcblxuZXhwb3J0IGNvbnN0IHJlcGVhdCA9IChzOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpOiBzdHJpbmcgPT4gY291bnQgPD0gMCA/ICcnIDogbmV3IEFycmF5KGNvdW50ICsgMSkuam9pbihzKTtcblxuZXhwb3J0IGNvbnN0IGZyb21Db2RlUG9pbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludDtcblxuZXhwb3J0IGNvbnN0IHRvSW50ID0gKHZhbHVlOiBzdHJpbmcsIHJhZGl4OiBudW1iZXIgPSAxMCk6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICBjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgcmFkaXgpO1xuICByZXR1cm4gaXNOYU4obnVtKSA/IE9wdGlvbmFsLm5vbmUoKSA6IE9wdGlvbmFsLnNvbWUobnVtKTtcbn07XG5cbmV4cG9ydCBjb25zdCB0b0Zsb2F0ID0gKHZhbHVlOiBzdHJpbmcpOiBPcHRpb25hbDxudW1iZXI+ID0+IHtcbiAgY29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIHJldHVybiBpc05hTihudW0pID8gT3B0aW9uYWwubm9uZSgpIDogT3B0aW9uYWwuc29tZShudW0pO1xufTtcbiIsImltcG9ydCAqIGFzIFR5cGUgZnJvbSAnLi9UeXBlJztcblxuZXhwb3J0IGludGVyZmFjZSBUaHJvdHRsZXI8QSBleHRlbmRzIGFueVtdPiB7XG4gIHJlYWRvbmx5IGNhbmNlbDogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgdGhyb3R0bGU6ICguLi5hcmdzOiBBKSA9PiB2b2lkO1xufVxuXG4vLyBSdW4gYSBmdW5jdGlvbiBmbiBhZnRlciByYXRlIG1zLiBJZiBhbm90aGVyIGludm9jYXRpb24gb2NjdXJzXG4vLyBkdXJpbmcgdGhlIHRpbWUgaXQgaXMgd2FpdGluZywgdXBkYXRlIHRoZSBhcmd1bWVudHMgZiB3aWxsIHJ1blxuLy8gd2l0aCAoYnV0IGtlZXAgdGhlIGN1cnJlbnQgc2NoZWR1bGUpXG5leHBvcnQgY29uc3QgYWRhcHRhYmxlID0gPEEgZXh0ZW5kcyBhbnlbXT4oZm46ICguLi5hOiBBKSA9PiB2b2lkLCByYXRlOiBudW1iZXIpOiBUaHJvdHRsZXI8QT4gPT4ge1xuICBsZXQgdGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBsZXQgYXJnczogQSB8IG51bGwgPSBudWxsO1xuICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7XG4gICAgaWYgKCFUeXBlLmlzTnVsbCh0aW1lcikpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IG51bGw7XG4gICAgICBhcmdzID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHRocm90dGxlID0gKC4uLm5ld0FyZ3M6IEEpID0+IHtcbiAgICBhcmdzID0gbmV3QXJncztcbiAgICBpZiAoVHlwZS5pc051bGwodGltZXIpKSB7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wQXJncyA9IGFyZ3M7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgYXJncyA9IG51bGw7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIHRlbXBBcmdzIGFzIEEpO1xuICAgICAgfSwgcmF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY2FuY2VsLFxuICAgIHRocm90dGxlXG4gIH07XG59O1xuXG4vLyBSdW4gYSBmdW5jdGlvbiBmbiBhZnRlciByYXRlIG1zLiBJZiBhbm90aGVyIGludm9jYXRpb24gb2NjdXJzXG4vLyBkdXJpbmcgdGhlIHRpbWUgaXQgaXMgd2FpdGluZywgaWdub3JlIGl0IGNvbXBsZXRlbHkuXG5leHBvcnQgY29uc3QgZmlyc3QgPSA8QSBleHRlbmRzIGFueVtdPihmbjogKC4uLmE6IEEpID0+IHZvaWQsIHJhdGU6IG51bWJlcik6IFRocm90dGxlcjxBPiA9PiB7XG4gIGxldCB0aW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICBpZiAoIVR5cGUuaXNOdWxsKHRpbWVyKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHRocm90dGxlID0gKC4uLmFyZ3M6IEEpID0+IHtcbiAgICBpZiAoVHlwZS5pc051bGwodGltZXIpKSB7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSwgcmF0ZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY2FuY2VsLFxuICAgIHRocm90dGxlXG4gIH07XG59O1xuXG4vLyBSdW4gYSBmdW5jdGlvbiBmbiBhZnRlciByYXRlIG1zLiBJZiBhbm90aGVyIGludm9jYXRpb24gb2NjdXJzXG4vLyBkdXJpbmcgdGhlIHRpbWUgaXQgaXMgd2FpdGluZywgcmVzY2hlZHVsZSB0aGUgZnVuY3Rpb24gYWdhaW5cbi8vIHdpdGggdGhlIG5ldyBhcmd1bWVudHMuXG5leHBvcnQgY29uc3QgbGFzdCA9IDxBIGV4dGVuZHMgYW55W10+KGZuOiAoLi4uYTogQSkgPT4gdm9pZCwgcmF0ZTogbnVtYmVyKTogVGhyb3R0bGVyPEE+ID0+IHtcbiAgbGV0IHRpbWVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgY29uc3QgY2FuY2VsID0gKCkgPT4ge1xuICAgIGlmICghVHlwZS5pc051bGwodGltZXIpKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgdGltZXIgPSBudWxsO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdGhyb3R0bGUgPSAoLi4uYXJnczogQSkgPT4ge1xuICAgIGNhbmNlbCgpO1xuICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aW1lciA9IG51bGw7XG4gICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9LCByYXRlKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNhbmNlbCxcbiAgICB0aHJvdHRsZVxuICB9O1xufTtcbiIsImV4cG9ydCBjb25zdCBjYWNoZWQgPSA8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihmOiBUKTogKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pID0+IFJldHVyblR5cGU8VD4gPT4ge1xuICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gIGxldCByOiBhbnk7XG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIGlmICghY2FsbGVkKSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgciA9IGYuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9O1xufTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby13cmFwcGVyLW9iamVjdC10eXBlcyAqL1xuY29uc3QgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbmludGVyZmFjZSBDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgT2JqZWN0PiB7XG4gIHJlYWRvbmx5IHByb3RvdHlwZTogVDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBoYXNQcm90byA9IDxUIGV4dGVuZHMgT2JqZWN0Pih2OiBPYmplY3QsIGNvbnN0cnVjdG9yOiBDb25zdHJ1Y3RvcjxUPiwgcHJlZGljYXRlOiAodjogT2JqZWN0LCBwcm90b3R5cGU6IFQpID0+IGJvb2xlYW4pOiBib29sZWFuID0+IHtcbiAgaWYgKHByZWRpY2F0ZSh2LCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgLy8gU3RyaW5nLWJhc2VkIGZhbGxiYWNrIHRpbWVcbiAgICByZXR1cm4gdi5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gY29uc3RydWN0b3IubmFtZTtcbiAgfVxufTtcblxuY29uc3QgdHlwZU9mID0gKHg6IGFueSk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHQgPSB0eXBlb2YgeDtcbiAgaWYgKHggPT09IG51bGwpIHtcbiAgICByZXR1cm4gJ251bGwnO1xuICB9IGVsc2UgaWYgKHQgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICByZXR1cm4gJ2FycmF5JztcbiAgfSBlbHNlIGlmICh0ID09PSAnb2JqZWN0JyAmJiBoYXNQcm90byh4LCBTdHJpbmcsIChvLCBwcm90bykgPT4gcHJvdG8uaXNQcm90b3R5cGVPZihvKSkpIHtcbiAgICByZXR1cm4gJ3N0cmluZyc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbn07XG5cbmNvbnN0IGlzVHlwZSA9IDxZb2xvPih0eXBlOiBzdHJpbmcpID0+ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgWW9sbyA9PlxuICB0eXBlT2YodmFsdWUpID09PSB0eXBlO1xuXG5jb25zdCBpc1NpbXBsZVR5cGUgPSA8WW9sbz4odHlwZTogc3RyaW5nKSA9PiAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFlvbG8gPT5cbiAgdHlwZW9mIHZhbHVlID09PSB0eXBlO1xuXG5jb25zdCBlcSA9IDxUPiAodDogVCkgPT4gKGE6IGFueSk6IGEgaXMgVCA9PlxuICB0ID09PSBhO1xuXG5leHBvcnQgY29uc3QgaXMgPSA8RSBleHRlbmRzIE9iamVjdD4odmFsdWU6IGFueSwgY29uc3RydWN0b3I6IENvbnN0cnVjdG9yPEU+KTogdmFsdWUgaXMgRSA9PlxuICBpc09iamVjdCh2YWx1ZSkgJiYgaGFzUHJvdG88RT4odmFsdWUsIGNvbnN0cnVjdG9yLCAobywgcHJvdG8pID0+IGdldFByb3RvdHlwZU9mKG8pID09PSBwcm90byk7XG5cbmV4cG9ydCBjb25zdCBpc1N0cmluZzogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIHN0cmluZyA9XG4gIGlzVHlwZSgnc3RyaW5nJyk7XG5cbmV4cG9ydCBjb25zdCBpc09iamVjdDogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIE9iamVjdCA9XG4gIGlzVHlwZSgnb2JqZWN0Jyk7XG5cbmV4cG9ydCBjb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgT2JqZWN0ID0+XG4gIGlzKHZhbHVlLCBPYmplY3QpO1xuXG5leHBvcnQgY29uc3QgaXNBcnJheTogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIEFycmF5PHVua25vd24+ID1cbiAgaXNUeXBlKCdhcnJheScpO1xuXG5leHBvcnQgY29uc3QgaXNOdWxsOiAoYTogYW55KSA9PiBhIGlzIG51bGwgPVxuICBlcShudWxsKTtcblxuZXhwb3J0IGNvbnN0IGlzQm9vbGVhbjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIGJvb2xlYW4gPVxuICBpc1NpbXBsZVR5cGU8Ym9vbGVhbj4oJ2Jvb2xlYW4nKTtcblxuZXhwb3J0IGNvbnN0IGlzVW5kZWZpbmVkOiAoYTogYW55KSA9PiBhIGlzIHVuZGVmaW5lZCA9XG4gIGVxKHVuZGVmaW5lZCk7XG5cbmV4cG9ydCBjb25zdCBpc051bGxhYmxlID0gKGE6IGFueSk6IGEgaXMgbnVsbCB8IHVuZGVmaW5lZCA9PlxuICBhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZDtcblxuZXhwb3J0IGNvbnN0IGlzTm9uTnVsbGFibGUgPSA8QT4gKGE6IEEgfCBudWxsIHwgdW5kZWZpbmVkKTogYSBpcyBOb25OdWxsYWJsZTxBPiA9PlxuICAhaXNOdWxsYWJsZShhKTtcblxuZXhwb3J0IGNvbnN0IGlzRnVuY3Rpb246ICh2YWx1ZTogYW55KSA9PiB2YWx1ZSBpcyBGdW5jdGlvbiA9XG4gIGlzU2ltcGxlVHlwZTxGdW5jdGlvbj4oJ2Z1bmN0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBpc051bWJlcjogKHZhbHVlOiBhbnkpID0+IHZhbHVlIGlzIG51bWJlciA9XG4gIGlzU2ltcGxlVHlwZTxudW1iZXI+KCdudW1iZXInKTtcblxuZXhwb3J0IGNvbnN0IGlzQXJyYXlPZiA9IDxFPih2YWx1ZTogYW55LCBwcmVkOiAoeDogYW55KSA9PiB4IGlzIEUpOiB2YWx1ZSBpcyBBcnJheTxFPiA9PiB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgaWYgKCEocHJlZCh2YWx1ZVtpXSkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUHJvbWlzZUxpa2UgPSAoeDogYW55KTogeCBpcyBQcm9taXNlPHVua25vd24+ID0+XG4gIGlzT2JqZWN0KHgpXG4gICYmIGlzRnVuY3Rpb24oeC50aGVuKVxuICAmJiBpc0Z1bmN0aW9uKHguY2F0Y2gpO1xuIiwiZXhwb3J0IGNvbnN0IHplcm9XaWR0aCA9ICdcXHVGRUZGJztcbmV4cG9ydCBjb25zdCBuYnNwID0gJ1xcdTAwQTAnO1xuZXhwb3J0IGNvbnN0IHNvZnRIeXBoZW4gPSAnXFx1MDBBRCc7XG5leHBvcnQgY29uc3QgZWxsaXBzaXMgPSAnXFx1MjAyNic7XG5cbmV4cG9ydCBjb25zdCBpc1p3c3AgPSAoY2hhcjogc3RyaW5nKTogYm9vbGVhbiA9PiBjaGFyID09PSB6ZXJvV2lkdGg7XG5leHBvcnQgY29uc3QgcmVtb3ZlWndzcCA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT4gcy5yZXBsYWNlKC9cXHVGRUZGL2csICcnKTtcbiIsImV4cG9ydCBjb25zdCBhZGRUb1N0YXJ0ID0gKHN0cjogc3RyaW5nLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBwcmVmaXggKyBzdHI7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkVG9FbmQgPSAoc3RyOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHN0ciArIHN1ZmZpeDtcbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVGcm9tU3RhcnQgPSAoc3RyOiBzdHJpbmcsIG51bUNoYXJzOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gc3RyLnN1YnN0cmluZyhudW1DaGFycyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlRnJvbUVuZCA9IChzdHI6IHN0cmluZywgbnVtQ2hhcnM6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSBudW1DaGFycyk7XG59O1xuIiwiaW1wb3J0ICogYXMgQXJyIGZyb20gJy4uL2FwaS9BcnInO1xuaW1wb3J0ICogYXMgVHlwZSBmcm9tICcuLi9hcGkvVHlwZSc7XG5cbmV4cG9ydCBjb25zdCBzb3J0ID0gPFQ+KGFycjogVFtdKTogVFtdID0+IHtcbiAgcmV0dXJuIGFyci5zbGljZSgwKS5zb3J0KCk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVxTWVzc2FnZSA9IChyZXF1aXJlZDogc3RyaW5nW10sIGtleXM6IHN0cmluZ1tdKTogbmV2ZXIgPT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0FsbCByZXF1aXJlZCBrZXlzICgnICsgc29ydChyZXF1aXJlZCkuam9pbignLCAnKSArICcpIHdlcmUgbm90IHNwZWNpZmllZC4gU3BlY2lmaWVkIGtleXMgd2VyZTogJyArIHNvcnQoa2V5cykuam9pbignLCAnKSArICcuJyk7XG59O1xuXG5leHBvcnQgY29uc3QgdW5zdXBwTWVzc2FnZSA9ICh1bnN1cHBvcnRlZDogc3RyaW5nW10pOiBuZXZlciA9PiB7XG4gIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQga2V5cyBmb3Igb2JqZWN0OiAnICsgc29ydCh1bnN1cHBvcnRlZCkuam9pbignLCAnKSk7XG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVTdHJBcnIgPSAobGFiZWw6IHN0cmluZywgYXJyYXk6IGFueSk6IHZvaWQgPT4ge1xuICBpZiAoIVR5cGUuaXNBcnJheShhcnJheSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSAnICsgbGFiZWwgKyAnIGZpZWxkcyBtdXN0IGJlIGFuIGFycmF5LiBXYXM6ICcgKyBhcnJheSArICcuJyk7XG4gIH1cbiAgQXJyLmVhY2goYXJyYXksIChhKSA9PiB7XG4gICAgaWYgKCFUeXBlLmlzU3RyaW5nKGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB2YWx1ZSAnICsgYSArICcgaW4gdGhlICcgKyBsYWJlbCArICcgZmllbGRzIHdhcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbnZhbGlkVHlwZU1lc3NhZ2UgPSAoaW5jb3JyZWN0OiBzdHJpbmdbXSwgdHlwZTogc3RyaW5nKTogbmV2ZXIgPT4ge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0FsbCB2YWx1ZXMgbmVlZCB0byBiZSBvZiB0eXBlOiAnICsgdHlwZSArICcuIEtleXMgKCcgKyBzb3J0KGluY29ycmVjdCkuam9pbignLCAnKSArICcpIHdlcmUgbm90LicpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrRHVwZXMgPSAoZXZlcnl0aGluZzogc3RyaW5nW10pOiB2b2lkID0+IHtcbiAgY29uc3Qgc29ydGVkID0gc29ydChldmVyeXRoaW5nKTtcbiAgY29uc3QgZHVwZSA9IEFyci5maW5kKHNvcnRlZCwgKHMsIGkpID0+IHtcbiAgICByZXR1cm4gaSA8IHNvcnRlZC5sZW5ndGggLSAxICYmIHMgPT09IHNvcnRlZFtpICsgMV07XG4gIH0pO1xuXG4gIGR1cGUuZWFjaCgoZCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIGZpZWxkOiAnICsgZCArICcgb2NjdXJzIG1vcmUgdGhhbiBvbmNlIGluIHRoZSBjb21iaW5lZCBmaWVsZHM6IFsnICsgc29ydGVkLmpvaW4oJywgJykgKyAnXS4nKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHR5cGUgeyBTcG90RGVsdGEsIFNwb3RQb2ludCwgU3BvdFBvaW50cywgU3BvdFJhbmdlLCBTcG90VGV4dCB9IGZyb20gJy4vVHlwZXMnO1xuXG5jb25zdCBwb2ludCA9IDxFPihlbGVtZW50OiBFLCBvZmZzZXQ6IG51bWJlcik6IFNwb3RQb2ludDxFPiA9PiAoe1xuICBlbGVtZW50LFxuICBvZmZzZXRcbn0pO1xuXG5jb25zdCBkZWx0YSA9IDxFPihlbGVtZW50OiBFLCBkZWx0YU9mZnNldDogbnVtYmVyKTogU3BvdERlbHRhPEU+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIGRlbHRhT2Zmc2V0XG59KTtcblxuY29uc3QgcmFuZ2UgPSA8RT4oZWxlbWVudDogRSwgc3RhcnQ6IG51bWJlciwgZmluaXNoOiBudW1iZXIpOiBTcG90UmFuZ2U8RT4gPT4gKHtcbiAgZWxlbWVudCxcbiAgc3RhcnQsXG4gIGZpbmlzaFxufSk7XG5cbmNvbnN0IHBvaW50cyA9IDxFPihiZWdpbjogU3BvdFBvaW50PEU+LCBlbmQ6IFNwb3RQb2ludDxFPik6IFNwb3RQb2ludHM8RT4gPT4gKHtcbiAgYmVnaW4sXG4gIGVuZFxufSk7XG5cbmNvbnN0IHRleHQgPSA8RT4oZWxlbWVudDogRSwgdGV4dDogc3RyaW5nKTogU3BvdFRleHQ8RT4gPT4gKHtcbiAgZWxlbWVudCxcbiAgdGV4dFxufSk7XG5cbmV4cG9ydCB7XG4gIHBvaW50LFxuICBkZWx0YSxcbiAgcmFuZ2UsXG4gIHBvaW50cyxcbiAgdGV4dFxufTtcbiIsImltcG9ydCB7IERvbVVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFNwb3RQb2ludCB9IGZyb20gJy4uL2RhdGEvVHlwZXMnO1xuaW1wb3J0ICogYXMgRGVzY2VudCBmcm9tICcuLi9nZW5lcmFsL0Rlc2NlbnQnO1xuXG5jb25zdCB1bml2ZXJzZSA9IERvbVVuaXZlcnNlKCk7XG5jb25zdCB0b0xlYWYgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50LCBvZmZzZXQ6IG51bWJlcik6IFNwb3RQb2ludDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIERlc2NlbnQudG9MZWFmKHVuaXZlcnNlLCBlbGVtZW50LCBvZmZzZXQpO1xufTtcblxuLyogVGhlIHB1cnBvc2Ugb2YgZnJlZWZhbGwgaXMgdGhhdCB0aGV5IHdpbGwgbGFuZCBvbiBhbiBlbGVtZW50IHRoYXQgaXMgbm90IHdoaXRlc3BhY2UgdGV4dC4gVGhpc1xuICogY2FuIGJlIHZlcnkgdXNlZnVsIGluc2lkZSBiZWF1dGlmaWVkIGNvbnRlbnRcbiAqL1xuY29uc3QgZnJlZWZhbGxMdHIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogU3BvdFBvaW50PFN1Z2FyRWxlbWVudD4gPT4ge1xuICByZXR1cm4gRGVzY2VudC5mcmVlZmFsbEx0cih1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5jb25zdCBmcmVlZmFsbFJ0bCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBTcG90UG9pbnQ8U3VnYXJFbGVtZW50PiA9PiB7XG4gIHJldHVybiBEZXNjZW50LmZyZWVmYWxsUnRsKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmV4cG9ydCB7XG4gIHRvTGVhZixcbiAgZnJlZWZhbGxMdHIsXG4gIGZyZWVmYWxsUnRsXG59O1xuIiwiaW1wb3J0IHsgRG9tVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBEaXJlY3Rpb24sIFN1Y2Nlc3NvciwgVHJhbnNpdGlvbiwgVHJhdmVyc2UgfSBmcm9tICcuLi9kYXRhL1R5cGVzJztcbmltcG9ydCAqIGFzIEdhdGhlciBmcm9tICcuLi9nZW5lcmFsL0dhdGhlcic7XG5cbmNvbnN0IHVuaXZlcnNlID0gRG9tVW5pdmVyc2UoKTtcblxuY29uc3QgYmVmb3JlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCwgaXNSb290OiAoZTogU3VnYXJFbGVtZW50KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PiA9PiB7XG4gIHJldHVybiBHYXRoZXIuYmVmb3JlKHVuaXZlcnNlLCBlbGVtZW50LCBpc1Jvb3QpO1xufTtcblxuY29uc3QgYWZ0ZXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50LCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIEdhdGhlci5hZnRlcih1bml2ZXJzZSwgZWxlbWVudCwgaXNSb290KTtcbn07XG5cbmNvbnN0IHNlZWtMZWZ0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50KSA9PiBib29sZWFuLCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIEdhdGhlci5zZWVrTGVmdCh1bml2ZXJzZSwgZWxlbWVudCwgcHJlZGljYXRlLCBpc1Jvb3QpO1xufTtcblxuY29uc3Qgc2Vla1JpZ2h0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50KSA9PiBib29sZWFuLCBpc1Jvb3Q6IChlOiBTdWdhckVsZW1lbnQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIEdhdGhlci5zZWVrUmlnaHQodW5pdmVyc2UsIGVsZW1lbnQsIHByZWRpY2F0ZSwgaXNSb290KTtcbn07XG5cbmNvbnN0IHdhbGtlcnMgPSBHYXRoZXIud2Fsa2VycztcblxuY29uc3Qgd2FsayA9IChpdGVtOiBTdWdhckVsZW1lbnQsIG1vZGU6IFRyYW5zaXRpb24sIGRpcmVjdGlvbjogRGlyZWN0aW9uLCBydWxlcz86IFN1Y2Nlc3NvcltdKTogT3B0aW9uYWw8VHJhdmVyc2U8U3VnYXJFbGVtZW50Pj4gPT4ge1xuICByZXR1cm4gR2F0aGVyLndhbGsodW5pdmVyc2UsIGl0ZW0sIG1vZGUsIGRpcmVjdGlvbiwgcnVsZXMpO1xufTtcblxuZXhwb3J0IHtcbiAgYmVmb3JlLFxuICBhZnRlcixcbiAgc2Vla0xlZnQsXG4gIHNlZWtSaWdodCxcbiAgd2Fsa2VycyxcbiAgd2Fsa1xufTtcbiIsImltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5cbmltcG9ydCAqIGFzIE5hdmlnYXRpb24gZnJvbSAnLi4vLi4vd3JhcC9OYXZpZ2F0aW9uJztcbmltcG9ydCB0eXBlIHsgU3BvdFBvaW50IH0gZnJvbSAnLi4vZGF0YS9UeXBlcyc7XG5cbnR5cGUgVG9MZWFmQXBpID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbWVudDogRSwgb2Zmc2V0OiBudW1iZXIpID0+IFNwb3RQb2ludDxFPjtcbmNvbnN0IHRvTGVhZjogVG9MZWFmQXBpID0gTmF2aWdhdGlvbi50b0xlYWY7XG5cbnR5cGUgRnJlZWZhbGxMdHJBcGkgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBlbGVtZW50OiBFKSA9PiBTcG90UG9pbnQ8RT47XG5jb25zdCBmcmVlZmFsbEx0cjogRnJlZWZhbGxMdHJBcGkgPSBOYXZpZ2F0aW9uLmZyZWVmYWxsTHRyO1xuXG50eXBlIEZyZWVmYWxsUnRsQXBpID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbWVudDogRSkgPT4gU3BvdFBvaW50PEU+O1xuY29uc3QgZnJlZWZhbGxSdGw6IEZyZWVmYWxsUnRsQXBpID0gTmF2aWdhdGlvbi5mcmVlZmFsbFJ0bDtcblxuZXhwb3J0IHtcbiAgdG9MZWFmLFxuICBmcmVlZmFsbEx0cixcbiAgZnJlZWZhbGxSdGxcbn07IiwiaW1wb3J0IHR5cGUgeyBVbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBTZWVrZXIgZnJvbSAnLi4vLi4vZ2F0aGVyL1NlZWtlcic7XG5pbXBvcnQgeyBhZHZhbmNlLCBiYWNrdHJhY2ssIGdvLCBzaWRlc3RlcCB9IGZyb20gJy4uLy4uL2dhdGhlci9XYWxrZXInO1xuaW1wb3J0IHsgV2Fsa2VycyB9IGZyb20gJy4uLy4uL2dhdGhlci9XYWxrZXJzJztcbmltcG9ydCB0eXBlIHsgRGlyZWN0aW9uLCBTdWNjZXNzb3IsIFRyYW5zaXRpb24sIFRyYXZlcnNlIH0gZnJvbSAnLi4vZGF0YS9UeXBlcyc7XG5cbmNvbnN0IGlzTGVhZiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4pID0+IChlbGVtZW50OiBFKSA9PiB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKGVsZW1lbnQpLmxlbmd0aCA9PT0gMDtcblxudHlwZSBCZWZvcmVBcGkgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFLCBpc1Jvb3Q6IChlOiBFKSA9PiBib29sZWFuKSA9PiBPcHRpb25hbDxFPjtcbmNvbnN0IGJlZm9yZTogQmVmb3JlQXBpID0gKHVuaXZlcnNlLCBpdGVtLCBpc1Jvb3QpID0+IHtcbiAgcmV0dXJuIHNlZWtMZWZ0KHVuaXZlcnNlLCBpdGVtLCBpc0xlYWYodW5pdmVyc2UpLCBpc1Jvb3QpO1xufTtcblxudHlwZSBBZnRlckFwaSA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUsIGlzUm9vdDogKGU6IEUpID0+IGJvb2xlYW4pID0+IE9wdGlvbmFsPEU+O1xuY29uc3QgYWZ0ZXI6IEFmdGVyQXBpID0gKHVuaXZlcnNlLCBpdGVtLCBpc1Jvb3QpID0+IHtcbiAgcmV0dXJuIHNlZWtSaWdodCh1bml2ZXJzZSwgaXRlbSwgaXNMZWFmKHVuaXZlcnNlKSwgaXNSb290KTtcbn07XG5cbnR5cGUgU2Vla0xlZnRBcGkgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFLCBwcmVkaWNhdGU6IChlOiBFKSA9PiBib29sZWFuLCBpc1Jvb3Q6IChlOiBFKSA9PiBib29sZWFuKSA9PiBPcHRpb25hbDxFPjtcbmNvbnN0IHNlZWtMZWZ0OiBTZWVrTGVmdEFwaSA9IFNlZWtlci5sZWZ0O1xuXG50eXBlIFNlZWtSaWdodEFwaSA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUsIHByZWRpY2F0ZTogKGU6IEUpID0+IGJvb2xlYW4sIGlzUm9vdDogKGU6IEUpID0+IGJvb2xlYW4pID0+IE9wdGlvbmFsPEU+O1xuY29uc3Qgc2Vla1JpZ2h0OiBTZWVrUmlnaHRBcGkgPSBTZWVrZXIucmlnaHQ7XG5cbnR5cGUgV2Fsa2Vyc0FwaSA9ICgpID0+IHsgbGVmdDogKCkgPT4gRGlyZWN0aW9uOyByaWdodDogKCkgPT4gRGlyZWN0aW9uIH07XG5jb25zdCB3YWxrZXJzOiBXYWxrZXJzQXBpID0gKCkgPT4gKHsgbGVmdDogV2Fsa2Vycy5sZWZ0LCByaWdodDogV2Fsa2Vycy5yaWdodCB9KTtcblxudHlwZSBXYWxrQXBpID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSwgbW9kZTogVHJhbnNpdGlvbiwgZGlyZWN0aW9uOiBEaXJlY3Rpb24sIHJ1bGVzPzogU3VjY2Vzc29yW10pID0+IE9wdGlvbmFsPFRyYXZlcnNlPEU+PjtcbmNvbnN0IHdhbGs6IFdhbGtBcGkgPSBnbztcblxuZXhwb3J0IHtcbiAgYmVmb3JlLFxuICBhZnRlcixcbiAgc2Vla0xlZnQsXG4gIHNlZWtSaWdodCxcbiAgd2Fsa2VycyxcbiAgd2FsayxcbiAgLy8gVGhlc2UgaGF2ZSB0byBiZSBkaXJlY3QgcmVmZXJlbmNlcy5cbiAgYmFja3RyYWNrLFxuICBzaWRlc3RlcCxcbiAgYWR2YW5jZVxufTtcbiIsImltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgRGlyZWN0aW9uLCBUcmFuc2l0aW9uIH0gZnJvbSAnLi4vYXBpL2RhdGEvVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBXYWxrZXIgZnJvbSAnLi9XYWxrZXInO1xuaW1wb3J0IHsgV2Fsa2VycyB9IGZyb20gJy4vV2Fsa2Vycyc7XG5cbmNvbnN0IGhvbmUgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFLCBwcmVkaWNhdGU6IChlOiBFKSA9PiBib29sZWFuLCBtb2RlOiBUcmFuc2l0aW9uLCBkaXJlY3Rpb246IERpcmVjdGlvbiwgaXNSb290OiAoZTogRSkgPT4gYm9vbGVhbik6IE9wdGlvbmFsPEU+ID0+IHtcbiAgY29uc3QgbmV4dCA9IFdhbGtlci5nbyh1bml2ZXJzZSwgaXRlbSwgbW9kZSwgZGlyZWN0aW9uKTtcbiAgcmV0dXJuIG5leHQuYmluZCgobikgPT4ge1xuICAgIGlmIChpc1Jvb3Qobi5pdGVtKSkge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByZWRpY2F0ZShuLml0ZW0pID8gT3B0aW9uYWwuc29tZShuLml0ZW0pIDogaG9uZSh1bml2ZXJzZSwgbi5pdGVtLCBwcmVkaWNhdGUsIG4ubW9kZSwgZGlyZWN0aW9uLCBpc1Jvb3QpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBsZWZ0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSwgcHJlZGljYXRlOiAoZTogRSkgPT4gYm9vbGVhbiwgaXNSb290OiAoZTogRSkgPT4gYm9vbGVhbik6IE9wdGlvbmFsPEU+ID0+IHtcbiAgcmV0dXJuIGhvbmUodW5pdmVyc2UsIGl0ZW0sIHByZWRpY2F0ZSwgV2Fsa2VyLnNpZGVzdGVwLCBXYWxrZXJzLmxlZnQoKSwgaXNSb290KTtcbn07XG5cbmNvbnN0IHJpZ2h0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSwgcHJlZGljYXRlOiAoZTogRSkgPT4gYm9vbGVhbiwgaXNSb290OiAoZTogRSkgPT4gYm9vbGVhbik6IE9wdGlvbmFsPEU+ID0+IHtcbiAgcmV0dXJuIGhvbmUodW5pdmVyc2UsIGl0ZW0sIHByZWRpY2F0ZSwgV2Fsa2VyLnNpZGVzdGVwLCBXYWxrZXJzLnJpZ2h0KCksIGlzUm9vdCk7XG59O1xuXG5leHBvcnQge1xuICBsZWZ0LFxuICByaWdodFxufTtcbiIsImltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgeyBBcnIsIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBEaXJlY3Rpb24sIFN1Y2Nlc3NvciwgVHJhbnNpdGlvbiwgVHJhdmVyc2UgfSBmcm9tICcuLi9hcGkvZGF0YS9UeXBlcyc7XG5cbmNvbnN0IHRyYXZlcnNlID0gPEU+KGl0ZW06IEUsIG1vZGU6IFRyYW5zaXRpb24pOiBUcmF2ZXJzZTxFPiA9PiAoe1xuICBpdGVtLFxuICBtb2RlXG59KTtcblxuY29uc3QgYmFja3RyYWNrOiBUcmFuc2l0aW9uID0gKHVuaXZlcnNlLCBpdGVtLCBfZGlyZWN0aW9uLCB0cmFuc2l0aW9uID0gc2lkZXN0ZXApID0+IHtcbiAgcmV0dXJuIHVuaXZlcnNlLnByb3BlcnR5KCkucGFyZW50KGl0ZW0pLm1hcCgocCkgPT4ge1xuICAgIHJldHVybiB0cmF2ZXJzZShwLCB0cmFuc2l0aW9uKTtcbiAgfSk7XG59O1xuXG5jb25zdCBzaWRlc3RlcDogVHJhbnNpdGlvbiA9ICh1bml2ZXJzZSwgaXRlbSwgZGlyZWN0aW9uLCB0cmFuc2l0aW9uID0gYWR2YW5jZSkgPT4ge1xuICByZXR1cm4gZGlyZWN0aW9uLnNpYmxpbmcodW5pdmVyc2UsIGl0ZW0pLm1hcCgocCkgPT4ge1xuICAgIHJldHVybiB0cmF2ZXJzZShwLCB0cmFuc2l0aW9uKTtcbiAgfSk7XG59O1xuXG5jb25zdCBhZHZhbmNlOiBUcmFuc2l0aW9uID0gKHVuaXZlcnNlLCBpdGVtLCBkaXJlY3Rpb24sIHRyYW5zaXRpb24gPSBhZHZhbmNlKSA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gdW5pdmVyc2UucHJvcGVydHkoKS5jaGlsZHJlbihpdGVtKTtcbiAgY29uc3QgcmVzdWx0ID0gZGlyZWN0aW9uLmZpcnN0KGNoaWxkcmVuKTtcbiAgcmV0dXJuIHJlc3VsdC5tYXAoKHIpID0+IHtcbiAgICByZXR1cm4gdHJhdmVyc2UociwgdHJhbnNpdGlvbik7XG4gIH0pO1xufTtcblxuLypcbiAqIFJ1bGUgYnJlYWtkb3duOlxuICpcbiAqIGN1cnJlbnQ6IHRoZSB0cmF2ZXJzYWwgdGhhdCB3ZSBhcmUgYXBwbHlpbmcuXG4gKiBuZXh0OiB0aGUgbmV4dCB0cmF2ZXJzYWwgdG8gYXBwbHkgaWYgdGhlIGN1cnJlbnQgdHJhdmVyc2FsIHN1Y2NlZWRzIChlLmcuIGFkdmFuY2UgYWZ0ZXIgc2lkZXN0ZXBwaW5nKVxuICogZmFsbGJhY2s6IHRoZSB0cmF2ZXJzYWwgdG8gZmFsbGJhY2sgdG8gd2hlbiB0aGUgY3VycmVudCB0cmF2ZXJzYWwgZG9lcyBub3QgZmluZCBhIG5vZGVcbiAqL1xuY29uc3Qgc3VjY2Vzc29yczogU3VjY2Vzc29yW10gPSBbXG4gIHsgY3VycmVudDogYmFja3RyYWNrLCBuZXh0OiBzaWRlc3RlcCwgZmFsbGJhY2s6IE9wdGlvbmFsLm5vbmUoKSB9LFxuICB7IGN1cnJlbnQ6IHNpZGVzdGVwLCBuZXh0OiBhZHZhbmNlLCBmYWxsYmFjazogT3B0aW9uYWwuc29tZShiYWNrdHJhY2spIH0sXG4gIHsgY3VycmVudDogYWR2YW5jZSwgbmV4dDogYWR2YW5jZSwgZmFsbGJhY2s6IE9wdGlvbmFsLnNvbWUoc2lkZXN0ZXApIH1cbl07XG5cbmNvbnN0IGdvID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSwgbW9kZTogVHJhbnNpdGlvbiwgZGlyZWN0aW9uOiBEaXJlY3Rpb24sIHJ1bGVzOiBTdWNjZXNzb3JbXSA9IHN1Y2Nlc3NvcnMpOiBPcHRpb25hbDxUcmF2ZXJzZTxFPj4gPT4ge1xuICAvLyBJTlZFU1RJR0FURTogRmluZCBhIHdheSB3aGljaCBkb2Vzbid0IHJlcXVpcmUgYW4gYXJyYXkgc2VhcmNoIGZpcnN0IHRvIGlkZW50aWZ5IHRoZSBjdXJyZW50IG1vZGUuXG4gIGNvbnN0IHJ1bGVPcHQgPSBBcnIuZmluZChydWxlcywgKHN1Y2MpID0+IHtcbiAgICByZXR1cm4gc3VjYy5jdXJyZW50ID09PSBtb2RlO1xuICB9KTtcblxuICByZXR1cm4gcnVsZU9wdC5iaW5kKChydWxlKSA9PiB7XG4gICAgLy8gQXR0ZW1wdCB0aGUgY3VycmVudCBtb2RlLiBJZiBub3QsIHVzZSB0aGUgZmFsbGJhY2sgYW5kIHRyeSBhZ2Fpbi5cbiAgICByZXR1cm4gcnVsZS5jdXJyZW50KHVuaXZlcnNlLCBpdGVtLCBkaXJlY3Rpb24sIHJ1bGUubmV4dCkub3JUaHVuaygoKSA9PiB7XG4gICAgICByZXR1cm4gcnVsZS5mYWxsYmFjay5iaW5kKChmYikgPT4ge1xuICAgICAgICByZXR1cm4gZ28odW5pdmVyc2UsIGl0ZW0sIGZiLCBkaXJlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgYmFja3RyYWNrLFxuICBzaWRlc3RlcCxcbiAgYWR2YW5jZSxcbiAgZ29cbn07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IERpcmVjdGlvbiB9IGZyb20gJy4uL2FwaS9kYXRhL1R5cGVzJztcblxuY29uc3QgbGVmdCA9ICgpOiBEaXJlY3Rpb24gPT4ge1xuICBjb25zdCBzaWJsaW5nID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSkgPT4ge1xuICAgIHJldHVybiB1bml2ZXJzZS5xdWVyeSgpLnByZXZTaWJsaW5nKGl0ZW0pO1xuICB9O1xuXG4gIGNvbnN0IGZpcnN0ID0gPEU+KGNoaWxkcmVuOiBFW10pOiBPcHRpb25hbDxFPiA9PiB7XG4gICAgcmV0dXJuIGNoaWxkcmVuLmxlbmd0aCA+IDAgPyBPcHRpb25hbC5zb21lKGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdKSA6IE9wdGlvbmFsLm5vbmUoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNpYmxpbmcsXG4gICAgZmlyc3RcbiAgfTtcbn07XG5cbmNvbnN0IHJpZ2h0ID0gKCk6IERpcmVjdGlvbiA9PiB7XG4gIGNvbnN0IHNpYmxpbmcgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKSA9PiB7XG4gICAgcmV0dXJuIHVuaXZlcnNlLnF1ZXJ5KCkubmV4dFNpYmxpbmcoaXRlbSk7XG4gIH07XG5cbiAgY29uc3QgZmlyc3QgPSA8RT4oY2hpbGRyZW46IEVbXSk6IE9wdGlvbmFsPEU+ID0+IHtcbiAgICByZXR1cm4gY2hpbGRyZW4ubGVuZ3RoID4gMCA/IE9wdGlvbmFsLnNvbWUoY2hpbGRyZW5bMF0pIDogT3B0aW9uYWwubm9uZSgpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2libGluZyxcbiAgICBmaXJzdFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IFdhbGtlcnMgPSB7XG4gIGxlZnQsXG4gIHJpZ2h0XG59O1xuIiwiaW1wb3J0IHR5cGUgeyBVbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0ICogYXMgU3BvdCBmcm9tICcuLi9hcGkvZGF0YS9TcG90JztcbmltcG9ydCB0eXBlIHsgU3BvdFBvaW50IH0gZnJvbSAnLi4vYXBpL2RhdGEvVHlwZXMnO1xuXG4vKipcbiAqIFJldHVybiB0aGUgbGFzdCBhdmFpbGFibGUgY3Vyc29yIHBvc2l0aW9uIGluIHRoZSBub2RlLlxuICovXG5jb25zdCB0b0xhc3QgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBub2RlOiBFKTogU3BvdFBvaW50PEU+ID0+IHtcbiAgaWYgKHVuaXZlcnNlLnByb3BlcnR5KCkuaXNUZXh0KG5vZGUpKSB7XG4gICAgcmV0dXJuIFNwb3QucG9pbnQobm9kZSwgdW5pdmVyc2UucHJvcGVydHkoKS5nZXRUZXh0KG5vZGUpLmxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKG5vZGUpO1xuICAgIC8vIGtlZXAgZGVzY2VuZGluZyBpZiB0aGVyZSBhcmUgY2hpbGRyZW4uXG4gICAgcmV0dXJuIGNoaWxkcmVuLmxlbmd0aCA+IDAgPyB0b0xhc3QodW5pdmVyc2UsIGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aCAtIDFdKSA6IFNwb3QucG9pbnQobm9kZSwgY2hpbGRyZW4ubGVuZ3RoKTtcbiAgfVxufTtcblxuY29uc3QgdG9Mb3dlciA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIG5vZGU6IEUpOiBTcG90UG9pbnQ8RT4gPT4ge1xuICBjb25zdCBsYXN0T2Zmc2V0ID0gdW5pdmVyc2UucHJvcGVydHkoKS5pc1RleHQobm9kZSkgP1xuICAgIHVuaXZlcnNlLnByb3BlcnR5KCkuZ2V0VGV4dChub2RlKS5sZW5ndGggOlxuICAgIHVuaXZlcnNlLnByb3BlcnR5KCkuY2hpbGRyZW4obm9kZSkubGVuZ3RoO1xuICByZXR1cm4gU3BvdC5wb2ludChub2RlLCBsYXN0T2Zmc2V0KTtcbn07XG5cbi8qKlxuICogRGVzY2VuZCBkb3duIHRvIGEgbGVhZiBub2RlIGF0IHRoZSBnaXZlbiBvZmZzZXQuXG4gKi9cbmNvbnN0IHRvTGVhZiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGVsZW1lbnQ6IEUsIG9mZnNldDogbnVtYmVyKTogU3BvdFBvaW50PEU+ID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKGVsZW1lbnQpO1xuICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBvZmZzZXQgPCBjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICByZXR1cm4gdG9MZWFmKHVuaXZlcnNlLCBjaGlsZHJlbltvZmZzZXRdLCAwKTtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwICYmIHVuaXZlcnNlLnByb3BlcnR5KCkuaXNFbGVtZW50KGVsZW1lbnQpICYmIGNoaWxkcmVuLmxlbmd0aCA9PT0gb2Zmc2V0KSB7XG4gICAgcmV0dXJuIHRvTGFzdCh1bml2ZXJzZSwgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBTcG90LnBvaW50KGVsZW1lbnQsIG9mZnNldCk7XG4gIH1cbn07XG5cbmNvbnN0IHNjYW4gPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBlbGVtZW50OiBFLCBkaXJlY3Rpb246IChlOiBFKSA9PiBPcHRpb25hbDxFPik6IE9wdGlvbmFsPEU+ID0+IHtcbiAgLy8gaWYgYSBjb21tZW50IG9yIHplcm8tbGVuZ3RoIHRleHQsIHNjYW4gdGhlIHNpYmxpbmdzXG4gIGlmICgodW5pdmVyc2UucHJvcGVydHkoKS5pc1RleHQoZWxlbWVudCkgJiYgdW5pdmVyc2UucHJvcGVydHkoKS5nZXRUZXh0KGVsZW1lbnQpLnRyaW0oKS5sZW5ndGggPT09IDApXG4gICAgfHwgdW5pdmVyc2UucHJvcGVydHkoKS5pc0NvbW1lbnQoZWxlbWVudCkpIHtcbiAgICByZXR1cm4gZGlyZWN0aW9uKGVsZW1lbnQpLmJpbmQoKGVsZW0pID0+IHtcbiAgICAgIHJldHVybiBzY2FuKHVuaXZlcnNlLCBlbGVtLCBkaXJlY3Rpb24pLm9yVGh1bmsoKCkgPT4ge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShlbGVtKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gIH1cbn07XG5cbmNvbnN0IGZyZWVmYWxsTHRyID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbWVudDogRSk6IFNwb3RQb2ludDxFPiA9PiB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHNjYW4odW5pdmVyc2UsIGVsZW1lbnQsIHVuaXZlcnNlLnF1ZXJ5KCkubmV4dFNpYmxpbmcpLmdldE9yKGVsZW1lbnQpO1xuICBpZiAodW5pdmVyc2UucHJvcGVydHkoKS5pc1RleHQoY2FuZGlkYXRlKSkge1xuICAgIHJldHVybiBTcG90LnBvaW50KGNhbmRpZGF0ZSwgMCk7XG4gIH1cbiAgY29uc3QgY2hpbGRyZW4gPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKGNhbmRpZGF0ZSk7XG4gIHJldHVybiBjaGlsZHJlbi5sZW5ndGggPiAwID8gZnJlZWZhbGxMdHIodW5pdmVyc2UsIGNoaWxkcmVuWzBdKSA6IFNwb3QucG9pbnQoY2FuZGlkYXRlLCAwKTtcbn07XG5cbmNvbnN0IHRvRW5kID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbWVudDogRSk6IG51bWJlciA9PiB7XG4gIGlmICh1bml2ZXJzZS5wcm9wZXJ0eSgpLmlzVGV4dChlbGVtZW50KSkge1xuICAgIHJldHVybiB1bml2ZXJzZS5wcm9wZXJ0eSgpLmdldFRleHQoZWxlbWVudCkubGVuZ3RoO1xuICB9XG4gIGNvbnN0IGNoaWxkcmVuID0gdW5pdmVyc2UucHJvcGVydHkoKS5jaGlsZHJlbihlbGVtZW50KTtcbiAgcmV0dXJuIGNoaWxkcmVuLmxlbmd0aDtcbn07XG5cbmNvbnN0IGZyZWVmYWxsUnRsID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgZWxlbWVudDogRSk6IFNwb3RQb2ludDxFPiA9PiB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHNjYW4odW5pdmVyc2UsIGVsZW1lbnQsIHVuaXZlcnNlLnF1ZXJ5KCkucHJldlNpYmxpbmcpLmdldE9yKGVsZW1lbnQpO1xuICBpZiAodW5pdmVyc2UucHJvcGVydHkoKS5pc1RleHQoY2FuZGlkYXRlKSkge1xuICAgIHJldHVybiBTcG90LnBvaW50KGNhbmRpZGF0ZSwgdG9FbmQodW5pdmVyc2UsIGNhbmRpZGF0ZSkpO1xuICB9XG4gIGNvbnN0IGNoaWxkcmVuID0gdW5pdmVyc2UucHJvcGVydHkoKS5jaGlsZHJlbihjYW5kaWRhdGUpO1xuICByZXR1cm4gY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGZyZWVmYWxsUnRsKHVuaXZlcnNlLCBjaGlsZHJlbltjaGlsZHJlbi5sZW5ndGggLSAxXSkgOiBTcG90LnBvaW50KGNhbmRpZGF0ZSwgdG9FbmQodW5pdmVyc2UsIGNhbmRpZGF0ZSkpO1xufTtcblxuZXhwb3J0IHtcbiAgdG9MYXN0LFxuICB0b0xlYWYsXG4gIHRvTG93ZXIsXG4gIGZyZWVmYWxsTHRyLFxuICBmcmVlZmFsbFJ0bFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlcjxUPiA9IChldmVudDogVCkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBCaW5kYWJsZTxUPiB7XG4gIGJpbmQ6IChoYW5kbGVyOiBFdmVudEhhbmRsZXI8VD4pID0+IHZvaWQ7XG4gIHVuYmluZDogKGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxUPikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudCBleHRlbmRzIEJpbmRhYmxlPGFueT4ge1xuICB0cmlnZ2VyOiAoLi4udmFsdWVzOiBhbnlbXSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IEV2ZW50ID0gKGZpZWxkczogc3RyaW5nW10pOiBFdmVudCA9PiB7XG4gIGxldCBoYW5kbGVyczogRXZlbnRIYW5kbGVyPGFueT5bXSA9IFtdO1xuXG4gIGNvbnN0IGJpbmQgPSAoaGFuZGxlcjogRXZlbnRIYW5kbGVyPGFueT4pID0+IHtcbiAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IGJpbmQgZXJyb3I6IHVuZGVmaW5lZCBoYW5kbGVyJyk7XG4gICAgfVxuICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gIH07XG5cbiAgY29uc3QgdW5iaW5kID0gKGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxhbnk+KSA9PiB7XG4gICAgLy8gVGhpcyBpcyBxdWl0ZSBhIGJpdCBzbG93ZXIgdGhhbiBoYW5kbGVycy5zcGxpY2UoKSBidXQgd2UgaGF0ZSBtdXRhdGlvbi5cbiAgICAvLyBVbmJpbmQgaXNuJ3QgdXNlZCB2ZXJ5IG9mdGVuIHNvIGl0IHNob3VsZCBiZSBvay5cbiAgICBoYW5kbGVycyA9IEFyci5maWx0ZXIoaGFuZGxlcnMsIChoKSA9PiB7XG4gICAgICByZXR1cm4gaCAhPT0gaGFuZGxlcjtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB0cmlnZ2VyID0gPFQ+ICguLi5hcmdzOiBUW10pID0+IHtcbiAgICBjb25zdCBldmVudDogUmVjb3JkPHN0cmluZywgVD4gPSB7fTtcbiAgICBBcnIuZWFjaChmaWVsZHMsIChuYW1lLCBpKSA9PiB7XG4gICAgICBldmVudFtuYW1lXSA9IGFyZ3NbaV07XG4gICAgfSk7XG4gICAgQXJyLmVhY2goaGFuZGxlcnMsIChoYW5kbGVyKSA9PiB7XG4gICAgICBoYW5kbGVyKGV2ZW50KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGJpbmQsXG4gICAgdW5iaW5kLFxuICAgIHRyaWdnZXJcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBPYmogfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEJpbmRhYmxlLCBFdmVudCB9IGZyb20gJy4vRXZlbnQnO1xuXG5pbnRlcmZhY2UgRXZlbnRzPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBFdmVudD4+IHtcbiAgcmVhZG9ubHkgcmVnaXN0cnk6IFJlY29yZDxrZXlvZiBULCBCaW5kYWJsZTxhbnk+PjtcbiAgcmVhZG9ubHkgdHJpZ2dlcjogUmVjb3JkPGtleW9mIFQsICguLi52YWx1ZXM6IGFueVtdKSA9PiB2b2lkPjtcbn1cblxuLyoqIDo6IHtuYW1lIDogRXZlbnR9IC0+IEV2ZW50cyAqL1xuY29uc3QgY3JlYXRlID0gPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBFdmVudD4+KHR5cGVEZWZzOiBUKTogRXZlbnRzPFQ+ID0+IHtcbiAgY29uc3QgcmVnaXN0cnk6IFJlY29yZDxrZXlvZiBULCBCaW5kYWJsZTxhbnk+PiA9IE9iai5tYXAodHlwZURlZnMsIChldmVudCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBiaW5kOiBldmVudC5iaW5kLFxuICAgICAgdW5iaW5kOiBldmVudC51bmJpbmRcbiAgICB9O1xuICB9KTtcblxuICBjb25zdCB0cmlnZ2VyID0gT2JqLm1hcCh0eXBlRGVmcywgKGV2ZW50KSA9PiB7XG4gICAgcmV0dXJuIGV2ZW50LnRyaWdnZXI7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgcmVnaXN0cnksXG4gICAgdHJpZ2dlclxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgY3JlYXRlXG59O1xuIiwiaW1wb3J0IHsgRG9tVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBCcm9rZW5QYXRoLCBMZWZ0UmlnaHQgfSBmcm9tICcuLi8uLi9wYXJlbnQvQnJlYWtlcic7XG5pbXBvcnQgKiBhcyBQYXJlbnQgZnJvbSAnLi4vZ2VuZXJhbC9QYXJlbnQnO1xuXG5jb25zdCB1bml2ZXJzZSA9IERvbVVuaXZlcnNlKCk7XG5cbmNvbnN0IHNoYXJlZE9uZSA9IChsb29rOiAoZTogU3VnYXJFbGVtZW50KSA9PiBPcHRpb25hbDxTdWdhckVsZW1lbnQ+LCBlbGVtZW50czogU3VnYXJFbGVtZW50W10pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5zaGFyZWRPbmUodW5pdmVyc2UsIChfdW5pdmVyc2UsIGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gbG9vayhlbGVtZW50KTtcbiAgfSwgZWxlbWVudHMpO1xufTtcblxuY29uc3Qgc3Vic2V0ID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQsIGZpbmlzaDogU3VnYXJFbGVtZW50KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50W10+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5zdWJzZXQodW5pdmVyc2UsIHN0YXJ0LCBmaW5pc2gpO1xufTtcblxuY29uc3QgYW5jZXN0b3JzID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQsIGZpbmlzaDogU3VnYXJFbGVtZW50LCBpc1Jvb3Q/OiAoeDogU3VnYXJFbGVtZW50KSA9PiBib29sZWFuKTogUGFyZW50LkFuY2VzdG9yc0ZuUmVzdWx0PFN1Z2FyRWxlbWVudD4gPT4ge1xuICByZXR1cm4gUGFyZW50LmFuY2VzdG9ycyh1bml2ZXJzZSwgc3RhcnQsIGZpbmlzaCwgaXNSb290KTtcbn07XG5cbmNvbnN0IGJyZWFrVG9MZWZ0ID0gKHBhcmVudDogU3VnYXJFbGVtZW50LCBjaGlsZDogU3VnYXJFbGVtZW50KTogT3B0aW9uYWw8TGVmdFJpZ2h0PFN1Z2FyRWxlbWVudD4+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5icmVha1RvTGVmdCh1bml2ZXJzZSwgcGFyZW50LCBjaGlsZCk7XG59O1xuXG5jb25zdCBicmVha1RvUmlnaHQgPSAocGFyZW50OiBTdWdhckVsZW1lbnQsIGNoaWxkOiBTdWdhckVsZW1lbnQpOiBPcHRpb25hbDxMZWZ0UmlnaHQ8U3VnYXJFbGVtZW50Pj4gPT4ge1xuICByZXR1cm4gUGFyZW50LmJyZWFrVG9SaWdodCh1bml2ZXJzZSwgcGFyZW50LCBjaGlsZCk7XG59O1xuXG5jb25zdCBicmVha1BhdGggPSAoY2hpbGQ6IFN1Z2FyRWxlbWVudCwgaXNUb3A6IChlOiBTdWdhckVsZW1lbnQpID0+IGJvb2xlYW4sIGJyZWFrZXI6IChwYXJlbnQ6IFN1Z2FyRWxlbWVudCwgY2hpbGQ6IFN1Z2FyRWxlbWVudCkgPT4gT3B0aW9uYWw8TGVmdFJpZ2h0PFN1Z2FyRWxlbWVudD4+KTogQnJva2VuUGF0aDxTdWdhckVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIFBhcmVudC5icmVha1BhdGgodW5pdmVyc2UsIGNoaWxkLCBpc1RvcCwgKHUsIHAsIGMpID0+IHtcbiAgICByZXR1cm4gYnJlYWtlcihwLCBjKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBzaGFyZWRPbmUsXG4gIHN1YnNldCxcbiAgYW5jZXN0b3JzLFxuICBicmVha1RvTGVmdCxcbiAgYnJlYWtUb1JpZ2h0LFxuICBicmVha1BhdGhcbn07XG4iLCJpbXBvcnQgeyBEb21Vbml2ZXJzZSB9IGZyb20gJ0BlcGhveC9ib3NzJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgU3RydWN0dXJlIGZyb20gJy4uL2dlbmVyYWwvU3RydWN0dXJlJztcblxuY29uc3QgdW5pdmVyc2UgPSBEb21Vbml2ZXJzZSgpO1xuXG5jb25zdCBpc0Jsb2NrID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gU3RydWN0dXJlLmlzQmxvY2sodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuY29uc3QgaXNMaXN0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gU3RydWN0dXJlLmlzTGlzdCh1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5jb25zdCBpc0Zvcm1hdHRpbmcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNGb3JtYXR0aW5nKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmNvbnN0IGlzSGVhZGluZyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIFN0cnVjdHVyZS5pc0hlYWRpbmcodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuY29uc3QgaXNDb250YWluZXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNDb250YWluZXIodW5pdmVyc2UsIGVsZW1lbnQpO1xufTtcblxuY29uc3QgaXNFbXB0eVRhZyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIFN0cnVjdHVyZS5pc0VtcHR5VGFnKHVuaXZlcnNlLCBlbGVtZW50KTtcbn07XG5cbmNvbnN0IGlzRnJhbWUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBTdHJ1Y3R1cmUuaXNGcmFtZSh1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5jb25zdCBpc0lubGluZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIFN0cnVjdHVyZS5pc0lubGluZSh1bml2ZXJzZSwgZWxlbWVudCk7XG59O1xuXG5leHBvcnQge1xuICBpc0Jsb2NrLFxuICBpc0xpc3QsXG4gIGlzRm9ybWF0dGluZyxcbiAgaXNIZWFkaW5nLFxuICBpc0NvbnRhaW5lcixcbiAgaXNFbXB0eVRhZyxcbiAgaXNGcmFtZSxcbiAgaXNJbmxpbmVcbn07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IGJyZWFrUGF0aCBhcyB4QnJlYWtQYXRoLCBicmVha1RvTGVmdCBhcyB4QnJlYWtUb0xlZnQsIGJyZWFrVG9SaWdodCBhcyB4QnJlYWtUb1JpZ2h0LCB0eXBlIEJyb2tlblBhdGgsIHR5cGUgTGVmdFJpZ2h0IH0gZnJvbSAnLi4vLi4vcGFyZW50L0JyZWFrZXInO1xuaW1wb3J0IHsgdHlwZSBMb29rZXIsIG9uZUFsbCB9IGZyb20gJy4uLy4uL3BhcmVudC9TaGFyZWQnO1xuaW1wb3J0ICogYXMgU3Vic2V0Rm4gZnJvbSAnLi4vLi4vcGFyZW50L1N1YnNldCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5jZXN0b3JzRm5SZXN1bHQ8RT4ge1xuICByZWFkb25seSBmaXJzdHBhdGg6IEVbXTtcbiAgcmVhZG9ubHkgc2Vjb25kcGF0aDogRVtdO1xuICByZWFkb25seSBzaGFyZWQ6IE9wdGlvbmFsPEU+O1xufVxuXG50eXBlIFNoYXJlZE9uZUZuID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgbG9vazogTG9va2VyPEUsIEQ+LCBlbGVtZW50czogRVtdKSA9PiBPcHRpb25hbDxFPjtcbmNvbnN0IHNoYXJlZE9uZTogU2hhcmVkT25lRm4gPSBvbmVBbGw7XG5cbnR5cGUgU3Vic2V0Rm4gPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBzdGFydDogRSwgZW5kOiBFKSA9PiBPcHRpb25hbDxFW10+O1xuY29uc3Qgc3Vic2V0OiBTdWJzZXRGbiA9IFN1YnNldEZuLnN1YnNldDtcblxudHlwZSBBbmNlc3RvcnNGbiA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHN0YXJ0OiBFLCBmaW5pc2g6IEUsIGlzUm9vdD86ICgoeDogRSkgPT4gYm9vbGVhbikpID0+IEFuY2VzdG9yc0ZuUmVzdWx0PEU+O1xuY29uc3QgYW5jZXN0b3JzOiBBbmNlc3RvcnNGbiA9IFN1YnNldEZuLmFuY2VzdG9ycztcblxudHlwZSBCcmVha1RvTGVmdEZuID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgcGFyZW50OiBFLCBjaGlsZDogRSkgPT4gT3B0aW9uYWw8TGVmdFJpZ2h0PEU+PjtcbmNvbnN0IGJyZWFrVG9MZWZ0OiBCcmVha1RvTGVmdEZuID0geEJyZWFrVG9MZWZ0O1xuXG50eXBlIEJyZWFrVG9SaWdodEZuID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgcGFyZW50OiBFLCBjaGlsZDogRSkgPT4gT3B0aW9uYWw8TGVmdFJpZ2h0PEU+PjtcbmNvbnN0IGJyZWFrVG9SaWdodDogQnJlYWtUb1JpZ2h0Rm4gPSB4QnJlYWtUb1JpZ2h0O1xuXG50eXBlIEJyZWFrUGF0aEZuID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgY2hpbGQ6IEUsIGlzVG9wOiAoZTogRSkgPT4gYm9vbGVhbiwgYnJlYWtlcjogKHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgcGFyZW50OiBFLCBjaGlsZDogRSkgPT4gT3B0aW9uYWw8TGVmdFJpZ2h0PEU+PikgPT4gQnJva2VuUGF0aDxFPjtcbmNvbnN0IGJyZWFrUGF0aDogQnJlYWtQYXRoRm4gPSB4QnJlYWtQYXRoO1xuXG5leHBvcnQge1xuICBzaGFyZWRPbmUsXG4gIHN1YnNldCxcbiAgYW5jZXN0b3JzLFxuICBicmVha1RvTGVmdCxcbiAgYnJlYWtUb1JpZ2h0LFxuICBicmVha1BhdGhcbn07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuY29uc3QgYmxvY2tMaXN0ID0gW1xuICAnYm9keScsXG4gICdwJyxcbiAgJ2RpdicsXG4gICdhcnRpY2xlJyxcbiAgJ2FzaWRlJyxcbiAgJ2ZpZ2NhcHRpb24nLFxuICAnZmlndXJlJyxcbiAgJ2Zvb3RlcicsXG4gICdoZWFkZXInLFxuICAnbmF2JyxcbiAgJ3NlY3Rpb24nLFxuICAnb2wnLFxuICAndWwnLFxuICAvLyAtLS0gTk9URSwgVGFnQm91bmRhcmllcyBoYXMgbGkgaGVyZS4gVGhhdCBtZWFucyB1bml2ZXJzZS5pc0JvdW5kYXJ5ID0+IHRydWUgZm9yIGxpIHRhZ3MuXG4gICd0YWJsZScsXG4gICd0aGVhZCcsXG4gICd0Zm9vdCcsXG4gICd0Ym9keScsXG4gICdjYXB0aW9uJyxcbiAgJ3RyJyxcbiAgJ3RkJyxcbiAgJ3RoJyxcbiAgJ2gxJyxcbiAgJ2gyJyxcbiAgJ2gzJyxcbiAgJ2g0JyxcbiAgJ2g1JyxcbiAgJ2g2JyxcbiAgJ2Jsb2NrcXVvdGUnLFxuICAncHJlJyxcbiAgJ2FkZHJlc3MnXG5dO1xuXG5jb25zdCBpc0xpc3QgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHRhZ05hbWUgPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLm5hbWUoaXRlbSk7XG4gIHJldHVybiBBcnIuY29udGFpbnMoWyAnb2wnLCAndWwnIF0sIHRhZ05hbWUpO1xufTtcblxuY29uc3QgaXNCbG9jayA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdGFnTmFtZSA9IHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKTtcbiAgcmV0dXJuIEFyci5jb250YWlucyhibG9ja0xpc3QsIHRhZ05hbWUpO1xufTtcblxuY29uc3QgaXNGb3JtYXR0aW5nID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB0YWdOYW1lID0gdW5pdmVyc2UucHJvcGVydHkoKS5uYW1lKGl0ZW0pO1xuICByZXR1cm4gQXJyLmNvbnRhaW5zKFsgJ2FkZHJlc3MnLCAncHJlJywgJ3AnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnIF0sIHRhZ05hbWUpO1xufTtcblxuY29uc3QgaXNIZWFkaW5nID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB0YWdOYW1lID0gdW5pdmVyc2UucHJvcGVydHkoKS5uYW1lKGl0ZW0pO1xuICByZXR1cm4gQXJyLmNvbnRhaW5zKFsgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JyBdLCB0YWdOYW1lKTtcbn07XG5cbmNvbnN0IGlzQ29udGFpbmVyID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gQXJyLmNvbnRhaW5zKFsgJ2RpdicsICdsaScsICd0ZCcsICd0aCcsICdibG9ja3F1b3RlJywgJ2JvZHknLCAnY2FwdGlvbicgXSwgdW5pdmVyc2UucHJvcGVydHkoKS5uYW1lKGl0ZW0pKTtcbn07XG5cbmNvbnN0IGlzRW1wdHlUYWcgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBBcnIuY29udGFpbnMoWyAnYnInLCAnaW1nJywgJ2hyJywgJ2lucHV0JyBdLCB1bml2ZXJzZS5wcm9wZXJ0eSgpLm5hbWUoaXRlbSkpO1xufTtcblxuY29uc3QgaXNGcmFtZSA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKSA9PT0gJ2lmcmFtZSc7XG59O1xuXG5jb25zdCBpc0lubGluZSA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIGl0ZW06IEUpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuICEoaXNCbG9jayh1bml2ZXJzZSwgaXRlbSkgfHwgaXNFbXB0eVRhZyh1bml2ZXJzZSwgaXRlbSkpICYmIHVuaXZlcnNlLnByb3BlcnR5KCkubmFtZShpdGVtKSAhPT0gJ2xpJztcbn07XG5cbmV4cG9ydCB7XG4gIGlzQmxvY2ssXG4gIGlzTGlzdCxcbiAgaXNGb3JtYXR0aW5nLFxuICBpc0hlYWRpbmcsXG4gIGlzQ29udGFpbmVyLFxuICBpc0VtcHR5VGFnLFxuICBpc0ZyYW1lLFxuICBpc0lubGluZVxufTtcbiIsImltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbnRlcmZhY2UgQmlzZWN0PEU+IHtcbiAgcmVhZG9ubHkgYmVmb3JlOiBFW107XG4gIHJlYWRvbmx5IGFmdGVyOiBFW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVmdFJpZ2h0PEU+IHtcbiAgcmVhZG9ubHkgbGVmdDogRTtcbiAgcmVhZG9ubHkgcmlnaHQ6IEU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJva2VuUGF0aFNwbGl0czxFPiB7XG4gIHJlYWRvbmx5IGZpcnN0OiBFO1xuICByZWFkb25seSBzZWNvbmQ6IEU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJva2VuUGF0aDxFPiB7XG4gIHJlYWRvbmx5IGZpcnN0OiBFO1xuICByZWFkb25seSBzZWNvbmQ6IE9wdGlvbmFsPEU+O1xuICByZWFkb25seSBzcGxpdHM6IEJyb2tlblBhdGhTcGxpdHM8RT5bXTtcbn1cblxuY29uc3QgbGVmdFJpZ2h0ID0gPEU+KGxlZnQ6IEUsIHJpZ2h0OiBFKTogTGVmdFJpZ2h0PEU+ID0+ICh7XG4gIGxlZnQsXG4gIHJpZ2h0XG59KTtcblxuY29uc3QgYnJva2VuUGF0aCA9IDxFPihmaXJzdDogRSwgc2Vjb25kOiBPcHRpb25hbDxFPiwgc3BsaXRzOiBCcm9rZW5QYXRoU3BsaXRzPEU+W10pOiBCcm9rZW5QYXRoPEU+ID0+ICh7XG4gIGZpcnN0LFxuICBzZWNvbmQsXG4gIHNwbGl0c1xufSk7XG5cbmNvbnN0IGJpc2VjdCA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpOiBPcHRpb25hbDxCaXNlY3Q8RT4+ID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSB1bml2ZXJzZS5wcm9wZXJ0eSgpLmNoaWxkcmVuKHBhcmVudCk7XG4gIGNvbnN0IGluZGV4ID0gQXJyLmZpbmRJbmRleChjaGlsZHJlbiwgRnVuLmN1cnJ5KHVuaXZlcnNlLmVxLCBjaGlsZCkpO1xuICByZXR1cm4gaW5kZXgubWFwKChpbmQpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYmVmb3JlOiBjaGlsZHJlbi5zbGljZSgwLCBpbmQpLFxuICAgICAgYWZ0ZXI6IGNoaWxkcmVuLnNsaWNlKGluZCArIDEpXG4gICAgfTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENsb25lIHBhcmVudCB0byB0aGUgUklHSFQgYW5kIG1vdmUgZXZlcnl0aGluZyBhZnRlciBjaGlsZCBpbiB0aGUgcGFyZW50IGVsZW1lbnQgaW50b1xuICogYSBjbG9uZSBvZiB0aGUgcGFyZW50IChwbGFjZWQgYWZ0ZXIgcGFyZW50KS5cbiAqL1xuY29uc3QgYnJlYWtUb1JpZ2h0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgcGFyZW50OiBFLCBjaGlsZDogRSk6IE9wdGlvbmFsPExlZnRSaWdodDxFPj4gPT4ge1xuICByZXR1cm4gYmlzZWN0KHVuaXZlcnNlLCBwYXJlbnQsIGNoaWxkKS5tYXAoKHBhcnRzKSA9PiB7XG4gICAgY29uc3Qgc2Vjb25kID0gdW5pdmVyc2UuY3JlYXRlKCkuY2xvbmUocGFyZW50KTtcbiAgICB1bml2ZXJzZS5pbnNlcnQoKS5hcHBlbmRBbGwoc2Vjb25kLCBwYXJ0cy5hZnRlcik7XG4gICAgdW5pdmVyc2UuaW5zZXJ0KCkuYWZ0ZXIocGFyZW50LCBzZWNvbmQpO1xuICAgIHJldHVybiBsZWZ0UmlnaHQocGFyZW50LCBzZWNvbmQpO1xuICB9KTtcbn07XG5cbi8qKlxuICogQ2xvbmUgcGFyZW50IHRvIHRoZSBMRUZUIGFuZCBtb3ZlIGV2ZXJ5dGhpbmcgYmVmb3JlIGFuZCBpbmNsdWRpbmcgY2hpbGQgaW50b1xuICogdGhlIGEgY2xvbmUgb2YgdGhlIHBhcmVudCAocGxhY2VkIGJlZm9yZSBwYXJlbnQpXG4gKi9cbmNvbnN0IGJyZWFrVG9MZWZ0ID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgcGFyZW50OiBFLCBjaGlsZDogRSk6IE9wdGlvbmFsPExlZnRSaWdodDxFPj4gPT4ge1xuICByZXR1cm4gYmlzZWN0KHVuaXZlcnNlLCBwYXJlbnQsIGNoaWxkKS5tYXAoKHBhcnRzKSA9PiB7XG4gICAgY29uc3QgcHJpb3IgPSB1bml2ZXJzZS5jcmVhdGUoKS5jbG9uZShwYXJlbnQpO1xuICAgIHVuaXZlcnNlLmluc2VydCgpLmFwcGVuZEFsbChwcmlvciwgcGFydHMuYmVmb3JlLmNvbmNhdChbIGNoaWxkIF0pKTtcbiAgICB1bml2ZXJzZS5pbnNlcnQoKS5hcHBlbmRBbGwocGFyZW50LCBwYXJ0cy5hZnRlcik7XG4gICAgdW5pdmVyc2UuaW5zZXJ0KCkuYmVmb3JlKHBhcmVudCwgcHJpb3IpO1xuICAgIHJldHVybiBsZWZ0UmlnaHQocHJpb3IsIHBhcmVudCk7XG4gIH0pO1xufTtcblxuLypcbiAqIFVzaW5nIHRoZSBicmVha2VyLCBicmVhayBmcm9tIHRoZSBjaGlsZCB1cCB0byB0aGUgdG9wIGVsZW1lbnQgZGVmaW5lZCBieSB0aGUgcHJlZGljYXRlLlxuICogSXQgcmV0dXJucyB0aHJlZSB2YWx1ZXM6XG4gKiAgIGZpcnN0OiB0aGUgdG9wIGxldmVsIGVsZW1lbnQgdGhhdCBjb21wbGV0ZWQgdGhlIGJyZWFrXG4gKiAgIHNlY29uZDogdGhlIG9wdGlvbmFsIGVsZW1lbnQgcmVwcmVzZW50aW5nIHNlY29uZCBwYXJ0IG9mIHRoZSB0b3AtbGV2ZWwgc3BsaXQgaWYgdGhlIGJyZWFraW5nIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgdG8gdGhlIHRvcFxuICogICBzcGxpdHM6IGEgbGlzdCBvZiAoRWxlbWVudCwgRWxlbWVudCkgcGFpcnMgdGhhdCByZXByZXNlbnQgdGhlIHNwbGl0cyB0aGF0IGhhdmUgb2NjdXJyZWQgb24gdGhlIHdheSB0byB0aGUgdG9wLlxuICovXG5jb25zdCBicmVha1BhdGggPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBpdGVtOiBFLCBpc1RvcDogKGU6IEUpID0+IGJvb2xlYW4sIGJyZWFrZXI6ICh1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHBhcmVudDogRSwgY2hpbGQ6IEUpID0+IE9wdGlvbmFsPExlZnRSaWdodDxFPj4pOiBCcm9rZW5QYXRoPEU+ID0+IHtcblxuICBjb25zdCBuZXh0ID0gKGNoaWxkOiBFLCBncm91cDogT3B0aW9uYWw8RT4sIHNwbGl0czogQnJva2VuUGF0aFNwbGl0czxFPltdKTogQnJva2VuUGF0aDxFPiA9PiB7XG4gICAgY29uc3QgZmFsbGJhY2sgPSBicm9rZW5QYXRoKGNoaWxkLCBPcHRpb25hbC5ub25lKCksIHNwbGl0cyk7XG4gICAgLy8gRm91bmQgdGhlIHRvcCwgc28gc3RvcC5cbiAgICBpZiAoaXNUb3AoY2hpbGQpKSB7XG4gICAgICByZXR1cm4gYnJva2VuUGF0aChjaGlsZCwgZ3JvdXAsIHNwbGl0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNwbGl0IHRoZSBjaGlsZCBhdCBwYXJlbnQsIGFuZCBrZWVwIGdvaW5nXG4gICAgICByZXR1cm4gdW5pdmVyc2UucHJvcGVydHkoKS5wYXJlbnQoY2hpbGQpLmJpbmQoKHBhcmVudDogRSkgPT4ge1xuICAgICAgICByZXR1cm4gYnJlYWtlcih1bml2ZXJzZSwgcGFyZW50LCBjaGlsZCkubWFwKChicmVha2FnZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGV4dHJhID0gW3sgZmlyc3Q6IGJyZWFrYWdlLmxlZnQsIHNlY29uZDogYnJlYWthZ2UucmlnaHQgfV07XG4gICAgICAgICAgLy8gT3VyIGlzVG9wIGlzIGJhc2VkIG9uIHRoZSBsZWZ0LXNpZGUgcGFyZW50LCBzbyBrZWVwIGl0IHJlZ2FyZGxlc3Mgb2Ygc3BsaXQuXG4gICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gaXNUb3AocGFyZW50KSA/IHBhcmVudCA6IGJyZWFrYWdlLmxlZnQ7XG4gICAgICAgICAgcmV0dXJuIG5leHQobmV4dENoaWxkLCBPcHRpb25hbC5zb21lKGJyZWFrYWdlLnJpZ2h0KSwgc3BsaXRzLmNvbmNhdChleHRyYSkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLmdldE9yKGZhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIG5leHQoaXRlbSwgT3B0aW9uYWwubm9uZSgpLCBbXSk7XG59O1xuXG5leHBvcnQgeyBicmVha1RvTGVmdCwgYnJlYWtUb1JpZ2h0LCBicmVha1BhdGggfTtcbiIsImltcG9ydCB0eXBlIHsgVW5pdmVyc2UgfSBmcm9tICdAZXBob3gvYm9zcyc7XG5pbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5leHBvcnQgdHlwZSBMb29rZXI8RSwgRD4gPSAodW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBlbGVtOiBFKSA9PiBPcHRpb25hbDxFPjtcblxuY29uc3QgYWxsID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgbG9vazogTG9va2VyPEUsIEQ+LCBlbGVtZW50czogRVtdLCBmOiAodW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBsb29rOiBMb29rZXI8RSwgRD4sIGhlYWQ6IEUsIHRhaWw6IEVbXSkgPT4gT3B0aW9uYWw8RT4pOiBPcHRpb25hbDxFPiA9PiB7XG4gIGNvbnN0IGhlYWQgPSBlbGVtZW50c1swXTtcbiAgY29uc3QgdGFpbCA9IGVsZW1lbnRzLnNsaWNlKDEpO1xuICByZXR1cm4gZih1bml2ZXJzZSwgbG9vaywgaGVhZCwgdGFpbCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGxvb2sgcmV0dXJucyB0aGUgc2FtZSBlbGVtZW50IGZvciBhbGwgZWxlbWVudHMsIGFuZCByZXR1cm4gaXQgaWYgaXQgZXhpc3RzLlxuICovXG5jb25zdCBvbmVBbGwgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBsb29rOiBMb29rZXI8RSwgRD4sIGVsZW1lbnRzOiBFW10pOiBPcHRpb25hbDxFPiA9PiB7XG4gIHJldHVybiBlbGVtZW50cy5sZW5ndGggPiAwID9cbiAgICBhbGwodW5pdmVyc2UsIGxvb2ssIGVsZW1lbnRzLCB1bnNhZmVPbmUpIDpcbiAgICBPcHRpb25hbC5ub25lPEU+KCk7XG59O1xuXG5jb25zdCB1bnNhZmVPbmUgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBsb29rOiBMb29rZXI8RSwgRD4sIGhlYWQ6IEUsIHRhaWw6IEVbXSk6IE9wdGlvbmFsPEU+ID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBsb29rKHVuaXZlcnNlLCBoZWFkKTtcbiAgcmV0dXJuIEFyci5mb2xkcih0YWlsLCAoYiwgYSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBsb29rKHVuaXZlcnNlLCBhKTtcbiAgICByZXR1cm4gY29tbW9uRWxlbWVudCh1bml2ZXJzZSwgYiwgY3VycmVudCk7XG4gIH0sIHN0YXJ0KTtcbn07XG5cbmNvbnN0IGNvbW1vbkVsZW1lbnQgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBzdGFydDogT3B0aW9uYWw8RT4sIGVuZDogT3B0aW9uYWw8RT4pOiBPcHRpb25hbDxFPiA9PiB7XG4gIHJldHVybiBzdGFydC5iaW5kKChzKSA9PiB7XG4gICAgcmV0dXJuIGVuZC5maWx0ZXIoRnVuLmN1cnJ5KHVuaXZlcnNlLmVxLCBzKSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHsgb25lQWxsIH07XG4iLCJpbXBvcnQgdHlwZSB7IFVuaXZlcnNlIH0gZnJvbSAnQGVwaG94L2Jvc3MnO1xuaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW50ZXJmYWNlIFN1YnNldEFuY2VzdG9yczxFPiB7XG4gIHJlYWRvbmx5IGZpcnN0cGF0aDogRVtdO1xuICByZWFkb25seSBzZWNvbmRwYXRoOiBFW107XG4gIHJlYWRvbmx5IHNoYXJlZDogT3B0aW9uYWw8RT47XG59XG5cbmNvbnN0IGVxID0gPEUsIEQ+KHVuaXZlcnNlOiBVbml2ZXJzZTxFLCBEPiwgaXRlbTogRSk6IChlOiBFKSA9PiBib29sZWFuID0+IHtcbiAgcmV0dXJuIEZ1bi5jdXJyeSh1bml2ZXJzZS5lcSwgaXRlbSk7XG59O1xuXG5jb25zdCB1bnNhZmVTdWJzZXQgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBjb21tb246IEUsIHBzMTogRVtdLCBwczI6IEVbXSk6IE9wdGlvbmFsPEVbXT4gPT4ge1xuICBjb25zdCBjaGlsZHJlbiA9IHVuaXZlcnNlLnByb3BlcnR5KCkuY2hpbGRyZW4oY29tbW9uKTtcbiAgaWYgKHVuaXZlcnNlLmVxKGNvbW1vbiwgcHMxWzBdKSkge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKFsgcHMxWzBdIF0pO1xuICB9XG4gIGlmICh1bml2ZXJzZS5lcShjb21tb24sIHBzMlswXSkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZShbIHBzMlswXSBdKTtcbiAgfVxuXG4gIGNvbnN0IGZpbmRlciA9IChwczogRVtdKSA9PiB7XG4gICAgLy8gcHMgaXMgY2FsY3VsYXRlZCBib3R0b20tdXAsIGJ1dCBsb2dpY2FsbHkgd2UncmUgc2VhcmNoaW5nIHRvcC1kb3duXG4gICAgY29uc3QgdG9wRG93biA9IEFyci5yZXZlcnNlKHBzKTtcblxuICAgIC8vIGZpbmQgdGhlIGNoaWxkIG9mIGNvbW1vbiBpbiB0aGUgcHMgYXJyYXlcbiAgICBjb25zdCBpbmRleCA9IEFyci5maW5kSW5kZXgodG9wRG93biwgZXEodW5pdmVyc2UsIGNvbW1vbikpLmdldE9yKC0xKTtcbiAgICBjb25zdCBpdGVtID0gaW5kZXggPCB0b3BEb3duLmxlbmd0aCAtIDEgPyB0b3BEb3duW2luZGV4ICsgMV0gOiB0b3BEb3duW2luZGV4XTtcblxuICAgIC8vIGZpbmQgdGhlIGluZGV4IG9mIHRoYXQgY2hpbGQgaW4gdGhlIGNvbW1vbiBjaGlsZHJlblxuICAgIHJldHVybiBBcnIuZmluZEluZGV4KGNoaWxkcmVuLCBlcSh1bml2ZXJzZSwgaXRlbSkpO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0SW5kZXggPSBmaW5kZXIocHMxKTtcbiAgY29uc3QgZW5kSW5kZXggPSBmaW5kZXIocHMyKTtcblxuICAvLyBSZXR1cm4gYWxsIGNvbW1vbiBjaGlsZHJlbiBiZXR3ZWVuIGZpcnN0IGFuZCBsYXN0XG4gIHJldHVybiBzdGFydEluZGV4LmJpbmQoKHNJbmRleCkgPT4ge1xuICAgIHJldHVybiBlbmRJbmRleC5tYXAoKGVJbmRleCkgPT4ge1xuICAgICAgLy8gVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIHRoZSByYW5nZSBjb3VsZCBiZSBiYWNrd2FyZHMuXG4gICAgICBjb25zdCBmaXJzdCA9IE1hdGgubWluKHNJbmRleCwgZUluZGV4KTtcbiAgICAgIGNvbnN0IGxhc3QgPSBNYXRoLm1heChzSW5kZXgsIGVJbmRleCk7XG5cbiAgICAgIHJldHVybiBjaGlsZHJlbi5zbGljZShmaXJzdCwgbGFzdCArIDEpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8vIE5vdGU6IHRoaXMgY2FuIGJlIGV4cG9ydGVkIGlmIGl0IGlzIHJlcXVpcmVkIGluIHRoZSBmdXR1cmUuXG5jb25zdCBhbmNlc3RvcnMgPSA8RSwgRD4odW5pdmVyc2U6IFVuaXZlcnNlPEUsIEQ+LCBzdGFydDogRSwgZW5kOiBFLCBpc1Jvb3Q6ICh4OiBFKSA9PiBib29sZWFuID0gRnVuLm5ldmVyKTogU3Vic2V0QW5jZXN0b3JzPEU+ID0+IHtcbiAgLy8gSW5lZmZpY2llbnQgaWYgbm8gaXNSb290IGlzIHN1cHBsaWVkLlxuICAvLyBUT0RPOiBBbmR5IGtub3dzIHRoZXJlIGlzIGEgZ3JhcGgtYmFzZWQgYWxnb3JpdGhtIHRvIGZpbmQgYSBjb21tb24gcGFyZW50LCBidXQgY2FuJ3QgcmVtZW1iZXIgaXRcbiAgLy8gICAgICAgIFRoaXMgYWxzbyBpbmNsdWRlcyBzb21ldGhpbmcgdG8gZ2V0IHRoZSBzdWJzZXQgYWZ0ZXIgZmluZGluZyB0aGUgY29tbW9uIHBhcmVudFxuICBjb25zdCBwczEgPSBbIHN0YXJ0IF0uY29uY2F0KHVuaXZlcnNlLnVwKCkuYWxsKHN0YXJ0KSk7XG4gIGNvbnN0IHBzMiA9IFsgZW5kIF0uY29uY2F0KHVuaXZlcnNlLnVwKCkuYWxsKGVuZCkpO1xuXG4gIGNvbnN0IHBydW5lID0gKHBhdGg6IEVbXSkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gQXJyLmZpbmRJbmRleChwYXRoLCBpc1Jvb3QpO1xuICAgIHJldHVybiBpbmRleC5mb2xkKCgpID0+IHtcbiAgICAgIHJldHVybiBwYXRoO1xuICAgIH0sIChpbmQpID0+IHtcbiAgICAgIHJldHVybiBwYXRoLnNsaWNlKDAsIGluZCArIDEpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHBydW5lZDEgPSBwcnVuZShwczEpO1xuICBjb25zdCBwcnVuZWQyID0gcHJ1bmUocHMyKTtcblxuICBjb25zdCBzaGFyZWQgPSBBcnIuZmluZChwcnVuZWQxLCAoeCkgPT4ge1xuICAgIHJldHVybiBBcnIuZXhpc3RzKHBydW5lZDIsIGVxKHVuaXZlcnNlLCB4KSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgZmlyc3RwYXRoOiBwcnVuZWQxLFxuICAgIHNlY29uZHBhdGg6IHBydW5lZDIsXG4gICAgc2hhcmVkXG4gIH07XG59O1xuXG4vKipcbiAqIEZpbmQgdGhlIGNvbW1vbiBlbGVtZW50IGluIHRoZSBwYXJlbnRzIG9mIHN0YXJ0IGFuZCBlbmQuXG4gKlxuICogVGhlbiByZXR1cm4gYWxsIGNoaWxkcmVuIG9mIHRoZSBjb21tb24gZWxlbWVudCBzdWNoIHRoYXQgc3RhcnQgYW5kIGVuZCBhcmUgaW5jbHVkZWQuXG4gKi9cbmNvbnN0IHN1YnNldCA9IDxFLCBEPih1bml2ZXJzZTogVW5pdmVyc2U8RSwgRD4sIHN0YXJ0OiBFLCBlbmQ6IEUpOiBPcHRpb25hbDxFW10+ID0+IHtcbiAgY29uc3QgYW5jcyA9IGFuY2VzdG9ycyh1bml2ZXJzZSwgc3RhcnQsIGVuZCk7XG4gIHJldHVybiBhbmNzLnNoYXJlZC5iaW5kKChzaGFyZWQpID0+IHtcbiAgICByZXR1cm4gdW5zYWZlU3Vic2V0KHVuaXZlcnNlLCBzaGFyZWQsIGFuY3MuZmlyc3RwYXRoLCBhbmNzLnNlY29uZHBhdGgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIHN1YnNldCxcbiAgYW5jZXN0b3JzXG59O1xuIiwiaW1wb3J0IHsgRnVuLCBPcHRpb25hbCwgVGh1bmsgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEJyb3dzZXIgYXMgQnJvd3NlckNvcmUgfSBmcm9tICcuLi9jb3JlL0Jyb3dzZXInO1xuaW1wb3J0IHR5cGUgeyBPcGVyYXRpbmdTeXN0ZW0gYXMgT3BlcmF0aW5nU3lzdGVtQ29yZSB9IGZyb20gJy4uL2NvcmUvT3BlcmF0aW5nU3lzdGVtJztcbmltcG9ydCB7IFBsYXRmb3JtRGV0ZWN0aW9uIH0gZnJvbSAnLi4vY29yZS9QbGF0Zm9ybURldGVjdGlvbic7XG5pbXBvcnQgdHlwZSB7IERldmljZVR5cGUgYXMgRGV2aWNlVHlwZUNvcmUgfSBmcm9tICcuLi9kZXRlY3QvRGV2aWNlVHlwZSc7XG5cbmV4cG9ydCB0eXBlIEJyb3dzZXIgPSBCcm93c2VyQ29yZTtcbmV4cG9ydCB0eXBlIE9wZXJhdGluZ1N5c3RlbSA9IE9wZXJhdGluZ1N5c3RlbUNvcmU7XG5leHBvcnQgdHlwZSBEZXZpY2VUeXBlID0gRGV2aWNlVHlwZUNvcmU7XG5cbmNvbnN0IG1lZGlhTWF0Y2ggPSAocXVlcnk6IHN0cmluZykgPT4gd2luZG93Lm1hdGNoTWVkaWEocXVlcnkpLm1hdGNoZXM7XG5cbi8vIElNUE9SVEFOVDogTXVzdCBiZSBpbiBhIHRodW5rLCBvdGhlcndpc2Ugcm9sbHVwIHRoaW5rcyBjYWxsaW5nIHRoaXMgaW1tZWRpYXRlbHlcbi8vIGNhdXNlcyBzaWRlIGVmZmVjdHMgYW5kIHdvbid0IHRyZWUgc2hha2UgdGhpcyBhd2F5XG4vLyBOb3RlOiBuYXZpZ2F0b3IudXNlckFnZW50RGF0YSBpcyBub3QgcGFydCBvZiB0aGUgbmF0aXZlIHR5cGVzY3JpcHQgdHlwZXMgeWV0XG5sZXQgcGxhdGZvcm0gPSBUaHVuay5jYWNoZWQoKCkgPT4gUGxhdGZvcm1EZXRlY3Rpb24uZGV0ZWN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LCBPcHRpb25hbC5mcm9tKCgod2luZG93Lm5hdmlnYXRvciBhcyBhbnkpLnVzZXJBZ2VudERhdGEpKSwgbWVkaWFNYXRjaCkpO1xuXG5leHBvcnQgY29uc3QgZGV0ZWN0ID0gKCk6IFBsYXRmb3JtRGV0ZWN0aW9uID0+IHBsYXRmb3JtKCk7XG5cbmV4cG9ydCBjb25zdCBvdmVycmlkZSA9IChvdmVycmlkZXM6IFBhcnRpYWw8UGxhdGZvcm1EZXRlY3Rpb24+KTogdm9pZCA9PiB7XG4gIHBsYXRmb3JtID0gRnVuLmNvbnN0YW50KHtcbiAgICAuLi5kZXRlY3QoKSxcbiAgICAuLi5vdmVycmlkZXNcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHsgUmVzb2x2ZSwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIEdsb2JhbCBmcm9tICcuLi91dGlsL0dsb2JhbCc7XG5cbmNvbnN0IGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuXG4vKlxuICogSUU5IGFuZCBhYm92ZVxuICpcbiAqIE1ETiBubyB1c2Ugb24gdGhpcyBvbmUsIGJ1dCBoZXJlJ3MgdGhlIGxpbmsgYW55d2F5OlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL0hUTUxFbGVtZW50XG4gKi9cbmNvbnN0IHNhbmRIVE1MRWxlbWVudCA9IChzY29wZTogV2luZG93IHwgdW5kZWZpbmVkKSA9PiB7XG4gIHJldHVybiBHbG9iYWwuZ2V0T3JEaWUoJ0hUTUxFbGVtZW50Jywgc2NvcGUpIGFzIHR5cGVvZiBIVE1MRWxlbWVudDtcbn07XG5cbmNvbnN0IGlzUHJvdG90eXBlT2YgPSAoeDogYW55KTogeCBpcyBIVE1MRWxlbWVudCA9PiB7XG4gIC8vIHVzZSBSZXNvbHZlIHRvIGdldCB0aGUgd2luZG93IG9iamVjdCBmb3IgeCBhbmQganVzdCByZXR1cm4gdW5kZWZpbmVkIGlmIGl0IGNhbid0IGZpbmQgaXQuXG4gIC8vIHVuZGVmaW5lZCBzY29wZSBsYXRlciB0cmlnZ2VycyB1c2luZyB0aGUgZ2xvYmFsIHdpbmRvdy5cbiAgY29uc3Qgc2NvcGU6IFdpbmRvdyB8IHVuZGVmaW5lZCA9IFJlc29sdmUucmVzb2x2ZSgnb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldycsIHgpO1xuXG4gIC8vIFRJTlktNzM3NDogV2UgY2FuJ3QgcmVseSBvbiBsb29raW5nIGF0IHRoZSBvd25lciB3aW5kb3cgSFRNTEVsZW1lbnQgYXMgdGhlIGVsZW1lbnQgbWF5IGhhdmVcbiAgLy8gYmVlbiBjb25zdHJ1Y3RlZCBpbiBhIGRpZmZlcmVudCB3aW5kb3cgYW5kIHRoZW4gYXBwZW5kZWQgdG8gdGhlIGN1cnJlbnQgd2luZG93IGRvY3VtZW50LlxuICByZXR1cm4gVHlwZS5pc09iamVjdCh4KSAmJiAoc2FuZEhUTUxFbGVtZW50KHNjb3BlKS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih4KSB8fCAvXkhUTUxcXHcqRWxlbWVudCQvLnRlc3QoZ2V0UHJvdG90eXBlT2YoeCkuY29uc3RydWN0b3IubmFtZSkpO1xufTtcblxuZXhwb3J0IHtcbiAgaXNQcm90b3R5cGVPZlxufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IFZlcnNpb24gfSBmcm9tICcuLi9kZXRlY3QvVmVyc2lvbic7XG5pbXBvcnQgdHlwZSB7IFVhSW5mbyB9IGZyb20gJy4uL2luZm8vVWFJbmZvJztcblxuY29uc3QgZWRnZSA9ICdFZGdlJztcbmNvbnN0IGNocm9taXVtID0gJ0Nocm9taXVtJztcbmNvbnN0IGllID0gJ0lFJztcbmNvbnN0IG9wZXJhID0gJ09wZXJhJztcbmNvbnN0IGZpcmVmb3ggPSAnRmlyZWZveCc7XG5jb25zdCBzYWZhcmkgPSAnU2FmYXJpJztcblxuZXhwb3J0IGludGVyZmFjZSBCcm93c2VyIGV4dGVuZHMgVWFJbmZvIHtcbiAgcmVhZG9ubHkgaXNFZGdlOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0Nocm9taXVtOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0lFOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc09wZXJhOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0ZpcmVmb3g6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzU2FmYXJpOiAoKSA9PiBib29sZWFuO1xufVxuXG5jb25zdCB1bmtub3duID0gKCk6IEJyb3dzZXIgPT4ge1xuICByZXR1cm4gbnUoe1xuICAgIGN1cnJlbnQ6IHVuZGVmaW5lZCxcbiAgICB2ZXJzaW9uOiBWZXJzaW9uLnVua25vd24oKVxuICB9KTtcbn07XG5cbmNvbnN0IG51ID0gKGluZm86IFVhSW5mbyk6IEJyb3dzZXIgPT4ge1xuICBjb25zdCBjdXJyZW50ID0gaW5mby5jdXJyZW50O1xuICBjb25zdCB2ZXJzaW9uID0gaW5mby52ZXJzaW9uO1xuXG4gIGNvbnN0IGlzQnJvd3NlciA9IChuYW1lOiBzdHJpbmcpID0+ICgpOiBib29sZWFuID0+IGN1cnJlbnQgPT09IG5hbWU7XG5cbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50LFxuICAgIHZlcnNpb24sXG5cbiAgICBpc0VkZ2U6IGlzQnJvd3NlcihlZGdlKSxcbiAgICBpc0Nocm9taXVtOiBpc0Jyb3dzZXIoY2hyb21pdW0pLFxuICAgIC8vIE5PVEU6IGlzSWUganVzdCBsb29rcyB0b28gd2VpcmRcbiAgICBpc0lFOiBpc0Jyb3dzZXIoaWUpLFxuICAgIGlzT3BlcmE6IGlzQnJvd3NlcihvcGVyYSksXG4gICAgaXNGaXJlZm94OiBpc0Jyb3dzZXIoZmlyZWZveCksXG4gICAgaXNTYWZhcmk6IGlzQnJvd3NlcihzYWZhcmkpXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgQnJvd3NlciA9IHtcbiAgdW5rbm93bixcbiAgbnUsXG4gIGVkZ2U6IEZ1bi5jb25zdGFudChlZGdlKSxcbiAgY2hyb21pdW06IEZ1bi5jb25zdGFudChjaHJvbWl1bSksXG4gIGllOiBGdW4uY29uc3RhbnQoaWUpLFxuICBvcGVyYTogRnVuLmNvbnN0YW50KG9wZXJhKSxcbiAgZmlyZWZveDogRnVuLmNvbnN0YW50KGZpcmVmb3gpLFxuICBzYWZhcmk6IEZ1bi5jb25zdGFudChzYWZhcmkpXG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gJy4uL2RldGVjdC9WZXJzaW9uJztcbmltcG9ydCB0eXBlIHsgVWFJbmZvIH0gZnJvbSAnLi4vaW5mby9VYUluZm8nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGluZ1N5c3RlbSBleHRlbmRzIFVhSW5mbyB7XG4gIHJlYWRvbmx5IGlzV2luZG93czogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNpT1M6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzQW5kcm9pZDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNNYWNPUzogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNMaW51eDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNTb2xhcmlzOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc0ZyZWVCU0Q6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzQ2hyb21lT1M6ICgpID0+IGJvb2xlYW47XG59XG5cbmNvbnN0IHdpbmRvd3MgPSAnV2luZG93cyc7XG5jb25zdCBpb3MgPSAnaU9TJztcbmNvbnN0IGFuZHJvaWQgPSAnQW5kcm9pZCc7XG5jb25zdCBsaW51eCA9ICdMaW51eCc7XG5jb25zdCBtYWNvcyA9ICdtYWNPUyc7XG5jb25zdCBzb2xhcmlzID0gJ1NvbGFyaXMnO1xuY29uc3QgZnJlZWJzZCA9ICdGcmVlQlNEJztcbmNvbnN0IGNocm9tZW9zID0gJ0Nocm9tZU9TJztcblxuLy8gVGhvdWdoIHRoZXJlIGlzIGEgYml0IG9mIGR1cGUgd2l0aCB0aGlzIGFuZCBCcm93c2VyLCB0cnlpbmcgdG9cbi8vIHJldXNlIGNvZGUgbWFrZXMgaXQgbXVjaCBoYXJkZXIgdG8gZm9sbG93IGFuZCBjaGFuZ2UuXG5cbmNvbnN0IHVua25vd24gPSAoKTogT3BlcmF0aW5nU3lzdGVtID0+IHtcbiAgcmV0dXJuIG51KHtcbiAgICBjdXJyZW50OiB1bmRlZmluZWQsXG4gICAgdmVyc2lvbjogVmVyc2lvbi51bmtub3duKClcbiAgfSk7XG59O1xuXG5jb25zdCBudSA9IChpbmZvOiBVYUluZm8pOiBPcGVyYXRpbmdTeXN0ZW0gPT4ge1xuICBjb25zdCBjdXJyZW50ID0gaW5mby5jdXJyZW50O1xuICBjb25zdCB2ZXJzaW9uID0gaW5mby52ZXJzaW9uO1xuXG4gIGNvbnN0IGlzT1MgPSAobmFtZTogc3RyaW5nKSA9PiAoKTogYm9vbGVhbiA9PiBjdXJyZW50ID09PSBuYW1lO1xuXG4gIHJldHVybiB7XG4gICAgY3VycmVudCxcbiAgICB2ZXJzaW9uLFxuXG4gICAgaXNXaW5kb3dzOiBpc09TKHdpbmRvd3MpLFxuICAgIC8vIFRPRE86IEZpeCBjYXBpdGFsaXNhdGlvblxuICAgIGlzaU9TOiBpc09TKGlvcyksXG4gICAgaXNBbmRyb2lkOiBpc09TKGFuZHJvaWQpLFxuICAgIGlzTWFjT1M6IGlzT1MobWFjb3MpLFxuICAgIGlzTGludXg6IGlzT1MobGludXgpLFxuICAgIGlzU29sYXJpczogaXNPUyhzb2xhcmlzKSxcbiAgICBpc0ZyZWVCU0Q6IGlzT1MoZnJlZWJzZCksXG4gICAgaXNDaHJvbWVPUzogaXNPUyhjaHJvbWVvcylcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBPcGVyYXRpbmdTeXN0ZW0gPSB7XG4gIHVua25vd24sXG4gIG51LFxuXG4gIHdpbmRvd3M6IEZ1bi5jb25zdGFudCh3aW5kb3dzKSxcbiAgaW9zOiBGdW4uY29uc3RhbnQoaW9zKSxcbiAgYW5kcm9pZDogRnVuLmNvbnN0YW50KGFuZHJvaWQpLFxuICBsaW51eDogRnVuLmNvbnN0YW50KGxpbnV4KSxcbiAgbWFjb3M6IEZ1bi5jb25zdGFudChtYWNvcyksXG4gIHNvbGFyaXM6IEZ1bi5jb25zdGFudChzb2xhcmlzKSxcbiAgZnJlZWJzZDogRnVuLmNvbnN0YW50KGZyZWVic2QpLFxuICBjaHJvbWVvczogRnVuLmNvbnN0YW50KGNocm9tZW9zKVxufTtcbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBEZXZpY2VUeXBlIH0gZnJvbSAnLi4vZGV0ZWN0L0RldmljZVR5cGUnO1xuaW1wb3J0ICogYXMgVWFEYXRhIGZyb20gJy4uL2RldGVjdC9VYURhdGEnO1xuaW1wb3J0ICogYXMgVWFTdHJpbmcgZnJvbSAnLi4vZGV0ZWN0L1VhU3RyaW5nJztcbmltcG9ydCB7IFBsYXRmb3JtSW5mbyB9IGZyb20gJy4uL2luZm8vUGxhdGZvcm1JbmZvJztcblxuaW1wb3J0IHsgQnJvd3NlciB9IGZyb20gJy4vQnJvd3Nlcic7XG5pbXBvcnQgeyBPcGVyYXRpbmdTeXN0ZW0gfSBmcm9tICcuL09wZXJhdGluZ1N5c3RlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhdGZvcm1EZXRlY3Rpb24ge1xuICByZWFkb25seSBicm93c2VyOiBCcm93c2VyO1xuICByZWFkb25seSBvczogT3BlcmF0aW5nU3lzdGVtO1xuICByZWFkb25seSBkZXZpY2VUeXBlOiBEZXZpY2VUeXBlO1xufVxuXG5jb25zdCBkZXRlY3QgPSAodXNlckFnZW50OiBzdHJpbmcsIHVzZXJBZ2VudERhdGFPcHQ6IE9wdGlvbmFsPFVhRGF0YS5Vc2VyQWdlbnREYXRhPiwgbWVkaWFNYXRjaDogKHF1ZXJ5OiBzdHJpbmcpID0+IGJvb2xlYW4pOiBQbGF0Zm9ybURldGVjdGlvbiA9PiB7XG4gIGNvbnN0IGJyb3dzZXJzID0gUGxhdGZvcm1JbmZvLmJyb3dzZXJzKCk7XG4gIGNvbnN0IG9zZXMgPSBQbGF0Zm9ybUluZm8ub3NlcygpO1xuXG4gIGNvbnN0IGJyb3dzZXIgPSB1c2VyQWdlbnREYXRhT3B0LmJpbmQoKHVzZXJBZ2VudERhdGEpID0+IFVhRGF0YS5kZXRlY3RCcm93c2VyKGJyb3dzZXJzLCB1c2VyQWdlbnREYXRhKSlcbiAgICAub3JUaHVuaygoKSA9PiBVYVN0cmluZy5kZXRlY3RCcm93c2VyKGJyb3dzZXJzLCB1c2VyQWdlbnQpKVxuICAgIC5mb2xkKEJyb3dzZXIudW5rbm93biwgQnJvd3Nlci5udSk7XG5cbiAgY29uc3Qgb3MgPSBVYVN0cmluZy5kZXRlY3RPcyhvc2VzLCB1c2VyQWdlbnQpLmZvbGQoXG4gICAgT3BlcmF0aW5nU3lzdGVtLnVua25vd24sXG4gICAgT3BlcmF0aW5nU3lzdGVtLm51XG4gICk7XG4gIGNvbnN0IGRldmljZVR5cGUgPSBEZXZpY2VUeXBlKG9zLCBicm93c2VyLCB1c2VyQWdlbnQsIG1lZGlhTWF0Y2gpO1xuXG4gIHJldHVybiB7XG4gICAgYnJvd3NlcixcbiAgICBvcyxcbiAgICBkZXZpY2VUeXBlXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgUGxhdGZvcm1EZXRlY3Rpb24gPSB7XG4gIGRldGVjdFxufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgQnJvd3NlciB9IGZyb20gJy4uL2NvcmUvQnJvd3Nlcic7XG5pbXBvcnQgdHlwZSB7IE9wZXJhdGluZ1N5c3RlbSB9IGZyb20gJy4uL2NvcmUvT3BlcmF0aW5nU3lzdGVtJztcblxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VUeXBlIHtcbiAgcmVhZG9ubHkgaXNpUGFkOiAoKSA9PiBib29sZWFuO1xuICByZWFkb25seSBpc2lQaG9uZTogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNUYWJsZXQ6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzUGhvbmU6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzVG91Y2g6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzQW5kcm9pZDogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNpT1M6ICgpID0+IGJvb2xlYW47XG4gIHJlYWRvbmx5IGlzV2ViVmlldzogKCkgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNEZXNrdG9wOiAoKSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgRGV2aWNlVHlwZSA9IChvczogT3BlcmF0aW5nU3lzdGVtLCBicm93c2VyOiBCcm93c2VyLCB1c2VyQWdlbnQ6IHN0cmluZywgbWVkaWFNYXRjaDogKHF1ZXJ5OiBzdHJpbmcpID0+IGJvb2xlYW4pOiBEZXZpY2VUeXBlID0+IHtcbiAgY29uc3QgaXNpUGFkID0gb3MuaXNpT1MoKSAmJiAvaXBhZC9pLnRlc3QodXNlckFnZW50KSA9PT0gdHJ1ZTtcbiAgY29uc3QgaXNpUGhvbmUgPSBvcy5pc2lPUygpICYmICFpc2lQYWQ7XG4gIGNvbnN0IGlzTW9iaWxlID0gb3MuaXNpT1MoKSB8fCBvcy5pc0FuZHJvaWQoKTtcbiAgY29uc3QgaXNUb3VjaCA9IGlzTW9iaWxlIHx8IG1lZGlhTWF0Y2goJyhwb2ludGVyOmNvYXJzZSknKTtcbiAgY29uc3QgaXNUYWJsZXQgPSBpc2lQYWQgfHwgIWlzaVBob25lICYmIGlzTW9iaWxlICYmIG1lZGlhTWF0Y2goJyhtaW4tZGV2aWNlLXdpZHRoOjc2OHB4KScpO1xuICBjb25zdCBpc1Bob25lID0gaXNpUGhvbmUgfHwgaXNNb2JpbGUgJiYgIWlzVGFibGV0O1xuXG4gIGNvbnN0IGlPU3dlYnZpZXcgPSBicm93c2VyLmlzU2FmYXJpKCkgJiYgb3MuaXNpT1MoKSAmJiAvc2FmYXJpL2kudGVzdCh1c2VyQWdlbnQpID09PSBmYWxzZTtcbiAgY29uc3QgaXNEZXNrdG9wID0gIWlzUGhvbmUgJiYgIWlzVGFibGV0ICYmICFpT1N3ZWJ2aWV3O1xuXG4gIHJldHVybiB7XG4gICAgaXNpUGFkOiBGdW4uY29uc3RhbnQoaXNpUGFkKSxcbiAgICBpc2lQaG9uZTogRnVuLmNvbnN0YW50KGlzaVBob25lKSxcbiAgICBpc1RhYmxldDogRnVuLmNvbnN0YW50KGlzVGFibGV0KSxcbiAgICBpc1Bob25lOiBGdW4uY29uc3RhbnQoaXNQaG9uZSksXG4gICAgaXNUb3VjaDogRnVuLmNvbnN0YW50KGlzVG91Y2gpLFxuICAgIGlzQW5kcm9pZDogb3MuaXNBbmRyb2lkLFxuICAgIGlzaU9TOiBvcy5pc2lPUyxcbiAgICBpc1dlYlZpZXc6IEZ1bi5jb25zdGFudChpT1N3ZWJ2aWV3KSxcbiAgICBpc0Rlc2t0b3A6IEZ1bi5jb25zdGFudChpc0Rlc2t0b3ApXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgQXJyLCB0eXBlIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBQbGF0Zm9ybUluZm8gfSBmcm9tICcuLi9pbmZvL1BsYXRmb3JtSW5mbyc7XG5pbXBvcnQgdHlwZSB7IFVhSW5mbyB9IGZyb20gJy4uL2luZm8vVWFJbmZvJztcblxuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gJy4vVmVyc2lvbic7XG5cbi8vIFRoZXJlIGFyZSBubyBuYXRpdmUgdHlwZXNjcmlwdCB0eXBlcyBmb3IgbmF2aWdhdG9yLlVzZXJBZ2VudERhdGEgYXQgdGhpcyBzdGFnZSBzbyBoYXZlIHRvIG1hbnVhbGx5IGRlZmluZSBpdFxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJBZ2VudERhdGFCcmFuZCB7XG4gIHJlYWRvbmx5IGJyYW5kOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHZlcnNpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyQWdlbnREYXRhIHtcbiAgcmVhZG9ubHkgYnJhbmRzOiBVc2VyQWdlbnREYXRhQnJhbmRbXTtcbiAgcmVhZG9ubHkgbW9iaWxlOiBib29sZWFuO1xufVxuXG5jb25zdCBkZXRlY3RCcm93c2VyID0gKGJyb3dzZXJzOiBQbGF0Zm9ybUluZm9bXSwgdXNlckFnZW50RGF0YTogVXNlckFnZW50RGF0YSk6IE9wdGlvbmFsPFVhSW5mbz4gPT4ge1xuICByZXR1cm4gQXJyLmZpbmRNYXA8VXNlckFnZW50RGF0YUJyYW5kLCBVYUluZm8+KHVzZXJBZ2VudERhdGEuYnJhbmRzLCAodWFCcmFuZCkgPT4ge1xuICAgIGNvbnN0IGxjQnJhbmQgPSB1YUJyYW5kLmJyYW5kLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIEFyci5maW5kKGJyb3dzZXJzLCAoYnJvd3NlcikgPT4gbGNCcmFuZCA9PT0gYnJvd3Nlci5icmFuZD8udG9Mb3dlckNhc2UoKSlcbiAgICAgIC5tYXAoKGluZm8pID0+ICh7XG4gICAgICAgIGN1cnJlbnQ6IGluZm8ubmFtZSxcbiAgICAgICAgdmVyc2lvbjogVmVyc2lvbi5udShwYXJzZUludCh1YUJyYW5kLnZlcnNpb24sIDEwKSwgMClcbiAgICAgIH0pKTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBkZXRlY3RCcm93c2VyXG59O1xuIiwiaW1wb3J0IHsgQXJyLCB0eXBlIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBQbGF0Zm9ybUluZm8gfSBmcm9tICcuLi9pbmZvL1BsYXRmb3JtSW5mbyc7XG5pbXBvcnQgdHlwZSB7IFVhSW5mbyB9IGZyb20gJy4uL2luZm8vVWFJbmZvJztcblxuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gJy4vVmVyc2lvbic7XG5cbmNvbnN0IGRldGVjdCA9IChjYW5kaWRhdGVzOiBQbGF0Zm9ybUluZm9bXSwgdXNlckFnZW50OiBhbnkpOiBPcHRpb25hbDxQbGF0Zm9ybUluZm8+ID0+IHtcbiAgY29uc3QgYWdlbnQgPSBTdHJpbmcodXNlckFnZW50KS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gQXJyLmZpbmQoY2FuZGlkYXRlcywgKGNhbmRpZGF0ZSkgPT4ge1xuICAgIHJldHVybiBjYW5kaWRhdGUuc2VhcmNoKGFnZW50KTtcbiAgfSk7XG59O1xuXG4vLyBUaGV5IChicm93c2VyIGFuZCBvcykgYXJlIHRoZSBzYW1lIGF0IHRoZSBtb21lbnQsIGJ1dCB0aGV5IG1pZ2h0XG4vLyBub3Qgc3RheSB0aGF0IHdheS5cbmNvbnN0IGRldGVjdEJyb3dzZXIgPSAoYnJvd3NlcnM6IFBsYXRmb3JtSW5mb1tdLCB1c2VyQWdlbnQ6IGFueSk6IE9wdGlvbmFsPFVhSW5mbz4gPT4ge1xuICByZXR1cm4gZGV0ZWN0KGJyb3dzZXJzLCB1c2VyQWdlbnQpLm1hcCgoYnJvd3Nlcik6IFVhSW5mbyA9PiB7XG4gICAgY29uc3QgdmVyc2lvbiA9IFZlcnNpb24uZGV0ZWN0KGJyb3dzZXIudmVyc2lvblJlZ2V4ZXMsIHVzZXJBZ2VudCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGN1cnJlbnQ6IGJyb3dzZXIubmFtZSxcbiAgICAgIHZlcnNpb25cbiAgICB9O1xuICB9KTtcbn07XG5cbmNvbnN0IGRldGVjdE9zID0gKG9zZXM6IFBsYXRmb3JtSW5mb1tdLCB1c2VyQWdlbnQ6IGFueSk6IE9wdGlvbmFsPFVhSW5mbz4gPT4ge1xuICByZXR1cm4gZGV0ZWN0KG9zZXMsIHVzZXJBZ2VudCkubWFwKChvcyk6IFVhSW5mbyA9PiB7XG4gICAgY29uc3QgdmVyc2lvbiA9IFZlcnNpb24uZGV0ZWN0KG9zLnZlcnNpb25SZWdleGVzLCB1c2VyQWdlbnQpO1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50OiBvcy5uYW1lLFxuICAgICAgdmVyc2lvblxuICAgIH07XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgZGV0ZWN0QnJvd3NlcixcbiAgZGV0ZWN0T3Ncbn07XG4iLCJleHBvcnQgaW50ZXJmYWNlIFZlcnNpb24ge1xuICByZWFkb25seSBtYWpvcjogbnVtYmVyO1xuICByZWFkb25seSBtaW5vcjogbnVtYmVyO1xufVxuXG5jb25zdCBmaXJzdE1hdGNoID0gKHJlZ2V4ZXM6IFJlZ0V4cFtdLCBzOiBzdHJpbmcpOiBSZWdFeHAgfCB1bmRlZmluZWQgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJlZ2V4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB4ID0gcmVnZXhlc1tpXTtcbiAgICBpZiAoeC50ZXN0KHMpKSB7XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IGZpbmQgPSAocmVnZXhlczogUmVnRXhwW10sIGFnZW50OiBzdHJpbmcpOiBWZXJzaW9uID0+IHtcbiAgY29uc3QgciA9IGZpcnN0TWF0Y2gocmVnZXhlcywgYWdlbnQpO1xuICBpZiAoIXIpIHtcbiAgICByZXR1cm4geyBtYWpvcjogMCwgbWlub3I6IDAgfTtcbiAgfVxuICBjb25zdCBncm91cCA9IChpOiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4gTnVtYmVyKGFnZW50LnJlcGxhY2UociwgJyQnICsgaSkpO1xuICB9O1xuICByZXR1cm4gbnUoZ3JvdXAoMSksIGdyb3VwKDIpKTtcbn07XG5cbmNvbnN0IGRldGVjdCA9ICh2ZXJzaW9uUmVnZXhlczogUmVnRXhwW10sIGFnZW50OiBhbnkpOiBWZXJzaW9uID0+IHtcbiAgY29uc3QgY2xlYW5lZEFnZW50ID0gU3RyaW5nKGFnZW50KS50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmICh2ZXJzaW9uUmVnZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdW5rbm93bigpO1xuICB9XG4gIHJldHVybiBmaW5kKHZlcnNpb25SZWdleGVzLCBjbGVhbmVkQWdlbnQpO1xufTtcblxuY29uc3QgdW5rbm93biA9ICgpOiBWZXJzaW9uID0+IHtcbiAgcmV0dXJuIG51KDAsIDApO1xufTtcblxuY29uc3QgbnUgPSAobWFqb3I6IG51bWJlciwgbWlub3I6IG51bWJlcik6IFZlcnNpb24gPT4ge1xuICByZXR1cm4geyBtYWpvciwgbWlub3IgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBWZXJzaW9uID0ge1xuICBudSxcbiAgZGV0ZWN0LFxuICB1bmtub3duXG59O1xuIiwiaW1wb3J0IHsgRnVuLCBTdHJpbmdzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuZXhwb3J0IGludGVyZmFjZSBQbGF0Zm9ybUluZm8ge1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHZlcnNpb25SZWdleGVzOiBSZWdFeHBbXTtcbiAgcmVhZG9ubHkgc2VhcmNoOiAodWFzdHJpbmc6IHN0cmluZykgPT4gYm9vbGVhbjtcbiAgcmVhZG9ubHkgYnJhbmQ/OiBzdHJpbmc7XG59XG5cbmNvbnN0IG5vcm1hbFZlcnNpb25SZWdleCA9IC8uKj92ZXJzaW9uXFwvXFwgPyhbMC05XSspXFwuKFswLTldKykuKi87XG5cbmNvbnN0IGNoZWNrQ29udGFpbnMgPSAodGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuICh1YXN0cmluZzogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsIHRhcmdldCk7XG4gIH07XG59O1xuXG5jb25zdCBicm93c2VyczogUGxhdGZvcm1JbmZvW10gPSBbXG4gIC8vIFRoaXMgaXMgbGVnYWN5IEVkZ2VcbiAge1xuICAgIG5hbWU6ICdFZGdlJyxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/ZWRnZVxcLyA/KFswLTldKylcXC4oWzAtOV0rKSQvIF0sXG4gICAgc2VhcmNoOiAodWFzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnZWRnZS8nKSAmJiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnY2hyb21lJykgJiYgU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ3NhZmFyaScpICYmIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdhcHBsZXdlYmtpdCcpO1xuICAgIH1cbiAgfSxcbiAgLy8gVGhpcyBpcyBHb29nbGUgQ2hyb21lIGFuZCBDaHJvbWl1bSBFZGdlXG4gIHtcbiAgICBuYW1lOiAnQ2hyb21pdW0nLFxuICAgIGJyYW5kOiAnQ2hyb21pdW0nLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIC8uKj9jaHJvbWVcXC8oWzAtOV0rKVxcLihbMC05XSspLiovLCBub3JtYWxWZXJzaW9uUmVnZXggXSxcbiAgICBzZWFyY2g6ICh1YXN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdjaHJvbWUnKSAmJiAhU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ2Nocm9tZWZyYW1lJyk7XG4gICAgfVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0lFJyxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/bXNpZVxcID8oWzAtOV0rKVxcLihbMC05XSspLiovLCAvLio/cnY6KFswLTldKylcXC4oWzAtOV0rKS4qLyBdLFxuICAgIHNlYXJjaDogKHVhc3RyaW5nKSA9PiB7XG4gICAgICByZXR1cm4gU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ21zaWUnKSB8fCBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAndHJpZGVudCcpO1xuICAgIH1cbiAgfSxcbiAgLy8gSU5WRVNUSUdBVEU6IElzIHRoaXMgc3RpbGwgdGhlIE9wZXJhIHVzZXIgYWdlbnQ/XG4gIHtcbiAgICBuYW1lOiAnT3BlcmEnLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIG5vcm1hbFZlcnNpb25SZWdleCwgLy4qP29wZXJhXFwvKFswLTldKylcXC4oWzAtOV0rKS4qLyBdLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnb3BlcmEnKVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0ZpcmVmb3gnLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIC8uKj9maXJlZm94XFwvXFwgPyhbMC05XSspXFwuKFswLTldKykuKi8gXSxcbiAgICBzZWFyY2g6IGNoZWNrQ29udGFpbnMoJ2ZpcmVmb3gnKVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1NhZmFyaScsXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgbm9ybWFsVmVyc2lvblJlZ2V4LCAvLio/Y3B1IG9zIChbMC05XSspXyhbMC05XSspLiovIF0sXG4gICAgc2VhcmNoOiAodWFzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiAoU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ3NhZmFyaScpIHx8IFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdtb2JpbGUvJykpICYmIFN0cmluZ3MuY29udGFpbnModWFzdHJpbmcsICdhcHBsZXdlYmtpdCcpO1xuICAgIH1cbiAgfVxuXTtcblxuY29uc3Qgb3NlczogUGxhdGZvcm1JbmZvW10gPSBbXG4gIHtcbiAgICBuYW1lOiAnV2luZG93cycsXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCd3aW4nKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/d2luZG93c1xcIG50XFwgPyhbMC05XSspXFwuKFswLTldKykuKi8gXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ2lPUycsXG4gICAgc2VhcmNoOiAodWFzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBTdHJpbmdzLmNvbnRhaW5zKHVhc3RyaW5nLCAnaXBob25lJykgfHwgU3RyaW5ncy5jb250YWlucyh1YXN0cmluZywgJ2lwYWQnKTtcbiAgICB9LFxuICAgIHZlcnNpb25SZWdleGVzOiBbIC8uKj92ZXJzaW9uXFwvXFwgPyhbMC05XSspXFwuKFswLTldKykuKi8sIC8uKmNwdSBvcyAoWzAtOV0rKV8oWzAtOV0rKS4qLywgLy4qY3B1IGlwaG9uZSBvcyAoWzAtOV0rKV8oWzAtOV0rKS4qLyBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQW5kcm9pZCcsXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCdhbmRyb2lkJyksXG4gICAgdmVyc2lvblJlZ2V4ZXM6IFsgLy4qP2FuZHJvaWRcXCA/KFswLTldKylcXC4oWzAtOV0rKS4qLyBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnbWFjT1MnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnbWFjIG9zIHgnKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyAvLio/bWFjXFwgb3NcXCB4XFwgPyhbMC05XSspXyhbMC05XSspLiovIF1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMaW51eCcsXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCdsaW51eCcpLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIF1cbiAgfSxcbiAgeyBuYW1lOiAnU29sYXJpcycsXG4gICAgc2VhcmNoOiBjaGVja0NvbnRhaW5zKCdzdW5vcycpLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIF1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdGcmVlQlNEJyxcbiAgICBzZWFyY2g6IGNoZWNrQ29udGFpbnMoJ2ZyZWVic2QnKSxcbiAgICB2ZXJzaW9uUmVnZXhlczogWyBdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQ2hyb21lT1MnLFxuICAgIHNlYXJjaDogY2hlY2tDb250YWlucygnY3JvcycpLFxuICAgIHZlcnNpb25SZWdleGVzOiBbIC8uKj9jaHJvbWVcXC8oWzAtOV0rKVxcLihbMC05XSspLiovIF1cbiAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IFBsYXRmb3JtSW5mbyA9IHtcbiAgYnJvd3NlcnM6IEZ1bi5jb25zdGFudChicm93c2VycyksXG4gIG9zZXM6IEZ1bi5jb25zdGFudChvc2VzKVxufTtcbiIsImltcG9ydCB7IFJlc29sdmUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCB1bnNhZmUgPSA8VD4obmFtZTogc3RyaW5nLCBzY29wZT86IHt9KTogVCB8IHVuZGVmaW5lZCA9PiB7XG4gIHJldHVybiBSZXNvbHZlLnJlc29sdmUobmFtZSwgc2NvcGUpO1xufTtcblxuY29uc3QgZ2V0T3JEaWUgPSA8VD4obmFtZTogc3RyaW5nLCBzY29wZT86IHt9KTogVCA9PiB7XG4gIGNvbnN0IGFjdHVhbCA9IHVuc2FmZTxUPihuYW1lLCBzY29wZSk7XG5cbiAgaWYgKGFjdHVhbCA9PT0gdW5kZWZpbmVkIHx8IGFjdHVhbCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihuYW1lICsgJyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgYnJvd3NlcicpO1xuICB9XG4gIHJldHVybiBhY3R1YWw7XG59O1xuXG5leHBvcnQge1xuICBnZXRPckRpZVxufTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgU2l6ZXMgZnJvbSAnLi4vcmVzaXplL1NpemVzJztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuY29uc3QgaGFsdmUgPSAobWFpbjogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50Piwgb3RoZXI6IFN1Z2FyRWxlbWVudDxDZWxsRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgLy8gT25seSBzZXQgd2lkdGggb24gdGhlIG5ldyBjZWxsIGlmIHdlIGhhdmUgYSBjb2xzcGFuIG9mIDEgKG9yIG5vIGNvbHNwYW4pIGFzIHdlIGNhbiBvbmx5IHNhZmVseSBkbyB0aGF0IGZvciBjZWxsc1xuICAvLyB0aGF0IGFyZSBhIHNpbmdsZSBjb2x1bW4sIHNpbmNlIHdlIGRvbid0IGtub3cgdGhlIGluZGl2aWR1YWwgY29sdW1uIHdpZHRocyBmb3IgYSBjZWxsIHdpdGggYSBjb2xzcGFuLlxuICAvLyBJbnN0ZWFkLCB3ZSdsbCByZWx5IG9uIHRoZSBhZGp1c3RtZW50cy9wb3N0QWN0aW9uIGxvZ2ljIHRvIHNldCB0aGUgd2lkdGhzIGJhc2VkIG9uIG90aGVyIGNlbGxzIGluIHRoZSBjb2x1bW5cbiAgaWYgKCFDZWxsVXRpbHMuaGFzQ29sc3BhbihtYWluKSkge1xuICAgIGNvbnN0IHdpZHRoID0gU2l6ZXMuZ2V0R2VuZXJpY1dpZHRoKG1haW4pO1xuICAgIHdpZHRoLmVhY2goKHcpID0+IHtcbiAgICAgIGNvbnN0IG5ld1dpZHRoID0gdy52YWx1ZSAvIDI7XG4gICAgICBTaXplcy5zZXRHZW5lcmljV2lkdGgobWFpbiwgbmV3V2lkdGgsIHcudW5pdCk7XG4gICAgICBTaXplcy5zZXRHZW5lcmljV2lkdGgob3RoZXIsIG5ld1dpZHRoLCB3LnVuaXQpO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQge1xuICBoYWx2ZVxufTtcbiIsImltcG9ydCB7IEFyciwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIEluc2VydEFsbCwgUmVwbGljYXRpb24sIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IG9uVW5sb2NrZWRDZWxscywgdHlwZSBUYXJnZXRTZWxlY3Rpb24gfSBmcm9tICcuLi9tb2RlbC9SdW5PcGVyYXRpb24nO1xuaW1wb3J0ICogYXMgQ2VsbFV0aWxzIGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ2VsbEVsZW1lbnQgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgdHlwZSB7IENvbHVtbkV4dCwgRGV0YWlsRXh0IH0gZnJvbSAnLi9TdHJ1Y3RzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4vV2FyZWhvdXNlJztcblxuY29uc3QgY29uc3RyYWluU3BhbiA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+LCBwcm9wZXJ0eTogJ2NvbHNwYW4nIHwgJ3Jvd3NwYW4nIHwgJ3NwYW4nLCB2YWx1ZTogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRDb2xzcGFuID0gQ2VsbFV0aWxzLmdldEF0dHJWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSwgMSk7XG4gIGlmICh2YWx1ZSA9PT0gMSB8fCBjdXJyZW50Q29sc3BhbiA8PSAxKSB7XG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCBwcm9wZXJ0eSk7XG4gIH0gZWxzZSB7XG4gICAgQXR0cmlidXRlLnNldChlbGVtZW50LCBwcm9wZXJ0eSwgTWF0aC5taW4odmFsdWUsIGN1cnJlbnRDb2xzcGFuKSk7XG4gIH1cbn07XG5cbmNvbnN0IGlzQ29sSW5SYW5nZSA9IChtaW5Db2xSYW5nZTogbnVtYmVyLCBtYXhDb2xSYW5nZTogbnVtYmVyKSA9PlxuICAoY2VsbDogQ29sdW1uRXh0IHwgRGV0YWlsRXh0KSA9PiB7XG4gICAgY29uc3QgZW5kQ29sID0gY2VsbC5jb2x1bW4gKyBjZWxsLmNvbHNwYW4gLSAxO1xuICAgIGNvbnN0IHN0YXJ0Q29sID0gY2VsbC5jb2x1bW47XG4gICAgcmV0dXJuIGVuZENvbCA+PSBtaW5Db2xSYW5nZSAmJiBzdGFydENvbCA8IG1heENvbFJhbmdlO1xuICB9O1xuXG5jb25zdCBnZW5lcmF0ZUNvbEdyb3VwID0gKGhvdXNlOiBXYXJlaG91c2UsIG1pbkNvbFJhbmdlOiBudW1iZXIsIG1heENvbFJhbmdlOiBudW1iZXIpOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9PiB7XG4gIGlmIChXYXJlaG91c2UuaGFzQ29sdW1ucyhob3VzZSkpIHtcbiAgICBjb25zdCBjb2xzVG9Db3B5ID0gQXJyLmZpbHRlcihXYXJlaG91c2UuanVzdENvbHVtbnMoaG91c2UpLCBpc0NvbEluUmFuZ2UobWluQ29sUmFuZ2UsIG1heENvbFJhbmdlKSk7XG4gICAgY29uc3QgY29waWVkQ29scyA9IEFyci5tYXAoY29sc1RvQ29weSwgKGMpID0+IHtcbiAgICAgIGNvbnN0IGNsb25lZENvbCA9IFJlcGxpY2F0aW9uLmRlZXAoYy5lbGVtZW50KTtcbiAgICAgIGNvbnN0cmFpblNwYW4oY2xvbmVkQ29sLCAnc3BhbicsIG1heENvbFJhbmdlIC0gbWluQ29sUmFuZ2UpO1xuICAgICAgcmV0dXJuIGNsb25lZENvbDtcbiAgICB9KTtcbiAgICBjb25zdCBmYWtlQ29sZ3JvdXAgPSBTdWdhckVsZW1lbnQuZnJvbVRhZygnY29sZ3JvdXAnKTtcbiAgICBJbnNlcnRBbGwuYXBwZW5kKGZha2VDb2xncm91cCwgY29waWVkQ29scyk7XG4gICAgcmV0dXJuIFsgZmFrZUNvbGdyb3VwIF07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5jb25zdCBnZW5lcmF0ZVJvd3MgPSAoaG91c2U6IFdhcmVob3VzZSwgbWluQ29sUmFuZ2U6IG51bWJlciwgbWF4Q29sUmFuZ2U6IG51bWJlcik6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50PltdID0+XG4gIEFyci5tYXAoaG91c2UuYWxsLCAocm93KSA9PiB7XG4gICAgY29uc3QgY2VsbHNUb0NvcHkgPSBBcnIuZmlsdGVyKHJvdy5jZWxscywgaXNDb2xJblJhbmdlKG1pbkNvbFJhbmdlLCBtYXhDb2xSYW5nZSkpO1xuICAgIGNvbnN0IGNvcGllZENlbGxzID0gQXJyLm1hcChjZWxsc1RvQ29weSwgKGNlbGwpID0+IHtcbiAgICAgIGNvbnN0IGNsb25lZENlbGwgPSBSZXBsaWNhdGlvbi5kZWVwKGNlbGwuZWxlbWVudCk7XG4gICAgICBjb25zdHJhaW5TcGFuKGNsb25lZENlbGwsICdjb2xzcGFuJywgbWF4Q29sUmFuZ2UgLSBtaW5Db2xSYW5nZSk7XG4gICAgICByZXR1cm4gY2xvbmVkQ2VsbDtcbiAgICB9KTtcbiAgICBjb25zdCBmYWtlVFIgPSBTdWdhckVsZW1lbnQuZnJvbVRhZygndHInKTtcbiAgICBJbnNlcnRBbGwuYXBwZW5kKGZha2VUUiwgY29waWVkQ2VsbHMpO1xuICAgIHJldHVybiBmYWtlVFI7XG4gIH0pO1xuXG5jb25zdCBjb3B5Q29scyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXT4gPT4ge1xuICBjb25zdCBob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBkZXRhaWxzID0gb25VbmxvY2tlZENlbGxzKGhvdXNlLCB0YXJnZXQpO1xuICByZXR1cm4gZGV0YWlscy5tYXAoKHNlbGVjdGVkQ2VsbHMpOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10gPT4ge1xuICAgIGNvbnN0IGxhc3RTZWxlY3RlZENlbGwgPSBzZWxlY3RlZENlbGxzW3NlbGVjdGVkQ2VsbHMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbWluQ29sUmFuZ2UgPSBzZWxlY3RlZENlbGxzWzBdLmNvbHVtbjtcbiAgICBjb25zdCBtYXhDb2xSYW5nZSA9IGxhc3RTZWxlY3RlZENlbGwuY29sdW1uICsgbGFzdFNlbGVjdGVkQ2VsbC5jb2xzcGFuO1xuXG4gICAgY29uc3QgZmFrZUNvbEdyb3VwcyA9IGdlbmVyYXRlQ29sR3JvdXAoaG91c2UsIG1pbkNvbFJhbmdlLCBtYXhDb2xSYW5nZSk7XG4gICAgY29uc3QgZmFrZVJvd3MgPSBnZW5lcmF0ZVJvd3MoaG91c2UsIG1pbkNvbFJhbmdlLCBtYXhDb2xSYW5nZSk7XG4gICAgcmV0dXJuIFsgLi4uZmFrZUNvbEdyb3VwcywgLi4uZmFrZVJvd3MgXTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBjb3B5Q29sc1xufTtcbiIsImltcG9ydCB7IEFyciwgdHlwZSBPcHRpb25hbCwgT3B0aW9uYWxzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgR3JpZFJvdyBmcm9tICcuLi9tb2RlbC9HcmlkUm93JztcbmltcG9ydCB7IG9uQ2VsbHMsIHR5cGUgVGFyZ2V0U2VsZWN0aW9uLCB0b0RldGFpbExpc3QgfSBmcm9tICcuLi9tb2RlbC9SdW5PcGVyYXRpb24nO1xuaW1wb3J0ICogYXMgVHJhbnNpdGlvbnMgZnJvbSAnLi4vbW9kZWwvVHJhbnNpdGlvbnMnO1xuaW1wb3J0ICogYXMgUmVkcmF3IGZyb20gJy4uL29wZXJhdGUvUmVkcmF3JztcblxuaW1wb3J0IHR5cGUgeyBHZW5lcmF0b3JzIH0gZnJvbSAnLi9HZW5lcmF0b3JzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4vV2FyZWhvdXNlJztcblxuY29uc3QgY29weVJvd3MgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24sIGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIC8vIENhbm5vdCB1c2Ugb25VbmxvY2tlZENlbGxzIGxpa2UgZXh0cmFjdG9yIGhlcmUgYXMgaWYgb25seSBjZWxscyBpbiBhIGxvY2tlZCBjb2x1bW4gYXJlIHNlbGVjdGVkLCB0aGVuIHRoaXMgd2lsbCBiZSBPcHRpb25hbC5ub25lIGFuZFxuICAvLyB0aGVyZSBpcyBub3cgbm8gd2F5IG9mIGtub3dpbmcgd2hpY2ggcm93cyBhcmUgc2VsZWN0ZWRcbiAgY29uc3QgZGV0YWlscyA9IG9uQ2VsbHMod2FyZWhvdXNlLCB0YXJnZXQpO1xuXG4gIHJldHVybiBkZXRhaWxzLmJpbmQoKHNlbGVjdGVkQ2VsbHMpID0+IHtcbiAgICBjb25zdCBncmlkID0gVHJhbnNpdGlvbnMudG9HcmlkKHdhcmVob3VzZSwgZ2VuZXJhdG9ycywgZmFsc2UpO1xuICAgIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICAgIGNvbnN0IHNsaWNlZEdyaWQgPSByb3dzLnNsaWNlKHNlbGVjdGVkQ2VsbHNbMF0ucm93LCBzZWxlY3RlZENlbGxzW3NlbGVjdGVkQ2VsbHMubGVuZ3RoIC0gMV0ucm93ICsgc2VsZWN0ZWRDZWxsc1tzZWxlY3RlZENlbGxzLmxlbmd0aCAtIDFdLnJvd3NwYW4pO1xuICAgIC8vIFJlbW92ZSBhbnkgbG9ja2VkIGNlbGxzIGZyb20gdGhlIGNvcGllZCBncmlkIHJvd3NcbiAgICBjb25zdCBmaWx0ZXJlZEdyaWQgPSBBcnIuYmluZChzbGljZWRHcmlkLCAocm93KSA9PiB7XG4gICAgICBjb25zdCBuZXdDZWxscyA9IEFyci5maWx0ZXIocm93LmNlbGxzLCAoY2VsbCkgPT4gIWNlbGwuaXNMb2NrZWQpO1xuICAgICAgcmV0dXJuIG5ld0NlbGxzLmxlbmd0aCA+IDAgPyBbeyAuLi5yb3csIGNlbGxzOiBuZXdDZWxscyB9XSA6IFtdO1xuICAgIH0pO1xuICAgIGNvbnN0IHNsaWNlZERldGFpbHMgPSB0b0RldGFpbExpc3QoZmlsdGVyZWRHcmlkKTtcbiAgICByZXR1cm4gT3B0aW9uYWxzLnNvbWVJZihzbGljZWREZXRhaWxzLmxlbmd0aCA+IDAsIHNsaWNlZERldGFpbHMpO1xuICB9KS5tYXAoKHNsaWNlZERldGFpbHMpID0+IFJlZHJhdy5jb3B5KHNsaWNlZERldGFpbHMpKTtcbn07XG5cbmV4cG9ydCB7XG4gIGNvcHlSb3dzXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPYmogfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBJbnNlcnQsIFJlbW92ZSwgUmVwbGljYXRpb24sIFNlbGVjdG9ycywgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgRGV0YWlsc0xpc3QgZnJvbSAnLi4vbW9kZWwvRGV0YWlsc0xpc3QnO1xuaW1wb3J0ICogYXMgQ29sdW1uU2l6ZXMgZnJvbSAnLi4vcmVzaXplL0NvbHVtblNpemVzJztcbmltcG9ydCAqIGFzIExheWVyU2VsZWN0b3IgZnJvbSAnLi4vdXRpbC9MYXllclNlbGVjdG9yJztcbmltcG9ydCB7IExPQ0tFRF9DT0xfQVRUUiB9IGZyb20gJy4uL3V0aWwvTG9ja2VkQ29sdW1uVXRpbHMnO1xuXG5pbXBvcnQgdHlwZSB7IERldGFpbCwgRGV0YWlsRXh0LCBSb3dEZXRhaWwgfSBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0IHsgVGFibGVTaXplIH0gZnJvbSAnLi9UYWJsZVNpemUnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG50eXBlIENlbGxSb3dEZXRhaWwgPSBSb3dEZXRhaWw8RGV0YWlsPEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgSFRNTFRhYmxlUm93RWxlbWVudD47XG5cbmludGVyZmFjZSBTdGF0c1N0cnVjdCB7XG4gIHJlYWRvbmx5IG1pblJvdzogbnVtYmVyO1xuICByZWFkb25seSBtaW5Db2w6IG51bWJlcjtcbiAgcmVhZG9ubHkgbWF4Um93OiBudW1iZXI7XG4gIHJlYWRvbmx5IG1heENvbDogbnVtYmVyO1xuICByZWFkb25seSBhbGxDZWxsczogRGV0YWlsRXh0W107XG4gIHJlYWRvbmx5IHNlbGVjdGVkQ2VsbHM6IERldGFpbEV4dFtdO1xufVxuXG5jb25zdCBzdGF0c1N0cnVjdCA9IChtaW5Sb3c6IG51bWJlciwgbWluQ29sOiBudW1iZXIsIG1heFJvdzogbnVtYmVyLCBtYXhDb2w6IG51bWJlciwgYWxsQ2VsbHM6IERldGFpbEV4dFtdLCBzZWxlY3RlZENlbGxzOiBEZXRhaWxFeHRbXSk6IFN0YXRzU3RydWN0ID0+ICh7XG4gIG1pblJvdyxcbiAgbWluQ29sLFxuICBtYXhSb3csXG4gIG1heENvbCxcbiAgYWxsQ2VsbHMsXG4gIHNlbGVjdGVkQ2VsbHMsXG59KTtcblxuY29uc3QgZmluZFNlbGVjdGVkU3RhdHMgPSAoaG91c2U6IFdhcmVob3VzZSwgaXNTZWxlY3RlZDogKGRldGFpbDogRGV0YWlsRXh0KSA9PiBib29sZWFuKTogU3RhdHNTdHJ1Y3QgPT4ge1xuICBjb25zdCB0b3RhbENvbHVtbnMgPSBob3VzZS5ncmlkLmNvbHVtbnM7XG4gIGNvbnN0IHRvdGFsUm93cyA9IGhvdXNlLmdyaWQucm93cztcblxuICAvKiBSZWZhY3RvciBpbnRvIGEgbWV0aG9kIHJldHVybmluZyBhIHN0cnVjdCB0byBoaWRlIHRoZSBtdXRhdGlvbiAqL1xuICBsZXQgbWluUm93ID0gdG90YWxSb3dzO1xuICBsZXQgbWluQ29sID0gdG90YWxDb2x1bW5zO1xuICBsZXQgbWF4Um93ID0gMDtcbiAgbGV0IG1heENvbCA9IDA7XG4gIGNvbnN0IGFsbENlbGxzOiBEZXRhaWxFeHRbXSA9IFtdO1xuICBjb25zdCBzZWxlY3RlZENlbGxzOiBEZXRhaWxFeHRbXSA9IFtdO1xuICBPYmouZWFjaChob3VzZS5hY2Nlc3MsIChkZXRhaWwpID0+IHtcbiAgICBhbGxDZWxscy5wdXNoKGRldGFpbCk7XG4gICAgaWYgKGlzU2VsZWN0ZWQoZGV0YWlsKSkge1xuICAgICAgc2VsZWN0ZWRDZWxscy5wdXNoKGRldGFpbCk7XG4gICAgICBjb25zdCBzdGFydFJvdyA9IGRldGFpbC5yb3c7XG4gICAgICBjb25zdCBlbmRSb3cgPSBzdGFydFJvdyArIGRldGFpbC5yb3dzcGFuIC0gMTtcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gZGV0YWlsLmNvbHVtbjtcbiAgICAgIGNvbnN0IGVuZENvbCA9IHN0YXJ0Q29sICsgZGV0YWlsLmNvbHNwYW4gLSAxO1xuICAgICAgaWYgKHN0YXJ0Um93IDwgbWluUm93KSB7XG4gICAgICAgIG1pblJvdyA9IHN0YXJ0Um93O1xuICAgICAgfSBlbHNlIGlmIChlbmRSb3cgPiBtYXhSb3cpIHtcbiAgICAgICAgbWF4Um93ID0gZW5kUm93O1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhcnRDb2wgPCBtaW5Db2wpIHtcbiAgICAgICAgbWluQ29sID0gc3RhcnRDb2w7XG4gICAgICB9IGVsc2UgaWYgKGVuZENvbCA+IG1heENvbCkge1xuICAgICAgICBtYXhDb2wgPSBlbmRDb2w7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHN0YXRzU3RydWN0KG1pblJvdywgbWluQ29sLCBtYXhSb3csIG1heENvbCwgYWxsQ2VsbHMsIHNlbGVjdGVkQ2VsbHMpO1xufTtcblxuY29uc3QgbWFrZUNlbGwgPSAobGlzdDogQ2VsbFJvd0RldGFpbFtdLCBzZWVuU2VsZWN0ZWQ6IGJvb2xlYW4sIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgLy8gbm8gbmVlZCB0byBjaGVjayBib3VuZHMsIGFzIGFueXRoaW5nIG91dHNpZGUgdGhpcyBpbmRleCBpcyByZW1vdmVkIGluIHRoZSBuZXN0ZWQgZm9yIGxvb3BcbiAgY29uc3Qgcm93ID0gbGlzdFtyb3dJbmRleF0uZWxlbWVudDtcbiAgY29uc3QgdGQgPSBTdWdhckVsZW1lbnQuZnJvbVRhZygndGQnKTtcbiAgSW5zZXJ0LmFwcGVuZCh0ZCwgU3VnYXJFbGVtZW50LmZyb21UYWcoJ2JyJykpO1xuICBjb25zdCBmID0gc2VlblNlbGVjdGVkID8gSW5zZXJ0LmFwcGVuZCA6IEluc2VydC5wcmVwZW5kO1xuICBmKHJvdywgdGQpO1xufTtcblxuY29uc3QgZmlsbEluR2FwcyA9IChsaXN0OiBSb3dEZXRhaWw8RGV0YWlsPltdLCBob3VzZTogV2FyZWhvdXNlLCBzdGF0czogU3RhdHNTdHJ1Y3QsIGlzU2VsZWN0ZWQ6IChkZXRhaWw6IERldGFpbEV4dCkgPT4gYm9vbGVhbikgPT4ge1xuICBjb25zdCByb3dzID0gQXJyLmZpbHRlcihsaXN0LCAocm93KTogcm93IGlzIENlbGxSb3dEZXRhaWwgPT4gcm93LnNlY3Rpb24gIT09ICdjb2xncm91cCcpO1xuICBjb25zdCB0b3RhbENvbHVtbnMgPSBob3VzZS5ncmlkLmNvbHVtbnM7XG4gIGNvbnN0IHRvdGFsUm93cyA9IGhvdXNlLmdyaWQucm93cztcbiAgLy8gdW5zZWxlY3RlZCBjZWxscyBoYXZlIGJlZW4gZGVsZXRlZCwgbm93IGZpbGwgaW4gdGhlIGdhcHMgaW4gdGhlIG1vZGVsXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxSb3dzOyBpKyspIHtcbiAgICBsZXQgc2VlblNlbGVjdGVkID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0b3RhbENvbHVtbnM7IGorKykge1xuICAgICAgaWYgKCEoaSA8IHN0YXRzLm1pblJvdyB8fCBpID4gc3RhdHMubWF4Um93IHx8IGogPCBzdGF0cy5taW5Db2wgfHwgaiA+IHN0YXRzLm1heENvbCkpIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBob2xlIGluIHRoZSB0YWJsZSBpdHNlbGYsIG9yIGl0J3MgYW4gdW5zZWxlY3RlZCBwb3NpdGlvbiwgd2UgbmVlZCBhIGNlbGxcbiAgICAgICAgY29uc3QgbmVlZENlbGwgPSBXYXJlaG91c2UuZ2V0QXQoaG91c2UsIGksIGopLmZpbHRlcihpc1NlbGVjdGVkKS5pc05vbmUoKTtcbiAgICAgICAgaWYgKG5lZWRDZWxsKSB7XG4gICAgICAgICAgbWFrZUNlbGwocm93cywgc2VlblNlbGVjdGVkLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWVuU2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBjbGVhbiA9IChyZXBsaWNhOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHN0YXRzOiBTdGF0c1N0cnVjdCwgaG91c2U6IFdhcmVob3VzZSwgd2lkdGhEZWx0YTogbnVtYmVyKTogdm9pZCA9PiB7XG4gIC8vIHJlbW92ZSBjb2x1bW5zIHRoYXQgYXJlIG5vdCBpbiB0aGUgbmV3IHRhYmxlXG4gIE9iai5lYWNoKGhvdXNlLmNvbHVtbnMsIChjb2wpID0+IHtcbiAgICBpZiAoY29sLmNvbHVtbiA8IHN0YXRzLm1pbkNvbCB8fCBjb2wuY29sdW1uID4gc3RhdHMubWF4Q29sKSB7XG4gICAgICBSZW1vdmUucmVtb3ZlKGNvbC5lbGVtZW50KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGNhbid0IHVzZSA6ZW1wdHkgc2VsZWN0b3IgYXMgdGhhdCB3aWxsIG5vdCBpbmNsdWRlIFRScyBtYWRlIHVwIG9mIHdoaXRlc3BhY2VcbiAgY29uc3QgZW1wdHlSb3dzID0gQXJyLmZpbHRlcihMYXllclNlbGVjdG9yLmZpcnN0TGF5ZXIocmVwbGljYSwgJ3RyJyksIChyb3cpID0+XG4gICAgLy8gdGhlcmUgaXMgbm8gc3VnYXIgbWV0aG9kIGZvciB0aGlzLCBhbmQgVHJhdmVyc2UuY2hpbGRyZW4oKSBkb2VzIHRvbyBtdWNoIHByb2Nlc3NpbmdcbiAgICAocm93LmRvbSBhcyBIVE1MRWxlbWVudCkuY2hpbGRFbGVtZW50Q291bnQgPT09IDBcbiAgKTtcbiAgQXJyLmVhY2goZW1wdHlSb3dzLCBSZW1vdmUucmVtb3ZlKTtcblxuICAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBjb2x1bW4sIG9yIG9ubHkgb25lIHJvdywgZGVsZXRlIGFsbCB0aGUgY29sc3Bhbi9yb3dzcGFuXG4gIGlmIChzdGF0cy5taW5Db2wgPT09IHN0YXRzLm1heENvbCB8fCBzdGF0cy5taW5Sb3cgPT09IHN0YXRzLm1heFJvdykge1xuICAgIEFyci5lYWNoKExheWVyU2VsZWN0b3IuZmlyc3RMYXllcihyZXBsaWNhLCAndGgsdGQnKSwgKGNlbGwpID0+IHtcbiAgICAgIEF0dHJpYnV0ZS5yZW1vdmUoY2VsbCwgJ3Jvd3NwYW4nKTtcbiAgICAgIEF0dHJpYnV0ZS5yZW1vdmUoY2VsbCwgJ2NvbHNwYW4nKTtcbiAgICB9KTtcbiAgfVxuICAvLyBSZW1vdmUgYW55IGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgbm90IGJlIGluIHRoZSByZXBsaWNhdGVkIHRhYmxlXG4gIEF0dHJpYnV0ZS5yZW1vdmUocmVwbGljYSwgTE9DS0VEX0NPTF9BVFRSKTtcbiAgLy8gVE9ETzogVElOWS02OTQ0IC0gbmVlZCB0byBmaWd1cmUgb3V0IGEgYmV0dGVyIHdheSBvZiBoYW5kbGluZyB0aGlzXG4gIEF0dHJpYnV0ZS5yZW1vdmUocmVwbGljYSwgJ2RhdGEtc25vb2tlci1jb2wtc2VyaWVzJyk7IC8vIEZvciBhZHZ0YWJsZSBzZXJpZXMgY29sdW1uIGZlYXR1cmVcblxuICBjb25zdCB0YWJsZVNpemUgPSBUYWJsZVNpemUuZ2V0VGFibGVTaXplKHJlcGxpY2EpO1xuICB0YWJsZVNpemUuYWRqdXN0VGFibGVXaWR0aCh3aWR0aERlbHRhKTtcblxuICAvLyBUT0RPIFRJTlktNjg2MzogSWYgdXNpbmcgcmVsYXRpdmUgd2lkdGhzLCBlbnN1cmUgY2VsbCBhbmQgY29sdW1uIHdpZHRocyBhcmUgcmVkaXN0cmlidXRlZFxufTtcblxuY29uc3QgZ2V0VGFibGVXaWR0aERlbHRhID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSwgc3RhdHM6IFN0YXRzU3RydWN0KTogbnVtYmVyID0+IHtcbiAgLy8gc2hvcnQgY2lyY3VpdCBlbnRpcmUgdGFibGUgc2VsZWN0ZWRcbiAgaWYgKHN0YXRzLm1pbkNvbCA9PT0gMCAmJiB3YXJlaG91c2UuZ3JpZC5jb2x1bW5zID09PSBzdGF0cy5tYXhDb2wgKyAxKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBjb25zdCBjb2xXaWR0aHMgPSBDb2x1bW5TaXplcy5nZXRQaXhlbFdpZHRocyh3YXJlaG91c2UsIHRhYmxlLCB0YWJsZVNpemUpO1xuICBjb25zdCBhbGxDb2xzV2lkdGggPSBBcnIuZm9sZGwoY29sV2lkdGhzLCAoYWNjLCB3aWR0aCkgPT4gYWNjICsgd2lkdGgsIDApO1xuICBjb25zdCBzZWxlY3RlZENvbHNXaWR0aCA9IEFyci5mb2xkbChjb2xXaWR0aHMuc2xpY2Uoc3RhdHMubWluQ29sLCBzdGF0cy5tYXhDb2wgKyAxKSwgKGFjYywgd2lkdGgpID0+IGFjYyArIHdpZHRoLCAwKTtcbiAgY29uc3QgbmV3V2lkdGggPSAoc2VsZWN0ZWRDb2xzV2lkdGggLyBhbGxDb2xzV2lkdGgpICogdGFibGVTaXplLnBpeGVsV2lkdGgoKTtcbiAgY29uc3QgZGVsdGEgPSBuZXdXaWR0aCAtIHRhYmxlU2l6ZS5waXhlbFdpZHRoKCk7XG5cbiAgcmV0dXJuIHRhYmxlU2l6ZS5nZXRDZWxsRGVsdGEoZGVsdGEpO1xufTtcblxuY29uc3QgZXh0cmFjdCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBzZWxlY3RlZFNlbGVjdG9yOiBzdHJpbmcpOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4gPT4ge1xuICBjb25zdCBpc1NlbGVjdGVkID0gKGRldGFpbDogRGV0YWlsRXh0KSA9PiBTZWxlY3RvcnMuaXMoZGV0YWlsLmVsZW1lbnQsIHNlbGVjdGVkU2VsZWN0b3IpO1xuXG4gIGNvbnN0IHJlcGxpY2EgPSBSZXBsaWNhdGlvbi5kZWVwKHRhYmxlKTtcbiAgY29uc3QgbGlzdCA9IERldGFpbHNMaXN0LmZyb21UYWJsZShyZXBsaWNhKTtcbiAgY29uc3QgdGFibGVTaXplID0gVGFibGVTaXplLmdldFRhYmxlU2l6ZSh0YWJsZSk7XG4gIGNvbnN0IHJlcGxpY2FIb3VzZSA9IFdhcmVob3VzZS5nZW5lcmF0ZShsaXN0KTtcbiAgY29uc3QgcmVwbGljYVN0YXRzID0gZmluZFNlbGVjdGVkU3RhdHMocmVwbGljYUhvdXNlLCBpc1NlbGVjdGVkKTtcblxuICAvLyByZW1vdmUgdW5zZWxlY3RlZCBjZWxsc1xuICBjb25zdCBzZWxlY3RvciA9ICd0aDpub3QoJyArIHNlbGVjdGVkU2VsZWN0b3IgKyAnKScgKyAnLHRkOm5vdCgnICsgc2VsZWN0ZWRTZWxlY3RvciArICcpJztcbiAgY29uc3QgdW5zZWxlY3RlZENlbGxzID0gTGF5ZXJTZWxlY3Rvci5maWx0ZXJGaXJzdExheWVyKHJlcGxpY2EsICd0aCx0ZCcsIChjZWxsKSA9PiBTZWxlY3RvcnMuaXMoY2VsbCwgc2VsZWN0b3IpKTtcbiAgQXJyLmVhY2godW5zZWxlY3RlZENlbGxzLCBSZW1vdmUucmVtb3ZlKTtcblxuICBmaWxsSW5HYXBzKGxpc3QsIHJlcGxpY2FIb3VzZSwgcmVwbGljYVN0YXRzLCBpc1NlbGVjdGVkKTtcblxuICBjb25zdCBob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCB3aWR0aERlbHRhID0gZ2V0VGFibGVXaWR0aERlbHRhKHRhYmxlLCBob3VzZSwgdGFibGVTaXplLCByZXBsaWNhU3RhdHMpO1xuICBjbGVhbihyZXBsaWNhLCByZXBsaWNhU3RhdHMsIHJlcGxpY2FIb3VzZSwgd2lkdGhEZWx0YSk7XG5cbiAgcmV0dXJuIHJlcGxpY2E7XG59O1xuXG5leHBvcnQge1xuICBleHRyYWN0XG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsLCBPcHRpb25hbHMgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDc3MsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgeyBnZXRBdHRyVmFsdWUgfSBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50LCBDb21wRWxtLCBSb3dFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBSb3dEYXRhIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENlbGxEYXRhIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgY29sc3BhbjogbnVtYmVyO1xuICByZWFkb25seSByb3dzcGFuOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdG9ycyB7XG4gIHJlYWRvbmx5IGNlbGw6IChjZWxsRGF0YTogQ2VsbERhdGEpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IHJvdzogKHJvd0RhdGE6IFJvd0RhdGEpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50PjtcbiAgcmVhZG9ubHkgcmVwbGFjZTogKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHRhZzogJ3RkJyB8ICd0aCcsIGF0dHJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbD4pID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IGdhcDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgY29sR2FwOiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbDogKHByZXY6IENlbGxEYXRhKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbGdyb3VwOiAocHJldjogUm93RGF0YSkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpbXBsZUdlbmVyYXRvcnMgZXh0ZW5kcyBHZW5lcmF0b3JzIHtcbiAgcmVhZG9ubHkgY2VsbDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgcm93OiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudD47XG4gIHJlYWRvbmx5IHJlcGxhY2U6IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICByZWFkb25seSBnYXA6ICgpID0+IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+O1xuICByZWFkb25seSBjb2xncm91cDogKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRvcnNXcmFwcGVyIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdG9yc01vZGlmaWNhdGlvbiBleHRlbmRzIEdlbmVyYXRvcnNXcmFwcGVyIHtcbiAgcmVhZG9ubHkgZ2V0T3JJbml0OiA8VCBleHRlbmRzIFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+LCBjb21wYXJhdG9yOiBDb21wRWxtKSA9PiBTdWdhckVsZW1lbnQ8VD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdG9yc1RyYW5zZm9ybSBleHRlbmRzIEdlbmVyYXRvcnNXcmFwcGVyIHtcbiAgcmVhZG9ubHkgcmVwbGFjZU9ySW5pdDogPFQgZXh0ZW5kcyBSb3dFbGVtZW50IHwgQ2VsbEVsZW1lbnQ+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUPiwgY29tcGFyYXRvcjogQ29tcEVsbSkgPT4gU3VnYXJFbGVtZW50PFQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlbmVyYXRvcnNNZXJnaW5nIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXIge1xuICByZWFkb25seSB1bm1lcmdlOiAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4gKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgbWVyZ2U6IChjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKSA9PiAoKSA9PiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xufVxuXG5pbnRlcmZhY2UgUmVjZW50IHtcbiAgcmVhZG9ubHkgaXRlbTogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgcmVwbGFjZW1lbnQ6IFN1Z2FyRWxlbWVudDxDZWxsRWxlbWVudD47XG59XG5cbmludGVyZmFjZSBJdGVtIHtcbiAgcmVhZG9ubHkgaXRlbTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcbiAgcmVhZG9ubHkgc3ViOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xufVxuXG5jb25zdCBpc0NvbCA9IFN1Z2FyTm9kZS5pc1RhZygnY29sJyk7XG5jb25zdCBpc0NvbGdyb3VwID0gU3VnYXJOb2RlLmlzVGFnKCdjb2xncm91cCcpO1xuXG5jb25zdCBpc1JvdyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Um93RWxlbWVudCB8IENlbGxFbGVtZW50Pik6IGVsZW1lbnQgaXMgU3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+ID0+XG4gIFN1Z2FyTm9kZS5uYW1lKGVsZW1lbnQpID09PSAndHInIHx8IGlzQ29sZ3JvdXAoZWxlbWVudCk7XG5cbmNvbnN0IGVsZW1lbnRUb0RhdGEgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50Pik6IENlbGxEYXRhID0+IHtcbiAgY29uc3QgY29sc3BhbiA9IGdldEF0dHJWYWx1ZShlbGVtZW50LCAnY29sc3BhbicsIDEpO1xuICBjb25zdCByb3dzcGFuID0gZ2V0QXR0clZhbHVlKGVsZW1lbnQsICdyb3dzcGFuJywgMSk7XG4gIHJldHVybiB7XG4gICAgZWxlbWVudCxcbiAgICBjb2xzcGFuLFxuICAgIHJvd3NwYW5cbiAgfTtcbn07XG5cbi8vIG5vdGUgdGhhdCBgdG9EYXRhYCBzZWVtcyB0byBiZSBvbmx5IGZvciB0ZXN0aW5nXG5jb25zdCBtb2RpZmljYXRpb24gPSAoZ2VuZXJhdG9yczogR2VuZXJhdG9ycywgdG9EYXRhID0gZWxlbWVudFRvRGF0YSk6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24gPT4ge1xuXG4gIGNvbnN0IG51Q2VsbCA9IChkYXRhOiBDZWxsRGF0YSkgPT5cbiAgICBpc0NvbChkYXRhLmVsZW1lbnQpID8gZ2VuZXJhdG9ycy5jb2woZGF0YSkgOiBnZW5lcmF0b3JzLmNlbGwoZGF0YSk7XG5cbiAgY29uc3QgbnVSb3cgPSAoZGF0YTogUm93RGF0YSkgPT5cbiAgICBpc0NvbGdyb3VwKGRhdGEuZWxlbWVudCkgPyBnZW5lcmF0b3JzLmNvbGdyb3VwKGRhdGEpIDogZ2VuZXJhdG9ycy5yb3coZGF0YSk7XG5cbiAgY29uc3QgYWRkID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50IHwgQ2VsbEVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGlzUm93KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gbnVSb3coeyBlbGVtZW50IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjZWxsID0gZWxlbWVudCBhcyBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+O1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBudUNlbGwodG9EYXRhKGNlbGwpKTtcbiAgICAgIHJlY2VudCA9IE9wdGlvbmFsLnNvbWUoeyBpdGVtOiBjZWxsLCByZXBsYWNlbWVudCB9KTtcbiAgICAgIHJldHVybiByZXBsYWNlbWVudDtcbiAgICB9XG4gIH07XG5cbiAgbGV0IHJlY2VudCA9IE9wdGlvbmFsLm5vbmU8UmVjZW50PigpO1xuICBjb25zdCBnZXRPckluaXQgPSA8VCBleHRlbmRzIFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+LCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3VnYXJFbGVtZW50PFQ+ID0+IHtcbiAgICByZXR1cm4gcmVjZW50LmZvbGQoKCkgPT4ge1xuICAgICAgcmV0dXJuIGFkZChlbGVtZW50KTtcbiAgICB9LCAocCkgPT4ge1xuICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoZWxlbWVudCwgcC5pdGVtKSA/IHAucmVwbGFjZW1lbnQgOiBhZGQoZWxlbWVudCk7XG4gICAgfSkgYXMgU3VnYXJFbGVtZW50PFQ+O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0T3JJbml0XG4gIH07XG59O1xuXG5jb25zdCB0cmFuc2Zvcm0gPSAodGFnOiAndGQnIHwgJ3RoJykgPT4ge1xuICByZXR1cm4gKGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMpOiBHZW5lcmF0b3JzVHJhbnNmb3JtID0+IHtcbiAgICBjb25zdCBsaXN0OiBJdGVtW10gPSBbXTtcblxuICAgIGNvbnN0IGZpbmQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4sIGNvbXBhcmF0b3I6IENvbXBFbG0pID0+IHtcbiAgICAgIHJldHVybiBBcnIuZmluZChsaXN0LCAoeCkgPT4ge1xuICAgICAgICByZXR1cm4gY29tcGFyYXRvcih4Lml0ZW0sIGVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1ha2VOZXcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4ge1xuICAgICAgLy8gRW5zdXJlIHNjb3BlIGlzIG5ldmVyIHNldCBvbiBhIHRkIGVsZW1lbnQgYXMgaXQncyBhIGRlcHJlY2F0ZWQgYXR0cmlidXRlXG4gICAgICBjb25zdCBhdHRyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB0YWcgPT09ICd0ZCcgPyB7IHNjb3BlOiBudWxsIH0gOiB7fTtcbiAgICAgIGNvbnN0IGNlbGwgPSBnZW5lcmF0b3JzLnJlcGxhY2UoZWxlbWVudCwgdGFnLCBhdHRycyk7XG4gICAgICBsaXN0LnB1c2goe1xuICAgICAgICBpdGVtOiBlbGVtZW50LFxuICAgICAgICBzdWI6IGNlbGxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNlbGw7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlcGxhY2VPckluaXQgPSA8VCBleHRlbmRzIFJvd0VsZW1lbnQgfCBDZWxsRWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+LCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3VnYXJFbGVtZW50PFQ+ID0+IHtcbiAgICAgIGlmIChpc1JvdyhlbGVtZW50KSB8fCBpc0NvbChlbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBlbGVtZW50IGFzIFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD47XG4gICAgICAgIHJldHVybiBmaW5kKGNlbGwsIGNvbXBhcmF0b3IpLmZvbGQoKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBtYWtlTmV3KGNlbGwpO1xuICAgICAgICB9LCAocCkgPT4ge1xuICAgICAgICAgIHJldHVybiBjb21wYXJhdG9yKGVsZW1lbnQsIHAuaXRlbSkgPyBwLnN1YiA6IG1ha2VOZXcoY2VsbCk7XG4gICAgICAgIH0pIGFzIFN1Z2FyRWxlbWVudDxUPjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcGxhY2VPckluaXRcbiAgICB9O1xuICB9O1xufTtcblxuY29uc3QgZ2V0U2NvcGVBdHRyaWJ1dGUgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT5cbiAgQXR0cmlidXRlLmdldE9wdChjZWxsLCAnc2NvcGUnKS5tYXAoXG4gICAgLy8gQXR0cmlidXRlIGNhbiBiZSBjb2wsIGNvbGdyb3VwLCByb3csIGFuZCByb3dncm91cC5cbiAgICAvLyBBcyBjb2wgYW5kIGNvbGdyb3VwIGFyZSB0byBiZSB0cmVhdGVkIGFzIGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBsb2Igb2ZmIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IHRocmVlIGNoYXJhY3RlcnMgYW5kIHRoZXJlIGlzIG5vIGRpZmZlcmVuY2UuXG4gICAgKGF0dHJpYnV0ZSkgPT4gYXR0cmlidXRlLnN1YnN0cigwLCAzKVxuICApO1xuXG5jb25zdCBtZXJnaW5nID0gKGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMpOiBHZW5lcmF0b3JzTWVyZ2luZyA9PiB7XG4gIGNvbnN0IHVubWVyZ2UgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHNjb3BlID0gZ2V0U2NvcGVBdHRyaWJ1dGUoY2VsbCk7XG5cbiAgICBzY29wZS5lYWNoKChhdHRyaWJ1dGUpID0+IEF0dHJpYnV0ZS5zZXQoY2VsbCwgJ3Njb3BlJywgYXR0cmlidXRlKSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gZ2VuZXJhdG9ycy5jZWxsKHtcbiAgICAgICAgZWxlbWVudDogY2VsbCxcbiAgICAgICAgY29sc3BhbjogMSxcbiAgICAgICAgcm93c3BhbjogMVxuICAgICAgfSk7XG4gICAgICAvLyBSZW1vdmUgYW55IHdpZHRoIGNhbGN1bGF0aW9ucyBiZWNhdXNlIHRoZXkgYXJlIG5vIGxvbmdlciByZWxldmFudC5cbiAgICAgIENzcy5yZW1vdmUocmF3LCAnd2lkdGgnKTtcbiAgICAgIENzcy5yZW1vdmUoY2VsbCwgJ3dpZHRoJyk7XG5cbiAgICAgIHNjb3BlLmVhY2goKGF0dHJpYnV0ZSkgPT4gQXR0cmlidXRlLnNldChyYXcsICdzY29wZScsIGF0dHJpYnV0ZSkpO1xuXG4gICAgICByZXR1cm4gcmF3O1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgbWVyZ2UgPSAoY2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSkgPT4ge1xuICAgIGNvbnN0IGdldFNjb3BlUHJvcGVydHkgPSAoKSA9PiB7XG5cbiAgICAgIGNvbnN0IHN0cmluZ0F0dHJpYnV0ZXMgPSBPcHRpb25hbHMuY2F0KFxuICAgICAgICBBcnIubWFwKGNlbGxzLCBnZXRTY29wZUF0dHJpYnV0ZSlcbiAgICAgICk7XG5cbiAgICAgIGlmIChzdHJpbmdBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxzdHJpbmc+KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBiYXNlU2NvcGUgPSBzdHJpbmdBdHRyaWJ1dGVzWzBdO1xuICAgICAgICBjb25zdCBzY29wZXMgPSBbICdyb3cnLCAnY29sJyBdO1xuXG4gICAgICAgIGNvbnN0IGlzTWl4ZWQgPSBBcnIuZXhpc3RzKHN0cmluZ0F0dHJpYnV0ZXMsIChhdHRyaWJ1dGUpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXR0cmlidXRlICE9PSBiYXNlU2NvcGUgJiYgQXJyLmNvbnRhaW5zKHNjb3BlcywgYXR0cmlidXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlzTWl4ZWQgPyBPcHRpb25hbC5ub25lPHN0cmluZz4oKSA6IE9wdGlvbmFsLmZyb20oYmFzZVNjb3BlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ3NzLnJlbW92ZShjZWxsc1swXSwgJ3dpZHRoJyk7XG5cbiAgICBnZXRTY29wZVByb3BlcnR5KCkuZm9sZChcbiAgICAgICgpID0+IEF0dHJpYnV0ZS5yZW1vdmUoY2VsbHNbMF0sICdzY29wZScpLFxuICAgICAgKGF0dHJpYnV0ZSkgPT4gQXR0cmlidXRlLnNldChjZWxsc1swXSwgJ3Njb3BlJywgYXR0cmlidXRlICsgJ2dyb3VwJylcbiAgICApO1xuXG4gICAgcmV0dXJuIEZ1bi5jb25zdGFudChjZWxsc1swXSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICB1bm1lcmdlLFxuICAgIG1lcmdlXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgR2VuZXJhdG9ycyA9IHtcbiAgbW9kaWZpY2F0aW9uLFxuICB0cmFuc2Zvcm0sXG4gIG1lcmdpbmdcbn07XG4iLCJpbXBvcnQgeyBBcnIsIHR5cGUgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4uL21vZGVsL0dyaWRSb3cnO1xuaW1wb3J0IHsgb25DZWxscywgdHlwZSBUYXJnZXRTZWxlY3Rpb24sIHRvRGV0YWlsTGlzdCB9IGZyb20gJy4uL21vZGVsL1J1bk9wZXJhdGlvbic7XG5pbXBvcnQgKiBhcyBUcmFuc2l0aW9ucyBmcm9tICcuLi9tb2RlbC9UcmFuc2l0aW9ucyc7XG5cbmltcG9ydCB0eXBlIHsgR2VuZXJhdG9ycyB9IGZyb20gJy4vR2VuZXJhdG9ycyc7XG5pbXBvcnQgdHlwZSB7IERldGFpbEV4dCwgUm93Q2VsbHMgfSBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE90aGVyQ2VsbHMge1xuICByZWFkb25seSB1cE9yTGVmdENlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W107XG4gIHJlYWRvbmx5IGRvd25PclJpZ2h0Q2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXTtcbn1cblxuY29uc3QgZ2V0VXBPckxlZnRDZWxscyA9IChncmlkOiBSb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PltdLCBzZWxlY3RlZENlbGxzOiBEZXRhaWxFeHRbXSk6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSA9PiB7XG4gIC8vIEdldCByb3dzIHVwIG9yIGF0IHRoZSByb3cgb2YgdGhlIGJvdHRvbSByaWdodCBjZWxsXG4gIGNvbnN0IHVwR3JpZCA9IGdyaWQuc2xpY2UoMCwgc2VsZWN0ZWRDZWxsc1tzZWxlY3RlZENlbGxzLmxlbmd0aCAtIDFdLnJvdyArIDEpO1xuICBjb25zdCB1cERldGFpbHMgPSB0b0RldGFpbExpc3QodXBHcmlkKTtcbiAgLy8gR2V0IGFuIGFycmF5IG9mIHRoZSBjZWxscyB1cCBvciB0byB0aGUgbGVmdCBvZiB0aGUgYm90dG9tIHJpZ2h0IGNlbGxcbiAgcmV0dXJuIEFyci5iaW5kKHVwRGV0YWlscywgKGRldGFpbCkgPT4ge1xuICAgIGNvbnN0IHNsaWNlZENlbGxzID0gZGV0YWlsLmNlbGxzLnNsaWNlKDAsIHNlbGVjdGVkQ2VsbHNbc2VsZWN0ZWRDZWxscy5sZW5ndGggLSAxXS5jb2x1bW4gKyAxKTtcbiAgICByZXR1cm4gQXJyLm1hcChzbGljZWRDZWxscywgKGNlbGwpID0+IGNlbGwuZWxlbWVudCk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0RG93bk9yUmlnaHRDZWxscyA9IChncmlkOiBSb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PltdLCBzZWxlY3RlZENlbGxzOiBEZXRhaWxFeHRbXSk6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSA9PiB7XG4gIC8vIEdldCByb3dzIGRvd24gb3IgYXQgdGhlIHJvdyBvZiB0aGUgdG9wIGxlZnQgY2VsbCAoaW5jbHVkaW5nIHJvd3NwYW5zKVxuICBjb25zdCBkb3duR3JpZCA9IGdyaWQuc2xpY2Uoc2VsZWN0ZWRDZWxsc1swXS5yb3cgKyBzZWxlY3RlZENlbGxzWzBdLnJvd3NwYW4gLSAxLCBncmlkLmxlbmd0aCk7XG4gIGNvbnN0IGRvd25EZXRhaWxzID0gdG9EZXRhaWxMaXN0KGRvd25HcmlkKTtcbiAgLy8gR2V0IGFuIGFycmF5IG9mIHRoZSBjZWxscyBkb3duIG9yIHRvIHRoZSByaWdodCBvZiB0aGUgYm90dG9tIHJpZ2h0IGNlbGxcbiAgcmV0dXJuIEFyci5iaW5kKGRvd25EZXRhaWxzLCAoZGV0YWlsKSA9PiB7XG4gICAgY29uc3Qgc2xpY2VkQ2VsbHMgPSBkZXRhaWwuY2VsbHMuc2xpY2Uoc2VsZWN0ZWRDZWxsc1swXS5jb2x1bW4gKyBzZWxlY3RlZENlbGxzWzBdLmNvbHNwYW4gLSAxLCBkZXRhaWwuY2VsbHMubGVuZ3RoKTtcbiAgICByZXR1cm4gQXJyLm1hcChzbGljZWRDZWxscywgKGNlbGwpID0+IGNlbGwuZWxlbWVudCk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0T3RoZXJDZWxscyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbiwgZ2VuZXJhdG9yczogR2VuZXJhdG9ycyk6IE9wdGlvbmFsPE90aGVyQ2VsbHM+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IGRldGFpbHMgPSBvbkNlbGxzKHdhcmVob3VzZSwgdGFyZ2V0KTtcblxuICByZXR1cm4gZGV0YWlscy5tYXAoKHNlbGVjdGVkQ2VsbHMpID0+IHtcbiAgICBjb25zdCBncmlkID0gVHJhbnNpdGlvbnMudG9HcmlkKHdhcmVob3VzZSwgZ2VuZXJhdG9ycywgZmFsc2UpO1xuICAgIGNvbnN0IHsgcm93cyB9ID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCk7XG4gICAgY29uc3QgdXBPckxlZnRDZWxscyA9IGdldFVwT3JMZWZ0Q2VsbHMocm93cywgc2VsZWN0ZWRDZWxscyk7XG4gICAgY29uc3QgZG93bk9yUmlnaHRDZWxscyA9IGdldERvd25PclJpZ2h0Q2VsbHMocm93cywgc2VsZWN0ZWRDZWxscyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVwT3JMZWZ0Q2VsbHMsXG4gICAgICBkb3duT3JSaWdodENlbGxzXG4gICAgfTtcbiAgfSk7XG59O1xuXG5leHBvcnQge1xuICBnZXRPdGhlckNlbGxzXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG50eXBlIFRhYmxlUmVzaXplciA9IChkZWx0YTogbnVtYmVyKSA9PiB2b2lkO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2l6ZUJlaGF2aW91ciB7XG4gIHJlYWRvbmx5IHJlc2l6ZVRhYmxlOiAocmVzaXplcjogVGFibGVSZXNpemVyLCBkZWx0YTogbnVtYmVyLCBpc0xhc3RDb2x1bW46IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGNsYW1wVGFibGVEZWx0YTogKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlciwgaXNMYXN0Q29sdW1uOiBib29sZWFuKSA9PiBudW1iZXI7XG4gIHJlYWRvbmx5IGNhbGNMZWZ0RWRnZURlbHRhczogKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgbmV4dEluZGV4OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IG51bWJlcltdO1xuICByZWFkb25seSBjYWxjTWlkZGxlRGVsdGFzOiAoc2l6ZXM6IG51bWJlcltdLCBwcmV2aW91c0luZGV4OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIG5leHRJbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc1JlbGF0aXZlOiBib29sZWFuKSA9PiBudW1iZXJbXTtcbiAgcmVhZG9ubHkgY2FsY1JpZ2h0RWRnZURlbHRhczogKHNpemVzOiBudW1iZXJbXSwgcHJldmlvdXNJbmRleDogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc1JlbGF0aXZlOiBib29sZWFuKSA9PiBudW1iZXJbXTtcbiAgcmVhZG9ubHkgY2FsY1JlZGVzdHJpYnV0ZWRXaWR0aHM6IChzaXplczogbnVtYmVyW10sIHRvdGFsOiBudW1iZXIsIHBpeGVsRGVsdGE6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4geyBkZWx0YTogbnVtYmVyOyBuZXdTaXplczogbnVtYmVyW10gfTtcbn1cblxuY29uc3QgemVybyA9IChhcnJheTogbnVtYmVyW10pID0+IEFyci5tYXAoYXJyYXksIEZ1bi5jb25zdGFudCgwKSk7XG5cbmNvbnN0IHN1cnJvdW5kID0gKHNpemVzOiBudW1iZXJbXSwgc3RhcnRJbmRleDogbnVtYmVyLCBlbmRJbmRleDogbnVtYmVyLCByZXN1bHRzOiBudW1iZXJbXSwgZjogKGFycmF5OiBudW1iZXJbXSkgPT4gbnVtYmVyW10pID0+XG4gIGYoc2l6ZXMuc2xpY2UoMCwgc3RhcnRJbmRleCkpLmNvbmNhdChyZXN1bHRzKS5jb25jYXQoZihzaXplcy5zbGljZShlbmRJbmRleCkpKTtcblxuLy8gQ2xhbXAgcG9zaXRpdmUgb3IgbmVnYXRpdmUgZGVsdGEgc28gdGhhdCBhIGNvbHVtbi9yb3cgY2Fubm90IGJlIHJlZHVjZWQgcGFzdCBpdHMgbWluIHNpemVcbmNvbnN0IGNsYW1wRGVsdGFIZWxwZXIgPSAocHJlZGljYXRlOiAoZGVsdGE6IG51bWJlcikgPT4gYm9vbGVhbikgPT4gKHNpemVzOiBudW1iZXJbXSwgaW5kZXg6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlcikgPT4ge1xuICBpZiAoIXByZWRpY2F0ZShkZWx0YSkpIHtcbiAgICByZXR1cm4gZGVsdGE7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbmV3U2l6ZSA9IE1hdGgubWF4KG1pbkNlbGxTaXplLCBzaXplc1tpbmRleF0gLSBNYXRoLmFicyhkZWx0YSkpO1xuICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyhuZXdTaXplIC0gc2l6ZXNbaW5kZXhdKTtcbiAgICByZXR1cm4gZGVsdGEgPj0gMCA/IGRpZmYgOiAtZGlmZjtcbiAgfVxufTtcblxuY29uc3QgY2xhbXBOZWdhdGl2ZURlbHRhID0gY2xhbXBEZWx0YUhlbHBlcigoZGVsdGEpID0+IGRlbHRhIDwgMCk7XG5jb25zdCBjbGFtcERlbHRhID0gY2xhbXBEZWx0YUhlbHBlcihGdW4uYWx3YXlzKTtcblxuLy8gUHJlc2VydmUgdGhlIHNpemUgb2YgdGhlIGNvbHVtbnMvcm93cyBhbmQgYWRqdXN0IHRoZSB0YWJsZSBzaXplXG5jb25zdCByZXNpemVUYWJsZSA9ICgpOiBSZXNpemVCZWhhdmlvdXIgPT4ge1xuICBjb25zdCBjYWxjRml4ZWREZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBjbGFtcGVkRGVsdGEgPSBjbGFtcE5lZ2F0aXZlRGVsdGEoc2l6ZXMsIGluZGV4LCBkZWx0YSwgbWluQ2VsbFNpemUpO1xuICAgIHJldHVybiBzdXJyb3VuZChzaXplcywgaW5kZXgsIG5leHQgKyAxLCBbIGNsYW1wZWREZWx0YSwgMCBdLCB6ZXJvKTtcbiAgfTtcblxuICAvLyBDYWxjdWxhdGUgZGVsdGEgZm9yIGFkanVzdGVkIGNvbHVtblxuICAvLyBBbHNvIG5lZWQgdG8gY2FsY3VsYXRlIGRlbHRhcyBmb3IgYWxsIG90aGVyIGNvbHVtbnMvcm93cyB0byBlbnN1cmUgdGhleSBzdGF5IGF0IHRoZSBzYW1lIHZpc3VhbCB3aWR0aC9oZWlnaHRcbiAgLy8gd2hlbiB0aGUgdGFibGUgd2lkdGgvaGVpZ2h0IGlzIGFkanVzdGVkXG4gIGNvbnN0IGNhbGNSZWxhdGl2ZURlbHRhcyA9IChzaXplczogbnVtYmVyW10sIGluZGV4OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIpID0+IHtcbiAgICAvLyBBU1NVTVBUSU9OOiBUaGUgZGVsdGEgd2lsbCBiZSBhIHBlcmNlbnRhZ2UuIFRoaXMgbWF5IG5vdCBiZSBjb3JyZWN0IGlmIG90aGVyIHJlbGF0aXZlIHNpemluZyBpcyBhZGRlZCwgc28gd2UgcHJvYmFibHlcbiAgICAvLyBuZWVkIGEgYmV0dGVyIHdheSB0byBjYWxjIHRoZSByYXRpby5cbiAgICBjb25zdCByYXRpbyA9ICgxMDAgKyBkZWx0YSkgLyAxMDA7XG4gICAgY29uc3QgbmV3VGhpcyA9IE1hdGgubWF4KG1pbkNlbGxTaXplLCAoc2l6ZXNbaW5kZXhdICsgZGVsdGEpIC8gcmF0aW8pO1xuICAgIHJldHVybiBBcnIubWFwKHNpemVzLCAoc2l6ZSwgaWR4KSA9PiB7XG4gICAgICBjb25zdCBuZXdTaXplID0gaWR4ID09PSBpbmRleCA/IG5ld1RoaXMgOiBzaXplIC8gcmF0aW87XG4gICAgICByZXR1cm4gbmV3U2l6ZSAtIHNpemU7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ2FsY3VsYXRpb25zIGZvciB0aGUgaW5uZXIgY29sdW1ucy9yb3dzXG4gIGNvbnN0IGNhbGNMZWZ0RWRnZURlbHRhcyA9IChzaXplczogbnVtYmVyW10sIGluZGV4OiBudW1iZXIsIG5leHQ6IG51bWJlciwgZGVsdGE6IG51bWJlciwgbWluQ2VsbFNpemU6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc1JlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gY2FsY1JlbGF0aXZlRGVsdGFzKHNpemVzLCBpbmRleCwgZGVsdGEsIG1pbkNlbGxTaXplKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNhbGNGaXhlZERlbHRhcyhzaXplcywgaW5kZXgsIG5leHQsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNhbGNNaWRkbGVEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBfcHJldjogbnVtYmVyLCBpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+XG4gICAgY2FsY0xlZnRFZGdlRGVsdGFzKHNpemVzLCBpbmRleCwgbmV4dCwgZGVsdGEsIG1pbkNlbGxTaXplLCBpc1JlbGF0aXZlKTtcblxuICBjb25zdCByZXNpemVUYWJsZSA9IChyZXNpemVyOiBUYWJsZVJlc2l6ZXIsIGRlbHRhOiBudW1iZXIpID0+XG4gICAgcmVzaXplcihkZWx0YSk7XG5cbiAgLy8gQ2FsY3VsYXRpb25zIGZvciB0aGUgbGFzdCBjb2x1bW4vcm93IHJlc2l6ZXJcbiAgY29uc3QgY2FsY1JpZ2h0RWRnZURlbHRhcyA9IChzaXplczogbnVtYmVyW10sIF9wcmV2OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIsIGlzUmVsYXRpdmU6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNSZWxhdGl2ZSkge1xuICAgICAgcmV0dXJuIGNhbGNSZWxhdGl2ZURlbHRhcyhzaXplcywgaW5kZXgsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNsYW1wZWREZWx0YSA9IGNsYW1wTmVnYXRpdmVEZWx0YShzaXplcywgaW5kZXgsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgICByZXR1cm4gemVybyhzaXplcy5zbGljZSgwLCBpbmRleCkpLmNvbmNhdChbIGNsYW1wZWREZWx0YSBdKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2FsY1JlZGVzdHJpYnV0ZWRXaWR0aHMgPSAoc2l6ZXM6IG51bWJlcltdLCB0b3RhbFdpZHRoOiBudW1iZXIsIHBpeGVsRGVsdGE6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc1JlbGF0aXZlKSB7XG4gICAgICBjb25zdCB0YWJsZVdpZHRoID0gdG90YWxXaWR0aCArIHBpeGVsRGVsdGE7XG4gICAgICBjb25zdCByYXRpbyA9IHRhYmxlV2lkdGggLyB0b3RhbFdpZHRoO1xuICAgICAgY29uc3QgbmV3U2l6ZXMgPSBBcnIubWFwKHNpemVzLCAoc2l6ZSkgPT4gc2l6ZSAvIHJhdGlvKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRlbHRhOiAocmF0aW8gKiAxMDApIC0gMTAwLFxuICAgICAgICBuZXdTaXplcyxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRlbHRhOiBwaXhlbERlbHRhLFxuICAgICAgICBuZXdTaXplczogc2l6ZXMsXG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHJlc2l6ZVRhYmxlLFxuICAgIGNsYW1wVGFibGVEZWx0YTogY2xhbXBOZWdhdGl2ZURlbHRhLFxuICAgIGNhbGNMZWZ0RWRnZURlbHRhcyxcbiAgICBjYWxjTWlkZGxlRGVsdGFzLFxuICAgIGNhbGNSaWdodEVkZ2VEZWx0YXMsXG4gICAgY2FsY1JlZGVzdHJpYnV0ZWRXaWR0aHMsXG4gIH07XG59O1xuXG4vLyBEaXN0cmlidXRlIHRoZSBjb2x1bW4vcm93cyBhbmQgdHJ5IHRvIHByZXNlcnZlIHRoZSB0YWJsZSBzaXplXG5jb25zdCBwcmVzZXJ2ZVRhYmxlID0gKCk6IFJlc2l6ZUJlaGF2aW91ciA9PiB7XG4gIC8vIENhbGN1bGF0aW9ucyBmb3IgdGhlIGlubmVyIGNvbHVtbnMvcm93c1xuICBjb25zdCBjYWxjTGVmdEVkZ2VEZWx0YXMgPSAoc2l6ZXM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIsIGRlbHRhOiBudW1iZXIsIG1pbkNlbGxTaXplOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBpZHggPSBkZWx0YSA+PSAwID8gbmV4dCA6IGluZGV4O1xuICAgIGNvbnN0IGNsYW1wZWREZWx0YSA9IGNsYW1wRGVsdGEoc2l6ZXMsIGlkeCwgZGVsdGEsIG1pbkNlbGxTaXplKTtcbiAgICAvLyBuZWdhdGl2ZSBkZWx0YSAtPiBkZWx0YXMgYmVjb21lcyBbIG5lZywgcG9zIF0sIHBvc2l0aXZlIGRlbHRhIC0+IGRlbHRhcyBiZWNvbWVzIFsgcG9zLCBuZWcgXVxuICAgIHJldHVybiBzdXJyb3VuZChzaXplcywgaW5kZXgsIG5leHQgKyAxLCBbIGNsYW1wZWREZWx0YSwgLWNsYW1wZWREZWx0YSBdLCB6ZXJvKTtcbiAgfTtcblxuICBjb25zdCBjYWxjTWlkZGxlRGVsdGFzID0gKHNpemVzOiBudW1iZXJbXSwgX3ByZXY6IG51bWJlciwgaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyKSA9PlxuICAgIGNhbGNMZWZ0RWRnZURlbHRhcyhzaXplcywgaW5kZXgsIG5leHQsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG5cbiAgY29uc3QgcmVzaXplVGFibGUgPSAocmVzaXplcjogVGFibGVSZXNpemVyLCBkZWx0YTogbnVtYmVyLCBpc0xhc3RDb2x1bW46IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoaXNMYXN0Q29sdW1uKSB7XG4gICAgICByZXNpemVyKGRlbHRhKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FsY3VsYXRpb25zIGZvciB0aGUgbGFzdCBjb2x1bW4vcm93IHJlc2l6ZXJcbiAgY29uc3QgY2FsY1JpZ2h0RWRnZURlbHRhcyA9IChzaXplczogbnVtYmVyW10sIF9wcmV2OiBudW1iZXIsIF9pbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBfbWluQ2VsbFNpemU6IG51bWJlciwgaXNSZWxhdGl2ZTogYm9vbGVhbikgPT4ge1xuICAgIGlmIChpc1JlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gemVybyhzaXplcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERpc3RyaWJ1dGUgdGhlIGRlbHRhIGFtb25nc3QgYWxsIG9mIHRoZSBjb2x1bW5zL3Jvd3NcbiAgICAgIGNvbnN0IGRpZmYgPSBkZWx0YSAvIHNpemVzLmxlbmd0aDtcbiAgICAgIHJldHVybiBBcnIubWFwKHNpemVzLCBGdW4uY29uc3RhbnQoZGlmZikpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjbGFtcFRhYmxlRGVsdGEgPSAoc2l6ZXM6IG51bWJlcltdLCBpbmRleDogbnVtYmVyLCBkZWx0YTogbnVtYmVyLCBtaW5DZWxsU2l6ZTogbnVtYmVyLCBpc0xhc3RDb2x1bW46IGJvb2xlYW4pID0+IHtcbiAgICAvLyBEb24ndCBjbGFtcCB0aGUgbGFzdCByZXNpemVyIHVzaW5nIG5vcm1hbCBtZXRob2RzXG4gICAgLy8gTmVlZCB0byBhbGxvdyB0YWJsZSB3aWR0aCB0byBiZSByZWR1Y2VkIHBhc3QgdGhlIGxhc3QgY29sdW1uIHBvc2l0aW9uIHRvIGFsbG93IGZvciBkaXN0cmlidXRpdmUgcmVzaXppbmdcbiAgICBpZiAoaXNMYXN0Q29sdW1uKSB7XG4gICAgICBpZiAoZGVsdGEgPj0gMCkge1xuICAgICAgICByZXR1cm4gZGVsdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGFtcCBkZWx0YSBzbyB0aGF0IG5vbmUgb2YgdGhlIGNvbHVtbnMvcm93cyBjYW4gcmVkdWNlIGJlbG93IHRoZWlyIG1pbiBzaXplXG4gICAgICAgIGNvbnN0IG1heERlbHRhID0gQXJyLmZvbGRsKHNpemVzLCAoYSwgYikgPT4gYSArIGIgLSBtaW5DZWxsU2l6ZSwgMCk7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgtbWF4RGVsdGEsIGRlbHRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNsYW1wTmVnYXRpdmVEZWx0YShzaXplcywgaW5kZXgsIGRlbHRhLCBtaW5DZWxsU2l6ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzID0gKHNpemVzOiBudW1iZXJbXSwgX3RvdGFsV2lkdGg6IG51bWJlciwgX3BpeGVsRGVsdGE6IG51bWJlciwgX2lzUmVsYXRpdmU6IGJvb2xlYW4pID0+ICh7XG4gICAgZGVsdGE6IDAsXG4gICAgbmV3U2l6ZXM6IHNpemVzLFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHJlc2l6ZVRhYmxlLFxuICAgIGNsYW1wVGFibGVEZWx0YSxcbiAgICBjYWxjTGVmdEVkZ2VEZWx0YXMsXG4gICAgY2FsY01pZGRsZURlbHRhcyxcbiAgICBjYWxjUmlnaHRFZGdlRGVsdGFzLFxuICAgIGNhbGNSZWRlc3RyaWJ1dGVkV2lkdGhzXG4gIH07XG59O1xuXG5leHBvcnQge1xuICByZXNpemVUYWJsZSxcbiAgcHJlc2VydmVUYWJsZVxufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJMb2NhdGlvbiwgU3VnYXJOb2RlLCBTdWdhclBvc2l0aW9uLCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbi8vIHBhcmVudDogdGhlIGNvbnRhaW5lciB3aGVyZSB0aGUgcmVzaXplIGJhcnMgYXJlIGFwcGVuZGVkXG4vLyAgICAgICAgIHRoaXMgZ2V0cyBtb3VzZSBldmVudCBoYW5kbGVycyBvbmx5IGlmIGl0IGlzIG5vdCBhIGNoaWxkIG9mICd2aWV3JyAoZWcsIGRldGFjaGVkL2lubGluZSBtb2RlKVxuLy8gdmlldzogdGhlIGNvbnRhaW5lciB3aG8gbGlzdGVucyB0byBtb3VzZSBldmVudHMgZnJvbSBjb250ZW50IHRhYmxlcyAoZWcsIGRldGFjaGVkL2lubGluZSBtb2RlKVxuLy8gICAgICAgb3IgdGhlIGRvY3VtZW50IHRoYXQgaXMgYSBjb21tb24gYW5jZXN0b3Igb2YgYm90aCB0aGUgY29udGVudCB0YWJsZXMgYW5kIHRoZVxuLy8gICAgICAgcmVzaXplIGJhcnMgKCdwYXJlbnQnKSBhbmQgc28gd2lsbCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gYm90aCAoZWcsIGlmcmFtZSBtb2RlKVxuLy8gb3JpZ2luOiB0aGUgb2Zmc2V0IGZvciB0aGUgcG9pbnQgdG8gZGlzcGxheSB0aGUgYmFycyBpbiB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbi8vIGRyYWdDb250YWluZXI6IFRoZSBjb250YWluZXIgd2hlcmUgZHJhZ3N0ZXIgYmxvY2tlciBpcyByZW5kZXJlZCBzbyB3ZSBkb24ndCBydW4gaW50byB6LWluZGV4IGlzc3Vlc1xuLy8gaXNSZXNpemFibGU6IGEgY2FsbGJhY2sgdGhhdCBkZXRlcm1pbmVzIGlmIHRoZSBwcm92aWRlZCBlbGVtZW50IGNhbiBiZSByZXNpemVkIHVzaW5nIHRoZSByZXNpemUgYmFyc1xuXG50eXBlIFJlc2l6ZUNhbGxiYWNrID0gKGVsbTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KSA9PiBib29sZWFuO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2l6ZVdpcmUge1xuICBwYXJlbnQ6ICgpID0+IFN1Z2FyRWxlbWVudDxOb2RlPjtcbiAgdmlldzogKCkgPT4gU3VnYXJFbGVtZW50PE5vZGU+O1xuICBvcmlnaW46ICgpID0+IFN1Z2FyUG9zaXRpb247XG4gIGRyYWdDb250YWluZXI6ICgpID0+IFN1Z2FyRWxlbWVudDxOb2RlPjtcbiAgaXNSZXNpemFibGU6IFJlc2l6ZUNhbGxiYWNrO1xufVxuXG5jb25zdCBvbmx5ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxEb2N1bWVudCB8IEVsZW1lbnQ+LCBpc1Jlc2l6YWJsZTogUmVzaXplQ2FsbGJhY2spOiBSZXNpemVXaXJlID0+IHtcbiAgLy8gSWYgZWxlbWVudCBpcyBhICdkb2N1bWVudCcsIHVzZSB0aGUgZG9jdW1lbnQgZWxlbWVudCAoJ0hUTUwnIHRhZykgZm9yIGFwcGVuZGluZy5cbiAgY29uc3QgcGFyZW50ID0gU3VnYXJOb2RlLmlzRG9jdW1lbnQoZWxlbWVudCkgPyBUcmF2ZXJzZS5kb2N1bWVudEVsZW1lbnQoZWxlbWVudCkgOiBlbGVtZW50O1xuICByZXR1cm4ge1xuICAgIHBhcmVudDogRnVuLmNvbnN0YW50KHBhcmVudCksXG4gICAgdmlldzogRnVuLmNvbnN0YW50KGVsZW1lbnQpLFxuICAgIGRyYWdDb250YWluZXI6IEZ1bi5jb25zdGFudChwYXJlbnQpLFxuICAgIG9yaWdpbjogRnVuLmNvbnN0YW50KFN1Z2FyUG9zaXRpb24oMCwgMCkpLFxuICAgIGlzUmVzaXphYmxlXG4gIH07XG59O1xuXG5jb25zdCBkZXRhY2hlZCA9IChlZGl0YWJsZTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjaHJvbWU6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgaXNSZXNpemFibGU6IFJlc2l6ZUNhbGxiYWNrKTogUmVzaXplV2lyZSA9PiB7XG4gIGNvbnN0IG9yaWdpbiA9ICgpID0+IFN1Z2FyTG9jYXRpb24uYWJzb2x1dGUoY2hyb21lKTtcbiAgcmV0dXJuIHtcbiAgICBwYXJlbnQ6IEZ1bi5jb25zdGFudChjaHJvbWUpLFxuICAgIHZpZXc6IEZ1bi5jb25zdGFudChlZGl0YWJsZSksXG4gICAgZHJhZ0NvbnRhaW5lcjogRnVuLmNvbnN0YW50KGNocm9tZSksXG4gICAgb3JpZ2luLFxuICAgIGlzUmVzaXphYmxlXG4gIH07XG59O1xuXG5jb25zdCBib2R5ID0gKGVkaXRhYmxlOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGlzUmVzaXphYmxlOiBSZXNpemVDYWxsYmFjayk6IFJlc2l6ZVdpcmUgPT4ge1xuICByZXR1cm4ge1xuICAgIHBhcmVudDogRnVuLmNvbnN0YW50KGVkaXRhYmxlKSxcbiAgICB2aWV3OiBGdW4uY29uc3RhbnQoZWRpdGFibGUpLFxuICAgIGRyYWdDb250YWluZXI6IEZ1bi5jb25zdGFudChlZGl0YWJsZSksXG4gICAgb3JpZ2luOiAoKSA9PiBTdWdhckxvY2F0aW9uLmFic29sdXRlKGVkaXRhYmxlKSxcbiAgICBpc1Jlc2l6YWJsZVxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IFJlc2l6ZVdpcmUgPSB7XG4gIG9ubHksXG4gIGRldGFjaGVkLFxuICBib2R5XG59O1xuXG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDc3MsIEhlaWdodCwgdHlwZSBTdWdhckVsZW1lbnQsIFdpZHRoIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQ29sdW1uU2l6ZXMgZnJvbSAnLi4vcmVzaXplL0NvbHVtblNpemVzJztcbmltcG9ydCAqIGFzIFJlZGlzdHJpYnV0aW9uIGZyb20gJy4uL3Jlc2l6ZS9SZWRpc3RyaWJ1dGlvbic7XG5pbXBvcnQgKiBhcyBTaXplcyBmcm9tICcuLi9yZXNpemUvU2l6ZXMnO1xuaW1wb3J0ICogYXMgQ2VsbFV0aWxzIGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcblxuaW1wb3J0IHR5cGUgeyBEZXRhaWxFeHQsIFJvd0RldGFpbCwgQ29sdW1uLCBEZXRhaWwgfSBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5jb25zdCByZWRpc3RyaWJ1dGVUb1cgPSAobmV3V2lkdGhzOiBzdHJpbmdbXSwgY2VsbHM6IERldGFpbEV4dFtdLCB1bml0OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgQXJyLmVhY2goY2VsbHMsIChjZWxsKSA9PiB7XG4gICAgY29uc3Qgd2lkdGhzID0gbmV3V2lkdGhzLnNsaWNlKGNlbGwuY29sdW1uLCBjZWxsLmNvbHNwYW4gKyBjZWxsLmNvbHVtbik7XG4gICAgY29uc3QgdyA9IFJlZGlzdHJpYnV0aW9uLnN1bSh3aWR0aHMsIENlbGxVdGlscy5taW5XaWR0aCgpKTtcbiAgICBDc3Muc2V0KGNlbGwuZWxlbWVudCwgJ3dpZHRoJywgdyArIHVuaXQpO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlZGlzdHJpYnV0ZVRvQ29sdW1ucyA9IChuZXdXaWR0aHM6IHN0cmluZ1tdLCBjb2x1bW5zOiBDb2x1bW5bXSwgdW5pdDogc3RyaW5nKTogdm9pZCA9PiB7XG4gIEFyci5lYWNoKGNvbHVtbnMsIChjb2x1bW4sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB3aWR0aCA9IFJlZGlzdHJpYnV0aW9uLnN1bShbIG5ld1dpZHRoc1tpbmRleF0gXSwgQ2VsbFV0aWxzLm1pbldpZHRoKCkpO1xuICAgIENzcy5zZXQoY29sdW1uLmVsZW1lbnQsICd3aWR0aCcsIHdpZHRoICsgdW5pdCk7XG4gIH0pO1xufTtcblxuY29uc3QgcmVkaXN0cmlidXRlVG9IID0gPFQgZXh0ZW5kcyBEZXRhaWw+IChuZXdIZWlnaHRzOiBzdHJpbmdbXSwgcm93czogUm93RGV0YWlsPFQ+W10sIGNlbGxzOiBEZXRhaWxFeHRbXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChjZWxscywgKGNlbGwpID0+IHtcbiAgICBDc3MucmVtb3ZlKGNlbGwuZWxlbWVudCwgJ2hlaWdodCcpO1xuICB9KTtcblxuICBBcnIuZWFjaChyb3dzLCAocm93LCBpKSA9PiB7XG4gICAgQ3NzLnNldChyb3cuZWxlbWVudCwgJ2hlaWdodCcsIG5ld0hlaWdodHNbaV0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldFVuaXQgPSAobmV3U2l6ZTogc3RyaW5nKTogJ3B4JyB8ICclJyA9PiB7XG4gIHJldHVybiBSZWRpc3RyaWJ1dGlvbi52YWxpZGF0ZShuZXdTaXplKS5mb2xkKEZ1bi5jb25zdGFudCgncHgnKSwgRnVuLmNvbnN0YW50KCdweCcpLCBGdW4uY29uc3RhbnQoJyUnKSk7XG59O1xuXG4vLyBQcm9jZWR1cmUgdG8gcmVzaXplIHRhYmxlIGRpbWVuc2lvbnMgdG8gb3B0V2lkdGggeCBvcHRIZWlnaHQgYW5kIHJlZGlzdHJpYnV0ZSBjZWxsIGFuZCByb3cgZGltZW5zaW9ucy5cbi8vIFVwZGF0ZXMgQ1NTIG9mIHRoZSB0YWJsZSwgcm93cywgYW5kIGNlbGxzLlxuY29uc3QgcmVkaXN0cmlidXRlID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIG9wdFdpZHRoOiBPcHRpb25hbDxzdHJpbmc+LCBvcHRIZWlnaHQ6IE9wdGlvbmFsPHN0cmluZz4pOiB2b2lkID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IHJvd3MgPSB3YXJlaG91c2UuYWxsO1xuICBjb25zdCBjZWxscyA9IFdhcmVob3VzZS5qdXN0Q2VsbHMod2FyZWhvdXNlKTtcbiAgY29uc3QgY29sdW1ucyA9IFdhcmVob3VzZS5qdXN0Q29sdW1ucyh3YXJlaG91c2UpO1xuXG4gIG9wdFdpZHRoLmVhY2goKG5ld1dpZHRoKSA9PiB7XG4gICAgY29uc3Qgd2lkdGhVbml0ID0gZ2V0VW5pdChuZXdXaWR0aCk7XG4gICAgY29uc3QgdG90YWxXaWR0aCA9IFdpZHRoLmdldCh0YWJsZSk7XG4gICAgY29uc3Qgb2xkV2lkdGhzID0gQ29sdW1uU2l6ZXMuZ2V0UmF3V2lkdGhzKHdhcmVob3VzZSwgdGFibGUpO1xuICAgIGNvbnN0IG51V2lkdGhzID0gUmVkaXN0cmlidXRpb24ucmVkaXN0cmlidXRlKG9sZFdpZHRocywgdG90YWxXaWR0aCwgbmV3V2lkdGgpO1xuXG4gICAgaWYgKFdhcmVob3VzZS5oYXNDb2x1bW5zKHdhcmVob3VzZSkpIHtcbiAgICAgIHJlZGlzdHJpYnV0ZVRvQ29sdW1ucyhudVdpZHRocywgY29sdW1ucywgd2lkdGhVbml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVkaXN0cmlidXRlVG9XKG51V2lkdGhzLCBjZWxscywgd2lkdGhVbml0KTtcbiAgICB9XG5cbiAgICBDc3Muc2V0KHRhYmxlLCAnd2lkdGgnLCBuZXdXaWR0aCk7XG4gIH0pO1xuXG4gIG9wdEhlaWdodC5lYWNoKChuZXdIZWlnaHQpID0+IHtcbiAgICBjb25zdCB0b3RhbEhlaWdodCA9IEhlaWdodC5nZXQodGFibGUpO1xuICAgIGNvbnN0IG9sZEhlaWdodHMgPSBDb2x1bW5TaXplcy5nZXRSYXdIZWlnaHRzKHdhcmVob3VzZSwgdGFibGUpO1xuICAgIGNvbnN0IG51SGVpZ2h0cyA9IFJlZGlzdHJpYnV0aW9uLnJlZGlzdHJpYnV0ZShvbGRIZWlnaHRzLCB0b3RhbEhlaWdodCwgbmV3SGVpZ2h0KTtcbiAgICByZWRpc3RyaWJ1dGVUb0gobnVIZWlnaHRzLCByb3dzLCBjZWxscyk7XG4gICAgQ3NzLnNldCh0YWJsZSwgJ2hlaWdodCcsIG5ld0hlaWdodCk7XG4gIH0pO1xufTtcblxuY29uc3QgaXNQZXJjZW50U2l6aW5nID0gU2l6ZXMuaXNQZXJjZW50U2l6aW5nO1xuY29uc3QgaXNQaXhlbFNpemluZyA9IFNpemVzLmlzUGl4ZWxTaXppbmc7XG5jb25zdCBpc05vbmVTaXppbmcgPSBTaXplcy5pc05vbmVTaXppbmc7XG5cbmNvbnN0IGdldFBlcmNlbnRUYWJsZVdpZHRoID0gU2l6ZXMuZ2V0UGVyY2VudFRhYmxlV2lkdGg7XG5jb25zdCBnZXRQZXJjZW50VGFibGVIZWlnaHQgPSBTaXplcy5nZXRQZXJjZW50VGFibGVIZWlnaHQ7XG5cbmV4cG9ydCB7XG4gIGdldFBlcmNlbnRUYWJsZVdpZHRoLFxuICBnZXRQZXJjZW50VGFibGVIZWlnaHQsXG4gIGlzUGVyY2VudFNpemluZyxcbiAgaXNQaXhlbFNpemluZyxcbiAgaXNOb25lU2l6aW5nLFxuICByZWRpc3RyaWJ1dGVcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50LCBSb3dFbGVtZW50LCBSb3dDZWxsIH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24ge1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb25zIHtcbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcltdO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyaWQge1xuICByZWFkb25seSByb3dzOiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzIHtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvb3JkcyB7XG4gIHJlYWRvbmx5IHg6IG51bWJlcjtcbiAgcmVhZG9ubHkgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldGFpbDxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQgPSBDZWxsRWxlbWVudD4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD47XG4gIHJlYWRvbmx5IHJvd3NwYW46IG51bWJlcjtcbiAgcmVhZG9ubHkgY29sc3BhbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldGFpbE5ldzxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQgPSBDZWxsRWxlbWVudD4gZXh0ZW5kcyBEZXRhaWw8VD4ge1xuICByZWFkb25seSBpc05ldzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXRhaWxFeHQgZXh0ZW5kcyBEZXRhaWw8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbjogbnVtYmVyO1xuICByZWFkb25seSBpc0xvY2tlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgU2VjdGlvbiA9ICd0Zm9vdCcgfCAndGhlYWQnIHwgJ3Rib2R5JyB8ICdjb2xncm91cCc7XG5jb25zdCB2YWxpZFNlY3Rpb25MaXN0OiBTZWN0aW9uW10gPSBbICd0Zm9vdCcsICd0aGVhZCcsICd0Ym9keScsICdjb2xncm91cCcgXTtcblxuZXhwb3J0IGludGVyZmFjZSBSb3dEZXRhaWw8VCBleHRlbmRzIERldGFpbDxSb3dDZWxsPFI+PiwgUiBleHRlbmRzIFJvd0VsZW1lbnQgPSBSb3dFbGVtZW50PiB7XG4gIHJlYWRvbmx5IGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPjtcbiAgcmVhZG9ubHkgY2VsbHM6IFRbXTtcbiAgcmVhZG9ubHkgc2VjdGlvbjogU2VjdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSb3dEZXRhaWxOZXc8VCBleHRlbmRzIERldGFpbDxSb3dDZWxsPFI+PiwgUiBleHRlbmRzIFJvd0VsZW1lbnQgPSBSb3dFbGVtZW50PiBleHRlbmRzIFJvd0RldGFpbDxULCBSPiB7XG4gIHJlYWRvbmx5IGlzTmV3OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJvd0NlbGxzPFIgZXh0ZW5kcyBSb3dFbGVtZW50ID0gUm93RWxlbWVudD4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Uj47XG4gIHJlYWRvbmx5IGNlbGxzOiBFbGVtZW50TmV3PFJvd0NlbGw8Uj4+W107XG4gIHJlYWRvbmx5IHNlY3Rpb246IFNlY3Rpb247XG4gIHJlYWRvbmx5IGlzTmV3OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnROZXc8VCBleHRlbmRzIENlbGxFbGVtZW50ID0gQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+O1xuICByZWFkb25seSBpc05ldzogYm9vbGVhbjtcbiAgcmVhZG9ubHkgaXNMb2NrZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+O1xuICByZWFkb25seSBjb2xzcGFuOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uRXh0IGV4dGVuZHMgQ29sdW1uIHtcbiAgcmVhZG9ubHkgY29sdW1uOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sZ3JvdXA8VCBleHRlbmRzIENvbHVtbj4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD47XG4gIHJlYWRvbmx5IGNvbHVtbnM6IFRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb3VuZHMge1xuICByZWFkb25seSBzdGFydFJvdzogbnVtYmVyO1xuICByZWFkb25seSBzdGFydENvbDogbnVtYmVyO1xuICByZWFkb25seSBmaW5pc2hSb3c6IG51bWJlcjtcbiAgcmVhZG9ubHkgZmluaXNoQ29sOiBudW1iZXI7XG59XG5cbmNvbnN0IGlzVmFsaWRTZWN0aW9uID0gKHBhcmVudE5hbWU6IHN0cmluZyk6IHBhcmVudE5hbWUgaXMgU2VjdGlvbiA9PlxuICBBcnIuY29udGFpbnModmFsaWRTZWN0aW9uTGlzdCwgcGFyZW50TmFtZSk7XG5cbmNvbnN0IGRpbWVuc2lvbiA9ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IERpbWVuc2lvbiA9PiAoe1xuICB3aWR0aCxcbiAgaGVpZ2h0XG59KTtcblxuY29uc3QgZGltZW5zaW9ucyA9ICh3aWR0aDogbnVtYmVyW10sIGhlaWdodDogbnVtYmVyW10pOiBEaW1lbnNpb25zID0+ICh7XG4gIHdpZHRoLFxuICBoZWlnaHRcbn0pO1xuXG5jb25zdCBncmlkID0gKHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyKTogR3JpZCA9PiAoe1xuICByb3dzLFxuICBjb2x1bW5zXG59KTtcblxuY29uc3QgYWRkcmVzcyA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBBZGRyZXNzID0+ICh7XG4gIHJvdyxcbiAgY29sdW1uXG59KTtcblxuY29uc3QgY29vcmRzID0gKHg6IG51bWJlciwgeTogbnVtYmVyKTogQ29vcmRzID0+ICh7XG4gIHgsXG4gIHlcbn0pO1xuXG5jb25zdCBkZXRhaWwgPSA8VCBleHRlbmRzIENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyKTogRGV0YWlsPFQ+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIHJvd3NwYW4sXG4gIGNvbHNwYW5cbn0pO1xuXG5jb25zdCBkZXRhaWxuZXcgPSA8VCBleHRlbmRzIENlbGxFbGVtZW50PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyLCBpc05ldzogYm9vbGVhbik6IERldGFpbE5ldzxUPiA9PiAoe1xuICBlbGVtZW50LFxuICByb3dzcGFuLFxuICBjb2xzcGFuLFxuICBpc05ld1xufSk7XG5cbmNvbnN0IGV4dGVuZGVkID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvd3NwYW46IG51bWJlciwgY29sc3BhbjogbnVtYmVyLCByb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIsIGlzTG9ja2VkOiBib29sZWFuKTogRGV0YWlsRXh0ID0+ICh7XG4gIGVsZW1lbnQsXG4gIHJvd3NwYW4sXG4gIGNvbHNwYW4sXG4gIHJvdyxcbiAgY29sdW1uLFxuICBpc0xvY2tlZFxufSk7XG5cbmNvbnN0IHJvd2RldGFpbCA9IDxUIGV4dGVuZHMgRGV0YWlsPFJvd0NlbGw8Uj4+LCBSIGV4dGVuZHMgUm93RWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPiwgY2VsbHM6IFRbXSwgc2VjdGlvbjogU2VjdGlvbik6IFJvd0RldGFpbDxULCBSPiA9PiAoe1xuICBlbGVtZW50LFxuICBjZWxscyxcbiAgc2VjdGlvblxufSk7XG5cbmNvbnN0IHJvd2RldGFpbG5ldyA9IDxUIGV4dGVuZHMgRGV0YWlsPFJvd0NlbGw8Uj4+LCBSIGV4dGVuZHMgUm93RWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxSPiwgY2VsbHM6IFRbXSwgc2VjdGlvbjogU2VjdGlvbiwgaXNOZXc6IGJvb2xlYW4pOiBSb3dEZXRhaWxOZXc8VCwgUj4gPT4gKHtcbiAgZWxlbWVudCxcbiAgY2VsbHMsXG4gIHNlY3Rpb24sXG4gIGlzTmV3XG59KTtcblxuY29uc3QgZWxlbWVudG5ldyA9IDxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQ+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUPiwgaXNOZXc6IGJvb2xlYW4sIGlzTG9ja2VkOiBib29sZWFuKTogRWxlbWVudE5ldzxUPiA9PiAoe1xuICBlbGVtZW50LFxuICBpc05ldyxcbiAgaXNMb2NrZWRcbn0pO1xuXG5jb25zdCByb3djZWxscyA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZWxlbWVudDogU3VnYXJFbGVtZW50PFI+LCBjZWxsczogRWxlbWVudE5ldzxSb3dDZWxsPFI+PltdLCBzZWN0aW9uOiBTZWN0aW9uLCBpc05ldzogYm9vbGVhbik6IFJvd0NlbGxzPFI+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIGNlbGxzLFxuICBzZWN0aW9uLFxuICBpc05ld1xufSk7XG5cbmNvbnN0IGJvdW5kcyA9IChzdGFydFJvdzogbnVtYmVyLCBzdGFydENvbDogbnVtYmVyLCBmaW5pc2hSb3c6IG51bWJlciwgZmluaXNoQ29sOiBudW1iZXIpOiBCb3VuZHMgPT4gKHtcbiAgc3RhcnRSb3csXG4gIHN0YXJ0Q29sLFxuICBmaW5pc2hSb3csXG4gIGZpbmlzaENvbFxufSk7XG5cbmNvbnN0IGNvbHVtbmV4dCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD4sIGNvbHNwYW46IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBDb2x1bW5FeHQgPT4gKHtcbiAgZWxlbWVudCxcbiAgY29sc3BhbixcbiAgY29sdW1uXG59KTtcblxuY29uc3QgY29sZ3JvdXAgPSA8VCBleHRlbmRzIENvbHVtbj4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDb2xFbGVtZW50PiwgY29sdW1uczogVFtdKTogQ29sZ3JvdXA8VD4gPT4gKHtcbiAgZWxlbWVudCxcbiAgY29sdW1uc1xufSk7XG5cbmV4cG9ydCB7XG4gIGRpbWVuc2lvbixcbiAgZGltZW5zaW9ucyxcbiAgZ3JpZCxcbiAgYWRkcmVzcyxcbiAgY29vcmRzLFxuICBleHRlbmRlZCxcbiAgZGV0YWlsLFxuICBkZXRhaWxuZXcsXG4gIHJvd2RldGFpbCxcbiAgZWxlbWVudG5ldyxcbiAgcm93ZGV0YWlsbmV3LFxuICByb3djZWxscyxcbiAgYm91bmRzLFxuICBpc1ZhbGlkU2VjdGlvbixcbiAgY29sdW1uZXh0LFxuICBjb2xncm91cFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21TdHJ1Y3R1cmUgfSBmcm9tICdAZXBob3gvcm9iaW4nO1xuaW1wb3J0IHsgQ29tcGFyZSwgQ3Vyc29yUG9zaXRpb24sIEluc2VydEFsbCwgUHJlZGljYXRlRmluZCwgUmVtb3ZlLCBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgU3VnYXJUZXh0LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmNvbnN0IG1lcmdlID0gKGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10pOiB2b2lkID0+IHtcbiAgY29uc3QgaXNCciA9IFN1Z2FyTm9kZS5pc1RhZygnYnInKTtcblxuICBjb25zdCBhZHZhbmNlZEJyID0gKGNoaWxkcmVuOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSkgPT4ge1xuICAgIHJldHVybiBBcnIuZm9yYWxsKGNoaWxkcmVuLCAoYykgPT4ge1xuICAgICAgcmV0dXJuIGlzQnIoYykgfHwgKFN1Z2FyTm9kZS5pc1RleHQoYykgJiYgU3VnYXJUZXh0LmdldChjKS50cmltKCkubGVuZ3RoID09PSAwKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBpc0xpc3RJdGVtID0gKGVsOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICByZXR1cm4gU3VnYXJOb2RlLm5hbWUoZWwpID09PSAnbGknIHx8IFByZWRpY2F0ZUZpbmQuYW5jZXN0b3IoZWwsIERvbVN0cnVjdHVyZS5pc0xpc3QpLmlzU29tZSgpO1xuICB9O1xuXG4gIGNvbnN0IHNpYmxpbmdJc0Jsb2NrID0gKGVsOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICByZXR1cm4gVHJhdmVyc2UubmV4dFNpYmxpbmcoZWwpLm1hcCgocmlnaHRTaWJsaW5nKSA9PiB7XG4gICAgICBpZiAoRG9tU3RydWN0dXJlLmlzQmxvY2socmlnaHRTaWJsaW5nKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChEb21TdHJ1Y3R1cmUuaXNFbXB0eVRhZyhyaWdodFNpYmxpbmcpKSB7XG4gICAgICAgIHJldHVybiBTdWdhck5vZGUubmFtZShyaWdodFNpYmxpbmcpID09PSAnaW1nJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KS5nZXRPcihmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgbWFya0NlbGwgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiBDdXJzb3JQb3NpdGlvbi5sYXN0KGNlbGwpLmJpbmQoKHJpZ2h0RWRnZSkgPT4ge1xuICAgICAgY29uc3QgcmlnaHRTaWJsaW5nSXNCbG9jayA9IHNpYmxpbmdJc0Jsb2NrKHJpZ2h0RWRnZSk7XG4gICAgICByZXR1cm4gVHJhdmVyc2UucGFyZW50KHJpZ2h0RWRnZSkubWFwKChwYXJlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIHJpZ2h0U2libGluZ0lzQmxvY2sgPT09IHRydWUgfHwgaXNMaXN0SXRlbShwYXJlbnQpIHx8IGlzQnIocmlnaHRFZGdlKSB8fCAoRG9tU3RydWN0dXJlLmlzQmxvY2socGFyZW50KSAmJiAhQ29tcGFyZS5lcShjZWxsLCBwYXJlbnQpKSA/IFtdIDogWyBTdWdhckVsZW1lbnQuZnJvbVRhZygnYnInKSBdO1xuICAgICAgfSk7XG4gICAgfSkuZ2V0T3IoW10pO1xuICB9O1xuXG4gIGNvbnN0IG1hcmtDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBBcnIuYmluZChjZWxscywgKGNlbGwpID0+IHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4oY2VsbCk7XG4gICAgICByZXR1cm4gYWR2YW5jZWRCcihjaGlsZHJlbikgPyBbIF0gOiBjaGlsZHJlbi5jb25jYXQobWFya0NlbGwoY2VsbCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAwID8gWyBTdWdhckVsZW1lbnQuZnJvbVRhZygnYnInKSBdIDogY29udGVudDtcbiAgfTtcblxuICBjb25zdCBjb250ZW50cyA9IG1hcmtDb250ZW50KCk7XG4gIFJlbW92ZS5lbXB0eShjZWxsc1swXSk7XG4gIEluc2VydEFsbC5hcHBlbmQoY2VsbHNbMF0sIGNvbnRlbnRzKTtcbn07XG5cbmV4cG9ydCB7XG4gIG1lcmdlXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENzcywgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTaXplcyBmcm9tICcuLi9yZXNpemUvU2l6ZXMnO1xuXG5pbXBvcnQgeyByZWRpc3RyaWJ1dGUgfSBmcm9tICcuL1NpemVzJztcbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4vVGFibGVMb29rdXAnO1xuXG4vLyBSZW1vdmUgbGVnYWN5IHNpemluZyBhdHRyaWJ1dGVzIHN1Y2ggYXMgXCJ3aWR0aFwiXG5jb25zdCBjbGVhbnVwTGVnYWN5QXR0cmlidXRlcyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIEF0dHJpYnV0ZS5yZW1vdmUoZWxlbWVudCwgJ3dpZHRoJyk7XG4gIEF0dHJpYnV0ZS5yZW1vdmUoZWxlbWVudCwgJ2hlaWdodCcpO1xufTtcblxuY29uc3QgY29udmVydFRvUGVyY2VudFNpemVXaWR0aCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIGNvbnN0IG5ld1dpZHRoID0gU2l6ZXMuZ2V0UGVyY2VudFRhYmxlV2lkdGgodGFibGUpO1xuICByZWRpc3RyaWJ1dGUodGFibGUsIE9wdGlvbmFsLnNvbWUobmV3V2lkdGgpLCBPcHRpb25hbC5ub25lKCkpO1xuICBjbGVhbnVwTGVnYWN5QXR0cmlidXRlcyh0YWJsZSk7XG59O1xuXG5jb25zdCBjb252ZXJ0VG9QaXhlbFNpemVXaWR0aCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIGNvbnN0IG5ld1dpZHRoID0gU2l6ZXMuZ2V0UGl4ZWxUYWJsZVdpZHRoKHRhYmxlKTtcbiAgcmVkaXN0cmlidXRlKHRhYmxlLCBPcHRpb25hbC5zb21lKG5ld1dpZHRoKSwgT3B0aW9uYWwubm9uZSgpKTtcbiAgY2xlYW51cExlZ2FjeUF0dHJpYnV0ZXModGFibGUpO1xufTtcblxuY29uc3QgY29udmVydFRvUGl4ZWxTaXplSGVpZ2h0ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgY29uc3QgbmV3SGVpZ2h0ID0gU2l6ZXMuZ2V0UGl4ZWxUYWJsZUhlaWdodCh0YWJsZSk7XG4gIHJlZGlzdHJpYnV0ZSh0YWJsZSwgT3B0aW9uYWwubm9uZSgpLCBPcHRpb25hbC5zb21lKG5ld0hlaWdodCkpO1xuICBjbGVhbnVwTGVnYWN5QXR0cmlidXRlcyh0YWJsZSk7XG59O1xuXG5jb25zdCBjb252ZXJ0VG9Ob25lU2l6ZVdpZHRoID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgQ3NzLnJlbW92ZSh0YWJsZSwgJ3dpZHRoJyk7XG4gIGNvbnN0IGNvbHVtbnMgPSBUYWJsZUxvb2t1cC5jb2x1bW5zKHRhYmxlKTtcbiAgY29uc3Qgcm93RWxlbWVudHM6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD5bXSA9IGNvbHVtbnMubGVuZ3RoID4gMCA/IGNvbHVtbnMgOiBUYWJsZUxvb2t1cC5jZWxscyh0YWJsZSk7XG5cbiAgQXJyLmVhY2gocm93RWxlbWVudHMsIChjZWxsKSA9PiB7XG4gICAgQ3NzLnJlbW92ZShjZWxsLCAnd2lkdGgnKTtcbiAgICBjbGVhbnVwTGVnYWN5QXR0cmlidXRlcyhjZWxsKTtcbiAgfSk7XG4gIGNsZWFudXBMZWdhY3lBdHRyaWJ1dGVzKHRhYmxlKTtcbn07XG5cbmV4cG9ydCB7XG4gIGNvbnZlcnRUb1BpeGVsU2l6ZVdpZHRoLFxuICBjb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoLFxuICBjb252ZXJ0VG9Ob25lU2l6ZVdpZHRoLFxuICBjb252ZXJ0VG9QaXhlbFNpemVIZWlnaHRcbn07XG5cbiIsImltcG9ydCB7IEFyciwgT2JqLCB0eXBlIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgQ29tcGFyZSwgQ3NzLCBDdXJzb3JQb3NpdGlvbiwgSW5zZXJ0LCBSZXBsaWNhdGlvbiwgU2VsZWN0b3JGaWx0ZXIsIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCB0eXBlIHsgQ2VsbERhdGEsIEdlbmVyYXRvcnMsIFNpbXBsZUdlbmVyYXRvcnMgfSBmcm9tICcuL0dlbmVyYXRvcnMnO1xuXG5jb25zdCB0cmFuc2ZlcmFibGVBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gIHNjb3BlOiBbXG4gICAgJ3JvdycsXG4gICAgJ2NvbCdcbiAgXVxufTtcblxuLy8gTk9URTogVGhpcyBtYXkgY3JlYXRlIGEgdGQgaW5zdGVhZCBvZiBhIHRoLCBidXQgaXQgaXMgZm9yIGlycmVndWxhciB0YWJsZSBoYW5kbGluZy5cbmNvbnN0IGNyZWF0ZUNlbGwgPSAoZG9jOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+KSA9PiAoKSA9PiB7XG4gIGNvbnN0IHRkID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ3RkJywgZG9jLmRvbSk7XG4gIEluc2VydC5hcHBlbmQodGQsIFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdicicsIGRvYy5kb20pKTtcbiAgcmV0dXJuIHRkO1xufTtcblxuY29uc3QgY3JlYXRlQ29sID0gKGRvYzogU3VnYXJFbGVtZW50PERvY3VtZW50PikgPT4gKCkgPT4ge1xuICByZXR1cm4gU3VnYXJFbGVtZW50LmZyb21UYWcoJ2NvbCcsIGRvYy5kb20pO1xufTtcblxuY29uc3QgY3JlYXRlQ29sZ3JvdXAgPSAoZG9jOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+KSA9PiAoKSA9PiB7XG4gIHJldHVybiBTdWdhckVsZW1lbnQuZnJvbVRhZygnY29sZ3JvdXAnLCBkb2MuZG9tKTtcbn07XG5cbmNvbnN0IGNyZWF0ZVJvdyA9IChkb2M6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pID0+ICgpID0+IHtcbiAgcmV0dXJuIFN1Z2FyRWxlbWVudC5mcm9tVGFnKCd0cicsIGRvYy5kb20pO1xufTtcblxuY29uc3QgcmVwbGFjZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCB0YWc6ICd0ZCcgfCAndGgnLCBhdHRyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG51bGw+KSA9PiB7XG4gIGNvbnN0IHJlcGxpY2EgPSBSZXBsaWNhdGlvbi5jb3B5KGNlbGwsIHRhZyk7XG4gIC8vIFRPRE86IFNub29rZXIgcGFzc2VzIG51bGwgdG8gaW5kaWNhdGUgJ3JlbW92ZSBhdHRyaWJ1dGUnXG4gIE9iai5lYWNoKGF0dHJzLCAodiwgaykgPT4ge1xuICAgIGlmICh2ID09PSBudWxsKSB7XG4gICAgICBBdHRyaWJ1dGUucmVtb3ZlKHJlcGxpY2EsIGspO1xuICAgIH0gZWxzZSB7XG4gICAgICBBdHRyaWJ1dGUuc2V0KHJlcGxpY2EsIGssIHYpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXBsaWNhO1xufTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0aW55bWNlL3ByZWZlci1mdW5cbmNvbnN0IHBhc3RlUmVwbGFjZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiB7XG4gIC8vIFRPRE86IGNoZWNrIGZvciBlbXB0eSBjb250ZW50IGFuZCBkb24ndCByZXR1cm4gYW55dGhpbmdcbiAgcmV0dXJuIGNlbGw7XG59O1xuXG5jb25zdCBjbG9uZUZvcm1hdHMgPSAob2xkQ2VsbDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBuZXdDZWxsOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGZvcm1hdHM6IHN0cmluZ1tdKSA9PiB7XG4gIGNvbnN0IGZpcnN0ID0gQ3Vyc29yUG9zaXRpb24uZmlyc3Qob2xkQ2VsbCk7XG4gIHJldHVybiBmaXJzdC5tYXAoKGZpcnN0VGV4dCkgPT4ge1xuICAgIGNvbnN0IGZvcm1hdFNlbGVjdG9yID0gZm9ybWF0cy5qb2luKCcsJyk7XG4gICAgLy8gRmluZCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBmaXJzdCB0ZXh0IG5vZGUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gZm9ybWF0cy5cbiAgICBjb25zdCBwYXJlbnRzID0gU2VsZWN0b3JGaWx0ZXIuYW5jZXN0b3JzKGZpcnN0VGV4dCwgZm9ybWF0U2VsZWN0b3IsIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gQ29tcGFyZS5lcShlbGVtZW50LCBvbGRDZWxsKTtcbiAgICB9KTtcbiAgICAvLyBBZGQgdGhlIG1hdGNoZWQgYW5jZXN0b3JzIHRvIHRoZSBuZXcgY2VsbCwgdGhlbiByZXR1cm4gdGhlIG5ldyBjZWxsLlxuICAgIHJldHVybiBBcnIuZm9sZHIocGFyZW50cywgKGxhc3QsIHBhcmVudCkgPT4ge1xuICAgICAgY29uc3QgY2xvbmVkRm9ybWF0ID0gUmVwbGljYXRpb24uc2hhbGxvdyhwYXJlbnQpO1xuICAgICAgSW5zZXJ0LmFwcGVuZChsYXN0LCBjbG9uZWRGb3JtYXQpO1xuICAgICAgcmV0dXJuIGNsb25lZEZvcm1hdDtcbiAgICB9LCBuZXdDZWxsKTtcbiAgfSkuZ2V0T3IobmV3Q2VsbCk7XG59O1xuXG5jb25zdCBjbG9uZUFwcHJvcHJpYXRlQXR0cmlidXRlcyA9IDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8VD4sIGNsb25lOiBTdWdhckVsZW1lbnQ8VD4pOiB2b2lkID0+IHtcbiAgT2JqLmVhY2godHJhbnNmZXJhYmxlQXR0cmlidXRlcywgKHZhbGlkQXR0cmlidXRlcywgYXR0cmlidXRlTmFtZSkgPT5cbiAgICBBdHRyaWJ1dGUuZ2V0T3B0KG9yaWdpbmFsLCBhdHRyaWJ1dGVOYW1lKVxuICAgICAgLmZpbHRlcigoYXR0cmlidXRlKSA9PiBBcnIuY29udGFpbnModmFsaWRBdHRyaWJ1dGVzLCBhdHRyaWJ1dGUpKVxuICAgICAgLmVhY2goKGF0dHJpYnV0ZSkgPT4gQXR0cmlidXRlLnNldChjbG9uZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlKSlcbiAgKTtcbn07XG5cbmNvbnN0IGNlbGxPcGVyYXRpb25zID0gKG11dGF0ZTogKGUxOiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+LCBlMjogU3VnYXJFbGVtZW50PENlbGxFbGVtZW50PikgPT4gdm9pZCwgZG9jOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+LCBmb3JtYXRzVG9DbG9uZTogT3B0aW9uYWw8c3RyaW5nW10+KTogR2VuZXJhdG9ycyA9PiB7XG4gIGNvbnN0IGNsb25lQ3NzID0gPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gKHByZXY6IENlbGxEYXRhLCBjbG9uZTogU3VnYXJFbGVtZW50PFQ+KSA9PiB7XG4gICAgLy8gaW5oZXJpdCB0aGUgc3R5bGUgYW5kIHdpZHRoLCBkb250IGluaGVyaXQgdGhlIHJvdyBoZWlnaHRcbiAgICBDc3MuY29weShwcmV2LmVsZW1lbnQsIGNsb25lKTtcbiAgICBDc3MucmVtb3ZlKGNsb25lLCAnaGVpZ2h0Jyk7XG4gICAgLy8gZG9udCBpbmhlcml0IHRoZSB3aWR0aCBvZiBzcGFubmluZyBjb2x1bW5zXG4gICAgaWYgKHByZXYuY29sc3BhbiAhPT0gMSkge1xuICAgICAgQ3NzLnJlbW92ZShjbG9uZSwgJ3dpZHRoJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG5ld0NlbGwgPSAocHJldjogQ2VsbERhdGEpID0+IHtcbiAgICBjb25zdCB0ZCA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKFN1Z2FyTm9kZS5uYW1lKHByZXYuZWxlbWVudCkgYXMgJ3RkJyB8ICd0aCcsIGRvYy5kb20pO1xuXG4gICAgY29uc3QgZm9ybWF0cyA9IGZvcm1hdHNUb0Nsb25lLmdldE9yKFsgJ3N0cm9uZycsICdlbScsICdiJywgJ2knLCAnc3BhbicsICdmb250JywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ3AnLCAnZGl2JyBdKTtcblxuICAgIC8vIElmIHdlIGFyZW4ndCBjbG9uaW5nIHRoZSBjaGlsZCBmb3JtYXR0aW5nLCB3ZSBjYW4ganVzdCBnaXZlIGJhY2sgdGhlIG5ldyB0ZCBpbW1lZGlhdGVseS5cbiAgICBjb25zdCBsYXN0Tm9kZSA9IGZvcm1hdHMubGVuZ3RoID4gMCA/IGNsb25lRm9ybWF0cyhwcmV2LmVsZW1lbnQsIHRkLCBmb3JtYXRzKSA6IHRkO1xuICAgIEluc2VydC5hcHBlbmQobGFzdE5vZGUsIFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdicicpKTtcblxuICAgIGNsb25lQ3NzKHByZXYsIHRkKTtcbiAgICBjbG9uZUFwcHJvcHJpYXRlQXR0cmlidXRlcyhwcmV2LmVsZW1lbnQsIHRkKTtcbiAgICBtdXRhdGUocHJldi5lbGVtZW50LCB0ZCk7XG4gICAgcmV0dXJuIHRkO1xuICB9O1xuXG4gIGNvbnN0IG5ld0NvbCA9IChwcmV2OiBDZWxsRGF0YSkgPT4ge1xuICAgIGNvbnN0IGNvbCA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKFN1Z2FyTm9kZS5uYW1lKHByZXYuZWxlbWVudCkgYXMgJ2NvbCcsIGRvYy5kb20pO1xuICAgIGNsb25lQ3NzKHByZXYsIGNvbCk7XG4gICAgbXV0YXRlKHByZXYuZWxlbWVudCwgY29sKTtcbiAgICByZXR1cm4gY29sO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY29sOiBuZXdDb2wsXG4gICAgY29sZ3JvdXA6IGNyZWF0ZUNvbGdyb3VwKGRvYyksXG4gICAgcm93OiBjcmVhdGVSb3coZG9jKSxcbiAgICBjZWxsOiBuZXdDZWxsLFxuICAgIHJlcGxhY2UsXG4gICAgY29sR2FwOiBjcmVhdGVDb2woZG9jKSxcbiAgICBnYXA6IGNyZWF0ZUNlbGwoZG9jKVxuICB9O1xufTtcblxuY29uc3QgcGFzdGUgPSAoZG9jOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+KTogU2ltcGxlR2VuZXJhdG9ycyA9PiB7XG4gIHJldHVybiB7XG4gICAgY29sOiBjcmVhdGVDb2woZG9jKSxcbiAgICBjb2xncm91cDogY3JlYXRlQ29sZ3JvdXAoZG9jKSxcbiAgICByb3c6IGNyZWF0ZVJvdyhkb2MpLFxuICAgIGNlbGw6IGNyZWF0ZUNlbGwoZG9jKSxcbiAgICByZXBsYWNlOiBwYXN0ZVJlcGxhY2UsXG4gICAgY29sR2FwOiBjcmVhdGVDb2woZG9jKSxcbiAgICBnYXA6IGNyZWF0ZUNlbGwoZG9jKVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgY2VsbE9wZXJhdGlvbnMsXG4gIHBhc3RlXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IEdyaWQgfSBmcm9tICcuL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5jb25zdCBnZXRHcmlkU2l6ZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogR3JpZCA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICByZXR1cm4gd2FyZWhvdXNlLmdyaWQ7XG59O1xuXG5leHBvcnQge1xuICBnZXRHcmlkU2l6ZVxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBTZWxlY3RvckZpbHRlciwgU2VsZWN0b3JGaW5kLCBTZWxlY3RvcnMsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUsIFRyYXZlcnNlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgZ2V0QXR0clZhbHVlIH0gZnJvbSAnLi4vdXRpbC9DZWxsVXRpbHMnO1xuaW1wb3J0ICogYXMgTGF5ZXJTZWxlY3RvciBmcm9tICcuLi91dGlsL0xheWVyU2VsZWN0b3InO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4vU3RydWN0cyc7XG5cbnR5cGUgSXNSb290Rm4gPSAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuO1xuXG4vLyBsb29rdXAgaW5zaWRlIHRoaXMgdGFibGVcbmNvbnN0IGxvb2t1cCA9IDxUIGV4dGVuZHMgRWxlbWVudD4gKHRhZ3M6IHN0cmluZ1tdLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdDogSXNSb290Rm4gPSBGdW4ubmV2ZXIpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+IHtcbiAgLy8gSWYgdGhlIGVsZW1lbnQgd2UncmUgaW5zcGVjdGluZyBpcyB0aGUgcm9vdCwgd2UgZGVmaW5pdGVseSBkb24ndCB3YW50IGl0LlxuICBpZiAoaXNSb290KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgfVxuICAvLyBUaGlzIGxvb2tzIGEgbG90IGxpa2UgU2VsZWN0b3JGaW5kLmNsb3Nlc3QsIHdpdGggb25lIGJpZyBleGNlcHRpb24gLSB0aGUgaXNSb290IGNoZWNrLlxuICAvLyBUaGUgY29kZSBoZXJlIHdpbGwgbG9vayBmb3IgcGFyZW50cyBpZiBwYXNzZWQgYSB0YWJsZSwgU2VsZWN0b3JGaW5kLmNsb3Nlc3Qgd2l0aCB0aGF0IHNwZWNpZmljIGlzUm9vdCBjaGVjayB3b24ndC5cbiAgaWYgKEFyci5jb250YWlucyh0YWdzLCBTdWdhck5vZGUubmFtZShlbGVtZW50KSkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZShlbGVtZW50IGFzIFN1Z2FyRWxlbWVudDxUPik7XG4gIH1cblxuICBjb25zdCBpc1Jvb3RPclVwcGVyVGFibGUgPSAoZWxtOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFNlbGVjdG9ycy5pcyhlbG0sICd0YWJsZScpIHx8IGlzUm9vdChlbG0pO1xuXG4gIHJldHVybiBTZWxlY3RvckZpbmQuYW5jZXN0b3I8VD4oZWxlbWVudCwgdGFncy5qb2luKCcsJyksIGlzUm9vdE9yVXBwZXJUYWJsZSk7XG59O1xuXG4vKlxuICogSWRlbnRpZnkgdGhlIG9wdGlvbmFsIGNlbGwgdGhhdCBlbGVtZW50IHJlcHJlc2VudHMuXG4gKi9cbmNvbnN0IGNlbGwgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q/OiBJc1Jvb3RGbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+ID0+XG4gIGxvb2t1cDxIVE1MVGFibGVDZWxsRWxlbWVudD4oWyAndGQnLCAndGgnIF0sIGVsZW1lbnQsIGlzUm9vdCk7XG5cbmNvbnN0IGNlbGxzID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPT5cbiAgTGF5ZXJTZWxlY3Rvci5maXJzdExheWVyKGFuY2VzdG9yLCAndGgsdGQnKTtcblxuY29uc3QgY29sdW1ucyA9IChhbmNlc3RvcjogU3VnYXJFbGVtZW50PE5vZGU+KTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10gPT4ge1xuICBpZiAoU2VsZWN0b3JzLmlzKGFuY2VzdG9yLCAnY29sZ3JvdXAnKSkge1xuICAgIHJldHVybiBTZWxlY3RvckZpbHRlci5jaGlsZHJlbjxIVE1MVGFibGVDb2xFbGVtZW50PihhbmNlc3RvciwgJ2NvbCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBBcnIuYmluZChjb2x1bW5Hcm91cHMoYW5jZXN0b3IpLCAoY29sdW1uR3JvdXApID0+XG4gICAgICBTZWxlY3RvckZpbHRlci5jaGlsZHJlbjxIVE1MVGFibGVDb2xFbGVtZW50Pihjb2x1bW5Hcm91cCwgJ2NvbCcpXG4gICAgKTtcbiAgfVxufTtcblxuY29uc3Qgbm90Q2VsbCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IElzUm9vdEZuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEVsZW1lbnQ+PiA9PlxuICBsb29rdXA8RWxlbWVudD4oWyAnY2FwdGlvbicsICd0cicsICd0Ym9keScsICd0Zm9vdCcsICd0aGVhZCcgXSwgZWxlbWVudCwgaXNSb290KTtcblxuY29uc3QgbmVpZ2hib3VycyA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzZWxlY3Rvcjogc3RyaW5nKSA9PiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+W10+ID0+XG4gIFRyYXZlcnNlLnBhcmVudChlbGVtZW50KS5tYXAoKHBhcmVudCkgPT4gU2VsZWN0b3JGaWx0ZXIuY2hpbGRyZW4ocGFyZW50LCBzZWxlY3RvcikpO1xuXG5jb25zdCBuZWlnaGJvdXJDZWxscyA9IG5laWdoYm91cnM8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KCd0aCx0ZCcpO1xuY29uc3QgbmVpZ2hib3VyUm93cyA9IG5laWdoYm91cnM8SFRNTFRhYmxlUm93RWxlbWVudD4oJ3RyJyk7XG5cbmNvbnN0IGZpcnN0Q2VsbCA9IChhbmNlc3RvcjogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4gPT5cbiAgU2VsZWN0b3JGaW5kLmRlc2NlbmRhbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KGFuY2VzdG9yLCAndGgsdGQnKTtcblxuY29uc3QgdGFibGUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpc1Jvb3Q/OiBJc1Jvb3RGbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pj4gPT5cbiAgU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8SFRNTFRhYmxlRWxlbWVudD4oZWxlbWVudCwgJ3RhYmxlJywgaXNSb290KTtcblxuY29uc3Qgcm93ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgaXNSb290PzogSXNSb290Rm4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudD4+ID0+XG4gIGxvb2t1cDxIVE1MVGFibGVSb3dFbGVtZW50PihbICd0cicgXSwgZWxlbWVudCwgaXNSb290KTtcblxuY29uc3Qgcm93cyA9IChhbmNlc3RvcjogU3VnYXJFbGVtZW50PE5vZGU+KTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10gPT5cbiAgTGF5ZXJTZWxlY3Rvci5maXJzdExheWVyKGFuY2VzdG9yLCAndHInKTtcblxuY29uc3QgY29sdW1uR3JvdXBzID0gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9PiB0YWJsZShhbmNlc3RvcikuZm9sZChcbiAgRnVuLmNvbnN0YW50KFtdKSxcbiAgKHRhYmxlKSA9PiBTZWxlY3RvckZpbHRlci5jaGlsZHJlbjxIVE1MVGFibGVDb2xFbGVtZW50Pih0YWJsZSwgJ2NvbGdyb3VwJylcbik7XG5cbmNvbnN0IGF0dHIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBwcm9wZXJ0eTogc3RyaW5nKTogbnVtYmVyID0+XG4gIGdldEF0dHJWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSk7XG5cbmNvbnN0IGdyaWQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCByb3dQcm9wOiBzdHJpbmcsIGNvbFByb3A6IHN0cmluZyk6IFN0cnVjdHMuR3JpZCA9PiB7XG4gIGNvbnN0IHJvd3NDb3VudCA9IGF0dHIoZWxlbWVudCwgcm93UHJvcCk7XG4gIGNvbnN0IGNvbHMgPSBhdHRyKGVsZW1lbnQsIGNvbFByb3ApO1xuICByZXR1cm4gU3RydWN0cy5ncmlkKHJvd3NDb3VudCwgY29scyk7XG59O1xuXG5leHBvcnQge1xuICBjZWxsLFxuICBmaXJzdENlbGwsXG4gIGNlbGxzLFxuICBuZWlnaGJvdXJDZWxscyxcbiAgdGFibGUsXG4gIHJvdyxcbiAgcm93cyxcbiAgbm90Q2VsbCxcbiAgbmVpZ2hib3VyUm93cyxcbiAgYXR0cixcbiAgZ3JpZCxcbiAgY29sdW1uR3JvdXBzLFxuICBjb2x1bW5zXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsLCBPcHRpb25hbHMgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQ29udGVudEVkaXRhYmxlLCBSZW1vdmUsIHR5cGUgU3VnYXJFbGVtZW50LCBXaWR0aCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIEJsb2NrcyBmcm9tICcuLi9sb29rdXAvQmxvY2tzJztcbmltcG9ydCB7IGZpbmRDb21tb25DZWxsVHlwZSwgZmluZENvbW1vblJvd1R5cGUgfSBmcm9tICcuLi9sb29rdXAvVHlwZSc7XG5pbXBvcnQgKiBhcyBEZXRhaWxzTGlzdCBmcm9tICcuLi9tb2RlbC9EZXRhaWxzTGlzdCc7XG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4uL21vZGVsL0dyaWRSb3cnO1xuaW1wb3J0ICogYXMgUnVuT3BlcmF0aW9uIGZyb20gJy4uL21vZGVsL1J1bk9wZXJhdGlvbic7XG5pbXBvcnQgKiBhcyBUYWJsZU1lcmdlIGZyb20gJy4uL21vZGVsL1RhYmxlTWVyZ2UnO1xuaW1wb3J0ICogYXMgVHJhbnNpdGlvbnMgZnJvbSAnLi4vbW9kZWwvVHJhbnNpdGlvbnMnO1xuaW1wb3J0ICogYXMgTWVyZ2luZ09wZXJhdGlvbnMgZnJvbSAnLi4vb3BlcmF0ZS9NZXJnaW5nT3BlcmF0aW9ucyc7XG5pbXBvcnQgKiBhcyBNb2RpZmljYXRpb25PcGVyYXRpb25zIGZyb20gJy4uL29wZXJhdGUvTW9kaWZpY2F0aW9uT3BlcmF0aW9ucyc7XG5pbXBvcnQgKiBhcyBUcmFuc2Zvcm1PcGVyYXRpb25zIGZyb20gJy4uL29wZXJhdGUvVHJhbnNmb3JtT3BlcmF0aW9ucyc7XG5pbXBvcnQgKiBhcyBBZGp1c3RtZW50cyBmcm9tICcuLi9yZXNpemUvQWRqdXN0bWVudHMnO1xuaW1wb3J0ICogYXMgQ29sVXRpbHMgZnJvbSAnLi4vdXRpbC9Db2xVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0gfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgeyBHZW5lcmF0b3JzLCB0eXBlIEdlbmVyYXRvcnNNZXJnaW5nLCB0eXBlIEdlbmVyYXRvcnNNb2RpZmljYXRpb24sIHR5cGUgR2VuZXJhdG9yc1RyYW5zZm9ybSwgdHlwZSBTaW1wbGVHZW5lcmF0b3JzIH0gZnJvbSAnLi9HZW5lcmF0b3JzJztcbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIFRhYmxlQ29udGVudCBmcm9tICcuL1RhYmxlQ29udGVudCc7XG5pbXBvcnQgKiBhcyBUYWJsZUxvb2t1cCBmcm9tICcuL1RhYmxlTG9va3VwJztcbmltcG9ydCB0eXBlIHsgVGFibGVTZWN0aW9uIH0gZnJvbSAnLi9UYWJsZVNlY3Rpb24nO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlT3BlcmF0aW9uUmVzdWx0IHtcbiAgcmVhZG9ubHkgZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdO1xuICByZWFkb25seSBjdXJzb3I6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+O1xufVxuXG50eXBlIEV4dHJhY3RNZXJnYWJsZSA9IFJ1bk9wZXJhdGlvbi5FeHRyYWN0TWVyZ2FibGU7XG50eXBlIEV4dHJhY3RQYXN0ZSA9IFJ1bk9wZXJhdGlvbi5FeHRyYWN0UGFzdGU7XG50eXBlIEV4dHJhY3RQYXN0ZVJvd3MgPSBSdW5PcGVyYXRpb24uRXh0cmFjdFBhc3RlUm93cztcbnR5cGUgVGFyZ2V0U2VsZWN0aW9uID0gUnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbjtcblxuaW50ZXJmYWNlIEV4dHJhY3RDb2xEZXRhaWwge1xuICByZWFkb25seSBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0O1xuICByZWFkb25seSBwaXhlbERlbHRhOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBFeHRyYWN0Q29sc0RldGFpbCB7XG4gIHJlYWRvbmx5IGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W107XG4gIHJlYWRvbmx5IHBpeGVsRGVsdGE6IG51bWJlcjtcbn1cblxuLy8gVGhpcyB1c2VzIGEgc2xpZ2h0IHZhcmlhdGlvbiB0byB0aGUgZGVmYXVsdCBgQ29udGVudEVkaXRhYmxlLmlzRWRpdGFibGVgIGJlaGF2aW91cixcbi8vIGFzIHdoZW4gdGhlIGVsZW1lbnQgaXMgZGV0YWNoZWQgd2UgYXNzdW1lIGl0IGlzIGVkaXRhYmxlIGJlY2F1c2UgaXQgaXMgYSBuZXcgY2VsbC5cbmNvbnN0IGlzRWRpdGFibGUgPSAoZWxlbTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT5cbiAgQ29udGVudEVkaXRhYmxlLmlzRWRpdGFibGUoZWxlbSwgdHJ1ZSk7XG5cbmNvbnN0IHBydW5lID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IHtcbiAgY29uc3QgY2VsbHMgPSBUYWJsZUxvb2t1cC5jZWxscyh0YWJsZSk7XG4gIGlmIChjZWxscy5sZW5ndGggPT09IDApIHtcbiAgICBSZW1vdmUucmVtb3ZlKHRhYmxlKTtcbiAgfVxufTtcblxuY29uc3Qgb3V0Y29tZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGN1cnNvcjogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4pOiBUYWJsZU9wZXJhdGlvblJlc3VsdCA9PiAoe1xuICBncmlkLFxuICBjdXJzb3Jcbn0pO1xuXG5jb25zdCBmaW5kRWRpdGFibGVDdXJzb3JQb3NpdGlvbiA9IChyb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10pID0+XG4gIEFyci5maW5kTWFwKHJvd3MsIChyb3cpID0+XG4gICAgQXJyLmZpbmRNYXAocm93LmNlbGxzLCAoY2VsbCkgPT4ge1xuICAgICAgY29uc3QgZWxlbSA9IGNlbGwuZWxlbWVudDtcbiAgICAgIHJldHVybiBPcHRpb25hbHMuc29tZUlmKGlzRWRpdGFibGUoZWxlbSksIGVsZW0pO1xuICAgIH0pXG4gICk7XG5cbmNvbnN0IGVsZW1lbnRGcm9tR3JpZCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcikgPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgcmV0dXJuIE9wdGlvbmFsLmZyb20ocm93c1tyb3ddPy5jZWxsc1tjb2x1bW5dPy5lbGVtZW50KVxuICAgIC5maWx0ZXIoaXNFZGl0YWJsZSlcbiAgICAvLyBGYWxsYmFjayB0byB0aGUgZmlyc3QgdmFsaWQgcG9zaXRpb24gaW4gdGhlIHRhYmxlXG4gICAgLm9yVGh1bmsoKCkgPT4gZmluZEVkaXRhYmxlQ3Vyc29yUG9zaXRpb24ocm93cykpO1xufTtcblxuY29uc3QgYnVuZGxlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGN1cnNvckVsZW1lbnQgPSBlbGVtZW50RnJvbUdyaWQoZ3JpZCwgcm93LCBjb2x1bW4pO1xuICByZXR1cm4gb3V0Y29tZShncmlkLCBjdXJzb3JFbGVtZW50KTtcbn07XG5cbmNvbnN0IHVuaXF1ZVJvd3MgPSAoZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSkgPT4ge1xuICBjb25zdCByb3dDb21waWxhdGlvbiA9IChyZXN0OiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0KSA9PiB7XG4gICAgY29uc3Qgcm93RXhpc3RzID0gQXJyLmV4aXN0cyhyZXN0LCAoY3VycmVudERldGFpbCkgPT4gY3VycmVudERldGFpbC5yb3cgPT09IGRldGFpbC5yb3cpO1xuXG4gICAgcmV0dXJuIHJvd0V4aXN0cyA/IHJlc3QgOiByZXN0LmNvbmNhdChbIGRldGFpbCBdKTtcbiAgfTtcblxuICByZXR1cm4gQXJyLmZvbGRsKGRldGFpbHMsIHJvd0NvbXBpbGF0aW9uLCBbXSkuc29ydCgoZGV0YWlsQSwgZGV0YWlsQikgPT5cbiAgICBkZXRhaWxBLnJvdyAtIGRldGFpbEIucm93XG4gICk7XG59O1xuXG5jb25zdCBvcEluc2VydFJvd0JlZm9yZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGV4YW1wbGUgPSBkZXRhaWwucm93O1xuICBjb25zdCB0YXJnZXRJbmRleCA9IGRldGFpbC5yb3c7XG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydFJvd0F0KGdyaWQsIHRhcmdldEluZGV4LCBleGFtcGxlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIHRhcmdldEluZGV4LCBkZXRhaWwuY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Um93c0JlZm9yZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gZGV0YWlsc1swXS5yb3c7XG4gIGNvbnN0IHJvd3MgPSB1bmlxdWVSb3dzKGRldGFpbHMpO1xuICBjb25zdCBuZXdHcmlkID0gQXJyLmZvbGRyKHJvd3MsIChhY2MsIHJvdykgPT4ge1xuICAgIGNvbnN0IG5ld0cgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydFJvd0F0KGFjYy5ncmlkLCB0YXJnZXRJbmRleCwgcm93LnJvdyArIGFjYy5kZWx0YSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgICByZXR1cm4geyBncmlkOiBuZXdHLCBkZWx0YTogYWNjLmRlbHRhICsgMSB9O1xuICB9LCB7IGdyaWQsIGRlbHRhOiAwIH0pLmdyaWQ7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgdGFyZ2V0SW5kZXgsIGRldGFpbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Um93QWZ0ZXIgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0LCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBleGFtcGxlID0gZGV0YWlsLnJvdztcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSBkZXRhaWwucm93ICsgZGV0YWlsLnJvd3NwYW47XG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydFJvd0F0KGdyaWQsIHRhcmdldEluZGV4LCBleGFtcGxlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIHRhcmdldEluZGV4LCBkZXRhaWwuY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Um93c0FmdGVyID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3Qgcm93cyA9IHVuaXF1ZVJvd3MoZGV0YWlscyk7XG4gIGNvbnN0IHRhcmdldCA9IHJvd3Nbcm93cy5sZW5ndGggLSAxXTtcbiAgY29uc3QgdGFyZ2V0SW5kZXggPSB0YXJnZXQucm93ICsgdGFyZ2V0LnJvd3NwYW47XG4gIGNvbnN0IG5ld0dyaWQgPSBBcnIuZm9sZHIocm93cywgKG5ld0csIHJvdykgPT4ge1xuICAgIHJldHVybiBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydFJvd0F0KG5ld0csIHRhcmdldEluZGV4LCByb3cucm93LCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICB9LCBncmlkKTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCB0YXJnZXRJbmRleCwgZGV0YWlsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BJbnNlcnRDb2x1bW5CZWZvcmUgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBleHRyYWN0RGV0YWlsOiBFeHRyYWN0Q29sRGV0YWlsLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBkZXRhaWwgPSBleHRyYWN0RGV0YWlsLmRldGFpbDtcbiAgY29uc3QgZXhhbXBsZSA9IGRldGFpbC5jb2x1bW47XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gZGV0YWlsLmNvbHVtbjtcbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Q29sdW1uQXQoZ3JpZCwgdGFyZ2V0SW5kZXgsIGV4YW1wbGUsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgdGFyZ2V0SW5kZXgpO1xufTtcblxuY29uc3Qgb3BJbnNlcnRDb2x1bW5zQmVmb3JlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZXh0cmFjdERldGFpbDogRXh0cmFjdENvbHNEZXRhaWwsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGRldGFpbHMgPSBleHRyYWN0RGV0YWlsLmRldGFpbHM7XG4gIGNvbnN0IGNvbHVtbnMgPSBDb2xVdGlscy51bmlxdWVDb2x1bW5zKGRldGFpbHMpO1xuICBjb25zdCB0YXJnZXRJbmRleCA9IGNvbHVtbnNbMF0uY29sdW1uO1xuICBjb25zdCBuZXdHcmlkID0gQXJyLmZvbGRyKGNvbHVtbnMsIChhY2MsIGNvbCkgPT4ge1xuICAgIGNvbnN0IG5ld0cgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmluc2VydENvbHVtbkF0KGFjYy5ncmlkLCB0YXJnZXRJbmRleCwgY29sLmNvbHVtbiArIGFjYy5kZWx0YSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgICByZXR1cm4geyBncmlkOiBuZXdHLCBkZWx0YTogYWNjLmRlbHRhICsgMSB9O1xuICB9LCB7IGdyaWQsIGRlbHRhOiAwIH0pLmdyaWQ7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsc1swXS5yb3csIHRhcmdldEluZGV4KTtcbn07XG5cbmNvbnN0IG9wSW5zZXJ0Q29sdW1uQWZ0ZXIgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBleHRyYWN0RGV0YWlsOiBFeHRyYWN0Q29sRGV0YWlsLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBkZXRhaWwgPSBleHRyYWN0RGV0YWlsLmRldGFpbDtcbiAgY29uc3QgZXhhbXBsZSA9IGRldGFpbC5jb2x1bW47XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gZGV0YWlsLmNvbHVtbiArIGRldGFpbC5jb2xzcGFuO1xuICBjb25zdCBuZXdHcmlkID0gTW9kaWZpY2F0aW9uT3BlcmF0aW9ucy5pbnNlcnRDb2x1bW5BdChncmlkLCB0YXJnZXRJbmRleCwgZXhhbXBsZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMuZ2V0T3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWwucm93LCB0YXJnZXRJbmRleCk7XG59O1xuXG5jb25zdCBvcEluc2VydENvbHVtbnNBZnRlciA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4dHJhY3REZXRhaWw6IEV4dHJhY3RDb2xzRGV0YWlsLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBkZXRhaWxzID0gZXh0cmFjdERldGFpbC5kZXRhaWxzO1xuICBjb25zdCB0YXJnZXQgPSBkZXRhaWxzW2RldGFpbHMubGVuZ3RoIC0gMV07XG4gIGNvbnN0IHRhcmdldEluZGV4ID0gdGFyZ2V0LmNvbHVtbiArIHRhcmdldC5jb2xzcGFuO1xuICBjb25zdCBjb2x1bW5zID0gQ29sVXRpbHMudW5pcXVlQ29sdW1ucyhkZXRhaWxzKTtcbiAgY29uc3QgbmV3R3JpZCA9IEFyci5mb2xkcihjb2x1bW5zLCAobmV3RywgY29sKSA9PiB7XG4gICAgcmV0dXJuIE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuaW5zZXJ0Q29sdW1uQXQobmV3RywgdGFyZ2V0SW5kZXgsIGNvbC5jb2x1bW4sIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIH0sIGdyaWQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCB0YXJnZXRJbmRleCk7XG59O1xuXG5jb25zdCBvcE1ha2VDb2x1bW5IZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNvbHVtbihpbml0aWFsR3JpZCwgZGV0YWlsLmNvbHVtbiwgdHJ1ZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcE1ha2VDb2x1bW5zSGVhZGVyID0gKGluaXRpYWxHcmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtKSA9PiB7XG4gIGNvbnN0IGNvbHVtbnMgPSBDb2xVdGlscy51bmlxdWVDb2x1bW5zKGRldGFpbHMpO1xuICBjb25zdCBjb2x1bW5JbmRleGVzID0gQXJyLm1hcChjb2x1bW5zLCAoZGV0YWlsKSA9PiBkZXRhaWwuY29sdW1uKTtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNvbHVtbnMoaW5pdGlhbEdyaWQsIGNvbHVtbkluZGV4ZXMsIHRydWUsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcE1ha2VDZWxsSGVhZGVyID0gKGluaXRpYWxHcmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtKSA9PiB7XG4gIGNvbnN0IG5ld0dyaWQgPSBUcmFuc2Zvcm1PcGVyYXRpb25zLnJlcGxhY2VDZWxsKGluaXRpYWxHcmlkLCBkZXRhaWwsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BNYWtlQ2VsbHNIZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNlbGxzKGluaXRpYWxHcmlkLCBkZXRhaWxzLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5yZXBsYWNlT3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWxzWzBdLnJvdywgZGV0YWlsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BVbm1ha2VDb2x1bW5IZWFkZXIgPSAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsOiBTdHJ1Y3RzLkRldGFpbEV4dCwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0pID0+IHtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNvbHVtbihpbml0aWFsR3JpZCwgZGV0YWlsLmNvbHVtbiwgZmFsc2UsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BVbm1ha2VDb2x1bW5zSGVhZGVyID0gKGluaXRpYWxHcmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtKSA9PiB7XG4gIGNvbnN0IGNvbHVtbnMgPSBDb2xVdGlscy51bmlxdWVDb2x1bW5zKGRldGFpbHMpO1xuICBjb25zdCBjb2x1bW5JbmRleGVzID0gQXJyLm1hcChjb2x1bW5zLCAoZGV0YWlsKSA9PiBkZXRhaWwuY29sdW1uKTtcbiAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZUNvbHVtbnMoaW5pdGlhbEdyaWQsIGNvbHVtbkluZGV4ZXMsIGZhbHNlLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5yZXBsYWNlT3JJbml0KTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWxzWzBdLnJvdywgZGV0YWlsc1swXS5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BVbm1ha2VDZWxsSGVhZGVyID0gKGluaXRpYWxHcmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtKSA9PiB7XG4gIGNvbnN0IG5ld0dyaWQgPSBUcmFuc2Zvcm1PcGVyYXRpb25zLnJlcGxhY2VDZWxsKGluaXRpYWxHcmlkLCBkZXRhaWwsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BVbm1ha2VDZWxsc0hlYWRlciA9IChpbml0aWFsR3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc1RyYW5zZm9ybSkgPT4ge1xuICBjb25zdCBuZXdHcmlkID0gVHJhbnNmb3JtT3BlcmF0aW9ucy5yZXBsYWNlQ2VsbHMoaW5pdGlhbEdyaWQsIGRldGFpbHMsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbHNbMF0ucm93LCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBtYWtlUm93U2VjdGlvbiA9IChzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24sIGFwcGx5U2NvcGU6IGJvb2xlYW4pID0+XG4gIChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzVHJhbnNmb3JtLCB0YWJsZVNlY3Rpb246IFRhYmxlU2VjdGlvbikgPT4ge1xuICAgIGNvbnN0IG5ld0dyaWQgPSBUcmFuc2Zvcm1PcGVyYXRpb25zLnJlcGxhY2VSb3coZ3JpZCwgZGV0YWlsLnJvdywgc2VjdGlvbiwgYXBwbHlTY29wZSwgY29tcGFyYXRvciwgZ2VuV3JhcHBlcnMucmVwbGFjZU9ySW5pdCwgdGFibGVTZWN0aW9uKTtcbiAgICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4pO1xuICB9O1xuXG5jb25zdCBtYWtlUm93c1NlY3Rpb24gPSAoc2VjdGlvbjogU3RydWN0cy5TZWN0aW9uLCBhcHBseVNjb3BlOiBib29sZWFuKSA9PlxuICAoaW5pdGlhbEdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSwgY29tcGFyYXRvcjogQ29tcEVsbSwgZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNUcmFuc2Zvcm0sIHRhYmxlU2VjdGlvbjogVGFibGVTZWN0aW9uKSA9PiB7XG4gICAgY29uc3Qgcm93cyA9IHVuaXF1ZVJvd3MoZGV0YWlscyk7XG4gICAgY29uc3Qgcm93SW5kZXhlcyA9IEFyci5tYXAocm93cywgKGRldGFpbCkgPT4gZGV0YWlsLnJvdyk7XG4gICAgY29uc3QgbmV3R3JpZCA9IFRyYW5zZm9ybU9wZXJhdGlvbnMucmVwbGFjZVJvd3MoaW5pdGlhbEdyaWQsIHJvd0luZGV4ZXMsIHNlY3Rpb24sIGFwcGx5U2NvcGUsIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLnJlcGxhY2VPckluaXQsIHRhYmxlU2VjdGlvbik7XG4gICAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBkZXRhaWxzWzBdLnJvdywgZGV0YWlsc1swXS5jb2x1bW4pO1xuICB9O1xuXG5jb25zdCBvcE1ha2VSb3dIZWFkZXIgPSBtYWtlUm93U2VjdGlvbigndGhlYWQnLCB0cnVlKTtcbmNvbnN0IG9wTWFrZVJvd3NIZWFkZXIgPSBtYWtlUm93c1NlY3Rpb24oJ3RoZWFkJywgdHJ1ZSk7XG5jb25zdCBvcE1ha2VSb3dCb2R5ID0gbWFrZVJvd1NlY3Rpb24oJ3Rib2R5JywgZmFsc2UpO1xuY29uc3Qgb3BNYWtlUm93c0JvZHkgPSBtYWtlUm93c1NlY3Rpb24oJ3Rib2R5JywgZmFsc2UpO1xuY29uc3Qgb3BNYWtlUm93Rm9vdGVyID0gbWFrZVJvd1NlY3Rpb24oJ3Rmb290JywgZmFsc2UpO1xuY29uc3Qgb3BNYWtlUm93c0Zvb3RlciA9IG1ha2VSb3dzU2VjdGlvbigndGZvb3QnLCBmYWxzZSk7XG5cbmNvbnN0IG9wU3BsaXRDZWxsSW50b0NvbHVtbnMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWw6IFN0cnVjdHMuRGV0YWlsRXh0LCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCBuZXdHcmlkID0gTW9kaWZpY2F0aW9uT3BlcmF0aW9ucy5zcGxpdENlbGxJbnRvQ29sdW1ucyhncmlkLCBkZXRhaWwucm93LCBkZXRhaWwuY29sdW1uLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5nZXRPckluaXQpO1xuICByZXR1cm4gYnVuZGxlKG5ld0dyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4pO1xufTtcblxuY29uc3Qgb3BTcGxpdENlbGxJbnRvUm93cyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIGdlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLnNwbGl0Q2VsbEludG9Sb3dzKGdyaWQsIGRldGFpbC5yb3csIGRldGFpbC5jb2x1bW4sIGNvbXBhcmF0b3IsIGdlbldyYXBwZXJzLmdldE9ySW5pdCk7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgZGV0YWlsLnJvdywgZGV0YWlsLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcEVyYXNlQ29sdW1ucyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4dHJhY3REZXRhaWw6IEV4dHJhY3RDb2xzRGV0YWlsLCBfY29tcGFyYXRvcjogQ29tcEVsbSwgX2dlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IGNvbHVtbnMgPSBDb2xVdGlscy51bmlxdWVDb2x1bW5zKGV4dHJhY3REZXRhaWwuZGV0YWlscyk7XG5cbiAgY29uc3QgbmV3R3JpZCA9IE1vZGlmaWNhdGlvbk9wZXJhdGlvbnMuZGVsZXRlQ29sdW1uc0F0KGdyaWQsIEFyci5tYXAoY29sdW1ucywgKGNvbHVtbikgPT4gY29sdW1uLmNvbHVtbikpO1xuICBjb25zdCBtYXhDb2xJbmRleCA9IG5ld0dyaWQubGVuZ3RoID4gMCA/IG5ld0dyaWRbMF0uY2VsbHMubGVuZ3RoIC0gMSA6IDA7XG4gIHJldHVybiBidW5kbGUobmV3R3JpZCwgY29sdW1uc1swXS5yb3csIE1hdGgubWluKGNvbHVtbnNbMF0uY29sdW1uLCBtYXhDb2xJbmRleCkpO1xufTtcblxuY29uc3Qgb3BFcmFzZVJvd3MgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdLCBfY29tcGFyYXRvcjogQ29tcEVsbSwgX2dlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IHJvd3MgPSB1bmlxdWVSb3dzKGRldGFpbHMpO1xuXG4gIGNvbnN0IG5ld0dyaWQgPSBNb2RpZmljYXRpb25PcGVyYXRpb25zLmRlbGV0ZVJvd3NBdChncmlkLCByb3dzWzBdLnJvdywgcm93c1tyb3dzLmxlbmd0aCAtIDFdLnJvdyk7XG4gIGNvbnN0IG1heFJvd0luZGV4ID0gTWF0aC5tYXgoR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMobmV3R3JpZCkucm93cy5sZW5ndGggLSAxLCAwKTtcbiAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBNYXRoLm1pbihkZXRhaWxzWzBdLnJvdywgbWF4Um93SW5kZXgpLCBkZXRhaWxzWzBdLmNvbHVtbik7XG59O1xuXG5jb25zdCBvcE1lcmdlQ2VsbHMgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBtZXJnYWJsZTogRXh0cmFjdE1lcmdhYmxlLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01lcmdpbmcpID0+IHtcbiAgY29uc3QgY2VsbHMgPSBtZXJnYWJsZS5jZWxscztcbiAgVGFibGVDb250ZW50Lm1lcmdlKGNlbGxzKTtcblxuICBjb25zdCBuZXdHcmlkID0gTWVyZ2luZ09wZXJhdGlvbnMubWVyZ2UoZ3JpZCwgbWVyZ2FibGUuYm91bmRzLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy5tZXJnZShjZWxscykpO1xuXG4gIHJldHVybiBvdXRjb21lKG5ld0dyaWQsIE9wdGlvbmFsLmZyb20oY2VsbHNbMF0pKTtcbn07XG5cbmNvbnN0IG9wVW5tZXJnZUNlbGxzID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgdW5tZXJnYWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCBjb21wYXJhdG9yOiBDb21wRWxtLCBnZW5XcmFwcGVyczogR2VuZXJhdG9yc01lcmdpbmcpID0+IHtcbiAgY29uc3QgdW5tZXJnZSA9IChiOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+XG4gICAgTWVyZ2luZ09wZXJhdGlvbnMudW5tZXJnZShiLCBjZWxsLCBjb21wYXJhdG9yLCBnZW5XcmFwcGVycy51bm1lcmdlKGNlbGwpKTtcblxuICBjb25zdCBuZXdHcmlkID0gQXJyLmZvbGRyKHVubWVyZ2FibGUsIHVubWVyZ2UsIGdyaWQpO1xuICByZXR1cm4gb3V0Y29tZShuZXdHcmlkLCBPcHRpb25hbC5mcm9tKHVubWVyZ2FibGVbMF0pKTtcbn07XG5cbmNvbnN0IG9wUGFzdGVDZWxscyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHBhc3RlRGV0YWlsczogRXh0cmFjdFBhc3RlLCBjb21wYXJhdG9yOiBDb21wRWxtLCBfZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3QgZ3JpZGlmeSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzKSA9PiB7XG4gICAgY29uc3Qgd2ggPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgICByZXR1cm4gVHJhbnNpdGlvbnMudG9HcmlkKHdoLCBnZW5lcmF0b3JzLCB0cnVlKTtcbiAgfTtcbiAgY29uc3QgZ3JpZEIgPSBncmlkaWZ5KHBhc3RlRGV0YWlscy5jbGlwYm9hcmQsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzKTtcbiAgY29uc3Qgc3RhcnRBZGRyZXNzID0gU3RydWN0cy5hZGRyZXNzKHBhc3RlRGV0YWlscy5yb3csIHBhc3RlRGV0YWlscy5jb2x1bW4pO1xuICBjb25zdCBtZXJnZWRHcmlkID0gVGFibGVNZXJnZS5tZXJnZShzdGFydEFkZHJlc3MsIGdyaWQsIGdyaWRCLCBwYXN0ZURldGFpbHMuZ2VuZXJhdG9ycywgY29tcGFyYXRvcik7XG5cbiAgcmV0dXJuIG1lcmdlZEdyaWQuZm9sZChcbiAgICAoKSA9PiBvdXRjb21lKGdyaWQsIE9wdGlvbmFsLnNvbWUocGFzdGVEZXRhaWxzLmVsZW1lbnQpKSxcbiAgICAobmV3R3JpZCkgPT4ge1xuICAgICAgcmV0dXJuIGJ1bmRsZShuZXdHcmlkLCBwYXN0ZURldGFpbHMucm93LCBwYXN0ZURldGFpbHMuY29sdW1uKTtcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBncmlkaWZ5Um93cyA9IChyb3dzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10sIGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMsIGNvbnRleHQ6IFN0cnVjdHMuUm93Q2VsbHMpID0+IHtcbiAgY29uc3QgcGFzdGVEZXRhaWxzID0gRGV0YWlsc0xpc3QuZnJvbVBhc3RlZFJvd3Mocm93cywgY29udGV4dC5zZWN0aW9uKTtcbiAgY29uc3Qgd2ggPSBXYXJlaG91c2UuZ2VuZXJhdGUocGFzdGVEZXRhaWxzKTtcbiAgcmV0dXJuIFRyYW5zaXRpb25zLnRvR3JpZCh3aCwgZ2VuZXJhdG9ycywgdHJ1ZSk7XG59O1xuXG5jb25zdCBvcFBhc3RlQ29sc0JlZm9yZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHBhc3RlRGV0YWlsczogRXh0cmFjdFBhc3RlUm93cywgY29tcGFyYXRvcjogQ29tcEVsbSwgX2dlbldyYXBwZXJzOiBHZW5lcmF0b3JzTW9kaWZpY2F0aW9uKSA9PiB7XG4gIGNvbnN0IHJvd3MgPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzO1xuICBjb25zdCBpbmRleCA9IHBhc3RlRGV0YWlscy5jZWxsc1swXS5jb2x1bW47XG4gIGNvbnN0IGNvbnRleHQgPSByb3dzW3Bhc3RlRGV0YWlscy5jZWxsc1swXS5yb3ddO1xuICBjb25zdCBncmlkQiA9IGdyaWRpZnlSb3dzKHBhc3RlRGV0YWlscy5jbGlwYm9hcmQsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzLCBjb250ZXh0KTtcbiAgY29uc3QgbWVyZ2VkR3JpZCA9IFRhYmxlTWVyZ2UuaW5zZXJ0Q29scyhpbmRleCwgZ3JpZCwgZ3JpZEIsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzLCBjb21wYXJhdG9yKTtcbiAgcmV0dXJuIGJ1bmRsZShtZXJnZWRHcmlkLCBwYXN0ZURldGFpbHMuY2VsbHNbMF0ucm93LCBwYXN0ZURldGFpbHMuY2VsbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wUGFzdGVDb2xzQWZ0ZXIgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBwYXN0ZURldGFpbHM6IEV4dHJhY3RQYXN0ZVJvd3MsIGNvbXBhcmF0b3I6IENvbXBFbG0sIF9nZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgY29uc3QgaW5kZXggPSBwYXN0ZURldGFpbHMuY2VsbHNbcGFzdGVEZXRhaWxzLmNlbGxzLmxlbmd0aCAtIDFdLmNvbHVtbiArIHBhc3RlRGV0YWlscy5jZWxsc1twYXN0ZURldGFpbHMuY2VsbHMubGVuZ3RoIC0gMV0uY29sc3BhbjtcbiAgY29uc3QgY29udGV4dCA9IHJvd3NbcGFzdGVEZXRhaWxzLmNlbGxzWzBdLnJvd107XG4gIGNvbnN0IGdyaWRCID0gZ3JpZGlmeVJvd3MocGFzdGVEZXRhaWxzLmNsaXBib2FyZCwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbnRleHQpO1xuICBjb25zdCBtZXJnZWRHcmlkID0gVGFibGVNZXJnZS5pbnNlcnRDb2xzKGluZGV4LCBncmlkLCBncmlkQiwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbXBhcmF0b3IpO1xuICByZXR1cm4gYnVuZGxlKG1lcmdlZEdyaWQsIHBhc3RlRGV0YWlscy5jZWxsc1swXS5yb3csIGluZGV4KTtcbn07XG5cbmNvbnN0IG9wUGFzdGVSb3dzQmVmb3JlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcGFzdGVEZXRhaWxzOiBFeHRyYWN0UGFzdGVSb3dzLCBjb21wYXJhdG9yOiBDb21wRWxtLCBfZ2VuV3JhcHBlcnM6IEdlbmVyYXRvcnNNb2RpZmljYXRpb24pID0+IHtcbiAgY29uc3Qgcm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLnJvd3M7XG4gIGNvbnN0IGluZGV4ID0gcGFzdGVEZXRhaWxzLmNlbGxzWzBdLnJvdztcbiAgY29uc3QgY29udGV4dCA9IHJvd3NbaW5kZXhdO1xuICBjb25zdCBncmlkQiA9IGdyaWRpZnlSb3dzKHBhc3RlRGV0YWlscy5jbGlwYm9hcmQsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzLCBjb250ZXh0KTtcbiAgY29uc3QgbWVyZ2VkR3JpZCA9IFRhYmxlTWVyZ2UuaW5zZXJ0Um93cyhpbmRleCwgZ3JpZCwgZ3JpZEIsIHBhc3RlRGV0YWlscy5nZW5lcmF0b3JzLCBjb21wYXJhdG9yKTtcbiAgcmV0dXJuIGJ1bmRsZShtZXJnZWRHcmlkLCBwYXN0ZURldGFpbHMuY2VsbHNbMF0ucm93LCBwYXN0ZURldGFpbHMuY2VsbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wUGFzdGVSb3dzQWZ0ZXIgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBwYXN0ZURldGFpbHM6IEV4dHJhY3RQYXN0ZVJvd3MsIGNvbXBhcmF0b3I6IENvbXBFbG0sIF9nZW5XcmFwcGVyczogR2VuZXJhdG9yc01vZGlmaWNhdGlvbikgPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgY29uc3QgaW5kZXggPSBwYXN0ZURldGFpbHMuY2VsbHNbcGFzdGVEZXRhaWxzLmNlbGxzLmxlbmd0aCAtIDFdLnJvdyArIHBhc3RlRGV0YWlscy5jZWxsc1twYXN0ZURldGFpbHMuY2VsbHMubGVuZ3RoIC0gMV0ucm93c3BhbjtcbiAgY29uc3QgY29udGV4dCA9IHJvd3NbcGFzdGVEZXRhaWxzLmNlbGxzWzBdLnJvd107XG4gIGNvbnN0IGdyaWRCID0gZ3JpZGlmeVJvd3MocGFzdGVEZXRhaWxzLmNsaXBib2FyZCwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbnRleHQpO1xuICBjb25zdCBtZXJnZWRHcmlkID0gVGFibGVNZXJnZS5pbnNlcnRSb3dzKGluZGV4LCBncmlkLCBncmlkQiwgcGFzdGVEZXRhaWxzLmdlbmVyYXRvcnMsIGNvbXBhcmF0b3IpO1xuICByZXR1cm4gYnVuZGxlKG1lcmdlZEdyaWQsIGluZGV4LCBwYXN0ZURldGFpbHMuY2VsbHNbMF0uY29sdW1uKTtcbn07XG5cbmNvbnN0IG9wR2V0Q29sdW1uc1R5cGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBkZXRhaWxzID0gUnVuT3BlcmF0aW9uLm9uQ2VsbHMoaG91c2UsIHRhcmdldCk7XG4gIHJldHVybiBkZXRhaWxzLmJpbmQoKHNlbGVjdGVkQ2VsbHMpID0+IHtcbiAgICBjb25zdCBsYXN0U2VsZWN0ZWRDZWxsID0gc2VsZWN0ZWRDZWxsc1tzZWxlY3RlZENlbGxzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IG1pbkNvbFJhbmdlID0gc2VsZWN0ZWRDZWxsc1swXS5jb2x1bW47XG4gICAgY29uc3QgbWF4Q29sUmFuZ2UgPSBsYXN0U2VsZWN0ZWRDZWxsLmNvbHVtbiArIGxhc3RTZWxlY3RlZENlbGwuY29sc3BhbjtcbiAgICBjb25zdCBzZWxlY3RlZENvbHVtbkNlbGxzID0gQXJyLmZsYXR0ZW4oQXJyLm1hcChob3VzZS5hbGwsIChyb3cpID0+XG4gICAgICBBcnIuZmlsdGVyKHJvdy5jZWxscywgKGNlbGwpID0+IGNlbGwuY29sdW1uID49IG1pbkNvbFJhbmdlICYmIGNlbGwuY29sdW1uIDwgbWF4Q29sUmFuZ2UpKSk7XG4gICAgcmV0dXJuIGZpbmRDb21tb25DZWxsVHlwZShzZWxlY3RlZENvbHVtbkNlbGxzKTtcbiAgfSkuZ2V0T3IoJycpO1xufTtcblxuY29uc3Qgb3BHZXRDZWxsc1R5cGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBkZXRhaWxzID0gUnVuT3BlcmF0aW9uLm9uQ2VsbHMoaG91c2UsIHRhcmdldCk7XG4gIHJldHVybiBkZXRhaWxzLmJpbmQoZmluZENvbW1vbkNlbGxUeXBlKS5nZXRPcignJyk7XG59O1xuXG5jb25zdCBvcEdldFJvd3NUeXBlID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uKTogc3RyaW5nID0+IHtcbiAgY29uc3QgaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgY29uc3QgZGV0YWlscyA9IFJ1bk9wZXJhdGlvbi5vbkNlbGxzKGhvdXNlLCB0YXJnZXQpO1xuICByZXR1cm4gZGV0YWlscy5iaW5kKChzZWxlY3RlZENlbGxzKSA9PiB7XG4gICAgY29uc3QgbGFzdFNlbGVjdGVkQ2VsbCA9IHNlbGVjdGVkQ2VsbHNbc2VsZWN0ZWRDZWxscy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBtaW5Sb3dSYW5nZSA9IHNlbGVjdGVkQ2VsbHNbMF0ucm93O1xuICAgIGNvbnN0IG1heFJvd1JhbmdlID0gbGFzdFNlbGVjdGVkQ2VsbC5yb3cgKyBsYXN0U2VsZWN0ZWRDZWxsLnJvd3NwYW47XG4gICAgY29uc3Qgc2VsZWN0ZWRSb3dzID0gaG91c2UuYWxsLnNsaWNlKG1pblJvd1JhbmdlLCBtYXhSb3dSYW5nZSk7XG4gICAgcmV0dXJuIGZpbmRDb21tb25Sb3dUeXBlKHNlbGVjdGVkUm93cyk7XG4gIH0pLmdldE9yKCcnKTtcbn07XG5cbi8vIE9ubHkgY29sdW1uIG1vZGlmaWNhdGlvbnMgZm9yY2UgYSByZXNpemluZy4gRXZlcnl0aGluZyBlbHNlIGp1c3QgdHJpZXMgdG8gcHJlc2VydmUgdGhlIHRhYmxlIGFzIGlzLlxuY29uc3QgcmVzaXplOiBSdW5PcGVyYXRpb24uQWRqdXN0bWVudDx7fT4gPSAodGFibGUsIGxpc3QsIGRldGFpbHMsIGJlaGF2aW91cnMpID0+XG4gIEFkanVzdG1lbnRzLmFkanVzdFdpZHRoVG8odGFibGUsIGxpc3QsIGRldGFpbHMsIGJlaGF2aW91cnMuc2l6aW5nKTtcblxuY29uc3QgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzOiBSdW5PcGVyYXRpb24uQWRqdXN0bWVudDx7IHBpeGVsRGVsdGE6IG51bWJlciB9PiA9ICh0YWJsZSwgbGlzdCwgZGV0YWlscywgYmVoYXZpb3VycykgPT5cbiAgQWRqdXN0bWVudHMuYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzKHRhYmxlLCBsaXN0LCBkZXRhaWxzLCBiZWhhdmlvdXJzLnNpemluZywgYmVoYXZpb3Vycy5yZXNpemUpO1xuXG4vLyBDdXN0b20gc2VsZWN0aW9uIGV4dHJhY3RvcnNcblxuY29uc3QgZmlyc3RDb2x1bW5Jc0xvY2tlZCA9IChfd2FyZWhvdXNlOiBXYXJlaG91c2UsIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10pID0+XG4gIEFyci5leGlzdHMoZGV0YWlscywgKGRldGFpbCkgPT4gZGV0YWlsLmNvbHVtbiA9PT0gMCAmJiBkZXRhaWwuaXNMb2NrZWQpO1xuLy8gVE9ETzogTWF5YmUgaGF2ZSBhbiBBcnIuZXhpc3RzUiB3aGljaCB3b3VsZCBiZSBtb3JlIGVmZmljaWVudCBmb3IgbW9zdCBjYXNlcyBiZWxvd1xuY29uc3QgbGFzdENvbHVtbklzTG9ja2VkID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdKSA9PlxuICBBcnIuZXhpc3RzKGRldGFpbHMsIChkZXRhaWwpID0+IGRldGFpbC5jb2x1bW4gKyBkZXRhaWwuY29sc3BhbiA+PSB3YXJlaG91c2UuZ3JpZC5jb2x1bW5zICYmIGRldGFpbC5pc0xvY2tlZCk7XG5cbmNvbnN0IGdldENvbHVtbnNXaWR0aCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgZGV0YWlsczogU3RydWN0cy5EZXRhaWxFeHRbXSkgPT4ge1xuICBjb25zdCBjb2x1bW5zID0gQmxvY2tzLmNvbHVtbnMod2FyZWhvdXNlKTtcbiAgY29uc3QgdW5pcXVlQ29scyA9IENvbFV0aWxzLnVuaXF1ZUNvbHVtbnMoZGV0YWlscyk7XG4gIHJldHVybiBBcnIuZm9sZGwodW5pcXVlQ29scywgKGFjYywgZGV0YWlsKSA9PiB7XG4gICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tkZXRhaWwuY29sdW1uXTtcbiAgICBjb25zdCBjb2xXaWR0aCA9IGNvbHVtbi5tYXAoV2lkdGguZ2V0T3V0ZXIpLmdldE9yKDApO1xuICAgIHJldHVybiBhY2MgKyBjb2xXaWR0aDtcbiAgfSwgMCk7XG59O1xuXG5jb25zdCBpbnNlcnRDb2x1bW5FeHRyYWN0b3IgPSAoYmVmb3JlOiBib29sZWFuKSA9PiAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogUnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQpOiBPcHRpb25hbDxFeHRyYWN0Q29sRGV0YWlsPiA9PlxuICBSdW5PcGVyYXRpb24ub25DZWxsKHdhcmVob3VzZSwgdGFyZ2V0KS5maWx0ZXIoKGRldGFpbCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrTG9ja2VkID0gYmVmb3JlID8gZmlyc3RDb2x1bW5Jc0xvY2tlZCA6IGxhc3RDb2x1bW5Jc0xvY2tlZDtcbiAgICByZXR1cm4gIWNoZWNrTG9ja2VkKHdhcmVob3VzZSwgWyBkZXRhaWwgXSk7XG4gIH0pLm1hcCgoZGV0YWlsKSA9PiAoe1xuICAgIGRldGFpbCxcbiAgICBwaXhlbERlbHRhOiBnZXRDb2x1bW5zV2lkdGgod2FyZWhvdXNlLCBbIGRldGFpbCBdKSxcbiAgfSkpO1xuXG5jb25zdCBpbnNlcnRDb2x1bW5zRXh0cmFjdG9yID0gKGJlZm9yZTogYm9vbGVhbikgPT4gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IE9wdGlvbmFsPEV4dHJhY3RDb2xzRGV0YWlsPiA9PlxuICBSdW5PcGVyYXRpb24ub25DZWxscyh3YXJlaG91c2UsIHRhcmdldCkuZmlsdGVyKChkZXRhaWxzKSA9PiB7XG4gICAgY29uc3QgY2hlY2tMb2NrZWQgPSBiZWZvcmUgPyBmaXJzdENvbHVtbklzTG9ja2VkIDogbGFzdENvbHVtbklzTG9ja2VkO1xuICAgIHJldHVybiAhY2hlY2tMb2NrZWQod2FyZWhvdXNlLCBkZXRhaWxzKTtcbiAgfSkubWFwKChkZXRhaWxzKSA9PiAoe1xuICAgIGRldGFpbHMsXG4gICAgcGl4ZWxEZWx0YTogZ2V0Q29sdW1uc1dpZHRoKHdhcmVob3VzZSwgZGV0YWlscyksXG4gIH0pKTtcblxuY29uc3QgZXJhc2VDb2x1bW5zRXh0cmFjdG9yID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldFNlbGVjdGlvbik6IE9wdGlvbmFsPEV4dHJhY3RDb2xzRGV0YWlsPiA9PlxuICBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGxzKHdhcmVob3VzZSwgdGFyZ2V0KS5tYXAoKGRldGFpbHMpID0+ICh7XG4gICAgZGV0YWlscyxcbiAgICBwaXhlbERlbHRhOiAtZ2V0Q29sdW1uc1dpZHRoKHdhcmVob3VzZSwgZGV0YWlscyksIC8vIG5lZWRzIHRvIGJlIG5lZ2F0aXZlIGFzIHdlIGFyZSByZW1vdmluZyBjb2x1bW5zXG4gIH0pKTtcblxuY29uc3QgcGFzdGVDb2x1bW5zRXh0cmFjdG9yID0gKGJlZm9yZTogYm9vbGVhbikgPT4gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZVJvd3MpOiBPcHRpb25hbDxFeHRyYWN0UGFzdGVSb3dzPiA9PlxuICBSdW5PcGVyYXRpb24ub25QYXN0ZUJ5RWRpdG9yKHdhcmVob3VzZSwgdGFyZ2V0KS5maWx0ZXIoKGRldGFpbHMpID0+IHtcbiAgICBjb25zdCBjaGVja0xvY2tlZCA9IGJlZm9yZSA/IGZpcnN0Q29sdW1uSXNMb2NrZWQgOiBsYXN0Q29sdW1uSXNMb2NrZWQ7XG4gICAgcmV0dXJuICFjaGVja0xvY2tlZCh3YXJlaG91c2UsIGRldGFpbHMuY2VsbHMpO1xuICB9KTtcblxuY29uc3QgaGVhZGVyQ2VsbEdlbmVyYXRvciA9IEdlbmVyYXRvcnMudHJhbnNmb3JtKCd0aCcpO1xuY29uc3QgYm9keUNlbGxHZW5lcmF0b3IgPSBHZW5lcmF0b3JzLnRyYW5zZm9ybSgndGQnKTtcblxudHlwZSBUYWJsZU9wPFQ+ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHRhcmdldDogVCwgZ2VuZXJhdG9yczogR2VuZXJhdG9ycywgYmVoYXZpb3Vycz86IFJ1bk9wZXJhdGlvbi5PcGVyYXRpb25CZWhhdmlvdXJzKSA9PiBPcHRpb25hbDxSdW5PcGVyYXRpb24uUnVuT3BlcmF0aW9uT3V0cHV0PjtcblxuZXhwb3J0IGNvbnN0IGluc2VydFJvd0JlZm9yZTogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BJbnNlcnRSb3dCZWZvcmUsIFJ1bk9wZXJhdGlvbi5vbkNlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Um93c0JlZm9yZTogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydFJvd3NCZWZvcmUsIFJ1bk9wZXJhdGlvbi5vbkNlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGluc2VydFJvd0FmdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydFJvd0FmdGVyLCBSdW5PcGVyYXRpb24ub25DZWxsLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGluc2VydFJvd3NBZnRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydFJvd3NBZnRlciwgUnVuT3BlcmF0aW9uLm9uQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Q29sdW1uQmVmb3JlOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydENvbHVtbkJlZm9yZSwgaW5zZXJ0Q29sdW1uRXh0cmFjdG9yKHRydWUpLCBhZGp1c3RBbmRSZWRpc3RyaWJ1dGVXaWR0aHMsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRDb2x1bW5zQmVmb3JlOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Q29sdW1uc0JlZm9yZSwgaW5zZXJ0Q29sdW1uc0V4dHJhY3Rvcih0cnVlKSwgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0Q29sdW1uQWZ0ZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wSW5zZXJ0Q29sdW1uQWZ0ZXIsIGluc2VydENvbHVtbkV4dHJhY3RvcihmYWxzZSksIGFkanVzdEFuZFJlZGlzdHJpYnV0ZVdpZHRocywgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGluc2VydENvbHVtbnNBZnRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEluc2VydENvbHVtbnNBZnRlciwgaW5zZXJ0Q29sdW1uc0V4dHJhY3RvcihmYWxzZSksIGFkanVzdEFuZFJlZGlzdHJpYnV0ZVdpZHRocywgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHNwbGl0Q2VsbEludG9Db2x1bW5zOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFNwbGl0Q2VsbEludG9Db2x1bW5zLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGwsIHJlc2l6ZSwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHNwbGl0Q2VsbEludG9Sb3dzOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFNwbGl0Q2VsbEludG9Sb3dzLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgZXJhc2VDb2x1bW5zOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wRXJhc2VDb2x1bW5zLCBlcmFzZUNvbHVtbnNFeHRyYWN0b3IsIGFkanVzdEFuZFJlZGlzdHJpYnV0ZVdpZHRocywgcHJ1bmUsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGVyYXNlUm93czogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcEVyYXNlUm93cywgUnVuT3BlcmF0aW9uLm9uQ2VsbHMsIEZ1bi5ub29wLCBwcnVuZSwgR2VuZXJhdG9ycy5tb2RpZmljYXRpb24sIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZUNvbHVtbkhlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0RWxlbWVudD4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlQ29sdW1uSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgaGVhZGVyQ2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlQ29sdW1uc0hlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcE1ha2VDb2x1bW5zSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGhlYWRlckNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgdW5tYWtlQ29sdW1uSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFVubWFrZUNvbHVtbkhlYWRlciwgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRDZWxsLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGJvZHlDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHVubWFrZUNvbHVtbnNIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BVbm1ha2VDb2x1bW5zSGVhZGVyLCBSdW5PcGVyYXRpb24ub25VbmxvY2tlZENlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGJvZHlDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VSb3dIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZVJvd0hlYWRlciwgUnVuT3BlcmF0aW9uLm9uQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBoZWFkZXJDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VSb3dzSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZVJvd3NIZWFkZXIsIFJ1bk9wZXJhdGlvbi5vbkNlbGxzLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGhlYWRlckNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZVJvd0JvZHk6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZVJvd0JvZHksIFJ1bk9wZXJhdGlvbi5vbkNlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZVJvd3NCb2R5OiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZVJvd3NCb2R5LCBSdW5PcGVyYXRpb24ub25DZWxscywgRnVuLm5vb3AsIEZ1bi5ub29wLCBib2R5Q2VsbEdlbmVyYXRvciwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBtYWtlUm93Rm9vdGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRFbGVtZW50PiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcE1ha2VSb3dGb290ZXIsIFJ1bk9wZXJhdGlvbi5vbkNlbGwsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZVJvd3NGb290ZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFNlbGVjdGlvbj4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BNYWtlUm93c0Zvb3RlciwgUnVuT3BlcmF0aW9uLm9uQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWFrZUNlbGxIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWFrZUNlbGxIZWFkZXIsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbCwgRnVuLm5vb3AsIEZ1bi5ub29wLCBoZWFkZXJDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VDZWxsc0hlYWRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0U2VsZWN0aW9uPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcE1ha2VDZWxsc0hlYWRlciwgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRDZWxscywgRnVuLm5vb3AsIEZ1bi5ub29wLCBoZWFkZXJDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHVubWFrZUNlbGxIZWFkZXI6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldEVsZW1lbnQ+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wVW5tYWtlQ2VsbEhlYWRlciwgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRDZWxsLCBGdW4ubm9vcCwgRnVuLm5vb3AsIGJvZHlDZWxsR2VuZXJhdG9yLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHVubWFrZUNlbGxzSGVhZGVyOiBUYWJsZU9wPFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wVW5tYWtlQ2VsbHNIZWFkZXIsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkQ2VsbHMsIEZ1bi5ub29wLCBGdW4ubm9vcCwgYm9keUNlbGxHZW5lcmF0b3IsIHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpO1xuXG5leHBvcnQgY29uc3QgbWVyZ2VDZWxsczogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0TWVyZ2FibGU+ID0gKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnM/KSA9PlxuICBSdW5PcGVyYXRpb24ucnVuKG9wTWVyZ2VDZWxscywgUnVuT3BlcmF0aW9uLm9uVW5sb2NrZWRNZXJnYWJsZSwgcmVzaXplLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tZXJnaW5nLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHVubWVyZ2VDZWxsczogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0VW5tZXJnYWJsZT4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BVbm1lcmdlQ2VsbHMsIFJ1bk9wZXJhdGlvbi5vblVubG9ja2VkVW5tZXJnYWJsZSwgcmVzaXplLCBGdW4ubm9vcCwgR2VuZXJhdG9ycy5tZXJnaW5nLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHBhc3RlQ2VsbHM6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFBhc3RlPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFBhc3RlQ2VsbHMsIFJ1bk9wZXJhdGlvbi5vblBhc3RlLCByZXNpemUsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBwYXN0ZUNvbHNCZWZvcmU6IFRhYmxlT3A8UnVuT3BlcmF0aW9uLlRhcmdldFBhc3RlUm93cz4gPSAodGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycz8pID0+XG4gIFJ1bk9wZXJhdGlvbi5ydW4ob3BQYXN0ZUNvbHNCZWZvcmUsIHBhc3RlQ29sdW1uc0V4dHJhY3Rvcih0cnVlKSwgRnVuLm5vb3AsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBwYXN0ZUNvbHNBZnRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGVSb3dzPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFBhc3RlQ29sc0FmdGVyLCBwYXN0ZUNvbHVtbnNFeHRyYWN0b3IoZmFsc2UpLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IHBhc3RlUm93c0JlZm9yZTogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGVSb3dzPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFBhc3RlUm93c0JlZm9yZSwgUnVuT3BlcmF0aW9uLm9uUGFzdGVCeUVkaXRvciwgRnVuLm5vb3AsIEZ1bi5ub29wLCBHZW5lcmF0b3JzLm1vZGlmaWNhdGlvbiwgdGFibGUsIHRhcmdldCwgZ2VuZXJhdG9ycywgYmVoYXZpb3Vycyk7XG5cbmV4cG9ydCBjb25zdCBwYXN0ZVJvd3NBZnRlcjogVGFibGVPcDxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGVSb3dzPiA9ICh0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzPykgPT5cbiAgUnVuT3BlcmF0aW9uLnJ1bihvcFBhc3RlUm93c0FmdGVyLCBSdW5PcGVyYXRpb24ub25QYXN0ZUJ5RWRpdG9yLCBGdW4ubm9vcCwgRnVuLm5vb3AsIEdlbmVyYXRvcnMubW9kaWZpY2F0aW9uLCB0YWJsZSwgdGFyZ2V0LCBnZW5lcmF0b3JzLCBiZWhhdmlvdXJzKTtcblxuZXhwb3J0IGNvbnN0IGdldENvbHVtbnNUeXBlID0gb3BHZXRDb2x1bW5zVHlwZTtcbmV4cG9ydCBjb25zdCBnZXRDZWxsc1R5cGUgPSBvcEdldENlbGxzVHlwZTtcbmV4cG9ydCBjb25zdCBnZXRSb3dzVHlwZSA9IG9wR2V0Um93c1R5cGU7XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb21wYXJlLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIENlbGxGaW5kZXIgZnJvbSAnLi4vc2VsZWN0aW9uL0NlbGxGaW5kZXInO1xuaW1wb3J0ICogYXMgQ2VsbEdyb3VwIGZyb20gJy4uL3NlbGVjdGlvbi9DZWxsR3JvdXAnO1xuXG5pbXBvcnQgdHlwZSB7IEJvdW5kcyB9IGZyb20gJy4vU3RydWN0cyc7XG5pbXBvcnQgKiBhcyBUYWJsZUxvb2t1cCBmcm9tICcuL1RhYmxlTG9va3VwJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4vV2FyZWhvdXNlJztcblxuY29uc3QgbW92ZUJ5ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGRlbHRhUm93OiBudW1iZXIsIGRlbHRhQ29sdW1uOiBudW1iZXIpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PiB7XG4gIHJldHVybiBUYWJsZUxvb2t1cC50YWJsZShjZWxsKS5iaW5kKCh0YWJsZSkgPT4ge1xuICAgIGNvbnN0IHdhcmVob3VzZSA9IGdldFdhcmVob3VzZSh0YWJsZSk7XG4gICAgcmV0dXJuIENlbGxGaW5kZXIubW92ZUJ5KHdhcmVob3VzZSwgY2VsbCwgZGVsdGFSb3csIGRlbHRhQ29sdW1uKTtcbiAgfSk7XG59O1xuXG5jb25zdCBpbnRlcmNlcHRzID0gKFxuICB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LFxuICBmaXJzdDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PixcbiAgbGFzdDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PlxuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IGdldFdhcmVob3VzZSh0YWJsZSk7XG4gIHJldHVybiBDZWxsRmluZGVyLmludGVyY2VwdHMod2FyZWhvdXNlLCBmaXJzdCwgbGFzdCk7XG59O1xuXG5jb25zdCBuZXN0ZWRJbnRlcmNlcHRzID0gKFxuICB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LFxuICBmaXJzdDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PixcbiAgZmlyc3RUYWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LFxuICBsYXN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LFxuICBsYXN0VGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PlxuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IGdldFdhcmVob3VzZSh0YWJsZSk7XG4gIGNvbnN0IG9wdFN0YXJ0Q2VsbCA9IENvbXBhcmUuZXEodGFibGUsIGZpcnN0VGFibGUpID8gT3B0aW9uYWwuc29tZShmaXJzdCkgOiBDZWxsRmluZGVyLnBhcmVudENlbGwod2FyZWhvdXNlLCBmaXJzdCk7XG4gIGNvbnN0IG9wdExhc3RDZWxsID0gQ29tcGFyZS5lcSh0YWJsZSwgbGFzdFRhYmxlKSA/IE9wdGlvbmFsLnNvbWUobGFzdCkgOiBDZWxsRmluZGVyLnBhcmVudENlbGwod2FyZWhvdXNlLCBsYXN0KTtcbiAgcmV0dXJuIG9wdFN0YXJ0Q2VsbC5iaW5kKFxuICAgIChzdGFydENlbGwpID0+IG9wdExhc3RDZWxsLmJpbmQoXG4gICAgICAobGFzdENlbGwpID0+IENlbGxGaW5kZXIuaW50ZXJjZXB0cyh3YXJlaG91c2UsIHN0YXJ0Q2VsbCwgbGFzdENlbGwpXG4gICAgKVxuICApO1xufTtcblxuY29uc3QgZ2V0Qm94ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGZpcnN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBsYXN0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogT3B0aW9uYWw8Qm91bmRzPiA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IGdldFdhcmVob3VzZSh0YWJsZSk7XG4gIHJldHVybiBDZWxsR3JvdXAuZ2V0Qm94KHdhcmVob3VzZSwgZmlyc3QsIGxhc3QpO1xufTtcblxuLy8gUHJpdmF0ZSBtZXRob2QgLi4uIGtlZXAgd2FyZWhvdXNlIGluIHNub29rZXIsIHBsZWFzZS5cbmNvbnN0IGdldFdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGU7XG5cbmV4cG9ydCB7XG4gIG1vdmVCeSxcbiAgaW50ZXJjZXB0cyxcbiAgbmVzdGVkSW50ZXJjZXB0cyxcbiAgZ2V0Qm94XG59O1xuIiwiaW1wb3J0IHsgdHlwZSBCaW5kYWJsZSwgRXZlbnQsIEV2ZW50cyB9IGZyb20gJ0BlcGhveC9wb3JrYnVuJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgQWRqdXN0bWVudHMgZnJvbSAnLi4vcmVzaXplL0FkanVzdG1lbnRzJztcbmltcG9ydCB7IEJhck1hbmFnZXIgfSBmcm9tICcuLi9yZXNpemUvQmFyTWFuYWdlcic7XG5pbXBvcnQgKiBhcyBCYXJQb3NpdGlvbnMgZnJvbSAnLi4vcmVzaXplL0JhclBvc2l0aW9ucyc7XG5cbmltcG9ydCB0eXBlIHsgUmVzaXplQmVoYXZpb3VyIH0gZnJvbSAnLi9SZXNpemVCZWhhdmlvdXInO1xuaW1wb3J0IHR5cGUgeyBSZXNpemVXaXJlIH0gZnJvbSAnLi9SZXNpemVXaXJlJztcbmltcG9ydCB0eXBlIHsgVGFibGVTaXplIH0gZnJvbSAnLi9UYWJsZVNpemUnO1xuXG50eXBlIEJhclBvc2l0aW9uczxBPiA9IEJhclBvc2l0aW9ucy5CYXJQb3NpdGlvbnM8QT47XG50eXBlIFJlc2l6ZVR5cGUgPSAncm93JyB8ICdjb2wnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJlZm9yZVRhYmxlUmVzaXplRXZlbnQge1xuICByZWFkb25seSB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+O1xuICByZWFkb25seSB0eXBlOiBSZXNpemVUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFmdGVyVGFibGVSZXNpemVFdmVudCB7XG4gIHJlYWRvbmx5IHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD47XG4gIHJlYWRvbmx5IHR5cGU6IFJlc2l6ZVR5cGU7XG59XG5cbmludGVyZmFjZSBUYWJsZVJlc2l6ZUV2ZW50UmVnaXN0cnkge1xuICByZWFkb25seSBiZWZvcmVSZXNpemU6IEJpbmRhYmxlPEJlZm9yZVRhYmxlUmVzaXplRXZlbnQ+O1xuICByZWFkb25seSBhZnRlclJlc2l6ZTogQmluZGFibGU8QWZ0ZXJUYWJsZVJlc2l6ZUV2ZW50PjtcbiAgcmVhZG9ubHkgc3RhcnREcmFnOiBCaW5kYWJsZTx7fT47XG59XG5cbmludGVyZmFjZSBUYWJsZVJlc2l6ZUV2ZW50cyB7XG4gIHJlYWRvbmx5IHJlZ2lzdHJ5OiBUYWJsZVJlc2l6ZUV2ZW50UmVnaXN0cnk7XG4gIHJlYWRvbmx5IHRyaWdnZXI6IHtcbiAgICByZWFkb25seSBiZWZvcmVSZXNpemU6ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0eXBlOiBSZXNpemVUeXBlKSA9PiB2b2lkO1xuICAgIHJlYWRvbmx5IGFmdGVyUmVzaXplOiAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdHlwZTogUmVzaXplVHlwZSkgPT4gdm9pZDtcbiAgICByZWFkb25seSBzdGFydERyYWc6ICgpID0+IHZvaWQ7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVSZXNpemUge1xuICByZWFkb25seSBvbjogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb2ZmOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSByZWZyZXNoQmFyczogKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGhpZGVCYXJzOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBzaG93QmFyczogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgZGVzdHJveTogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgZXZlbnRzOiBUYWJsZVJlc2l6ZUV2ZW50UmVnaXN0cnk7XG59XG5cbmNvbnN0IGNyZWF0ZSA9ICh3aXJlOiBSZXNpemVXaXJlLCByZXNpemluZzogUmVzaXplQmVoYXZpb3VyLCBsYXp5U2l6aW5nOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PiBUYWJsZVNpemUpOiBUYWJsZVJlc2l6ZSA9PiB7XG4gIGNvbnN0IGhkaXJlY3Rpb24gPSBCYXJQb3NpdGlvbnMuaGVpZ2h0O1xuICBjb25zdCB2ZGlyZWN0aW9uID0gQmFyUG9zaXRpb25zLndpZHRoO1xuICBjb25zdCBtYW5hZ2VyID0gQmFyTWFuYWdlcih3aXJlKTtcblxuICBjb25zdCBldmVudHM6IFRhYmxlUmVzaXplRXZlbnRzID0gRXZlbnRzLmNyZWF0ZSh7XG4gICAgYmVmb3JlUmVzaXplOiBFdmVudChbICd0YWJsZScsICd0eXBlJyBdKSxcbiAgICBhZnRlclJlc2l6ZTogRXZlbnQoWyAndGFibGUnLCAndHlwZScgXSksXG4gICAgc3RhcnREcmFnOiBFdmVudChbXSksXG4gIH0pO1xuXG4gIG1hbmFnZXIuZXZlbnRzLmFkanVzdEhlaWdodC5iaW5kKChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRhYmxlID0gZXZlbnQudGFibGU7XG4gICAgZXZlbnRzLnRyaWdnZXIuYmVmb3JlUmVzaXplKHRhYmxlLCAncm93Jyk7XG4gICAgY29uc3QgZGVsdGEgPSBoZGlyZWN0aW9uLmRlbHRhKGV2ZW50LmRlbHRhLCB0YWJsZSk7XG4gICAgLy8gVE9ETzogVXNlIHRoZSByZXNpemluZyBiZWhhdmlvdXIgZm9yIGhlaWdodHMgYXMgd2VsbFxuICAgIEFkanVzdG1lbnRzLmFkanVzdEhlaWdodCh0YWJsZSwgZGVsdGEsIGV2ZW50LnJvdyk7XG4gICAgZXZlbnRzLnRyaWdnZXIuYWZ0ZXJSZXNpemUodGFibGUsICdyb3cnKTtcbiAgfSk7XG5cbiAgbWFuYWdlci5ldmVudHMuc3RhcnRBZGp1c3QuYmluZCgoX2V2ZW50KSA9PiB7XG4gICAgZXZlbnRzLnRyaWdnZXIuc3RhcnREcmFnKCk7XG4gIH0pO1xuXG4gIG1hbmFnZXIuZXZlbnRzLmFkanVzdFdpZHRoLmJpbmQoKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgdGFibGUgPSBldmVudC50YWJsZTtcbiAgICBldmVudHMudHJpZ2dlci5iZWZvcmVSZXNpemUodGFibGUsICdjb2wnKTtcbiAgICBjb25zdCBkZWx0YSA9IHZkaXJlY3Rpb24uZGVsdGEoZXZlbnQuZGVsdGEsIHRhYmxlKTtcbiAgICBjb25zdCB0YWJsZVNpemUgPSBsYXp5U2l6aW5nKHRhYmxlKTtcbiAgICBBZGp1c3RtZW50cy5hZGp1c3RXaWR0aCh0YWJsZSwgZGVsdGEsIGV2ZW50LmNvbHVtbiwgcmVzaXppbmcsIHRhYmxlU2l6ZSk7XG4gICAgZXZlbnRzLnRyaWdnZXIuYWZ0ZXJSZXNpemUodGFibGUsICdjb2wnKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbjogbWFuYWdlci5vbixcbiAgICBvZmY6IG1hbmFnZXIub2ZmLFxuICAgIHJlZnJlc2hCYXJzOiBtYW5hZ2VyLnJlZnJlc2gsXG4gICAgaGlkZUJhcnM6IG1hbmFnZXIuaGlkZUJhcnMsXG4gICAgc2hvd0JhcnM6IG1hbmFnZXIuc2hvd0JhcnMsXG4gICAgZGVzdHJveTogbWFuYWdlci5kZXN0cm95LFxuICAgIGV2ZW50czogZXZlbnRzLnJlZ2lzdHJ5XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgVGFibGVSZXNpemUgPSB7XG4gIGNyZWF0ZVxufTtcbiIsImltcG9ydCB7IEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBSZXBsaWNhdGlvbiwgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IGZpbmRUYWJsZVJvd0hlYWRlclR5cGUsIHR5cGUgUm93SGVhZGVyVHlwZSB9IGZyb20gJy4uL2xvb2t1cC9UeXBlJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSwgU3Vic3QgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4vU3RydWN0cyc7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuL1dhcmVob3VzZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVTZWN0aW9uIHtcbiAgcmVhZG9ubHkgdHJhbnNmb3JtUm93OiAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+LCBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb24pID0+IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD47XG4gIHJlYWRvbmx5IHRyYW5zZm9ybUNlbGw6IChjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KSA9PiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xufVxuXG5jb25zdCB0cmFuc2Zvcm1DZWxsID0gKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpID0+XG4gIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oY2VsbC5lbGVtZW50LCBjb21wYXJhdG9yKSwgdHJ1ZSwgY2VsbC5pc0xvY2tlZCk7XG5cbmNvbnN0IHRyYW5zZm9ybVJvdyA9IChyb3c6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD4sIHNlY3Rpb246IFN0cnVjdHMuU2VjdGlvbikgPT5cbiAgcm93LnNlY3Rpb24gIT09IHNlY3Rpb24gPyBTdHJ1Y3RzLnJvd2NlbGxzKHJvdy5lbGVtZW50LCByb3cuY2VsbHMsIHNlY3Rpb24sIHJvdy5pc05ldykgOiByb3c7XG5cbmNvbnN0IHNlY3Rpb24gPSAoKTogVGFibGVTZWN0aW9uID0+ICh7XG4gIHRyYW5zZm9ybVJvdyxcbiAgdHJhbnNmb3JtQ2VsbDogKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpID0+IHtcbiAgICBjb25zdCBuZXdDZWxsID0gc3Vic3RpdHV0aW9uKGNlbGwuZWxlbWVudCwgY29tcGFyYXRvcik7XG4gICAgLy8gQ29udmVydCB0aGUgY2VsbCB0byBhIHRkIGVsZW1lbnQgYXMgXCJzZWN0aW9uXCIgc2hvdWxkIGFsd2F5cyB1c2UgdGQgZWxlbWVudFxuICAgIGNvbnN0IGZpeGVkQ2VsbCA9IFN1Z2FyTm9kZS5uYW1lKG5ld0NlbGwpICE9PSAndGQnID8gUmVwbGljYXRpb24ubXV0YXRlKG5ld0NlbGwsICd0ZCcpIDogbmV3Q2VsbDtcbiAgICByZXR1cm4gU3RydWN0cy5lbGVtZW50bmV3KGZpeGVkQ2VsbCwgY2VsbC5pc05ldywgY2VsbC5pc0xvY2tlZCk7XG4gIH1cbn0pO1xuXG5jb25zdCBzZWN0aW9uQ2VsbHMgPSAoKTogVGFibGVTZWN0aW9uID0+ICh7XG4gIHRyYW5zZm9ybVJvdyxcbiAgdHJhbnNmb3JtQ2VsbFxufSk7XG5cbmNvbnN0IGNlbGxzID0gKCk6IFRhYmxlU2VjdGlvbiA9PiAoe1xuICB0cmFuc2Zvcm1Sb3c6IChyb3c6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD4sIHNlY3Rpb246IFN0cnVjdHMuU2VjdGlvbikgPT4ge1xuICAgIC8vIEVuc3VyZSB0aGF0IGNlbGxzIGFyZSBhbHdheXMgd2l0aGluIHRoZSB0Ym9keSBmb3IgaGVhZGVyc1xuICAgIGNvbnN0IG5ld1NlY3Rpb24gPSBzZWN0aW9uID09PSAndGhlYWQnID8gJ3Rib2R5JyA6IHNlY3Rpb247XG4gICAgcmV0dXJuIHRyYW5zZm9ybVJvdyhyb3csIG5ld1NlY3Rpb24pO1xuICB9LFxuICB0cmFuc2Zvcm1DZWxsXG59KTtcblxuLy8gQSBmYWxsYmFjayBsZWdhY3kgdHlwZSB0aGF0IHdvbid0IGFkanVzdCB0aGUgcm93L3NlY3Rpb24gdHlwZVxuLy8gYW5kIGluc3RlYWQgd2lsbCBvbmx5IG1vZGlmeSBjZWxsc1xuY29uc3QgZmFsbGJhY2sgPSAoKTogVGFibGVTZWN0aW9uID0+ICh7XG4gIHRyYW5zZm9ybVJvdzogRnVuLmlkZW50aXR5LFxuICB0cmFuc2Zvcm1DZWxsXG59KTtcblxuY29uc3QgZ2V0VGFibGVTZWN0aW9uVHlwZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBmYWxsYmFjazogUm93SGVhZGVyVHlwZSk6IFRhYmxlU2VjdGlvbiA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCB0eXBlID0gZmluZFRhYmxlUm93SGVhZGVyVHlwZSh3YXJlaG91c2UpLmdldE9yKGZhbGxiYWNrKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnc2VjdGlvbic6XG4gICAgICByZXR1cm4gc2VjdGlvbigpO1xuICAgIGNhc2UgJ3NlY3Rpb25DZWxscyc6XG4gICAgICByZXR1cm4gc2VjdGlvbkNlbGxzKCk7XG4gICAgY2FzZSAnY2VsbHMnOlxuICAgICAgcmV0dXJuIGNlbGxzKCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBUYWJsZVNlY3Rpb24gPSB7XG4gIGdldFRhYmxlU2VjdGlvblR5cGUsXG4gIHNlY3Rpb24sXG4gIHNlY3Rpb25DZWxscyxcbiAgY2VsbHMsXG4gIGZhbGxiYWNrXG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IENzcywgU3VnYXJCb2R5LCB0eXBlIFN1Z2FyRWxlbWVudCwgV2lkdGggfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBDb2x1bW5TaXplcyBmcm9tICcuLi9yZXNpemUvQ29sdW1uU2l6ZXMnO1xuaW1wb3J0ICogYXMgU2l6ZXMgZnJvbSAnLi4vcmVzaXplL1NpemVzJztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5cbmltcG9ydCB0eXBlIHsgV2FyZWhvdXNlIH0gZnJvbSAnLi9XYXJlaG91c2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlU2l6ZSB7XG4gIHJlYWRvbmx5IHdpZHRoOiAoKSA9PiBudW1iZXI7XG4gIHJlYWRvbmx5IHBpeGVsV2lkdGg6ICgpID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgZ2V0V2lkdGhzOiAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlU2l6ZTogVGFibGVTaXplKSA9PiBudW1iZXJbXTtcbiAgcmVhZG9ubHkgZ2V0Q2VsbERlbHRhOiAoZGVsdGE6IG51bWJlcikgPT4gbnVtYmVyO1xuICByZWFkb25seSBzaW5nbGVDb2x1bW5XaWR0aDogKHc6IG51bWJlciwgZGVsdGE6IG51bWJlcikgPT4gbnVtYmVyW107XG4gIHJlYWRvbmx5IG1pbkNlbGxXaWR0aDogKCkgPT4gbnVtYmVyO1xuICByZWFkb25seSBzZXRFbGVtZW50V2lkdGg6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCB3aWR0aDogbnVtYmVyKSA9PiB2b2lkO1xuICByZWFkb25seSBhZGp1c3RUYWJsZVdpZHRoOiAoZGVsdGE6IG51bWJlcikgPT4gdm9pZDtcbiAgcmVhZG9ubHkgaXNSZWxhdGl2ZTogYm9vbGVhbjtcbiAgcmVhZG9ubHkgbGFiZWw6ICdub25lJyB8ICdwaXhlbCcgfCAncGVyY2VudCc7XG59XG5cbmNvbnN0IHdpZHRoTG9va3VwID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGdldHRlcjogKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IG51bWJlcikgPT4gKCkgPT4ge1xuICAvLyBVc2UgdGhlIGFjdHVhbCB3aWR0aCBpZiBhdHRhY2hlZCwgb3RoZXJ3aXNlIGZhbGxiYWNrIHRvIHRoZSByYXcgd2lkdGhcbiAgaWYgKFN1Z2FyQm9keS5pbkJvZHkodGFibGUpKSB7XG4gICAgcmV0dXJuIGdldHRlcih0YWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoQ3NzLmdldFJhdyh0YWJsZSwgJ3dpZHRoJykuZ2V0T3IoJzAnKSk7XG4gIH1cbn07XG5cbmNvbnN0IG5vbmVTaXplID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBUYWJsZVNpemUgPT4ge1xuICBjb25zdCBnZXRXaWR0aCA9IHdpZHRoTG9va3VwKHRhYmxlLCBXaWR0aC5nZXQpO1xuICBjb25zdCB6ZXJvID0gRnVuLmNvbnN0YW50KDApO1xuXG4gIGNvbnN0IGdldFdpZHRocyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFibGVTaXplOiBUYWJsZVNpemUpID0+XG4gICAgQ29sdW1uU2l6ZXMuZ2V0UGl4ZWxXaWR0aHMod2FyZWhvdXNlLCB0YWJsZSwgdGFibGVTaXplKTtcblxuICAvLyBOb3RlOiBUaGUgMyBkZWx0YSBmdW5jdGlvbnMgYmVsb3cgcmV0dXJuIDAgdG8gc2lnbmlmeSBhIGNoYW5nZSBzaG91bGRuJ3QgYmUgbWFkZVxuICAvLyBob3dldmVyIHRoaXMgaXMgY3VycmVudGx5IG5vdCB1c2VkLCBzbyBtYXkgbmVlZCBjaGFuZ2luZyBpZiBldmVyIHVzZWRcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogZ2V0V2lkdGgsXG4gICAgcGl4ZWxXaWR0aDogZ2V0V2lkdGgsXG4gICAgZ2V0V2lkdGhzLFxuICAgIGdldENlbGxEZWx0YTogemVybyxcbiAgICBzaW5nbGVDb2x1bW5XaWR0aDogRnVuLmNvbnN0YW50KFsgMCBdKSxcbiAgICBtaW5DZWxsV2lkdGg6IHplcm8sXG4gICAgc2V0RWxlbWVudFdpZHRoOiBGdW4ubm9vcCxcbiAgICBhZGp1c3RUYWJsZVdpZHRoOiBGdW4ubm9vcCxcbiAgICBpc1JlbGF0aXZlOiB0cnVlLFxuICAgIGxhYmVsOiAnbm9uZSdcbiAgfTtcbn07XG5cbmNvbnN0IHBlcmNlbnRhZ2VTaXplID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBUYWJsZVNpemUgPT4ge1xuICBjb25zdCBnZXRGbG9hdFdpZHRoID0gd2lkdGhMb29rdXAodGFibGUsIChlbGVtKSA9PiBwYXJzZUZsb2F0KFNpemVzLmdldFBlcmNlbnRUYWJsZVdpZHRoKGVsZW0pKSk7XG4gIGNvbnN0IGdldFdpZHRoID0gd2lkdGhMb29rdXAodGFibGUsIFdpZHRoLmdldCk7XG4gIGNvbnN0IGdldENlbGxEZWx0YSA9IChkZWx0YTogbnVtYmVyKSA9PiBkZWx0YSAvIGdldFdpZHRoKCkgKiAxMDA7XG4gIC8vIElmIHdlIGhhdmUgb25lIGNvbHVtbiBpbiBhIHBlcmNlbnQgYmFzZWQgdGFibGUsIHRoYXQgY29sdW1uIHNob3VsZCBiZSAxMDAlIG9mIHRoZSB3aWR0aCBvZiB0aGUgdGFibGUuXG4gIGNvbnN0IHNpbmdsZUNvbHVtbldpZHRoID0gKHc6IG51bWJlciwgX2RlbHRhOiBudW1iZXIpID0+IFsgMTAwIC0gdyBdO1xuICAvLyBHZXQgdGhlIHdpZHRoIG9mIGEgMTAgcGl4ZWwgd2lkZSBjZWxsIG92ZXIgdGhlIHdpZHRoIG9mIHRoZSB0YWJsZSBhcyBhIHBlcmNlbnRhZ2VcbiAgY29uc3QgbWluQ2VsbFdpZHRoID0gKCkgPT4gQ2VsbFV0aWxzLm1pbldpZHRoKCkgLyBnZXRXaWR0aCgpICogMTAwO1xuXG4gIGNvbnN0IGFkanVzdFRhYmxlV2lkdGggPSAoZGVsdGE6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IGdldEZsb2F0V2lkdGgoKTtcbiAgICBjb25zdCBjaGFuZ2UgPSBkZWx0YSAvIDEwMCAqIGN1cnJlbnRXaWR0aDtcbiAgICBjb25zdCBuZXdXaWR0aCA9IGN1cnJlbnRXaWR0aCArIGNoYW5nZTtcbiAgICBTaXplcy5zZXRQZXJjZW50YWdlV2lkdGgodGFibGUsIG5ld1dpZHRoKTtcbiAgfTtcblxuICBjb25zdCBnZXRXaWR0aHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlU2l6ZTogVGFibGVTaXplKSA9PlxuICAgIENvbHVtblNpemVzLmdldFBlcmNlbnRhZ2VXaWR0aHMod2FyZWhvdXNlLCB0YWJsZSwgdGFibGVTaXplKTtcblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiBnZXRGbG9hdFdpZHRoLFxuICAgIHBpeGVsV2lkdGg6IGdldFdpZHRoLFxuICAgIGdldFdpZHRocyxcbiAgICBnZXRDZWxsRGVsdGEsXG4gICAgc2luZ2xlQ29sdW1uV2lkdGgsXG4gICAgbWluQ2VsbFdpZHRoLFxuICAgIHNldEVsZW1lbnRXaWR0aDogU2l6ZXMuc2V0UGVyY2VudGFnZVdpZHRoLFxuICAgIGFkanVzdFRhYmxlV2lkdGgsXG4gICAgaXNSZWxhdGl2ZTogdHJ1ZSxcbiAgICBsYWJlbDogJ3BlcmNlbnQnXG4gIH07XG59O1xuXG5jb25zdCBwaXhlbFNpemUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IFRhYmxlU2l6ZSA9PiB7XG4gIGNvbnN0IGdldFdpZHRoID0gd2lkdGhMb29rdXAodGFibGUsIFdpZHRoLmdldCk7XG4gIGNvbnN0IGdldENlbGxEZWx0YSA9IEZ1bi5pZGVudGl0eTtcblxuICBjb25zdCBzaW5nbGVDb2x1bW5XaWR0aCA9ICh3OiBudW1iZXIsIGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBuZXdOZXh0ID0gTWF0aC5tYXgoQ2VsbFV0aWxzLm1pbldpZHRoKCksIHcgKyBkZWx0YSk7XG4gICAgcmV0dXJuIFsgbmV3TmV4dCAtIHcgXTtcbiAgfTtcblxuICBjb25zdCBhZGp1c3RUYWJsZVdpZHRoID0gKGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBuZXdXaWR0aCA9IGdldFdpZHRoKCkgKyBkZWx0YTtcbiAgICBTaXplcy5zZXRQaXhlbFdpZHRoKHRhYmxlLCBuZXdXaWR0aCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0V2lkdGhzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSkgPT5cbiAgICBDb2x1bW5TaXplcy5nZXRQaXhlbFdpZHRocyh3YXJlaG91c2UsIHRhYmxlLCB0YWJsZVNpemUpO1xuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IGdldFdpZHRoLFxuICAgIHBpeGVsV2lkdGg6IGdldFdpZHRoLFxuICAgIGdldFdpZHRocyxcbiAgICBnZXRDZWxsRGVsdGEsXG4gICAgc2luZ2xlQ29sdW1uV2lkdGgsXG4gICAgbWluQ2VsbFdpZHRoOiBDZWxsVXRpbHMubWluV2lkdGgsXG4gICAgc2V0RWxlbWVudFdpZHRoOiBTaXplcy5zZXRQaXhlbFdpZHRoLFxuICAgIGFkanVzdFRhYmxlV2lkdGgsXG4gICAgaXNSZWxhdGl2ZTogZmFsc2UsXG4gICAgbGFiZWw6ICdwaXhlbCdcbiAgfTtcbn07XG5cbmNvbnN0IGNob29zZVNpemUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB3aWR0aDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHBlcmNlbnRNYXRjaCA9IFNpemVzLnBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCgpLmV4ZWMod2lkdGgpO1xuICBpZiAocGVyY2VudE1hdGNoICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHBlcmNlbnRhZ2VTaXplKGVsZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwaXhlbFNpemUoZWxlbWVudCk7XG4gIH1cbn07XG5cbmNvbnN0IGdldFRhYmxlU2l6ZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogVGFibGVTaXplID0+IHtcbiAgY29uc3Qgd2lkdGggPSBTaXplcy5nZXRSYXdXaWR0aCh0YWJsZSk7XG4gIHJldHVybiB3aWR0aC5mb2xkKFxuICAgICgpID0+IG5vbmVTaXplKHRhYmxlKSxcbiAgICAodykgPT4gY2hvb3NlU2l6ZSh0YWJsZSwgdylcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBUYWJsZVNpemUgPSB7XG4gIGdldFRhYmxlU2l6ZSxcbiAgcGl4ZWxTaXplLFxuICBwZXJjZW50YWdlU2l6ZSxcbiAgbm9uZVNpemVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9iaiwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIERldGFpbHNMaXN0IGZyb20gJy4uL21vZGVsL0RldGFpbHNMaXN0JztcbmltcG9ydCAqIGFzIExvY2tlZENvbHVtblV0aWxzIGZyb20gJy4uL3V0aWwvTG9ja2VkQ29sdW1uVXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBDb21wRWxtIH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgVGFibGVMb29rdXAgZnJvbSAnLi9UYWJsZUxvb2t1cCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FyZWhvdXNlIHtcbiAgcmVhZG9ubHkgZ3JpZDogU3RydWN0cy5HcmlkO1xuICByZWFkb25seSBhY2Nlc3M6IFJlY29yZDxzdHJpbmcsIFN0cnVjdHMuRGV0YWlsRXh0PjtcbiAgcmVhZG9ubHkgYWxsOiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbEV4dCwgSFRNTFRhYmxlUm93RWxlbWVudD5bXTtcbiAgcmVhZG9ubHkgY29sdW1uczogUmVjb3JkPG51bWJlciwgU3RydWN0cy5Db2x1bW5FeHQ+O1xuICByZWFkb25seSBjb2xncm91cHM6IFN0cnVjdHMuQ29sZ3JvdXA8U3RydWN0cy5Db2x1bW5FeHQ+W107XG59XG5cbmNvbnN0IGtleSA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gcm93ICsgJywnICsgY29sdW1uO1xufTtcblxuY29uc3QgZ2V0QXQgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0PiA9PlxuICBPcHRpb25hbC5mcm9tKHdhcmVob3VzZS5hY2Nlc3Nba2V5KHJvdywgY29sdW1uKV0pO1xuXG5jb25zdCBmaW5kSXRlbSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaXRlbTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSk6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0PiA9PiB7XG4gIGNvbnN0IGZpbHRlcmVkID0gZmlsdGVySXRlbXMod2FyZWhvdXNlLCAoZGV0YWlsKSA9PiB7XG4gICAgcmV0dXJuIGNvbXBhcmF0b3IoaXRlbSwgZGV0YWlsLmVsZW1lbnQpO1xuICB9KTtcblxuICByZXR1cm4gZmlsdGVyZWQubGVuZ3RoID4gMCA/IE9wdGlvbmFsLnNvbWUoZmlsdGVyZWRbMF0pIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuY29uc3QgZmlsdGVySXRlbXMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHByZWRpY2F0ZTogKHg6IFN0cnVjdHMuRGV0YWlsRXh0LCBpOiBudW1iZXIpID0+IGJvb2xlYW4pOiBTdHJ1Y3RzLkRldGFpbEV4dFtdID0+IHtcbiAgY29uc3QgYWxsID0gQXJyLmJpbmQod2FyZWhvdXNlLmFsbCwgKHIpID0+IHtcbiAgICByZXR1cm4gci5jZWxscztcbiAgfSk7XG4gIHJldHVybiBBcnIuZmlsdGVyKGFsbCwgcHJlZGljYXRlKTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlQ29sdW1ucyA9IChyb3dEYXRhOiBTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbDxIVE1MVGFibGVDb2xFbGVtZW50PiwgSFRNTFRhYmxlQ29sRWxlbWVudD4pOiBSZWNvcmQ8bnVtYmVyLCBTdHJ1Y3RzLkNvbHVtbkV4dD4gPT4ge1xuICBjb25zdCBjb2x1bW5zR3JvdXA6IFJlY29yZDxudW1iZXIsIFN0cnVjdHMuQ29sdW1uRXh0PiA9IHt9O1xuICBsZXQgaW5kZXggPSAwO1xuXG4gIEFyci5lYWNoKHJvd0RhdGEuY2VsbHMsIChjb2x1bW4pID0+IHtcbiAgICBjb25zdCBjb2xzcGFuID0gY29sdW1uLmNvbHNwYW47XG5cbiAgICBBcnIucmFuZ2UoY29sc3BhbiwgKGNvbHVtbkluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjb2xJbmRleCA9IGluZGV4ICsgY29sdW1uSW5kZXg7XG4gICAgICBjb2x1bW5zR3JvdXBbY29sSW5kZXhdID0gU3RydWN0cy5jb2x1bW5leHQoY29sdW1uLmVsZW1lbnQsIGNvbHNwYW4sIGNvbEluZGV4KTtcbiAgICB9KTtcblxuICAgIGluZGV4ICs9IGNvbHNwYW47XG4gIH0pO1xuXG4gIHJldHVybiBjb2x1bW5zR3JvdXA7XG59O1xuXG4vKlxuICogRnJvbSBhIGxpc3Qgb2YgbGlzdCBvZiBEZXRhaWwsIGdlbmVyYXRlIHRocmVlIHBpZWNlcyBvZiBpbmZvcm1hdGlvbjpcbiAqICAxLiB0aGUgZ3JpZCBzaXplXG4gKiAgMi4gYSBkYXRhIHN0cnVjdHVyZSB3aGljaCBjYW4gZWZmaWNpZW50bHkgaWRlbnRpZnkgd2hpY2ggY2VsbCBpcyBpbiB3aGljaCByb3csY29sdW1uIHBvc2l0aW9uXG4gKiAgMy4gYSBsaXN0IG9mIGFsbCBjZWxscyBpbiBvcmRlciBsZWZ0LXRvLXJpZ2h0LCB0b3AtdG8tYm90dG9tXG4gKi9cbmNvbnN0IGdlbmVyYXRlID0gKGxpc3Q6IFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsPltdKTogV2FyZWhvdXNlID0+IHtcbiAgLy8gbGlzdCBpcyBhbiBhcnJheSBvZiBvYmplY3RzLCBtYWRlIGJ5IGNlbGxzIGFuZCBlbGVtZW50c1xuICAvLyBlbGVtZW50czogaXMgdGhlIFRSXG4gIC8vIGNlbGxzOiBpcyBhbiBhcnJheSBvZiBvYmplY3RzIHJlcHJlc2VudGluZyB0aGUgY2VsbHMgaW4gdGhlIHJvdy5cbiAgLy8gICAgICAgIEl0IGlzIG1hZGUgb2Y6XG4gIC8vICAgICAgICAgIGNvbHNwYW4gKG1lcmdlIGNlbGwpXG4gIC8vICAgICAgICAgIGVsZW1lbnRcbiAgLy8gICAgICAgICAgcm93c3BhbiAobWVyZ2UgY29scylcbiAgY29uc3QgYWNjZXNzOiBSZWNvcmQ8c3RyaW5nLCBTdHJ1Y3RzLkRldGFpbEV4dD4gPSB7fTtcbiAgY29uc3QgY2VsbHM6IFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsRXh0LCBIVE1MVGFibGVSb3dFbGVtZW50PltdID0gW107XG5cbiAgY29uc3QgdGFibGVPcHQgPSBBcnIuaGVhZChsaXN0KS5tYXAoKHJvd0RhdGEpID0+IHJvd0RhdGEuZWxlbWVudCkuYmluZChUYWJsZUxvb2t1cC50YWJsZSk7XG4gIGNvbnN0IGxvY2tlZENvbHVtbnM6IFJlY29yZDxzdHJpbmcsIHRydWU+ID0gdGFibGVPcHQuYmluZChMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbVRhYmxlKS5nZXRPcih7fSk7XG5cbiAgbGV0IG1heFJvd3MgPSAwO1xuICBsZXQgbWF4Q29sdW1ucyA9IDA7XG4gIGxldCByb3dDb3VudCA9IDA7XG5cbiAgY29uc3QgeyBwYXNzOiBjb2xncm91cFJvd3MsIGZhaWw6IHJvd3MgfSA9IEFyci5wYXJ0aXRpb24obGlzdCwgKHJvd0RhdGEpID0+IHJvd0RhdGEuc2VjdGlvbiA9PT0gJ2NvbGdyb3VwJyk7XG5cbiAgLy8gSGFuZGxlIHJvd3MgZmlyc3RcbiAgQXJyLmVhY2gocm93cyBhcyBBcnJheTxTdHJ1Y3RzLlJvd0RldGFpbDxTdHJ1Y3RzLkRldGFpbDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIEhUTUxUYWJsZVJvd0VsZW1lbnQ+PiwgKHJvd0RhdGEpID0+IHtcbiAgICBjb25zdCBjdXJyZW50Um93OiBTdHJ1Y3RzLkRldGFpbEV4dFtdID0gW107XG4gICAgQXJyLmVhY2gocm93RGF0YS5jZWxscywgKHJvd0NlbGwpID0+IHtcbiAgICAgIGxldCBzdGFydCA9IDA7XG5cbiAgICAgIC8vIElmIHRoaXMgc3BvdCBoYXMgYmVlbiB0YWtlbiBieSBhIHByZXZpb3VzIHJvd3NwYW4sIHNraXAgaXQuXG4gICAgICB3aGlsZSAoYWNjZXNzW2tleShyb3dDb3VudCwgc3RhcnQpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0YXJ0Kys7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzTG9ja2VkID0gT2JqLmhhc05vbk51bGxhYmxlS2V5KGxvY2tlZENvbHVtbnMsIHN0YXJ0LnRvU3RyaW5nKCkpO1xuICAgICAgY29uc3QgY3VycmVudCA9IFN0cnVjdHMuZXh0ZW5kZWQocm93Q2VsbC5lbGVtZW50LCByb3dDZWxsLnJvd3NwYW4sIHJvd0NlbGwuY29sc3Bhbiwgcm93Q291bnQsIHN0YXJ0LCBpc0xvY2tlZCk7XG5cbiAgICAgIC8vIE9jY3VweSBhbGwgdGhlIChyb3csIGNvbHVtbikgcG9zaXRpb25zIHRoYXQgdGhpcyBjZWxsIHNwYW5zIGZvci5cbiAgICAgIGZvciAobGV0IG9jY3VwaWVkQ29sdW1uUG9zaXRpb24gPSAwOyBvY2N1cGllZENvbHVtblBvc2l0aW9uIDwgcm93Q2VsbC5jb2xzcGFuOyBvY2N1cGllZENvbHVtblBvc2l0aW9uKyspIHtcbiAgICAgICAgZm9yIChsZXQgb2NjdXBpZWRSb3dQb3NpdGlvbiA9IDA7IG9jY3VwaWVkUm93UG9zaXRpb24gPCByb3dDZWxsLnJvd3NwYW47IG9jY3VwaWVkUm93UG9zaXRpb24rKykge1xuICAgICAgICAgIGNvbnN0IHJvd1Bvc2l0aW9uID0gcm93Q291bnQgKyBvY2N1cGllZFJvd1Bvc2l0aW9uO1xuICAgICAgICAgIGNvbnN0IGNvbHVtblBvc2l0aW9uID0gc3RhcnQgKyBvY2N1cGllZENvbHVtblBvc2l0aW9uO1xuICAgICAgICAgIGNvbnN0IG5ld3BvcyA9IGtleShyb3dQb3NpdGlvbiwgY29sdW1uUG9zaXRpb24pO1xuICAgICAgICAgIGFjY2Vzc1tuZXdwb3NdID0gY3VycmVudDtcbiAgICAgICAgICBtYXhDb2x1bW5zID0gTWF0aC5tYXgobWF4Q29sdW1ucywgY29sdW1uUG9zaXRpb24gKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjdXJyZW50Um93LnB1c2goY3VycmVudCk7XG4gICAgfSk7XG5cbiAgICBtYXhSb3dzKys7XG4gICAgY2VsbHMucHVzaChTdHJ1Y3RzLnJvd2RldGFpbChyb3dEYXRhLmVsZW1lbnQsIGN1cnJlbnRSb3csIHJvd0RhdGEuc2VjdGlvbikpO1xuICAgIHJvd0NvdW50Kys7XG4gIH0pO1xuXG4gIC8vIEhhbmRsZSBjb2xncm91cHNcbiAgLy8gTm90ZTogQ3VycmVudGx5IG9ubHkgYSBzaW5nbGUgY29sZ3JvdXAgaXMgc3VwcG9ydGVkIHNvIGp1c3QgdXNlIHRoZSBsYXN0IG9uZVxuICBjb25zdCB7IGNvbHVtbnMsIGNvbGdyb3VwcyB9ID0gQXJyLmxhc3QoY29sZ3JvdXBSb3dzIGFzIEFycmF5PFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsPEhUTUxUYWJsZUNvbEVsZW1lbnQ+LCBIVE1MVGFibGVDb2xFbGVtZW50Pj4pLm1hcCgocm93RGF0YSkgPT4ge1xuICAgIGNvbnN0IGNvbHVtbnMgPSBnZW5lcmF0ZUNvbHVtbnMocm93RGF0YSk7XG4gICAgY29uc3QgY29sZ3JvdXAgPSBTdHJ1Y3RzLmNvbGdyb3VwKHJvd0RhdGEuZWxlbWVudCwgT2JqLnZhbHVlcyhjb2x1bW5zKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbGdyb3VwczogWyBjb2xncm91cCBdLFxuICAgICAgY29sdW1uc1xuICAgIH07XG4gIH0pLmdldE9yVGh1bmsoKCkgPT4gKHtcbiAgICBjb2xncm91cHM6IFtdLFxuICAgIGNvbHVtbnM6IHt9XG4gIH0pKTtcblxuICBjb25zdCBncmlkID0gU3RydWN0cy5ncmlkKG1heFJvd3MsIG1heENvbHVtbnMpO1xuXG4gIHJldHVybiB7XG4gICAgZ3JpZCxcbiAgICBhY2Nlc3MsXG4gICAgYWxsOiBjZWxscyxcbiAgICBjb2x1bW5zLFxuICAgIGNvbGdyb3Vwc1xuICB9O1xufTtcblxuY29uc3QgZnJvbVRhYmxlID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBXYXJlaG91c2UgPT4ge1xuICBjb25zdCBsaXN0ID0gRGV0YWlsc0xpc3QuZnJvbVRhYmxlKHRhYmxlKTtcbiAgcmV0dXJuIGdlbmVyYXRlKGxpc3QpO1xufTtcblxuY29uc3QganVzdENlbGxzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlKTogU3RydWN0cy5EZXRhaWxFeHRbXSA9PlxuICBBcnIuYmluZCh3YXJlaG91c2UuYWxsLCAodykgPT4gdy5jZWxscyk7XG5cbmNvbnN0IGp1c3RDb2x1bW5zID0gKHdhcmVob3VzZTogV2FyZWhvdXNlKTogU3RydWN0cy5Db2x1bW5FeHRbXSA9PlxuICBPYmoudmFsdWVzKHdhcmVob3VzZS5jb2x1bW5zKTtcblxuY29uc3QgaGFzQ29sdW1ucyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSk6IGJvb2xlYW4gPT5cbiAgT2JqLmtleXMod2FyZWhvdXNlLmNvbHVtbnMpLmxlbmd0aCA+IDA7XG5cbmNvbnN0IGdldENvbHVtbkF0ID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBjb2x1bW5JbmRleDogbnVtYmVyKTogT3B0aW9uYWw8U3RydWN0cy5Db2x1bW5FeHQ+ID0+XG4gIE9wdGlvbmFsLmZyb20od2FyZWhvdXNlLmNvbHVtbnNbY29sdW1uSW5kZXhdKTtcblxuZXhwb3J0IGNvbnN0IFdhcmVob3VzZSA9IHtcbiAgZnJvbVRhYmxlLFxuICBnZW5lcmF0ZSxcbiAgZ2V0QXQsXG4gIGZpbmRJdGVtLFxuICBmaWx0ZXJJdGVtcyxcbiAganVzdENlbGxzLFxuICBqdXN0Q29sdW1ucyxcbiAgaGFzQ29sdW1ucyxcbiAgZ2V0Q29sdW1uQXRcbn07XG4iLCJpbXBvcnQgeyBBZHQgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG50eXBlIE5vbmVIYW5kbGVyPFQ+ID0gKCkgPT4gVDtcbnR5cGUgT25seUhhbmRsZXI8VD4gPSAoaW5kZXg6IG51bWJlcikgPT4gVDtcbnR5cGUgTGVmdEhhbmRsZXI8VD4gPSAoaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyKSA9PiBUO1xudHlwZSBNaWRkbGVIYW5kbGVyPFQ+ID0gKHByZXY6IG51bWJlciwgaW5kZXg6IG51bWJlciwgbmV4dDogbnVtYmVyKSA9PiBUO1xudHlwZSBSaWdodEhhbmRsZXI8VD4gPSAocHJldjogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiBUO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbkNvbnRleHQge1xuICBmb2xkOiA8VD4gKFxuICAgIG5vbmU6IE5vbmVIYW5kbGVyPFQ+LFxuICAgIG9ubHk6IE9ubHlIYW5kbGVyPFQ+LFxuICAgIGxlZnQ6IExlZnRIYW5kbGVyPFQ+LFxuICAgIG1pZGRsZTogTWlkZGxlSGFuZGxlcjxUPixcbiAgICByaWdodDogUmlnaHRIYW5kbGVyPFQ+LFxuICApID0+IFQ7XG4gIG1hdGNoOiA8VD4gKGJyYW5jaGVzOiB7XG4gICAgbm9uZTogTm9uZUhhbmRsZXI8VD47XG4gICAgb25seTogT25seUhhbmRsZXI8VD47XG4gICAgbGVmdDogTGVmdEhhbmRsZXI8VD47XG4gICAgbWlkZGxlOiBNaWRkbGVIYW5kbGVyPFQ+O1xuICAgIHJpZ2h0OiBSaWdodEhhbmRsZXI8VD47XG4gIH0pID0+IFQ7XG4gIGxvZzogKGxhYmVsOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmNvbnN0IGFkdDoge1xuICBub25lOiBOb25lSGFuZGxlcjxDb2x1bW5Db250ZXh0PjtcbiAgb25seTogT25seUhhbmRsZXI8Q29sdW1uQ29udGV4dD47XG4gIGxlZnQ6IExlZnRIYW5kbGVyPENvbHVtbkNvbnRleHQ+O1xuICBtaWRkbGU6IE1pZGRsZUhhbmRsZXI8Q29sdW1uQ29udGV4dD47XG4gIHJpZ2h0OiBSaWdodEhhbmRsZXI8Q29sdW1uQ29udGV4dD47XG59ID0gQWR0LmdlbmVyYXRlKFtcbiAgeyBub25lOiBbXSB9LFxuICB7IG9ubHk6IFsgJ2luZGV4JyBdIH0sXG4gIHsgbGVmdDogWyAnaW5kZXgnLCAnbmV4dCcgXSB9LFxuICB7IG1pZGRsZTogWyAncHJldicsICdpbmRleCcsICduZXh0JyBdIH0sXG4gIHsgcmlnaHQ6IFsgJ3ByZXYnLCAnaW5kZXgnIF0gfVxuXSk7XG5cbmV4cG9ydCBjb25zdCBDb2x1bW5Db250ZXh0ID0ge1xuICAuLi5hZHRcbn07IiwiaW1wb3J0IHsgQXJyLCBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFJlc2l6ZUJlaGF2aW91ciB9IGZyb20gJy4uL2FwaS9SZXNpemVCZWhhdmlvdXInO1xuaW1wb3J0IHR5cGUgeyBUYWJsZVNpemUgfSBmcm9tICcuLi9hcGkvVGFibGVTaXplJztcblxuaW1wb3J0IHsgQ29sdW1uQ29udGV4dCB9IGZyb20gJy4vQ29sdW1uQ29udGV4dCc7XG5cbi8qXG4gKiBCYXNlZCBvbiB0aGUgY29sdW1uIGluZGV4LCBpZGVudGlmeSB0aGUgY29udGV4dFxuICovXG5jb25zdCBuZWlnaGJvdXJzID0gKGlucHV0OiBudW1iZXJbXSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIENvbHVtbkNvbnRleHQubm9uZSgpO1xuICB9XG4gIGlmIChpbnB1dC5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gQ29sdW1uQ29udGV4dC5vbmx5KDApO1xuICB9XG4gIGlmIChpbmRleCA9PT0gMCkge1xuICAgIHJldHVybiBDb2x1bW5Db250ZXh0LmxlZnQoMCwgMSk7XG4gIH1cbiAgaWYgKGluZGV4ID09PSBpbnB1dC5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuIENvbHVtbkNvbnRleHQucmlnaHQoaW5kZXggLSAxLCBpbmRleCk7XG4gIH1cbiAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCA8IGlucHV0Lmxlbmd0aCAtIDEpIHtcbiAgICByZXR1cm4gQ29sdW1uQ29udGV4dC5taWRkbGUoaW5kZXggLSAxLCBpbmRleCwgaW5kZXggKyAxKTtcbiAgfVxuICByZXR1cm4gQ29sdW1uQ29udGV4dC5ub25lKCk7XG59O1xuXG4vKlxuICogQ2FsY3VsYXRlIHRoZSBvZmZzZXRzIHRvIGFwcGx5IHRvIGVhY2ggY29sdW1uIHdpZHRoIChub3QgdGhlIGFic29sdXRlIHdpZHRocyB0aGVtc2VsdmVzKVxuICogYmFzZWQgb24gYSByZXNpemUgYXQgY29sdW1uOiBjb2x1bW4gb2Ygc3RlcDogc3RlcFxuICovXG5jb25zdCBkZXRlcm1pbmUgPSAoaW5wdXQ6IG51bWJlcltdLCBjb2x1bW46IG51bWJlciwgc3RlcDogbnVtYmVyLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSwgcmVzaXplOiBSZXNpemVCZWhhdmlvdXIpOiBudW1iZXJbXSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGlucHV0LnNsaWNlKDApO1xuICBjb25zdCBjb250ZXh0ID0gbmVpZ2hib3VycyhpbnB1dCwgY29sdW1uKTtcblxuICBjb25zdCBvbk5vbmUgPSBGdW4uY29uc3RhbnQoQXJyLm1hcChyZXN1bHQsIEZ1bi5jb25zdGFudCgwKSkpO1xuICBjb25zdCBvbk9ubHkgPSAoaW5kZXg6IG51bWJlcikgPT4gdGFibGVTaXplLnNpbmdsZUNvbHVtbldpZHRoKHJlc3VsdFtpbmRleF0sIHN0ZXApO1xuXG4gIGNvbnN0IG9uTGVmdCA9IChpbmRleDogbnVtYmVyLCBuZXh0OiBudW1iZXIpID0+XG4gICAgcmVzaXplLmNhbGNMZWZ0RWRnZURlbHRhcyhyZXN1bHQsIGluZGV4LCBuZXh0LCBzdGVwLCB0YWJsZVNpemUubWluQ2VsbFdpZHRoKCksIHRhYmxlU2l6ZS5pc1JlbGF0aXZlKTtcblxuICBjb25zdCBvbk1pZGRsZSA9IChwcmV2OiBudW1iZXIsIGluZGV4OiBudW1iZXIsIG5leHQ6IG51bWJlcikgPT5cbiAgICByZXNpemUuY2FsY01pZGRsZURlbHRhcyhyZXN1bHQsIHByZXYsIGluZGV4LCBuZXh0LCBzdGVwLCB0YWJsZVNpemUubWluQ2VsbFdpZHRoKCksIHRhYmxlU2l6ZS5pc1JlbGF0aXZlKTtcblxuICAvLyBBcHBsaWVzIHRvIHRoZSBsYXN0IGNvbHVtbiBiYXJcbiAgY29uc3Qgb25SaWdodCA9IChwcmV2OiBudW1iZXIsIGluZGV4OiBudW1iZXIpID0+XG4gICAgcmVzaXplLmNhbGNSaWdodEVkZ2VEZWx0YXMocmVzdWx0LCBwcmV2LCBpbmRleCwgc3RlcCwgdGFibGVTaXplLm1pbkNlbGxXaWR0aCgpLCB0YWJsZVNpemUuaXNSZWxhdGl2ZSk7XG5cbiAgcmV0dXJuIGNvbnRleHQuZm9sZChvbk5vbmUsIG9uT25seSwgb25MZWZ0LCBvbk1pZGRsZSwgb25SaWdodCk7XG59O1xuXG5leHBvcnQge1xuICBkZXRlcm1pbmVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IERldGFpbEV4dCB9IGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuXG50eXBlIFZhbGlkQ2VsbEZuID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IGJvb2xlYW47XG5cbi8qXG4gKiBJZGVudGlmeSBmb3IgZWFjaCBjb2x1bW4sIGEgY2VsbCB0aGF0IGhhcyBjb2xzcGFuIDEuIE5vdGUsIHRoaXNcbiAqIG1heSBhY3R1YWxseSBmYWlsLCBhbmQgZnV0dXJlIHdvcmsgd2lsbCBiZSB0byBjYWxjdWxhdGUgY29sdW1uXG4gKiBzaXplcyB0aGF0IGFyZSBvbmx5IGF2YWlsYWJsZSB0aHJvdWdoIHRoZSBkaWZmZXJlbmNlIG9mIHR3b1xuICogc3Bhbm5pbmcgY29sdW1ucy5cbiAqL1xuY29uc3QgY29sdW1ucyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaXNWYWxpZENlbGw6IFZhbGlkQ2VsbEZuID0gRnVuLmFsd2F5cyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10gPT4ge1xuICBjb25zdCBncmlkID0gd2FyZWhvdXNlLmdyaWQ7XG4gIGNvbnN0IGNvbHMgPSBBcnIucmFuZ2UoZ3JpZC5jb2x1bW5zLCBGdW4uaWRlbnRpdHkpO1xuICBjb25zdCByb3dzQXJyID0gQXJyLnJhbmdlKGdyaWQucm93cywgRnVuLmlkZW50aXR5KTtcblxuICByZXR1cm4gQXJyLm1hcChjb2xzLCAoY29sKSA9PiB7XG4gICAgY29uc3QgZ2V0QmxvY2sgPSAoKSA9PlxuICAgICAgQXJyLmJpbmQocm93c0FyciwgKHIpID0+XG4gICAgICAgIFdhcmVob3VzZS5nZXRBdCh3YXJlaG91c2UsIHIsIGNvbClcbiAgICAgICAgICAuZmlsdGVyKChkZXRhaWwpID0+IGRldGFpbC5jb2x1bW4gPT09IGNvbClcbiAgICAgICAgICAudG9BcnJheSgpXG4gICAgICApO1xuXG4gICAgY29uc3QgaXNWYWxpZCA9IChkZXRhaWw6IERldGFpbEV4dCkgPT4gZGV0YWlsLmNvbHNwYW4gPT09IDEgJiYgaXNWYWxpZENlbGwoZGV0YWlsLmVsZW1lbnQpO1xuICAgIGNvbnN0IGdldEZhbGxiYWNrID0gKCkgPT4gV2FyZWhvdXNlLmdldEF0KHdhcmVob3VzZSwgMCwgY29sKTtcbiAgICByZXR1cm4gZGVjaWRlKGdldEJsb2NrLCBpc1ZhbGlkLCBnZXRGYWxsYmFjayk7XG4gIH0pO1xufTtcblxuY29uc3QgZGVjaWRlID0gKFxuICBnZXRCbG9jazogKCkgPT4gRGV0YWlsRXh0W10sXG4gIGlzVmFsaWQ6IChkZXRhaWw6IERldGFpbEV4dCkgPT4gYm9vbGVhbixcbiAgZ2V0RmFsbGJhY2s6ICgpID0+IE9wdGlvbmFsPERldGFpbEV4dD5cbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+ID0+IHtcbiAgY29uc3QgaW5CbG9jayA9IGdldEJsb2NrKCk7XG4gIGNvbnN0IHZhbGlkSW5CbG9jayA9IEFyci5maW5kKGluQmxvY2ssIGlzVmFsaWQpO1xuICBjb25zdCBkZXRhaWxPcHRpb24gPSB2YWxpZEluQmxvY2sub3JUaHVuaygoKSA9PiBPcHRpb25hbC5mcm9tKGluQmxvY2tbMF0pLm9yVGh1bmsoZ2V0RmFsbGJhY2spKTtcbiAgcmV0dXJuIGRldGFpbE9wdGlvbi5tYXAoKGRldGFpbCkgPT4gZGV0YWlsLmVsZW1lbnQpO1xufTtcblxuY29uc3Qgcm93cyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10gPT4ge1xuICBjb25zdCBncmlkID0gd2FyZWhvdXNlLmdyaWQ7XG4gIGNvbnN0IHJvd3NBcnIgPSBBcnIucmFuZ2UoZ3JpZC5yb3dzLCBGdW4uaWRlbnRpdHkpO1xuICBjb25zdCBjb2xzID0gQXJyLnJhbmdlKGdyaWQuY29sdW1ucywgRnVuLmlkZW50aXR5KTtcblxuICByZXR1cm4gQXJyLm1hcChyb3dzQXJyLCAocm93KSA9PiB7XG4gICAgY29uc3QgZ2V0QmxvY2sgPSAoKSA9PiBBcnIuYmluZChjb2xzLCAoYykgPT4gV2FyZWhvdXNlLmdldEF0KHdhcmVob3VzZSwgcm93LCBjKVxuICAgICAgLmZpbHRlcigoZGV0YWlsKSA9PiBkZXRhaWwucm93ID09PSByb3cpXG4gICAgICAuZm9sZChGdW4uY29uc3RhbnQoW10gYXMgRGV0YWlsRXh0W10pLCAoZGV0YWlsKSA9PiBbIGRldGFpbCBdKVxuICAgICk7XG5cbiAgICBjb25zdCBpc1NpbmdsZSA9IChkZXRhaWw6IERldGFpbEV4dCkgPT4gZGV0YWlsLnJvd3NwYW4gPT09IDE7XG4gICAgY29uc3QgZ2V0RmFsbGJhY2sgPSAoKSA9PiBXYXJlaG91c2UuZ2V0QXQod2FyZWhvdXNlLCByb3csIDApO1xuICAgIHJldHVybiBkZWNpZGUoZ2V0QmxvY2ssIGlzU2luZ2xlLCBnZXRGYWxsYmFjayk7XG4gIH0pO1xuXG59O1xuXG5leHBvcnQgeyBjb2x1bW5zLCByb3dzIH07XG4iLCJpbXBvcnQgeyBBcnIsIE9wdGlvbmFsLCBPcHRpb25hbHMgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgdHlwZSB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmV4cG9ydCB0eXBlIFJvd0hlYWRlclR5cGUgPSAnc2VjdGlvbicgfCAnY2VsbHMnIHwgJ3NlY3Rpb25DZWxscyc7XG5leHBvcnQgdHlwZSBSb3dUeXBlID0gJ2hlYWRlcicgfCAnYm9keScgfCAnZm9vdGVyJztcblxuaW50ZXJmYWNlIFJvd0RldGFpbHMge1xuICByZWFkb25seSB0eXBlOiBSb3dUeXBlO1xuICByZWFkb25seSBzdWJUeXBlPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ29tbW9uQ2VsbERldGFpbHMge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Q2VsbEVsZW1lbnQ+O1xufVxuXG5pbnRlcmZhY2UgQ29tbW9uUm93RGV0YWlscyB7XG4gIHJlYWRvbmx5IGNlbGxzOiBDb21tb25DZWxsRGV0YWlsc1tdO1xuICByZWFkb25seSBzZWN0aW9uOiBTdHJ1Y3RzLlNlY3Rpb247XG59XG5cbmNvbnN0IGlzSGVhZGVyQ2VsbCA9IFN1Z2FyTm9kZS5pc1RhZygndGgnKTtcblxuY29uc3QgaXNIZWFkZXJDZWxscyA9IChjZWxsczogQ29tbW9uQ2VsbERldGFpbHNbXSk6IGJvb2xlYW4gPT5cbiAgQXJyLmZvcmFsbChjZWxscywgKGNlbGwpID0+IGlzSGVhZGVyQ2VsbChjZWxsLmVsZW1lbnQpKTtcblxuY29uc3QgZ2V0Um93SGVhZGVyVHlwZSA9IChpc0hlYWRlclJvdzogYm9vbGVhbiwgaXNIZWFkZXJDZWxsczogYm9vbGVhbik6IFJvd0hlYWRlclR5cGUgPT4ge1xuICBpZiAoaXNIZWFkZXJSb3cgJiYgaXNIZWFkZXJDZWxscykge1xuICAgIHJldHVybiAnc2VjdGlvbkNlbGxzJztcbiAgfSBlbHNlIGlmIChpc0hlYWRlclJvdykge1xuICAgIHJldHVybiAnc2VjdGlvbic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdjZWxscyc7XG4gIH1cbn07XG5cbmNvbnN0IGdldFJvd1R5cGUgPSAocm93OiBDb21tb25Sb3dEZXRhaWxzKTogUm93RGV0YWlscyA9PiB7XG4gIC8vIEhlYWRlciByb3dzIGNhbiB1c2UgYSBjb21iaW5hdGlvbiBvZiB0aGVhZHMgYW5kIHRocyAtIHdhbnQgdG8gZGV0ZWN0IHRoZSBkaWZmZXJlbnQgY29tYmluYXRpb25zXG4gIGNvbnN0IGlzSGVhZGVyUm93ID0gcm93LnNlY3Rpb24gPT09ICd0aGVhZCc7XG4gIGNvbnN0IGlzSGVhZGVyQ2VsbHMgPSBPcHRpb25hbHMuaXMoZmluZENvbW1vbkNlbGxUeXBlKHJvdy5jZWxscyksICd0aCcpO1xuICBpZiAocm93LnNlY3Rpb24gPT09ICd0Zm9vdCcpIHtcbiAgICByZXR1cm4geyB0eXBlOiAnZm9vdGVyJyB9O1xuICB9IGVsc2UgaWYgKGlzSGVhZGVyUm93IHx8IGlzSGVhZGVyQ2VsbHMpIHtcbiAgICByZXR1cm4geyB0eXBlOiAnaGVhZGVyJywgc3ViVHlwZTogZ2V0Um93SGVhZGVyVHlwZShpc0hlYWRlclJvdywgaXNIZWFkZXJDZWxscykgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyB0eXBlOiAnYm9keScgfTtcbiAgfVxufTtcblxuY29uc3QgZmluZENvbW1vbkNlbGxUeXBlID0gKGNlbGxzOiBDb21tb25DZWxsRGV0YWlsc1tdKTogT3B0aW9uYWw8J3RkJyB8ICd0aCc+ID0+IHtcbiAgY29uc3QgaGVhZGVyQ2VsbHMgPSBBcnIuZmlsdGVyKGNlbGxzLCAoY2VsbCkgPT4gaXNIZWFkZXJDZWxsKGNlbGwuZWxlbWVudCkpO1xuICBpZiAoaGVhZGVyQ2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoJ3RkJyk7XG4gIH0gZWxzZSBpZiAoaGVhZGVyQ2VsbHMubGVuZ3RoID09PSBjZWxscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwuc29tZSgndGgnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpO1xuICB9XG59O1xuXG5jb25zdCBmaW5kQ29tbW9uUm93VHlwZSA9IChyb3dzOiBDb21tb25Sb3dEZXRhaWxzW10pOiBPcHRpb25hbDxSb3dUeXBlPiA9PiB7XG4gIGNvbnN0IHJvd1R5cGVzID0gQXJyLm1hcChyb3dzLCAocm93KSA9PiBnZXRSb3dUeXBlKHJvdykudHlwZSk7XG4gIGNvbnN0IGhhc0hlYWRlciA9IEFyci5jb250YWlucyhyb3dUeXBlcywgJ2hlYWRlcicpO1xuICBjb25zdCBoYXNGb290ZXIgPSBBcnIuY29udGFpbnMocm93VHlwZXMsICdmb290ZXInKTtcbiAgaWYgKCFoYXNIZWFkZXIgJiYgIWhhc0Zvb3Rlcikge1xuICAgIHJldHVybiBPcHRpb25hbC5zb21lKCdib2R5Jyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaGFzQm9keSA9IEFyci5jb250YWlucyhyb3dUeXBlcywgJ2JvZHknKTtcbiAgICBpZiAoaGFzSGVhZGVyICYmICFoYXNCb2R5ICYmICFoYXNGb290ZXIpIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKCdoZWFkZXInKTtcbiAgICB9IGVsc2UgaWYgKCFoYXNIZWFkZXIgJiYgIWhhc0JvZHkgJiYgaGFzRm9vdGVyKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSgnZm9vdGVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBmaW5kVGFibGVSb3dIZWFkZXJUeXBlID0gKHdhcmVob3VzZTogV2FyZWhvdXNlKTogT3B0aW9uYWw8Um93SGVhZGVyVHlwZT4gPT5cbiAgQXJyLmZpbmRNYXAod2FyZWhvdXNlLmFsbCwgKHJvdykgPT4ge1xuICAgIGNvbnN0IHJvd1R5cGUgPSBnZXRSb3dUeXBlKHJvdyk7XG4gICAgcmV0dXJuIHJvd1R5cGUudHlwZSA9PT0gJ2hlYWRlcicgPyBPcHRpb25hbC5mcm9tKHJvd1R5cGUuc3ViVHlwZSBhcyBSb3dIZWFkZXJUeXBlKSA6IE9wdGlvbmFsLm5vbmUoKTtcbiAgfSk7XG5cbmV4cG9ydCB7XG4gIGZpbmRDb21tb25DZWxsVHlwZSxcbiAgZmluZENvbW1vblJvd1R5cGUsXG4gIGZpbmRUYWJsZVJvd0hlYWRlclR5cGUsXG4gIGlzSGVhZGVyQ2VsbCxcbiAgaXNIZWFkZXJDZWxsc1xufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlLCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgVGFibGVMb29rdXAgZnJvbSAnLi4vYXBpL1RhYmxlTG9va3VwJztcbmltcG9ydCB7IGdldEF0dHJWYWx1ZSB9IGZyb20gJy4uL3V0aWwvQ2VsbFV0aWxzJztcblxuY29uc3QgZnJvbVJvd3NPckNvbEdyb3VwcyA9IChlbGVtczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PltdLCBnZXRTZWN0aW9uOiAoZ3JvdXA6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IFN0cnVjdHMuU2VjdGlvbik6IFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsPltdID0+XG4gIEFyci5tYXAoZWxlbXMsIChyb3cpID0+IHtcbiAgICBpZiAoU3VnYXJOb2RlLm5hbWUocm93KSA9PT0gJ2NvbGdyb3VwJykge1xuICAgICAgY29uc3QgY2VsbHMgPSBBcnIubWFwKFRhYmxlTG9va3VwLmNvbHVtbnMocm93KSwgKGNvbHVtbikgPT4ge1xuICAgICAgICBjb25zdCBjb2xzcGFuID0gZ2V0QXR0clZhbHVlKGNvbHVtbiwgJ3NwYW4nLCAxKTtcbiAgICAgICAgcmV0dXJuIFN0cnVjdHMuZGV0YWlsKGNvbHVtbiwgMSwgY29sc3Bhbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBTdHJ1Y3RzLnJvd2RldGFpbChyb3csIGNlbGxzLCAnY29sZ3JvdXAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2VsbHMgPSBBcnIubWFwKFRhYmxlTG9va3VwLmNlbGxzKHJvdyksIChjZWxsKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvd3NwYW4gPSBnZXRBdHRyVmFsdWUoY2VsbCwgJ3Jvd3NwYW4nLCAxKTtcbiAgICAgICAgY29uc3QgY29sc3BhbiA9IGdldEF0dHJWYWx1ZShjZWxsLCAnY29sc3BhbicsIDEpO1xuICAgICAgICByZXR1cm4gU3RydWN0cy5kZXRhaWwoY2VsbCwgcm93c3BhbiwgY29sc3Bhbik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIFN0cnVjdHMucm93ZGV0YWlsKHJvdywgY2VsbHMsIGdldFNlY3Rpb24ocm93KSk7XG4gICAgfVxuICB9KTtcblxuY29uc3QgZ2V0UGFyZW50U2VjdGlvbiA9IChncm91cDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IFN0cnVjdHMuU2VjdGlvbiA9PlxuICBUcmF2ZXJzZS5wYXJlbnQoZ3JvdXApLm1hcCgocGFyZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50TmFtZSA9IFN1Z2FyTm9kZS5uYW1lKHBhcmVudCk7XG4gICAgcmV0dXJuIFN0cnVjdHMuaXNWYWxpZFNlY3Rpb24ocGFyZW50TmFtZSkgPyBwYXJlbnROYW1lIDogJ3Rib2R5JztcbiAgfSkuZ2V0T3IoJ3Rib2R5Jyk7XG5cbi8qXG4gKiBUYWtlcyBhIERPTSB0YWJsZSBhbmQgcmV0dXJucyBhIGxpc3Qgb2YgbGlzdCBvZjpcbiAgIGVsZW1lbnQ6IHJvdyBlbGVtZW50XG4gICBjZWxsczogKGlkLCByb3dzcGFuLCBjb2xzcGFuKSBzdHJ1Y3RzXG4gKi9cbmNvbnN0IGZyb21UYWJsZSA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogU3RydWN0cy5Sb3dEZXRhaWw8U3RydWN0cy5EZXRhaWw+W10gPT4ge1xuICBjb25zdCByb3dzID0gVGFibGVMb29rdXAucm93cyh0YWJsZSk7XG4gIGNvbnN0IGNvbHVtbkdyb3VwcyA9IFRhYmxlTG9va3VwLmNvbHVtbkdyb3Vwcyh0YWJsZSk7XG5cbiAgY29uc3QgZWxlbXM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSA9IFsgLi4uY29sdW1uR3JvdXBzLCAuLi5yb3dzIF07XG4gIHJldHVybiBmcm9tUm93c09yQ29sR3JvdXBzKGVsZW1zLCBnZXRQYXJlbnRTZWN0aW9uKTtcbn07XG5cbmNvbnN0IGZyb21QYXN0ZWRSb3dzID0gKGVsZW1zOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10sIHNlY3Rpb246IFN0cnVjdHMuU2VjdGlvbik6IFN0cnVjdHMuUm93RGV0YWlsPFN0cnVjdHMuRGV0YWlsPltdID0+XG4gIGZyb21Sb3dzT3JDb2xHcm91cHMoZWxlbXMsICgpID0+IHNlY3Rpb24pO1xuXG5leHBvcnQge1xuICBmcm9tVGFibGUsXG4gIGZyb21QYXN0ZWRSb3dzXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9iaiwgUmVzdWx0IH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBTaW1wbGVHZW5lcmF0b3JzIH0gZnJvbSAnLi4vYXBpL0dlbmVyYXRvcnMnO1xuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgKiBhcyBMb2NrZWRDb2x1bW5VdGlscyBmcm9tICcuLi91dGlsL0xvY2tlZENvbHVtblV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ2VsbEVsZW1lbnQgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBHcmlkUm93IGZyb20gJy4vR3JpZFJvdyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICByZWFkb25seSBjb2xEZWx0YTogbnVtYmVyO1xuICByZWFkb25seSByb3dEZWx0YTogbnVtYmVyO1xufVxuXG4vKlxuICBGaXRtZW50LCBpcyBhIG1vZHVsZSB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBJbnNlcnRlZCB0YWJsZSAoZ3JpZEIpIGNhbiBmaXQgc3F1YXJlbGV5IHdpdGhpbiB0aGUgSG9zdCB0YWJsZSAoZ3JpZEEpLlxuICAgIC0gbWVhc3VyZSByZXR1cm5zIGEgZGVsdGEgb2Ygcm93cyBhbmQgY29scywgZWc6XG4gICAgICAgIC0gY29sOiAzIG1lYW5zIGdyaWRCIGNhbiBmaXQgd2l0aCAzIHNwYWNlcyB0byBzcGFyZVxuICAgICAgICAtIHJvdzogLTUgbWVhbnMgZ3JpZEIgY2FuIG5lZWRzIDUgbW9yZSByb3dzIHRvIGNvbXBsZXRlbHkgZml0IGludG8gZ3JpZEFcbiAgICAgICAgLSBjb2w6IDAsIHJvdzogMCBkZXBpY3MgcGVyZmVjdCBmaXRtZW50XG5cbiAgICAtIHRhaWxvciwgcmVxdWlyZXMgYSBkZWx0YSBhbmQgcmV0dXJucyBncmlkIHRoYXQgaXMgYnVpbHQgdG8gbWF0Y2ggdGhlIGRlbHRhLCB0YWlsb3JlZCB0byBmaXQuXG4gICAgICBlZzogM3gzIGdyaWRBLCB3aXRoIGEgZGVsdGEgY29sOiAtMywgcm93OiAyIHJldHVybnMgYSBuZXcgZ3JpZCAzIHJvd3MgeCA2IGNvbHNcblxuICAgIC0gYXNzdW1wdGlvbnM6IEFsbCBncmlkcyB1c2VkIGJ5IHRoaXMgbW9kdWxlIHNob3VsZCBiZSByZWN0YW5ndWxhclxuKi9cblxuY29uc3QgbWVhc3VyZSA9IChzdGFydEFkZHJlc3M6IFN0cnVjdHMuQWRkcmVzcywgZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSk6IFJlc3VsdDxEZWx0YSwgc3RyaW5nPiA9PiB7XG4gIGlmIChzdGFydEFkZHJlc3Mucm93ID49IGdyaWRBLmxlbmd0aCB8fCBzdGFydEFkZHJlc3MuY29sdW1uID4gR3JpZFJvdy5jZWxsTGVuZ3RoKGdyaWRBWzBdKSkge1xuICAgIHJldHVybiBSZXN1bHQuZXJyb3IoXG4gICAgICAnaW52YWxpZCBzdGFydCBhZGRyZXNzIG91dCBvZiB0YWJsZSBib3VuZHMsIHJvdzogJyArIHN0YXJ0QWRkcmVzcy5yb3cgKyAnLCBjb2x1bW46ICcgKyBzdGFydEFkZHJlc3MuY29sdW1uXG4gICAgKTtcbiAgfVxuICBjb25zdCByb3dSZW1haW5kZXIgPSBncmlkQS5zbGljZShzdGFydEFkZHJlc3Mucm93KTtcbiAgY29uc3QgY29sUmVtYWluZGVyID0gcm93UmVtYWluZGVyWzBdLmNlbGxzLnNsaWNlKHN0YXJ0QWRkcmVzcy5jb2x1bW4pO1xuXG4gIGNvbnN0IGNvbFJlcXVpcmVkID0gR3JpZFJvdy5jZWxsTGVuZ3RoKGdyaWRCWzBdKTtcbiAgY29uc3Qgcm93UmVxdWlyZWQgPSBncmlkQi5sZW5ndGg7XG4gIHJldHVybiBSZXN1bHQudmFsdWUoe1xuICAgIHJvd0RlbHRhOiByb3dSZW1haW5kZXIubGVuZ3RoIC0gcm93UmVxdWlyZWQsXG4gICAgY29sRGVsdGE6IGNvbFJlbWFpbmRlci5sZW5ndGggLSBjb2xSZXF1aXJlZFxuICB9KTtcbn07XG5cbmNvbnN0IG1lYXN1cmVXaWR0aCA9IChncmlkQTogU3RydWN0cy5Sb3dDZWxsc1tdLCBncmlkQjogU3RydWN0cy5Sb3dDZWxsc1tdKTogRGVsdGEgPT4ge1xuICBjb25zdCBjb2xMZW5ndGhBID0gR3JpZFJvdy5jZWxsTGVuZ3RoKGdyaWRBWzBdKTtcbiAgY29uc3QgY29sTGVuZ3RoQiA9IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQlswXSk7XG5cbiAgcmV0dXJuIHtcbiAgICByb3dEZWx0YTogMCxcbiAgICBjb2xEZWx0YTogY29sTGVuZ3RoQSAtIGNvbExlbmd0aEJcbiAgfTtcbn07XG5cbmNvbnN0IG1lYXN1cmVIZWlnaHQgPSAoZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSk6IERlbHRhID0+IHtcbiAgY29uc3Qgcm93TGVuZ3RoQSA9IGdyaWRBLmxlbmd0aDtcbiAgY29uc3Qgcm93TGVuZ3RoQiA9IGdyaWRCLmxlbmd0aDtcblxuICByZXR1cm4ge1xuICAgIHJvd0RlbHRhOiByb3dMZW5ndGhBIC0gcm93TGVuZ3RoQixcbiAgICBjb2xEZWx0YTogMFxuICB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVFbGVtZW50cyA9IChhbW91bnQ6IG51bWJlciwgcm93OiBTdHJ1Y3RzLlJvd0NlbGxzLCBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzLCBpc0xvY2tlZDogKGlkeDogbnVtYmVyKSA9PiBib29sZWFuKTogU3RydWN0cy5FbGVtZW50TmV3W10gPT4ge1xuICBjb25zdCBnZW5lcmF0b3IgPSByb3cuc2VjdGlvbiA9PT0gJ2NvbGdyb3VwJyA/IGdlbmVyYXRvcnMuY29sIDogZ2VuZXJhdG9ycy5jZWxsO1xuICByZXR1cm4gQXJyLnJhbmdlKGFtb3VudCwgKGlkeCkgPT4gU3RydWN0cy5lbGVtZW50bmV3KGdlbmVyYXRvcigpIGFzIFN1Z2FyRWxlbWVudDxDZWxsRWxlbWVudD4sIHRydWUsIGlzTG9ja2VkKGlkeCkpKTtcbn07XG5cbmNvbnN0IHJvd0ZpbGwgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBhbW91bnQ6IG51bWJlciwgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycywgbG9ja2VkQ29sdW1uczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4pOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCBleGFtcGxlUm93ID0gZ3JpZFtncmlkLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gZ3JpZC5jb25jYXQoQXJyLnJhbmdlKGFtb3VudCwgKCkgPT4ge1xuICAgIGNvbnN0IGdlbmVyYXRvciA9IGV4YW1wbGVSb3cuc2VjdGlvbiA9PT0gJ2NvbGdyb3VwJyA/IGdlbmVyYXRvcnMuY29sZ3JvdXAgOiBnZW5lcmF0b3JzLnJvdztcbiAgICBjb25zdCByb3cgPSBHcmlkUm93LmNsb25lKGV4YW1wbGVSb3csIGdlbmVyYXRvciwgRnVuLmlkZW50aXR5KTtcbiAgICBjb25zdCBlbGVtZW50cyA9IGdlbmVyYXRlRWxlbWVudHMocm93LmNlbGxzLmxlbmd0aCwgcm93LCBnZW5lcmF0b3JzLCAoaWR4KSA9PiBPYmouaGFzKGxvY2tlZENvbHVtbnMsIGlkeC50b1N0cmluZygpKSk7XG4gICAgcmV0dXJuIEdyaWRSb3cuc2V0Q2VsbHMocm93LCBlbGVtZW50cyk7XG4gIH0pKTtcbn07XG5cbmNvbnN0IGNvbEZpbGwgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBhbW91bnQ6IG51bWJlciwgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycywgc3RhcnRJbmRleDogbnVtYmVyKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+XG4gIEFyci5tYXAoZ3JpZCwgKHJvdykgPT4ge1xuICAgIGNvbnN0IG5ld0NoaWxkcmVuID0gZ2VuZXJhdGVFbGVtZW50cyhhbW91bnQsIHJvdywgZ2VuZXJhdG9ycywgRnVuLm5ldmVyKTtcbiAgICByZXR1cm4gR3JpZFJvdy5hZGRDZWxscyhyb3csIHN0YXJ0SW5kZXgsIG5ld0NoaWxkcmVuKTtcbiAgfSk7XG5cbmNvbnN0IGxvY2tlZENvbEZpbGwgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzLCBsb2NrZWRDb2x1bW5zOiBudW1iZXJbXSk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICBBcnIubWFwKGdyaWQsIChyb3cpID0+IHtcbiAgICByZXR1cm4gQXJyLmZvbGRsKGxvY2tlZENvbHVtbnMsIChhY2MsIGNvbE51bSkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2hpbGQgPSBnZW5lcmF0ZUVsZW1lbnRzKDEsIHJvdywgZ2VuZXJhdG9ycywgRnVuLmFsd2F5cylbMF07XG4gICAgICByZXR1cm4gR3JpZFJvdy5hZGRDZWxsKGFjYywgY29sTnVtLCBuZXdDaGlsZCk7XG4gICAgfSwgcm93KTtcbiAgfSk7XG5cbmNvbnN0IHRhaWxvciA9IChncmlkQTogU3RydWN0cy5Sb3dDZWxsc1tdLCBkZWx0YTogRGVsdGEsIGdlbmVyYXRvcnM6IFNpbXBsZUdlbmVyYXRvcnMpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCBmaWxsQ29scyA9IGRlbHRhLmNvbERlbHRhIDwgMCA/IGNvbEZpbGwgOiBGdW4uaWRlbnRpdHk7XG4gIGNvbnN0IGZpbGxSb3dzID0gZGVsdGEucm93RGVsdGEgPCAwID8gcm93RmlsbCA6IEZ1bi5pZGVudGl0eTtcbiAgY29uc3QgbG9ja2VkQ29sdW1ucyA9IExvY2tlZENvbHVtblV0aWxzLmdldExvY2tlZENvbHVtbnNGcm9tR3JpZChncmlkQSk7XG4gIGNvbnN0IGdyaWRXaWR0aCA9IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQVswXSk7XG4gIGNvbnN0IGlzTGFzdENvbExvY2tlZCA9IEFyci5leGlzdHMobG9ja2VkQ29sdW1ucywgKGxvY2tlZCkgPT4gbG9ja2VkID09PSBncmlkV2lkdGggLSAxKTtcbiAgY29uc3QgbW9kaWZpZWRDb2xzID0gZmlsbENvbHMoZ3JpZEEsIE1hdGguYWJzKGRlbHRhLmNvbERlbHRhKSwgZ2VuZXJhdG9ycywgaXNMYXN0Q29sTG9ja2VkID8gZ3JpZFdpZHRoIC0gMSA6IGdyaWRXaWR0aCk7XG4gIC8vIE5lZWQgdG8gcmVjYWxjdWxhdGUgbG9ja2VkIGNvbHVtbiBwb3NpdGlvbnNcbiAgY29uc3QgbmV3TG9ja2VkQ29sdW1ucyA9IExvY2tlZENvbHVtblV0aWxzLmdldExvY2tlZENvbHVtbnNGcm9tR3JpZChtb2RpZmllZENvbHMpO1xuICByZXR1cm4gZmlsbFJvd3MobW9kaWZpZWRDb2xzLCBNYXRoLmFicyhkZWx0YS5yb3dEZWx0YSksIGdlbmVyYXRvcnMsIEFyci5tYXBUb09iamVjdChuZXdMb2NrZWRDb2x1bW5zLCBGdW4uYWx3YXlzKSk7XG59O1xuXG5leHBvcnQgeyBtZWFzdXJlLCBtZWFzdXJlV2lkdGgsIG1lYXN1cmVIZWlnaHQsIHRhaWxvciwgbG9ja2VkQ29sRmlsbCB9O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50LCBSb3dDZWxsLCBSb3dFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxudHlwZSBSb3dNb3JwaGlzbTxUIGV4dGVuZHMgUm93RWxlbWVudD4gPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PFQ+KSA9PiBTdWdhckVsZW1lbnQ8VD47XG50eXBlIENlbGxNb3JwaGlzbTxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQ+ID0gKGVsZW1lbnQ6IFN0cnVjdHMuRWxlbWVudE5ldzxUPiwgaW5kZXg6IG51bWJlcikgPT4gU3RydWN0cy5FbGVtZW50TmV3PFQ+O1xuXG5jb25zdCBhZGRDZWxscyA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgaW5kZXg6IG51bWJlciwgY2VsbHM6IFN0cnVjdHMuRWxlbWVudE5ldzxSb3dDZWxsPFI+PltdKTogU3RydWN0cy5Sb3dDZWxsczxSPiA9PiB7XG4gIGNvbnN0IGV4aXN0aW5nQ2VsbHMgPSBncmlkUm93LmNlbGxzO1xuICBjb25zdCBiZWZvcmUgPSBleGlzdGluZ0NlbGxzLnNsaWNlKDAsIGluZGV4KTtcbiAgY29uc3QgYWZ0ZXIgPSBleGlzdGluZ0NlbGxzLnNsaWNlKGluZGV4KTtcbiAgY29uc3QgbmV3Q2VsbHMgPSBiZWZvcmUuY29uY2F0KGNlbGxzKS5jb25jYXQoYWZ0ZXIpO1xuICByZXR1cm4gc2V0Q2VsbHMoZ3JpZFJvdywgbmV3Q2VsbHMpO1xufTtcblxuY29uc3QgYWRkQ2VsbCA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgaW5kZXg6IG51bWJlciwgY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PFJvd0NlbGw8Uj4+KTogU3RydWN0cy5Sb3dDZWxsczxSPiA9PlxuICBhZGRDZWxscyhncmlkUm93LCBpbmRleCwgWyBjZWxsIF0pO1xuXG5jb25zdCBtdXRhdGVDZWxsID0gPFIgZXh0ZW5kcyBSb3dFbGVtZW50PihncmlkUm93OiBTdHJ1Y3RzLlJvd0NlbGxzPFI+LCBpbmRleDogbnVtYmVyLCBjZWxsOiBTdHJ1Y3RzLkVsZW1lbnROZXc8Um93Q2VsbDxSPj4pOiB2b2lkID0+IHtcbiAgY29uc3QgY2VsbHMgPSBncmlkUm93LmNlbGxzO1xuICBjZWxsc1tpbmRleF0gPSBjZWxsO1xufTtcblxuY29uc3Qgc2V0Q2VsbHMgPSA8UiBleHRlbmRzIFJvd0VsZW1lbnQ+KGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHM8Uj4sIGNlbGxzOiBTdHJ1Y3RzLkVsZW1lbnROZXc8Um93Q2VsbDxSPj5bXSk6IFN0cnVjdHMuUm93Q2VsbHM8Uj4gPT5cbiAgU3RydWN0cy5yb3djZWxscyhncmlkUm93LmVsZW1lbnQsIGNlbGxzLCBncmlkUm93LnNlY3Rpb24sIGdyaWRSb3cuaXNOZXcpO1xuXG5jb25zdCBtYXBDZWxscyA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgZjogQ2VsbE1vcnBoaXNtPFJvd0NlbGw8Uj4+KTogU3RydWN0cy5Sb3dDZWxscyA9PiB7XG4gIGNvbnN0IGNlbGxzID0gZ3JpZFJvdy5jZWxscztcbiAgY29uc3QgciA9IEFyci5tYXAoY2VsbHMsIGYpO1xuICByZXR1cm4gU3RydWN0cy5yb3djZWxscyhncmlkUm93LmVsZW1lbnQsIHIsIGdyaWRSb3cuc2VjdGlvbiwgZ3JpZFJvdy5pc05ldyk7XG59O1xuXG5jb25zdCBnZXRDZWxsID0gPFIgZXh0ZW5kcyBSb3dFbGVtZW50PihncmlkUm93OiBTdHJ1Y3RzLlJvd0NlbGxzPFI+LCBpbmRleDogbnVtYmVyKTogU3RydWN0cy5FbGVtZW50TmV3PFJvd0NlbGw8Uj4+ID0+XG4gIGdyaWRSb3cuY2VsbHNbaW5kZXhdO1xuXG5jb25zdCBnZXRDZWxsRWxlbWVudCA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgaW5kZXg6IG51bWJlcik6IFN1Z2FyRWxlbWVudDxSb3dDZWxsPFI+PiA9PlxuICBnZXRDZWxsKGdyaWRSb3csIGluZGV4KS5lbGVtZW50O1xuXG5jb25zdCBjZWxsTGVuZ3RoID0gKGdyaWRSb3c6IFN0cnVjdHMuUm93Q2VsbHMpOiBudW1iZXIgPT5cbiAgZ3JpZFJvdy5jZWxscy5sZW5ndGg7XG5cbmNvbnN0IGV4dHJhY3RHcmlkRGV0YWlscyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10pOiB7IHJvd3M6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD5bXTsgY29sczogU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVDb2xFbGVtZW50PltdIH0gPT4ge1xuICBjb25zdCByZXN1bHQgPSBBcnIucGFydGl0aW9uKGdyaWQsIChyb3cpID0+IHJvdy5zZWN0aW9uID09PSAnY29sZ3JvdXAnKTtcbiAgcmV0dXJuIHtcbiAgICByb3dzOiByZXN1bHQuZmFpbCBhcyBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10sXG4gICAgY29sczogcmVzdWx0LnBhc3MgYXMgU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVDb2xFbGVtZW50PltdXG4gIH07XG59O1xuXG5jb25zdCBjbG9uZSA9IDxSIGV4dGVuZHMgUm93RWxlbWVudD4oZ3JpZFJvdzogU3RydWN0cy5Sb3dDZWxsczxSPiwgY2xvbmVSb3c6IFJvd01vcnBoaXNtPFI+LCBjbG9uZUNlbGw6IENlbGxNb3JwaGlzbTxSb3dDZWxsPFI+Pik6IFN0cnVjdHMuUm93Q2VsbHM8Uj4gPT4ge1xuICBjb25zdCBuZXdDZWxscyA9IEFyci5tYXAoZ3JpZFJvdy5jZWxscywgY2xvbmVDZWxsKTtcbiAgcmV0dXJuIFN0cnVjdHMucm93Y2VsbHMoY2xvbmVSb3coZ3JpZFJvdy5lbGVtZW50KSwgbmV3Q2VsbHMsIGdyaWRSb3cuc2VjdGlvbiwgdHJ1ZSk7XG59O1xuXG5leHBvcnQge1xuICBhZGRDZWxsLFxuICBhZGRDZWxscyxcbiAgc2V0Q2VsbHMsXG4gIG11dGF0ZUNlbGwsXG4gIGdldENlbGwsXG4gIGdldENlbGxFbGVtZW50LFxuICBtYXBDZWxscyxcbiAgY2VsbExlbmd0aCxcbiAgZXh0cmFjdEdyaWREZXRhaWxzLFxuICBjbG9uZVxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCwgT3B0aW9uYWxzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgQ29tcGFyZSwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IEdlbmVyYXRvcnMsIEdlbmVyYXRvcnNXcmFwcGVyLCBTaW1wbGVHZW5lcmF0b3JzIH0gZnJvbSAnLi4vYXBpL0dlbmVyYXRvcnMnO1xuaW1wb3J0ICogYXMgUmVzaXplQmVoYXZpb3VyIGZyb20gJy4uL2FwaS9SZXNpemVCZWhhdmlvdXInO1xuaW1wb3J0IHR5cGUgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4uL2FwaS9UYWJsZUxvb2t1cCc7XG5pbXBvcnQgdHlwZSB7IFRhYmxlT3BlcmF0aW9uUmVzdWx0IH0gZnJvbSAnLi4vYXBpL1RhYmxlT3BlcmF0aW9ucyc7XG5pbXBvcnQgeyBUYWJsZVNlY3Rpb24gfSBmcm9tICcuLi9hcGkvVGFibGVTZWN0aW9uJztcbmltcG9ydCB7IFRhYmxlU2l6ZSB9IGZyb20gJy4uL2FwaS9UYWJsZVNpemUnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5pbXBvcnQgKiBhcyBSZWRyYXcgZnJvbSAnLi4vb3BlcmF0ZS9SZWRyYXcnO1xuaW1wb3J0ICogYXMgTG9ja2VkQ29sdW1uVXRpbHMgZnJvbSAnLi4vdXRpbC9Mb2NrZWRDb2x1bW5VdGlscyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0sIFJvd0NlbGwsIFJvd0VsZW1lbnQgfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBUcmFuc2l0aW9ucyBmcm9tICcuL1RyYW5zaXRpb25zJztcblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRpb25CZWhhdmlvdXJzIHtcbiAgcmVhZG9ubHkgc2l6aW5nPzogVGFibGVTaXplO1xuICByZWFkb25seSByZXNpemU/OiBSZXNpemVCZWhhdmlvdXIuUmVzaXplQmVoYXZpb3VyO1xuICByZWFkb25seSBzZWN0aW9uPzogVGFibGVTZWN0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJ1bk9wZXJhdGlvbk91dHB1dCB7XG4gIHJlYWRvbmx5IGN1cnNvcjogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj47XG4gIHJlYWRvbmx5IG5ld1Jvd3M6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50PltdO1xuICByZWFkb25seSBuZXdDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhcmdldEVsZW1lbnQge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0U2VsZWN0aW9uIHtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRNZXJnYWJsZSB7XG4gIHJlYWRvbmx5IG1lcmdhYmxlOiBPcHRpb25hbDxFeHRyYWN0TWVyZ2FibGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhcmdldFVubWVyZ2FibGUge1xuICByZWFkb25seSB1bm1lcmdhYmxlOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10+O1xufVxuXG4vLyBjb21iaW5lcyB0aGUgYWJvdmUgNCBpbnRlcmZhY2VzIGJlY2F1c2UgdGhpcyBpcyB3aGF0IGRhdGEgd2UgYWN0dWFsbHkgZ2V0IGZyb20gVGlueU1DRVxuZXhwb3J0IGludGVyZmFjZSBDb21iaW5lZFRhcmdldHMgZXh0ZW5kcyBUYXJnZXRFbGVtZW50LCBUYXJnZXRTZWxlY3Rpb24sIFRhcmdldE1lcmdhYmxlLCBUYXJnZXRVbm1lcmdhYmxlIHsgfVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhcmdldFBhc3RlIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+O1xuICByZWFkb25seSBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzO1xuICByZWFkb25seSBjbGlwYm9hcmQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRQYXN0ZVJvd3Mge1xuICByZWFkb25seSBzZWxlY3Rpb246IFN1Z2FyRWxlbWVudDxOb2RlPltdO1xuICByZWFkb25seSBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzO1xuICByZWFkb25seSBjbGlwYm9hcmQ6IFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV4dHJhY3RNZXJnYWJsZSB7XG4gIHJlYWRvbmx5IGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W107XG4gIHJlYWRvbmx5IGJvdW5kczogU3RydWN0cy5Cb3VuZHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFjdFBhc3RlIGV4dGVuZHMgU3RydWN0cy5EZXRhaWxFeHQge1xuICByZWFkb25seSBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzO1xuICByZWFkb25seSBjbGlwYm9hcmQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeHRyYWN0UGFzdGVSb3dzIHtcbiAgcmVhZG9ubHkgY2VsbHM6IFN0cnVjdHMuRGV0YWlsRXh0W107XG4gIHJlYWRvbmx5IGdlbmVyYXRvcnM6IFNpbXBsZUdlbmVyYXRvcnM7XG4gIHJlYWRvbmx5IGNsaXBib2FyZDogU3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+W107XG59XG5cbmNvbnN0IGZyb21XYXJlaG91c2UgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMpID0+XG4gIFRyYW5zaXRpb25zLnRvR3JpZCh3YXJlaG91c2UsIGdlbmVyYXRvcnMsIGZhbHNlKTtcblxuY29uc3QgdG9EZXRhaWxMaXN0ID0gPFIgZXh0ZW5kcyBSb3dFbGVtZW50PihncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzPFI+W10pOiBTdHJ1Y3RzLlJvd0RldGFpbE5ldzxTdHJ1Y3RzLkRldGFpbE5ldzxSb3dDZWxsPFI+PiwgUj5bXSA9PlxuICBUcmFuc2l0aW9ucy50b0RldGFpbHMoZ3JpZCwgQ29tcGFyZS5lcSk7XG5cbmNvbnN0IGZpbmRJbldhcmVob3VzZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pik6IE9wdGlvbmFsPFN0cnVjdHMuRGV0YWlsRXh0PiA9PiBBcnIuZmluZE1hcCh3YXJlaG91c2UuYWxsLCAocikgPT5cbiAgQXJyLmZpbmQoci5jZWxscywgKGUpID0+IENvbXBhcmUuZXEoZWxlbWVudCwgZS5lbGVtZW50KSlcbik7XG5cbmNvbnN0IGV4dHJhY3RDZWxscyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24sIHByZWRpY2F0ZTogKGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQpID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdHJ1Y3RzLkRldGFpbEV4dFtdPiA9PiB7XG4gIGNvbnN0IGRldGFpbHMgPSBBcnIubWFwKHRhcmdldC5zZWxlY3Rpb24sIChjZWxsKSA9PiB7XG4gICAgcmV0dXJuIFRhYmxlTG9va3VwLmNlbGwoY2VsbClcbiAgICAgIC5iaW5kKChsYykgPT4gZmluZEluV2FyZWhvdXNlKHdhcmVob3VzZSwgbGMpKVxuICAgICAgLmZpbHRlcihwcmVkaWNhdGUpO1xuICB9KTtcbiAgY29uc3QgY2VsbHMgPSBPcHRpb25hbHMuY2F0KGRldGFpbHMpO1xuICByZXR1cm4gT3B0aW9uYWxzLnNvbWVJZihjZWxscy5sZW5ndGggPiAwLCBjZWxscyk7XG59O1xuXG5leHBvcnQgdHlwZSBPcGVyYXRpb248SU5GTywgR1cgZXh0ZW5kcyBHZW5lcmF0b3JzV3JhcHBlcj4gPSAobW9kZWw6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5mbzogSU5GTywgZXE6IENvbXBFbG0sIHc6IEdXLCBoZWFkZXJzOiBUYWJsZVNlY3Rpb24pID0+IFRhYmxlT3BlcmF0aW9uUmVzdWx0O1xuZXhwb3J0IHR5cGUgRXh0cmFjdDxSQVcsIElORk8+ID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFJBVykgPT4gT3B0aW9uYWw8SU5GTz47XG5leHBvcnQgdHlwZSBBZGp1c3RtZW50PElORk8+ID0gPFQgZXh0ZW5kcyBTdHJ1Y3RzLkRldGFpbE5ldz4odGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgZ3JpZDogU3RydWN0cy5Sb3dEZXRhaWxOZXc8VD5bXSwgaW5mbzogSU5GTywgYmVoYXZpb3VyczogUmVxdWlyZWQ8T3BlcmF0aW9uQmVoYXZpb3Vycz4pID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBQb3N0QWN0aW9uID0gKGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEdlbldyYXA8R1cgZXh0ZW5kcyBHZW5lcmF0b3JzV3JhcHBlcj4gPSAoZzogR2VuZXJhdG9ycykgPT4gR1c7XG5cbmV4cG9ydCB0eXBlIE9wZXJhdGlvbkNhbGxiYWNrPFQ+ID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHRhcmdldDogVCwgZ2VuZXJhdG9yczogR2VuZXJhdG9ycywgYmVoYXZpb3Vycz86IE9wZXJhdGlvbkJlaGF2aW91cnMpID0+IE9wdGlvbmFsPFJ1bk9wZXJhdGlvbk91dHB1dD47XG5cbmNvbnN0IHJ1biA9IDxSQVcsIElORk8sIEdXIGV4dGVuZHMgR2VuZXJhdG9yc1dyYXBwZXI+IChcbiAgb3BlcmF0aW9uOiBPcGVyYXRpb248SU5GTywgR1c+LFxuICBleHRyYWN0OiBFeHRyYWN0PFJBVywgSU5GTz4sXG4gIGFkanVzdG1lbnQ6IEFkanVzdG1lbnQ8SU5GTz4sXG4gIHBvc3RBY3Rpb246IFBvc3RBY3Rpb24sXG4gIGdlbldyYXBwZXJzOiBHZW5XcmFwPEdXPixcbiAgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PixcbiAgdGFyZ2V0OiBSQVcsXG4gIGdlbmVyYXRvcnM6IEdlbmVyYXRvcnMsXG4gIGJlaGF2aW91cnM/OiBPcGVyYXRpb25CZWhhdmlvdXJzXG4pOiBPcHRpb25hbDxSdW5PcGVyYXRpb25PdXRwdXQ+ID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmZyb21UYWJsZSh0YWJsZSk7XG4gIGNvbnN0IHRhYmxlU2VjdGlvbiA9IE9wdGlvbmFsLmZyb20oYmVoYXZpb3Vycz8uc2VjdGlvbikuZ2V0T3JUaHVuayhUYWJsZVNlY3Rpb24uZmFsbGJhY2spO1xuICBjb25zdCBvdXRwdXQgPSBleHRyYWN0KHdhcmVob3VzZSwgdGFyZ2V0KS5tYXAoKGluZm8pID0+IHtcbiAgICBjb25zdCBtb2RlbCA9IGZyb21XYXJlaG91c2Uod2FyZWhvdXNlLCBnZW5lcmF0b3JzKTtcbiAgICBjb25zdCByZXN1bHQgPSBvcGVyYXRpb24obW9kZWwsIGluZm8sIENvbXBhcmUuZXEsIGdlbldyYXBwZXJzKGdlbmVyYXRvcnMpLCB0YWJsZVNlY3Rpb24pO1xuICAgIGNvbnN0IGxvY2tlZENvbHVtbnMgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQocmVzdWx0LmdyaWQpO1xuICAgIGNvbnN0IGdyaWQgPSB0b0RldGFpbExpc3QocmVzdWx0LmdyaWQpO1xuICAgIHJldHVybiB7XG4gICAgICBpbmZvLFxuICAgICAgZ3JpZCxcbiAgICAgIGN1cnNvcjogcmVzdWx0LmN1cnNvcixcbiAgICAgIGxvY2tlZENvbHVtbnNcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0LmJpbmQoKG91dCkgPT4ge1xuICAgIGNvbnN0IG5ld0VsZW1lbnRzID0gUmVkcmF3LnJlbmRlcih0YWJsZSwgb3V0LmdyaWQpO1xuICAgIGNvbnN0IHRhYmxlU2l6aW5nID0gT3B0aW9uYWwuZnJvbShiZWhhdmlvdXJzPy5zaXppbmcpLmdldE9yVGh1bmsoKCkgPT4gVGFibGVTaXplLmdldFRhYmxlU2l6ZSh0YWJsZSkpO1xuICAgIGNvbnN0IHJlc2l6aW5nID0gT3B0aW9uYWwuZnJvbShiZWhhdmlvdXJzPy5yZXNpemUpLmdldE9yVGh1bmsoUmVzaXplQmVoYXZpb3VyLnByZXNlcnZlVGFibGUpO1xuICAgIGFkanVzdG1lbnQodGFibGUsIG91dC5ncmlkLCBvdXQuaW5mbywgeyBzaXppbmc6IHRhYmxlU2l6aW5nLCByZXNpemU6IHJlc2l6aW5nLCBzZWN0aW9uOiB0YWJsZVNlY3Rpb24gfSk7XG4gICAgcG9zdEFjdGlvbih0YWJsZSk7XG4gICAgLy8gVXBkYXRlIGxvY2tlZCBjb2xzIGF0dHJpYnV0ZVxuICAgIEF0dHJpYnV0ZS5yZW1vdmUodGFibGUsIExvY2tlZENvbHVtblV0aWxzLkxPQ0tFRF9DT0xfQVRUUik7XG4gICAgaWYgKG91dC5sb2NrZWRDb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgIEF0dHJpYnV0ZS5zZXQodGFibGUsIExvY2tlZENvbHVtblV0aWxzLkxPQ0tFRF9DT0xfQVRUUiwgb3V0LmxvY2tlZENvbHVtbnMuam9pbignLCcpKTtcbiAgICB9XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoe1xuICAgICAgY3Vyc29yOiBvdXQuY3Vyc29yLFxuICAgICAgbmV3Um93czogbmV3RWxlbWVudHMubmV3Um93cyxcbiAgICAgIG5ld0NlbGxzOiBuZXdFbGVtZW50cy5uZXdDZWxsc1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IG9uQ2VsbCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRFbGVtZW50KTogT3B0aW9uYWw8U3RydWN0cy5EZXRhaWxFeHQ+ID0+XG4gIFRhYmxlTG9va3VwLmNlbGwodGFyZ2V0LmVsZW1lbnQpLmJpbmQoKGNlbGwpID0+IGZpbmRJbldhcmVob3VzZSh3YXJlaG91c2UsIGNlbGwpKTtcblxuY29uc3Qgb25QYXN0ZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRQYXN0ZSk6IE9wdGlvbmFsPEV4dHJhY3RQYXN0ZT4gPT5cbiAgVGFibGVMb29rdXAuY2VsbCh0YXJnZXQuZWxlbWVudCkuYmluZCgoY2VsbCkgPT4gZmluZEluV2FyZWhvdXNlKHdhcmVob3VzZSwgY2VsbCkubWFwKChkZXRhaWxzKSA9PiB7XG4gICAgY29uc3QgdmFsdWU6IEV4dHJhY3RQYXN0ZSA9IHtcbiAgICAgIC4uLmRldGFpbHMsXG4gICAgICBnZW5lcmF0b3JzOiB0YXJnZXQuZ2VuZXJhdG9ycyxcbiAgICAgIGNsaXBib2FyZDogdGFyZ2V0LmNsaXBib2FyZFxuICAgIH07XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KSk7XG5cbmNvbnN0IG9uUGFzdGVCeUVkaXRvciA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRQYXN0ZVJvd3MpOiBPcHRpb25hbDxFeHRyYWN0UGFzdGVSb3dzPiA9PlxuICBleHRyYWN0Q2VsbHMod2FyZWhvdXNlLCB0YXJnZXQsIEZ1bi5hbHdheXMpLm1hcCgoY2VsbHMpID0+ICh7XG4gICAgY2VsbHMsXG4gICAgZ2VuZXJhdG9yczogdGFyZ2V0LmdlbmVyYXRvcnMsXG4gICAgY2xpcGJvYXJkOiB0YXJnZXQuY2xpcGJvYXJkXG4gIH0pKTtcblxuY29uc3Qgb25NZXJnYWJsZSA9IChfd2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0TWVyZ2FibGUpOiBPcHRpb25hbDxFeHRyYWN0TWVyZ2FibGU+ID0+XG4gIHRhcmdldC5tZXJnYWJsZTtcblxuY29uc3Qgb25Vbm1lcmdhYmxlID0gKF93YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRVbm1lcmdhYmxlKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdPiA9PlxuICB0YXJnZXQudW5tZXJnYWJsZTtcblxuY29uc3Qgb25DZWxscyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRTZWxlY3Rpb24pOiBPcHRpb25hbDxTdHJ1Y3RzLkRldGFpbEV4dFtdPiA9PlxuICBleHRyYWN0Q2VsbHMod2FyZWhvdXNlLCB0YXJnZXQsIEZ1bi5hbHdheXMpO1xuXG4vLyBDdXN0b20gdW5sb2NrZWQgZXh0cmFjdG9yc1xuXG5jb25zdCBvblVubG9ja2VkQ2VsbCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFyZ2V0OiBUYXJnZXRFbGVtZW50KTogT3B0aW9uYWw8U3RydWN0cy5EZXRhaWxFeHQ+ID0+XG4gIG9uQ2VsbCh3YXJlaG91c2UsIHRhcmdldCkuZmlsdGVyKChkZXRhaWwpID0+ICFkZXRhaWwuaXNMb2NrZWQpO1xuXG5jb25zdCBvblVubG9ja2VkQ2VsbHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhcmdldDogVGFyZ2V0U2VsZWN0aW9uKTogT3B0aW9uYWw8U3RydWN0cy5EZXRhaWxFeHRbXT4gPT5cbiAgZXh0cmFjdENlbGxzKHdhcmVob3VzZSwgdGFyZ2V0LCAoZGV0YWlsKSA9PiAhZGV0YWlsLmlzTG9ja2VkKTtcblxuY29uc3QgaXNVbmxvY2tlZFRhYmxlQ2VsbCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PikgPT5cbiAgZmluZEluV2FyZWhvdXNlKHdhcmVob3VzZSwgY2VsbCkuZXhpc3RzKChkZXRhaWwpID0+ICFkZXRhaWwuaXNMb2NrZWQpO1xuXG5jb25zdCBhbGxVbmxvY2tlZCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgY2VsbHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSkgPT5cbiAgQXJyLmZvcmFsbChjZWxscywgKGNlbGwpID0+IGlzVW5sb2NrZWRUYWJsZUNlbGwod2FyZWhvdXNlLCBjZWxsKSk7XG5cbi8vIElmIGFueSBsb2NrZWQgY29sdW1ucyBhcmUgcHJlc2VudCBpbiB0aGUgc2VsZWN0aW9uLCB0aGVuIGRvbid0IHdhbnQgdG8gYmUgYWJsZSB0byBtZXJnZVxuY29uc3Qgb25VbmxvY2tlZE1lcmdhYmxlID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldE1lcmdhYmxlKTogT3B0aW9uYWw8RXh0cmFjdE1lcmdhYmxlPiA9PlxuICBvbk1lcmdhYmxlKHdhcmVob3VzZSwgdGFyZ2V0KS5maWx0ZXIoKG1lcmdlYWJsZSkgPT4gYWxsVW5sb2NrZWQod2FyZWhvdXNlLCBtZXJnZWFibGUuY2VsbHMpKTtcblxuLy8gSWYgYW55IGxvY2tlZCBjb2x1bW5zIGFyZSBwcmVzZW50IGluIHRoZSBzZWxlY3Rpb24sIHRoZW4gZG9uJ3Qgd2FudCB0byBiZSBhYmxlIHRvIHVubWVyZ2VcbmNvbnN0IG9uVW5sb2NrZWRVbm1lcmdhYmxlID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB0YXJnZXQ6IFRhcmdldFVubWVyZ2FibGUpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10+ID0+XG4gIG9uVW5tZXJnYWJsZSh3YXJlaG91c2UsIHRhcmdldCkuZmlsdGVyKChjZWxscykgPT4gYWxsVW5sb2NrZWQod2FyZWhvdXNlLCBjZWxscykpO1xuXG5leHBvcnQge1xuICBvbkNlbGwsXG4gIG9uQ2VsbHMsXG4gIG9uTWVyZ2FibGUsXG4gIG9uUGFzdGUsXG4gIG9uUGFzdGVCeUVkaXRvcixcbiAgb25VbmxvY2tlZENlbGwsXG4gIG9uVW5sb2NrZWRDZWxscyxcbiAgb25VbmxvY2tlZE1lcmdhYmxlLFxuICBvblVubG9ja2VkVW5tZXJnYWJsZSxcbiAgb25Vbm1lcmdhYmxlLFxuICBydW4sXG4gIHRvRGV0YWlsTGlzdFxufTtcblxuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBFbGVtZW50TmV3LCBSb3dDZWxscyB9IGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi9HcmlkUm93JztcblxuY29uc3QgZ2V0Q29sdW1uID0gKGdyaWQ6IFJvd0NlbGxzW10sIGluZGV4OiBudW1iZXIpOiBFbGVtZW50TmV3W10gPT4ge1xuICByZXR1cm4gQXJyLm1hcChncmlkLCAocm93KSA9PiB7XG4gICAgcmV0dXJuIEdyaWRSb3cuZ2V0Q2VsbChyb3csIGluZGV4KTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRSb3cgPSAoZ3JpZDogUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICByZXR1cm4gZ3JpZFtpbmRleF07XG59O1xuXG5jb25zdCBmaW5kRGlmZiA9ICh4czogRWxlbWVudE5ld1tdLCBjb21wOiBDb21wRWxtKSA9PiB7XG4gIGlmICh4cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBjb25zdCBmaXJzdCA9IHhzWzBdO1xuICBjb25zdCBpbmRleCA9IEFyci5maW5kSW5kZXgoeHMsICh4KSA9PiB7XG4gICAgcmV0dXJuICFjb21wKGZpcnN0LmVsZW1lbnQsIHguZWxlbWVudCk7XG4gIH0pO1xuICByZXR1cm4gaW5kZXguZ2V0T3IoeHMubGVuZ3RoKTtcbn07XG5cbi8qXG4gKiBncmlkIGlzIHRoZSBncmlkXG4gKiByb3cgaXMgdGhlIHJvdyBpbmRleCBpbnRvIHRoZSBncmlkXG4gKiBjb2x1bW4gaW4gdGhlIGNvbHVtbiBpbmRleCBpbnRvIHRoZSBncmlkXG4gKlxuICogUmV0dXJuXG4gKiAgIGNvbHNwYW46IGNvbHVtbiBzcGFuIG9mIHRoZSBjZWxsIGF0IChyb3csIGNvbHVtbilcbiAqICAgcm93c3Bhbjogcm93IHNwYW4gb2YgdGhlIGNlbGwgYXQgKHJvdywgY29sdW1uKVxuICovXG5jb25zdCBzdWJncmlkID0gKGdyaWQ6IFJvd0NlbGxzW10sIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSk6IHsgY29sc3BhbjogbnVtYmVyOyByb3dzcGFuOiBudW1iZXIgfSA9PiB7XG4gIGNvbnN0IGdyaWRSb3cgPSBnZXRSb3coZ3JpZCwgcm93KTtcbiAgY29uc3QgaXNDb2xSb3cgPSBncmlkUm93LnNlY3Rpb24gPT09ICdjb2xncm91cCc7XG5cbiAgY29uc3QgY29sc3BhbiA9IGZpbmREaWZmKGdyaWRSb3cuY2VsbHMuc2xpY2UoY29sdW1uKSwgY29tcGFyYXRvcik7XG4gIGNvbnN0IHJvd3NwYW4gPSBpc0NvbFJvdyA/IDEgOiBmaW5kRGlmZihnZXRDb2x1bW4oZ3JpZC5zbGljZShyb3cpLCBjb2x1bW4pLCBjb21wYXJhdG9yKTtcblxuICByZXR1cm4ge1xuICAgIGNvbHNwYW4sXG4gICAgcm93c3BhblxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgc3ViZ3JpZFxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCB0eXBlIFJlc3VsdCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgU2ltcGxlR2VuZXJhdG9ycyB9IGZyb20gJy4uL2FwaS9HZW5lcmF0b3JzJztcbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgTWVyZ2luZ09wZXJhdGlvbnMgZnJvbSAnLi4vb3BlcmF0ZS9NZXJnaW5nT3BlcmF0aW9ucyc7XG5pbXBvcnQgKiBhcyBMb2NrZWRDb2x1bW5VdGlscyBmcm9tICcuLi91dGlsL0xvY2tlZENvbHVtblV0aWxzJztcbmltcG9ydCB0eXBlIHsgQ29tcEVsbSB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCAqIGFzIEZpdG1lbnQgZnJvbSAnLi9GaXRtZW50JztcbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi9HcmlkUm93JztcblxuY29uc3QgaXNTcGFubmluZyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHJvdzogbnVtYmVyLCBjb2w6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBjYW5kaWRhdGUgPSBHcmlkUm93LmdldENlbGwoZ3JpZFtyb3ddLCBjb2wpO1xuICBjb25zdCBtYXRjaGluZyA9IEZ1bi5jdXJyeShjb21wYXJhdG9yLCBjYW5kaWRhdGUuZWxlbWVudCk7XG4gIGNvbnN0IGN1cnJlbnRSb3cgPSBncmlkW3Jvd107XG5cbiAgLy8gc2FuaXR5IGNoZWNrLCAxeDEgaGFzIG5vIHNwYW5zXG4gIHJldHVybiBncmlkLmxlbmd0aCA+IDEgJiYgR3JpZFJvdy5jZWxsTGVuZ3RoKGN1cnJlbnRSb3cpID4gMSAmJlxuICAgIChcbiAgICAgIC8vIHNlYXJjaCBsZWZ0LCBpZiB3ZSdyZSBub3Qgb24gdGhlIGxlZnQgZWRnZVxuICAgICAgLy8gc2VhcmNoIGRvd24sIGlmIHdlJ3JlIG5vdCBvbiB0aGUgYm90dG9tIGVkZ2VcbiAgICAgIChjb2wgPiAwICYmIG1hdGNoaW5nKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQoY3VycmVudFJvdywgY29sIC0gMSkpKSB8fFxuICAgICAgLy8gc2VhcmNoIHJpZ2h0LCBpZiB3ZSdyZSBub3Qgb24gdGhlIHJpZ2h0IGVkZ2VcbiAgICAgIChjb2wgPCBjdXJyZW50Um93LmNlbGxzLmxlbmd0aCAtIDEgJiYgbWF0Y2hpbmcoR3JpZFJvdy5nZXRDZWxsRWxlbWVudChjdXJyZW50Um93LCBjb2wgKyAxKSkpIHx8XG4gICAgICAvLyBzZWFyY2ggdXAsIGlmIHdlJ3JlIG5vdCBvbiB0aGUgdG9wIGVkZ2VcbiAgICAgIChyb3cgPiAwICYmIG1hdGNoaW5nKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQoZ3JpZFtyb3cgLSAxXSwgY29sKSkpIHx8XG4gICAgICAocm93IDwgZ3JpZC5sZW5ndGggLSAxICYmIG1hdGNoaW5nKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQoZ3JpZFtyb3cgKyAxXSwgY29sKSkpXG4gICAgKTtcbn07XG5cbmNvbnN0IG1lcmdlVGFibGVzID0gKFxuICBzdGFydEFkZHJlc3M6IFN0cnVjdHMuQWRkcmVzcyxcbiAgZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSxcbiAgZ3JpZEJSb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10sXG4gIGdlbmVyYXRvcjogU2ltcGxlR2VuZXJhdG9ycyxcbiAgY29tcGFyYXRvcjogQ29tcEVsbSxcbiAgbG9ja2VkQ29sdW1uczogbnVtYmVyW11cbik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIC8vIEFzc3VtZXNcbiAgLy8gIC0gZ3JpZEEgaXMgc3F1YXJlIGFuZCBncmlkQiBpcyBzcXVhcmVcbiAgY29uc3Qgc3RhcnRSb3cgPSBzdGFydEFkZHJlc3Mucm93O1xuICBjb25zdCBzdGFydENvbCA9IHN0YXJ0QWRkcmVzcy5jb2x1bW47XG4gIGNvbnN0IG1lcmdlSGVpZ2h0ID0gZ3JpZEJSb3dzLmxlbmd0aDtcbiAgY29uc3QgbWVyZ2VXaWR0aCA9IEdyaWRSb3cuY2VsbExlbmd0aChncmlkQlJvd3NbMF0pO1xuICBjb25zdCBlbmRSb3cgPSBzdGFydFJvdyArIG1lcmdlSGVpZ2h0O1xuICBjb25zdCBlbmRDb2wgPSBzdGFydENvbCArIG1lcmdlV2lkdGggKyBsb2NrZWRDb2x1bW5zLmxlbmd0aDtcbiAgY29uc3QgbG9ja2VkQ29sdW1uT2JqID0gQXJyLm1hcFRvT2JqZWN0KGxvY2tlZENvbHVtbnMsIEZ1bi5hbHdheXMpO1xuICAvLyBlbWJyYWNlIHRoZSBtdXRhdGlvbiAtIEkgdGhpbmsgdGhpcyBpcyBlYXNpZXIgdG8gZm9sbG93PyBUbyBkaXNjdXNzLlxuICBmb3IgKGxldCByID0gc3RhcnRSb3c7IHIgPCBlbmRSb3c7IHIrKykge1xuICAgIGxldCBza2lwcGVkQ29sID0gMDtcbiAgICBmb3IgKGxldCBjID0gc3RhcnRDb2w7IGMgPCBlbmRDb2w7IGMrKykge1xuICAgICAgaWYgKGxvY2tlZENvbHVtbk9ialtjXSkge1xuICAgICAgICBza2lwcGVkQ29sKys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTcGFubmluZyhncmlkQSwgciwgYywgY29tcGFyYXRvcikpIHtcbiAgICAgICAgLy8gbXV0YXRpb24gd2l0aGluIG11dGF0aW9uLCBpdCdzIG11dGF0Y2VwdGlvblxuICAgICAgICBNZXJnaW5nT3BlcmF0aW9ucy51bm1lcmdlKGdyaWRBLCBHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRBW3JdLCBjKSwgY29tcGFyYXRvciwgZ2VuZXJhdG9yLmNlbGwpO1xuICAgICAgfVxuICAgICAgY29uc3QgZ3JpZEJDb2xJbmRleCA9IGMgLSBzdGFydENvbCAtIHNraXBwZWRDb2w7XG4gICAgICBjb25zdCBuZXdDZWxsID0gR3JpZFJvdy5nZXRDZWxsKGdyaWRCUm93c1tyIC0gc3RhcnRSb3ddLCBncmlkQkNvbEluZGV4KTtcbiAgICAgIC8vIFRoaXMgY2FuJ3QgYmUgYSBjb2wgZWxlbWVudCBhdCB0aGlzIHBvaW50IHNvIHdlIGNhbiBjYXN0IGl0IHRvIGEgY2VsbFxuICAgICAgY29uc3QgbmV3Q2VsbEVsbSA9IG5ld0NlbGwuZWxlbWVudCBhcyBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+O1xuICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBnZW5lcmF0b3IucmVwbGFjZShuZXdDZWxsRWxtKTtcbiAgICAgIEdyaWRSb3cubXV0YXRlQ2VsbChncmlkQVtyXSwgYywgU3RydWN0cy5lbGVtZW50bmV3KHJlcGxhY2VtZW50LCB0cnVlLCBuZXdDZWxsLmlzTG9ja2VkKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBncmlkQTtcbn07XG5cbmNvbnN0IGdldFZhbGlkU3RhcnRBZGRyZXNzID0gKGN1cnJlbnRTdGFydEFkZHJlc3M6IFN0cnVjdHMuQWRkcmVzcywgZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBsb2NrZWRDb2x1bW5zOiBudW1iZXJbXSk6IFN0cnVjdHMuQWRkcmVzcyA9PiB7XG4gIGNvbnN0IGdyaWRDb2xMZW5ndGggPSBHcmlkUm93LmNlbGxMZW5ndGgoZ3JpZFswXSk7XG4gIC8qXG4gICAgV2hlbiB3ZSBwYXN0ZSBmcm9tIGEgdGFibGUgd2l0aG91dCBjb2xncm91cHMgdG8gYSB0YWJsZSB0aGF0IGhhcyB0aGVtLCB3ZSBuZWVkIHRvIGVuc3VyZSB3ZSBhcmUgaW5zZXJ0aW5nIHRoZW0gYXRcbiAgICB0aGUgY29ycmVjdCByb3cgaW5kZXggKHRoZSBgY29sYHMgYXJlIHRyZWF0ZWQgYXMgY2VsbHMgaW4gdGhlIFN0cnVjdHMuUm93Q2VsbHMgYXJyYXkpLlxuXG4gICAgVG8gZG8gdGhpcywgd2UgZ2V0IHRoZSBudW1iZXIgb2YgYGNvbGBzIGluIHRoZSBkZXN0aW5hdGlvbiB0YWJsZSBhbmQgYWRkIHRoYXQgdG8gdGhlIHN0YXJ0QWRkcmVzcyByb3cuXG4gICovXG4gIGNvbnN0IGFkanVzdGVkUm93QWRkcmVzcyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLmNvbHMubGVuZ3RoICsgY3VycmVudFN0YXJ0QWRkcmVzcy5yb3c7XG4gIGNvbnN0IHBvc3NpYmxlQ29sQWRkcmVzc2VzID0gQXJyLnJhbmdlKGdyaWRDb2xMZW5ndGggLSBjdXJyZW50U3RhcnRBZGRyZXNzLmNvbHVtbiwgKG51bSkgPT4gbnVtICsgY3VycmVudFN0YXJ0QWRkcmVzcy5jb2x1bW4pO1xuICAvLyBGaW5kIGEgc3RhcnRpbmcgY29sdW1uIGFkZHJlc3MgdGhhdCBpc24ndCBhIGxvY2tlZCBjb2x1bW5cbiAgY29uc3QgdmFsaWRDb2xBZGRyZXNzID0gQXJyLmZpbmQocG9zc2libGVDb2xBZGRyZXNzZXMsIChudW0pID0+IEFyci5mb3JhbGwobG9ja2VkQ29sdW1ucywgKGNvbCkgPT4gY29sICE9PSBudW0pKS5nZXRPcihncmlkQ29sTGVuZ3RoIC0gMSk7XG4gIHJldHVybiB7XG4gICAgcm93OiBhZGp1c3RlZFJvd0FkZHJlc3MsXG4gICAgY29sdW1uOiB2YWxpZENvbEFkZHJlc3NcbiAgfTtcbn07XG5cbmNvbnN0IGdldExvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMgPSAoc3RhcnRBZGRyZXNzOiBTdHJ1Y3RzLkFkZHJlc3MsIHJvd3M6IFN0cnVjdHMuUm93Q2VsbHM8SFRNTFRhYmxlUm93RWxlbWVudD5bXSwgbG9ja2VkQ29sdW1uczogbnVtYmVyW10pID0+XG4gIEFyci5maWx0ZXIobG9ja2VkQ29sdW1ucywgKGNvbE51bSkgPT4gY29sTnVtID49IHN0YXJ0QWRkcmVzcy5jb2x1bW4gJiYgY29sTnVtIDw9IEdyaWRSb3cuY2VsbExlbmd0aChyb3dzWzBdKSArIHN0YXJ0QWRkcmVzcy5jb2x1bW4pO1xuXG5jb25zdCBtZXJnZSA9IChzdGFydEFkZHJlc3M6IFN0cnVjdHMuQWRkcmVzcywgZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ2VuZXJhdG9yOiBTaW1wbGVHZW5lcmF0b3JzLCBjb21wYXJhdG9yOiBDb21wRWxtKTogUmVzdWx0PFN0cnVjdHMuUm93Q2VsbHNbXSwgc3RyaW5nPiA9PiB7XG4gIGNvbnN0IGxvY2tlZENvbHVtbnMgPSBMb2NrZWRDb2x1bW5VdGlscy5nZXRMb2NrZWRDb2x1bW5zRnJvbUdyaWQoZ3JpZEEpO1xuICBjb25zdCB2YWxpZFN0YXJ0QWRkcmVzcyA9IGdldFZhbGlkU3RhcnRBZGRyZXNzKHN0YXJ0QWRkcmVzcywgZ3JpZEEsIGxvY2tlZENvbHVtbnMpO1xuICAvKlxuICAgIFdlIGFsd2F5cyByZW1vdmUgdGhlIGNvbHMgKGV4dHJhY3QgdGhlIHJvd3MpIGZyb20gdGhlIHRhYmxlIGJlaW5nIHBhc3RlZC4gVGhpcyBlbnN1cmVzIHRoYXQgaWYgd2UgYXJlIHBhc3RpbmcgZnJvbSBhIHRhYmxlIHdpdGggY29sZ3JvdXBzIGludG8gYSB0YWJsZVxuICAgIHdpdGhvdXQgdGhlbSwgd2UgZG9uJ3QgaW5zZXJ0IHRoZSBgY29sYCBlbGVtZW50cyBhcyBpZiB0aGV5IHdlcmUgYHRkYHNcbiAgKi9cbiAgY29uc3QgZ3JpZEJSb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZEIpLnJvd3M7XG4gIGNvbnN0IGxvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMgPSBnZXRMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzKHZhbGlkU3RhcnRBZGRyZXNzLCBncmlkQlJvd3MsIGxvY2tlZENvbHVtbnMpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IEZpdG1lbnQubWVhc3VyZSh2YWxpZFN0YXJ0QWRkcmVzcywgZ3JpZEEsIGdyaWRCUm93cyk7XG4gIC8qXG4gICAgTmVlZCB0byBzdWJ0cmFjdCBleHRyYSBkZWx0YSBmb3IgbG9ja2VkIGNvbHVtbnMgYmV0d2VlbiBzdGFydEFkZHJlc3MgYW5kIHRoZSBzdGFydEFkZHJlc3MgKyBncmlkQiBjb2x1bW4gY291bnQgYXNcbiAgICBsb2NrZWQgY29sdW1uIGNlbGxzIGNhbm5vdCBiZSBtZXJnZWQgaW50by4gVGhlcmVmb3JlLCBleHRyYSBjb2x1bW4gY2VsbHMgbmVlZCB0byBiZSBhZGRlZCB0byBncmlkQSB0byBhbGxvdyBncmlkQiBjZWxscyB0byBiZSBtZXJnZWRcbiAgKi9cbiAgcmV0dXJuIHJlc3VsdC5tYXAoKGRpZmYpID0+IHtcbiAgICBjb25zdCBkZWx0YTogRml0bWVudC5EZWx0YSA9IHtcbiAgICAgIC4uLmRpZmYsXG4gICAgICBjb2xEZWx0YTogZGlmZi5jb2xEZWx0YSAtIGxvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMubGVuZ3RoXG4gICAgfTtcblxuICAgIGNvbnN0IGZpdHRlZEdyaWQgPSBGaXRtZW50LnRhaWxvcihncmlkQSwgZGVsdGEsIGdlbmVyYXRvcik7XG5cbiAgICAvLyBOZWVkIHRvIHJlY2FsY3VsYXRlIGxvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMgYXMgdGFpbG9yaW5nIG1heSBoYXZlIGluc2VydGVkIGNvbHVtbnMgYmVmb3JlIGxhc3QgbG9ja2VkIGNvbHVtbiB3aGljaCBjaGFuZ2VzIHRoZSBsb2NrZWQgaW5kZXhcbiAgICBjb25zdCBuZXdMb2NrZWRDb2x1bW5zID0gTG9ja2VkQ29sdW1uVXRpbHMuZ2V0TG9ja2VkQ29sdW1uc0Zyb21HcmlkKGZpdHRlZEdyaWQpO1xuICAgIGNvbnN0IG5ld0xvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMgPSBnZXRMb2NrZWRDb2x1bW5zV2l0aGluQm91bmRzKHZhbGlkU3RhcnRBZGRyZXNzLCBncmlkQlJvd3MsIG5ld0xvY2tlZENvbHVtbnMpO1xuICAgIHJldHVybiBtZXJnZVRhYmxlcyh2YWxpZFN0YXJ0QWRkcmVzcywgZml0dGVkR3JpZCwgZ3JpZEJSb3dzLCBnZW5lcmF0b3IsIGNvbXBhcmF0b3IsIG5ld0xvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMpO1xuICB9KTtcbn07XG5cbmNvbnN0IGluc2VydENvbHMgPSAoaW5kZXg6IG51bWJlciwgZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ2VuZXJhdG9yOiBTaW1wbGVHZW5lcmF0b3JzLCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgTWVyZ2luZ09wZXJhdGlvbnMuc3BsaXRDb2xzKGdyaWRBLCBpbmRleCwgY29tcGFyYXRvciwgZ2VuZXJhdG9yLmNlbGwpO1xuXG4gIGNvbnN0IGRlbHRhID0gRml0bWVudC5tZWFzdXJlSGVpZ2h0KGdyaWRCLCBncmlkQSk7XG4gIGNvbnN0IGZpdHRlZE5ld0dyaWQgPSBGaXRtZW50LnRhaWxvcihncmlkQiwgZGVsdGEsIGdlbmVyYXRvcik7XG5cbiAgY29uc3Qgc2Vjb25kRGVsdGEgPSBGaXRtZW50Lm1lYXN1cmVIZWlnaHQoZ3JpZEEsIGZpdHRlZE5ld0dyaWQpO1xuICBjb25zdCBmaXR0ZWRPbGRHcmlkID0gRml0bWVudC50YWlsb3IoZ3JpZEEsIHNlY29uZERlbHRhLCBnZW5lcmF0b3IpO1xuXG4gIHJldHVybiBBcnIubWFwKGZpdHRlZE9sZEdyaWQsIChncmlkUm93LCBpKSA9PiB7XG4gICAgcmV0dXJuIEdyaWRSb3cuYWRkQ2VsbHMoZ3JpZFJvdywgaW5kZXgsIGZpdHRlZE5ld0dyaWRbaV0uY2VsbHMpO1xuICB9KTtcbn07XG5cbi8qXG4gIEluc2VydGluZyByb3dzIHdpdGggbG9ja2VkIGNvbHVtbnNcbiAgLSBUYWlsb3IgZ3JpZEEgZmlyc3QgKHRoaXMgbmVlZHMgdG8gYmUgZG9uZSBmaXJzdCBhcyB0aGUgcG9zaXRpb24gb2YgdGhlIGxvY2tlZCBjb2x1bW5zIG1heSBjaGFuZ2Ugd2hlbiB0YWlsb3JpbmcgZ3JpZEEgYW5kIHRoZSBsb2NhdGlvbiBvZiB0aGUgbG9ja2VkIGNvbHVtbnMgbmVlZHMgdG8gYmUgc3RhYmxlIGJlZm9yZSB0YWlsb3JpbmcgZ3JpZEIpXG4gICAgLSBtZWFzdXJlIGRlbHRhIGJldHdlZW4gZ3JpZEEgYW5kIGdyaWRCIChwYXN0ZWQgcm93cykgLSBpZiBuZWdhdGl2ZSBjb2xEZWx0YSwgZ3JpZEEgbmVlZHMgZXh0cmEgY29sdW1ucyBhZGRlZCB0byBtYXRjaCBncmlkQlxuICAgIC0gbmVlZCB0byBjYWxjdWxhdGUgaG93IG1hbnkgY29sdW1ucyBpbiBncmlkQiBjYW5ub3QgYmUgZGlyZWN0bHkgaW5zZXJ0ZWQgaW50byBncmlkQSAtIHRoaXMgaXMgaG93IG1hbnkgZXh0cmEgY29sdW1ucyBuZWVkIHRvIGJlIGFkZGVkIHRvIGdyaWRBICh0aGlzIGNvbnNpZGVyZXMgdGhlIGZhY3QgbG9ja2VkIGNvbHVtbiBjYW5ub3QgYmUgaW5zZXJ0ZWQgaW50bylcbiAgICAgIC0gbm9uTG9ja2VkR3JpZEEgKyBsb2NrZWRHcmlkQSAtIGdyaWRCID0gY29sRGVsdGEgKEJ5IHN1YnRyYWN0aW5nIGxvY2tlZCBjb2x1bW4gY291bnQsIGNhbiBnZXQgcmVxdWlyZWQgZGlmZilcbiAgICAtIHRhaWxvciBncmlkQSBieSBhZGRpbmcgdGhlIHJlcXVpcmVkIGV4dHJhIGNvbHVtbnMgaWYgbmVjZXNzYXJ5IGVpdGhlciBhdCB0aGUgZW5kIG9mIGdyaWRBIG9yIGJlZm9yZSB0aGUgbGFzdCBjb2x1bW4gZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQgaXMgbG9ja2VkXG4gIC0gUmVjYWxjdWxhdGUgd2hlcmUgdGhlIGxvY2tlZCBjb2x1bW5zIGFyZSBpbiBncmlkQSBhZnRlciB0YWlsb3JpbmdcbiAgLSBNZWFzdXJlIGFuZCBkZXRlcm1pbmUgaWYgZXh0cmEgY29sdW1ucyBuZWVkIHRvIGJlIGFkZGVkIHRvIGdyaWRCIChsb2NrZWQgY29sdW1ucyBzaG91bGQgbm90IGNvdW50IHRvd2FyZHMgdGhlIGRlbHRhIGFzIGNvbEZpbGxpbmcgKGFkZGluZyBleHRyYSBjb2x1bW5zKSBmb3IgbG9ja2VkIGNvbHVtbnMgaXMgaGFuZGxlZCBzZXBhcmF0ZWx5KVxuICAtIERvIGEgbG9ja2VkQ29sRmlsbCBvbiBncmlkQlxuICAtIFRhaWxvciBncmlkQiBieSBhZGRpbmcgZXh0cmEgY29sdW1ucyB0byBlbmQgb2YgZ3JpZEIgaWYgcmVxdWlyZWRcbiovXG5cbmNvbnN0IGluc2VydFJvd3MgPSAoaW5kZXg6IG51bWJlciwgZ3JpZEE6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ3JpZEI6IFN0cnVjdHMuUm93Q2VsbHNbXSwgZ2VuZXJhdG9yOiBTaW1wbGVHZW5lcmF0b3JzLCBjb21wYXJhdG9yOiBDb21wRWxtKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgTWVyZ2luZ09wZXJhdGlvbnMuc3BsaXRSb3dzKGdyaWRBLCBpbmRleCwgY29tcGFyYXRvciwgZ2VuZXJhdG9yLmNlbGwpO1xuXG4gIGNvbnN0IGxvY2tlZCA9IExvY2tlZENvbHVtblV0aWxzLmdldExvY2tlZENvbHVtbnNGcm9tR3JpZChncmlkQSk7XG4gIGNvbnN0IGRpZmYgPSBGaXRtZW50Lm1lYXN1cmVXaWR0aChncmlkQSwgZ3JpZEIpO1xuICBjb25zdCBkZWx0YTogRml0bWVudC5EZWx0YSA9IHtcbiAgICAuLi5kaWZmLFxuICAgIGNvbERlbHRhOiBkaWZmLmNvbERlbHRhIC0gbG9ja2VkLmxlbmd0aFxuICB9O1xuICBjb25zdCBmaXR0ZWRPbGRHcmlkID0gRml0bWVudC50YWlsb3IoZ3JpZEEsIGRlbHRhLCBnZW5lcmF0b3IpO1xuICBjb25zdCB7IGNvbHM6IG9sZENvbHMsIHJvd3M6IG9sZFJvd3MgfSA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGZpdHRlZE9sZEdyaWQpO1xuXG4gIGNvbnN0IG5ld0xvY2tlZCA9IExvY2tlZENvbHVtblV0aWxzLmdldExvY2tlZENvbHVtbnNGcm9tR3JpZChmaXR0ZWRPbGRHcmlkKTtcbiAgY29uc3Qgc2Vjb25kRGlmZiA9IEZpdG1lbnQubWVhc3VyZVdpZHRoKGdyaWRCLCBncmlkQSk7XG4gIC8vIERvbid0IHdhbnQgdGhlIGxvY2tlZCBjb2x1bW5zIHRvIGNvdW50IHRvd2FyZHMgdG8gdGhlIGNvbERlbHRhIGFzIGNvbHVtbiBmaWxsaW5nIGZvciBsb2NrZWQgY29sdW1ucyBpcyBoYW5kbGVkIHNlcGFyYXRlbHlcbiAgY29uc3Qgc2Vjb25kRGVsdGE6IEZpdG1lbnQuRGVsdGEgPSB7XG4gICAgLi4uc2Vjb25kRGlmZixcbiAgICBjb2xEZWx0YTogc2Vjb25kRGlmZi5jb2xEZWx0YSArIG5ld0xvY2tlZC5sZW5ndGhcbiAgfTtcbiAgY29uc3QgZml0dGVkR3JpZEIgPSBGaXRtZW50LmxvY2tlZENvbEZpbGwoZ3JpZEIsIGdlbmVyYXRvciwgbmV3TG9ja2VkKTtcbiAgY29uc3QgZml0dGVkTmV3R3JpZCA9IEZpdG1lbnQudGFpbG9yKGZpdHRlZEdyaWRCLCBzZWNvbmREZWx0YSwgZ2VuZXJhdG9yKTtcblxuICByZXR1cm4gW1xuICAgIC4uLm9sZENvbHMsXG4gICAgLi4ub2xkUm93cy5zbGljZSgwLCBpbmRleCksXG4gICAgLi4uZml0dGVkTmV3R3JpZCxcbiAgICAuLi5vbGRSb3dzLnNsaWNlKGluZGV4LCBvbGRSb3dzLmxlbmd0aClcbiAgXTtcbn07XG5cbmV4cG9ydCB7XG4gIG1lcmdlLFxuICBpbnNlcnRDb2xzLFxuICBpbnNlcnRSb3dzXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEdlbmVyYXRvcnMgfSBmcm9tICcuLi9hcGkvR2VuZXJhdG9ycyc7XG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB7IFdhcmVob3VzZSB9IGZyb20gJy4uL2FwaS9XYXJlaG91c2UnO1xuaW1wb3J0IHR5cGUgeyBDb21wRWxtLCBSb3dDZWxsLCBSb3dFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuaW1wb3J0ICogYXMgVGFibGVHcmlkIGZyb20gJy4vVGFibGVHcmlkJztcblxuY29uc3QgdG9EZXRhaWxzID0gPFIgZXh0ZW5kcyBSb3dFbGVtZW50PihncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzPFI+W10sIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBTdHJ1Y3RzLlJvd0RldGFpbE5ldzxTdHJ1Y3RzLkRldGFpbE5ldzxSb3dDZWxsPFI+PiwgUj5bXSA9PiB7XG4gIGNvbnN0IHNlZW46IGJvb2xlYW5bXVtdID0gQXJyLm1hcChncmlkLCAocm93KSA9PlxuICAgIEFyci5tYXAocm93LmNlbGxzLCBGdW4ubmV2ZXIpXG4gICk7XG5cbiAgY29uc3QgdXBkYXRlU2VlbiA9IChyb3dJbmRleDogbnVtYmVyLCBjb2x1bW5JbmRleDogbnVtYmVyLCByb3dzcGFuOiBudW1iZXIsIGNvbHNwYW46IG51bWJlcikgPT4ge1xuICAgIGZvciAobGV0IHJvdyA9IHJvd0luZGV4OyByb3cgPCByb3dJbmRleCArIHJvd3NwYW47IHJvdysrKSB7XG4gICAgICBmb3IgKGxldCBjb2x1bW4gPSBjb2x1bW5JbmRleDsgY29sdW1uIDwgY29sdW1uSW5kZXggKyBjb2xzcGFuOyBjb2x1bW4rKykge1xuICAgICAgICBzZWVuW3Jvd11bY29sdW1uXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBBcnIubWFwKGdyaWQsIChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgY29uc3QgZGV0YWlscyA9IEFyci5iaW5kKHJvdy5jZWxscywgKGNlbGwsIGNvbHVtbkluZGV4KSA9PiB7XG4gICAgICAvLyBpZiB3ZSBoYXZlIHNlZW4gdGhpcyBvbmUsIHRoZW4gc2tpcCBpdC5cbiAgICAgIGlmIChzZWVuW3Jvd0luZGV4XVtjb2x1bW5JbmRleF0gPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFRhYmxlR3JpZC5zdWJncmlkKGdyaWQsIHJvd0luZGV4LCBjb2x1bW5JbmRleCwgY29tcGFyYXRvcik7XG4gICAgICAgIHVwZGF0ZVNlZW4ocm93SW5kZXgsIGNvbHVtbkluZGV4LCByZXN1bHQucm93c3BhbiwgcmVzdWx0LmNvbHNwYW4pO1xuICAgICAgICByZXR1cm4gWyBTdHJ1Y3RzLmRldGFpbG5ldyhjZWxsLmVsZW1lbnQsIHJlc3VsdC5yb3dzcGFuLCByZXN1bHQuY29sc3BhbiwgY2VsbC5pc05ldykgXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXSBhcyBTdHJ1Y3RzLkRldGFpbE5ldzxSb3dDZWxsPFI+PltdO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBTdHJ1Y3RzLnJvd2RldGFpbG5ldyhyb3cuZWxlbWVudCwgZGV0YWlscywgcm93LnNlY3Rpb24sIHJvdy5pc05ldyk7XG4gIH0pO1xufTtcblxuY29uc3QgdG9HcmlkID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBnZW5lcmF0b3JzOiBHZW5lcmF0b3JzLCBpc05ldzogYm9vbGVhbik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSA9IFtdO1xuXG4gIEFyci5lYWNoKHdhcmVob3VzZS5jb2xncm91cHMsIChjb2xncm91cCkgPT4ge1xuICAgIGNvbnN0IGNvbGdyb3VwQ29sczogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNvbEVsZW1lbnQ+W10gPSBbXTtcbiAgICAvLyBUaGlzIHdpbGwgYWRkIG1pc3NpbmcgY29scyBhcyB3ZWxsIGFzIGNsYW1wIHRoZSBudW1iZXIgb2YgY29scyB0byB0aGUgbWF4IG51bWJlciBvZiBhY3R1YWwgY29sdW1uc1xuICAgIC8vIE5vdGU6IFNwYW5zIG9uIGNvbHMgYXJlIHVuc3VwcG9ydGVkIHNvIGNsYW1waW5nIGNvbHMgbWF5IHJlc3VsdCBpbiBhIHNwYW4gb24gYSBjb2wgZWxlbWVudCBiZWluZyBpbmNvcnJlY3RcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgd2FyZWhvdXNlLmdyaWQuY29sdW1uczsgY29sdW1uSW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IFdhcmVob3VzZS5nZXRDb2x1bW5BdCh3YXJlaG91c2UsIGNvbHVtbkluZGV4KVxuICAgICAgICAubWFwKChjb2x1bW4pID0+IFN0cnVjdHMuZWxlbWVudG5ldyhjb2x1bW4uZWxlbWVudCwgaXNOZXcsIGZhbHNlKSlcbiAgICAgICAgLmdldE9yVGh1bmsoKCkgPT4gU3RydWN0cy5lbGVtZW50bmV3KGdlbmVyYXRvcnMuY29sR2FwKCksIHRydWUsIGZhbHNlKSk7XG4gICAgICBjb2xncm91cENvbHMucHVzaChlbGVtZW50KTtcbiAgICB9XG4gICAgZ3JpZC5wdXNoKFN0cnVjdHMucm93Y2VsbHMoY29sZ3JvdXAuZWxlbWVudCwgY29sZ3JvdXBDb2xzLCAnY29sZ3JvdXAnLCBpc05ldykpO1xuICB9KTtcblxuICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgd2FyZWhvdXNlLmdyaWQucm93czsgcm93SW5kZXgrKykge1xuICAgIGNvbnN0IHJvd0NlbGxzOiBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPSBbXTtcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgd2FyZWhvdXNlLmdyaWQuY29sdW1uczsgY29sdW1uSW5kZXgrKykge1xuICAgICAgLy8gVGhlIGVsZW1lbnQgaXMgZ29pbmcgdG8gYmUgdGhlIGVsZW1lbnQgYXQgdGhhdCBwb3NpdGlvbiwgb3IgYSBuZXdseSBnZW5lcmF0ZWQgZ2FwLlxuICAgICAgY29uc3QgZWxlbWVudCA9IFdhcmVob3VzZS5nZXRBdCh3YXJlaG91c2UsIHJvd0luZGV4LCBjb2x1bW5JbmRleCkubWFwKChpdGVtKSA9PlxuICAgICAgICBTdHJ1Y3RzLmVsZW1lbnRuZXcoaXRlbS5lbGVtZW50LCBpc05ldywgaXRlbS5pc0xvY2tlZClcbiAgICAgICkuZ2V0T3JUaHVuaygoKSA9PlxuICAgICAgICBTdHJ1Y3RzLmVsZW1lbnRuZXcoZ2VuZXJhdG9ycy5nYXAoKSwgdHJ1ZSwgZmFsc2UpXG4gICAgICApO1xuICAgICAgcm93Q2VsbHMucHVzaChlbGVtZW50KTtcbiAgICB9XG4gICAgY29uc3Qgcm93RGV0YWlsID0gd2FyZWhvdXNlLmFsbFtyb3dJbmRleF07XG4gICAgY29uc3Qgcm93ID0gU3RydWN0cy5yb3djZWxscyhyb3dEZXRhaWwuZWxlbWVudCwgcm93Q2VsbHMsIHJvd0RldGFpbC5zZWN0aW9uLCBpc05ldyk7XG4gICAgZ3JpZC5wdXNoKHJvdyk7XG4gIH1cblxuICByZXR1cm4gZ3JpZDtcbn07XG5cbmV4cG9ydCB7XG4gIHRvRGV0YWlscyxcbiAgdG9HcmlkXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgR3JpZFJvdyBmcm9tICcuLi9tb2RlbC9HcmlkUm93JztcbmltcG9ydCB0eXBlIHsgQ2VsbEVsZW1lbnQsIENvbXBFbG0gfSBmcm9tICcuLi91dGlsL1RhYmxlVHlwZXMnO1xuXG50eXBlIFN1YnN0ID0gKCkgPT4gU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcblxuLy8gc3Vic3RpdHV0aW9uOiAoKSAtPiBpdGVtXG5jb25zdCBtZXJnZSA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGJvdW5kczogU3RydWN0cy5Cb3VuZHMsIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgLy8gTXV0YXRpbmcuIERvIHdlIGNhcmUgYWJvdXQgdGhlIGVmZmljaWVuY3kgZ2Fpbj9cbiAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGdyaWQ7XG4gIH1cbiAgZm9yIChsZXQgaSA9IGJvdW5kcy5zdGFydFJvdzsgaSA8PSBib3VuZHMuZmluaXNoUm93OyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gYm91bmRzLnN0YXJ0Q29sOyBqIDw9IGJvdW5kcy5maW5pc2hDb2w7IGorKykge1xuICAgICAgLy8gV2UgY2FuIHByb2JhYmx5IHNpbXBsaWZ5IHRoaXMgYWdhaW4gbm93IHRoYXQgd2UgYXJlbid0IHJldXNpbmcgbWVyZ2UuXG4gICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgY29uc3QgaXNMb2NrZWQgPSBHcmlkUm93LmdldENlbGwocm93LCBqKS5pc0xvY2tlZDtcbiAgICAgIEdyaWRSb3cubXV0YXRlQ2VsbChyb3csIGosIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oKSwgZmFsc2UsIGlzTG9ja2VkKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBncmlkO1xufTtcblxuLy8gc3Vic3RpdHV0aW9uOiAoKSAtPiBpdGVtXG5jb25zdCB1bm1lcmdlID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgdGFyZ2V0OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3Qgcm93cyA9IEdyaWRSb3cuZXh0cmFjdEdyaWREZXRhaWxzKGdyaWQpLnJvd3M7XG4gIC8vIE11dGF0aW5nLiBEbyB3ZSBjYXJlIGFib3V0IHRoZSBlZmZpY2llbmN5IGdhaW4/XG4gIGxldCBmaXJzdCA9IHRydWU7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgR3JpZFJvdy5jZWxsTGVuZ3RoKHJvd3NbMF0pOyBqKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07XG4gICAgICBjb25zdCBjdXJyZW50Q2VsbCA9IEdyaWRSb3cuZ2V0Q2VsbChyb3csIGopO1xuICAgICAgY29uc3QgY3VycmVudENlbGxFbG0gPSBjdXJyZW50Q2VsbC5lbGVtZW50O1xuICAgICAgY29uc3QgaXNUb1JlcGxhY2UgPSBjb21wYXJhdG9yKGN1cnJlbnRDZWxsRWxtLCB0YXJnZXQpO1xuXG4gICAgICBpZiAoaXNUb1JlcGxhY2UgJiYgIWZpcnN0KSB7XG4gICAgICAgIEdyaWRSb3cubXV0YXRlQ2VsbChyb3csIGosIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oKSwgdHJ1ZSwgY3VycmVudENlbGwuaXNMb2NrZWQpKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNUb1JlcGxhY2UpIHtcbiAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdyaWQ7XG59O1xuXG5jb25zdCB1bmlxdWVDZWxscyA9IDxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQ+KHJvdzogU3RydWN0cy5FbGVtZW50TmV3PFQ+W10sIGNvbXBhcmF0b3I6IENvbXBFbG0pOiBTdHJ1Y3RzLkVsZW1lbnROZXc8VD5bXSA9PiB7XG4gIHJldHVybiBBcnIuZm9sZGwocm93LCAocmVzdCwgY2VsbCkgPT4ge1xuICAgIHJldHVybiBBcnIuZXhpc3RzKHJlc3QsIChjdXJyZW50Q2VsbCkgPT4ge1xuICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoY3VycmVudENlbGwuZWxlbWVudCwgY2VsbC5lbGVtZW50KTtcbiAgICB9KSA/IHJlc3QgOiByZXN0LmNvbmNhdChbIGNlbGwgXSk7XG4gIH0sIFtdIGFzIFN0cnVjdHMuRWxlbWVudE5ldzxUPltdKTtcbn07XG5cbmNvbnN0IHNwbGl0Q29scyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGluZGV4OiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICAvLyBXZSBkb24ndCBuZWVkIHRvIHNwbGl0IHJvd3MgaWYgd2UncmUgaW5zZXJ0aW5nIGF0IHRoZSBmaXJzdCBvciBsYXN0IHJvdyBvZiB0aGUgb2xkIHRhYmxlXG4gIGlmIChpbmRleCA+IDAgJiYgaW5kZXggPCBncmlkWzBdLmNlbGxzLmxlbmd0aCkge1xuICAgIEFyci5lYWNoKGdyaWQsIChyb3cpID0+IHtcbiAgICAgIGNvbnN0IHByZXZDZWxsID0gcm93LmNlbGxzW2luZGV4IC0gMV07XG4gICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgIGNvbnN0IHN1YnN0aXR1dGUgPSBzdWJzdGl0dXRpb24oKTtcblxuICAgICAgd2hpbGUgKHJvdy5jZWxscy5sZW5ndGggPiBpbmRleCArIG9mZnNldCAmJiBjb21wYXJhdG9yKHByZXZDZWxsLmVsZW1lbnQsIHJvdy5jZWxsc1tpbmRleCArIG9mZnNldF0uZWxlbWVudCkpIHtcbiAgICAgICAgR3JpZFJvdy5tdXRhdGVDZWxsKHJvdywgaW5kZXggKyBvZmZzZXQsIFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRlLCB0cnVlLCByb3cuY2VsbHNbaW5kZXggKyBvZmZzZXRdLmlzTG9ja2VkKSk7XG4gICAgICAgIG9mZnNldCsrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGdyaWQ7XG59O1xuXG5jb25zdCBzcGxpdFJvd3MgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgLy8gV2UgZG9uJ3QgbmVlZCB0byBzcGxpdCByb3dzIGlmIHdlJ3JlIGluc2VydGluZyBhdCB0aGUgZmlyc3Qgb3IgbGFzdCByb3cgb2YgdGhlIG9sZCB0YWJsZVxuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCA8IHJvd3MubGVuZ3RoKSB7XG4gICAgY29uc3Qgcm93UHJldkNlbGxzID0gcm93c1tpbmRleCAtIDFdLmNlbGxzO1xuICAgIGNvbnN0IGNlbGxzID0gdW5pcXVlQ2VsbHMocm93UHJldkNlbGxzLCBjb21wYXJhdG9yKTtcbiAgICBBcnIuZWFjaChjZWxscywgKGNlbGwpID0+IHtcbiAgICAgIC8vIG9ubHkgbWFrZSBhIHN1YiB3aGVuIHdlIGhhdmUgdG9cbiAgICAgIGxldCByZXBsYWNlbWVudCA9IE9wdGlvbmFsLm5vbmU8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4oKTtcbiAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBHcmlkUm93LmNlbGxMZW5ndGgocm93c1swXSk7IGorKykge1xuICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07XG4gICAgICAgICAgY29uc3QgY3VycmVudCA9IEdyaWRSb3cuZ2V0Q2VsbChyb3csIGopO1xuICAgICAgICAgIGNvbnN0IGlzVG9SZXBsYWNlID0gY29tcGFyYXRvcihjdXJyZW50LmVsZW1lbnQsIGNlbGwuZWxlbWVudCk7XG5cbiAgICAgICAgICBpZiAoaXNUb1JlcGxhY2UpIHtcbiAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudC5pc05vbmUoKSkge1xuICAgICAgICAgICAgICByZXBsYWNlbWVudCA9IE9wdGlvbmFsLnNvbWUoc3Vic3RpdHV0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVwbGFjZW1lbnQuZWFjaCgoc3ViKSA9PiB7XG4gICAgICAgICAgICAgIEdyaWRSb3cubXV0YXRlQ2VsbChyb3csIGosIFN0cnVjdHMuZWxlbWVudG5ldyhzdWIsIHRydWUsIGN1cnJlbnQuaXNMb2NrZWQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGdyaWQ7XG59O1xuXG5leHBvcnQge1xuICBtZXJnZSxcbiAgdW5tZXJnZSxcbiAgc3BsaXRDb2xzLFxuICBzcGxpdFJvd3Ncbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBTdHJ1Y3RzIGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCAqIGFzIEdyaWRSb3cgZnJvbSAnLi4vbW9kZWwvR3JpZFJvdyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0sIFN1YnN0IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxudHlwZSBDbG9uZUNlbGwgPSAoZWxlbTogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgaW5kZXg6IG51bWJlcikgPT4gU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PjtcblxuY29uc3QgY2xvbmVSb3cgPSAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+LCBjbG9uZUNlbGw6IENsb25lQ2VsbCwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCkgPT5cbiAgR3JpZFJvdy5jbG9uZShyb3csIChlbGVtKSA9PiBzdWJzdGl0dXRpb24oZWxlbSwgY29tcGFyYXRvciksIGNsb25lQ2VsbCk7XG5cbi8vIHN1YnN0aXR1dGlvbiA6OiAoaXRlbSwgY29tcGFyYXRvcikgLT4gaXRlbVxuLy8gZXhhbXBsZSBpcyB0aGUgbG9jYXRpb24gb2YgdGhlIGN1cnNvciAodGhlIHJvdyBpbmRleClcbi8vIGluZGV4IGlzIHRoZSBpbnNlcnQgcG9zaXRpb24gKGF0IC0gb3IgYWZ0ZXIgLSBleGFtcGxlKSAodGhlIHJvdyBpbmRleClcbmNvbnN0IGluc2VydFJvd0F0ID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlciwgZXhhbXBsZTogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKTtcbiAgY29uc3QgYmVmb3JlID0gcm93cy5zbGljZSgwLCBpbmRleCk7XG4gIGNvbnN0IGFmdGVyID0gcm93cy5zbGljZShpbmRleCk7XG5cbiAgY29uc3QgbmV3Um93ID0gY2xvbmVSb3cocm93c1tleGFtcGxlXSwgKGV4LCBjKSA9PiB7XG4gICAgY29uc3Qgd2l0aGluU3BhbiA9IGluZGV4ID4gMCAmJiBpbmRleCA8IHJvd3MubGVuZ3RoICYmIGNvbXBhcmF0b3IoR3JpZFJvdy5nZXRDZWxsRWxlbWVudChyb3dzW2luZGV4IC0gMV0sIGMpLCBHcmlkUm93LmdldENlbGxFbGVtZW50KHJvd3NbaW5kZXhdLCBjKSk7XG4gICAgY29uc3QgcmV0ID0gd2l0aGluU3BhbiA/IEdyaWRSb3cuZ2V0Q2VsbChyb3dzW2luZGV4XSwgYykgOiBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0aW9uKGV4LmVsZW1lbnQsIGNvbXBhcmF0b3IpLCB0cnVlLCBleC5pc0xvY2tlZCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfSwgY29tcGFyYXRvciwgc3Vic3RpdHV0aW9uKTtcblxuICByZXR1cm4gW1xuICAgIC4uLmNvbHMsXG4gICAgLi4uYmVmb3JlLFxuICAgIG5ld1JvdyxcbiAgICAuLi5hZnRlclxuICBdO1xufTtcblxuY29uc3QgZ2V0RWxlbWVudEZvciA9IChyb3c6IFN0cnVjdHMuUm93Q2VsbHMsIGNvbHVtbjogbnVtYmVyLCBzZWN0aW9uOiBzdHJpbmcsIHdpdGhpblNwYW46IGJvb2xlYW4sIGV4YW1wbGU6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuRWxlbWVudE5ldyA9PiB7XG4gIGlmIChzZWN0aW9uID09PSAnY29sZ3JvdXAnIHx8ICF3aXRoaW5TcGFuKSB7XG4gICAgY29uc3QgY2VsbCA9IEdyaWRSb3cuZ2V0Q2VsbChyb3csIGV4YW1wbGUpO1xuICAgIC8vIGxvY2tlZCBpcyBleHBsaWNpdGx5IHNldCB0byBmYWxzZSBzbyB0aGUgbmV3bHkgaW5zZXJ0ZWQgY29sdW1uIGRvZXNuJ3QgaW5oZXJpdCBleGFtcGxlIGNvbHVtbiBsb2NrZWQgc3RhdGVcbiAgICByZXR1cm4gU3RydWN0cy5lbGVtZW50bmV3KHN1YnN0aXR1dGlvbihjZWxsLmVsZW1lbnQsIGNvbXBhcmF0b3IpLCB0cnVlLCBmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIEdyaWRSb3cuZ2V0Q2VsbChyb3csIGNvbHVtbik7XG4gIH1cbn07XG5cbi8vIHN1YnN0aXR1dGlvbiA6OiAoaXRlbSwgY29tcGFyYXRvcikgLT4gaXRlbVxuLy8gZXhhbXBsZSBpcyB0aGUgbG9jYXRpb24gb2YgdGhlIGN1cnNvciAodGhlIGNvbHVtbiBpbmRleClcbi8vIGluZGV4IGlzIHRoZSBpbnNlcnQgcG9zaXRpb24gKGF0IC0gb3IgYWZ0ZXIgLSBleGFtcGxlKSAodGhlIGNvbHVtbiBpbmRleClcbmNvbnN0IGluc2VydENvbHVtbkF0ID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlciwgZXhhbXBsZTogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+XG4gIEFyci5tYXAoZ3JpZCwgKHJvdykgPT4ge1xuICAgIGNvbnN0IHdpdGhpblNwYW4gPSBpbmRleCA+IDAgJiYgaW5kZXggPCBHcmlkUm93LmNlbGxMZW5ndGgocm93KSAmJiBjb21wYXJhdG9yKEdyaWRSb3cuZ2V0Q2VsbEVsZW1lbnQocm93LCBpbmRleCAtIDEpLCBHcmlkUm93LmdldENlbGxFbGVtZW50KHJvdywgaW5kZXgpKTtcbiAgICBjb25zdCBzdWIgPSBnZXRFbGVtZW50Rm9yKHJvdywgaW5kZXgsIHJvdy5zZWN0aW9uLCB3aXRoaW5TcGFuLCBleGFtcGxlLCBjb21wYXJhdG9yLCBzdWJzdGl0dXRpb24pO1xuXG4gICAgcmV0dXJuIEdyaWRSb3cuYWRkQ2VsbChyb3csIGluZGV4LCBzdWIpO1xuICB9KTtcblxuLy8gc3Vic3RpdHV0aW9uIDo6IChpdGVtLCBjb21wYXJhdG9yKSAtPiBpdGVtXG4vLyBSZXR1cm5zOlxuLy8gLSBhIG5ldyBncmlkIHdpdGggdGhlIGNlbGwgYXQgY29vcmRzIFtleGFtcGxlUm93LCBleGFtcGxlQ29sXSBzcGxpdCBpbnRvIHR3byBjZWxscyAodGhlXG4vLyAgIG5ldyBjZWxsIGZvbGxvd3MsIGFuZCBpcyBlbXB0eSksIGFuZFxuLy8gLSB0aGUgb3RoZXIgY2VsbHMgaW4gdGhhdCBjb2x1bW4gc2V0IHRvIHNwYW4gdGhlIHNwbGl0IGNlbGwuXG5jb25zdCBzcGxpdENlbGxJbnRvQ29sdW1ucyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4YW1wbGVSb3c6IG51bWJlciwgZXhhbXBsZUNvbDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgaW5kZXggPSBleGFtcGxlQ29sICsgMTsgLy8gaW5zZXJ0IGFmdGVyXG4gIHJldHVybiBBcnIubWFwKGdyaWQsIChyb3csIGkpID0+IHtcbiAgICBjb25zdCBpc1RhcmdldENlbGwgPSAoaSA9PT0gZXhhbXBsZVJvdyk7XG4gICAgY29uc3QgY2VsbCA9IEdyaWRSb3cuZ2V0Q2VsbChyb3csIGV4YW1wbGVDb2wpO1xuICAgIGNvbnN0IHN1YiA9IGlzVGFyZ2V0Q2VsbCA/IFN0cnVjdHMuZWxlbWVudG5ldyhzdWJzdGl0dXRpb24oY2VsbC5lbGVtZW50LCBjb21wYXJhdG9yKSwgdHJ1ZSwgY2VsbC5pc0xvY2tlZCkgOiBjZWxsO1xuICAgIHJldHVybiBHcmlkUm93LmFkZENlbGwocm93LCBpbmRleCwgc3ViKTtcbiAgfSk7XG59O1xuXG4vLyBzdWJzdGl0dXRpb24gOjogKGl0ZW0sIGNvbXBhcmF0b3IpIC0+IGl0ZW1cbi8vIFJldHVybnM6XG4vLyAtIGEgbmV3IGdyaWQgd2l0aCB0aGUgY2VsbCBhdCBjb29yZHMgW2V4YW1wbGVSb3csIGV4YW1wbGVDb2xdIHNwbGl0IGludG8gdHdvIGNlbGxzICh0aGVcbi8vICAgbmV3IGNlbGwgYmVsb3csIGFuZCBpcyBlbXB0eSksIGFuZFxuLy8gLSB0aGUgb3RoZXIgY2VsbHMgaW4gdGhhdCByb3cgc2V0IHRvIHNwYW4gdGhlIHNwbGl0IGNlbGwuXG5jb25zdCBzcGxpdENlbGxJbnRvUm93cyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGV4YW1wbGVSb3c6IG51bWJlciwgZXhhbXBsZUNvbDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0KTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKTtcbiAgY29uc3QgaW5kZXggPSBleGFtcGxlUm93ICsgMTsgLy8gaW5zZXJ0IGFmdGVyXG4gIGNvbnN0IGJlZm9yZSA9IHJvd3Muc2xpY2UoMCwgaW5kZXgpO1xuICBjb25zdCBhZnRlciA9IHJvd3Muc2xpY2UoaW5kZXgpO1xuXG4gIGNvbnN0IG5ld1JvdyA9IGNsb25lUm93KHJvd3NbZXhhbXBsZVJvd10sIChleCwgaSkgPT4ge1xuICAgIGNvbnN0IGlzVGFyZ2V0Q2VsbCA9IChpID09PSBleGFtcGxlQ29sKTtcbiAgICByZXR1cm4gaXNUYXJnZXRDZWxsID8gU3RydWN0cy5lbGVtZW50bmV3KHN1YnN0aXR1dGlvbihleC5lbGVtZW50LCBjb21wYXJhdG9yKSwgdHJ1ZSwgZXguaXNMb2NrZWQpIDogZXg7XG4gIH0sIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbik7XG5cbiAgcmV0dXJuIFtcbiAgICAuLi5jb2xzLFxuICAgIC4uLmJlZm9yZSxcbiAgICBuZXdSb3csXG4gICAgLi4uYWZ0ZXJcbiAgXTtcbn07XG5cbmNvbnN0IGRlbGV0ZUNvbHVtbnNBdCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGNvbHVtbnM6IG51bWJlcltdKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+XG4gIEFyci5iaW5kKGdyaWQsIChyb3cpID0+IHtcbiAgICBjb25zdCBleGlzdGluZ0NlbGxzID0gcm93LmNlbGxzO1xuICAgIGNvbnN0IGNlbGxzID0gQXJyLmZvbGRyKGNvbHVtbnMsIChhY2MsIGNvbHVtbikgPT4gY29sdW1uID49IDAgJiYgY29sdW1uIDwgYWNjLmxlbmd0aCA/IGFjYy5zbGljZSgwLCBjb2x1bW4pLmNvbmNhdChhY2Muc2xpY2UoY29sdW1uICsgMSkpIDogYWNjLCBleGlzdGluZ0NlbGxzKTtcbiAgICByZXR1cm4gY2VsbHMubGVuZ3RoID4gMCA/IFsgU3RydWN0cy5yb3djZWxscyhyb3cuZWxlbWVudCwgY2VsbHMsIHJvdy5zZWN0aW9uLCByb3cuaXNOZXcpIF0gOiBbXTtcbiAgfSk7XG5cbmNvbnN0IGRlbGV0ZVJvd3NBdCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIHN0YXJ0OiBudW1iZXIsIGZpbmlzaDogbnVtYmVyKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSBHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKTtcbiAgcmV0dXJuIFtcbiAgICAuLi5jb2xzLFxuICAgIC4uLnJvd3Muc2xpY2UoMCwgc3RhcnQpLFxuICAgIC4uLnJvd3Muc2xpY2UoZmluaXNoICsgMSlcbiAgXTtcbn07XG5cbmV4cG9ydCB7XG4gIGluc2VydFJvd0F0LFxuICBpbnNlcnRDb2x1bW5BdCxcbiAgc3BsaXRDZWxsSW50b0NvbHVtbnMsXG4gIHNwbGl0Q2VsbEludG9Sb3dzLFxuICBkZWxldGVSb3dzQXQsXG4gIGRlbGV0ZUNvbHVtbnNBdFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIEluc2VydCwgSW5zZXJ0QWxsLCBSZW1vdmUsIFJlcGxpY2F0aW9uLCBTZWxlY3RvckZpbHRlciwgU2VsZWN0b3JGaW5kLCBTdWdhckVsZW1lbnQsIFRyYXZlcnNlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBEZXRhaWwsIERldGFpbE5ldywgUm93RGV0YWlsTmV3LCBTZWN0aW9uIH0gZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuXG5pbnRlcmZhY2UgTmV3Um93c0FuZENlbGxzIHtcbiAgcmVhZG9ubHkgbmV3Um93czogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQ+W107XG4gIHJlYWRvbmx5IG5ld0NlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W107XG59XG5cbmNvbnN0IHNldElmTm90ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IG51bWJlciwgaWdub3JlOiBudW1iZXIpOiB2b2lkID0+IHtcbiAgaWYgKHZhbHVlID09PSBpZ25vcmUpIHtcbiAgICBBdHRyaWJ1dGUucmVtb3ZlKGVsZW1lbnQsIHByb3BlcnR5KTtcbiAgfSBlbHNlIHtcbiAgICBBdHRyaWJ1dGUuc2V0KGVsZW1lbnQsIHByb3BlcnR5LCB2YWx1ZSk7XG4gIH1cbn07XG5cbmNvbnN0IGluc2VydCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBzZWxlY3Rvcjogc3RyaW5nLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PikgPT4ge1xuICBBcnIubGFzdChTZWxlY3RvckZpbHRlci5jaGlsZHJlbih0YWJsZSwgc2VsZWN0b3IpKS5mb2xkKFxuICAgICgpID0+IEluc2VydC5wcmVwZW5kKHRhYmxlLCBlbGVtZW50KSxcbiAgICAoY2hpbGQpID0+IEluc2VydC5hZnRlcihjaGlsZCwgZWxlbWVudClcbiAgKTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlU2VjdGlvbiA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBzZWN0aW9uTmFtZTogU2VjdGlvbikgPT4ge1xuICBjb25zdCBzZWN0aW9uID0gU2VsZWN0b3JGaW5kLmNoaWxkKHRhYmxlLCBzZWN0aW9uTmFtZSkuZ2V0T3JUaHVuaygoKSA9PiB7XG4gICAgY29uc3QgbmV3U2VjdGlvbiA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKHNlY3Rpb25OYW1lLCBUcmF2ZXJzZS5vd25lcih0YWJsZSkuZG9tKTtcbiAgICBpZiAoc2VjdGlvbk5hbWUgPT09ICd0aGVhZCcpIHtcbiAgICAgIGluc2VydCh0YWJsZSwgJ2NhcHRpb24sY29sZ3JvdXAnLCBuZXdTZWN0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHNlY3Rpb25OYW1lID09PSAnY29sZ3JvdXAnKSB7XG4gICAgICBpbnNlcnQodGFibGUsICdjYXB0aW9uJywgbmV3U2VjdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIEluc2VydC5hcHBlbmQodGFibGUsIG5ld1NlY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3U2VjdGlvbjtcbiAgfSk7XG5cbiAgUmVtb3ZlLmVtcHR5KHNlY3Rpb24pO1xuXG4gIHJldHVybiBzZWN0aW9uO1xufTtcblxuY29uc3QgcmVuZGVyID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIGdyaWQ6IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10pOiBOZXdSb3dzQW5kQ2VsbHMgPT4ge1xuICBjb25zdCBuZXdSb3dzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlUm93RWxlbWVudD5bXSA9IFtdO1xuICBjb25zdCBuZXdDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdID0gW107XG5cbiAgY29uc3Qgc3luY1Jvd3MgPSAoZ3JpZFNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBIVE1MVGFibGVSb3dFbGVtZW50PltdKSA9PlxuICAgIEFyci5tYXAoZ3JpZFNlY3Rpb24sIChyb3cpID0+IHtcbiAgICAgIGlmIChyb3cuaXNOZXcpIHtcbiAgICAgICAgbmV3Um93cy5wdXNoKHJvdy5lbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRyID0gcm93LmVsZW1lbnQ7XG4gICAgICBSZW1vdmUuZW1wdHkodHIpO1xuICAgICAgQXJyLmVhY2gocm93LmNlbGxzLCAoY2VsbCkgPT4ge1xuICAgICAgICBpZiAoY2VsbC5pc05ldykge1xuICAgICAgICAgIG5ld0NlbGxzLnB1c2goY2VsbC5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRJZk5vdChjZWxsLmVsZW1lbnQsICdjb2xzcGFuJywgY2VsbC5jb2xzcGFuLCAxKTtcbiAgICAgICAgc2V0SWZOb3QoY2VsbC5lbGVtZW50LCAncm93c3BhbicsIGNlbGwucm93c3BhbiwgMSk7XG4gICAgICAgIEluc2VydC5hcHBlbmQodHIsIGNlbGwuZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cjtcbiAgICB9KTtcblxuICAvLyBBc3N1bXB0aW9uIHdlIHNob3VsZCBvbmx5IGV2ZXIgaGF2ZSAxIGNvbGdyb3VwLiBUaGUgc3BlYyBhbGxvd3MgZm9yIG11bHRpcGxlLCBob3dldmVyIGl0J3MgY3VycmVudGx5IHVuc3VwcG9ydGVkXG4gIGNvbnN0IHN5bmNDb2xHcm91cCA9IChncmlkU2VjdGlvbjogUm93RGV0YWlsTmV3PERldGFpbE5ldzxIVE1MVGFibGVDb2xFbGVtZW50PiwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSkgPT5cbiAgICBBcnIuYmluZChncmlkU2VjdGlvbiwgKGNvbEdyb3VwKSA9PlxuICAgICAgQXJyLm1hcChjb2xHcm91cC5jZWxscywgKGNvbCkgPT4ge1xuICAgICAgICBzZXRJZk5vdChjb2wuZWxlbWVudCwgJ3NwYW4nLCBjb2wuY29sc3BhbiwgMSk7XG4gICAgICAgIHJldHVybiBjb2wuZWxlbWVudDtcbiAgICAgIH0pXG4gICAgKTtcblxuICBjb25zdCByZW5kZXJTZWN0aW9uID0gKGdyaWRTZWN0aW9uOiBSb3dEZXRhaWxOZXc8RGV0YWlsTmV3PltdLCBzZWN0aW9uTmFtZTogU2VjdGlvbikgPT4ge1xuICAgIGNvbnN0IHNlY3Rpb24gPSBnZW5lcmF0ZVNlY3Rpb24odGFibGUsIHNlY3Rpb25OYW1lKTtcbiAgICBjb25zdCBzeW5jID0gc2VjdGlvbk5hbWUgPT09ICdjb2xncm91cCcgPyBzeW5jQ29sR3JvdXAgOiBzeW5jUm93cztcbiAgICBjb25zdCBzZWN0aW9uRWxlbXMgPSBzeW5jKGdyaWRTZWN0aW9uIGFzIFJvd0RldGFpbE5ldzxhbnksIGFueT5bXSk7XG4gICAgSW5zZXJ0QWxsLmFwcGVuZChzZWN0aW9uLCBzZWN0aW9uRWxlbXMpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVNlY3Rpb24gPSAoc2VjdGlvbk5hbWU6IFNlY3Rpb24pID0+IHtcbiAgICBTZWxlY3RvckZpbmQuY2hpbGQodGFibGUsIHNlY3Rpb25OYW1lKS5lYWNoKFJlbW92ZS5yZW1vdmUpO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlck9yUmVtb3ZlU2VjdGlvbiA9IChncmlkU2VjdGlvbjogUm93RGV0YWlsTmV3PERldGFpbE5ldz5bXSwgc2VjdGlvbk5hbWU6IFNlY3Rpb24pID0+IHtcbiAgICBpZiAoZ3JpZFNlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgcmVuZGVyU2VjdGlvbihncmlkU2VjdGlvbiwgc2VjdGlvbk5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmVTZWN0aW9uKHNlY3Rpb25OYW1lKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGVhZFNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10gPSBbXTtcbiAgY29uc3QgYm9keVNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10gPSBbXTtcbiAgY29uc3QgZm9vdFNlY3Rpb246IFJvd0RldGFpbE5ldzxEZXRhaWxOZXc+W10gPSBbXTtcbiAgY29uc3QgY29sdW1uR3JvdXBzU2VjdGlvbjogUm93RGV0YWlsTmV3PERldGFpbE5ldz5bXSA9IFtdO1xuXG4gIEFyci5lYWNoKGdyaWQsIChyb3cpID0+IHtcbiAgICBzd2l0Y2ggKHJvdy5zZWN0aW9uKSB7XG4gICAgICBjYXNlICd0aGVhZCc6XG4gICAgICAgIGhlYWRTZWN0aW9uLnB1c2gocm93KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Ym9keSc6XG4gICAgICAgIGJvZHlTZWN0aW9uLnB1c2gocm93KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Zm9vdCc6XG4gICAgICAgIGZvb3RTZWN0aW9uLnB1c2gocm93KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICAgIGNvbHVtbkdyb3Vwc1NlY3Rpb24ucHVzaChyb3cpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0pO1xuXG4gIHJlbmRlck9yUmVtb3ZlU2VjdGlvbihjb2x1bW5Hcm91cHNTZWN0aW9uLCAnY29sZ3JvdXAnKTtcbiAgcmVuZGVyT3JSZW1vdmVTZWN0aW9uKGhlYWRTZWN0aW9uLCAndGhlYWQnKTtcbiAgcmVuZGVyT3JSZW1vdmVTZWN0aW9uKGJvZHlTZWN0aW9uLCAndGJvZHknKTtcbiAgcmVuZGVyT3JSZW1vdmVTZWN0aW9uKGZvb3RTZWN0aW9uLCAndGZvb3QnKTtcblxuICByZXR1cm4ge1xuICAgIG5ld1Jvd3MsXG4gICAgbmV3Q2VsbHNcbiAgfTtcbn07XG5cbmNvbnN0IGNvcHkgPSA8VCBleHRlbmRzIERldGFpbD4gKGdyaWQ6IFJvd0RldGFpbE5ldzxUPltdKTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PltdID0+IEFyci5tYXAoZ3JpZCwgKHJvdykgPT4ge1xuICAvLyBTaGFsbG93IGNvcHkgdGhlIHJvdyBlbGVtZW50XG4gIGNvbnN0IHRyID0gUmVwbGljYXRpb24uc2hhbGxvdyhyb3cuZWxlbWVudCk7XG4gIEFyci5lYWNoKHJvdy5jZWxscywgKGNlbGwpID0+IHtcbiAgICBjb25zdCBjbG9uZWRDZWxsID0gUmVwbGljYXRpb24uZGVlcChjZWxsLmVsZW1lbnQpO1xuICAgIHNldElmTm90KGNsb25lZENlbGwsICdjb2xzcGFuJywgY2VsbC5jb2xzcGFuLCAxKTtcbiAgICBzZXRJZk5vdChjbG9uZWRDZWxsLCAncm93c3BhbicsIGNlbGwucm93c3BhbiwgMSk7XG4gICAgSW5zZXJ0LmFwcGVuZCh0ciwgY2xvbmVkQ2VsbCk7XG4gIH0pO1xuICByZXR1cm4gdHI7XG59KTtcblxuZXhwb3J0IHtcbiAgcmVuZGVyLFxuICBjb3B5XG59O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgQ3NzLCBJbnNlcnQsIEluc2VydEFsbCwgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJPcHRpb25zIHtcbiAgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBjb2xHcm91cHM6IGJvb2xlYW47XG59XG5cbmNvbnN0IERlZmF1bHRSZW5kZXJPcHRpb25zOiBSZW5kZXJPcHRpb25zID0ge1xuICBzdHlsZXM6IHtcbiAgICAnYm9yZGVyLWNvbGxhcHNlJzogJ2NvbGxhcHNlJyxcbiAgICAnd2lkdGgnOiAnMTAwJSdcbiAgfSxcbiAgYXR0cmlidXRlczoge1xuICAgIGJvcmRlcjogJzEnXG4gIH0sXG4gIGNvbEdyb3VwczogZmFsc2Vcbn07XG5cbmNvbnN0IHRhYmxlSGVhZGVyQ2VsbCA9ICgpID0+IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCd0aCcpO1xuXG5jb25zdCB0YWJsZUNlbGwgPSAoKSA9PiBTdWdhckVsZW1lbnQuZnJvbVRhZygndGQnKTtcblxuY29uc3QgdGFibGVDb2x1bW4gPSAoKSA9PiBTdWdhckVsZW1lbnQuZnJvbVRhZygnY29sJyk7XG5cbmNvbnN0IGNyZWF0ZVJvdyA9IChjb2x1bW5zOiBudW1iZXIsIHJvd0hlYWRlcnM6IG51bWJlciwgY29sdW1uSGVhZGVyczogbnVtYmVyLCByb3dJbmRleDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHRyID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ3RyJyk7XG4gIGZvciAobGV0IGogPSAwOyBqIDwgY29sdW1uczsgaisrKSB7XG5cbiAgICBjb25zdCB0ZCA9IHJvd0luZGV4IDwgcm93SGVhZGVycyB8fCBqIDwgY29sdW1uSGVhZGVycyA/IHRhYmxlSGVhZGVyQ2VsbCgpIDogdGFibGVDZWxsKCk7XG4gICAgaWYgKGogPCBjb2x1bW5IZWFkZXJzKSB7XG4gICAgICBBdHRyaWJ1dGUuc2V0KHRkLCAnc2NvcGUnLCAncm93Jyk7XG4gICAgfVxuICAgIGlmIChyb3dJbmRleCA8IHJvd0hlYWRlcnMpIHtcbiAgICAgIEF0dHJpYnV0ZS5zZXQodGQsICdzY29wZScsICdjb2wnKTtcbiAgICB9XG5cbiAgICAvLyBOb3RlLCB0aGlzIGlzIGEgcGxhY2Vob2xkZXIgc28gdGhhdCB0aGUgY2VsbHMgaGF2ZSBoZWlnaHQuIFRoZSB1bmljb2RlIGNoYXJhY3RlciBkaWRuJ3Qgd29yayBpbiBJRTEwLlxuICAgIEluc2VydC5hcHBlbmQodGQsIFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdicicpKTtcbiAgICBJbnNlcnQuYXBwZW5kKHRyLCB0ZCk7XG4gIH1cbiAgcmV0dXJuIHRyO1xufTtcblxuY29uc3QgY3JlYXRlR3JvdXBSb3cgPSAoY29sdW1uczogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGNvbHVtbkdyb3VwID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ2NvbGdyb3VwJyk7XG5cbiAgQXJyLnJhbmdlKGNvbHVtbnMsICgpID0+XG4gICAgSW5zZXJ0LmFwcGVuZChjb2x1bW5Hcm91cCwgdGFibGVDb2x1bW4oKSlcbiAgKTtcblxuICByZXR1cm4gY29sdW1uR3JvdXA7XG59O1xuXG5jb25zdCBjcmVhdGVSb3dzID0gKHJvd3M6IG51bWJlciwgY29sdW1uczogbnVtYmVyLCByb3dIZWFkZXJzOiBudW1iZXIsIGNvbHVtbkhlYWRlcnM6IG51bWJlcikgPT5cbiAgQXJyLnJhbmdlKHJvd3MsIChyKSA9PiBjcmVhdGVSb3coY29sdW1ucywgcm93SGVhZGVycywgY29sdW1uSGVhZGVycywgcikpO1xuXG5jb25zdCByZW5kZXIgPSAocm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIHJvd0hlYWRlcnM6IG51bWJlciwgY29sdW1uSGVhZGVyczogbnVtYmVyLCBoZWFkZXJUeXBlOiBzdHJpbmcsIHJlbmRlck9wdHM6IFJlbmRlck9wdGlvbnMgPSBEZWZhdWx0UmVuZGVyT3B0aW9ucyk6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiA9PiB7XG4gIGNvbnN0IHRhYmxlID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ3RhYmxlJyk7XG4gIGNvbnN0IHJvd0hlYWRlcnNHb0luVGhlYWQgPSBoZWFkZXJUeXBlICE9PSAnY2VsbHMnO1xuXG4gIENzcy5zZXRBbGwodGFibGUsIHJlbmRlck9wdHMuc3R5bGVzKTtcbiAgQXR0cmlidXRlLnNldEFsbCh0YWJsZSwgcmVuZGVyT3B0cy5hdHRyaWJ1dGVzKTtcblxuICBpZiAocmVuZGVyT3B0cy5jb2xHcm91cHMpIHtcbiAgICBJbnNlcnQuYXBwZW5kKHRhYmxlLCBjcmVhdGVHcm91cFJvdyhjb2x1bW5zKSk7XG4gIH1cblxuICBjb25zdCBhY3R1YWxSb3dIZWFkZXJzID0gTWF0aC5taW4ocm93cywgcm93SGVhZGVycyk7XG5cbiAgaWYgKHJvd0hlYWRlcnNHb0luVGhlYWQgJiYgcm93SGVhZGVycyA+IDApIHtcbiAgICBjb25zdCB0aGVhZCA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCd0aGVhZCcpO1xuICAgIEluc2VydC5hcHBlbmQodGFibGUsIHRoZWFkKTtcblxuICAgIGNvbnN0IHRoZWFkUm93SGVhZGVycyA9IGhlYWRlclR5cGUgPT09ICdzZWN0aW9uQ2VsbHMnID8gYWN0dWFsUm93SGVhZGVycyA6IDA7XG4gICAgY29uc3QgdGhlYWRSb3dzID0gY3JlYXRlUm93cyhyb3dIZWFkZXJzLCBjb2x1bW5zLCB0aGVhZFJvd0hlYWRlcnMsIGNvbHVtbkhlYWRlcnMpO1xuICAgIEluc2VydEFsbC5hcHBlbmQodGhlYWQsIHRoZWFkUm93cyk7XG4gIH1cblxuICBjb25zdCB0Ym9keSA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCd0Ym9keScpO1xuICBJbnNlcnQuYXBwZW5kKHRhYmxlLCB0Ym9keSk7XG5cbiAgY29uc3QgbnVtUm93cyA9IHJvd0hlYWRlcnNHb0luVGhlYWQgPyByb3dzIC0gYWN0dWFsUm93SGVhZGVycyA6IHJvd3M7XG4gIGNvbnN0IG51bVJvd0hlYWRlcnMgPSByb3dIZWFkZXJzR29JblRoZWFkID8gMCA6IHJvd0hlYWRlcnM7XG4gIGNvbnN0IHRib2R5Um93cyA9IGNyZWF0ZVJvd3MobnVtUm93cywgY29sdW1ucywgbnVtUm93SGVhZGVycywgY29sdW1uSGVhZGVycyk7XG5cbiAgSW5zZXJ0QWxsLmFwcGVuZCh0Ym9keSwgdGJvZHlSb3dzKTtcbiAgcmV0dXJuIHRhYmxlO1xufTtcblxuZXhwb3J0IHsgcmVuZGVyIH07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0ICogYXMgU3RydWN0cyBmcm9tICcuLi9hcGkvU3RydWN0cyc7XG5pbXBvcnQgdHlwZSB7IFRhYmxlU2VjdGlvbiB9IGZyb20gJy4uL2FwaS9UYWJsZVNlY3Rpb24nO1xuaW1wb3J0IHsgaXNIZWFkZXJDZWxsLCBpc0hlYWRlckNlbGxzIH0gZnJvbSAnLi4vbG9va3VwL1R5cGUnO1xuaW1wb3J0ICogYXMgR3JpZFJvdyBmcm9tICcuLi9tb2RlbC9HcmlkUm93JztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENvbXBFbG0sIFN1YnN0IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxudHlwZSBDZWxsUmVwbGFjZXIgPSAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0ZTogU3Vic3QpID0+IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD47XG50eXBlIFNjb3BlR2VuZXJhdG9yID0gKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpID0+IE9wdGlvbmFsPG51bGwgfCBzdHJpbmc+O1xudHlwZSBSZXBsYWNlUHJlZGljYXRlID0gKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIpID0+IGJvb2xlYW47XG5cbmNvbnN0IG5vdEluU3RhcnRSb3cgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCByb3dJbmRleDogbnVtYmVyLCBjb2xJbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtKTogYm9vbGVhbiA9PlxuICBHcmlkUm93LmdldENlbGxFbGVtZW50KGdyaWRbcm93SW5kZXhdLCBjb2xJbmRleCkgIT09IHVuZGVmaW5lZCAmJiAocm93SW5kZXggPiAwICYmIGNvbXBhcmF0b3IoR3JpZFJvdy5nZXRDZWxsRWxlbWVudChncmlkW3Jvd0luZGV4IC0gMV0sIGNvbEluZGV4KSwgR3JpZFJvdy5nZXRDZWxsRWxlbWVudChncmlkW3Jvd0luZGV4XSwgY29sSW5kZXgpKSk7XG5cbmNvbnN0IG5vdEluU3RhcnRDb2x1bW4gPSAocm93OiBTdHJ1Y3RzLlJvd0NlbGxzLCBpbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtKTogYm9vbGVhbiA9PlxuICBpbmRleCA+IDAgJiYgY29tcGFyYXRvcihHcmlkUm93LmdldENlbGxFbGVtZW50KHJvdywgaW5kZXggLSAxKSwgR3JpZFJvdy5nZXRDZWxsRWxlbWVudChyb3csIGluZGV4KSk7XG5cbi8vIFRoaXMgY2hlY2tzIGZvciBjZWxscyB0aGF0IGFyZW4ndCBpbiB0aGUgXCJzdGFydFwiIHBvc2l0aW9uIGFzIHRoZSBtb2RlbCB3aWxsIGNyZWF0ZSBkdXBsaWNhdGUgZWxlbWVudCByZWZlcmVuY2VzIGZvclxuLy8gZWFjaCBjb2x1bW4vcm93IHRoYXQgdGhlIGNlbGwgc3BhbnMuIEFzIGFuIGV4YW1wbGUsIGZvciBhIG1lcmdlZCBjZWxsIHdpdGggcm93c3Bhbj1cIjJcIiwgdGhlIGNlbGwgaW4gdGhlIHNlY29uZCByb3cgaXMgYSBkdXBsaWNhdGVcbi8vIG9mIHRoZSBjZWxsIGluIHRoZSBmaXJzdCByb3cuXG5jb25zdCBpc0R1cGxpY2F0ZWRDZWxsID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgcm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciwgY29tcGFyYXRvcjogQ29tcEVsbSk6IGJvb2xlYW4gPT5cbiAgbm90SW5TdGFydFJvdyhncmlkLCByb3dJbmRleCwgY29sSW5kZXgsIGNvbXBhcmF0b3IpIHx8IG5vdEluU3RhcnRDb2x1bW4oZ3JpZFtyb3dJbmRleF0sIGNvbEluZGV4LCBjb21wYXJhdG9yKTtcblxuY29uc3Qgcm93UmVwbGFjZXJQcmVkaWNhdGUgPSAodGFyZ2V0Um93OiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+LCBjb2x1bW5IZWFkZXJzOiBib29sZWFuW10pOiBSZXBsYWNlUHJlZGljYXRlID0+IHtcbiAgY29uc3QgZW50aXJlVGFibGVJc0hlYWRlciA9IEFyci5mb3JhbGwoY29sdW1uSGVhZGVycywgRnVuLmlkZW50aXR5KSAmJiBpc0hlYWRlckNlbGxzKHRhcmdldFJvdy5jZWxscyk7XG4gIHJldHVybiBlbnRpcmVUYWJsZUlzSGVhZGVyID8gRnVuLmFsd2F5cyA6IChjZWxsLCBfcm93SW5kZXgsIGNvbEluZGV4KSA9PiB7XG4gICAgY29uc3QgdHlwZSA9IFN1Z2FyTm9kZS5uYW1lKGNlbGwuZWxlbWVudCk7XG4gICAgcmV0dXJuICEodHlwZSA9PT0gJ3RoJyAmJiBjb2x1bW5IZWFkZXJzW2NvbEluZGV4XSk7XG4gIH07XG59O1xuXG5jb25zdCBjb2x1bW5SZXBsYWNlUHJlZGljYXRlID0gKHRhcmdldENvbHVtbjogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCByb3dIZWFkZXJzOiBib29sZWFuW10pOiBSZXBsYWNlUHJlZGljYXRlID0+IHtcbiAgY29uc3QgZW50aXJlVGFibGVJc0hlYWRlciA9IEFyci5mb3JhbGwocm93SGVhZGVycywgRnVuLmlkZW50aXR5KSAmJiBpc0hlYWRlckNlbGxzKHRhcmdldENvbHVtbik7XG4gIHJldHVybiBlbnRpcmVUYWJsZUlzSGVhZGVyID8gRnVuLmFsd2F5cyA6IChjZWxsLCByb3dJbmRleCwgX2NvbEluZGV4KSA9PiB7XG4gICAgY29uc3QgdHlwZSA9IFN1Z2FyTm9kZS5uYW1lKGNlbGwuZWxlbWVudCk7XG4gICAgcmV0dXJuICEodHlwZSA9PT0gJ3RoJyAmJiByb3dIZWFkZXJzW3Jvd0luZGV4XSk7XG4gIH07XG59O1xuXG5jb25zdCBkZXRlcm1pbmVTY29wZSA9IChhcHBseVNjb3BlOiBib29sZWFuLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBuZXdTY29wZTogJ3JvdycgfCAnY29sJywgaXNJbkhlYWRlcjogYm9vbGVhbik6IHN0cmluZyB8IG51bGwgPT4ge1xuICBjb25zdCBoYXNTcGFuID0gKHNjb3BlOiBzdHJpbmcpID0+IHNjb3BlID09PSAncm93JyA/IENlbGxVdGlscy5oYXNSb3dzcGFuKGNlbGwpIDogQ2VsbFV0aWxzLmhhc0NvbHNwYW4oY2VsbCk7XG4gIGNvbnN0IGdldFNjb3BlID0gKHNjb3BlOiBzdHJpbmcpID0+IGhhc1NwYW4oc2NvcGUpID8gYCR7c2NvcGV9Z3JvdXBgIDogc2NvcGU7XG5cbiAgaWYgKGFwcGx5U2NvcGUpIHtcbiAgICByZXR1cm4gaXNIZWFkZXJDZWxsKGNlbGwpID8gZ2V0U2NvcGUobmV3U2NvcGUpIDogbnVsbDtcbiAgfSBlbHNlIGlmIChpc0luSGVhZGVyICYmIGlzSGVhZGVyQ2VsbChjZWxsKSkge1xuICAgIC8vIFRoZSBjZWxsIGlzIHN0aWxsIGluIGEgaGVhZGVyIHJvdy9jb2x1bW4gc28gZW5zdXJlIHRoZSByaWdodCBzY29wZSBpcyByZXZlcnRlZCB0b1xuICAgIGNvbnN0IG9wcG9zaXRlU2NvcGUgPSBuZXdTY29wZSA9PT0gJ3JvdycgPyAnY29sJyA6ICdyb3cnO1xuICAgIHJldHVybiBnZXRTY29wZShvcHBvc2l0ZVNjb3BlKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBObyBsb25nZXIgYSBoZWFkZXIgc28gZW5zdXJlIHRoZSBzY29wZSBpcyByZW1vdmVkXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmNvbnN0IHJvd1Njb3BlR2VuZXJhdG9yID0gKGFwcGx5U2NvcGU6IGJvb2xlYW4sIGNvbHVtbkhlYWRlcnM6IGJvb2xlYW5bXSkgPT4gKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIHJvd0luZGV4OiBudW1iZXIsIGNvbHVtbkluZGV4OiBudW1iZXIpID0+XG4gIE9wdGlvbmFsLnNvbWUoZGV0ZXJtaW5lU2NvcGUoYXBwbHlTY29wZSwgY2VsbC5lbGVtZW50LCAnY29sJywgY29sdW1uSGVhZGVyc1tjb2x1bW5JbmRleF0pKTtcblxuY29uc3QgY29sdW1uU2NvcGVHZW5lcmF0b3IgPSAoYXBwbHlTY29wZTogYm9vbGVhbiwgcm93SGVhZGVyczogYm9vbGVhbltdKSA9PiAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3PEhUTUxUYWJsZUNlbGxFbGVtZW50Piwgcm93SW5kZXg6IG51bWJlcikgPT5cbiAgT3B0aW9uYWwuc29tZShkZXRlcm1pbmVTY29wZShhcHBseVNjb3BlLCBjZWxsLmVsZW1lbnQsICdyb3cnLCByb3dIZWFkZXJzW3Jvd0luZGV4XSkpO1xuXG5jb25zdCByZXBsYWNlID0gKGNlbGw6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGU6IFN1YnN0KSA9PlxuICBTdHJ1Y3RzLmVsZW1lbnRuZXcoc3Vic3RpdHV0ZShjZWxsLmVsZW1lbnQsIGNvbXBhcmF0b3IpLCB0cnVlLCBjZWxsLmlzTG9ja2VkKTtcblxuY29uc3QgcmVwbGFjZUluID0gKFxuICBncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sXG4gIHRhcmdldHM6IFN0cnVjdHMuRWxlbWVudE5ldzxIVE1MVGFibGVDZWxsRWxlbWVudD5bXSxcbiAgY29tcGFyYXRvcjogQ29tcEVsbSxcbiAgc3Vic3RpdHV0ZTogU3Vic3QsXG4gIHJlcGxhY2VyOiBDZWxsUmVwbGFjZXIsXG4gIGdlblNjb3BlOiBTY29wZUdlbmVyYXRvcixcbiAgc2hvdWxkUmVwbGFjZTogUmVwbGFjZVByZWRpY2F0ZVxuKTogU3RydWN0cy5Sb3dDZWxsc1tdID0+IHtcbiAgY29uc3QgaXNUYXJnZXQgPSAoY2VsbDogU3RydWN0cy5FbGVtZW50TmV3KTogY2VsbCBpcyBTdHJ1Y3RzLkVsZW1lbnROZXc8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+ID0+IHtcbiAgICByZXR1cm4gQXJyLmV4aXN0cyh0YXJnZXRzLCAodGFyZ2V0KSA9PiB7XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihjZWxsLmVsZW1lbnQsIHRhcmdldC5lbGVtZW50KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gQXJyLm1hcChncmlkLCAocm93LCByb3dJbmRleCkgPT4ge1xuICAgIHJldHVybiBHcmlkUm93Lm1hcENlbGxzKHJvdywgKGNlbGwsIGNvbEluZGV4KSA9PiB7XG4gICAgICBpZiAoaXNUYXJnZXQoY2VsbCkpIHtcbiAgICAgICAgY29uc3QgbmV3Q2VsbCA9IHNob3VsZFJlcGxhY2UoY2VsbCwgcm93SW5kZXgsIGNvbEluZGV4KSA/IHJlcGxhY2VyKGNlbGwsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGUpIDogY2VsbDtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzY29wZVxuICAgICAgICBnZW5TY29wZShuZXdDZWxsLCByb3dJbmRleCwgY29sSW5kZXgpLmVhY2goKHNjb3BlKSA9PiB7XG4gICAgICAgICAgQXR0cmlidXRlLnNldE9wdGlvbnMobmV3Q2VsbC5lbGVtZW50LCB7IHNjb3BlOiBPcHRpb25hbC5mcm9tKHNjb3BlKSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXdDZWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNlbGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0Q29sdW1uQ2VsbHMgPSAocm93czogU3RydWN0cy5Sb3dDZWxsczxIVE1MVGFibGVSb3dFbGVtZW50PltdLCBjb2x1bW5JbmRleDogbnVtYmVyLCBjb21wYXJhdG9yOiBDb21wRWxtKSA9PlxuICBBcnIuYmluZChyb3dzLCAocm93LCBpKSA9PiB7XG4gICAgLy8gY2hlY2sgaWYgYWxyZWFkeSBhZGRlZC5cbiAgICByZXR1cm4gaXNEdXBsaWNhdGVkQ2VsbChyb3dzLCBpLCBjb2x1bW5JbmRleCwgY29tcGFyYXRvcikgPyBbXSA6IFsgR3JpZFJvdy5nZXRDZWxsKHJvdywgY29sdW1uSW5kZXgpIF07XG4gIH0pO1xuXG5jb25zdCBnZXRSb3dDZWxscyA9IChyb3dzOiBTdHJ1Y3RzLlJvd0NlbGxzPEhUTUxUYWJsZVJvd0VsZW1lbnQ+W10sIHJvd0luZGV4OiBudW1iZXIsIGNvbXBhcmF0b3I6IENvbXBFbG0pID0+IHtcbiAgY29uc3QgdGFyZ2V0Um93ID0gcm93c1tyb3dJbmRleF07XG4gIHJldHVybiBBcnIuYmluZCh0YXJnZXRSb3cuY2VsbHMsIChpdGVtLCBpKSA9PiB7XG4gICAgLy8gQ2hlY2sgdGhhdCB3ZSBoYXZlbid0IGFscmVhZHkgYWRkZWQgdGhpcyBvbmUuXG4gICAgcmV0dXJuIGlzRHVwbGljYXRlZENlbGwocm93cywgcm93SW5kZXgsIGksIGNvbXBhcmF0b3IpID8gW10gOiBbIGl0ZW0gXTtcbiAgfSk7XG59O1xuXG5jb25zdCByZXBsYWNlQ29sdW1uID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlciwgYXBwbHlTY29wZTogYm9vbGVhbiwgY29tcGFyYXRvcjogQ29tcEVsbSwgc3Vic3RpdHV0aW9uOiBTdWJzdCk6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICByZXBsYWNlQ29sdW1ucyhncmlkLCBbIGluZGV4IF0sIGFwcGx5U2NvcGUsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbik7XG5cbmNvbnN0IHJlcGxhY2VDb2x1bW5zID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXhlczogbnVtYmVyW10sIGFwcGx5U2NvcGU6IGJvb2xlYW4sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICAvLyBNYWtlIHRoaXMgZWZmaWNpZW50IGxhdGVyLlxuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgY29uc3QgdGFyZ2V0cyA9IEFyci5iaW5kKGluZGV4ZXMsIChpbmRleCkgPT4gZ2V0Q29sdW1uQ2VsbHMocm93cywgaW5kZXgsIGNvbXBhcmF0b3IpKTtcbiAgY29uc3Qgcm93SGVhZGVycyA9IEFyci5tYXAocm93cywgKHJvdykgPT4gaXNIZWFkZXJDZWxscyhyb3cuY2VsbHMpKTtcblxuICBjb25zdCBzaG91bGRSZXBsYWNlQ2VsbCA9IGNvbHVtblJlcGxhY2VQcmVkaWNhdGUodGFyZ2V0cywgcm93SGVhZGVycyk7XG4gIGNvbnN0IHNjb3BlR2VuZXJhdG9yID0gY29sdW1uU2NvcGVHZW5lcmF0b3IoYXBwbHlTY29wZSwgcm93SGVhZGVycyk7XG5cbiAgcmV0dXJuIHJlcGxhY2VJbihncmlkLCB0YXJnZXRzLCBjb21wYXJhdG9yLCBzdWJzdGl0dXRpb24sIHJlcGxhY2UsIHNjb3BlR2VuZXJhdG9yLCBzaG91bGRSZXBsYWNlQ2VsbCk7XG59O1xuXG5jb25zdCByZXBsYWNlUm93ID0gKGdyaWQ6IFN0cnVjdHMuUm93Q2VsbHNbXSwgaW5kZXg6IG51bWJlciwgc2VjdGlvbjogU3RydWN0cy5TZWN0aW9uLCBhcHBseVNjb3BlOiBib29sZWFuLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0LCB0YWJsZVNlY3Rpb246IFRhYmxlU2VjdGlvbik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PlxuICByZXBsYWNlUm93cyhncmlkLCBbIGluZGV4IF0sIHNlY3Rpb24sIGFwcGx5U2NvcGUsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbiwgdGFibGVTZWN0aW9uKTtcblxuY29uc3QgcmVwbGFjZVJvd3MgPSAoZ3JpZDogU3RydWN0cy5Sb3dDZWxsc1tdLCBpbmRleGVzOiBudW1iZXJbXSwgc2VjdGlvbjogU3RydWN0cy5TZWN0aW9uLCBhcHBseVNjb3BlOiBib29sZWFuLCBjb21wYXJhdG9yOiBDb21wRWxtLCBzdWJzdGl0dXRpb246IFN1YnN0LCB0YWJsZVNlY3Rpb246IFRhYmxlU2VjdGlvbik6IFN0cnVjdHMuUm93Q2VsbHNbXSA9PiB7XG4gIGNvbnN0IHsgY29scywgcm93cyB9ID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCk7XG4gIGNvbnN0IHRhcmdldFJvdyA9IHJvd3NbaW5kZXhlc1swXV07XG4gIGNvbnN0IHRhcmdldHMgPSBBcnIuYmluZChpbmRleGVzLCAoaW5kZXgpID0+IGdldFJvd0NlbGxzKHJvd3MsIGluZGV4LCBjb21wYXJhdG9yKSk7XG4gIGNvbnN0IGNvbHVtbkhlYWRlcnMgPSBBcnIubWFwKHRhcmdldFJvdy5jZWxscywgKF9jZWxsLCBpbmRleCkgPT4gaXNIZWFkZXJDZWxscyhnZXRDb2x1bW5DZWxscyhyb3dzLCBpbmRleCwgY29tcGFyYXRvcikpKTtcblxuICAvLyBUcmFuc2Zvcm0gYW5kIHJlcGxhY2UgdGhlIHRhcmdldCByb3dcbiAgLy8gVE9ETzogVElOWS03Nzc2OiBUaGlzIGRvZXNuJ3QgZGVhbCB3aXRoIHJvd3NwYW5zIHdoaWNoIGNhbiBicmVhayB0aGUgbGF5b3V0IHdoZW4gbW92aW5nIHRvIGEgbmV3IHNlY3Rpb25cbiAgY29uc3QgbmV3Um93cyA9IFsgLi4ucm93cyBdO1xuICBBcnIuZWFjaChpbmRleGVzLCAoaW5kZXgpID0+IHtcbiAgICBuZXdSb3dzW2luZGV4XSA9IHRhYmxlU2VjdGlvbi50cmFuc2Zvcm1Sb3cocm93c1tpbmRleF0sIHNlY3Rpb24pO1xuICB9KTtcbiAgY29uc3QgbmV3R3JpZCA9IFsgLi4uY29scywgLi4ubmV3Um93cyBdO1xuXG4gIGNvbnN0IHNob3VsZFJlcGxhY2VDZWxsID0gcm93UmVwbGFjZXJQcmVkaWNhdGUodGFyZ2V0Um93LCBjb2x1bW5IZWFkZXJzKTtcbiAgY29uc3Qgc2NvcGVHZW5lcmF0b3IgPSByb3dTY29wZUdlbmVyYXRvcihhcHBseVNjb3BlLCBjb2x1bW5IZWFkZXJzKTtcblxuICByZXR1cm4gcmVwbGFjZUluKG5ld0dyaWQsIHRhcmdldHMsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbiwgdGFibGVTZWN0aW9uLnRyYW5zZm9ybUNlbGwsIHNjb3BlR2VuZXJhdG9yLCBzaG91bGRSZXBsYWNlQ2VsbCk7XG59O1xuXG5jb25zdCByZXBsYWNlQ2VsbCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQsIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT5cbiAgcmVwbGFjZUNlbGxzKGdyaWQsIFsgZGV0YWlsIF0sIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbik7XG5cbmNvbnN0IHJlcGxhY2VDZWxscyA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10sIGRldGFpbHM6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGNvbXBhcmF0b3I6IENvbXBFbG0sIHN1YnN0aXR1dGlvbjogU3Vic3QpOiBTdHJ1Y3RzLlJvd0NlbGxzW10gPT4ge1xuICBjb25zdCByb3dzID0gR3JpZFJvdy5leHRyYWN0R3JpZERldGFpbHMoZ3JpZCkucm93cztcbiAgY29uc3QgdGFyZ2V0Q2VsbHMgPSBBcnIubWFwKGRldGFpbHMsIChkZXRhaWwpID0+IEdyaWRSb3cuZ2V0Q2VsbChyb3dzW2RldGFpbC5yb3ddLCBkZXRhaWwuY29sdW1uKSk7XG4gIHJldHVybiByZXBsYWNlSW4oZ3JpZCwgdGFyZ2V0Q2VsbHMsIGNvbXBhcmF0b3IsIHN1YnN0aXR1dGlvbiwgcmVwbGFjZSwgT3B0aW9uYWwubm9uZSwgRnVuLmFsd2F5cyk7XG59O1xuXG5leHBvcnQge1xuICByZXBsYWNlQ29sdW1uLFxuICByZXBsYWNlQ29sdW1ucyxcbiAgcmVwbGFjZVJvdyxcbiAgcmVwbGFjZVJvd3MsXG4gIHJlcGxhY2VDZWxsLFxuICByZXBsYWNlQ2VsbHNcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFJlc2l6ZUJlaGF2aW91ciB9IGZyb20gJy4uL2FwaS9SZXNpemVCZWhhdmlvdXInO1xuaW1wb3J0IHR5cGUgeyBEZXRhaWwsIFJvd0RldGFpbCB9IGZyb20gJy4uL2FwaS9TdHJ1Y3RzJztcbmltcG9ydCB0eXBlIHsgVGFibGVTaXplIH0gZnJvbSAnLi4vYXBpL1RhYmxlU2l6ZSc7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuLi9hcGkvV2FyZWhvdXNlJztcbmltcG9ydCAqIGFzIERlbHRhcyBmcm9tICcuLi9jYWxjL0RlbHRhcyc7XG5pbXBvcnQgKiBhcyBDZWxsVXRpbHMgZnJvbSAnLi4vdXRpbC9DZWxsVXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBDZWxsRWxlbWVudCB9IGZyb20gJy4uL3V0aWwvVGFibGVUeXBlcyc7XG5cbmltcG9ydCAqIGFzIENvbHVtblNpemVzIGZyb20gJy4vQ29sdW1uU2l6ZXMnO1xuaW1wb3J0ICogYXMgUmVjYWxjdWxhdGlvbnMgZnJvbSAnLi9SZWNhbGN1bGF0aW9ucyc7XG5pbXBvcnQgKiBhcyBTaXplcyBmcm9tICcuL1NpemVzJztcblxuY29uc3Qgc3VtVXAgPSAobmV3U2l6ZTogbnVtYmVyW10pID0+IEFyci5mb2xkcihuZXdTaXplLCAoYiwgYSkgPT4gYiArIGEsIDApO1xuXG5jb25zdCByZWNhbGN1bGF0ZSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgd2lkdGhzOiBudW1iZXJbXSk6IFJlY2FsY3VsYXRpb25zLkNlbGxXaWR0aFNwYW48Q2VsbEVsZW1lbnQ+W10gPT4ge1xuICBpZiAoV2FyZWhvdXNlLmhhc0NvbHVtbnMod2FyZWhvdXNlKSkge1xuICAgIHJldHVybiBSZWNhbGN1bGF0aW9ucy5yZWNhbGN1bGF0ZVdpZHRoRm9yQ29sdW1ucyh3YXJlaG91c2UsIHdpZHRocyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFJlY2FsY3VsYXRpb25zLnJlY2FsY3VsYXRlV2lkdGhGb3JDZWxscyh3YXJlaG91c2UsIHdpZHRocyk7XG4gIH1cbn07XG5cbmNvbnN0IHJlY2FsY3VsYXRlQW5kQXBwbHkgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHdpZHRoczogbnVtYmVyW10sIHRhYmxlU2l6ZTogVGFibGVTaXplKTogdm9pZCA9PiB7XG4gIC8vIFNldCB0aGUgd2lkdGggb2YgZWFjaCBjZWxsIGJhc2VkIG9uIHRoZSBjb2x1bW4gd2lkdGhzXG4gIGNvbnN0IG5ld1NpemVzID0gcmVjYWxjdWxhdGUod2FyZWhvdXNlLCB3aWR0aHMpO1xuXG4gIEFyci5lYWNoKG5ld1NpemVzLCAoY2VsbCkgPT4ge1xuICAgIHRhYmxlU2l6ZS5zZXRFbGVtZW50V2lkdGgoY2VsbC5lbGVtZW50LCBjZWxsLndpZHRoKTtcbiAgfSk7XG59O1xuXG5jb25zdCBhZGp1c3RXaWR0aCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBkZWx0YTogbnVtYmVyLCBpbmRleDogbnVtYmVyLCByZXNpemluZzogUmVzaXplQmVoYXZpb3VyLCB0YWJsZVNpemU6IFRhYmxlU2l6ZSk6IHZvaWQgPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgY29uc3Qgc3RlcCA9IHRhYmxlU2l6ZS5nZXRDZWxsRGVsdGEoZGVsdGEpO1xuICBjb25zdCB3aWR0aHMgPSB0YWJsZVNpemUuZ2V0V2lkdGhzKHdhcmVob3VzZSwgdGFibGVTaXplKTtcbiAgY29uc3QgaXNMYXN0Q29sdW1uID0gaW5kZXggPT09IHdhcmVob3VzZS5ncmlkLmNvbHVtbnMgLSAxO1xuICBjb25zdCBjbGFtcGVkU3RlcCA9IHJlc2l6aW5nLmNsYW1wVGFibGVEZWx0YSh3aWR0aHMsIGluZGV4LCBzdGVwLCB0YWJsZVNpemUubWluQ2VsbFdpZHRoKCksIGlzTGFzdENvbHVtbik7XG5cbiAgLy8gQ2FsY3VsYXRlIGFsbCBvZiB0aGUgbmV3IHdpZHRocyBmb3IgY29sdW1uc1xuICBjb25zdCBkZWx0YXMgPSBEZWx0YXMuZGV0ZXJtaW5lKHdpZHRocywgaW5kZXgsIGNsYW1wZWRTdGVwLCB0YWJsZVNpemUsIHJlc2l6aW5nKTtcbiAgY29uc3QgbmV3V2lkdGhzID0gQXJyLm1hcChkZWx0YXMsIChkeCwgaSkgPT4gZHggKyB3aWR0aHNbaV0pO1xuXG4gIHJlY2FsY3VsYXRlQW5kQXBwbHkod2FyZWhvdXNlLCBuZXdXaWR0aHMsIHRhYmxlU2l6ZSk7XG4gIHJlc2l6aW5nLnJlc2l6ZVRhYmxlKHRhYmxlU2l6ZS5hZGp1c3RUYWJsZVdpZHRoLCBjbGFtcGVkU3RlcCwgaXNMYXN0Q29sdW1uKTtcbn07XG5cbmNvbnN0IGFkanVzdEhlaWdodCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBkZWx0YTogbnVtYmVyLCBpbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICBjb25zdCBoZWlnaHRzID0gQ29sdW1uU2l6ZXMuZ2V0UGl4ZWxIZWlnaHRzKHdhcmVob3VzZSwgdGFibGUpO1xuXG4gIGNvbnN0IG5ld0hlaWdodHMgPSBBcnIubWFwKGhlaWdodHMsIChkeSwgaSkgPT4gaW5kZXggPT09IGkgPyBNYXRoLm1heChkZWx0YSArIGR5LCBDZWxsVXRpbHMubWluSGVpZ2h0KCkpIDogZHkpO1xuXG4gIGNvbnN0IG5ld1Jvd1NpemVzID0gUmVjYWxjdWxhdGlvbnMubWF0Y2hSb3dIZWlnaHQod2FyZWhvdXNlLCBuZXdIZWlnaHRzKTtcblxuICBBcnIuZWFjaChuZXdSb3dTaXplcywgKHJvdykgPT4ge1xuICAgIFNpemVzLnNldEhlaWdodChyb3cuZWxlbWVudCwgcm93LmhlaWdodCk7XG4gIH0pO1xuXG4gIEFyci5lYWNoKFdhcmVob3VzZS5qdXN0Q2VsbHMod2FyZWhvdXNlKSwgKGNlbGwpID0+IHtcbiAgICBTaXplcy5yZW1vdmVIZWlnaHQoY2VsbC5lbGVtZW50KTtcbiAgfSk7XG5cbiAgY29uc3QgdG90YWwgPSBzdW1VcChuZXdIZWlnaHRzKTtcbiAgU2l6ZXMuc2V0SGVpZ2h0KHRhYmxlLCB0b3RhbCk7XG59O1xuXG4vLyBVc2luZyB0aGUgd2lkdGggb2YgdGhlIGFkZGVkL3JlbW92ZWQgY29sdW1ucyBnYXRoZXJlZCBvbiBleHRyYWN0aW9uIChwaXhlbERlbHRhKSwgZ2V0IGFuZCBhcHBseSB0aGUgbmV3IGNvbHVtbiBzaXplcyBhbmQgb3ZlcmFsbCB0YWJsZSB3aWR0aCBkZWx0YVxuY29uc3QgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzID0gPFQgZXh0ZW5kcyBEZXRhaWw+IChfdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgbGlzdDogUm93RGV0YWlsPFQ+W10sIGRldGFpbHM6IHsgcGl4ZWxEZWx0YTogbnVtYmVyIH0sIHRhYmxlU2l6ZTogVGFibGVTaXplLCByZXNpemVCZWhhdmlvdXI6IFJlc2l6ZUJlaGF2aW91cik6IHZvaWQgPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZ2VuZXJhdGUobGlzdCk7XG4gIGNvbnN0IHNpemVzID0gdGFibGVTaXplLmdldFdpZHRocyh3YXJlaG91c2UsIHRhYmxlU2l6ZSk7XG4gIGNvbnN0IHRhYmxlUGl4ZWxXaWR0aCA9IHRhYmxlU2l6ZS5waXhlbFdpZHRoKCk7XG5cbiAgY29uc3QgeyBuZXdTaXplcywgZGVsdGEgfSA9IHJlc2l6ZUJlaGF2aW91ci5jYWxjUmVkZXN0cmlidXRlZFdpZHRocyhzaXplcywgdGFibGVQaXhlbFdpZHRoLCBkZXRhaWxzLnBpeGVsRGVsdGEsIHRhYmxlU2l6ZS5pc1JlbGF0aXZlKTtcbiAgcmVjYWxjdWxhdGVBbmRBcHBseSh3YXJlaG91c2UsIG5ld1NpemVzLCB0YWJsZVNpemUpO1xuICB0YWJsZVNpemUuYWRqdXN0VGFibGVXaWR0aChkZWx0YSk7XG59O1xuXG4vLyBFbnN1cmUgdGhhdCB0aGUgd2lkdGggb2YgdGFibGUgY2VsbHMgbWF0Y2ggdGhlIHBhc3NlZCBpbiB0YWJsZSBpbmZvcm1hdGlvbi5cbmNvbnN0IGFkanVzdFdpZHRoVG8gPSA8VCBleHRlbmRzIERldGFpbD4gKF90YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBsaXN0OiBSb3dEZXRhaWw8VD5bXSwgX2luZm86IHsgfSwgdGFibGVTaXplOiBUYWJsZVNpemUpOiB2b2lkID0+IHtcbiAgY29uc3Qgd2FyZWhvdXNlID0gV2FyZWhvdXNlLmdlbmVyYXRlKGxpc3QpO1xuICBjb25zdCB3aWR0aHMgPSB0YWJsZVNpemUuZ2V0V2lkdGhzKHdhcmVob3VzZSwgdGFibGVTaXplKTtcblxuICByZWNhbGN1bGF0ZUFuZEFwcGx5KHdhcmVob3VzZSwgd2lkdGhzLCB0YWJsZVNpemUpO1xufTtcblxuZXhwb3J0IHsgYWRqdXN0V2lkdGgsIGFkanVzdEhlaWdodCwgYWRqdXN0V2lkdGhUbywgYWRqdXN0QW5kUmVkaXN0cmlidXRlV2lkdGhzIH07XG4iLCJpbXBvcnQgeyBBdHRyaWJ1dGUsIENzcywgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuY29uc3QgY29sID0gKGNvbHVtbjogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIpOiBTdWdhckVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+ID0+IHtcbiAgY29uc3QgYmFyID0gU3VnYXJFbGVtZW50LmZyb21UYWcoJ2RpdicpO1xuICBDc3Muc2V0QWxsKGJhciwge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGxlZnQ6IHggLSB3IC8gMiArICdweCcsXG4gICAgdG9wOiB5ICsgJ3B4JyxcbiAgICBoZWlnaHQ6IGggKyAncHgnLFxuICAgIHdpZHRoOiB3ICsgJ3B4J1xuICB9KTtcblxuICBBdHRyaWJ1dGUuc2V0QWxsKGJhciwgeyAnZGF0YS1tY2UtYm9ndXMnOiAnYWxsJywgJ2RhdGEtY29sdW1uJzogY29sdW1uLCAncm9sZSc6ICdwcmVzZW50YXRpb24nIH0pO1xuICByZXR1cm4gYmFyO1xufTtcblxuY29uc3Qgcm93ID0gKHI6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKTogU3VnYXJFbGVtZW50PEhUTUxEaXZFbGVtZW50PiA9PiB7XG4gIGNvbnN0IGJhciA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdkaXYnKTtcbiAgQ3NzLnNldEFsbChiYXIsIHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiB4ICsgJ3B4JyxcbiAgICB0b3A6IHkgLSBoIC8gMiArICdweCcsXG4gICAgaGVpZ2h0OiBoICsgJ3B4JyxcbiAgICB3aWR0aDogdyArICdweCdcbiAgfSk7XG5cbiAgQXR0cmlidXRlLnNldEFsbChiYXIsIHsgJ2RhdGEtbWNlLWJvZ3VzJzogJ2FsbCcsICdkYXRhLXJvdyc6IHIsICdyb2xlJzogJ3ByZXNlbnRhdGlvbicgfSk7XG4gIHJldHVybiBiYXI7XG59O1xuXG5leHBvcnQge1xuICBjb2wsXG4gIHJvd1xufTtcbiIsImltcG9ydCB7IERyYWdnZXIgfSBmcm9tICdAZXBob3gvZHJhZ3N0ZXInO1xuaW1wb3J0IHsgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyB0eXBlIEJpbmRhYmxlLCBFdmVudCwgRXZlbnRzIH0gZnJvbSAnQGVwaG94L3BvcmtidW4nO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDbGFzcywgQ29tcGFyZSwgQ29udGVudEVkaXRhYmxlLCBDc3MsIERvbUV2ZW50LCBTZWxlY3RvckZpbmQsIFN1Z2FyQm9keSwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSB7IFJlc2l6ZVdpcmUgfSBmcm9tICcuLi9hcGkvUmVzaXplV2lyZSc7XG5pbXBvcnQgKiBhcyBTdHlsZXMgZnJvbSAnLi4vc3R5bGUvU3R5bGVzJztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5cbmltcG9ydCB7IEJhck11dGF0aW9uIH0gZnJvbSAnLi9CYXJNdXRhdGlvbic7XG5pbXBvcnQgKiBhcyBCYXJzIGZyb20gJy4vQmFycyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhZ0FkanVzdEhlaWdodEV2ZW50IHtcbiAgcmVhZG9ubHkgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PjtcbiAgcmVhZG9ubHkgZGVsdGE6IG51bWJlcjtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhZ0FkanVzdFdpZHRoRXZlbnQge1xuICByZWFkb25seSB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+O1xuICByZWFkb25seSBkZWx0YTogbnVtYmVyO1xuICByZWFkb25seSBjb2x1bW46IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEcmFnQWRqdXN0RXZlbnRzIHtcbiAgcmVhZG9ubHkgcmVnaXN0cnk6IHtcbiAgICByZWFkb25seSBhZGp1c3RIZWlnaHQ6IEJpbmRhYmxlPERyYWdBZGp1c3RIZWlnaHRFdmVudD47XG4gICAgcmVhZG9ubHkgYWRqdXN0V2lkdGg6IEJpbmRhYmxlPERyYWdBZGp1c3RXaWR0aEV2ZW50PjtcbiAgICByZWFkb25seSBzdGFydEFkanVzdDogQmluZGFibGU8e30+O1xuICB9O1xuICByZWFkb25seSB0cmlnZ2VyOiB7XG4gICAgcmVhZG9ubHkgYWRqdXN0SGVpZ2h0OiAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgZGVsdGE6IG51bWJlciwgcm93OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgcmVhZG9ubHkgYWRqdXN0V2lkdGg6ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBkZWx0YTogbnVtYmVyLCBjb2x1bW46IG51bWJlcikgPT4gdm9pZDtcbiAgICByZWFkb25seSBzdGFydEFkanVzdDogKCkgPT4gdm9pZDtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXJNYW5hZ2VyIHtcbiAgcmVhZG9ubHkgZGVzdHJveTogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgcmVmcmVzaDogKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBvZmY6ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IGhpZGVCYXJzOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBzaG93QmFyczogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgZXZlbnRzOiBEcmFnQWRqdXN0RXZlbnRzWydyZWdpc3RyeSddO1xufVxuXG5jb25zdCByZXNpemVCYXJEcmFnZ2luZyA9IFN0eWxlcy5yZXNvbHZlKCdyZXNpemVyLWJhci1kcmFnZ2luZycpO1xuXG5leHBvcnQgY29uc3QgQmFyTWFuYWdlciA9ICh3aXJlOiBSZXNpemVXaXJlKTogQmFyTWFuYWdlciA9PiB7XG4gIGNvbnN0IG11dGF0aW9uID0gQmFyTXV0YXRpb24oKTtcbiAgY29uc3QgcmVzaXppbmcgPSBEcmFnZ2VyLnRyYW5zZm9ybShtdXRhdGlvbiwge30pO1xuXG4gIGxldCBob3ZlclRhYmxlID0gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4+KCk7XG5cbiAgY29uc3QgZ2V0UmVzaXplciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHR5cGU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBPcHRpb25hbC5mcm9tKEF0dHJpYnV0ZS5nZXQoZWxlbWVudCwgdHlwZSkpO1xuICB9O1xuXG4gIC8qIFJlcG9zaXRpb24gdGhlIGJhciBhcyB0aGUgdXNlciBkcmFncyAqL1xuICBtdXRhdGlvbi5ldmVudHMuZHJhZy5iaW5kKChldmVudCkgPT4ge1xuICAgIGdldFJlc2l6ZXIoZXZlbnQudGFyZ2V0LCAnZGF0YS1yb3cnKS5lYWNoKChfZGF0YVJvdykgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFJvdyA9IENlbGxVdGlscy5nZXRDc3NWYWx1ZShldmVudC50YXJnZXQsICd0b3AnKTtcbiAgICAgIENzcy5zZXQoZXZlbnQudGFyZ2V0LCAndG9wJywgY3VycmVudFJvdyArIGV2ZW50LnlEZWx0YSArICdweCcpO1xuICAgIH0pO1xuXG4gICAgZ2V0UmVzaXplcihldmVudC50YXJnZXQsICdkYXRhLWNvbHVtbicpLmVhY2goKF9kYXRhQ29sKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Q29sID0gQ2VsbFV0aWxzLmdldENzc1ZhbHVlKGV2ZW50LnRhcmdldCwgJ2xlZnQnKTtcbiAgICAgIENzcy5zZXQoZXZlbnQudGFyZ2V0LCAnbGVmdCcsIGN1cnJlbnRDb2wgKyBldmVudC54RGVsdGEgKyAncHgnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgZ2V0RGVsdGEgPSAodGFyZ2V0OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGRpcjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmV3WCA9IENlbGxVdGlscy5nZXRDc3NWYWx1ZSh0YXJnZXQsIGRpcik7XG4gICAgY29uc3Qgb2xkWCA9IENlbGxVdGlscy5nZXRBdHRyVmFsdWUodGFyZ2V0LCAnZGF0YS1pbml0aWFsLScgKyBkaXIsIDApO1xuICAgIHJldHVybiBuZXdYIC0gb2xkWDtcbiAgfTtcblxuICAvKiBSZXNpemUgdGhlIGNvbHVtbiBvbmNlIHRoZSB1c2VyIHJlbGVhc2VzIHRoZSBtb3VzZSAqL1xuICByZXNpemluZy5ldmVudHMuc3RvcC5iaW5kKCgpID0+IHtcbiAgICBtdXRhdGlvbi5nZXQoKS5lYWNoKCh0YXJnZXQpID0+IHtcbiAgICAgIGhvdmVyVGFibGUuZWFjaCgodGFibGUpID0+IHtcbiAgICAgICAgZ2V0UmVzaXplcih0YXJnZXQsICdkYXRhLXJvdycpLmVhY2goKHJvdykgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlbHRhID0gZ2V0RGVsdGEodGFyZ2V0LCAndG9wJyk7XG4gICAgICAgICAgQXR0cmlidXRlLnJlbW92ZSh0YXJnZXQsICdkYXRhLWluaXRpYWwtdG9wJyk7XG4gICAgICAgICAgZXZlbnRzLnRyaWdnZXIuYWRqdXN0SGVpZ2h0KHRhYmxlLCBkZWx0YSwgcGFyc2VJbnQocm93LCAxMCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBnZXRSZXNpemVyKHRhcmdldCwgJ2RhdGEtY29sdW1uJykuZWFjaCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVsdGEgPSBnZXREZWx0YSh0YXJnZXQsICdsZWZ0Jyk7XG4gICAgICAgICAgQXR0cmlidXRlLnJlbW92ZSh0YXJnZXQsICdkYXRhLWluaXRpYWwtbGVmdCcpO1xuICAgICAgICAgIGV2ZW50cy50cmlnZ2VyLmFkanVzdFdpZHRoKHRhYmxlLCBkZWx0YSwgcGFyc2VJbnQoY29sdW1uLCAxMCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBCYXJzLnJlZnJlc2god2lyZSwgdGFibGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgY29uc3QgaGFuZGxlciA9ICh0YXJnZXQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgZGlyOiBzdHJpbmcpID0+IHtcbiAgICBldmVudHMudHJpZ2dlci5zdGFydEFkanVzdCgpO1xuICAgIG11dGF0aW9uLmFzc2lnbih0YXJnZXQpO1xuICAgIEF0dHJpYnV0ZS5zZXQodGFyZ2V0LCAnZGF0YS1pbml0aWFsLScgKyBkaXIsIENlbGxVdGlscy5nZXRDc3NWYWx1ZSh0YXJnZXQsIGRpcikpO1xuICAgIENsYXNzLmFkZCh0YXJnZXQsIHJlc2l6ZUJhckRyYWdnaW5nKTtcbiAgICBDc3Muc2V0KHRhcmdldCwgJ29wYWNpdHknLCAnMC4yJyk7XG4gICAgcmVzaXppbmcuZ28od2lyZS5kcmFnQ29udGFpbmVyKCkpO1xuICB9O1xuXG4gIC8qIG1vdXNlZG93biBvbiByZXNpemUgYmFyOiBzdGFydCBkcmFnZ2luZyB3aGVuIHRoZSBiYXIgaXMgY2xpY2tlZCwgc3RvcmluZyB0aGUgaW5pdGlhbCBwb3NpdGlvbi4gKi9cbiAgY29uc3QgbW91c2Vkb3duID0gRG9tRXZlbnQuYmluZCh3aXJlLnBhcmVudCgpLCAnbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKEJhcnMuaXNSb3dCYXIoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgaGFuZGxlcihldmVudC50YXJnZXQsICd0b3AnKTtcbiAgICB9XG5cbiAgICBpZiAoQmFycy5pc0NvbEJhcihldmVudC50YXJnZXQpKSB7XG4gICAgICBoYW5kbGVyKGV2ZW50LnRhcmdldCwgJ2xlZnQnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGlzUm9vdCA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IHtcbiAgICByZXR1cm4gQ29tcGFyZS5lcShlLCB3aXJlLnZpZXcoKSk7XG4gIH07XG5cbiAgY29uc3QgZmluZENsb3Nlc3RFZGl0YWJsZVRhYmxlID0gKHRhcmdldDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+PiA9PlxuICAgIFNlbGVjdG9yRmluZC5jbG9zZXN0PEhUTUxUYWJsZUVsZW1lbnQ+KHRhcmdldCwgJ3RhYmxlJywgaXNSb290KS5maWx0ZXIoQ29udGVudEVkaXRhYmxlLmlzRWRpdGFibGUpO1xuXG4gIGNvbnN0IGlzUmVzaXplciA9ICh0YXJnZXQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IGJvb2xlYW4gPT5cbiAgICBDbGFzcy5oYXModGFyZ2V0LCAnZXBob3gtc25vb2tlci1yZXNpemVyLWJhcicpIHx8IENsYXNzLmhhcyh0YXJnZXQsICdlcGhveC1kcmFnc3Rlci1ibG9ja2VyJyk7XG5cbiAgLyogbW91c2VvdmVyIG9uIHRhYmxlOiBXaGVuIHRoZSBtb3VzZSBtb3ZlcyB3aXRoaW4gdGhlIENPTlRFTlQgQVJFQSAoTk9UIFRIRSBUQUJMRSksIHJlZnJlc2ggdGhlIGJhcnMuICovXG4gIGNvbnN0IG1vdXNlb3ZlciA9IERvbUV2ZW50LmJpbmQ8TW91c2VFdmVudCwgRWxlbWVudD4od2lyZS52aWV3KCksICdtb3VzZW92ZXInLCAoZXZlbnQpID0+IHtcbiAgICBmaW5kQ2xvc2VzdEVkaXRhYmxlVGFibGUoZXZlbnQudGFyZ2V0KS5mb2xkKFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvKlxuICAgICAgICAqIG1vdXNlb3V0IGlzIG5vdCByZWxpYWJsZSB3aXRoaW4gQ29udGVudEVkaXRhYmxlLCBzbyBmb3IgYWxsIG90aGVyIG1vdXNlb3ZlciBldmVudHMgd2UgY2xlYXIgYmFycy5cbiAgICAgICAgKiBUaGlzIGlzIGZhaXJseSBzYWZlIHRvIGRvIGZyZXF1ZW50bHk7IGl0J3MgYSBzaW5nbGUgcXVlcnlTZWxlY3RvckFsbCgpIG9uIHRoZSBjb250ZW50IGFuZCBBcnIubWFwIG9uIHRoZSByZXN1bHQuXG4gICAgICAgICogSWYgd2UgX3JlYWxseV8gbmVlZCB0byBvcHRpbWlzZSBpdCBmdXJ0aGVyLCB3ZSBjYW4gc3RhcnQgY2FjaGluZyB0aGUgYmFyIHJlZmVyZW5jZXMgaW4gdGhlIHdpcmUgc29tZWhvdy5cbiAgICAgICAgKlxuICAgICAgICAqIEJlY2F1c2UgdGhlIHJlc2l6ZXJzIHdlcmUgbW92ZWQgaW50byB0aGUgZWRpdG9yIGZvciBpbmxpbmUgbW9kZSwgd2UgbmVlZCB0byBjaGVjayBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIG5vdCBhIHJlc2l6ZXIuXG4gICAgICAgICovXG4gICAgICAgIGlmIChTdWdhckJvZHkuaW5Cb2R5KGV2ZW50LnRhcmdldCkgJiYgIWlzUmVzaXplcihldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgQmFycy5kZXN0cm95KHdpcmUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKHRhYmxlKSA9PiB7XG4gICAgICAgIGlmIChyZXNpemluZy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgaG92ZXJUYWJsZSA9IE9wdGlvbmFsLnNvbWUodGFibGUpO1xuICAgICAgICAgIEJhcnMucmVmcmVzaCh3aXJlLCB0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9KTtcblxuICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgIG1vdXNlZG93bi51bmJpbmQoKTtcbiAgICBtb3VzZW92ZXIudW5iaW5kKCk7XG4gICAgcmVzaXppbmcuZGVzdHJveSgpO1xuICAgIEJhcnMuZGVzdHJveSh3aXJlKTtcbiAgfTtcblxuICBjb25zdCByZWZyZXNoID0gKHRibDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PiB7XG4gICAgQmFycy5yZWZyZXNoKHdpcmUsIHRibCk7XG4gIH07XG5cbiAgY29uc3QgZXZlbnRzOiBEcmFnQWRqdXN0RXZlbnRzID0gRXZlbnRzLmNyZWF0ZSh7XG4gICAgYWRqdXN0SGVpZ2h0OiBFdmVudChbICd0YWJsZScsICdkZWx0YScsICdyb3cnIF0pLFxuICAgIGFkanVzdFdpZHRoOiBFdmVudChbICd0YWJsZScsICdkZWx0YScsICdjb2x1bW4nIF0pLFxuICAgIHN0YXJ0QWRqdXN0OiBFdmVudChbXSlcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBkZXN0cm95LFxuICAgIHJlZnJlc2gsXG4gICAgb246IHJlc2l6aW5nLm9uLFxuICAgIG9mZjogcmVzaXppbmcub2ZmLFxuICAgIGhpZGVCYXJzOiBGdW4uY3VycnkoQmFycy5oaWRlLCB3aXJlKSxcbiAgICBzaG93QmFyczogRnVuLmN1cnJ5KEJhcnMuc2hvdywgd2lyZSksXG4gICAgZXZlbnRzOiBldmVudHMucmVnaXN0cnlcbiAgfTtcbn07XG5cbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IHR5cGUgQmluZGFibGUsIEV2ZW50LCBFdmVudHMgfSBmcm9tICdAZXBob3gvcG9ya2J1bic7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB7IHR5cGUgRHJhZ0Rpc3RhbmNlRXZlbnQsIE11dGF0aW9uIH0gZnJvbSAnLi9NdXRhdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhZ0V2ZW50IGV4dGVuZHMgRHJhZ0Rpc3RhbmNlRXZlbnQge1xuICByZWFkb25seSB0YXJnZXQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pjtcbn1cblxuaW50ZXJmYWNlIERyYWdEaXN0YW5jZUV2ZW50cyB7XG4gIHJlZ2lzdHJ5OiB7XG4gICAgZHJhZzogQmluZGFibGU8RHJhZ0V2ZW50PjtcbiAgfTtcbiAgdHJpZ2dlcjoge1xuICAgIGRyYWc6ICh4RGVsdGE6IG51bWJlciwgeURlbHRhOiBudW1iZXIsIHRhcmdldDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KSA9PiB2b2lkO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhck11dGF0aW9uIHtcbiAgYXNzaWduOiAodDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KSA9PiB2b2lkO1xuICBnZXQ6ICgpID0+IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxFbGVtZW50Pj47XG4gIG11dGF0ZTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB2b2lkO1xuICBldmVudHM6IHtcbiAgICBkcmFnOiBCaW5kYWJsZTxEcmFnRXZlbnQ+O1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgQmFyTXV0YXRpb24gPSAoKTogQmFyTXV0YXRpb24gPT4ge1xuICBjb25zdCBldmVudHM6IERyYWdEaXN0YW5jZUV2ZW50cyA9IEV2ZW50cy5jcmVhdGUoe1xuICAgIGRyYWc6IEV2ZW50KFsgJ3hEZWx0YScsICd5RGVsdGEnLCAndGFyZ2V0JyBdKVxuICB9KTtcblxuICBsZXQgdGFyZ2V0ID0gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8RWxlbWVudD4+KCk7XG5cbiAgY29uc3QgZGVsZWdhdGUgPSBNdXRhdGlvbigpO1xuXG4gIGRlbGVnYXRlLmV2ZW50cy5kcmFnLmJpbmQoKGV2ZW50KSA9PiB7XG4gICAgdGFyZ2V0LmVhY2goKHQpID0+IHtcbiAgICAgIC8vIFRoZXJlIGlzIGFsd2F5cyBnb2luZyB0byBiZSB0aGlzIHBhZGRpbmcgLyBib3JkZXIgY29sbGFwc2UgLyBtYXJnaW4gcHJvYmxlbSB3aXRoIHdpZHRocy4gSSdsbCBoYXZlIHRvIHJlc29sdmUgdGhhdC5cbiAgICAgIGV2ZW50cy50cmlnZ2VyLmRyYWcoZXZlbnQueERlbHRhLCBldmVudC55RGVsdGEsIHQpO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBhc3NpZ24gPSAodDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KSA9PiB7XG4gICAgdGFyZ2V0ID0gT3B0aW9uYWwuc29tZSh0KTtcbiAgfTtcblxuICBjb25zdCBnZXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFzc2lnbixcbiAgICBnZXQsXG4gICAgbXV0YXRlOiBkZWxlZ2F0ZS5tdXRhdGUsXG4gICAgZXZlbnRzOiBldmVudHMucmVnaXN0cnlcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIEhlaWdodCwgdHlwZSBTdWdhckVsZW1lbnQsIFN1Z2FyTG9jYXRpb24sIFdpZHRoIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuZXhwb3J0IGludGVyZmFjZSBSb3dJbmZvIHtcbiAgcmVhZG9ubHkgcm93OiBudW1iZXI7XG4gIHJlYWRvbmx5IHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2xJbmZvIHtcbiAgcmVhZG9ubHkgY29sOiBudW1iZXI7XG4gIHJlYWRvbmx5IHg6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXJQb3NpdGlvbnM8VD4ge1xuICByZWFkb25seSBkZWx0YTogKGRlbHRhOiBudW1iZXIsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgZWRnZTogKGU6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgcG9zaXRpb25zOiAoYXJyYXk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10sIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IE9wdGlvbmFsPFQ+W107XG59XG5cbmNvbnN0IHJvd0luZm8gPSAocm93OiBudW1iZXIsIHk6IG51bWJlcik6IFJvd0luZm8gPT4gKHtcbiAgcm93LFxuICB5XG59KTtcblxuY29uc3QgY29sSW5mbyA9IChjb2w6IG51bWJlciwgeDogbnVtYmVyKTogQ29sSW5mbyA9PiAoe1xuICBjb2wsXG4gIHhcbn0pO1xuXG5jb25zdCBydGxFZGdlID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT4ge1xuICBjb25zdCBwb3MgPSBTdWdhckxvY2F0aW9uLmFic29sdXRlKGNlbGwpO1xuICByZXR1cm4gcG9zLmxlZnQgKyBXaWR0aC5nZXRPdXRlcihjZWxsKTtcbn07XG5cbmNvbnN0IGx0ckVkZ2UgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PiB7XG4gIHJldHVybiBTdWdhckxvY2F0aW9uLmFic29sdXRlKGNlbGwpLmxlZnQ7XG59O1xuXG5jb25zdCBnZXRMZWZ0RWRnZSA9IChpbmRleDogbnVtYmVyLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogQ29sSW5mbyA9PiB7XG4gIHJldHVybiBjb2xJbmZvKGluZGV4LCBsdHJFZGdlKGNlbGwpKTtcbn07XG5cbmNvbnN0IGdldFJpZ2h0RWRnZSA9IChpbmRleDogbnVtYmVyLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogQ29sSW5mbyA9PiB7XG4gIHJldHVybiBjb2xJbmZvKGluZGV4LCBydGxFZGdlKGNlbGwpKTtcbn07XG5cbmNvbnN0IGdldFRvcCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIFN1Z2FyTG9jYXRpb24uYWJzb2x1dGUoY2VsbCkudG9wO1xufTtcblxuY29uc3QgZ2V0VG9wRWRnZSA9IChpbmRleDogbnVtYmVyLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogUm93SW5mbyA9PiB7XG4gIHJldHVybiByb3dJbmZvKGluZGV4LCBnZXRUb3AoY2VsbCkpO1xufTtcblxuY29uc3QgZ2V0Qm90dG9tRWRnZSA9IChpbmRleDogbnVtYmVyLCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogUm93SW5mbyA9PiB7XG4gIHJldHVybiByb3dJbmZvKGluZGV4LCBnZXRUb3AoY2VsbCkgKyBIZWlnaHQuZ2V0T3V0ZXIoY2VsbCkpO1xufTtcblxuY29uc3QgZmluZFBvc2l0aW9ucyA9IDxUPiAoXG4gIGdldElubmVyRWRnZTogKGlkeDogbnVtYmVyLCBlbGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFQsXG4gIGdldE91dGVyRWRnZTogKGlkeDogbnVtYmVyLCBlbGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFQsXG4gIGFycmF5OiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PltdXG4pOiBPcHRpb25hbDxUPltdID0+IHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCApIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgbGluZXMgPSBBcnIubWFwKGFycmF5LnNsaWNlKDEpLCAoY2VsbE9wdGlvbiwgaW5kZXgpID0+IHtcbiAgICByZXR1cm4gY2VsbE9wdGlvbi5tYXAoKGNlbGwpID0+IHtcbiAgICAgIHJldHVybiBnZXRJbm5lckVkZ2UoaW5kZXgsIGNlbGwpO1xuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBsYXN0TGluZSA9IGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdLm1hcCgoY2VsbCkgPT4ge1xuICAgIHJldHVybiBnZXRPdXRlckVkZ2UoYXJyYXkubGVuZ3RoIC0gMSwgY2VsbCk7XG4gIH0pO1xuXG4gIHJldHVybiBsaW5lcy5jb25jYXQoWyBsYXN0TGluZSBdKTtcbn07XG5cbmNvbnN0IG5lZ2F0ZSA9IChzdGVwOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gLXN0ZXA7XG59O1xuXG5jb25zdCBoZWlnaHQ6IEJhclBvc2l0aW9uczxSb3dJbmZvPiA9IHtcbiAgZGVsdGE6IEZ1bi5pZGVudGl0eSxcbiAgcG9zaXRpb25zOiAob3B0RWxlbWVudHMpID0+IGZpbmRQb3NpdGlvbnMoZ2V0VG9wRWRnZSwgZ2V0Qm90dG9tRWRnZSwgb3B0RWxlbWVudHMpLFxuICBlZGdlOiBnZXRUb3Bcbn07XG5cbmNvbnN0IGx0cjogQmFyUG9zaXRpb25zPENvbEluZm8+ID0ge1xuICBkZWx0YTogRnVuLmlkZW50aXR5LFxuICBlZGdlOiBsdHJFZGdlLFxuICBwb3NpdGlvbnM6IChvcHRFbGVtZW50cykgPT4gZmluZFBvc2l0aW9ucyhnZXRMZWZ0RWRnZSwgZ2V0UmlnaHRFZGdlLCBvcHRFbGVtZW50cylcbn07XG5cbmNvbnN0IHJ0bDogQmFyUG9zaXRpb25zPENvbEluZm8+ID0ge1xuICBkZWx0YTogbmVnYXRlLFxuICBlZGdlOiBydGxFZGdlLFxuICBwb3NpdGlvbnM6IChvcHRFbGVtZW50cykgPT4gZmluZFBvc2l0aW9ucyhnZXRSaWdodEVkZ2UsIGdldExlZnRFZGdlLCBvcHRFbGVtZW50cylcbn07XG5cbmNvbnN0IGRldGVjdCA9IERpcmVjdGlvbi5vbkRpcmVjdGlvbihsdHIsIHJ0bCk7XG5cbmNvbnN0IHdpZHRoOiBCYXJQb3NpdGlvbnM8Q29sSW5mbz4gPSB7XG4gIGRlbHRhOiAoYW1vdW50OiBudW1iZXIsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IGRldGVjdCh0YWJsZSkuZGVsdGEoYW1vdW50LCB0YWJsZSksXG4gIHBvc2l0aW9uczogKGNvbHM6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10sIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IGRldGVjdCh0YWJsZSkucG9zaXRpb25zKGNvbHMsIHRhYmxlKSxcbiAgZWRnZTogKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IGRldGVjdChjZWxsKS5lZGdlKGNlbGwpXG59O1xuXG5leHBvcnQgeyBoZWlnaHQsIHdpZHRoLCBydGwsIGx0ciB9O1xuXG4iLCJpbXBvcnQgeyBBcnIsIHR5cGUgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQ2xhc3MsIENzcywgSGVpZ2h0LCBJbnNlcnQsIFJlbW92ZSwgU2VsZWN0b3JGaWx0ZXIsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhckxvY2F0aW9uLCB0eXBlIFN1Z2FyUG9zaXRpb24sIFdpZHRoIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgeyBSZXNpemVXaXJlIH0gZnJvbSAnLi4vYXBpL1Jlc2l6ZVdpcmUnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5pbXBvcnQgKiBhcyBCbG9ja3MgZnJvbSAnLi4vbG9va3VwL0Jsb2Nrcyc7XG5pbXBvcnQgKiBhcyBTdHlsZXMgZnJvbSAnLi4vc3R5bGUvU3R5bGVzJztcblxuaW1wb3J0ICogYXMgQmFyIGZyb20gJy4vQmFyJztcbmltcG9ydCAqIGFzIEJhclBvc2l0aW9ucyBmcm9tICcuL0JhclBvc2l0aW9ucyc7XG5cbmNvbnN0IHJlc2l6ZUJhciA9IFN0eWxlcy5yZXNvbHZlKCdyZXNpemVyLWJhcicpO1xuY29uc3QgcmVzaXplUm93QmFyID0gU3R5bGVzLnJlc29sdmUoJ3Jlc2l6ZXItcm93cycpO1xuY29uc3QgcmVzaXplQ29sQmFyID0gU3R5bGVzLnJlc29sdmUoJ3Jlc2l6ZXItY29scycpO1xuY29uc3QgQkFSX1RISUNLTkVTUyA9IDc7XG5cbmNvbnN0IHJlc2l6YWJsZVJvd3MgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIGlzUmVzaXphYmxlOiAoZWxtOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pID0+IGJvb2xlYW4pOiBudW1iZXJbXSA9PlxuICBBcnIuYmluZCh3YXJlaG91c2UuYWxsLCAocm93LCBpKSA9PiBpc1Jlc2l6YWJsZShyb3cuZWxlbWVudCkgPyBbIGkgXSA6IFtdKTtcblxuY29uc3QgcmVzaXphYmxlQ29sdW1ucyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgaXNSZXNpemFibGU6IChlbG06IFN1Z2FyRWxlbWVudDxFbGVtZW50PikgPT4gYm9vbGVhbik6IG51bWJlcltdID0+IHtcbiAgY29uc3QgcmVzaXphYmxlQ29sczogbnVtYmVyW10gPSBbXTtcbiAgLy8gQ2hlY2sgY29sIGVsZW1lbnRzIGFuZCBzZWUgaWYgdGhleSBhcmUgcmVzaXphYmxlXG4gIEFyci5yYW5nZSh3YXJlaG91c2UuZ3JpZC5jb2x1bW5zLCAoaW5kZXgpID0+IHtcbiAgICAvLyBXaXRoIHVzZSBvZiBmb3JhbGwsIGluZGV4IHdpbGwgYmUgaW5jbHVkZWQgaWYgY29sIGRvZXNuJ3QgZXhpc3QgbWVhbmluZyB0aGUgY29sdW1uIGNlbGxzIHdpbGwgYmUgY2hlY2tlZCBiZWxvd1xuICAgIGNvbnN0IGNvbEVsbU9wdCA9IFdhcmVob3VzZS5nZXRDb2x1bW5BdCh3YXJlaG91c2UsIGluZGV4KS5tYXAoKGNvbCkgPT4gY29sLmVsZW1lbnQpO1xuICAgIGlmIChjb2xFbG1PcHQuZm9yYWxsKGlzUmVzaXphYmxlKSkge1xuICAgICAgcmVzaXphYmxlQ29scy5wdXNoKGluZGV4KTtcbiAgICB9XG4gIH0pO1xuICAvLyBDaGVjayBjZWxscyBvZiB0aGUgcmVzaXphYmxlIGNvbHVtbnMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSByZXNpemFibGVcbiAgcmV0dXJuIEFyci5maWx0ZXIocmVzaXphYmxlQ29scywgKGNvbEluZGV4KSA9PiB7XG4gICAgY29uc3QgY29sdW1uQ2VsbHMgPSBXYXJlaG91c2UuZmlsdGVySXRlbXMod2FyZWhvdXNlLCAoY2VsbCkgPT4gY2VsbC5jb2x1bW4gPT09IGNvbEluZGV4KTtcbiAgICByZXR1cm4gQXJyLmZvcmFsbChjb2x1bW5DZWxscywgKGNlbGwpID0+IGlzUmVzaXphYmxlKGNlbGwuZWxlbWVudCkpO1xuICB9KTtcbn07XG5cbmNvbnN0IGRlc3Ryb3kgPSAod2lyZTogUmVzaXplV2lyZSk6IHZvaWQgPT4ge1xuICBjb25zdCBwcmV2aW91cyA9IFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzKHdpcmUucGFyZW50KCksICcuJyArIHJlc2l6ZUJhcik7XG4gIEFyci5lYWNoKHByZXZpb3VzLCBSZW1vdmUucmVtb3ZlKTtcbn07XG5cbmNvbnN0IGRyYXdCYXIgPSA8VD4gKHdpcmU6IFJlc2l6ZVdpcmUsIHBvc2l0aW9uczogT3B0aW9uYWw8VD5bXSwgY3JlYXRlOiAob3JpZ2luOiBTdWdhclBvc2l0aW9uLCBpbmZvOiBUKSA9PiBTdWdhckVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIGNvbnN0IG9yaWdpbiA9IHdpcmUub3JpZ2luKCk7XG4gIEFyci5lYWNoKHBvc2l0aW9ucywgKGNwT3B0aW9uKSA9PiB7XG4gICAgY3BPcHRpb24uZWFjaCgoY3ApID0+IHtcbiAgICAgIGNvbnN0IGJhciA9IGNyZWF0ZShvcmlnaW4sIGNwKTtcbiAgICAgIENsYXNzLmFkZChiYXIsIHJlc2l6ZUJhcik7XG4gICAgICBJbnNlcnQuYXBwZW5kKHdpcmUucGFyZW50KCksIGJhcik7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgcmVmcmVzaENvbCA9ICh3aXJlOiBSZXNpemVXaXJlLCBjb2xQb3NpdGlvbnM6IE9wdGlvbmFsPEJhclBvc2l0aW9ucy5Db2xJbmZvPltdLCBwb3NpdGlvbjogU3VnYXJQb3NpdGlvbiwgdGFibGVIZWlnaHQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICBkcmF3QmFyKHdpcmUsIGNvbFBvc2l0aW9ucywgKG9yaWdpbiwgY3ApID0+IHtcbiAgICBjb25zdCBjb2xCYXIgPSBCYXIuY29sKGNwLmNvbCwgY3AueCAtIG9yaWdpbi5sZWZ0LCBwb3NpdGlvbi50b3AgLSBvcmlnaW4udG9wLCBCQVJfVEhJQ0tORVNTLCB0YWJsZUhlaWdodCk7XG4gICAgQ2xhc3MuYWRkKGNvbEJhciwgcmVzaXplQ29sQmFyKTtcbiAgICByZXR1cm4gY29sQmFyO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlZnJlc2hSb3cgPSAod2lyZTogUmVzaXplV2lyZSwgcm93UG9zaXRpb25zOiBPcHRpb25hbDxCYXJQb3NpdGlvbnMuUm93SW5mbz5bXSwgcG9zaXRpb246IFN1Z2FyUG9zaXRpb24sIHRhYmxlV2lkdGg6IG51bWJlcik6IHZvaWQgPT4ge1xuICBkcmF3QmFyKHdpcmUsIHJvd1Bvc2l0aW9ucywgKG9yaWdpbiwgY3ApID0+IHtcbiAgICBjb25zdCByb3dCYXIgPSBCYXIucm93KGNwLnJvdywgcG9zaXRpb24ubGVmdCAtIG9yaWdpbi5sZWZ0LCBjcC55IC0gb3JpZ2luLnRvcCwgdGFibGVXaWR0aCwgQkFSX1RISUNLTkVTUyk7XG4gICAgQ2xhc3MuYWRkKHJvd0JhciwgcmVzaXplUm93QmFyKTtcbiAgICByZXR1cm4gcm93QmFyO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlZnJlc2hHcmlkID0gKHdhcmhvdXNlOiBXYXJlaG91c2UsIHdpcmU6IFJlc2l6ZVdpcmUsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHJvd3M6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10sIGNvbHM6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4+W10pOiB2b2lkID0+IHtcbiAgY29uc3QgcG9zaXRpb24gPSBTdWdhckxvY2F0aW9uLmFic29sdXRlKHRhYmxlKTtcbiAgY29uc3QgaXNSZXNpemFibGUgPSB3aXJlLmlzUmVzaXphYmxlO1xuICBjb25zdCByb3dQb3NpdGlvbnMgPSByb3dzLmxlbmd0aCA+IDAgPyBCYXJQb3NpdGlvbnMuaGVpZ2h0LnBvc2l0aW9ucyhyb3dzLCB0YWJsZSkgOiBbXTtcbiAgY29uc3QgcmVzaXphYmxlUm93QmFycyA9IHJvd1Bvc2l0aW9ucy5sZW5ndGggPiAwID8gcmVzaXphYmxlUm93cyh3YXJob3VzZSwgaXNSZXNpemFibGUpIDogW107XG4gIGNvbnN0IHJlc2l6YWJsZVJvd1Bvc2l0aW9ucyA9IEFyci5maWx0ZXIocm93UG9zaXRpb25zLCAoX3BvcywgaSkgPT4gQXJyLmV4aXN0cyhyZXNpemFibGVSb3dCYXJzLCAoYmFySW5kZXgpID0+IGkgPT09IGJhckluZGV4ICkpO1xuICByZWZyZXNoUm93KHdpcmUsIHJlc2l6YWJsZVJvd1Bvc2l0aW9ucywgcG9zaXRpb24sIFdpZHRoLmdldE91dGVyKHRhYmxlKSk7XG5cbiAgY29uc3QgY29sUG9zaXRpb25zID0gY29scy5sZW5ndGggPiAwID8gQmFyUG9zaXRpb25zLndpZHRoLnBvc2l0aW9ucyhjb2xzLCB0YWJsZSkgOiBbXTtcbiAgY29uc3QgcmVzaXphYmxlQ29sQmFycyA9IGNvbFBvc2l0aW9ucy5sZW5ndGggPiAwID8gcmVzaXphYmxlQ29sdW1ucyh3YXJob3VzZSwgaXNSZXNpemFibGUpIDogW107XG4gIGNvbnN0IHJlc2l6YWJsZUNvbFBvc2l0aW9ucyA9IEFyci5maWx0ZXIoY29sUG9zaXRpb25zLCAoX3BvcywgaSkgPT4gQXJyLmV4aXN0cyhyZXNpemFibGVDb2xCYXJzLCAoYmFySW5kZXgpID0+IGkgPT09IGJhckluZGV4ICkpO1xuICByZWZyZXNoQ29sKHdpcmUsIHJlc2l6YWJsZUNvbFBvc2l0aW9ucywgcG9zaXRpb24sIEhlaWdodC5nZXRPdXRlcih0YWJsZSkpO1xufTtcblxuY29uc3QgcmVmcmVzaCA9ICh3aXJlOiBSZXNpemVXaXJlLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gIGRlc3Ryb3kod2lyZSk7XG4gIGlmICh3aXJlLmlzUmVzaXphYmxlKHRhYmxlKSkge1xuICAgIGNvbnN0IHdhcmVob3VzZSA9IFdhcmVob3VzZS5mcm9tVGFibGUodGFibGUpO1xuICAgIGNvbnN0IHJvd3MgPSBCbG9ja3Mucm93cyh3YXJlaG91c2UpO1xuICAgIGNvbnN0IGNvbHMgPSBCbG9ja3MuY29sdW1ucyh3YXJlaG91c2UpO1xuICAgIHJlZnJlc2hHcmlkKHdhcmVob3VzZSwgd2lyZSwgdGFibGUsIHJvd3MsIGNvbHMpO1xuICB9XG59O1xuXG5jb25zdCBlYWNoID0gKHdpcmU6IFJlc2l6ZVdpcmUsIGY6IChiYXI6IFN1Z2FyRWxlbWVudDxIVE1MRGl2RWxlbWVudD4sIGlkeDogbnVtYmVyKSA9PiB2b2lkKTogdm9pZCA9PiB7XG4gIGNvbnN0IGJhcnMgPSBTZWxlY3RvckZpbHRlci5kZXNjZW5kYW50czxIVE1MRGl2RWxlbWVudD4od2lyZS5wYXJlbnQoKSwgJy4nICsgcmVzaXplQmFyKTtcbiAgQXJyLmVhY2goYmFycywgZik7XG59O1xuXG5jb25zdCBoaWRlID0gKHdpcmU6IFJlc2l6ZVdpcmUpOiB2b2lkID0+IHtcbiAgZWFjaCh3aXJlLCAoYmFyKSA9PiB7XG4gICAgQ3NzLnNldChiYXIsICdkaXNwbGF5JywgJ25vbmUnKTtcbiAgfSk7XG59O1xuXG5jb25zdCBzaG93ID0gKHdpcmU6IFJlc2l6ZVdpcmUpOiB2b2lkID0+IHtcbiAgZWFjaCh3aXJlLCAoYmFyKSA9PiB7XG4gICAgQ3NzLnNldChiYXIsICdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gIH0pO1xufTtcblxuY29uc3QgaXNSb3dCYXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIENsYXNzLmhhcyhlbGVtZW50LCByZXNpemVSb3dCYXIpO1xufTtcblxuY29uc3QgaXNDb2xCYXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+ID0+IHtcbiAgcmV0dXJuIENsYXNzLmhhcyhlbGVtZW50LCByZXNpemVDb2xCYXIpO1xufTtcblxuZXhwb3J0IHtcbiAgcmVmcmVzaCxcbiAgaGlkZSxcbiAgc2hvdyxcbiAgZGVzdHJveSxcbiAgaXNSb3dCYXIsXG4gIGlzQ29sQmFyXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBGdW4sIE9wdGlvbmFsLCBPcHRpb25hbHMgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgUGxhdGZvcm1EZXRlY3Rpb24gfSBmcm9tICdAZXBob3gvc2FuZCc7XG5pbXBvcnQgeyB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlLCBXaWR0aCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIHsgVGFibGVTaXplIH0gZnJvbSAnLi4vYXBpL1RhYmxlU2l6ZSc7XG5pbXBvcnQgeyBXYXJlaG91c2UgfSBmcm9tICcuLi9hcGkvV2FyZWhvdXNlJztcbmltcG9ydCAqIGFzIEJsb2NrcyBmcm9tICcuLi9sb29rdXAvQmxvY2tzJztcbmltcG9ydCAqIGFzIENlbGxVdGlscyBmcm9tICcuLi91dGlsL0NlbGxVdGlscyc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcbmltcG9ydCAqIGFzIFV0aWwgZnJvbSAnLi4vdXRpbC9VdGlsJztcblxuaW1wb3J0IHsgaGVpZ2h0LCB3aWR0aCB9IGZyb20gJy4vQmFyUG9zaXRpb25zJztcbmltcG9ydCAqIGFzIFNpemVzIGZyb20gJy4vU2l6ZXMnO1xuXG5jb25zdCBpc0NvbCA9IFN1Z2FyTm9kZS5pc1RhZygnY29sJyk7XG5cbmNvbnN0IGdldFJhd1cgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4pOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gU2l6ZXMuZ2V0UmF3V2lkdGgoY2VsbCkuZ2V0T3JUaHVuaygoKSA9PiBTaXplcy5nZXRQaXhlbFdpZHRoKGNlbGwpICsgJ3B4Jyk7XG59O1xuXG5jb25zdCBnZXRSYXdIID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZVJvd0VsZW1lbnQ+KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIFNpemVzLmdldFJhd0hlaWdodChjZWxsKS5nZXRPclRodW5rKCgpID0+IFNpemVzLmdldEhlaWdodChjZWxsKSArICdweCcpO1xufTtcblxuY29uc3QganVzdENvbHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ29sRWxlbWVudD4+W10gPT5cbiAgQXJyLm1hcChXYXJlaG91c2UuanVzdENvbHVtbnMod2FyZWhvdXNlKSwgKGNvbHVtbikgPT4gT3B0aW9uYWwuZnJvbShjb2x1bW4uZWxlbWVudCkpO1xuXG4vLyBDb2wgZWxlbWVudHMgZG9uJ3QgaGF2ZSB2YWxpZCBjb21wdXRlZCB3aWR0aHMvcG9zaXRpb25zIGluIGFsbCBicm93c2Vycywgc28gdHJlYXQgdGhlbSBhcyBpbnZhbGlkIGluIHRoYXQgY2FzZVxuY29uc3QgaXNWYWxpZENvbHVtbiA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50Pik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBicm93c2VyID0gUGxhdGZvcm1EZXRlY3Rpb24uZGV0ZWN0KCkuYnJvd3NlcjtcbiAgY29uc3Qgc3VwcG9ydHNDb2xXaWR0aHMgPSBicm93c2VyLmlzQ2hyb21pdW0oKSB8fCBicm93c2VyLmlzRmlyZWZveCgpO1xuICByZXR1cm4gaXNDb2woY2VsbCkgPyBzdXBwb3J0c0NvbFdpZHRocyA6IHRydWU7XG59O1xuXG5jb25zdCBnZXREaW1lbnNpb24gPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50LCBVPihcbiAgY2VsbE9wdDogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+PixcbiAgaW5kZXg6IG51bWJlcixcbiAgYmFja3VwczogT3B0aW9uYWw8bnVtYmVyPltdLFxuICBmaWx0ZXI6IChjZWxsOiBTdWdhckVsZW1lbnQ8VD4pID0+IGJvb2xlYW4sXG4gIGdldHRlcjogKGNlbGw6IFN1Z2FyRWxlbWVudDxUPikgPT4gVSxcbiAgZmFsbGJhY2s6IChkZWR1Y2VkOiBPcHRpb25hbDxudW1iZXI+KSA9PiBVXG4pOiBVID0+XG4gIGNlbGxPcHQuZmlsdGVyKGZpbHRlcikuZm9sZChcbiAgICAvLyBDYW4ndCBqdXN0IHJlYWQgdGhlIHdpZHRoIG9mIGEgY2VsbCwgc28gY2FsY3VsYXRlLlxuICAgICgpID0+IGZhbGxiYWNrKFV0aWwuZGVkdWNlKGJhY2t1cHMsIGluZGV4KSksXG4gICAgKGNlbGwpID0+IGdldHRlcihjZWxsKVxuICApO1xuXG5jb25zdCBnZXRXaWR0aEZyb20gPSA8VD4oXG4gIHdhcmVob3VzZTogV2FyZWhvdXNlLFxuICB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LFxuICBnZXRXaWR0aDogKGNlbGw6IFN1Z2FyRWxlbWVudDxDZWxsRWxlbWVudD4pID0+IFQsXG4gIGZhbGxiYWNrOiAoZGVkdWNlZDogT3B0aW9uYWw8bnVtYmVyPikgPT4gVFxuKTogVFtdID0+IHtcbiAgLy8gT25seSB0cmVhdCBhIGNlbGwgYXMgYmVpbmcgdmFsaWQgZm9yIGEgY29sdW1uIHJlcHJlc2VudGF0aW9uIGlmIGl0IGhhcyBhIHJhdyB3aWR0aCwgb3RoZXJ3aXNlIHdlIHdvbid0IGJlIGFibGUgdG8gY2FsY3VsYXRlIHRoZSBleHBlY3RlZCB3aWR0aC5cbiAgLy8gVGhpcyBpcyBuZWVkZWQgYXMgb25lIGNlbGwgbWF5IGhhdmUgYSB3aWR0aCBidXQgb3RoZXJzIG1heSBub3QsIHNvIHdlIG5lZWQgdG8gdHJ5IGFuZCB1c2Ugb25lIHdpdGggYSBzcGVjaWZpZWQgd2lkdGggZmlyc3QuXG4gIGNvbnN0IGNvbHVtbkNlbGxzID0gQmxvY2tzLmNvbHVtbnMod2FyZWhvdXNlKTtcbiAgY29uc3QgY29sdW1uczogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD4+W10gPSBXYXJlaG91c2UuaGFzQ29sdW1ucyh3YXJlaG91c2UpID8ganVzdENvbHMod2FyZWhvdXNlKSA6IGNvbHVtbkNlbGxzO1xuXG4gIGNvbnN0IGJhY2t1cHMgPSBbIE9wdGlvbmFsLnNvbWUod2lkdGguZWRnZSh0YWJsZSkpIF0uY29uY2F0KEFyci5tYXAod2lkdGgucG9zaXRpb25zKGNvbHVtbkNlbGxzLCB0YWJsZSksIChwb3MpID0+XG4gICAgcG9zLm1hcCgocCkgPT4gcC54KVxuICApKTtcblxuICAvLyBPbmx5IHVzZSB0aGUgd2lkdGggb2YgY2VsbHMgdGhhdCBoYXZlIG5vIGNvbHVtbiBzcGFuIChvciBjb2xzcGFuIDEpXG4gIGNvbnN0IGNvbEZpbHRlciA9IEZ1bi5ub3QoQ2VsbFV0aWxzLmhhc0NvbHNwYW4pO1xuXG4gIHJldHVybiBBcnIubWFwKGNvbHVtbnMsIChjZWxsT3B0aW9uLCBjKSA9PiB7XG4gICAgcmV0dXJuIGdldERpbWVuc2lvbihjZWxsT3B0aW9uLCBjLCBiYWNrdXBzLCBjb2xGaWx0ZXIsIChjb2x1bW4pID0+IHtcbiAgICAgIGlmIChpc1ZhbGlkQ29sdW1uKGNvbHVtbikpIHtcbiAgICAgICAgcmV0dXJuIGdldFdpZHRoKGNvbHVtbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJbnZhbGlkIGNvbHVtbiBzbyBmYWxsYmFjayB0byB0cnlpbmcgdG8gZ2V0IHRoZSBjb21wdXRlZCB3aWR0aCBmcm9tIHRoZSBjZWxsXG4gICAgICAgIGNvbnN0IGNlbGwgPSBPcHRpb25hbHMuYmluZEZyb20oY29sdW1uQ2VsbHNbY10sIEZ1bi5pZGVudGl0eSk7XG4gICAgICAgIHJldHVybiBnZXREaW1lbnNpb24oY2VsbCwgYywgYmFja3VwcywgY29sRmlsdGVyLCAoY2VsbCkgPT4gZmFsbGJhY2soT3B0aW9uYWwuc29tZShNYXRoLnJvdW5kKFdpZHRoLmdldChjZWxsKSkpKSwgZmFsbGJhY2spO1xuICAgICAgfVxuICAgIH0sIGZhbGxiYWNrKTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXREZWR1Y2VkID0gKGRlZHVjZWQ6IE9wdGlvbmFsPG51bWJlcj4pOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZGVkdWNlZC5tYXAoKGQpID0+IHtcbiAgICByZXR1cm4gZCArICdweCc7XG4gIH0pLmdldE9yKCcnKTtcbn07XG5cbmNvbnN0IGdldFJhd1dpZHRocyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZ1tdID0+IHtcbiAgcmV0dXJuIGdldFdpZHRoRnJvbSh3YXJlaG91c2UsIHRhYmxlLCBnZXRSYXdXLCBnZXREZWR1Y2VkKTtcbn07XG5cbmNvbnN0IGdldFBlcmNlbnRhZ2VXaWR0aHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHRhYmxlU2l6ZTogVGFibGVTaXplKTogbnVtYmVyW10gPT4ge1xuICByZXR1cm4gZ2V0V2lkdGhGcm9tKHdhcmVob3VzZSwgdGFibGUsIFNpemVzLmdldFBlcmNlbnRhZ2VXaWR0aCwgKGRlZHVjZWQpID0+IHtcbiAgICByZXR1cm4gZGVkdWNlZC5mb2xkKCgpID0+IHtcbiAgICAgIHJldHVybiB0YWJsZVNpemUubWluQ2VsbFdpZHRoKCk7XG4gICAgfSwgKGNlbGxXaWR0aCkgPT4ge1xuICAgICAgcmV0dXJuIGNlbGxXaWR0aCAvIHRhYmxlU2l6ZS5waXhlbFdpZHRoKCkgKiAxMDA7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0UGl4ZWxXaWR0aHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sIHRhYmxlU2l6ZTogVGFibGVTaXplKTogbnVtYmVyW10gPT4ge1xuICByZXR1cm4gZ2V0V2lkdGhGcm9tKHdhcmVob3VzZSwgdGFibGUsIFNpemVzLmdldFBpeGVsV2lkdGgsIChkZWR1Y2VkKSA9PiB7XG4gICAgLy8gTWluaW11bSBjZWxsIHdpZHRoIHdoZW4gYWxsIGVsc2UgZmFpbHMuXG4gICAgcmV0dXJuIGRlZHVjZWQuZ2V0T3JUaHVuayh0YWJsZVNpemUubWluQ2VsbFdpZHRoKTtcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRIZWlnaHRGcm9tID0gPFQ+IChcbiAgd2FyZWhvdXNlOiBXYXJlaG91c2UsXG4gIHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4sXG4gIGdldEhlaWdodDogKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZVJvd0VsZW1lbnQ+KSA9PiBULFxuICBmYWxsYmFjazogKGRlZHVjZWQ6IE9wdGlvbmFsPG51bWJlcj4pID0+IFRcbik6IFRbXSA9PiB7XG4gIGNvbnN0IHJvd0NlbGxzID0gQmxvY2tzLnJvd3Mod2FyZWhvdXNlKTtcbiAgY29uc3Qgcm93cyA9IEFyci5tYXAod2FyZWhvdXNlLmFsbCwgKHIpID0+IE9wdGlvbmFsLnNvbWUoci5lbGVtZW50KSk7XG5cbiAgY29uc3QgYmFja3VwcyA9IFsgT3B0aW9uYWwuc29tZShoZWlnaHQuZWRnZSh0YWJsZSkpIF0uY29uY2F0KEFyci5tYXAoaGVpZ2h0LnBvc2l0aW9ucyhyb3dDZWxscywgdGFibGUpLCAocG9zKSA9PlxuICAgIHBvcy5tYXAoKHApID0+IHAueSlcbiAgKSk7XG5cbiAgcmV0dXJuIEFyci5tYXAocm93cywgKHJvdywgaSkgPT5cbiAgICBnZXREaW1lbnNpb24oXG4gICAgICByb3csXG4gICAgICBpLFxuICAgICAgYmFja3VwcyxcbiAgICAgIEZ1bi5hbHdheXMsXG4gICAgICBnZXRIZWlnaHQsXG4gICAgICBmYWxsYmFja1xuICAgIClcbiAgKTtcbn07XG5cbmNvbnN0IGdldFBpeGVsSGVpZ2h0cyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IG51bWJlcltdID0+IHtcbiAgcmV0dXJuIGdldEhlaWdodEZyb20od2FyZWhvdXNlLCB0YWJsZSwgU2l6ZXMuZ2V0SGVpZ2h0LCAoZGVkdWNlZDogT3B0aW9uYWw8bnVtYmVyPikgPT4ge1xuICAgIHJldHVybiBkZWR1Y2VkLmdldE9yVGh1bmsoQ2VsbFV0aWxzLm1pbkhlaWdodCk7XG4gIH0pO1xufTtcblxuY29uc3QgZ2V0UmF3SGVpZ2h0cyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZ1tdID0+IHtcbiAgcmV0dXJuIGdldEhlaWdodEZyb20od2FyZWhvdXNlLCB0YWJsZSwgZ2V0UmF3SCwgZ2V0RGVkdWNlZCk7XG59O1xuXG5leHBvcnQgeyBnZXRSYXdXaWR0aHMsIGdldFBpeGVsV2lkdGhzLCBnZXRQZXJjZW50YWdlV2lkdGhzLCBnZXRQaXhlbEhlaWdodHMsIGdldFJhd0hlaWdodHMgfTtcblxuIiwiaW1wb3J0IHsgdHlwZSBCaW5kYWJsZSwgRXZlbnQsIEV2ZW50cyB9IGZyb20gJ0BlcGhveC9wb3JrYnVuJztcblxuZXhwb3J0IGludGVyZmFjZSBEcmFnRGlzdGFuY2VFdmVudCB7XG4gIHJlYWRvbmx5IHhEZWx0YTogbnVtYmVyO1xuICByZWFkb25seSB5RGVsdGE6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIERyYWdEaXN0YW5jZUV2ZW50cyB7XG4gIHJlZ2lzdHJ5OiB7XG4gICAgZHJhZzogQmluZGFibGU8RHJhZ0Rpc3RhbmNlRXZlbnQ+O1xuICB9O1xuICB0cmlnZ2VyOiB7XG4gICAgZHJhZzogKHhEZWx0YTogbnVtYmVyLCB5RGVsdGE6IG51bWJlcikgPT4gdm9pZDtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNdXRhdGlvbiB7XG4gIG11dGF0ZTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB2b2lkO1xuICBldmVudHM6IERyYWdEaXN0YW5jZUV2ZW50c1sncmVnaXN0cnknXTtcbn1cblxuZXhwb3J0IGNvbnN0IE11dGF0aW9uID0gKCk6IE11dGF0aW9uID0+IHtcbiAgY29uc3QgZXZlbnRzOiBEcmFnRGlzdGFuY2VFdmVudHMgPSBFdmVudHMuY3JlYXRlKHtcbiAgICBkcmFnOiBFdmVudChbICd4RGVsdGEnLCAneURlbHRhJyBdKVxuICB9KTtcblxuICBjb25zdCBtdXRhdGUgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IHtcbiAgICBldmVudHMudHJpZ2dlci5kcmFnKHgsIHkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbXV0YXRlLFxuICAgIGV2ZW50czogZXZlbnRzLnJlZ2lzdHJ5XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5pbXBvcnQgdHlwZSB7IENlbGxFbGVtZW50IH0gZnJvbSAnLi4vdXRpbC9UYWJsZVR5cGVzJztcblxuLy8gUmV0dXJucyB0aGUgc3VtIG9mIGVsZW1lbnRzIG9mIG1lYXN1cmVzIGluIHRoZSBoYWxmLW9wZW4gcmFuZ2UgW3N0YXJ0LCBlbmQpXG4vLyBNZWFzdXJlcyBpcyBpbiBwaXhlbHMsIHRyZWF0ZWQgYXMgYW4gYXJyYXkgb2YgaW50ZWdlcnMgb3IgaW50ZWdlcnMgaW4gc3RyaW5nIGZvcm1hdC5cbi8vIE5PVEU6IGJld2FyZSBvZiBhY2N1bXVsYXRlZCByb3VuZGluZyBlcnJvcnMgb3ZlciBtdWx0aXBsZSBjb2x1bW5zIC0gY291bGQgcmVzdWx0IGluIG5vdGljZWFibGUgdGFibGUgd2lkdGggY2hhbmdlc1xuY29uc3QgdG90YWwgPSAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIG1lYXN1cmVzOiBudW1iZXJbXSk6IG51bWJlciA9PiB7XG4gIGxldCByID0gMDtcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByICs9IG1lYXN1cmVzW2ldICE9PSB1bmRlZmluZWQgPyBtZWFzdXJlc1tpXSA6IDA7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5pbnRlcmZhY2UgQ2VsbFdpZHRoU3BhbjxUIGV4dGVuZHMgQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgY29sc3BhbjogbnVtYmVyO1xuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8VD47XG59XG5cbmludGVyZmFjZSBDZWxsSGVpZ2h0PFQgZXh0ZW5kcyBIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ2VsbEVsZW1lbnQ+IHtcbiAgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG4gIHJlYWRvbmx5IGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUPjtcbn1cblxuaW50ZXJmYWNlIENlbGxIZWlnaHRTcGFuIGV4dGVuZHMgQ2VsbEhlaWdodDxIVE1MVGFibGVDZWxsRWxlbWVudD4ge1xuICByZWFkb25seSByb3dzcGFuOiBudW1iZXI7XG59XG5cbi8vIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGNlbGxzIGluIHdhcmVob3VzZSB3aXRoIHVwZGF0ZWQgY2VsbC13aWR0aHMsIHVzaW5nXG4vLyB0aGUgYXJyYXkgJ3dpZHRocycgb2YgdGhlIHJlcHJlc2VudGF0aXZlIHdpZHRocyBvZiBlYWNoIGNvbHVtbiBvZiB0aGUgdGFibGUgJ3dhcmVob3VzZSdcbmNvbnN0IHJlY2FsY3VsYXRlV2lkdGhGb3JDZWxscyA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgd2lkdGhzOiBudW1iZXJbXSk6IENlbGxXaWR0aFNwYW48SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPT4ge1xuICBjb25zdCBhbGwgPSBXYXJlaG91c2UuanVzdENlbGxzKHdhcmVob3VzZSk7XG5cbiAgcmV0dXJuIEFyci5tYXAoYWxsLCAoY2VsbCkgPT4ge1xuICAgIC8vIHdpZHRoIG9mIGEgc3Bhbm5pbmcgY2VsbCBpcyBzdW0gb2Ygd2lkdGhzIG9mIHJlcHJlc2VudGF0aXZlIGNvbHVtbnMgaXQgc3BhbnNcbiAgICBjb25zdCB3aWR0aCA9IHRvdGFsKGNlbGwuY29sdW1uLCBjZWxsLmNvbHVtbiArIGNlbGwuY29sc3Bhbiwgd2lkdGhzKTtcbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudDogY2VsbC5lbGVtZW50LFxuICAgICAgd2lkdGgsXG4gICAgICBjb2xzcGFuOiBjZWxsLmNvbHNwYW5cbiAgICB9O1xuICB9KTtcbn07XG5cbmNvbnN0IHJlY2FsY3VsYXRlV2lkdGhGb3JDb2x1bW5zID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCB3aWR0aHM6IG51bWJlcltdKTogQ2VsbFdpZHRoU3BhbjxIVE1MVGFibGVDb2xFbGVtZW50PltdID0+IHtcbiAgY29uc3QgZ3JvdXBzID0gV2FyZWhvdXNlLmp1c3RDb2x1bW5zKHdhcmVob3VzZSk7XG5cbiAgcmV0dXJuIEFyci5tYXAoZ3JvdXBzLCAoY29sdW1uLCBpbmRleCkgPT4gKHtcbiAgICBlbGVtZW50OiBjb2x1bW4uZWxlbWVudCxcbiAgICB3aWR0aDogd2lkdGhzW2luZGV4XSxcbiAgICBjb2xzcGFuOiBjb2x1bW4uY29sc3BhblxuICB9KSk7XG59O1xuXG5jb25zdCByZWNhbGN1bGF0ZUhlaWdodEZvckNlbGxzID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBoZWlnaHRzOiBudW1iZXJbXSk6IENlbGxIZWlnaHRTcGFuW10gPT4ge1xuICBjb25zdCBhbGwgPSBXYXJlaG91c2UuanVzdENlbGxzKHdhcmVob3VzZSk7XG4gIHJldHVybiBBcnIubWFwKGFsbCwgKGNlbGwpID0+IHtcbiAgICBjb25zdCBoZWlnaHQgPSB0b3RhbChjZWxsLnJvdywgY2VsbC5yb3cgKyBjZWxsLnJvd3NwYW4sIGhlaWdodHMpO1xuICAgIHJldHVybiB7XG4gICAgICBlbGVtZW50OiBjZWxsLmVsZW1lbnQsXG4gICAgICBoZWlnaHQsXG4gICAgICByb3dzcGFuOiBjZWxsLnJvd3NwYW5cbiAgICB9O1xuICB9KTtcbn07XG5cbmNvbnN0IG1hdGNoUm93SGVpZ2h0ID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBoZWlnaHRzOiBudW1iZXJbXSk6IENlbGxIZWlnaHQ8SFRNTFRhYmxlUm93RWxlbWVudD5bXSA9PiB7XG4gIHJldHVybiBBcnIubWFwKHdhcmVob3VzZS5hbGwsIChyb3csIGkpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudDogcm93LmVsZW1lbnQsXG4gICAgICBoZWlnaHQ6IGhlaWdodHNbaV1cbiAgICB9O1xuICB9KTtcbn07XG5cbmV4cG9ydCB0eXBlIHsgQ2VsbFdpZHRoU3BhbiB9O1xuZXhwb3J0IHtcbiAgcmVjYWxjdWxhdGVXaWR0aEZvckNlbGxzLFxuICByZWNhbGN1bGF0ZVdpZHRoRm9yQ29sdW1ucyxcbiAgcmVjYWxjdWxhdGVIZWlnaHRGb3JDZWxscyxcbiAgbWF0Y2hSb3dIZWlnaHRcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IFNpemUgfSBmcm9tICcuL1NpemUnO1xuXG4vLyBDb252ZXJ0IGFsbCBjb2x1bW4gd2lkdGhzIHRvIHBlcmNlbnQuXG5jb25zdCByZWRpc3RyaWJ1dGVUb1BlcmNlbnQgPSAod2lkdGhzOiBzdHJpbmdbXSwgdG90YWxXaWR0aDogbnVtYmVyKTogc3RyaW5nW10gPT4ge1xuICByZXR1cm4gQXJyLm1hcCh3aWR0aHMsICh3KSA9PiB7XG4gICAgY29uc3QgY29sVHlwZSA9IFNpemUuZnJvbSh3KTtcbiAgICByZXR1cm4gY29sVHlwZS5mb2xkKCgpID0+IHtcbiAgICAgIHJldHVybiB3O1xuICAgIH0sIChweCkgPT4ge1xuICAgICAgY29uc3QgcmF0aW8gPSBweCAvIHRvdGFsV2lkdGggKiAxMDA7XG4gICAgICByZXR1cm4gcmF0aW8gKyAnJSc7XG4gICAgfSwgKHBjKSA9PiB7XG4gICAgICByZXR1cm4gcGMgKyAnJSc7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgcmVkaXN0cmlidXRlVG9QeCA9ICh3aWR0aHM6IHN0cmluZ1tdLCB0b3RhbFdpZHRoOiBudW1iZXIsIG5ld1RvdGFsV2lkdGg6IG51bWJlcik6IHN0cmluZ1tdID0+IHtcbiAgY29uc3Qgc2NhbGUgPSBuZXdUb3RhbFdpZHRoIC8gdG90YWxXaWR0aDtcbiAgcmV0dXJuIEFyci5tYXAod2lkdGhzLCAodykgPT4ge1xuICAgIGNvbnN0IGNvbFR5cGUgPSBTaXplLmZyb20odyk7XG4gICAgcmV0dXJuIGNvbFR5cGUuZm9sZCgoKSA9PiB7XG4gICAgICByZXR1cm4gdztcbiAgICB9LCAocHgpID0+IHtcbiAgICAgIHJldHVybiAocHggKiBzY2FsZSkgKyAncHgnO1xuICAgIH0sIChwYykgPT4ge1xuICAgICAgcmV0dXJuIChwYyAvIDEwMCAqIG5ld1RvdGFsV2lkdGgpICsgJ3B4JztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCByZWRpc3RyaWJ1dGVFbXB0eSA9IChuZXdXaWR0aFR5cGU6IFNpemUsIGNvbHVtbnM6IG51bWJlcik6IHN0cmluZ1tdID0+IHtcbiAgY29uc3QgZiA9IG5ld1dpZHRoVHlwZS5mb2xkKFxuICAgICgpID0+XG4gICAgICBGdW4uY29uc3RhbnQoJycpLFxuICAgIChwaXhlbHMpID0+IHsgLy8gUGl4ZWxzXG4gICAgICBjb25zdCBudW0gPSBwaXhlbHMgLyBjb2x1bW5zO1xuICAgICAgcmV0dXJuIEZ1bi5jb25zdGFudChudW0gKyAncHgnKTtcbiAgICB9LFxuICAgICgpID0+IHsgLy8gUGVyY2VudGFnZXMuXG4gICAgICBjb25zdCBudW0gPSAxMDAgLyBjb2x1bW5zO1xuICAgICAgcmV0dXJuIEZ1bi5jb25zdGFudChudW0gKyAnJScpO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIEFyci5yYW5nZShjb2x1bW5zLCBmKTtcbn07XG5cbmNvbnN0IHJlZGlzdHJpYnV0ZVZhbHVlcyA9IChuZXdXaWR0aFR5cGU6IFNpemUsIHdpZHRoczogc3RyaW5nW10sIHRvdGFsV2lkdGg6IG51bWJlcik6IHN0cmluZ1tdID0+IHtcbiAgcmV0dXJuIG5ld1dpZHRoVHlwZS5mb2xkKCgpID0+IHtcbiAgICByZXR1cm4gd2lkdGhzO1xuICB9LCAocHgpID0+IHtcbiAgICByZXR1cm4gcmVkaXN0cmlidXRlVG9QeCh3aWR0aHMsIHRvdGFsV2lkdGgsIHB4KTtcbiAgfSwgKF9wYykgPT4ge1xuICAgIHJldHVybiByZWRpc3RyaWJ1dGVUb1BlcmNlbnQod2lkdGhzLCB0b3RhbFdpZHRoKTtcbiAgfSk7XG59O1xuXG5jb25zdCByZWRpc3RyaWJ1dGUgPSAod2lkdGhzOiBzdHJpbmdbXSwgdG90YWxXaWR0aDogbnVtYmVyLCBuZXdXaWR0aDogc3RyaW5nKTogc3RyaW5nW10gPT4ge1xuICBjb25zdCBuZXdUeXBlID0gU2l6ZS5mcm9tKG5ld1dpZHRoKTtcbiAgY29uc3QgZmxvYXRzID0gQXJyLmZvcmFsbCh3aWR0aHMsIChzKSA9PiB7XG4gICAgcmV0dXJuIHMgPT09ICcwcHgnO1xuICB9KSA/IHJlZGlzdHJpYnV0ZUVtcHR5KG5ld1R5cGUsIHdpZHRocy5sZW5ndGgpIDogcmVkaXN0cmlidXRlVmFsdWVzKG5ld1R5cGUsIHdpZHRocywgdG90YWxXaWR0aCk7XG4gIHJldHVybiBub3JtYWxpemUoZmxvYXRzKTtcbn07XG5cbmNvbnN0IHN1bSA9ICh2YWx1ZXM6IHN0cmluZ1tdLCBmYWxsYmFjazogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbiAgcmV0dXJuIEFyci5mb2xkcih2YWx1ZXMsIChyZXN0LCB2KSA9PiB7XG4gICAgcmV0dXJuIFNpemUuZnJvbSh2KS5mb2xkKEZ1bi5jb25zdGFudCgwKSwgRnVuLmlkZW50aXR5LCBGdW4uaWRlbnRpdHkpICsgcmVzdDtcbiAgfSwgMCk7XG59O1xuXG5jb25zdCByb3VuZERvd24gPSAobnVtOiBudW1iZXIsIHVuaXQ6IHN0cmluZyk6IHsgdmFsdWU6IHN0cmluZzsgcmVtYWluZGVyOiBudW1iZXIgfSA9PiB7XG4gIGNvbnN0IGZsb29yZWQgPSBNYXRoLmZsb29yKG51bSk7XG4gIHJldHVybiB7IHZhbHVlOiBmbG9vcmVkICsgdW5pdCwgcmVtYWluZGVyOiBudW0gLSBmbG9vcmVkIH07XG59O1xuXG5jb25zdCBhZGQgPSAodmFsdWU6IHN0cmluZywgYW1vdW50OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gU2l6ZS5mcm9tKHZhbHVlKS5mb2xkKEZ1bi5jb25zdGFudCh2YWx1ZSksIChweCkgPT4ge1xuICAgIHJldHVybiAocHggKyBhbW91bnQpICsgJ3B4JztcbiAgfSwgKHBjKSA9PiB7XG4gICAgcmV0dXJuIChwYyArIGFtb3VudCkgKyAnJSc7XG4gIH0pO1xufTtcblxuY29uc3Qgbm9ybWFsaXplID0gKHZhbHVlczogc3RyaW5nW10pOiBzdHJpbmdbXSA9PiB7XG4gIGlmICh2YWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuICBjb25zdCBzY2FuID0gQXJyLmZvbGRyKHZhbHVlcywgKHJlc3QsIHZhbHVlKSA9PiB7XG4gICAgY29uc3QgaW5mbyA9IFNpemUuZnJvbSh2YWx1ZSkuZm9sZChcbiAgICAgICgpID0+ICh7IHZhbHVlLCByZW1haW5kZXI6IDAgfSksXG4gICAgICAobnVtKSA9PiByb3VuZERvd24obnVtLCAncHgnKSxcbiAgICAgIChudW0pID0+ICh7IHZhbHVlOiBudW0gKyAnJScsIHJlbWFpbmRlcjogMCB9KVxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3V0cHV0OiBbIGluZm8udmFsdWUgXS5jb25jYXQocmVzdC5vdXRwdXQpLFxuICAgICAgcmVtYWluZGVyOiByZXN0LnJlbWFpbmRlciArIGluZm8ucmVtYWluZGVyXG4gICAgfTtcbiAgfSwgeyBvdXRwdXQ6IFtdIGFzIHN0cmluZ1tdLCByZW1haW5kZXI6IDAgfSk7XG5cbiAgY29uc3QgciA9IHNjYW4ub3V0cHV0O1xuICByZXR1cm4gci5zbGljZSgwLCByLmxlbmd0aCAtIDEpLmNvbmNhdChbIGFkZChyW3IubGVuZ3RoIC0gMV0sIE1hdGgucm91bmQoc2Nhbi5yZW1haW5kZXIpKSBdKTtcbn07XG5cbmNvbnN0IHZhbGlkYXRlID0gU2l6ZS5mcm9tO1xuXG5leHBvcnQgeyB2YWxpZGF0ZSwgcmVkaXN0cmlidXRlLCBzdW0sIG5vcm1hbGl6ZSB9O1xuXG4iLCJpbXBvcnQgeyBBZHQsIFN0cmluZ3MgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpemUge1xuICBmb2xkOiA8VD4gKFxuICAgIGludmFsaWQ6IChyYXc6IHN0cmluZykgPT4gVCxcbiAgICBwaXhlbHM6ICh2YWx1ZTogbnVtYmVyKSA9PiBULFxuICAgIHBlcmNlbnQ6ICh2YWx1ZTogbnVtYmVyKSA9PiBUXG4gICkgPT4gVDtcbiAgbWF0Y2g6IDxUPiAoYnJhbmNoZXM6IHtcbiAgICBpbnZhbGlkOiAocmF3OiBzdHJpbmcpID0+IFQ7XG4gICAgcGl4ZWxzOiAodmFsdWU6IG51bWJlcikgPT4gVDtcbiAgICBwZXJjZW50OiAodmFsdWU6IG51bWJlcikgPT4gVDtcbiAgfSkgPT4gVDtcbiAgbG9nOiAobGFiZWw6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuY29uc3QgYWR0OiB7XG4gIGludmFsaWQ6IChyYXc6IHN0cmluZykgPT4gU2l6ZTtcbiAgcGl4ZWxzOiAodmFsdWU6IG51bWJlcikgPT4gU2l6ZTtcbiAgcGVyY2VudDogKHZhbHVlOiBudW1iZXIpID0+IFNpemU7XG59ID0gQWR0LmdlbmVyYXRlKFtcbiAgeyBpbnZhbGlkOiBbICdyYXcnIF0gfSxcbiAgeyBwaXhlbHM6IFsgJ3ZhbHVlJyBdIH0sXG4gIHsgcGVyY2VudDogWyAndmFsdWUnIF0gfVxuXSk7XG5cbmNvbnN0IHZhbGlkYXRlRm9yID0gKHN1ZmZpeDogc3RyaW5nLCB0eXBlOiAodmFsdWU6IG51bWJlcikgPT4gU2l6ZSwgdmFsdWU6IHN0cmluZyk6IFNpemUgPT4ge1xuICBjb25zdCByYXdBbW91bnQgPSB2YWx1ZS5zdWJzdHJpbmcoMCwgdmFsdWUubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCk7XG4gIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQocmF3QW1vdW50KTtcbiAgcmV0dXJuIHJhd0Ftb3VudCA9PT0gYW1vdW50LnRvU3RyaW5nKCkgPyB0eXBlKGFtb3VudCkgOiBhZHQuaW52YWxpZCh2YWx1ZSk7XG59O1xuXG5jb25zdCBmcm9tID0gKHZhbHVlOiBzdHJpbmcpOiBTaXplID0+IHtcbiAgaWYgKFN0cmluZ3MuZW5kc1dpdGgodmFsdWUsICclJykpIHtcbiAgICByZXR1cm4gdmFsaWRhdGVGb3IoJyUnLCBhZHQucGVyY2VudCwgdmFsdWUpO1xuICB9XG4gIGlmIChTdHJpbmdzLmVuZHNXaXRoKHZhbHVlLCAncHgnKSkge1xuICAgIHJldHVybiB2YWxpZGF0ZUZvcigncHgnLCBhZHQucGl4ZWxzLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGFkdC5pbnZhbGlkKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBTaXplID0ge1xuICAuLi5hZHQsXG4gIGZyb21cbn07XG4iLCJpbXBvcnQgeyBGdW4sIHR5cGUgT3B0aW9uYWwsIFN0cmluZ3MgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDc3MsIERpbWVuc2lvbiwgSGVpZ2h0LCBTdWdhckJvZHksIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUsIFRyYXZlcnNlLCBXaWR0aCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFRhYmxlTG9va3VwIGZyb20gJy4uL2FwaS9UYWJsZUxvb2t1cCc7XG5pbXBvcnQgeyBnZXRTcGFuIH0gZnJvbSAnLi4vdXRpbC9DZWxsVXRpbHMnO1xuXG50eXBlIFNpemVHZXR0ZXIgPSAoZTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4gbnVtYmVyO1xudHlwZSBTaXplU2V0dGVyID0gKGU6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG5cbmNvbnN0IHJQZXJjZW50YWdlQmFzZWRTaXplUmVnZXggPSAvKFxcZCsoXFwuXFxkKyk/KSUvO1xuY29uc3QgclBpeGVsQmFzZWRTaXplUmVnZXggPSAvKFxcZCsoXFwuXFxkKyk/KXB4fGVtLztcbmNvbnN0IGlzQ29sID0gU3VnYXJOb2RlLmlzVGFnKCdjb2wnKTtcbmNvbnN0IGlzUm93ID0gU3VnYXJOb2RlLmlzVGFnKCd0cicpO1xuXG5jb25zdCBnZXRQZXJjZW50U2l6ZSA9IChlbG06IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIG91dGVyR2V0dGVyOiBTaXplR2V0dGVyLCBpbm5lckdldHRlcjogU2l6ZUdldHRlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHJlbGF0aXZlUGFyZW50ID0gVHJhdmVyc2UucGFyZW50RWxlbWVudChlbG0pLmdldE9yVGh1bmsoKCkgPT4gU3VnYXJCb2R5LmdldEJvZHkoVHJhdmVyc2Uub3duZXIoZWxtKSkpO1xuICByZXR1cm4gb3V0ZXJHZXR0ZXIoZWxtKSAvIGlubmVyR2V0dGVyKHJlbGF0aXZlUGFyZW50KSAqIDEwMDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRQaXhlbFdpZHRoID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGFtb3VudDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIENzcy5zZXQoY2VsbCwgJ3dpZHRoJywgYW1vdW50ICsgJ3B4Jyk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0UGVyY2VudGFnZVdpZHRoID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGFtb3VudDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIENzcy5zZXQoY2VsbCwgJ3dpZHRoJywgYW1vdW50ICsgJyUnKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRIZWlnaHQgPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgYW1vdW50OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgQ3NzLnNldChjZWxsLCAnaGVpZ2h0JywgYW1vdW50ICsgJ3B4Jyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlSGVpZ2h0ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgQ3NzLnJlbW92ZShjZWxsLCAnaGVpZ2h0Jyk7XG59O1xuXG5jb25zdCBnZXRIZWlnaHRWYWx1ZSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogc3RyaW5nID0+XG4gIEhlaWdodC5nZXRSdW50aW1lKGNlbGwpICsgJ3B4JztcblxuY29uc3QgY29udmVydCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBudW1iZXI6IG51bWJlciwgZ2V0dGVyOiBTaXplR2V0dGVyLCBzZXR0ZXI6IFNpemVTZXR0ZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBuZXdTaXplID0gVGFibGVMb29rdXAudGFibGUoY2VsbCkubWFwKCh0YWJsZSkgPT4ge1xuICAgIGNvbnN0IHRvdGFsID0gZ2V0dGVyKHRhYmxlKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcigobnVtYmVyIC8gMTAwLjApICogdG90YWwpO1xuICB9KS5nZXRPcihudW1iZXIpO1xuICBzZXR0ZXIoY2VsbCwgbmV3U2l6ZSk7XG4gIHJldHVybiBuZXdTaXplO1xufTtcblxuY29uc3Qgbm9ybWFsaXplUGl4ZWxTaXplID0gKHZhbHVlOiBzdHJpbmcsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sIGdldHRlcjogU2l6ZUdldHRlciwgc2V0dGVyOiBTaXplU2V0dGVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgbnVtYmVyID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIHJldHVybiBTdHJpbmdzLmVuZHNXaXRoKHZhbHVlLCAnJScpICYmIFN1Z2FyTm9kZS5uYW1lKGNlbGwpICE9PSAndGFibGUnID8gY29udmVydChjZWxsLCBudW1iZXIsIGdldHRlciwgc2V0dGVyKSA6IG51bWJlcjtcbn07XG5cbmNvbnN0IGdldFRvdGFsSGVpZ2h0ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBudW1iZXIgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGdldEhlaWdodFZhbHVlKGNlbGwpO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIEhlaWdodC5nZXQoY2VsbCk7XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZVBpeGVsU2l6ZSh2YWx1ZSwgY2VsbCwgSGVpZ2h0LmdldCwgc2V0SGVpZ2h0KTtcbn07XG5cbmNvbnN0IGdldCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCB0eXBlOiAncm93c3BhbicgfCAnY29sc3BhbicsIGY6IChlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCB2ID0gZihjZWxsKTtcbiAgY29uc3Qgc3BhbiA9IGdldFNwYW4oY2VsbCwgdHlwZSk7XG4gIHJldHVybiB2IC8gc3Bhbjtcbn07XG5cbmNvbnN0IGdldFJhdyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBwcm9wOiAnaGVpZ2h0JyB8ICd3aWR0aCcpOiBPcHRpb25hbDxzdHJpbmc+ID0+IHtcbiAgLy8gVHJ5IHRvIHVzZSB0aGUgc3R5bGUgZmlyc3QsIG90aGVyd2lzZSBhdHRlbXB0IHRvIGdldCB0aGUgdmFsdWUgZnJvbSBhbiBhdHRyaWJ1dGVcbiAgcmV0dXJuIENzcy5nZXRSYXcoZWxlbWVudCwgcHJvcCkub3JUaHVuaygoKSA9PiB7XG4gICAgcmV0dXJuIEF0dHJpYnV0ZS5nZXRPcHQoZWxlbWVudCwgcHJvcCkubWFwKCh2YWwpID0+IHZhbCArICdweCcpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSYXdXaWR0aCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogT3B0aW9uYWw8c3RyaW5nPiA9PlxuICBnZXRSYXcoZWxlbWVudCwgJ3dpZHRoJyk7XG5cbmV4cG9ydCBjb25zdCBnZXRSYXdIZWlnaHQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgZ2V0UmF3KGVsZW1lbnQsICdoZWlnaHQnKTtcblxuLy8gR2V0IGEgcGVyY2VudGFnZSBzaXplIGZvciBhIHBlcmNlbnRhZ2UgcGFyZW50IHRhYmxlXG5leHBvcnQgY29uc3QgZ2V0UGVyY2VudGFnZVdpZHRoID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+KTogbnVtYmVyID0+XG4gIGdldFBlcmNlbnRTaXplKGNlbGwsIFdpZHRoLmdldCwgV2lkdGguZ2V0SW5uZXIpO1xuXG5leHBvcnQgY29uc3QgZ2V0UGl4ZWxXaWR0aCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50Pik6IG51bWJlciA9PlxuICAvLyBGb3IgY29sIGVsZW1lbnRzIHVzZSB0aGUgY29tcHV0ZWQgd2lkdGggYXMgY29sIGVsZW1lbnRzIGFyZW4ndCBhZmZlY3RlZCBieSBib3JkZXJzLCBwYWRkaW5nLCBldGMuLi5cbiAgaXNDb2woY2VsbCkgPyBNYXRoLnJvdW5kKFdpZHRoLmdldChjZWxsKSkgOiBXaWR0aC5nZXRSdW50aW1lKGNlbGwpO1xuXG5leHBvcnQgY29uc3QgZ2V0SGVpZ2h0ID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZVJvd0VsZW1lbnQ+KTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIGlzUm93KGNlbGwpID8gSGVpZ2h0LmdldChjZWxsKSA6IGdldChjZWxsIGFzIFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4sICdyb3dzcGFuJywgZ2V0VG90YWxIZWlnaHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEdlbmVyaWNXaWR0aCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogT3B0aW9uYWw8RGltZW5zaW9uLkRpbWVuc2lvbjwnZml4ZWQnIHwgJ3JlbGF0aXZlJyB8ICdlbXB0eSc+PiA9PiB7XG4gIGNvbnN0IHdpZHRoID0gZ2V0UmF3V2lkdGgoY2VsbCk7XG4gIHJldHVybiB3aWR0aC5iaW5kKCh3KSA9PiBEaW1lbnNpb24ucGFyc2UodywgWyAnZml4ZWQnLCAncmVsYXRpdmUnLCAnZW1wdHknIF0pKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRHZW5lcmljV2lkdGggPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgYW1vdW50OiBudW1iZXIsIHVuaXQ6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBDc3Muc2V0KGNlbGwsICd3aWR0aCcsIGFtb3VudCArIHVuaXQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFBpeGVsVGFibGVXaWR0aCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogc3RyaW5nID0+IFdpZHRoLmdldCh0YWJsZSkgKyAncHgnO1xuZXhwb3J0IGNvbnN0IGdldFBpeGVsVGFibGVIZWlnaHQgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZyA9PiBIZWlnaHQuZ2V0KHRhYmxlKSArICdweCc7XG5cbmV4cG9ydCBjb25zdCBnZXRQZXJjZW50VGFibGVXaWR0aCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogc3RyaW5nID0+IGdldFBlcmNlbnRTaXplKHRhYmxlLCBXaWR0aC5nZXQsIFdpZHRoLmdldElubmVyKSArICclJztcbmV4cG9ydCBjb25zdCBnZXRQZXJjZW50VGFibGVIZWlnaHQgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHN0cmluZyA9PiBnZXRQZXJjZW50U2l6ZSh0YWJsZSwgSGVpZ2h0LmdldCwgSGVpZ2h0LmdldElubmVyKSArICclJztcblxuZXhwb3J0IGNvbnN0IGlzUGVyY2VudFNpemluZyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogYm9vbGVhbiA9PiBnZXRSYXdXaWR0aCh0YWJsZSkuZXhpc3RzKChzaXplKSA9PiByUGVyY2VudGFnZUJhc2VkU2l6ZVJlZ2V4LnRlc3Qoc2l6ZSkpO1xuZXhwb3J0IGNvbnN0IGlzUGl4ZWxTaXppbmcgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IGJvb2xlYW4gPT4gZ2V0UmF3V2lkdGgodGFibGUpLmV4aXN0cygoc2l6ZSkgPT4gclBpeGVsQmFzZWRTaXplUmVnZXgudGVzdChzaXplKSk7XG5leHBvcnQgY29uc3QgaXNOb25lU2l6aW5nID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBib29sZWFuID0+IGdldFJhd1dpZHRoKHRhYmxlKS5pc05vbmUoKTtcblxuZXhwb3J0IGNvbnN0IHBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCA9IEZ1bi5jb25zdGFudChyUGVyY2VudGFnZUJhc2VkU2l6ZVJlZ2V4KTtcbmV4cG9ydCBjb25zdCBwaXhlbEJhc2VkU2l6ZVJlZ2V4ID0gRnVuLmNvbnN0YW50KHJQaXhlbEJhc2VkU2l6ZVJlZ2V4KTtcbiIsImltcG9ydCB7IEZ1biwgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IEJvdW5kcywgRGV0YWlsRXh0IH0gZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5cbmNvbnN0IGluU2VsZWN0aW9uID0gKGJvdW5kczogQm91bmRzLCBkZXRhaWw6IERldGFpbEV4dCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBsZWZ0RWRnZSA9IGRldGFpbC5jb2x1bW47XG4gIGNvbnN0IHJpZ2h0RWRnZSA9IGRldGFpbC5jb2x1bW4gKyBkZXRhaWwuY29sc3BhbiAtIDE7XG4gIGNvbnN0IHRvcEVkZ2UgPSBkZXRhaWwucm93O1xuICBjb25zdCBib3R0b21FZGdlID0gZGV0YWlsLnJvdyArIGRldGFpbC5yb3dzcGFuIC0gMTtcbiAgcmV0dXJuIChcbiAgICBsZWZ0RWRnZSA8PSBib3VuZHMuZmluaXNoQ29sICYmIHJpZ2h0RWRnZSA+PSBib3VuZHMuc3RhcnRDb2xcbiAgKSAmJiAoXG4gICAgdG9wRWRnZSA8PSBib3VuZHMuZmluaXNoUm93ICYmIGJvdHRvbUVkZ2UgPj0gYm91bmRzLnN0YXJ0Um93XG4gICk7XG59O1xuXG4vLyBOb3RlLCBzb21ldGhpbmcgaXMgKndpdGhpbiogaWYgaXQgaXMgY29tcGxldGVseSBjb250YWluZWQgd2l0aGluIHRoZSBib3VuZHMuXG5jb25zdCBpc1dpdGhpbiA9IChib3VuZHM6IEJvdW5kcywgZGV0YWlsOiBEZXRhaWxFeHQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIChcbiAgICBkZXRhaWwuY29sdW1uID49IGJvdW5kcy5zdGFydENvbCAmJlxuICAgIChkZXRhaWwuY29sdW1uICsgZGV0YWlsLmNvbHNwYW4gLSAxKSA8PSBib3VuZHMuZmluaXNoQ29sICYmXG4gICAgZGV0YWlsLnJvdyA+PSBib3VuZHMuc3RhcnRSb3cgJiZcbiAgICAoZGV0YWlsLnJvdyArIGRldGFpbC5yb3dzcGFuIC0gMSkgPD0gYm91bmRzLmZpbmlzaFJvd1xuICApO1xufTtcblxuY29uc3QgaXNSZWN0YW5ndWxhciA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgYm91bmRzOiBCb3VuZHMpOiBPcHRpb25hbDxCb3VuZHM+ID0+IHtcbiAgbGV0IGlzUmVjdCA9IHRydWU7XG4gIGNvbnN0IGRldGFpbElzV2l0aGluID0gRnVuLmN1cnJ5KGlzV2l0aGluLCBib3VuZHMpO1xuXG4gIGZvciAobGV0IGkgPSBib3VuZHMuc3RhcnRSb3c7IGkgPD0gYm91bmRzLmZpbmlzaFJvdzsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IGJvdW5kcy5zdGFydENvbDsgaiA8PSBib3VuZHMuZmluaXNoQ29sOyBqKyspIHtcbiAgICAgIGlzUmVjdCA9IGlzUmVjdCAmJiBXYXJlaG91c2UuZ2V0QXQod2FyZWhvdXNlLCBpLCBqKS5leGlzdHMoZGV0YWlsSXNXaXRoaW4pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpc1JlY3QgPyBPcHRpb25hbC5zb21lKGJvdW5kcykgOiBPcHRpb25hbC5ub25lPEJvdW5kcz4oKTtcbn07XG5cbmV4cG9ydCB7XG4gIGluU2VsZWN0aW9uLFxuICBpc1dpdGhpbixcbiAgaXNSZWN0YW5ndWxhclxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCB0eXBlIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IENvbXBhcmUsIHR5cGUgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5cbmltcG9ydCAqIGFzIENlbGxCb3VuZHMgZnJvbSAnLi9DZWxsQm91bmRzJztcbmltcG9ydCAqIGFzIENlbGxHcm91cCBmcm9tICcuL0NlbGxHcm91cCc7XG5cbmNvbnN0IG1vdmVCeSA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Piwgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pj4gPT4ge1xuICByZXR1cm4gV2FyZWhvdXNlLmZpbmRJdGVtKHdhcmVob3VzZSwgY2VsbCwgQ29tcGFyZS5lcSkuYmluZCgoZGV0YWlsKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRSb3cgPSByb3cgPiAwID8gZGV0YWlsLnJvdyArIGRldGFpbC5yb3dzcGFuIC0gMSA6IGRldGFpbC5yb3c7XG4gICAgY29uc3Qgc3RhcnRDb2wgPSBjb2x1bW4gPiAwID8gZGV0YWlsLmNvbHVtbiArIGRldGFpbC5jb2xzcGFuIC0gMSA6IGRldGFpbC5jb2x1bW47XG4gICAgY29uc3QgZGVzdCA9IFdhcmVob3VzZS5nZXRBdCh3YXJlaG91c2UsIHN0YXJ0Um93ICsgcm93LCBzdGFydENvbCArIGNvbHVtbik7XG4gICAgcmV0dXJuIGRlc3QubWFwKChkKSA9PiB7XG4gICAgICByZXR1cm4gZC5lbGVtZW50O1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGludGVyY2VwdHMgPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10+ID0+IHtcbiAgcmV0dXJuIENlbGxHcm91cC5nZXRBbnlCb3god2FyZWhvdXNlLCBzdGFydCwgZmluaXNoKS5tYXAoKGJvdW5kcykgPT4ge1xuICAgIGNvbnN0IGluc2lkZSA9IFdhcmVob3VzZS5maWx0ZXJJdGVtcyh3YXJlaG91c2UsIEZ1bi5jdXJyeShDZWxsQm91bmRzLmluU2VsZWN0aW9uLCBib3VuZHMpKTtcbiAgICByZXR1cm4gQXJyLm1hcChpbnNpZGUsIChkZXRhaWwpID0+IHtcbiAgICAgIHJldHVybiBkZXRhaWwuZWxlbWVudDtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBwYXJlbnRDZWxsID0gKHdhcmVob3VzZTogV2FyZWhvdXNlLCBpbm5lckNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PiB7XG4gIGNvbnN0IGlzQ29udGFpbmVkQnkgPSAoYzE6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGMyOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgcmV0dXJuIENvbXBhcmUuY29udGFpbnMoYzIsIGMxKTtcbiAgfTtcbiAgcmV0dXJuIFdhcmVob3VzZS5maW5kSXRlbSh3YXJlaG91c2UsIGlubmVyQ2VsbCwgaXNDb250YWluZWRCeSkubWFwKChkZXRhaWwpID0+IHtcbiAgICByZXR1cm4gZGV0YWlsLmVsZW1lbnQ7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgbW92ZUJ5LFxuICBpbnRlcmNlcHRzLFxuICBwYXJlbnRDZWxsXG59O1xuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb21wYXJlLCB0eXBlIFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0IHsgV2FyZWhvdXNlIH0gZnJvbSAnLi4vYXBpL1dhcmVob3VzZSc7XG5cbmltcG9ydCAqIGFzIENlbGxCb3VuZHMgZnJvbSAnLi9DZWxsQm91bmRzJztcblxuY29uc3QgZ2V0Qm91bmRzID0gKGRldGFpbEE6IFN0cnVjdHMuRGV0YWlsRXh0LCBkZXRhaWxCOiBTdHJ1Y3RzLkRldGFpbEV4dCk6IFN0cnVjdHMuQm91bmRzID0+IHtcbiAgcmV0dXJuIFN0cnVjdHMuYm91bmRzKFxuICAgIE1hdGgubWluKGRldGFpbEEucm93LCBkZXRhaWxCLnJvdyksXG4gICAgTWF0aC5taW4oZGV0YWlsQS5jb2x1bW4sIGRldGFpbEIuY29sdW1uKSxcbiAgICBNYXRoLm1heChkZXRhaWxBLnJvdyArIGRldGFpbEEucm93c3BhbiAtIDEsIGRldGFpbEIucm93ICsgZGV0YWlsQi5yb3dzcGFuIC0gMSksXG4gICAgTWF0aC5tYXgoZGV0YWlsQS5jb2x1bW4gKyBkZXRhaWxBLmNvbHNwYW4gLSAxLCBkZXRhaWxCLmNvbHVtbiArIGRldGFpbEIuY29sc3BhbiAtIDEpXG4gICk7XG59O1xuXG5jb25zdCBnZXRBbnlCb3ggPSAod2FyZWhvdXNlOiBXYXJlaG91c2UsIHN0YXJ0Q2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgZmluaXNoQ2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pik6IE9wdGlvbmFsPFN0cnVjdHMuQm91bmRzPiA9PiB7XG4gIGNvbnN0IHN0YXJ0Q29vcmRzID0gV2FyZWhvdXNlLmZpbmRJdGVtKHdhcmVob3VzZSwgc3RhcnRDZWxsLCBDb21wYXJlLmVxKTtcbiAgY29uc3QgZmluaXNoQ29vcmRzID0gV2FyZWhvdXNlLmZpbmRJdGVtKHdhcmVob3VzZSwgZmluaXNoQ2VsbCwgQ29tcGFyZS5lcSk7XG4gIHJldHVybiBzdGFydENvb3Jkcy5iaW5kKChzYykgPT4ge1xuICAgIHJldHVybiBmaW5pc2hDb29yZHMubWFwKChmYykgPT4ge1xuICAgICAgcmV0dXJuIGdldEJvdW5kcyhzYywgZmMpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldEJveCA9ICh3YXJlaG91c2U6IFdhcmVob3VzZSwgc3RhcnRDZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2hDZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogT3B0aW9uYWw8U3RydWN0cy5Cb3VuZHM+ID0+IHtcbiAgcmV0dXJuIGdldEFueUJveCh3YXJlaG91c2UsIHN0YXJ0Q2VsbCwgZmluaXNoQ2VsbCkuYmluZCgoYm91bmRzKSA9PiB7XG4gICAgcmV0dXJuIENlbGxCb3VuZHMuaXNSZWN0YW5ndWxhcih3YXJlaG91c2UsIGJvdW5kcyk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0QW55Qm94LFxuICBnZXRCb3hcbn07XG4iLCJpbXBvcnQgeyBOYW1lc3BhY2UgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5jb25zdCBzdHlsZXMgPSBOYW1lc3BhY2UuY3NzKCdlcGhveC1zbm9va2VyJyk7XG5cbmV4cG9ydCBjb25zdCByZXNvbHZlID0gc3R5bGVzLnJlc29sdmU7XG4iLCJpbXBvcnQgeyBGdW4gfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDc3MsIHR5cGUgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5leHBvcnQgY29uc3QgZ2V0QXR0clZhbHVlID0gKGNlbGw6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgbmFtZTogc3RyaW5nLCBmYWxsYmFjazogbnVtYmVyID0gMCk6IG51bWJlciA9PlxuICBBdHRyaWJ1dGUuZ2V0T3B0KGNlbGwsIG5hbWUpLm1hcCgodmFsdWUpID0+IHBhcnNlSW50KHZhbHVlLCAxMCkpLmdldE9yKGZhbGxiYWNrKTtcblxuZXhwb3J0IGNvbnN0IGdldFNwYW4gPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PiwgdHlwZTogJ2NvbHNwYW4nIHwgJ3Jvd3NwYW4nKTogbnVtYmVyID0+XG4gIGdldEF0dHJWYWx1ZShjZWxsLCB0eXBlLCAxKTtcblxuZXhwb3J0IGNvbnN0IGhhc0NvbHNwYW4gPSAoY2VsbE9yQ29sOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50Pik6IGJvb2xlYW4gPT4ge1xuICBpZiAoU3VnYXJOb2RlLmlzVGFnKCdjb2wnKShjZWxsT3JDb2wpKSB7XG4gICAgcmV0dXJuIGdldEF0dHJWYWx1ZShjZWxsT3JDb2wsICdzcGFuJywgMSkgPiAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRTcGFuKGNlbGxPckNvbCBhcyBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCAnY29sc3BhbicpID4gMTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGhhc1Jvd3NwYW4gPSAoY2VsbDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50Pik6IGJvb2xlYW4gPT5cbiAgZ2V0U3BhbihjZWxsLCAncm93c3BhbicpID4gMTtcblxuZXhwb3J0IGNvbnN0IGdldENzc1ZhbHVlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgcHJvcGVydHk6IHN0cmluZyk6IG51bWJlciA9PlxuICBwYXJzZUludChDc3MuZ2V0KGVsZW1lbnQsIHByb3BlcnR5KSwgMTApO1xuXG5leHBvcnQgY29uc3QgbWluV2lkdGggPSBGdW4uY29uc3RhbnQoMTApO1xuZXhwb3J0IGNvbnN0IG1pbkhlaWdodCA9IEZ1bi5jb25zdGFudCgxMCk7XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuXG5leHBvcnQgY29uc3QgdW5pcXVlQ29sdW1ucyA9IChkZXRhaWxzOiBTdHJ1Y3RzLkRldGFpbEV4dFtdKTogU3RydWN0cy5EZXRhaWxFeHRbXSA9PiB7XG4gIGNvbnN0IHVuaXF1ZUNoZWNrID0gKHJlc3Q6IFN0cnVjdHMuRGV0YWlsRXh0W10sIGRldGFpbDogU3RydWN0cy5EZXRhaWxFeHQpID0+IHtcbiAgICBjb25zdCBjb2x1bW5FeGlzdHMgPSBBcnIuZXhpc3RzKHJlc3QsIChjdXJyZW50RGV0YWlsKSA9PiBjdXJyZW50RGV0YWlsLmNvbHVtbiA9PT0gZGV0YWlsLmNvbHVtbik7XG5cbiAgICByZXR1cm4gY29sdW1uRXhpc3RzID8gcmVzdCA6IHJlc3QuY29uY2F0KFsgZGV0YWlsIF0pO1xuICB9O1xuXG4gIHJldHVybiBBcnIuZm9sZGwoZGV0YWlscywgdW5pcXVlQ2hlY2ssIFtdKS5zb3J0KChkZXRhaWxBLCBkZXRhaWxCKSA9PlxuICAgIGRldGFpbEEuY29sdW1uIC0gZGV0YWlsQi5jb2x1bW5cbiAgKTtcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBTZWxlY3RvcnMsIHR5cGUgU3VnYXJFbGVtZW50LCBUcmF2ZXJzZSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmNvbnN0IGZpcnN0TGF5ZXIgPSA8VCBleHRlbmRzIEVsZW1lbnQ+KHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBTdWdhckVsZW1lbnQ8VD5bXSA9PiB7XG4gIHJldHVybiBmaWx0ZXJGaXJzdExheWVyKHNjb3BlLCBzZWxlY3RvciwgRnVuLmFsd2F5cyk7XG59O1xuXG5jb25zdCBmaWx0ZXJGaXJzdExheWVyID0gPFQgZXh0ZW5kcyBFbGVtZW50PihzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nLCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PiB7XG4gIHJldHVybiBBcnIuYmluZChUcmF2ZXJzZS5jaGlsZHJlbihzY29wZSksICh4KSA9PiB7XG4gICAgaWYgKFNlbGVjdG9ycy5pczxUPih4LCBzZWxlY3RvcikpIHtcbiAgICAgIHJldHVybiBwcmVkaWNhdGUoeCkgPyBbIHggXSA6IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsdGVyRmlyc3RMYXllcih4LCBzZWxlY3RvciwgcHJlZGljYXRlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IHtcbiAgZmlyc3RMYXllcixcbiAgZmlsdGVyRmlyc3RMYXllclxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPYmosIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSAqIGFzIFN0cnVjdHMgZnJvbSAnLi4vYXBpL1N0cnVjdHMnO1xuaW1wb3J0ICogYXMgR3JpZFJvdyBmcm9tICcuLi9tb2RlbC9HcmlkUm93JztcblxuZXhwb3J0IGNvbnN0IExPQ0tFRF9DT0xfQVRUUiA9ICdkYXRhLXNub29rZXItbG9ja2VkLWNvbHMnO1xuXG5jb25zdCBnZXRMb2NrZWRDb2x1bW5zRnJvbVRhYmxlID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pOiBPcHRpb25hbDxSZWNvcmQ8c3RyaW5nLCB0cnVlPj4gPT5cbiAgQXR0cmlidXRlLmdldE9wdCh0YWJsZSwgTE9DS0VEX0NPTF9BVFRSKVxuICAgIC5iaW5kKChsb2NrZWRDb2xTdHIpID0+IE9wdGlvbmFsLmZyb20obG9ja2VkQ29sU3RyLm1hdGNoKC9cXGQrL2cpKSlcbiAgICAubWFwKChsb2NrZWRDb2xzKSA9PiBBcnIubWFwVG9PYmplY3QobG9ja2VkQ29scywgRnVuLmFsd2F5cykpO1xuXG4vLyBOZWVkIHRvIGNoZWNrIGFsbCBvZiB0aGUgY2VsbHMgdG8gZGV0ZXJtaW5lIHdoaWNoIGNvbHVtbnMgYXJlIGxvY2tlZCAtIHJlYXNvbmluZyBpcyBiZWNhdXNlIHJvd3NwYW4gYW5kIGNvbHNwYW4gY2VsbHMgd2hlcmUgdGhlIHNhbWUgY2VsbCBpcyB1c2VkIGJ5IG11bHRpcGxlIGNvbHVtbnNcbmNvbnN0IGdldExvY2tlZENvbHVtbnNGcm9tR3JpZCA9IChncmlkOiBTdHJ1Y3RzLlJvd0NlbGxzW10pOiBudW1iZXJbXSA9PiB7XG4gIGNvbnN0IGxvY2tlZCA9IEFyci5mb2xkbChHcmlkUm93LmV4dHJhY3RHcmlkRGV0YWlscyhncmlkKS5yb3dzLCAoYWNjLCByb3cpID0+IHtcbiAgICBBcnIuZWFjaChyb3cuY2VsbHMsIChjZWxsLCBpZHgpID0+IHtcbiAgICAgIGlmIChjZWxsLmlzTG9ja2VkKSB7XG4gICAgICAgIGFjY1tpZHhdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSBhcyBSZWNvcmQ8bnVtYmVyLCBib29sZWFuPik7XG5cbiAgY29uc3QgbG9ja2VkQXJyID0gT2JqLm1hcFRvQXJyYXkobG9ja2VkLCAoX3ZhbCwga2V5KSA9PiBwYXJzZUludChrZXksIDEwKSk7XG4gIHJldHVybiBBcnIuc29ydChsb2NrZWRBcnIpO1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0TG9ja2VkQ29sdW1uc0Zyb21UYWJsZSxcbiAgZ2V0TG9ja2VkQ29sdW1uc0Zyb21HcmlkXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmNvbnN0IHVuaXF1ZSA9IDxUPiAoeHM6IFRbXSwgZXE6IChhOiBULCBiOiBUKSA9PiBib29sZWFuKTogVFtdID0+IHtcbiAgY29uc3QgcmVzdWx0OiBUW10gPSBbXTtcbiAgQXJyLmVhY2goeHMsICh4LCBpKSA9PiB7XG4gICAgaWYgKGkgPCB4cy5sZW5ndGggLSAxICYmICFlcSh4LCB4c1tpICsgMV0pKSB7XG4gICAgICByZXN1bHQucHVzaCh4KTtcbiAgICB9IGVsc2UgaWYgKGkgPT09IHhzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHgpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5jb25zdCBkZWR1Y2UgPSAoeHM6IE9wdGlvbmFsPG51bWJlcj5bXSwgaW5kZXg6IG51bWJlcik6IE9wdGlvbmFsPG51bWJlcj4gPT4ge1xuICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHhzLmxlbmd0aCAtIDEpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxudW1iZXI+KCk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50ID0geHNbaW5kZXhdLmZvbGQoKCkgPT4ge1xuICAgIGNvbnN0IHJlc3QgPSBBcnIucmV2ZXJzZSh4cy5zbGljZSgwLCBpbmRleCkpO1xuICAgIHJldHVybiBBcnIuZmluZE1hcChyZXN0LCAoYSwgaSkgPT4gYS5tYXAoKGFhKSA9PiAoeyB2YWx1ZTogYWEsIGRlbHRhOiBpICsgMSB9KSkpO1xuICB9LCAoYykgPT4gT3B0aW9uYWwuc29tZSh7IHZhbHVlOiBjLCBkZWx0YTogMCB9KSk7XG5cbiAgY29uc3QgbmV4dCA9IHhzW2luZGV4ICsgMV0uZm9sZCgoKSA9PiB7XG4gICAgY29uc3QgcmVzdCA9IHhzLnNsaWNlKGluZGV4ICsgMSk7XG4gICAgcmV0dXJuIEFyci5maW5kTWFwKHJlc3QsIChhLCBpKSA9PiBhLm1hcCgoYWEpID0+ICh7IHZhbHVlOiBhYSwgZGVsdGE6IGkgKyAxIH0pKSk7XG4gIH0sIChuKSA9PiBPcHRpb25hbC5zb21lKHsgdmFsdWU6IG4sIGRlbHRhOiAxIH0pKTtcblxuICByZXR1cm4gY3VycmVudC5iaW5kKChjKSA9PiBuZXh0Lm1hcCgobikgPT4ge1xuICAgIGNvbnN0IGV4dHJhcyA9IG4uZGVsdGEgKyBjLmRlbHRhO1xuICAgIHJldHVybiBNYXRoLmFicyhuLnZhbHVlIC0gYy52YWx1ZSkgLyBleHRyYXM7XG4gIH0pKTtcbn07XG5cbmV4cG9ydCB7IHVuaXF1ZSwgZGVkdWNlIH07XG4iLCJpbXBvcnQgdHlwZSB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuLyoqXG4gKiBBcHBsaWVzIGYgcmVwZWF0ZWRseSB1bnRpbCBpdCBjb21wbGV0ZXMgKGJ5IHJldHVybmluZyBPcHRpb25hbC5ub25lKCkpLlxuICpcbiAqIE5vcm1hbGx5IHdvdWxkIGp1c3QgdXNlIHJlY3Vyc2lvbiwgYnV0IEphdmFTY3JpcHQgbGFja3MgdGFpbCBjYWxsIG9wdGltaXNhdGlvbi5cbiAqXG4gKiBUaGlzIGlzIHdoYXQgcmVjdXJzaW9uIGxvb2tzIGxpa2Ugd2hlbiBtYW51YWxseSB1bnJhdmVsbGVkIDopXG4gKi9cbmNvbnN0IHRvQXJyYXkgPSA8VCA9IGFueSwgVSBleHRlbmRzIFQgPSBUPiAodGFyZ2V0OiBULCBmOiAodDogVCkgPT4gT3B0aW9uYWw8VT4pOiBVW10gPT4ge1xuICBjb25zdCByOiBVW10gPSBbXTtcblxuICBjb25zdCByZWN1cnNlID0gKGU6IFUpID0+IHtcbiAgICByLnB1c2goZSk7XG4gICAgcmV0dXJuIGYoZSk7XG4gIH07XG5cbiAgbGV0IGN1ciA9IGYodGFyZ2V0KTtcbiAgZG8ge1xuICAgIGN1ciA9IGN1ci5iaW5kKHJlY3Vyc2UpO1xuICB9IHdoaWxlIChjdXIuaXNTb21lKCkpO1xuXG4gIHJldHVybiByO1xufTtcblxuZXhwb3J0IHtcbiAgdG9BcnJheVxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTZWxlY3RvcnMgZnJvbSAnLi4vc2VhcmNoL1NlbGVjdG9ycyc7XG5cbmNvbnN0IGVxID0gKGUxOiBTdWdhckVsZW1lbnQ8dW5rbm93bj4sIGUyOiBTdWdhckVsZW1lbnQ8dW5rbm93bj4pOiBib29sZWFuID0+XG4gIGUxLmRvbSA9PT0gZTIuZG9tO1xuXG5jb25zdCBpc0VxdWFsTm9kZSA9IChlMTogU3VnYXJFbGVtZW50PE5vZGU+LCBlMjogU3VnYXJFbGVtZW50PE5vZGU+KTogYm9vbGVhbiA9PlxuICBlMS5kb20uaXNFcXVhbE5vZGUoZTIuZG9tKTtcblxuY29uc3QgbWVtYmVyID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDx1bmtub3duPiwgZWxlbWVudHM6IFN1Z2FyRWxlbWVudDx1bmtub3duPltdKTogYm9vbGVhbiA9PlxuICBBcnIuZXhpc3RzKGVsZW1lbnRzLCBGdW4uY3VycnkoZXEsIGVsZW1lbnQpKTtcblxuLy8gUmV0dXJuczogdHJ1ZSBpZiBub2RlIGUxIGNvbnRhaW5zIGUyLCBvdGhlcndpc2UgZmFsc2UuXG4vLyAocmV0dXJucyBmYWxzZSBpZiBlMT09PWUyOiBBIG5vZGUgZG9lcyBub3QgY29udGFpbiBpdHNlbGYpLlxuY29uc3QgY29udGFpbnMgPSAoZTE6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZTI6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBkMSA9IGUxLmRvbTtcbiAgY29uc3QgZDIgPSBlMi5kb207XG4gIHJldHVybiBkMSA9PT0gZDIgPyBmYWxzZSA6IGQxLmNvbnRhaW5zKGQyKTtcbn07XG5cbmNvbnN0IGlzID0gU2VsZWN0b3JzLmlzO1xuXG5leHBvcnQge1xuICBlcSxcbiAgaXNFcXVhbE5vZGUsXG4gIG1lbWJlcixcbiAgY29udGFpbnMsXG4gIC8vIE9ubHkgdXNlZCBieSBEb21Vbml2ZXJzZS4gUmVtb3ZlIChvciBzaG91bGQgU2VsZWN0b3JzLmlzIG1vdmUgaGVyZT8pXG4gIGlzXG59O1xuIiwiaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuaW1wb3J0ICogYXMgQ29tcGFyZSBmcm9tICcuL0NvbXBhcmUnO1xuXG5jb25zdCBtYWtlUmFuZ2UgPSAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogUmFuZ2UgPT4ge1xuICBjb25zdCBkb2MgPSBUcmF2ZXJzZS5vd25lcihzdGFydCk7XG5cbiAgLy8gVE9ETzogV2UgbmVlZCB0byB0aGluayBhYm91dCBhIGJldHRlciBwbGFjZSB0byBwdXQgbmF0aXZlIHJhbmdlIGNyZWF0aW9uIGNvZGUuIERvZXMgaXQgZXZlbiBiZWxvbmcgaW4gc3VnYXI/XG4gIC8vIENvdWxkIHRoZSBgQ29tcGFyZWAgY2hlY2tzIChub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSBoYW5kbGUgdGhlc2Ugc2l0dWF0aW9ucyBiZXR0ZXI/XG4gIGNvbnN0IHJuZyA9IGRvYy5kb20uY3JlYXRlUmFuZ2UoKTtcbiAgcm5nLnNldFN0YXJ0KHN0YXJ0LmRvbSwgc29mZnNldCk7XG4gIHJuZy5zZXRFbmQoZmluaXNoLmRvbSwgZm9mZnNldCk7XG4gIHJldHVybiBybmc7XG59O1xuXG4vLyBSZXR1cm4gdGhlIGRlZXBlc3QgLSBvciBmdXJ0aGVzdCBkb3duIHRoZSBkb2N1bWVudCB0cmVlIC0gTm9kZSB0aGF0IGNvbnRhaW5zIGJvdGggYm91bmRhcnkgcG9pbnRzXG4vLyBvZiB0aGUgcmFuZ2UgKHN0YXJ0OnNvZmZzZXQsIGZpbmlzaDpmb2Zmc2V0KS5cbmNvbnN0IGNvbW1vbkFuY2VzdG9yQ29udGFpbmVyID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcik6IFN1Z2FyRWxlbWVudDxOb2RlPiA9PiB7XG4gIGNvbnN0IHIgPSBtYWtlUmFuZ2Uoc3RhcnQsIHNvZmZzZXQsIGZpbmlzaCwgZm9mZnNldCk7XG4gIHJldHVybiBTdWdhckVsZW1lbnQuZnJvbURvbShyLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKTtcbn07XG5cbmNvbnN0IGFmdGVyID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCByID0gbWFrZVJhbmdlKHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpO1xuXG4gIGNvbnN0IHNhbWUgPSBDb21wYXJlLmVxKHN0YXJ0LCBmaW5pc2gpICYmIHNvZmZzZXQgPT09IGZvZmZzZXQ7XG4gIHJldHVybiByLmNvbGxhcHNlZCAmJiAhc2FtZTtcbn07XG5cbmV4cG9ydCB7XG4gIGFmdGVyLFxuICBjb21tb25BbmNlc3RvckNvbnRhaW5lclxufTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuY29uc3QgYmVmb3JlID0gKG1hcmtlcjogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+IHtcbiAgY29uc3QgcGFyZW50ID0gVHJhdmVyc2UucGFyZW50KG1hcmtlcik7XG4gIHBhcmVudC5lYWNoKCh2KSA9PiB7XG4gICAgdi5kb20uaW5zZXJ0QmVmb3JlKGVsZW1lbnQuZG9tLCBtYXJrZXIuZG9tKTtcbiAgfSk7XG59O1xuXG5jb25zdCBhZnRlciA9IChtYXJrZXI6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IHNpYmxpbmcgPSBUcmF2ZXJzZS5uZXh0U2libGluZyhtYXJrZXIpO1xuICBzaWJsaW5nLmZvbGQoKCkgPT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IFRyYXZlcnNlLnBhcmVudChtYXJrZXIpO1xuICAgIHBhcmVudC5lYWNoKCh2KSA9PiB7XG4gICAgICBhcHBlbmQodiwgZWxlbWVudCk7XG4gICAgfSk7XG4gIH0sICh2KSA9PiB7XG4gICAgYmVmb3JlKHYsIGVsZW1lbnQpO1xuICB9KTtcbn07XG5cbmNvbnN0IHByZXBlbmQgPSAocGFyZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IHZvaWQgPT4ge1xuICBjb25zdCBmaXJzdENoaWxkID0gVHJhdmVyc2UuZmlyc3RDaGlsZChwYXJlbnQpO1xuICBmaXJzdENoaWxkLmZvbGQoKCkgPT4ge1xuICAgIGFwcGVuZChwYXJlbnQsIGVsZW1lbnQpO1xuICB9LCAodikgPT4ge1xuICAgIHBhcmVudC5kb20uaW5zZXJ0QmVmb3JlKGVsZW1lbnQuZG9tLCB2LmRvbSk7XG4gIH0pO1xufTtcblxuY29uc3QgYXBwZW5kID0gKHBhcmVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+IHtcbiAgcGFyZW50LmRvbS5hcHBlbmRDaGlsZChlbGVtZW50LmRvbSk7XG59O1xuXG5jb25zdCBhcHBlbmRBdCA9IChwYXJlbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIFRyYXZlcnNlLmNoaWxkKHBhcmVudCwgaW5kZXgpLmZvbGQoKCkgPT4ge1xuICAgIGFwcGVuZChwYXJlbnQsIGVsZW1lbnQpO1xuICB9LCAodikgPT4ge1xuICAgIGJlZm9yZSh2LCBlbGVtZW50KTtcbiAgfSk7XG59O1xuXG5jb25zdCB3cmFwID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgd3JhcHBlcjogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGJlZm9yZShlbGVtZW50LCB3cmFwcGVyKTtcbiAgYXBwZW5kKHdyYXBwZXIsIGVsZW1lbnQpO1xufTtcblxuZXhwb3J0IHtcbiAgYmVmb3JlLFxuICBhZnRlcixcbiAgcHJlcGVuZCxcbiAgYXBwZW5kLFxuICBhcHBlbmRBdCxcbiAgd3JhcFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBJbnNlcnQgZnJvbSAnLi9JbnNlcnQnO1xuXG5jb25zdCBiZWZvcmUgPSAobWFya2VyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChlbGVtZW50cywgKHgpID0+IHtcbiAgICBJbnNlcnQuYmVmb3JlKG1hcmtlciwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgYWZ0ZXIgPSAobWFya2VyOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChlbGVtZW50cywgKHgsIGkpID0+IHtcbiAgICBjb25zdCBlID0gaSA9PT0gMCA/IG1hcmtlciA6IGVsZW1lbnRzW2kgLSAxXTtcbiAgICBJbnNlcnQuYWZ0ZXIoZSwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgcHJlcGVuZCA9IChwYXJlbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZWxlbWVudHM6IFN1Z2FyRWxlbWVudDxOb2RlPltdKTogdm9pZCA9PiB7XG4gIEFyci5lYWNoKGVsZW1lbnRzLnNsaWNlKCkucmV2ZXJzZSgpLCAoeCkgPT4ge1xuICAgIEluc2VydC5wcmVwZW5kKHBhcmVudCwgeCk7XG4gIH0pO1xufTtcblxuY29uc3QgYXBwZW5kID0gKHBhcmVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBlbGVtZW50czogU3VnYXJFbGVtZW50PE5vZGU+W10pOiB2b2lkID0+IHtcbiAgQXJyLmVhY2goZWxlbWVudHMsICh4KSA9PiB7XG4gICAgSW5zZXJ0LmFwcGVuZChwYXJlbnQsIHgpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7XG4gIGJlZm9yZSxcbiAgYWZ0ZXIsXG4gIHByZXBlbmQsXG4gIGFwcGVuZFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuaW1wb3J0ICogYXMgSW5zZXJ0QWxsIGZyb20gJy4vSW5zZXJ0QWxsJztcblxuY29uc3QgZW1wdHkgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIC8vIHNob3J0Y3V0IFwiZW1wdHkgbm9kZVwiIHRyaWNrLiBSZXF1aXJlcyBJRSA5LlxuICBlbGVtZW50LmRvbS50ZXh0Q29udGVudCA9ICcnO1xuXG4gIC8vIElmIHRoZSBjb250ZW50cyB3YXMgYSBzaW5nbGUgZW1wdHkgdGV4dCBub2RlLCB0aGUgYWJvdmUgZG9lc24ndCByZW1vdmUgaXQuIEJ1dCwgaXQncyBzdGlsbCBmYXN0ZXIgaW4gZ2VuZXJhbFxuICAvLyB0aGFuIHJlbW92aW5nIGV2ZXJ5IGNoaWxkIG5vZGUgbWFudWFsbHkuXG4gIC8vIFRoZSBmb2xsb3dpbmcgaXMgKHByb2JhYmx5KSBzYWZlIGZvciBwZXJmb3JtYW5jZSBhcyA5OS45JSBvZiB0aGUgdGltZSB0aGUgdHJpY2sgd29ya3MgYW5kXG4gIC8vIFRyYXZlcnNlLmNoaWxkcmVuIHdpbGwgcmV0dXJuIGFuIGVtcHR5IGFycmF5LlxuICBBcnIuZWFjaChUcmF2ZXJzZS5jaGlsZHJlbihlbGVtZW50KSwgKHJvZ3VlKSA9PiB7XG4gICAgcmVtb3ZlKHJvZ3VlKTtcbiAgfSk7XG59O1xuXG5jb25zdCByZW1vdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBpZiAoZG9tLnBhcmVudE5vZGUgIT09IG51bGwpIHtcbiAgICBkb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb20pO1xuICB9XG59O1xuXG5jb25zdCB1bndyYXAgPSAod3JhcHBlcjogU3VnYXJFbGVtZW50PE5vZGU+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4od3JhcHBlcik7XG4gIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgSW5zZXJ0QWxsLmFmdGVyKHdyYXBwZXIsIGNoaWxkcmVuKTtcbiAgfVxuICByZW1vdmUod3JhcHBlcik7XG59O1xuXG5leHBvcnQge1xuICBlbXB0eSxcbiAgcmVtb3ZlLFxuICB1bndyYXBcbn07XG4iLCJpbXBvcnQgdHlwZSB7IEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXAgfSBmcm9tICcuLi8uLi9hbGllbi9Eb21UeXBlcyc7XG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBBdHRyaWJ1dGUgZnJvbSAnLi4vcHJvcGVydGllcy9BdHRyaWJ1dGUnO1xuaW1wb3J0ICogYXMgVHJhdmVyc2UgZnJvbSAnLi4vc2VhcmNoL1RyYXZlcnNlJztcblxuaW1wb3J0ICogYXMgSW5zZXJ0IGZyb20gJy4vSW5zZXJ0JztcbmltcG9ydCAqIGFzIEluc2VydEFsbCBmcm9tICcuL0luc2VydEFsbCc7XG5pbXBvcnQgKiBhcyBSZW1vdmUgZnJvbSAnLi9SZW1vdmUnO1xuXG5jb25zdCBjbG9uZSA9IDxFIGV4dGVuZHMgTm9kZT4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RT4sIGlzRGVlcDogYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxFPiA9PlxuICBTdWdhckVsZW1lbnQuZnJvbURvbShvcmlnaW5hbC5kb20uY2xvbmVOb2RlKGlzRGVlcCkgYXMgRSk7XG5cbi8qKiBTaGFsbG93IGNsb25lIC0ganVzdCB0aGUgdGFnLCBubyBjaGlsZHJlbiAqL1xuY29uc3Qgc2hhbGxvdyA9IDxFIGV4dGVuZHMgTm9kZT4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RT4pOiBTdWdhckVsZW1lbnQ8RT4gPT5cbiAgY2xvbmUob3JpZ2luYWwsIGZhbHNlKTtcblxuLyoqIERlZXAgY2xvbmUgLSBldmVyeXRoaW5nIGNvcGllZCBpbmNsdWRpbmcgY2hpbGRyZW4gKi9cbmNvbnN0IGRlZXAgPSA8RSBleHRlbmRzIE5vZGU+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEU+KTogU3VnYXJFbGVtZW50PEU+ID0+XG4gIGNsb25lKG9yaWdpbmFsLCB0cnVlKTtcblxuLyoqIFNoYWxsb3cgY2xvbmUsIHdpdGggYSBuZXcgdGFnICovXG5jb25zdCBzaGFsbG93QXMgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB0YWc6IEspOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcFtLXT4gPT4ge1xuICBjb25zdCBudSA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKHRhZyk7XG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IEF0dHJpYnV0ZS5jbG9uZShvcmlnaW5hbCk7XG4gIEF0dHJpYnV0ZS5zZXRBbGwobnUsIGF0dHJpYnV0ZXMpO1xuXG4gIHJldHVybiBudTtcbn07XG5cbi8qKiBEZWVwIGNsb25lLCB3aXRoIGEgbmV3IHRhZyAqL1xuY29uc3QgY29weSA9IDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcD4gKG9yaWdpbmFsOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHRhZzogSyk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwW0tdPiA9PiB7XG4gIGNvbnN0IG51ID0gc2hhbGxvd0FzKG9yaWdpbmFsLCB0YWcpO1xuXG4gIC8vIE5PVEVcbiAgLy8gcHJldmlvdXNseSB0aGlzIHVzZWQgc2VyaWFsaXNhdGlvbjpcbiAgLy8gbnUuZG9tLmlubmVySFRNTCA9IG9yaWdpbmFsLmRvbS5pbm5lckhUTUw7XG4gIC8vXG4gIC8vIENsb25lIHNob3VsZCBiZSBlcXVpdmFsZW50IChhbmQgZmFzdGVyKSwgYnV0IGlmIFREIDwtPiBUSCB0b2dnbGUgYnJlYWtzLCBwdXQgaXQgYmFjay5cblxuICBjb25zdCBjbG9uZUNoaWxkcmVuID0gVHJhdmVyc2UuY2hpbGRyZW4oZGVlcChvcmlnaW5hbCkpO1xuICBJbnNlcnRBbGwuYXBwZW5kKG51LCBjbG9uZUNoaWxkcmVuKTtcblxuICByZXR1cm4gbnU7XG59O1xuXG4vKiogQ2hhbmdlIHRoZSB0YWcgbmFtZSwgYnV0IGtlZXAgYWxsIGNoaWxkcmVuICovXG5jb25zdCBtdXRhdGUgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+IChvcmlnaW5hbDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB0YWc6IEspOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcFtLXT4gPT4ge1xuICBjb25zdCBudSA9IHNoYWxsb3dBcyhvcmlnaW5hbCwgdGFnKTtcblxuICBJbnNlcnQuYWZ0ZXIob3JpZ2luYWwsIG51KTtcbiAgY29uc3QgY2hpbGRyZW4gPSBUcmF2ZXJzZS5jaGlsZHJlbihvcmlnaW5hbCk7XG4gIEluc2VydEFsbC5hcHBlbmQobnUsIGNoaWxkcmVuKTtcbiAgUmVtb3ZlLnJlbW92ZShvcmlnaW5hbCk7XG4gIHJldHVybiBudTtcbn07XG5cbmV4cG9ydCB7XG4gIHNoYWxsb3csXG4gIHNoYWxsb3dBcyxcbiAgZGVlcCxcbiAgY29weSxcbiAgbXV0YXRlXG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0ICogYXMgRmlsdGVyZWRFdmVudCBmcm9tICcuLi8uLi9pbXBsL0ZpbHRlcmVkRXZlbnQnO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCB0eXBlIHsgRXZlbnRIYW5kbGVyLCBFdmVudFVuYmluZGVyIH0gZnJvbSAnLi9UeXBlcyc7XG5cbmNvbnN0IGZpbHRlciA9IEZ1bi5hbHdheXM7IC8vIG5vIGZpbHRlciBvbiBwbGFpbiBEb21FdmVudHNcblxuY29uc3QgYmluZDoge1xuICA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsIFQgZXh0ZW5kcyBOb2RlIHwgV2luZG93ID0gTm9kZT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBLLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8SFRNTEVsZW1lbnRFdmVudE1hcFtLXSwgVD4pOiBFdmVudFVuYmluZGVyO1xuICA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdyA9IE5vZGU+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxFLCBUPik6IEV2ZW50VW5iaW5kZXI7XG59ID0gPEUgZXh0ZW5kcyBFdmVudCwgVCBleHRlbmRzIE5vZGUgfCBXaW5kb3cgPSBOb2RlPihlbGVtZW50OiBTdWdhckVsZW1lbnQ8RXZlbnRUYXJnZXQ+LCBldmVudDogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8RSwgVD4pOiBFdmVudFVuYmluZGVyID0+XG4gIEZpbHRlcmVkRXZlbnQuYmluZDxFLCBUPihlbGVtZW50LCBldmVudCwgZmlsdGVyLCBoYW5kbGVyKTtcblxuY29uc3QgY2FwdHVyZToge1xuICA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXAsIFQgZXh0ZW5kcyBOb2RlIHwgV2luZG93ID0gTm9kZT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBLLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8SFRNTEVsZW1lbnRFdmVudE1hcFtLXSwgVD4pOiBFdmVudFVuYmluZGVyO1xuICA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdyA9IE5vZGU+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxFLCBUPik6IEV2ZW50VW5iaW5kZXI7XG59ID0gPEUgZXh0ZW5kcyBFdmVudCwgVCBleHRlbmRzIE5vZGUgfCBXaW5kb3cgPSBOb2RlPihlbGVtZW50OiBTdWdhckVsZW1lbnQ8RXZlbnRUYXJnZXQ+LCBldmVudDogc3RyaW5nLCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8RSwgVD4pOiBFdmVudFVuYmluZGVyID0+XG4gIEZpbHRlcmVkRXZlbnQuY2FwdHVyZTxFLCBUPihlbGVtZW50LCBldmVudCwgZmlsdGVyLCBoYW5kbGVyKTtcblxuY29uc3QgZnJvbVJhd0V2ZW50ID0gRmlsdGVyZWRFdmVudC5mcm9tUmF3RXZlbnQ7XG5cbmV4cG9ydCB7XG4gIGJpbmQsXG4gIGNhcHR1cmUsXG4gIGZyb21SYXdFdmVudFxufTtcbiIsImNvbnN0IEFUVFJJQlVURSA9IDI7XG5jb25zdCBDREFUQV9TRUNUSU9OID0gNDtcbmNvbnN0IENPTU1FTlQgPSA4O1xuY29uc3QgRE9DVU1FTlQgPSA5O1xuY29uc3QgRE9DVU1FTlRfVFlQRSA9IDEwO1xuY29uc3QgRE9DVU1FTlRfRlJBR01FTlQgPSAxMTtcbmNvbnN0IEVMRU1FTlQgPSAxO1xuY29uc3QgVEVYVCA9IDM7XG5jb25zdCBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gNztcbmNvbnN0IEVOVElUWV9SRUZFUkVOQ0UgPSA1O1xuY29uc3QgRU5USVRZID0gNjtcbmNvbnN0IE5PVEFUSU9OID0gMTI7XG5cbmV4cG9ydCB7XG4gIEFUVFJJQlVURSxcbiAgQ0RBVEFfU0VDVElPTixcbiAgQ09NTUVOVCxcbiAgRE9DVU1FTlQsXG4gIERPQ1VNRU5UX1RZUEUsXG4gIERPQ1VNRU5UX0ZSQUdNRU5ULFxuICBFTEVNRU5ULFxuICBURVhULFxuICBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OLFxuICBFTlRJVFlfUkVGRVJFTkNFLFxuICBFTlRJVFksXG4gIE5PVEFUSU9OXG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgU3VnYXJOb2RlIGZyb20gJy4vU3VnYXJOb2RlJztcbmltcG9ydCB7IGdldFNoYWRvd0hvc3QsIGdldFNoYWRvd1Jvb3QgfSBmcm9tICcuL1N1Z2FyU2hhZG93RG9tJztcblxuLy8gTm9kZS5jb250YWlucygpIGlzIHZlcnksIHZlcnksIHZlcnkgZ29vZCBwZXJmb3JtYW5jZVxuLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc2VzdC12cy1jb250YWlucy81XG5jb25zdCBpbkJvZHkgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogYm9vbGVhbiA9PiB7XG4gIC8vIFRlY2huaWNhbGx5IHRoaXMgaXMgb25seSByZXF1aXJlZCBvbiBJRSwgd2hlcmUgY29udGFpbnMoKSByZXR1cm5zIGZhbHNlIGZvciB0ZXh0IG5vZGVzLlxuICAvLyBCdXQgaXQncyBjaGVhcCBlbm91Z2ggdG8gcnVuIGV2ZXJ5d2hlcmUgYW5kIFN1Z2FyIGRvZXNuJ3QgaGF2ZSBwbGF0Zm9ybSBkZXRlY3Rpb24gKHlldCkuXG4gIGNvbnN0IGRvbSA9IFN1Z2FyTm9kZS5pc1RleHQoZWxlbWVudCkgPyBlbGVtZW50LmRvbS5wYXJlbnROb2RlIDogZWxlbWVudC5kb207XG5cbiAgLy8gdXNlIG93bmVyRG9jdW1lbnQuYm9keSB0byBlbnN1cmUgdGhpcyB3b3JrcyBpbnNpZGUgaWZyYW1lcy5cbiAgLy8gTm9ybWFsbHkgY29udGFpbnMgaXMgYmFkIGJlY2F1c2UgYW4gZWxlbWVudCBcImNvbnRhaW5zXCIgaXRzZWxmLCBidXQgaGVyZSB3ZSB3YW50IHRoYXQuXG4gIGlmIChkb20gPT09IHVuZGVmaW5lZCB8fCBkb20gPT09IG51bGwgfHwgZG9tLm93bmVyRG9jdW1lbnQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBkb2MgPSBkb20ub3duZXJEb2N1bWVudDtcbiAgcmV0dXJuIGdldFNoYWRvd1Jvb3QoU3VnYXJFbGVtZW50LmZyb21Eb20oZG9tKSkuZm9sZChcbiAgICAoKSA9PiBkb2MuYm9keS5jb250YWlucyhkb20pLFxuICAgIEZ1bi5jb21wb3NlMShpbkJvZHksIGdldFNoYWRvd0hvc3QpXG4gICk7XG59O1xuXG5jb25zdCBib2R5ID0gKCk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4gPT5cbiAgZ2V0Qm9keShTdWdhckVsZW1lbnQuZnJvbURvbShkb2N1bWVudCkpO1xuXG5jb25zdCBnZXRCb2R5ID0gKGRvYzogU3VnYXJFbGVtZW50PERvY3VtZW50Pik6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4gPT4ge1xuICBjb25zdCBiID0gZG9jLmRvbS5ib2R5O1xuICBpZiAoYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JvZHkgaXMgbm90IGF2YWlsYWJsZSB5ZXQnKTtcbiAgfVxuICByZXR1cm4gU3VnYXJFbGVtZW50LmZyb21Eb20oYik7XG59O1xuXG5leHBvcnQge1xuICBib2R5LFxuICBnZXRCb2R5LFxuICBpbkJvZHlcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcCB9IGZyb20gJy4uLy4uL2FsaWVuL0RvbVR5cGVzJztcblxuaW50ZXJmYWNlIFN1Z2FyRWxlbWVudDxUID0gYW55PiB7XG4gIHJlYWRvbmx5IGRvbTogVDtcbn1cblxuY29uc3QgZnJvbUh0bWwgPSA8RSBleHRlbmRzIE5vZGUgPSBOb2RlICYgQ2hpbGROb2RlPiAoaHRtbDogc3RyaW5nLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxFPiA9PiB7XG4gIGNvbnN0IGRvYyA9IHNjb3BlIHx8IGRvY3VtZW50O1xuICBjb25zdCBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5pbm5lckhUTUwgPSBodG1sO1xuICBpZiAoIWRpdi5oYXNDaGlsZE5vZGVzKCkgfHwgZGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAnSFRNTCBkb2VzIG5vdCBoYXZlIGEgc2luZ2xlIHJvb3Qgbm9kZSc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UsIGh0bWwpO1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfVxuICByZXR1cm4gZnJvbURvbShkaXYuY2hpbGROb2Rlc1swXSBhcyB1bmtub3duIGFzIEUpO1xufTtcblxuY29uc3QgZnJvbVRhZzoge1xuICA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+KHRhZzogSywgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcFtLXT47XG4gICh0YWc6IHN0cmluZywgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+O1xufSA9ICh0YWc6IHN0cmluZywgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+ID0+IHtcbiAgY29uc3QgZG9jID0gc2NvcGUgfHwgZG9jdW1lbnQ7XG4gIGNvbnN0IG5vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCh0YWcpO1xuICByZXR1cm4gZnJvbURvbShub2RlKTtcbn07XG5cbmNvbnN0IGZyb21UZXh0ID0gKHRleHQ6IHN0cmluZywgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBTdWdhckVsZW1lbnQ8VGV4dD4gPT4ge1xuICBjb25zdCBkb2MgPSBzY29wZSB8fCBkb2N1bWVudDtcbiAgY29uc3Qgbm9kZSA9IGRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0KTtcbiAgcmV0dXJuIGZyb21Eb20obm9kZSk7XG59O1xuXG5jb25zdCBmcm9tRG9tID0gPFQgZXh0ZW5kcyBOb2RlIHwgV2luZG93PiAobm9kZTogVCk6IFN1Z2FyRWxlbWVudDxUPiA9PiB7XG4gIC8vIFRPRE86IENvbnNpZGVyIHJlbW92aW5nIHRoaXMgY2hlY2ssIGJ1dCBsZWZ0IGF0bSBmb3Igc2FmZXR5XG4gIGlmIChub2RlID09PSBudWxsIHx8IG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm9kZSBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGRvbTogbm9kZVxuICB9O1xufTtcblxuY29uc3QgZnJvbVBvaW50ID0gKGRvY0VsbTogU3VnYXJFbGVtZW50PERvY3VtZW50PiwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8RWxlbWVudD4+ID0+XG4gIE9wdGlvbmFsLmZyb20oZG9jRWxtLmRvbS5lbGVtZW50RnJvbVBvaW50KHgsIHkpKS5tYXAoZnJvbURvbSk7XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG5jb25zdCBTdWdhckVsZW1lbnQgPSB7XG4gIGZyb21IdG1sLFxuICBmcm9tVGFnLFxuICBmcm9tVGV4dCxcbiAgZnJvbURvbSxcbiAgZnJvbVBvaW50XG59O1xuXG5leHBvcnQge1xuICBTdWdhckVsZW1lbnRcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBUcmF2ZXJzZSBmcm9tICcuLi9zZWFyY2gvVHJhdmVyc2UnO1xuXG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuL1N1Z2FyRWxlbWVudCc7XG5cbnR5cGUgRWxlbWVudFR1cGxlPFQ+ID0geyBbSyBpbiBrZXlvZiBUXTogU3VnYXJFbGVtZW50PFRbS10+IH07XG5cbmNvbnN0IGZyb21IdG1sID0gPFQgZXh0ZW5kcyBOb2RlW10+IChodG1sOiBzdHJpbmcsIHNjb3BlPzogRG9jdW1lbnQgfCBudWxsKTogRWxlbWVudFR1cGxlPFQ+ID0+IHtcbiAgY29uc3QgZG9jOiBEb2N1bWVudCA9IHNjb3BlIHx8IGRvY3VtZW50O1xuICBjb25zdCBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5pbm5lckhUTUwgPSBodG1sO1xuICByZXR1cm4gVHJhdmVyc2UuY2hpbGRyZW4oU3VnYXJFbGVtZW50LmZyb21Eb20oZGl2KSkgYXMgdW5rbm93biBhcyBFbGVtZW50VHVwbGU8VD47XG59O1xuXG5jb25zdCBmcm9tVGFncyA9ICh0YWdzOiBzdHJpbmdbXSwgc2NvcGU/OiBEb2N1bWVudCB8IG51bGwpOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+W10gPT5cbiAgQXJyLm1hcCh0YWdzLCAoeCkgPT4gU3VnYXJFbGVtZW50LmZyb21UYWcoeCwgc2NvcGUpKTtcblxuY29uc3QgZnJvbVRleHQgPSAodGV4dHM6IHN0cmluZ1tdLCBzY29wZT86IERvY3VtZW50IHwgbnVsbCk6IFN1Z2FyRWxlbWVudDxUZXh0PltdID0+XG4gIEFyci5tYXAodGV4dHMsICh4KSA9PiBTdWdhckVsZW1lbnQuZnJvbVRleHQoeCwgc2NvcGUpKTtcblxuY29uc3QgZnJvbURvbSA9IDxUIGV4dGVuZHMgKE5vZGUgfCBXaW5kb3cpPihub2RlczogQXJyYXlMaWtlPFQ+KTogU3VnYXJFbGVtZW50PFQ+W10gPT5cbiAgQXJyLm1hcChub2RlcywgU3VnYXJFbGVtZW50LmZyb21Eb20pO1xuXG5leHBvcnQgeyBmcm9tSHRtbCwgZnJvbVRhZ3MsIGZyb21UZXh0LCBmcm9tRG9tIH07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuL1N1Z2FyRWxlbWVudCc7XG5cbmNvbnN0IGZyb21FbGVtZW50cyA9IChlbGVtZW50czogU3VnYXJFbGVtZW50PE5vZGU+W10sIHNjb3BlPzogRG9jdW1lbnQgfCBudWxsKTogU3VnYXJFbGVtZW50PERvY3VtZW50RnJhZ21lbnQ+ID0+IHtcbiAgY29uc3QgZG9jID0gc2NvcGUgfHwgZG9jdW1lbnQ7XG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgQXJyLmVhY2goZWxlbWVudHMsIChlbGVtZW50KSA9PiB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudC5kb20pO1xuICB9KTtcbiAgcmV0dXJuIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGZyYWdtZW50KTtcbn07XG5cbmV4cG9ydCB7XG4gIGZyb21FbGVtZW50c1xufTtcbiIsImltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcblxuZXhwb3J0IGNvbnN0IGhlYWQgPSAoKTogU3VnYXJFbGVtZW50PEhUTUxIZWFkRWxlbWVudD4gPT4gZ2V0SGVhZChTdWdhckVsZW1lbnQuZnJvbURvbShkb2N1bWVudCkpO1xuXG5leHBvcnQgY29uc3QgZ2V0SGVhZCA9IChkb2M6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pOiBTdWdhckVsZW1lbnQ8SFRNTEhlYWRFbGVtZW50PiA9PiB7XG4gIC8qXG4gICAqIElFOSBhbmQgYWJvdmUgcGVyXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9oZWFkXG4gICAqL1xuICBjb25zdCBiID0gZG9jLmRvbS5oZWFkO1xuICBpZiAoYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0hlYWQgaXMgbm90IGF2YWlsYWJsZSB5ZXQnKTtcbiAgfVxuICByZXR1cm4gU3VnYXJFbGVtZW50LmZyb21Eb20oYik7XG59O1xuIiwiaW1wb3J0IHsgU2FuZEhUTUxFbGVtZW50IH0gZnJvbSAnQGVwaG94L3NhbmQnO1xuXG5pbXBvcnQgdHlwZSB7IEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXAgfSBmcm9tICcuLi8uLi9hbGllbi9Eb21UeXBlcyc7XG5cbmltcG9ydCAqIGFzIE5vZGVUeXBlcyBmcm9tICcuL05vZGVUeXBlcyc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcblxuY29uc3QgbmFtZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBzdHJpbmcgPT4ge1xuICBjb25zdCByID0gZWxlbWVudC5kb20ubm9kZU5hbWU7XG4gIHJldHVybiByLnRvTG93ZXJDYXNlKCk7XG59O1xuXG5jb25zdCB0eXBlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IG51bWJlciA9PlxuICBlbGVtZW50LmRvbS5ub2RlVHlwZTtcblxuY29uc3QgdmFsdWUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogc3RyaW5nIHwgbnVsbCA9PlxuICBlbGVtZW50LmRvbS5ub2RlVmFsdWU7XG5cbmNvbnN0IGlzVHlwZSA9IDxFIGV4dGVuZHMgTm9kZT4gKHQ6IG51bWJlcikgPT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGVsZW1lbnQgaXMgU3VnYXJFbGVtZW50PEU+ID0+XG4gIHR5cGUoZWxlbWVudCkgPT09IHQ7XG5cbmNvbnN0IGlzQ29tbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBlbGVtZW50IGlzIFN1Z2FyRWxlbWVudDxDb21tZW50PiA9PlxuICB0eXBlKGVsZW1lbnQpID09PSBOb2RlVHlwZXMuQ09NTUVOVCB8fCBuYW1lKGVsZW1lbnQpID09PSAnI2NvbW1lbnQnO1xuXG5jb25zdCBpc0hUTUxFbGVtZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGVsZW1lbnQgaXMgU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiA9PlxuICBpc0VsZW1lbnQoZWxlbWVudCkgJiYgU2FuZEhUTUxFbGVtZW50LmlzUHJvdG90eXBlT2YoZWxlbWVudC5kb20pO1xuXG5jb25zdCBpc0VsZW1lbnQgPSBpc1R5cGU8RWxlbWVudD4oTm9kZVR5cGVzLkVMRU1FTlQpO1xuY29uc3QgaXNUZXh0ID0gaXNUeXBlPFRleHQ+KE5vZGVUeXBlcy5URVhUKTtcbmNvbnN0IGlzRG9jdW1lbnQgPSBpc1R5cGU8RG9jdW1lbnQ+KE5vZGVUeXBlcy5ET0NVTUVOVCk7XG5jb25zdCBpc0RvY3VtZW50RnJhZ21lbnQgPSBpc1R5cGU8RG9jdW1lbnRGcmFnbWVudD4oTm9kZVR5cGVzLkRPQ1VNRU5UX0ZSQUdNRU5UKTtcblxuY29uc3QgaXNUYWcgPSA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+KHRhZzogSykgPT4gKGU6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGUgaXMgU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXBbS10+ID0+XG4gIGlzRWxlbWVudChlKSAmJiBuYW1lKGUpID09PSB0YWc7XG5cbmV4cG9ydCB7XG4gIG5hbWUsXG4gIHR5cGUsXG4gIHZhbHVlLFxuICBpc0VsZW1lbnQsXG4gIGlzSFRNTEVsZW1lbnQsXG4gIGlzVGV4dCxcbiAgaXNEb2N1bWVudCxcbiAgaXNEb2N1bWVudEZyYWdtZW50LFxuICBpc0NvbW1lbnQsXG4gIGlzVGFnXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgSFRNTEVsZW1lbnRGdWxsVGFnTmFtZU1hcCB9IGZyb20gJy4uLy4uL2FsaWVuL0RvbVR5cGVzJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4vU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FySGVhZCBmcm9tICcuL1N1Z2FySGVhZCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi9TdWdhck5vZGUnO1xuXG5leHBvcnQgdHlwZSBSb290Tm9kZSA9IFN1Z2FyRWxlbWVudDxEb2N1bWVudCB8IFNoYWRvd1Jvb3Q+O1xuXG4vKipcbiAqIElzIHRoZSBlbGVtZW50IGEgU2hhZG93Um9vdD9cbiAqXG4gKiBOb3RlOiB0aGlzIGlzIGluc3VmZmljaWVudCB0byB0ZXN0IGlmIGFueSBlbGVtZW50IGlzIGEgc2hhZG93IHJvb3QsIGJ1dCBpdCBpcyBzdWZmaWNpZW50IHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlblxuICogYSBEb2N1bWVudCBhbmQgYSBTaGFkb3dSb290LlxuICovXG5leHBvcnQgY29uc3QgaXNTaGFkb3dSb290ID0gKGRvczogU3VnYXJFbGVtZW50PE5vZGU+KTogZG9zIGlzIFN1Z2FyRWxlbWVudDxTaGFkb3dSb290PiA9PlxuICBTdWdhck5vZGUuaXNEb2N1bWVudEZyYWdtZW50KGRvcykgJiYgVHlwZS5pc05vbk51bGxhYmxlKChkb3MuZG9tIGFzIFNoYWRvd1Jvb3QpLmhvc3QpO1xuXG5leHBvcnQgY29uc3QgZ2V0Um9vdE5vZGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFJvb3ROb2RlID0gKGUpID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGUuZG9tLmdldFJvb3ROb2RlKCkpIGFzIFJvb3ROb2RlO1xuXG4vKiogQ3JlYXRlIGFuIGVsZW1lbnQsIHVzaW5nIHRoZSBhY3R1YWwgZG9jdW1lbnQuICovXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudDoge1xuICA8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RnVsbFRhZ05hbWVNYXA+KGRvczogUm9vdE5vZGUsIHRhZzogSyk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudEZ1bGxUYWdOYW1lTWFwW0tdPjtcbiAgKGRvczogUm9vdE5vZGUsIHRhZzogc3RyaW5nKTogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pjtcbn0gPSAoZG9zOiBSb290Tm9kZSwgdGFnOiBzdHJpbmcpID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tVGFnKHRhZywgVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGRvcykuZG9tKTtcblxuLyoqIFdoZXJlIHN0eWxlIHRhZ3MgbmVlZCB0byBnby4gU2hhZG93Um9vdCBvciBkb2N1bWVudCBoZWFkICovXG5leHBvcnQgY29uc3QgZ2V0U3R5bGVDb250YWluZXIgPSAoZG9zOiBSb290Tm9kZSk6IFN1Z2FyRWxlbWVudDxIVE1MSGVhZEVsZW1lbnQgfCBTaGFkb3dSb290PiA9PlxuICBpc1NoYWRvd1Jvb3QoZG9zKSA/IGRvcyA6IFN1Z2FySGVhZC5nZXRIZWFkKFRyYXZlcnNlLmRvY3VtZW50T3JPd25lcihkb3MpKTtcblxuLyoqIFdoZXJlIGNvbnRlbnQgbmVlZHMgdG8gZ28uIFNoYWRvd1Jvb3Qgb3IgZG9jdW1lbnQgYm9keSAqL1xuZXhwb3J0IGNvbnN0IGdldENvbnRlbnRDb250YWluZXIgPSAoZG9zOiBSb290Tm9kZSk6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudCB8IFNoYWRvd1Jvb3Q+ID0+XG4gIC8vIENhbid0IHVzZSBTdWdhckJvZHkuYm9keSB3aXRob3V0IGNhdXNpbmcgYSBjaXJjdWxhciBtb2R1bGUgcmVmZXJlbmNlIChzaW5jZSBTdWdhckJvZHkuaW5Cb2R5IHVzZXMgU3VnYXJTaGFkb3dEb20pXG4gIGlzU2hhZG93Um9vdChkb3MpID8gZG9zIDogU3VnYXJFbGVtZW50LmZyb21Eb20oVHJhdmVyc2UuZG9jdW1lbnRPck93bmVyKGRvcykuZG9tLmJvZHkpO1xuXG4vKiogSXMgdGhpcyBlbGVtZW50IGVpdGhlciBhIFNoYWRvd1Jvb3Qgb3IgYSBkZXNjZW5kZW50IG9mIGEgU2hhZG93Um9vdC4gKi9cbmV4cG9ydCBjb25zdCBpc0luU2hhZG93Um9vdCA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+XG4gIGdldFNoYWRvd1Jvb3QoZSkuaXNTb21lKCk7XG5cbi8qKiBJZiB0aGlzIGVsZW1lbnQgaXMgaW4gYSBTaGFkb3dSb290LCByZXR1cm4gaXQuICovXG5leHBvcnQgY29uc3QgZ2V0U2hhZG93Um9vdCA9IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8U2hhZG93Um9vdD4+ID0+IHtcbiAgY29uc3QgciA9IGdldFJvb3ROb2RlKGUpO1xuICByZXR1cm4gaXNTaGFkb3dSb290KHIpID8gT3B0aW9uYWwuc29tZShyKSA6IE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbi8qKiBSZXR1cm4gdGhlIGhvc3Qgb2YgYSBTaGFkb3dSb290LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBpZiBTaGFkb3cgRE9NIGlzIHVuc3VwcG9ydGVkIGluIHRoZSBicm93c2VyLCBvciBpZiB0aGUgaG9zdCBpcyBudWxsLlxuICogSWYgeW91IGFjdHVhbGx5IGhhdmUgYSBTaGFkb3dSb290LCB0aGlzIHNob3VsZG4ndCBoYXBwZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTaGFkb3dIb3N0ID0gKGU6IFN1Z2FyRWxlbWVudDxTaGFkb3dSb290Pik6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiA9PlxuICBTdWdhckVsZW1lbnQuZnJvbURvbShlLmRvbS5ob3N0KTtcblxuLyoqXG4gKiBXaGVuIEV2ZW50cyBidWJibGUgdXAgdGhyb3VnaCBhIFNoYWRvd1Jvb3QsIHRoZSBicm93c2VyIGNoYW5nZXMgdGhlIHRhcmdldCB0byBiZSB0aGUgc2hhZG93IGhvc3QuXG4gKiBUaGlzIGZ1bmN0aW9uIGdldHMgdGhlIFwib3JpZ2luYWxcIiBldmVudCB0YXJnZXQgaWYgcG9zc2libGUuXG4gKiBUaGlzIG9ubHkgd29ya3MgaWYgdGhlIHNoYWRvdyB0cmVlIGlzIG9wZW4gLSBpZiB0aGUgc2hhZG93IHRyZWUgaXMgY2xvc2VkLCBldmVudC50YXJnZXQgaXMgcmV0dXJuZWQuXG4gKiBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi9mdW5kYW1lbnRhbHMvd2ViLWNvbXBvbmVudHMvc2hhZG93ZG9tI2V2ZW50c1xuICovXG5leHBvcnQgY29uc3QgZ2V0T3JpZ2luYWxFdmVudFRhcmdldCA9IChldmVudDogRXZlbnQpOiBPcHRpb25hbDxFdmVudFRhcmdldD4gPT4ge1xuICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKGV2ZW50LnRhcmdldCkpIHtcbiAgICBjb25zdCBlbCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKGV2ZW50LnRhcmdldCBhcyBOb2RlKTtcbiAgICBpZiAoU3VnYXJOb2RlLmlzRWxlbWVudChlbCkgJiYgaXNPcGVuU2hhZG93SG9zdChlbCkpIHtcbiAgICAgIC8vIFdoZW4gdGFyZ2V0IGVsZW1lbnQgaXMgaW5zaWRlIFNoYWRvdyBET00gd2UgbmVlZCB0byB0YWtlIGZpcnN0IGVsZW1lbnQgZnJvbSBjb21wb3NlZFBhdGhcbiAgICAgIC8vIG90aGVyd2lzZSB3ZSdsbCBnZXQgU2hhZG93IFJvb3QgcGFyZW50LCBub3QgYWN0dWFsIHRhcmdldCBlbGVtZW50LlxuICAgICAgaWYgKGV2ZW50LmNvbXBvc2VkICYmIGV2ZW50LmNvbXBvc2VkUGF0aCkge1xuICAgICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgICAgaWYgKGNvbXBvc2VkUGF0aCkge1xuICAgICAgICAgIHJldHVybiBBcnIuaGVhZChjb21wb3NlZFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBPcHRpb25hbC5mcm9tKGV2ZW50LnRhcmdldCk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNPcGVuU2hhZG93Um9vdCA9IChzcjogU3VnYXJFbGVtZW50PFNoYWRvd1Jvb3Q+KTogYm9vbGVhbiA9PlxuICBzci5kb20ubW9kZSA9PT0gJ29wZW4nO1xuXG5leHBvcnQgY29uc3QgaXNDbG9zZWRTaGFkb3dSb290ID0gKHNyOiBTdWdhckVsZW1lbnQ8U2hhZG93Um9vdD4pOiBib29sZWFuID0+XG4gIHNyLmRvbS5tb2RlID09PSAnY2xvc2VkJztcblxuLyoqIFJldHVybiB0cnVlIGlmIHRoZSBlbGVtZW50IGlzIGEgaG9zdCBvZiBhbiBvcGVuIHNoYWRvdyByb290LlxuICogIFJldHVybiBmYWxzZSBpZiB0aGUgZWxlbWVudCBpcyBhIGhvc3Qgb2YgYSBjbG9zZWQgc2hhZG93IHJvb3QsIG9yIGlmIHRoZSBlbGVtZW50IGlzIG5vdCBhIGhvc3QuXG4gKi9cbmV4cG9ydCBjb25zdCBpc09wZW5TaGFkb3dIb3N0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IGJvb2xlYW4gPT5cbiAgVHlwZS5pc05vbk51bGxhYmxlKGVsZW1lbnQuZG9tLnNoYWRvd1Jvb3QpO1xuIiwiaW1wb3J0IHR5cGUgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IE5vZGVWYWx1ZSB9IGZyb20gJy4uLy4uL2ltcGwvTm9kZVZhbHVlJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi9TdWdhck5vZGUnO1xuXG5jb25zdCBhcGkgPSBOb2RlVmFsdWUoU3VnYXJOb2RlLmlzVGV4dCwgJ3RleHQnKTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxUZXh0Pik6IHN0cmluZyA9PlxuICBhcGkuZ2V0KGVsZW1lbnQpO1xuXG5jb25zdCBnZXRPcHRpb24gPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8c3RyaW5nPiA9PlxuICBhcGkuZ2V0T3B0aW9uKGVsZW1lbnQpO1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PFRleHQ+LCB2YWx1ZTogc3RyaW5nKTogdm9pZCA9PlxuICBhcGkuc2V0KGVsZW1lbnQsIHZhbHVlKTtcblxuZXhwb3J0IHtcbiAgZ2V0LFxuICBnZXRPcHRpb24sXG4gIHNldFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBBdHRyaWJ1dGUgZnJvbSAnLi9BdHRyaWJ1dGUnO1xuXG4vLyBNZXRob2RzIGZvciBoYW5kbGluZyBhdHRyaWJ1dGVzIHRoYXQgY29udGFpbiBhIGxpc3Qgb2YgdmFsdWVzIDxkaXYgZm9vPVwiYWxwaGEgYmV0YSB0aGV0YVwiPlxuY29uc3QgcmVhZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGF0dHI6IHN0cmluZyk6IHN0cmluZ1tdID0+IHtcbiAgY29uc3QgdmFsdWUgPSBBdHRyaWJ1dGUuZ2V0KGVsZW1lbnQsIGF0dHIpO1xuICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJycgPyBbXSA6IHZhbHVlLnNwbGl0KCcgJyk7XG59O1xuXG5jb25zdCBhZGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBhdHRyOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3Qgb2xkID0gcmVhZChlbGVtZW50LCBhdHRyKTtcbiAgY29uc3QgbnUgPSBvbGQuY29uY2F0KFsgaWQgXSk7XG4gIEF0dHJpYnV0ZS5zZXQoZWxlbWVudCwgYXR0ciwgbnUuam9pbignICcpKTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5jb25zdCByZW1vdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBhdHRyOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgbnUgPSBBcnIuZmlsdGVyKHJlYWQoZWxlbWVudCwgYXR0ciksICh2KSA9PiB2ICE9PSBpZCk7XG4gIGlmIChudS5sZW5ndGggPiAwKSB7XG4gICAgQXR0cmlidXRlLnNldChlbGVtZW50LCBhdHRyLCBudS5qb2luKCcgJykpO1xuICB9IGVsc2Uge1xuICAgIEF0dHJpYnV0ZS5yZW1vdmUoZWxlbWVudCwgYXR0cik7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IHtcbiAgcmVhZCxcbiAgYWRkLFxuICByZW1vdmVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9iaiwgT3B0aW9uYWwsIFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyTm9kZSBmcm9tICcuLi9ub2RlL1N1Z2FyTm9kZSc7XG5cbmNvbnN0IHJhd1NldCA9IChkb206IEVsZW1lbnQsIGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlcik6IHZvaWQgPT4ge1xuICAvKlxuICAgKiBKUXVlcnkgY29lcmNlZCBldmVyeXRoaW5nIHRvIGEgc3RyaW5nLCBhbmQgc2lsZW50bHkgZGlkIG5vdGhpbmcgb24gdGV4dCBub2RlL251bGwvdW5kZWZpbmVkLlxuICAgKlxuICAgKiBXZSBmYWlsIG9uIHRob3NlIGludmFsaWQgY2FzZXMsIG9ubHkgYWxsb3dpbmcgbnVtYmVycyBhbmQgYm9vbGVhbnMuXG4gICAqL1xuICBpZiAoVHlwZS5pc1N0cmluZyh2YWx1ZSkgfHwgVHlwZS5pc0Jvb2xlYW4odmFsdWUpIHx8IFR5cGUuaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgZG9tLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlICsgJycpO1xuICB9IGVsc2Uge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjYWxsIHRvIEF0dHJpYnV0ZS5zZXQuIEtleSAnLCBrZXksICc6OiBWYWx1ZSAnLCB2YWx1ZSwgJzo6IEVsZW1lbnQgJywgZG9tKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dHJpYnV0ZSB2YWx1ZSB3YXMgbm90IHNpbXBsZScpO1xuICB9XG59O1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXIpOiB2b2lkID0+IHtcbiAgcmF3U2V0KGVsZW1lbnQuZG9tLCBrZXksIHZhbHVlKTtcbn07XG5cbmNvbnN0IHNldEFsbCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGF0dHJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyPik6IHZvaWQgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgT2JqLmVhY2goYXR0cnMsICh2LCBrKSA9PiB7XG4gICAgcmF3U2V0KGRvbSwgaywgdik7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0T3B0aW9ucyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGF0dHJzOiBSZWNvcmQ8c3RyaW5nLCBPcHRpb25hbDxzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyPj4pOiB2b2lkID0+IHtcbiAgT2JqLmVhY2goYXR0cnMsICh2LCBrKSA9PiB7XG4gICAgdi5mb2xkKCgpID0+IHtcbiAgICAgIHJlbW92ZShlbGVtZW50LCBrKTtcbiAgICB9LCAodmFsdWUpID0+IHtcbiAgICAgIHJhd1NldChlbGVtZW50LmRvbSwgaywgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGdldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGtleTogc3RyaW5nKTogdW5kZWZpbmVkIHwgc3RyaW5nID0+IHtcbiAgY29uc3QgdiA9IGVsZW1lbnQuZG9tLmdldEF0dHJpYnV0ZShrZXkpO1xuXG4gIC8vIHVuZGVmaW5lZCBpcyB0aGUgbW9yZSBhcHByb3ByaWF0ZSB2YWx1ZSBmb3IgSlMsIGFuZCB0aGlzIG1hdGNoZXMgSlF1ZXJ5XG4gIHJldHVybiB2ID09PSBudWxsID8gdW5kZWZpbmVkIDogdjtcbn07XG5cbmNvbnN0IGdldE9wdCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGtleTogc3RyaW5nKTogT3B0aW9uYWw8c3RyaW5nPiA9PlxuICBPcHRpb25hbC5mcm9tKGdldChlbGVtZW50LCBrZXkpKTtcblxuY29uc3QgaGFzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwga2V5OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG5cbiAgLy8gcmV0dXJuIGZhbHNlIGZvciBub24tZWxlbWVudCBub2Rlcywgbm8gcG9pbnQgaW4gdGhyb3dpbmcgYW4gZXJyb3JcbiAgcmV0dXJuIGRvbSAmJiAoZG9tIGFzIEVsZW1lbnQpLmhhc0F0dHJpYnV0ZSA/IChkb20gYXMgRWxlbWVudCkuaGFzQXR0cmlidXRlKGtleSkgOiBmYWxzZTtcbn07XG5cbmNvbnN0IHJlbW92ZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGtleTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGVsZW1lbnQuZG9tLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xufTtcblxuY29uc3QgaGFzTm9uZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgYXR0cnMgPSAoZWxlbWVudC5kb20gYXMgRWxlbWVudCkuYXR0cmlidXRlcztcbiAgcmV0dXJuIGF0dHJzID09PSB1bmRlZmluZWQgfHwgYXR0cnMgPT09IG51bGwgfHwgYXR0cnMubGVuZ3RoID09PSAwO1xufTtcblxuY29uc3QgY2xvbmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PlxuICBBcnIuZm9sZGwoZWxlbWVudC5kb20uYXR0cmlidXRlcywgKGFjYywgYXR0cikgPT4ge1xuICAgIGFjY1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuY29uc3QgdHJhbnNmZXJPbmUgPSAoc291cmNlOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGRlc3RpbmF0aW9uOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGF0dHI6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAvLyBOT1RFOiBXZSBkb24ndCB3YW50IHRvIGNsb2JiZXIgYW55IGV4aXN0aW5nIGF0dHJpYnV0ZXNcbiAgaWYgKCFoYXMoZGVzdGluYXRpb24sIGF0dHIpKSB7XG4gICAgZ2V0T3B0KHNvdXJjZSwgYXR0cikuZWFjaCgoc3JjVmFsdWUpID0+IHNldChkZXN0aW5hdGlvbiwgYXR0ciwgc3JjVmFsdWUpKTtcbiAgfVxufTtcblxuLy8gVHJhbnNmZXIgYXR0cmlidXRlcyhhdHRycykgZnJvbSBzb3VyY2UgdG8gZGVzdGluYXRpb24sIHVubGVzcyB0aGV5IGFyZSBhbHJlYWR5IHByZXNlbnRcbmNvbnN0IHRyYW5zZmVyID0gKHNvdXJjZTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBkZXN0aW5hdGlvbjogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBhdHRyczogc3RyaW5nW10pOiB2b2lkID0+IHtcbiAgaWYgKCFTdWdhck5vZGUuaXNFbGVtZW50KHNvdXJjZSkgfHwgIVN1Z2FyTm9kZS5pc0VsZW1lbnQoZGVzdGluYXRpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIEFyci5lYWNoKGF0dHJzLCAoYXR0cikgPT4ge1xuICAgIHRyYW5zZmVyT25lKHNvdXJjZSwgZGVzdGluYXRpb24sIGF0dHIpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IGNsb25lLCBzZXQsIHNldEFsbCwgc2V0T3B0aW9ucywgZ2V0LCBnZXRPcHQsIGhhcywgcmVtb3ZlLCBoYXNOb25lLCB0cmFuc2ZlciB9O1xuIiwiaW1wb3J0ICogYXMgQ2xhc3NMaXN0IGZyb20gJy4uLy4uL2ltcGwvQ2xhc3NMaXN0JztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBBdHRyaWJ1dGUgZnJvbSAnLi9BdHRyaWJ1dGUnO1xuaW1wb3J0IHsgVG9nZ2xlciB9IGZyb20gJy4vVG9nZ2xlcic7XG5cbi8qXG4gKiBDbGFzc0xpc3QgaXMgSUUxMCBtaW5pbXVtOlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQuY2xhc3NMaXN0XG4gKlxuICogTm90ZSB0aGF0IElFIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRvZ2dsZSAoYXQgYWxsKS5cbiAqIElmIGl0IGRpZCwgdGhlIHRvZ2dsZXIgY291bGQgYmUgYmV0dGVyLlxuICovXG5cbmNvbnN0IGFkZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGNsYXp6OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgaWYgKENsYXNzTGlzdC5zdXBwb3J0cyhlbGVtZW50KSkge1xuICAgIGVsZW1lbnQuZG9tLmNsYXNzTGlzdC5hZGQoY2xhenopO1xuICB9IGVsc2Uge1xuICAgIENsYXNzTGlzdC5hZGQoZWxlbWVudCwgY2xhenopO1xuICB9XG59O1xuXG5jb25zdCBjbGVhbkNsYXNzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBjb25zdCBjbGFzc0xpc3QgPSBDbGFzc0xpc3Quc3VwcG9ydHMoZWxlbWVudCkgPyBlbGVtZW50LmRvbS5jbGFzc0xpc3QgOiBDbGFzc0xpc3QuZ2V0KGVsZW1lbnQpO1xuICAvLyBjbGFzc0xpc3QgaXMgYSBcImxpdmUgbGlzdFwiLCBzbyB0aGlzIGlzIHVwIHRvIGRhdGUgYWxyZWFkeVxuICBpZiAoY2xhc3NMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIE5vIG1vcmUgY2xhc3NlcyBsZWZ0LCByZW1vdmUgdGhlIGNsYXNzIGF0dHJpYnV0ZSBhcyB3ZWxsXG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCAnY2xhc3MnKTtcbiAgfVxufTtcblxuY29uc3QgcmVtb3ZlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgY2xheno6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAoQ2xhc3NMaXN0LnN1cHBvcnRzKGVsZW1lbnQpKSB7XG4gICAgY29uc3QgY2xhc3NMaXN0ID0gZWxlbWVudC5kb20uY2xhc3NMaXN0O1xuICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhenopO1xuICB9IGVsc2Uge1xuICAgIENsYXNzTGlzdC5yZW1vdmUoZWxlbWVudCwgY2xhenopO1xuICB9XG5cbiAgY2xlYW5DbGFzcyhlbGVtZW50KTtcbn07XG5cbmNvbnN0IHRvZ2dsZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIGNsYXp6OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gQ2xhc3NMaXN0LnN1cHBvcnRzKGVsZW1lbnQpID8gZWxlbWVudC5kb20uY2xhc3NMaXN0LnRvZ2dsZShjbGF6eikgOiBDbGFzc0xpc3QudG9nZ2xlKGVsZW1lbnQsIGNsYXp6KTtcbiAgY2xlYW5DbGFzcyhlbGVtZW50KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNvbnN0IHRvZ2dsZXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjbGF6ejogc3RyaW5nKTogVG9nZ2xlciA9PiB7XG4gIGNvbnN0IGhhc0NsYXNzbGlzdCA9IENsYXNzTGlzdC5zdXBwb3J0cyhlbGVtZW50KTtcbiAgY29uc3QgY2xhc3NMaXN0ID0gZWxlbWVudC5kb20uY2xhc3NMaXN0O1xuICBjb25zdCBvZmYgPSAoKSA9PiB7XG4gICAgaWYgKGhhc0NsYXNzbGlzdCkge1xuICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGF6eik7XG4gICAgfSBlbHNlIHtcbiAgICAgIENsYXNzTGlzdC5yZW1vdmUoZWxlbWVudCwgY2xhenopO1xuICAgIH1cbiAgICBjbGVhbkNsYXNzKGVsZW1lbnQpO1xuICB9O1xuICBjb25zdCBvbiA9ICgpID0+IHtcbiAgICBpZiAoaGFzQ2xhc3NsaXN0KSB7XG4gICAgICBjbGFzc0xpc3QuYWRkKGNsYXp6KTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ2xhc3NMaXN0LmFkZChlbGVtZW50LCBjbGF6eik7XG4gICAgfVxuICB9O1xuICByZXR1cm4gVG9nZ2xlcihvZmYsIG9uLCBoYXMoZWxlbWVudCwgY2xhenopKTtcbn07XG5cbmNvbnN0IGhhcyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGNsYXp6OiBzdHJpbmcpOiBib29sZWFuID0+XG4gIENsYXNzTGlzdC5zdXBwb3J0cyhlbGVtZW50KSAmJiBlbGVtZW50LmRvbS5jbGFzc0xpc3QuY29udGFpbnMoY2xhenopO1xuXG5leHBvcnQge1xuICBhZGQsXG4gIHJlbW92ZSxcbiAgdG9nZ2xlLFxuICB0b2dnbGVyLFxuICBoYXNcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBDbGFzc0xpc3QgZnJvbSAnLi4vLi4vaW1wbC9DbGFzc0xpc3QnO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCAqIGFzIENsYXNzIGZyb20gJy4vQ2xhc3MnO1xuXG4vKlxuICogQ2xhc3NMaXN0IGlzIElFMTAgbWluaW11bTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50LmNsYXNzTGlzdFxuICovXG5jb25zdCBhZGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjbGFzc2VzOiBzdHJpbmdbXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChjbGFzc2VzLCAoeCkgPT4ge1xuICAgIENsYXNzLmFkZChlbGVtZW50LCB4KTtcbiAgfSk7XG59O1xuXG5jb25zdCByZW1vdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjbGFzc2VzOiBzdHJpbmdbXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChjbGFzc2VzLCAoeCkgPT4ge1xuICAgIENsYXNzLnJlbW92ZShlbGVtZW50LCB4KTtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjbGFzc2VzOiBzdHJpbmdbXSk6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChjbGFzc2VzLCAoeCkgPT4ge1xuICAgIENsYXNzLnRvZ2dsZShlbGVtZW50LCB4KTtcbiAgfSk7XG59O1xuXG5jb25zdCBoYXNBbGwgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBjbGFzc2VzOiBzdHJpbmdbXSk6IGJvb2xlYW4gPT5cbiAgQXJyLmZvcmFsbChjbGFzc2VzLCAoY2xhenopID0+IENsYXNzLmhhcyhlbGVtZW50LCBjbGF6eikpO1xuXG5jb25zdCBoYXNBbnkgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBjbGFzc2VzOiBzdHJpbmdbXSk6IGJvb2xlYW4gPT5cbiAgQXJyLmV4aXN0cyhjbGFzc2VzLCAoY2xhenopID0+IENsYXNzLmhhcyhlbGVtZW50LCBjbGF6eikpO1xuXG5jb25zdCBnZXROYXRpdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogc3RyaW5nW10gPT4ge1xuICBjb25zdCBjbGFzc0xpc3QgPSBlbGVtZW50LmRvbS5jbGFzc0xpc3Q7XG4gIGNvbnN0IHI6IEFycmF5PHN0cmluZz4gPSBuZXcgQXJyYXkoY2xhc3NMaXN0Lmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2xhc3NMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaXRlbSA9IGNsYXNzTGlzdC5pdGVtKGkpO1xuICAgIGlmIChpdGVtICE9PSBudWxsKSB7XG4gICAgICByW2ldID0gaXRlbTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5jb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogc3RyaW5nW10gPT5cbiAgQ2xhc3NMaXN0LnN1cHBvcnRzKGVsZW1lbnQpID8gZ2V0TmF0aXZlKGVsZW1lbnQpIDogQ2xhc3NMaXN0LmdldChlbGVtZW50KTtcblxuZXhwb3J0IHtcbiAgYWRkLFxuICByZW1vdmUsXG4gIHRvZ2dsZSxcbiAgaGFzQWxsLFxuICBoYXNBbnksXG4gIGdldFxufTtcbiIsImltcG9ydCB7IEZ1biwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIFN1Z2FyQm9keSBmcm9tICcuLi9ub2RlL1N1Z2FyQm9keSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFNlbGVjdG9yRmluZCBmcm9tICcuLi9zZWFyY2gvU2VsZWN0b3JGaW5kJztcblxuY29uc3QgY2xvc2VzdCA9ICh0YXJnZXQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4+ID0+XG4gIFNlbGVjdG9yRmluZC5jbG9zZXN0KHRhcmdldCwgJ1tjb250ZW50ZWRpdGFibGVdJyk7XG5cbmNvbnN0IGlzRWRpdGFibGUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgYXNzdW1lRWRpdGFibGU6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4gPT4ge1xuICBpZiAoU3VnYXJCb2R5LmluQm9keShlbGVtZW50KSkge1xuICAgIHJldHVybiBlbGVtZW50LmRvbS5pc0NvbnRlbnRFZGl0YWJsZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IGNvbnRlbnRlZGl0YWJsZSBlbGVtZW50IGFuZCBjaGVjayBpZiBpdCdzIGVkaXRhYmxlXG4gICAgcmV0dXJuIGNsb3Nlc3QoZWxlbWVudCkuZm9sZChcbiAgICAgIEZ1bi5jb25zdGFudChhc3N1bWVFZGl0YWJsZSksXG4gICAgICAoZWRpdGFibGUpID0+IGdldFJhdyhlZGl0YWJsZSkgPT09ICd0cnVlJ1xuICAgICk7XG4gIH1cbn07XG5cbmNvbnN0IGdldFJhdyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogc3RyaW5nID0+XG4gIGVsZW1lbnQuZG9tLmNvbnRlbnRFZGl0YWJsZTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBib29sZWFuID0+XG4gIGlzRWRpdGFibGUoZWxlbWVudCwgZmFsc2UpO1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgZWRpdGFibGU6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgZWxlbWVudC5kb20uY29udGVudEVkaXRhYmxlID0gZWRpdGFibGUgPyAndHJ1ZScgOiAnZmFsc2UnO1xufTtcblxuZXhwb3J0IHtcbiAgZ2V0LFxuICBnZXRSYXcsXG4gIGNsb3Nlc3QsXG4gIGlzRWRpdGFibGUsXG4gIHNldFxufTtcbiIsImltcG9ydCB7IEFyciwgT2JqLCBPcHRpb25hbCwgT3B0aW9uYWxzLCBTdHJpbmdzLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0ICogYXMgU3R5bGUgZnJvbSAnLi4vLi4vaW1wbC9TdHlsZSc7XG5pbXBvcnQgKiBhcyBTdWdhckJvZHkgZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgU3VnYXJOb2RlIGZyb20gJy4uL25vZGUvU3VnYXJOb2RlJztcblxuaW1wb3J0ICogYXMgQXR0cmlidXRlIGZyb20gJy4vQXR0cmlidXRlJztcblxuY29uc3QgaW50ZXJuYWxTZXQgPSAoZG9tOiBOb2RlLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIC8vIFRoaXMgaXMgZ29pbmcgdG8gaHVydC4gQXBvbG9naWVzLlxuICAvLyBKUXVlcnkgY29lcmNlcyBudW1iZXJzIHRvIHBpeGVscyBmb3IgY2VydGFpbiBwcm9wZXJ0eSBuYW1lcywgYW5kIG90aGVyIHRpbWVzIGxldHMgbnVtYmVycyB0aHJvdWdoLlxuICAvLyB3ZSdyZSBnb2luZyB0byBiZSBleHBsaWNpdDsgc3RyaW5ncyBvbmx5LlxuICBpZiAoIVR5cGUuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGNhbGwgdG8gQ1NTLnNldC4gUHJvcGVydHkgJywgcHJvcGVydHksICc6OiBWYWx1ZSAnLCB2YWx1ZSwgJzo6IEVsZW1lbnQgJywgZG9tKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NTUyB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nOiAnICsgdmFsdWUpO1xuICB9XG5cbiAgLy8gcmVtb3ZlZDogc3VwcG9ydCBmb3IgZG9tKCkuc3R5bGVbcHJvcGVydHldIHdoZXJlIHByb3AgaXMgY2FtZWwgY2FzZSBpbnN0ZWFkIG9mIG5vcm1hbCBwcm9wZXJ0eSBuYW1lXG4gIGlmIChTdHlsZS5pc1N1cHBvcnRlZChkb20pKSB7XG4gICAgZG9tLnN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSk7XG4gIH1cbn07XG5cbmNvbnN0IGludGVybmFsUmVtb3ZlID0gKGRvbTogTm9kZSwgcHJvcGVydHk6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAvKlxuICAgKiBJRTkgYW5kIGFib3ZlIC0gTUROIGRvZXNuJ3QgaGF2ZSBkZXRhaWxzLCBidXQgaGVyZSdzIGEgY291cGxlIG9mIHJhbmRvbSBpbnRlcm5ldCBjbGFpbXNcbiAgICpcbiAgICogaHR0cDovL2hlbHAuZG90dG9yby5jb20vbGpvcHNqY2sucGhwXG4gICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzc5MDE4ODYvNzU0NlxuICAgKi9cbiAgaWYgKFN0eWxlLmlzU3VwcG9ydGVkKGRvbSkpIHtcbiAgICBkb20uc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICB9XG59O1xuXG5jb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBpbnRlcm5hbFNldChkb20sIHByb3BlcnR5LCB2YWx1ZSk7XG59O1xuXG5jb25zdCBzZXRBbGwgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBjc3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG5cbiAgT2JqLmVhY2goY3NzLCAodiwgaykgPT4ge1xuICAgIGludGVybmFsU2V0KGRvbSwgaywgdik7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0T3B0aW9ucyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGNzczogUmVjb3JkPHN0cmluZywgT3B0aW9uYWw8c3RyaW5nPj4pOiB2b2lkID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG5cbiAgT2JqLmVhY2goY3NzLCAodiwgaykgPT4ge1xuICAgIHYuZm9sZCgoKSA9PiB7XG4gICAgICBpbnRlcm5hbFJlbW92ZShkb20sIGspO1xuICAgIH0sICh2YWx1ZSkgPT4ge1xuICAgICAgaW50ZXJuYWxTZXQoZG9tLCBrLCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuLypcbiAqIE5PVEU6IEZvciBjZXJ0YWluIHByb3BlcnRpZXMsIHRoaXMgcmV0dXJucyB0aGUgXCJ1c2VkIHZhbHVlXCIgd2hpY2ggaXMgc3VidGx5IGRpZmZlcmVudCB0byB0aGUgXCJjb21wdXRlZCB2YWx1ZVwiIChkZXNwaXRlIGNhbGxpbmcgZ2V0Q29tcHV0ZWRTdHlsZSkuXG4gKiBCbGFtZSBDU1MgMi4wLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy91c2VkX3ZhbHVlXG4gKi9cbmNvbnN0IGdldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHByb3BlcnR5OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgLypcbiAgICogSUU5IGFuZCBhYm92ZSBwZXJcbiAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlXG4gICAqXG4gICAqIE5vdCBpbiBudW1lcm9zaXR5LCBiZWNhdXNlIGl0IGRvZXNuJ3QgbWVtb2l6ZSBhbmQgbG9va2luZyB0aGlzIHVwIGR5bmFtaWNhbGx5IGluIHBlcmZvcm1hbmNlIGNyaXRpY2FsIGNvZGUgd291bGQgYmUgaG9ycmVuZG91cy5cbiAgICpcbiAgICogSlF1ZXJ5IGhhcyBzb21lIG1hZ2ljIGhlcmUgZm9yIElFIHBvcHVwcywgYnV0IHdlIGRvbid0IHJlYWxseSBuZWVkIHRoYXQuXG4gICAqIEl0IGFsc28gdXNlcyBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgdG8gaGFuZGxlIGlmcmFtZXMgYnV0IHRoYXQgaGFzbid0IGJlZW4gcmVxdWlyZWQgc2luY2UgRkYgMy42LlxuICAgKi9cbiAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tKTtcbiAgY29uc3QgciA9IHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KTtcblxuICAvLyBqcXVlcnktaXNtOiBJZiByIGlzIGFuIGVtcHR5IHN0cmluZywgY2hlY2sgdGhhdCB0aGUgZWxlbWVudCBpcyBub3QgaW4gYSBkb2N1bWVudC4gSWYgaXQgaXNuJ3QsIHJldHVybiB0aGUgcmF3IHZhbHVlLlxuICAvLyBUdXJucyBvdXQgd2UgZG8gdGhpcyBhIGxvdC5cbiAgcmV0dXJuIChyID09PSAnJyAmJiAhU3VnYXJCb2R5LmluQm9keShlbGVtZW50KSkgPyBnZXRVbnNhZmVQcm9wZXJ0eShkb20sIHByb3BlcnR5KSA6IHI7XG59O1xuXG4vLyByZW1vdmVkOiBzdXBwb3J0IGZvciBkb20oKS5zdHlsZVtwcm9wZXJ0eV0gd2hlcmUgcHJvcCBpcyBjYW1lbCBjYXNlIGluc3RlYWQgb2Ygbm9ybWFsIHByb3BlcnR5IG5hbWVcbi8vIGVtcHR5IHN0cmluZyBpcyB3aGF0IHRoZSBicm93c2VycyAoSUUxMSBhbmQgQ2hyb21lKSByZXR1cm4gd2hlbiB0aGUgcHJvcGVydHlWYWx1ZSBkb2Vzbid0IGV4aXN0cy5cbmNvbnN0IGdldFVuc2FmZVByb3BlcnR5ID0gKGRvbTogTm9kZSwgcHJvcGVydHk6IHN0cmluZyk6IHN0cmluZyA9PlxuICBTdHlsZS5pc1N1cHBvcnRlZChkb20pID8gZG9tLnN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpIDogJyc7XG5cbi8qXG4gKiBHZXRzIHRoZSByYXcgdmFsdWUgZnJvbSB0aGUgc3R5bGUgYXR0cmlidXRlLiBVc2VmdWwgZm9yIHJldHJpZXZpbmcgXCJ1c2VkIHZhbHVlc1wiIGZyb20gdGhlIERPTTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy91c2VkX3ZhbHVlXG4gKlxuICogUmV0dXJucyBOT05FIGlmIHRoZSBwcm9wZXJ0eSBpc24ndCBzZXQsIG9yIHRoZSB2YWx1ZSBpcyBhbiBlbXB0eSBzdHJpbmcuXG4gKi9cbmNvbnN0IGdldFJhdyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByb3BlcnR5OiBzdHJpbmcpOiBPcHRpb25hbDxzdHJpbmc+ID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG4gIGNvbnN0IHJhdyA9IGdldFVuc2FmZVByb3BlcnR5KGRvbSwgcHJvcGVydHkpO1xuXG4gIHJldHVybiBPcHRpb25hbC5mcm9tKHJhdykuZmlsdGVyKChyKSA9PiByLmxlbmd0aCA+IDApO1xufTtcblxuY29uc3QgZ2V0QWxsUmF3ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICBjb25zdCBjc3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG5cbiAgaWYgKFN0eWxlLmlzU3VwcG9ydGVkKGRvbSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbS5zdHlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcnVsZU5hbWUgPSBkb20uc3R5bGUuaXRlbShpKSBhcyBrZXlvZiBDU1NTdHlsZURlY2xhcmF0aW9uO1xuICAgICAgY3NzW3J1bGVOYW1lXSA9IGRvbS5zdHlsZVtydWxlTmFtZV0gYXMgc3RyaW5nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY3NzO1xufTtcblxuY29uc3QgaXNWYWxpZFZhbHVlID0gKHRhZzogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBTdWdhckVsZW1lbnQuZnJvbVRhZyh0YWcpO1xuICBzZXQoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlKTtcbiAgY29uc3Qgc3R5bGUgPSBnZXRSYXcoZWxlbWVudCwgcHJvcGVydHkpO1xuICByZXR1cm4gc3R5bGUuaXNTb21lKCk7XG59O1xuXG5jb25zdCByZW1vdmUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBwcm9wZXJ0eTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuXG4gIGludGVybmFsUmVtb3ZlKGRvbSwgcHJvcGVydHkpO1xuXG4gIGlmIChPcHRpb25hbHMuaXMoQXR0cmlidXRlLmdldE9wdChlbGVtZW50IGFzIFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgJ3N0eWxlJykubWFwKFN0cmluZ3MudHJpbSksICcnKSkge1xuICAgIC8vIE5vIG1vcmUgc3R5bGVzIGxlZnQsIHJlbW92ZSB0aGUgc3R5bGUgYXR0cmlidXRlIGFzIHdlbGxcbiAgICBBdHRyaWJ1dGUucmVtb3ZlKGVsZW1lbnQgYXMgU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCAnc3R5bGUnKTtcbiAgfVxufTtcblxuY29uc3QgcHJlc2VydmUgPSA8RSBleHRlbmRzIEVsZW1lbnQsIFQ+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RT4sIGY6IChlOiBTdWdhckVsZW1lbnQ8RT4pID0+IFQpOiBUID0+IHtcbiAgY29uc3Qgb2xkU3R5bGVzID0gQXR0cmlidXRlLmdldChlbGVtZW50LCAnc3R5bGUnKTtcbiAgY29uc3QgcmVzdWx0ID0gZihlbGVtZW50KTtcbiAgaWYgKG9sZFN0eWxlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgQXR0cmlidXRlLnJlbW92ZShlbGVtZW50LCAnc3R5bGUnKTtcbiAgfSBlbHNlIHtcbiAgICBBdHRyaWJ1dGUuc2V0KGVsZW1lbnQsICdzdHlsZScsIG9sZFN0eWxlcyk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNvbnN0IGNvcHkgPSAoc291cmNlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHRhcmdldDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBjb25zdCBzb3VyY2VEb20gPSBzb3VyY2UuZG9tO1xuICBjb25zdCB0YXJnZXREb20gPSB0YXJnZXQuZG9tO1xuICBpZiAoU3R5bGUuaXNTdXBwb3J0ZWQoc291cmNlRG9tKSAmJiBTdHlsZS5pc1N1cHBvcnRlZCh0YXJnZXREb20pKSB7XG4gICAgdGFyZ2V0RG9tLnN0eWxlLmNzc1RleHQgPSBzb3VyY2VEb20uc3R5bGUuY3NzVGV4dDtcbiAgfVxufTtcblxuLyogTk9URTogVGhpcyBmdW5jdGlvbiBpcyBoZXJlIGZvciB0aGUgc2lkZSBlZmZlY3QgaXQgdHJpZ2dlcnMuXG5UaGUgdmFsdWUgaXRzZWxmIGlzIG5vdCB1c2VkLlxuQmUgc3VyZSB0byBub3QgdXNlIHRoZSByZXR1cm4gdmFsdWUsIGFuZCB0aGF0IGl0IGlzIG5vdCByZW1vdmVkIGJ5IGEgbWluaWZpZXIuXG4gKi9cbmNvbnN0IHJlZmxvdyA9IChlOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogdm9pZCA9PlxuICBlLmRvbS5vZmZzZXRXaWR0aCBhcyB1bmtub3duIGFzIHZvaWQ7XG5cbmNvbnN0IHRyYW5zZmVyT25lID0gKHNvdXJjZTogU3VnYXJFbGVtZW50PE5vZGU+LCBkZXN0aW5hdGlvbjogU3VnYXJFbGVtZW50PE5vZGU+LCBzdHlsZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGdldFJhdyhzb3VyY2UsIHN0eWxlKS5lYWNoKCh2YWx1ZSkgPT4ge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHdhbnQgdG8gY2xvYmJlciBhbnkgZXhpc3RpbmcgaW5saW5lIHN0eWxlcy5cbiAgICBpZiAoZ2V0UmF3KGRlc3RpbmF0aW9uLCBzdHlsZSkuaXNOb25lKCkpIHtcbiAgICAgIHNldChkZXN0aW5hdGlvbiwgc3R5bGUsIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgdHJhbnNmZXIgPSAoc291cmNlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGRlc3RpbmF0aW9uOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHN0eWxlczogc3RyaW5nW10pOiB2b2lkID0+IHtcbiAgaWYgKCFTdWdhck5vZGUuaXNFbGVtZW50KHNvdXJjZSkgfHwgIVN1Z2FyTm9kZS5pc0VsZW1lbnQoZGVzdGluYXRpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIEFyci5lYWNoKHN0eWxlcywgKHN0eWxlKSA9PiB7XG4gICAgdHJhbnNmZXJPbmUoc291cmNlLCBkZXN0aW5hdGlvbiwgc3R5bGUpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IGNvcHksIHNldCwgcHJlc2VydmUsIHNldEFsbCwgc2V0T3B0aW9ucywgcmVtb3ZlLCBnZXQsIGdldFJhdywgZ2V0QWxsUmF3LCBpc1ZhbGlkVmFsdWUsIHJlZmxvdywgdHJhbnNmZXIgfTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBDc3MgZnJvbSAnLi9Dc3MnO1xuXG5jb25zdCBvbkRpcmVjdGlvbiA9IDxUID0gYW55PiAoaXNMdHI6IFQsIGlzUnRsOiBUKSA9PiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogVCA9PlxuICBnZXREaXJlY3Rpb24oZWxlbWVudCkgPT09ICdydGwnID8gaXNSdGwgOiBpc0x0cjtcblxuY29uc3QgZ2V0RGlyZWN0aW9uID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6ICdydGwnIHwgJ2x0cicgPT5cbiAgQ3NzLmdldChlbGVtZW50LCAnZGlyZWN0aW9uJykgPT09ICdydGwnID8gJ3J0bCcgOiAnbHRyJztcblxuZXhwb3J0IHtcbiAgb25EaXJlY3Rpb24sXG4gIGdldERpcmVjdGlvblxufTtcbiIsImltcG9ydCAqIGFzIEluc2VydCBmcm9tICcuLi9kb20vSW5zZXJ0JztcbmltcG9ydCAqIGFzIEluc2VydEFsbCBmcm9tICcuLi9kb20vSW5zZXJ0QWxsJztcbmltcG9ydCAqIGFzIFJlbW92ZSBmcm9tICcuLi9kb20vUmVtb3ZlJztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyRWxlbWVudHMgZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnRzJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmNvbnN0IGdldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogc3RyaW5nID0+XG4gIGVsZW1lbnQuZG9tLmlubmVySFRNTDtcblxuY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgY29udGVudDogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGNvbnN0IG93bmVyID0gVHJhdmVyc2Uub3duZXIoZWxlbWVudCk7XG4gIGNvbnN0IGRvY0RvbSA9IG93bmVyLmRvbTtcblxuICAvLyBGaXJlRm94IGhhcyAqdGVycmlibGUqIHBlcmZvcm1hbmNlIHdoZW4gdXNpbmcgaW5uZXJIVE1MID0geFxuICBjb25zdCBmcmFnbWVudCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY0RvbS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO1xuICBjb25zdCBjb250ZW50RWxlbWVudHMgPSBTdWdhckVsZW1lbnRzLmZyb21IdG1sKGNvbnRlbnQsIGRvY0RvbSk7XG4gIEluc2VydEFsbC5hcHBlbmQoZnJhZ21lbnQsIGNvbnRlbnRFbGVtZW50cyk7XG5cbiAgUmVtb3ZlLmVtcHR5KGVsZW1lbnQpO1xuICBJbnNlcnQuYXBwZW5kKGVsZW1lbnQsIGZyYWdtZW50KTtcbn07XG5cbmNvbnN0IGdldE91dGVyID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdkaXYnKTtcbiAgY29uc3QgY2xvbmUgPSBTdWdhckVsZW1lbnQuZnJvbURvbShlbGVtZW50LmRvbS5jbG9uZU5vZGUodHJ1ZSkpO1xuICBJbnNlcnQuYXBwZW5kKGNvbnRhaW5lciwgY2xvbmUpO1xuICByZXR1cm4gZ2V0KGNvbnRhaW5lcik7XG59O1xuXG5leHBvcnQge1xuICBnZXQsXG4gIHNldCxcbiAgZ2V0T3V0ZXJcbn07XG4iLCJpbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgQ2xhc3MgZnJvbSAnLi9DbGFzcyc7XG5pbXBvcnQgKiBhcyBDbGFzc2VzIGZyb20gJy4vQ2xhc3Nlcyc7XG5cbmNvbnN0IGFkZENsYXNzID0gKGNsYXp6OiBzdHJpbmcpID0+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pOiB2b2lkID0+IHtcbiAgQ2xhc3MuYWRkKGVsZW1lbnQsIGNsYXp6KTtcbn07XG5cbmNvbnN0IHJlbW92ZUNsYXNzID0gKGNsYXp6OiBzdHJpbmcpID0+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pOiB2b2lkID0+IHtcbiAgQ2xhc3MucmVtb3ZlKGVsZW1lbnQsIGNsYXp6KTtcbn07XG5cbmNvbnN0IHJlbW92ZUNsYXNzZXMgPSAoY2xhc3Nlczogc3RyaW5nW10pID0+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pOiB2b2lkID0+IHtcbiAgQ2xhc3Nlcy5yZW1vdmUoZWxlbWVudCwgY2xhc3Nlcyk7XG59O1xuXG5jb25zdCBoYXNDbGFzcyA9IChjbGF6ejogc3RyaW5nKSA9PiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogYm9vbGVhbiA9PlxuICBDbGFzcy5oYXMoZWxlbWVudCwgY2xhenopO1xuXG5leHBvcnQge1xuICBhZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3MsXG4gIHJlbW92ZUNsYXNzZXMsXG4gIGhhc0NsYXNzXG59O1xuIiwiZXhwb3J0IGludGVyZmFjZSBUb2dnbGVyIHtcbiAgcmVhZG9ubHkgb246ICgpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9mZjogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgdG9nZ2xlOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSBpc09uOiAoKSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgVG9nZ2xlciA9ICh0dXJuT2ZmOiAoKSA9PiB2b2lkLCB0dXJuT246ICgpID0+IHZvaWQsIGluaXRpYWw6IGJvb2xlYW4pOiBUb2dnbGVyID0+IHtcbiAgbGV0IGFjdGl2ZSA9IGluaXRpYWwgfHwgZmFsc2U7XG5cbiAgY29uc3Qgb24gPSAoKSA9PiB7XG4gICAgdHVybk9uKCk7XG4gICAgYWN0aXZlID0gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBvZmYgPSAoKSA9PiB7XG4gICAgdHVybk9mZigpO1xuICAgIGFjdGl2ZSA9IGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZSA9ICgpID0+IHtcbiAgICBjb25zdCBmID0gYWN0aXZlID8gb2ZmIDogb247XG4gICAgZigpO1xuICB9O1xuXG4gIGNvbnN0IGlzT24gPSAoKSA9PiBhY3RpdmU7XG5cbiAgcmV0dXJuIHtcbiAgICBvbixcbiAgICBvZmYsXG4gICAgdG9nZ2xlLFxuICAgIGlzT25cbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgdHlwZSBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIENvbXBhcmUgZnJvbSAnLi4vZG9tL0NvbXBhcmUnO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCAqIGFzIFByZWRpY2F0ZUZpbmQgZnJvbSAnLi9QcmVkaWNhdGVGaW5kJztcbmltcG9ydCAqIGFzIFNlbGVjdG9yRmlsdGVyIGZyb20gJy4vU2VsZWN0b3JGaWx0ZXInO1xuaW1wb3J0ICogYXMgU2VsZWN0b3JGaW5kIGZyb20gJy4vU2VsZWN0b3JGaW5kJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4vVHJhdmVyc2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkZHJlc3NJbkFuY2VzdG9yPEEsIEQsIEU+IHtcbiAgcmVhZG9ubHkgYW5jZXN0b3I6IFN1Z2FyRWxlbWVudDxBPjtcbiAgcmVhZG9ubHkgZGVzY2VuZGFudHM6IFJlYWRvbmx5QXJyYXk8U3VnYXJFbGVtZW50PEQ+PjtcbiAgcmVhZG9ubHkgZWxlbWVudDogU3VnYXJFbGVtZW50PEU+O1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkZHJlc3NJblBhcmVudDxQLCBDLCBFPiB7XG4gIHJlYWRvbmx5IHBhcmVudDogU3VnYXJFbGVtZW50PFA+O1xuICByZWFkb25seSBjaGlsZHJlbjogUmVhZG9ubHlBcnJheTxTdWdhckVsZW1lbnQ8Qz4+O1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8RT47XG4gIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XG59XG5cbmNvbnN0IGluQW5jZXN0b3IgPSA8QSwgRCwgRT4gKGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8QT4sIGRlc2NlbmRhbnRzOiBTdWdhckVsZW1lbnQ8RD5bXSwgZWxlbWVudDogU3VnYXJFbGVtZW50PEU+LCBpbmRleDogbnVtYmVyKTogQWRkcmVzc0luQW5jZXN0b3I8QSwgRCwgRT4gPT4gKHtcbiAgYW5jZXN0b3IsXG4gIGRlc2NlbmRhbnRzLFxuICBlbGVtZW50LFxuICBpbmRleFxufSk7XG5cbmNvbnN0IGluUGFyZW50ID0gPFAsIEMsIEU+KHBhcmVudDogU3VnYXJFbGVtZW50PFA+LCBjaGlsZHJlbjogU3VnYXJFbGVtZW50PEM+W10sIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFPiwgaW5kZXg6IG51bWJlcik6IEFkZHJlc3NJblBhcmVudDxQLCBDLCBFPiA9PiAoe1xuICBwYXJlbnQsXG4gIGNoaWxkcmVuLFxuICBlbGVtZW50LFxuICBpbmRleFxufSk7XG5cbmNvbnN0IGNoaWxkT2YgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBhbmNlc3RvcjogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGU+PiA9PlxuICBQcmVkaWNhdGVGaW5kLmNsb3Nlc3QoZWxlbWVudCwgKGVsZW0pID0+XG4gICAgVHJhdmVyc2UucGFyZW50KGVsZW0pLmV4aXN0cygocGFyZW50KSA9PiBDb21wYXJlLmVxKHBhcmVudCwgYW5jZXN0b3IpKSk7XG5cbmNvbnN0IGluZGV4SW5QYXJlbnQgPSA8RSBleHRlbmRzIE5vZGU+IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RT4pOiBPcHRpb25hbDxBZGRyZXNzSW5QYXJlbnQ8Tm9kZSAmIFBhcmVudE5vZGUsIE5vZGUgJiBDaGlsZE5vZGUsIEU+PiA9PlxuICBUcmF2ZXJzZS5wYXJlbnQoZWxlbWVudCkuYmluZCgocGFyZW50KSA9PiB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBUcmF2ZXJzZS5jaGlsZHJlbihwYXJlbnQpO1xuICAgIHJldHVybiBpbmRleE9mKGNoaWxkcmVuLCBlbGVtZW50KS5tYXAoKGluZGV4KSA9PiBpblBhcmVudChwYXJlbnQsIGNoaWxkcmVuLCBlbGVtZW50LCBpbmRleCkpO1xuICB9KTtcblxuY29uc3QgaW5kZXhPZiA9IChlbGVtZW50czogU3VnYXJFbGVtZW50PE5vZGU+W10sIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPG51bWJlcj4gPT5cbiAgQXJyLmZpbmRJbmRleChlbGVtZW50cywgRnVuLmN1cnJ5KENvbXBhcmUuZXEsIGVsZW1lbnQpKTtcblxuY29uc3Qgc2VsZWN0b3JzSW5QYXJlbnQgPSA8RSBleHRlbmRzIE5vZGUsIFMgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFPiwgc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPEFkZHJlc3NJblBhcmVudDxOb2RlICYgUGFyZW50Tm9kZSwgUywgRT4+ID0+XG4gIFRyYXZlcnNlLnBhcmVudChlbGVtZW50KS5iaW5kKChwYXJlbnQpID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFNlbGVjdG9yRmlsdGVyLmNoaWxkcmVuPFM+KHBhcmVudCwgc2VsZWN0b3IpO1xuICAgIHJldHVybiBpbmRleE9mKGNoaWxkcmVuLCBlbGVtZW50KS5tYXAoKGluZGV4KSA9PiBpblBhcmVudChwYXJlbnQsIGNoaWxkcmVuLCBlbGVtZW50LCBpbmRleCkpO1xuICB9KTtcblxuY29uc3QgZGVzY2VuZGFudHNJbkFuY2VzdG9yID0gPEUgZXh0ZW5kcyBOb2RlLCBBIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQsIEQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFPiwgYW5jZXN0b3JTZWxlY3Rvcjogc3RyaW5nLCBkZXNjZW5kYW50U2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPEFkZHJlc3NJbkFuY2VzdG9yPEEsIEQsIEU+PiA9PlxuICBTZWxlY3RvckZpbmQuY2xvc2VzdDxBPihlbGVtZW50LCBhbmNlc3RvclNlbGVjdG9yKS5iaW5kKChhbmNlc3RvcikgPT4ge1xuICAgIGNvbnN0IGRlc2NlbmRhbnRzID0gU2VsZWN0b3JGaWx0ZXIuZGVzY2VuZGFudHM8RD4oYW5jZXN0b3IsIGRlc2NlbmRhbnRTZWxlY3Rvcik7XG4gICAgcmV0dXJuIGluZGV4T2YoZGVzY2VuZGFudHMsIGVsZW1lbnQpLm1hcCgoaW5kZXgpID0+IGluQW5jZXN0b3IoYW5jZXN0b3IsIGRlc2NlbmRhbnRzLCBlbGVtZW50LCBpbmRleCkpO1xuICB9KTtcblxuZXhwb3J0IHsgY2hpbGRPZiwgaW5kZXhPZiwgaW5kZXhJblBhcmVudCwgc2VsZWN0b3JzSW5QYXJlbnQsIGRlc2NlbmRhbnRzSW5BbmNlc3RvciB9O1xuIiwiaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5cbmltcG9ydCAqIGFzIFByZWRpY2F0ZUZpbmQgZnJvbSAnLi9QcmVkaWNhdGVGaW5kJztcblxuY29uc3QgYW55ID0gKHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IGJvb2xlYW4gPT5cbiAgUHJlZGljYXRlRmluZC5maXJzdChwcmVkaWNhdGUpLmlzU29tZSgpO1xuXG5jb25zdCBhbmNlc3RvciA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBib29sZWFuID0+XG4gIFByZWRpY2F0ZUZpbmQuYW5jZXN0b3Ioc2NvcGUsIHByZWRpY2F0ZSwgaXNSb290KS5pc1NvbWUoKTtcblxuY29uc3QgY2xvc2VzdCA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBib29sZWFuID0+XG4gIFByZWRpY2F0ZUZpbmQuY2xvc2VzdChzY29wZSwgcHJlZGljYXRlLCBpc1Jvb3QpLmlzU29tZSgpO1xuXG5jb25zdCBzaWJsaW5nID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IGJvb2xlYW4gPT5cbiAgUHJlZGljYXRlRmluZC5zaWJsaW5nKHNjb3BlLCBwcmVkaWNhdGUpLmlzU29tZSgpO1xuXG5jb25zdCBjaGlsZCA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBib29sZWFuID0+XG4gIFByZWRpY2F0ZUZpbmQuY2hpbGQoc2NvcGUsIHByZWRpY2F0ZSkuaXNTb21lKCk7XG5cbmNvbnN0IGRlc2NlbmRhbnQgPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogYm9vbGVhbiA9PlxuICBQcmVkaWNhdGVGaW5kLmRlc2NlbmRhbnQoc2NvcGUsIHByZWRpY2F0ZSkuaXNTb21lKCk7XG5cbmV4cG9ydCB7XG4gIGFueSxcbiAgYW5jZXN0b3IsXG4gIGNsb3Nlc3QsXG4gIHNpYmxpbmcsXG4gIGNoaWxkLFxuICBkZXNjZW5kYW50XG59O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0ICogYXMgU3VnYXJCb2R5IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBUcmF2ZXJzZSBmcm9tICcuL1RyYXZlcnNlJztcblxuLy8gbWF5YmUgVHJhdmVyc2VXaXRoLCBzaW1pbGFyIHRvIHRyYXZlcnNlIGJ1dCB3aXRoIGEgcHJlZGljYXRlP1xuXG5jb25zdCBhbGw6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4ocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IFN1Z2FyRWxlbWVudDxUPltdO1xuICAocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogU3VnYXJFbGVtZW50PE5vZGU+W107XG59ID0gKHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT5cbiAgZGVzY2VuZGFudHMoU3VnYXJCb2R5LmJvZHkoKSwgcHJlZGljYXRlKTtcblxuY29uc3QgYW5jZXN0b3JzOiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+KHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8VD5bXTtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxOb2RlPltdO1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+XG4gIEFyci5maWx0ZXIoVHJhdmVyc2UucGFyZW50cyhzY29wZSwgaXNSb290KSwgcHJlZGljYXRlKTtcblxuY29uc3Qgc2libGluZ3M6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IFN1Z2FyRWxlbWVudDxUPltdO1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogU3VnYXJFbGVtZW50PE5vZGU+W107XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT5cbiAgQXJyLmZpbHRlcihUcmF2ZXJzZS5zaWJsaW5ncyhzY29wZSksIHByZWRpY2F0ZSk7XG5cbmNvbnN0IGNoaWxkcmVuOiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+KHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4pOiBTdWdhckVsZW1lbnQ8VD5bXTtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IFN1Z2FyRWxlbWVudDxOb2RlPltdO1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+XG4gIEFyci5maWx0ZXIoVHJhdmVyc2UuY2hpbGRyZW4oc2NvcGUpLCBwcmVkaWNhdGUpO1xuXG5jb25zdCBkZXNjZW5kYW50czoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPihzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+KTogU3VnYXJFbGVtZW50PFQ+W107XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXTtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiB7XG4gIGxldCByZXN1bHQ6IFN1Z2FyRWxlbWVudDxOb2RlPltdID0gW107XG5cbiAgLy8gUmVjdXJzZS50b0FycmF5KCkgbWlnaHQgaGVscCBoZXJlXG4gIEFyci5lYWNoKFRyYXZlcnNlLmNoaWxkcmVuKHNjb3BlKSwgKHgpID0+IHtcbiAgICBpZiAocHJlZGljYXRlKHgpKSB7XG4gICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KFsgeCBdKTtcbiAgICB9XG4gICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkZXNjZW5kYW50cyh4LCBwcmVkaWNhdGUpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQge1xuICBhbGwsXG4gIGFuY2VzdG9ycyxcbiAgc2libGluZ3MsXG4gIGNoaWxkcmVuLFxuICBkZXNjZW5kYW50c1xufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCBDbG9zZXN0T3JBbmNlc3RvciBmcm9tICcuLi8uLi9pbXBsL0Nsb3Nlc3RPckFuY2VzdG9yJztcbmltcG9ydCAqIGFzIENvbXBhcmUgZnJvbSAnLi4vZG9tL0NvbXBhcmUnO1xuaW1wb3J0ICogYXMgU3VnYXJCb2R5IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuY29uc3QgZmlyc3Q6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VCAmIENoaWxkTm9kZT4+O1xuICAocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+Pjtcbn0gPSAocHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PlxuICBkZXNjZW5kYW50KFN1Z2FyQm9keS5ib2R5KCksIHByZWRpY2F0ZSk7XG5cbmNvbnN0IGFuY2VzdG9yOiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+LCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+PjtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj47XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT4ge1xuICBsZXQgZWxlbWVudCA9IHNjb3BlLmRvbTtcbiAgY29uc3Qgc3RvcCA9IFR5cGUuaXNGdW5jdGlvbihpc1Jvb3QpID8gaXNSb290IDogRnVuLm5ldmVyO1xuXG4gIHdoaWxlIChlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIGNvbnN0IGVsID0gU3VnYXJFbGVtZW50LmZyb21Eb20oZWxlbWVudCk7XG5cbiAgICBpZiAocHJlZGljYXRlKGVsKSkge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoZWwpO1xuICAgIH0gZWxzZSBpZiAoc3RvcChlbCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8Tm9kZT4+KCk7XG59O1xuXG5jb25zdCBjbG9zZXN0OiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+LCBpc1Jvb3Q/OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+PjtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj47XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT4ge1xuICAvLyBUaGlzIGlzIHJlcXVpcmVkIHRvIGF2b2lkIENsb3Nlc3RPckFuY2VzdG9yIHBhc3NpbmcgdGhlIHByZWRpY2F0ZSB0byBpdHNlbGZcbiAgY29uc3QgaXMgPSAoczogU3VnYXJFbGVtZW50PE5vZGU+LCB0ZXN0OiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogcyBpcyBTdWdhckVsZW1lbnQ8Tm9kZT4gPT4gdGVzdChzKTtcbiAgcmV0dXJuIENsb3Nlc3RPckFuY2VzdG9yKGlzLCBhbmNlc3Rvciwgc2NvcGUsIHByZWRpY2F0ZSwgaXNSb290KTtcbn07XG5cbmNvbnN0IHNpYmxpbmc6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gZSBpcyBTdWdhckVsZW1lbnQ8VD4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VCAmIENoaWxkTm9kZT4+O1xuICAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+Pjtcbn0gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBzY29wZS5kb207XG4gIGlmICghZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PigpO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkKFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsZW1lbnQucGFyZW50Tm9kZSksICh4KSA9PiAhQ29tcGFyZS5lcShzY29wZSwgeCkgJiYgcHJlZGljYXRlKHgpKTtcbn07XG5cbmNvbnN0IGNoaWxkOiB7XG4gIDxUIGV4dGVuZHMgTm9kZSA9IE5vZGU+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGUgaXMgU3VnYXJFbGVtZW50PFQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQgJiBDaGlsZE5vZGU+PjtcbiAgKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj47XG59ID0gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHByZWRpY2F0ZTogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbikgPT4ge1xuICBjb25zdCBwcmVkID0gKG5vZGU6IE5vZGUpID0+IHByZWRpY2F0ZShTdWdhckVsZW1lbnQuZnJvbURvbShub2RlKSk7XG4gIGNvbnN0IHJlc3VsdCA9IEFyci5maW5kKHNjb3BlLmRvbS5jaGlsZE5vZGVzLCBwcmVkKTtcbiAgcmV0dXJuIHJlc3VsdC5tYXAoU3VnYXJFbGVtZW50LmZyb21Eb20pO1xufTtcblxuY29uc3QgZGVzY2VuZGFudDoge1xuICA8VCBleHRlbmRzIE5vZGUgPSBOb2RlPiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUICYgQ2hpbGROb2RlPj47XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+O1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pID0+IHtcbiAgY29uc3QgZGVzY2VuZCA9IChub2RlOiBOb2RlKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PiB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnByZWZlci1mb3Itb2ZcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBTdWdhckVsZW1lbnQuZnJvbURvbShub2RlLmNoaWxkTm9kZXNbaV0pO1xuICAgICAgaWYgKHByZWRpY2F0ZShjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoY2hpbGQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXMgPSBkZXNjZW5kKG5vZGUuY2hpbGROb2Rlc1tpXSk7XG4gICAgICBpZiAocmVzLmlzU29tZSgpKSB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE9wdGlvbmFsLm5vbmU8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PigpO1xuICB9O1xuXG4gIHJldHVybiBkZXNjZW5kKHNjb3BlLmRvbSk7XG59O1xuXG5leHBvcnQgeyBmaXJzdCwgYW5jZXN0b3IsIGNsb3Nlc3QsIHNpYmxpbmcsIGNoaWxkLCBkZXNjZW5kYW50IH07XG4iLCJpbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgUHJlZGljYXRlRmlsdGVyIGZyb20gJy4vUHJlZGljYXRlRmlsdGVyJztcbmltcG9ydCAqIGFzIFNlbGVjdG9ycyBmcm9tICcuL1NlbGVjdG9ycyc7XG5cbmNvbnN0IGFsbCA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT5cbiAgU2VsZWN0b3JzLmFsbDxUPihzZWxlY3Rvcik7XG5cbi8vIEZvciBhbGwgb2YgdGhlIGZvbGxvd2luZzpcbi8vXG4vLyBqUXVlcnkgZG9lcyBzaWJsaW5ncyBvZiBmaXJzdENoaWxkLiBJRTkrIHN1cHBvcnRzIHNjb3BlLmRvbS5jaGlsZHJlbiAoc2ltaWxhciB0byBUcmF2ZXJzZS5jaGlsZHJlbiBidXQgZWxlbWVudHMgb25seSkuXG4vLyBUcmF2ZXJzZSBzaG91bGQgYWxzbyBkbyB0aGlzIChidXQgcHJvYmFibHkgbm90IGJ5IGRlZmF1bHQpLlxuLy9cblxuY29uc3QgYW5jZXN0b3JzID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcsIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICAvLyBJdCBtYXkgc3VycHJpc2UgeW91IHRvIGxlYXJuIHRoaXMgaXMgZXhhY3RseSB3aGF0IEpRdWVyeSBkb2VzXG4gIC8vIFRPRE86IEF2b2lkIGFsbCB0aGlzIHdyYXBwaW5nIGFuZCB1bndyYXBwaW5nXG4gIFByZWRpY2F0ZUZpbHRlci5hbmNlc3RvcnMoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSwgaXNSb290KTtcblxuY29uc3Qgc2libGluZ3MgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZyk6IFN1Z2FyRWxlbWVudDxUPltdID0+XG4gIC8vIEl0IG1heSBzdXJwcmlzZSB5b3UgdG8gbGVhcm4gdGhpcyBpcyBleGFjdGx5IHdoYXQgSlF1ZXJ5IGRvZXNcbiAgLy8gVE9ETzogQXZvaWQgYWxsIHRoZSB3cmFwcGluZyBhbmQgdW53cmFwcGluZ1xuICBQcmVkaWNhdGVGaWx0ZXIuc2libGluZ3Moc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGNoaWxkcmVuID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICAvLyBJdCBtYXkgc3VycHJpc2UgeW91IHRvIGxlYXJuIHRoaXMgaXMgZXhhY3RseSB3aGF0IEpRdWVyeSBkb2VzXG4gIC8vIFRPRE86IEF2b2lkIGFsbCB0aGUgd3JhcHBpbmcgYW5kIHVud3JhcHBpbmdcbiAgUHJlZGljYXRlRmlsdGVyLmNoaWxkcmVuKHNjb3BlLCAoZSk6IGUgaXMgU3VnYXJFbGVtZW50PFQ+ID0+IFNlbGVjdG9ycy5pczxUPihlLCBzZWxlY3RvcikpO1xuXG5jb25zdCBkZXNjZW5kYW50cyA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT5cbiAgU2VsZWN0b3JzLmFsbDxUPihzZWxlY3Rvciwgc2NvcGUpO1xuXG5leHBvcnQge1xuICBhbGwsXG4gIGFuY2VzdG9ycyxcbiAgc2libGluZ3MsXG4gIGNoaWxkcmVuLFxuICBkZXNjZW5kYW50c1xufTtcbiIsImltcG9ydCB0eXBlIHsgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgQ2xvc2VzdE9yQW5jZXN0b3IgZnJvbSAnLi4vLi4vaW1wbC9DbG9zZXN0T3JBbmNlc3Rvcic7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcblxuaW1wb3J0ICogYXMgUHJlZGljYXRlRmluZCBmcm9tICcuL1ByZWRpY2F0ZUZpbmQnO1xuaW1wb3J0ICogYXMgU2VsZWN0b3JzIGZyb20gJy4vU2VsZWN0b3JzJztcblxuLy8gVE9ETzogQW4gaW50ZXJuYWwgU2VsZWN0b3JGaWx0ZXIgbW9kdWxlIHRoYXQgZG9lc24ndCBTdWdhckVsZW1lbnQuZnJvbURvbSgpIGV2ZXJ5dGhpbmdcblxuY29uc3QgZmlyc3QgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT5cbiAgU2VsZWN0b3JzLm9uZTxUPihzZWxlY3Rvcik7XG5cbmNvbnN0IGFuY2VzdG9yID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcsIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuYW5jZXN0b3Ioc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSwgaXNSb290KTtcblxuY29uc3Qgc2libGluZyA9IDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFQ+PiA9PlxuICBQcmVkaWNhdGVGaW5kLnNpYmxpbmcoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGNoaWxkID0gPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4gKHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuY2hpbGQoc2NvcGUsIChlKTogZSBpcyBTdWdhckVsZW1lbnQ8VD4gPT4gU2VsZWN0b3JzLmlzPFQ+KGUsIHNlbGVjdG9yKSk7XG5cbmNvbnN0IGRlc2NlbmRhbnQgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZyk6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT5cbiAgU2VsZWN0b3JzLm9uZTxUPihzZWxlY3Rvciwgc2NvcGUpO1xuXG4vLyBSZXR1cm5zIFNvbWUoY2xvc2VzdCBhbmNlc3RvciBlbGVtZW50IChzdWdhcmVkKSkgbWF0Y2hpbmcgJ3NlbGVjdG9yJyB1cCB0byBpc1Jvb3QsIG9yIE5vbmUoKSBvdGhlcndpc2VcbmNvbnN0IGNsb3Nlc3QgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc2VsZWN0b3I6IHN0cmluZywgaXNSb290PzogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUPj4gPT4ge1xuICBjb25zdCBpcyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdG9yOiBzdHJpbmcpOiBlbGVtZW50IGlzIFN1Z2FyRWxlbWVudDxUPiA9PiBTZWxlY3RvcnMuaXM8VD4oZWxlbWVudCwgc2VsZWN0b3IpO1xuICByZXR1cm4gQ2xvc2VzdE9yQW5jZXN0b3I8c3RyaW5nLCBUPihpcywgYW5jZXN0b3IsIHNjb3BlLCBzZWxlY3RvciwgaXNSb290KTtcbn07XG5cbmV4cG9ydCB7XG4gIGZpcnN0LFxuICBhbmNlc3RvcixcbiAgc2libGluZyxcbiAgY2hpbGQsXG4gIGRlc2NlbmRhbnQsXG4gIGNsb3Nlc3Rcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgRE9DVU1FTlQsIERPQ1VNRU5UX0ZSQUdNRU5ULCBFTEVNRU5UIH0gZnJvbSAnLi4vbm9kZS9Ob2RlVHlwZXMnO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbnRlcmZhY2UgVmVuZG9yRWxlbWVudCBleHRlbmRzIEVsZW1lbnQge1xuICBtc01hdGNoZXNTZWxlY3Rvcj86IChzZWxlY3Rvcjogc3RyaW5nKSA9PiBib29sZWFuO1xuICBtb3pNYXRjaGVzU2VsZWN0b3I/OiAoc2VsZWN0b3I6IHN0cmluZykgPT4gYm9vbGVhbjtcbn1cblxuY29uc3QgaXMgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBzZWxlY3Rvcjogc3RyaW5nKTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8VD4gPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgaWYgKGRvbS5ub2RlVHlwZSAhPT0gRUxFTUVOVCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbGVtID0gZG9tIGFzIFZlbmRvckVsZW1lbnQ7XG4gICAgaWYgKGVsZW0ubWF0Y2hlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZWxlbS5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0ubXNNYXRjaGVzU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVsZW0ubXNNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH0gZWxzZSBpZiAoZWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGVsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0ubW96TWF0Y2hlc1NlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGNhc3QgdG8gYW55IGFzIG1vek1hdGNoZXNTZWxlY3RvciBkb2Vzbid0IGV4aXN0IGluIFRTIERPTSBsaWJcbiAgICAgIHJldHVybiBlbGVtLm1vek1hdGNoZXNTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciBsYWNrcyBuYXRpdmUgc2VsZWN0b3JzJyk7XG4gICAgfSAvLyB1bmZvcnR1bmF0ZWx5IHdlIGNhbid0IHRocm93IHRoaXMgb24gc3RhcnR1cCA6KFxuICB9XG59O1xuXG5jb25zdCBieXBhc3NTZWxlY3RvciA9IChkb206IE5vZGUpID0+XG4gIC8vIE9ubHkgZWxlbWVudHMsIGRvY3VtZW50cyBhbmQgc2hhZG93IHJvb3RzIHN1cHBvcnQgcXVlcnlTZWxlY3RvclxuICAvLyBzaGFkb3cgcm9vdCBlbGVtZW50IHR5cGUgaXMgRE9DVU1FTlRfRlJBR01FTlRcbiAgZG9tLm5vZGVUeXBlICE9PSBFTEVNRU5UICYmIGRvbS5ub2RlVHlwZSAhPT0gRE9DVU1FTlQgJiYgZG9tLm5vZGVUeXBlICE9PSBET0NVTUVOVF9GUkFHTUVOVCB8fFxuICAgIC8vIElFIGZpeCBmb3IgY29tcGxleCBxdWVyaWVzIG9uIGVtcHR5IG5vZGVzOiBodHRwOi8vanNmaWRkbGUubmV0L3NweWRlci9mdjlwdHI1TC9cbiAgICAoZG9tIGFzIEVsZW1lbnQgfCBEb2N1bWVudCB8IERvY3VtZW50RnJhZ21lbnQpLmNoaWxkRWxlbWVudENvdW50ID09PSAwO1xuXG5jb25zdCBhbGwgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8VD5bXSA9PiB7XG4gIGNvbnN0IGJhc2UgPSBzY29wZSA9PT0gdW5kZWZpbmVkID8gZG9jdW1lbnQgOiBzY29wZS5kb207XG4gIHJldHVybiBieXBhc3NTZWxlY3RvcihiYXNlKSA/IFtdIDogQXJyLm1hcCgoYmFzZSBhcyBFbGVtZW50IHwgRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGw8VD4oc2VsZWN0b3IpLCBTdWdhckVsZW1lbnQuZnJvbURvbSk7XG59O1xuXG5jb25zdCBvbmUgPSA8VCBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PiAoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8VD4+ID0+IHtcbiAgY29uc3QgYmFzZSA9IHNjb3BlID09PSB1bmRlZmluZWQgPyBkb2N1bWVudCA6IHNjb3BlLmRvbTtcbiAgcmV0dXJuIGJ5cGFzc1NlbGVjdG9yKGJhc2UpID8gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8VD4+KCkgOiBPcHRpb25hbC5mcm9tKChiYXNlIGFzIEVsZW1lbnQgfCBEb2N1bWVudCkucXVlcnlTZWxlY3RvcjxUPihzZWxlY3RvcikpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG59O1xuXG5leHBvcnQge1xuICBhbGwsXG4gIGlzLFxuICBvbmVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT3B0aW9uYWwsIFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgKiBhcyBSZWN1cnNlIGZyb20gJy4uLy4uL2FsaWVuL1JlY3Vyc2UnO1xuaW1wb3J0ICogYXMgQ29tcGFyZSBmcm9tICcuLi9kb20vQ29tcGFyZSc7XG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi4vbm9kZS9TdWdhck5vZGUnO1xuXG4vKipcbiAqIFRoZSBkb2N1bWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudFxuICogTk9URTogdGhpcyB3aWxsIHRocm93IGlmIHRoZSBvd25lciBpcyBudWxsLlxuICovXG5jb25zdCBvd25lciA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVsZW1lbnQuZG9tLm93bmVyRG9jdW1lbnQgYXMgRG9jdW1lbnQpO1xuXG4vKipcbiAqIElmIHRoZSBlbGVtZW50IGlzIGEgZG9jdW1lbnQsIHJldHVybiBpdC4gT3RoZXJ3aXNlLCByZXR1cm4gaXRzIG93bmVyRG9jdW1lbnQuXG4gKiBAcGFyYW0gZG9zXG4gKi9cbmNvbnN0IGRvY3VtZW50T3JPd25lciA9IChkb3M6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4gPT5cbiAgU3VnYXJOb2RlLmlzRG9jdW1lbnQoZG9zKSA/IGRvcyA6IG93bmVyKGRvcyk7XG5cbmNvbnN0IGRvY3VtZW50RWxlbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY3VtZW50T3JPd25lcihlbGVtZW50KS5kb20uZG9jdW1lbnRFbGVtZW50KTtcblxuLyoqXG4gKiBUaGUgd2luZG93IGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50XG4gKiBOT1RFOiB0aGlzIHdpbGwgdGhyb3cgaWYgdGhlIGRlZmF1bHRWaWV3IGlzIG51bGwuXG4gKi9cbmNvbnN0IGRlZmF1bHRWaWV3ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxXaW5kb3c+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGRvY3VtZW50T3JPd25lcihlbGVtZW50KS5kb20uZGVmYXVsdFZpZXcgYXMgV2luZG93KTtcblxuY29uc3QgcGFyZW50ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgUGFyZW50Tm9kZT4+ID0+XG4gIE9wdGlvbmFsLmZyb20oZWxlbWVudC5kb20ucGFyZW50Tm9kZSkubWFwKFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuLy8gQ2FzdCBkb3duIHRvIGp1c3QgYmUgU3VnYXJFbGVtZW50PE5vZGU+XG5jb25zdCBwYXJlbnROb2RlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlPj4gPT5cbiAgcGFyZW50KGVsZW1lbnQpIGFzIGFueTtcblxuY29uc3QgcGFyZW50RWxlbWVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+PiA9PlxuICBPcHRpb25hbC5mcm9tKGVsZW1lbnQuZG9tLnBhcmVudEVsZW1lbnQpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IGZpbmRJbmRleCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxudW1iZXI+ID0+XG4gIHBhcmVudChlbGVtZW50KS5iaW5kKChwKSA9PiB7XG4gICAgLy8gVE9ETzogUmVmYWN0b3Igb3V0IGNoaWxkcmVuIHNvIHdlIGNhbiBhdm9pZCB0aGUgY29uc3RhbnQgdW53cmFwcGluZ1xuICAgIGNvbnN0IGtpbiA9IGNoaWxkcmVuKHApO1xuICAgIHJldHVybiBBcnIuZmluZEluZGV4KGtpbiwgKGVsZW0pID0+IENvbXBhcmUuZXEoZWxlbWVudCwgZWxlbSkpO1xuICB9KTtcblxuY29uc3QgcGFyZW50cyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSA9PiB7XG4gIGNvbnN0IHN0b3AgPSBUeXBlLmlzRnVuY3Rpb24oaXNSb290KSA/IGlzUm9vdCA6IEZ1bi5uZXZlcjtcblxuICAvLyBUaGlzIGlzIHVzZWQgYSAqbG90KiBzbyBpdCBuZWVkcyB0byBiZSBwZXJmb3JtYW50LCBub3QgcmVjdXJzaXZlXG4gIGxldCBkb206IE5vZGUgPSBlbGVtZW50LmRvbTtcbiAgY29uc3QgcmV0OiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSA9IFtdO1xuXG4gIHdoaWxlIChkb20ucGFyZW50Tm9kZSAhPT0gbnVsbCAmJiBkb20ucGFyZW50Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmF3UGFyZW50ID0gZG9tLnBhcmVudE5vZGU7XG4gICAgY29uc3QgcCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJhd1BhcmVudCk7XG4gICAgcmV0LnB1c2gocCk7XG5cbiAgICBpZiAoc3RvcChwKSA9PT0gdHJ1ZSkge1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvbSA9IHJhd1BhcmVudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbmNvbnN0IHNpYmxpbmdzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFN1Z2FyRWxlbWVudDxOb2RlPltdID0+IHtcbiAgLy8gVE9ETzogUmVmYWN0b3Igb3V0IGNoaWxkcmVuIHNvIHdlIGNhbiBqdXN0IG5vdCBhZGQgc2VsZiBpbnN0ZWFkIG9mIGZpbHRlcmluZyBhZnRlcndhcmRzXG4gIGNvbnN0IGZpbHRlclNlbGYgPSA8RT4gKGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8RT5bXSkgPT4gQXJyLmZpbHRlcihlbGVtZW50cywgKHgpID0+ICFDb21wYXJlLmVxKGVsZW1lbnQsIHgpKTtcblxuICByZXR1cm4gcGFyZW50KGVsZW1lbnQpLm1hcChjaGlsZHJlbikubWFwKGZpbHRlclNlbGYpLmdldE9yKFtdKTtcbn07XG5cbmNvbnN0IG9mZnNldFBhcmVudCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5vZmZzZXRQYXJlbnQgYXMgSFRNTEVsZW1lbnQpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IHByZXZTaWJsaW5nID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5wcmV2aW91c1NpYmxpbmcpLm1hcChTdWdhckVsZW1lbnQuZnJvbURvbSk7XG5cbmNvbnN0IG5leHRTaWJsaW5nID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4gPT5cbiAgT3B0aW9uYWwuZnJvbShlbGVtZW50LmRvbS5uZXh0U2libGluZykubWFwKFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuLy8gVGhpcyBvbmUgbmVlZHMgdG8gYmUgcmV2ZXJzZWQsIHNvIHRoZXkncmUgc3RpbGwgaW4gRE9NIG9yZGVyXG5jb25zdCBwcmV2U2libGluZ3MgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogU3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+W10gPT5cbiAgQXJyLnJldmVyc2UoUmVjdXJzZS50b0FycmF5KGVsZW1lbnQsIHByZXZTaWJsaW5nKSk7XG5cbmNvbnN0IG5leHRTaWJsaW5ncyA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT5bXSA9PlxuICBSZWN1cnNlLnRvQXJyYXkoZWxlbWVudCwgbmV4dFNpYmxpbmcpO1xuXG5jb25zdCBjaGlsZHJlbiA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT5bXSA9PlxuICBBcnIubWFwKGVsZW1lbnQuZG9tLmNoaWxkTm9kZXMsIFN1Z2FyRWxlbWVudC5mcm9tRG9tKTtcblxuY29uc3QgY2hpbGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBpbmRleDogbnVtYmVyKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PiB7XG4gIGNvbnN0IGNzID0gZWxlbWVudC5kb20uY2hpbGROb2RlcztcbiAgcmV0dXJuIE9wdGlvbmFsLmZyb20oY3NbaW5kZXhdKS5tYXAoU3VnYXJFbGVtZW50LmZyb21Eb20pO1xufTtcblxuY29uc3QgZmlyc3RDaGlsZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+XG4gIGNoaWxkKGVsZW1lbnQsIDApO1xuXG5jb25zdCBsYXN0Q2hpbGQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PlxuICBjaGlsZChlbGVtZW50LCBlbGVtZW50LmRvbS5jaGlsZE5vZGVzLmxlbmd0aCAtIDEpO1xuXG5jb25zdCBjaGlsZE5vZGVzQ291bnQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogbnVtYmVyID0+XG4gIGVsZW1lbnQuZG9tLmNoaWxkTm9kZXMubGVuZ3RoO1xuXG5jb25zdCBoYXNDaGlsZE5vZGVzID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT5cbiAgZWxlbWVudC5kb20uaGFzQ2hpbGROb2RlcygpO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRBbmRPZmZzZXQ8RT4ge1xuICByZWFkb25seSBlbGVtZW50OiBTdWdhckVsZW1lbnQ8RT47XG4gIHJlYWRvbmx5IG9mZnNldDogbnVtYmVyO1xufVxuXG5jb25zdCBzcG90ID0gPEU+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFPiwgb2Zmc2V0OiBudW1iZXIpOiBFbGVtZW50QW5kT2Zmc2V0PEU+ID0+ICh7XG4gIGVsZW1lbnQsXG4gIG9mZnNldFxufSk7XG5cbmNvbnN0IGxlYWYgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlcik6IEVsZW1lbnRBbmRPZmZzZXQ8Tm9kZT4gPT4ge1xuICBjb25zdCBjcyA9IGNoaWxkcmVuKGVsZW1lbnQpO1xuICByZXR1cm4gY3MubGVuZ3RoID4gMCAmJiBvZmZzZXQgPCBjcy5sZW5ndGggPyBzcG90KGNzW29mZnNldF0sIDApIDogc3BvdChlbGVtZW50LCBvZmZzZXQpO1xufTtcblxuZXhwb3J0IHtcbiAgb3duZXIsXG4gIGRvY3VtZW50T3JPd25lcixcbiAgZGVmYXVsdFZpZXcsXG4gIGRvY3VtZW50RWxlbWVudCxcbiAgcGFyZW50LFxuICBwYXJlbnROb2RlLFxuICBwYXJlbnRFbGVtZW50LFxuICBmaW5kSW5kZXgsXG4gIHBhcmVudHMsXG4gIHNpYmxpbmdzLFxuICBwcmV2U2libGluZyxcbiAgb2Zmc2V0UGFyZW50LFxuICBwcmV2U2libGluZ3MsXG4gIG5leHRTaWJsaW5nLFxuICBuZXh0U2libGluZ3MsXG4gIGNoaWxkcmVuLFxuICBjaGlsZCxcbiAgZmlyc3RDaGlsZCxcbiAgbGFzdENoaWxkLFxuICBjaGlsZE5vZGVzQ291bnQsXG4gIGhhc0NoaWxkTm9kZXMsXG4gIGxlYWZcbn07XG4iLCJpbXBvcnQgeyBBcnIsIFVuaWNvZGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyTm9kZSBmcm9tICcuLi9ub2RlL1N1Z2FyTm9kZSc7XG5pbXBvcnQgKiBhcyBTdWdhclRleHQgZnJvbSAnLi4vbm9kZS9TdWdhclRleHQnO1xuaW1wb3J0ICogYXMgQXR0cmlidXRlIGZyb20gJy4uL3Byb3BlcnRpZXMvQXR0cmlidXRlJztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmNvbnN0IGdldEVuZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBudW1iZXIgPT5cbiAgU3VnYXJOb2RlLm5hbWUoZWxlbWVudCkgPT09ICdpbWcnID8gMSA6IFN1Z2FyVGV4dC5nZXRPcHRpb24oZWxlbWVudCkuZm9sZChcbiAgICAoKSA9PiBUcmF2ZXJzZS5jaGlsZHJlbihlbGVtZW50KS5sZW5ndGgsXG4gICAgKHYpID0+IHYubGVuZ3RoXG4gICk7XG5cbmNvbnN0IGlzRW5kID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpOiBib29sZWFuID0+IGdldEVuZChlbGVtZW50KSA9PT0gb2Zmc2V0O1xuXG5jb25zdCBpc1N0YXJ0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpOiBib29sZWFuID0+IG9mZnNldCA9PT0gMDtcblxuY29uc3QgaXNUZXh0Tm9kZVdpdGhDdXJzb3JQb3NpdGlvbiA9IChlbDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBTdWdhclRleHQuZ2V0T3B0aW9uKGVsKS5maWx0ZXIoKHRleHQpID0+XG4gIC8vIEZvciB0aGUgcHVycG9zZXMgb2YgZmluZGluZyBjdXJzb3IgcG9zaXRpb25zIG9ubHkgYWxsb3cgdGV4dCBub2RlcyB3aXRoIGNvbnRlbnQsXG4gIC8vIGJ1dCB0cmltIHJlbW92ZXMgJm5ic3A7IGFuZCB0aGF0J3MgYWxsb3dlZFxuICB0ZXh0LnRyaW0oKS5sZW5ndGggIT09IDAgfHwgdGV4dC5pbmRleE9mKFVuaWNvZGUubmJzcCkgPiAtMVxuKS5pc1NvbWUoKTtcblxuY29uc3QgaXNDb250ZW50RWRpdGFibGVGYWxzZSA9IChlbGVtOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFN1Z2FyTm9kZS5pc0hUTUxFbGVtZW50KGVsZW0pICYmIChBdHRyaWJ1dGUuZ2V0KGVsZW0sICdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ2ZhbHNlJyk7XG5cbmNvbnN0IGVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uID0gWyAnaW1nJywgJ2JyJyBdO1xuY29uc3QgaXNDdXJzb3JQb3NpdGlvbiA9IChlbGVtOiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgaGFzQ3Vyc29yUG9zaXRpb24gPSBpc1RleHROb2RlV2l0aEN1cnNvclBvc2l0aW9uKGVsZW0pO1xuICByZXR1cm4gaGFzQ3Vyc29yUG9zaXRpb24gfHwgQXJyLmNvbnRhaW5zKGVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uLCBTdWdhck5vZGUubmFtZShlbGVtKSkgfHwgaXNDb250ZW50RWRpdGFibGVGYWxzZShlbGVtKTtcbn07XG5cbmV4cG9ydCB7XG4gIGdldEVuZCxcbiAgaXNFbmQsXG4gIGlzU3RhcnQsXG4gIGlzQ3Vyc29yUG9zaXRpb25cbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgUHJlZGljYXRlRmluZCBmcm9tICcuLi9zZWFyY2gvUHJlZGljYXRlRmluZCc7XG5pbXBvcnQgKiBhcyBUcmF2ZXJzZSBmcm9tICcuLi9zZWFyY2gvVHJhdmVyc2UnO1xuXG5pbXBvcnQgKiBhcyBBd2FyZW5lc3MgZnJvbSAnLi9Bd2FyZW5lc3MnO1xuXG5jb25zdCBmaXJzdCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+XG4gIFByZWRpY2F0ZUZpbmQuZGVzY2VuZGFudChlbGVtZW50LCBBd2FyZW5lc3MuaXNDdXJzb3JQb3NpdGlvbik7XG5cbmNvbnN0IGxhc3QgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PE5vZGUgJiBDaGlsZE5vZGU+PiA9PlxuICBkZXNjZW5kYW50UnRsKGVsZW1lbnQsIEF3YXJlbmVzcy5pc0N1cnNvclBvc2l0aW9uKTtcblxuLy8gTm90ZSwgc3VnYXIgcHJvYmFibHkgbmVlZHMgc29tZSBSVEwgdHJhdmVyc2Fscy5cbmNvbnN0IGRlc2NlbmRhbnRSdGw6IHtcbiAgPFQgZXh0ZW5kcyBOb2RlID0gTm9kZT4oc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgcHJlZGljYXRlOiAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBlIGlzIFN1Z2FyRWxlbWVudDxUPik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxUICYgQ2hpbGROb2RlPj47XG4gIChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+O1xufSA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IChlOiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IGJvb2xlYW4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgY29uc3QgZGVzY2VuZCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Tm9kZSAmIENoaWxkTm9kZT4+ID0+IHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IFRyYXZlcnNlLmNoaWxkcmVuKGVsZW1lbnQpO1xuICAgIGZvciAobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUoY2hpbGQpKSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5zb21lKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGRlc2NlbmQoY2hpbGQpO1xuICAgICAgaWYgKHJlcy5pc1NvbWUoKSkge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFN1Z2FyRWxlbWVudDxOb2RlICYgQ2hpbGROb2RlPj4oKTtcbiAgfTtcblxuICByZXR1cm4gZGVzY2VuZChzY29wZSk7XG59O1xuXG5leHBvcnQge1xuICBmaXJzdCxcbiAgbGFzdFxufTtcbiIsImltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpbVJhbmdlIHtcbiAgcmVhZG9ubHkgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPjtcbiAgcmVhZG9ubHkgc29mZnNldDogbnVtYmVyO1xuICByZWFkb25seSBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPjtcbiAgcmVhZG9ubHkgZm9mZnNldDogbnVtYmVyO1xufVxuXG5jb25zdCBjcmVhdGUgPSAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogU2ltUmFuZ2UgPT4gKHtcbiAgc3RhcnQsXG4gIHNvZmZzZXQsXG4gIGZpbmlzaCxcbiAgZm9mZnNldFxufSk7XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG5leHBvcnQgY29uc3QgU2ltUmFuZ2UgPSB7XG4gIGNyZWF0ZVxufTtcbiIsImltcG9ydCB7IEFkdCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFRyYXZlcnNlIGZyb20gJy4uL3NlYXJjaC9UcmF2ZXJzZSc7XG5cbmltcG9ydCB7IFNpbVJhbmdlIH0gZnJvbSAnLi9TaW1SYW5nZSc7XG5pbXBvcnQgeyBTaXR1IH0gZnJvbSAnLi9TaXR1JztcblxuZXhwb3J0IGludGVyZmFjZSBTaW1TZWxlY3Rpb24ge1xuICBmb2xkOiA8VT4gKFxuICAgIGRvbVJhbmdlOiAocm5nOiBSYW5nZSkgPT4gVSxcbiAgICByZWxhdGl2ZTogKHN0YXJ0U2l0dTogU2l0dSwgZmluaXNoU2l0dTogU2l0dSkgPT4gVSxcbiAgICBleGFjdDogKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcikgPT4gVVxuICApID0+IFU7XG4gIG1hdGNoOiA8VT4gKGJyYW5jaGVzOiB7XG4gICAgZG9tUmFuZ2U6IChybmc6IFJhbmdlKSA9PiBVO1xuICAgIHJlbGF0aXZlOiAoc3RhcnRTaXR1OiBTaXR1LCBmaW5pc2hTaXR1OiBTaXR1KSA9PiBVO1xuICAgIGV4YWN0OiAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKSA9PiBVO1xuICB9KSA9PiBVO1xuICBsb2c6IChsYWJlbDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG4vLyBDb25zaWRlciBhZGRpbmcgYSB0eXBlIGZvciBcImVsZW1lbnRcIlxuY29uc3QgYWR0OiB7XG4gIGRvbVJhbmdlOiAocm5nOiBSYW5nZSkgPT4gU2ltU2VsZWN0aW9uO1xuICByZWxhdGl2ZTogKHN0YXJ0U2l0dTogU2l0dSwgZmluaXNoU2l0dTogU2l0dSkgPT4gU2ltU2VsZWN0aW9uO1xuICBleGFjdDogKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcikgPT4gU2ltU2VsZWN0aW9uO1xufSA9IEFkdC5nZW5lcmF0ZShbXG4gIHsgZG9tUmFuZ2U6IFsgJ3JuZycgXSB9LFxuICB7IHJlbGF0aXZlOiBbICdzdGFydFNpdHUnLCAnZmluaXNoU2l0dScgXSB9LFxuICB7IGV4YWN0OiBbICdzdGFydCcsICdzb2Zmc2V0JywgJ2ZpbmlzaCcsICdmb2Zmc2V0JyBdIH1cbl0pO1xuXG5jb25zdCBleGFjdEZyb21SYW5nZSA9IChzaW1SYW5nZTogU2ltUmFuZ2UpOiBTaW1TZWxlY3Rpb24gPT5cbiAgYWR0LmV4YWN0KHNpbVJhbmdlLnN0YXJ0LCBzaW1SYW5nZS5zb2Zmc2V0LCBzaW1SYW5nZS5maW5pc2gsIHNpbVJhbmdlLmZvZmZzZXQpO1xuXG5jb25zdCBnZXRTdGFydCA9IChzZWxlY3Rpb246IFNpbVNlbGVjdGlvbik6IFN1Z2FyRWxlbWVudDxOb2RlPiA9PlxuICBzZWxlY3Rpb24ubWF0Y2goe1xuICAgIGRvbVJhbmdlOiAocm5nKSA9PiBTdWdhckVsZW1lbnQuZnJvbURvbShybmcuc3RhcnRDb250YWluZXIpLFxuICAgIHJlbGF0aXZlOiAoc3RhcnRTaXR1LCBfZmluaXNoU2l0dSkgPT4gU2l0dS5nZXRTdGFydChzdGFydFNpdHUpLFxuICAgIGV4YWN0OiAoc3RhcnQsIF9zb2Zmc2V0LCBfZmluaXNoLCBfZm9mZnNldCkgPT4gc3RhcnRcbiAgfSk7XG5cbmNvbnN0IGRvbVJhbmdlID0gYWR0LmRvbVJhbmdlO1xuY29uc3QgcmVsYXRpdmUgPSBhZHQucmVsYXRpdmU7XG5jb25zdCBleGFjdCA9IGFkdC5leGFjdDtcblxuY29uc3QgZ2V0V2luID0gKHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogU3VnYXJFbGVtZW50PFdpbmRvdz4gPT4ge1xuICBjb25zdCBzdGFydCA9IGdldFN0YXJ0KHNlbGVjdGlvbik7XG4gIHJldHVybiBUcmF2ZXJzZS5kZWZhdWx0VmlldyhzdGFydCk7XG59O1xuXG4vLyBUaGlzIGlzIG91dCBvZiBwbGFjZSBidXQgaXQncyBBUEkgc28gSSBjYW4ndCByZW1vdmUgaXRcbmNvbnN0IHJhbmdlID0gU2ltUmFuZ2UuY3JlYXRlO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuZXhwb3J0IGNvbnN0IFNpbVNlbGVjdGlvbiA9IHtcbiAgZG9tUmFuZ2UsXG4gIHJlbGF0aXZlLFxuICBleGFjdCxcbiAgZXhhY3RGcm9tUmFuZ2UsXG4gIGdldFdpbixcbiAgcmFuZ2Vcbn07XG4iLCJpbXBvcnQgeyBBZHQsIEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNpdHUge1xuICBmb2xkOiA8VT4gKFxuICAgIGJlZm9yZTogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gVSxcbiAgICBvbjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpID0+IFUsXG4gICAgYWZ0ZXI6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFVcbiAgKSA9PiBVO1xuICBtYXRjaDogPFU+IChicmFuY2hlczoge1xuICAgIGJlZm9yZTogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gVTtcbiAgICBvbjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpID0+IFU7XG4gICAgYWZ0ZXI6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFU7XG4gIH0pID0+IFU7XG4gIGxvZzogKGxhYmVsOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmNvbnN0IGFkdDoge1xuICBiZWZvcmU6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFNpdHU7XG4gIG9uOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBvZmZzZXQ6IG51bWJlcikgPT4gU2l0dTtcbiAgYWZ0ZXI6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFNpdHU7XG59ID0gQWR0LmdlbmVyYXRlKFtcbiAgeyBiZWZvcmU6IFsgJ2VsZW1lbnQnIF0gfSxcbiAgeyBvbjogWyAnZWxlbWVudCcsICdvZmZzZXQnIF0gfSxcbiAgeyBhZnRlcjogWyAnZWxlbWVudCcgXSB9XG5dKTtcblxuLy8gUHJvYmFibHkgZG9uJ3QgbmVlZCB0aGlzIGdpdmVuIHRoYXQgd2Ugbm93IGhhdmUgXCJtYXRjaFwiXG5jb25zdCBjYXRhID0gPFU+IChzdWJqZWN0OiBTaXR1LCBvbkJlZm9yZTogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gVSwgb25PbjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpID0+IFUsIG9uQWZ0ZXI6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IFUpOiBVID0+XG4gIHN1YmplY3QuZm9sZChvbkJlZm9yZSwgb25Pbiwgb25BZnRlcik7XG5cbmNvbnN0IGdldFN0YXJ0ID0gKHNpdHU6IFNpdHUpOiBTdWdhckVsZW1lbnQ8Tm9kZT4gPT5cbiAgc2l0dS5mb2xkKEZ1bi5pZGVudGl0eSwgRnVuLmlkZW50aXR5LCBGdW4uaWRlbnRpdHkpO1xuXG5jb25zdCBiZWZvcmUgPSBhZHQuYmVmb3JlO1xuY29uc3Qgb24gPSBhZHQub247XG5jb25zdCBhZnRlciA9IGFkdC5hZnRlcjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBjb25zdCBTaXR1ID0ge1xuICBiZWZvcmUsXG4gIG9uLFxuICBhZnRlcixcbiAgY2F0YSxcbiAgZ2V0U3RhcnRcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCAqIGFzIE5hdGl2ZVJhbmdlIGZyb20gJy4uLy4uL3NlbGVjdGlvbi9jb3JlL05hdGl2ZVJhbmdlJztcbmltcG9ydCAqIGFzIFNlbGVjdGlvbkRpcmVjdGlvbiBmcm9tICcuLi8uLi9zZWxlY3Rpb24vY29yZS9TZWxlY3Rpb25EaXJlY3Rpb24nO1xuaW1wb3J0ICogYXMgQ2FyZXRSYW5nZSBmcm9tICcuLi8uLi9zZWxlY3Rpb24vcXVlcnkvQ2FyZXRSYW5nZSc7XG5pbXBvcnQgKiBhcyBXaXRoaW4gZnJvbSAnLi4vLi4vc2VsZWN0aW9uL3F1ZXJ5L1dpdGhpbic7XG5pbXBvcnQgKiBhcyBQcmVmaWx0ZXIgZnJvbSAnLi4vLi4vc2VsZWN0aW9uL3F1aXJrcy9QcmVmaWx0ZXInO1xuaW1wb3J0ICogYXMgQ29tcGFyZSBmcm9tICcuLi9kb20vQ29tcGFyZSc7XG5pbXBvcnQgKiBhcyBEb2N1bWVudFBvc2l0aW9uIGZyb20gJy4uL2RvbS9Eb2N1bWVudFBvc2l0aW9uJztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIFN1Z2FyRnJhZ21lbnQgZnJvbSAnLi4vbm9kZS9TdWdhckZyYWdtZW50JztcblxuaW1wb3J0IHR5cGUgeyBSYXdSZWN0IH0gZnJvbSAnLi9SZWN0JztcbmltcG9ydCB7IFNpbVJhbmdlIH0gZnJvbSAnLi9TaW1SYW5nZSc7XG5pbXBvcnQgeyBTaW1TZWxlY3Rpb24gfSBmcm9tICcuL1NpbVNlbGVjdGlvbic7XG5pbXBvcnQgdHlwZSB7IFNpdHUgfSBmcm9tICcuL1NpdHUnO1xuXG5jb25zdCBnZXROYXRpdmVTZWxlY3Rpb24gPSAod2luOiBXaW5kb3cpID0+IE9wdGlvbmFsLmZyb20od2luLmdldFNlbGVjdGlvbigpKTtcblxuY29uc3QgZG9TZXROYXRpdmVSYW5nZSA9ICh3aW46IFdpbmRvdywgcm5nOiBSYW5nZSk6IHZvaWQgPT4ge1xuICBnZXROYXRpdmVTZWxlY3Rpb24od2luKS5lYWNoKChzZWxlY3Rpb24pID0+IHtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJuZyk7XG4gIH0pO1xufTtcblxuY29uc3QgZG9TZXRSYW5nZSA9ICh3aW46IFdpbmRvdywgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogdm9pZCA9PiB7XG4gIGNvbnN0IHJuZyA9IE5hdGl2ZVJhbmdlLmV4YWN0VG9OYXRpdmUod2luLCBzdGFydCwgc29mZnNldCwgZmluaXNoLCBmb2Zmc2V0KTtcbiAgZG9TZXROYXRpdmVSYW5nZSh3aW4sIHJuZyk7XG59O1xuXG5jb25zdCBmaW5kV2l0aGluID0gPFQgZXh0ZW5kcyBFbGVtZW50Pih3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24sIHNlbGVjdG9yOiBzdHJpbmcpOiBTdWdhckVsZW1lbnQ8VD5bXSA9PlxuICBXaXRoaW4uZmluZDxUPih3aW4sIHNlbGVjdGlvbiwgc2VsZWN0b3IpO1xuXG5jb25zdCBzZXRMZWdhY3lSdGxSYW5nZSA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTZWxlY3Rpb24sIHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICBzZWxlY3Rpb24uY29sbGFwc2Uoc3RhcnQuZG9tLCBzb2Zmc2V0KTtcbiAgc2VsZWN0aW9uLmV4dGVuZChmaW5pc2guZG9tLCBmb2Zmc2V0KTtcbn07XG5cbmNvbnN0IHNldFJhbmdlRnJvbVJlbGF0aXZlID0gKHdpbjogV2luZG93LCByZWxhdGl2ZTogU2ltU2VsZWN0aW9uKTogdm9pZCA9PlxuICBTZWxlY3Rpb25EaXJlY3Rpb24uZGlhZ25vc2Uod2luLCByZWxhdGl2ZSkubWF0Y2goe1xuICAgIGx0cjogKHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpID0+IHtcbiAgICAgIGRvU2V0UmFuZ2Uod2luLCBzdGFydCwgc29mZnNldCwgZmluaXNoLCBmb2Zmc2V0KTtcbiAgICB9LFxuICAgIHJ0bDogKHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpID0+IHtcbiAgICAgIGdldE5hdGl2ZVNlbGVjdGlvbih3aW4pLmVhY2goKHNlbGVjdGlvbikgPT4ge1xuICAgICAgICAvLyBJZiB0aGlzIHNlbGVjdGlvbiBpcyBiYWNrd2FyZHMsIHRoZW4gd2UgbmVlZCB0byB1c2UgZXh0ZW5kLlxuICAgICAgICBpZiAoc2VsZWN0aW9uLnNldEJhc2VBbmRFeHRlbnQpIHtcbiAgICAgICAgICBzZWxlY3Rpb24uc2V0QmFzZUFuZEV4dGVudChzdGFydC5kb20sIHNvZmZzZXQsIGZpbmlzaC5kb20sIGZvZmZzZXQpO1xuICAgICAgICB9IGVsc2UgaWYgKChzZWxlY3Rpb24gYXMgYW55KS5leHRlbmQpIHtcbiAgICAgICAgICAvLyBUaGlzIHRyeSBjYXRjaCBpcyBmb3Igb2xkZXIgYnJvd3NlcnMgKEZpcmVmb3ggNTIpIGFzIHRoZXkncmUgc29tZXRpbWVzIHVuYWJsZSB0byBoYW5kbGUgc2V0dGluZyBiYWNrd2FyZHMgc2VsZWN0aW9ucyB1c2luZyBzZWxlY3Rpb24uZXh0ZW5kIGFuZCBlcnJvciBvdXQuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldExlZ2FjeVJ0bFJhbmdlKHdpbiwgc2VsZWN0aW9uLCBzdGFydCwgc29mZnNldCwgZmluaXNoLCBmb2Zmc2V0KTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIElmIGl0IGRvZXMgZmFpbCwgdHJ5IGFnYWluIHdpdGggbHRyLlxuICAgICAgICAgICAgZG9TZXRSYW5nZSh3aW4sIGZpbmlzaCwgZm9mZnNldCwgc3RhcnQsIHNvZmZzZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb1NldFJhbmdlKHdpbiwgZmluaXNoLCBmb2Zmc2V0LCBzdGFydCwgc29mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbmNvbnN0IHNldEV4YWN0ID0gKHdpbjogV2luZG93LCBzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBzb2Zmc2V0OiBudW1iZXIsIGZpbmlzaDogU3VnYXJFbGVtZW50PE5vZGU+LCBmb2Zmc2V0OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgY29uc3QgcmVsYXRpdmUgPSBQcmVmaWx0ZXIucHJlcHJvY2Vzc0V4YWN0KHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpO1xuXG4gIHNldFJhbmdlRnJvbVJlbGF0aXZlKHdpbiwgcmVsYXRpdmUpO1xufTtcblxuY29uc3Qgc2V0UmVsYXRpdmUgPSAod2luOiBXaW5kb3csIHN0YXJ0U2l0dTogU2l0dSwgZmluaXNoU2l0dTogU2l0dSk6IHZvaWQgPT4ge1xuICBjb25zdCByZWxhdGl2ZSA9IFByZWZpbHRlci5wcmVwcm9jZXNzUmVsYXRpdmUoc3RhcnRTaXR1LCBmaW5pc2hTaXR1KTtcblxuICBzZXRSYW5nZUZyb21SZWxhdGl2ZSh3aW4sIHJlbGF0aXZlKTtcbn07XG5cbmNvbnN0IHRvTmF0aXZlID0gKHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogUmFuZ2UgPT4ge1xuICBjb25zdCB3aW46IFdpbmRvdyA9IFNpbVNlbGVjdGlvbi5nZXRXaW4oc2VsZWN0aW9uKS5kb207XG4gIGNvbnN0IGdldERvbVJhbmdlID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcikgPT4gTmF0aXZlUmFuZ2UuZXhhY3RUb05hdGl2ZSh3aW4sIHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpO1xuICBjb25zdCBmaWx0ZXJlZCA9IFByZWZpbHRlci5wcmVwcm9jZXNzKHNlbGVjdGlvbik7XG4gIHJldHVybiBTZWxlY3Rpb25EaXJlY3Rpb24uZGlhZ25vc2Uod2luLCBmaWx0ZXJlZCkubWF0Y2goe1xuICAgIGx0cjogZ2V0RG9tUmFuZ2UsXG4gICAgcnRsOiBnZXREb21SYW5nZVxuICB9KTtcbn07XG5cbi8vIE5PVEU6IFdlIGFyZSBzdGlsbCByZWFkaW5nIHRoZSByYW5nZSBiZWNhdXNlIGl0IGdpdmVzIHN1YnRseSBkaWZmZXJlbnQgYmVoYXZpb3VyXG4vLyB0aGFuIHVzaW5nIHRoZSBhbmNob3JOb2RlIGFuZCBmb2N1c05vZGUuIEknbSBub3Qgc3VyZSBpZiB0aGlzIGJlaGF2aW91ciBpcyBhbnlcbi8vIGJldHRlciBvciB3b3JzZTsgaXQncyBqdXN0IGRpZmZlcmVudC5cbmNvbnN0IHJlYWRSYW5nZSA9IChzZWxlY3Rpb246IFNlbGVjdGlvbik6IE9wdGlvbmFsPFNpbVJhbmdlPiA9PiB7XG4gIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApIHtcbiAgICBjb25zdCBmaXJzdFJuZyA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuICAgIGNvbnN0IGxhc3RSbmcgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdChzZWxlY3Rpb24ucmFuZ2VDb3VudCAtIDEpO1xuXG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoU2ltUmFuZ2UuY3JlYXRlKFxuICAgICAgU3VnYXJFbGVtZW50LmZyb21Eb20oZmlyc3RSbmcuc3RhcnRDb250YWluZXIpLFxuICAgICAgZmlyc3RSbmcuc3RhcnRPZmZzZXQsXG4gICAgICBTdWdhckVsZW1lbnQuZnJvbURvbShsYXN0Um5nLmVuZENvbnRhaW5lciksXG4gICAgICBsYXN0Um5nLmVuZE9mZnNldFxuICAgICkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lPFNpbVJhbmdlPigpO1xuICB9XG59O1xuXG5jb25zdCBkb0dldEV4YWN0ID0gKHNlbGVjdGlvbjogU2VsZWN0aW9uKTogT3B0aW9uYWw8U2ltUmFuZ2U+ID0+IHtcbiAgaWYgKHNlbGVjdGlvbi5hbmNob3JOb2RlID09PSBudWxsIHx8IHNlbGVjdGlvbi5mb2N1c05vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gcmVhZFJhbmdlKHNlbGVjdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYW5jaG9yID0gU3VnYXJFbGVtZW50LmZyb21Eb20oc2VsZWN0aW9uLmFuY2hvck5vZGUpO1xuICAgIGNvbnN0IGZvY3VzID0gU3VnYXJFbGVtZW50LmZyb21Eb20oc2VsZWN0aW9uLmZvY3VzTm9kZSk7XG5cbiAgICAvLyBpZiB0aGlzIHJldHVybnMgdHJ1ZSBhbmNob3IgaXMgX2FmdGVyXyBmb2N1cywgc28gd2UgbmVlZCBhIGN1c3RvbSBzZWxlY3Rpb24gb2JqZWN0IHRvIG1haW50YWluIHRoZSBSVEwgc2VsZWN0aW9uXG4gICAgcmV0dXJuIERvY3VtZW50UG9zaXRpb24uYWZ0ZXIoYW5jaG9yLCBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LCBmb2N1cywgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KSA/IE9wdGlvbmFsLnNvbWUoXG4gICAgICBTaW1SYW5nZS5jcmVhdGUoXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgc2VsZWN0aW9uLmFuY2hvck9mZnNldCxcbiAgICAgICAgZm9jdXMsXG4gICAgICAgIHNlbGVjdGlvbi5mb2N1c09mZnNldFxuICAgICAgKVxuICAgICkgOiByZWFkUmFuZ2Uoc2VsZWN0aW9uKTtcbiAgfVxufTtcblxuY29uc3Qgc2V0VG9FbGVtZW50ID0gKHdpbjogV2luZG93LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNlbGVjdE5vZGVDb250ZW50czogYm9vbGVhbiA9IHRydWUpOiB2b2lkID0+IHtcbiAgY29uc3Qgcm5nR2V0dGVyID0gc2VsZWN0Tm9kZUNvbnRlbnRzID8gTmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzIDogTmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZTtcbiAgY29uc3Qgcm5nID0gcm5nR2V0dGVyKHdpbiwgZWxlbWVudCk7XG4gIGRvU2V0TmF0aXZlUmFuZ2Uod2luLCBybmcpO1xufTtcblxuY29uc3QgZm9yRWxlbWVudCA9ICh3aW46IFdpbmRvdywgZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogU2ltUmFuZ2UgPT4ge1xuICBjb25zdCBybmcgPSBOYXRpdmVSYW5nZS5zZWxlY3ROb2RlQ29udGVudHMod2luLCBlbGVtZW50KTtcbiAgcmV0dXJuIFNpbVJhbmdlLmNyZWF0ZShcbiAgICBTdWdhckVsZW1lbnQuZnJvbURvbShybmcuc3RhcnRDb250YWluZXIpLCBybmcuc3RhcnRPZmZzZXQsXG4gICAgU3VnYXJFbGVtZW50LmZyb21Eb20ocm5nLmVuZENvbnRhaW5lciksIHJuZy5lbmRPZmZzZXRcbiAgKTtcbn07XG5cbmNvbnN0IGdldEV4YWN0ID0gKHdpbjogV2luZG93KTogT3B0aW9uYWw8U2ltUmFuZ2U+ID0+XG4gIC8vIFdlIHdhbnQgdG8gcmV0cmlldmUgdGhlIHNlbGVjdGlvbiBhcyBpdCBpcy5cbiAgZ2V0TmF0aXZlU2VsZWN0aW9uKHdpbilcbiAgICAuZmlsdGVyKChzZWwpID0+IHNlbC5yYW5nZUNvdW50ID4gMClcbiAgICAuYmluZChkb0dldEV4YWN0KTtcblxuLy8gVE9ETzogVGVzdCB0aGlzLlxuY29uc3QgZ2V0ID0gKHdpbjogV2luZG93KTogT3B0aW9uYWw8U2ltU2VsZWN0aW9uPiA9PlxuICBnZXRFeGFjdCh3aW4pLm1hcCgocmFuZ2UpID0+IFNpbVNlbGVjdGlvbi5leGFjdChyYW5nZS5zdGFydCwgcmFuZ2Uuc29mZnNldCwgcmFuZ2UuZmluaXNoLCByYW5nZS5mb2Zmc2V0KSk7XG5cbmNvbnN0IGdldEZpcnN0UmVjdCA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24pOiBPcHRpb25hbDxSYXdSZWN0PiA9PiB7XG4gIGNvbnN0IHJuZyA9IFNlbGVjdGlvbkRpcmVjdGlvbi5hc0x0clJhbmdlKHdpbiwgc2VsZWN0aW9uKTtcbiAgcmV0dXJuIE5hdGl2ZVJhbmdlLmdldEZpcnN0UmVjdChybmcpO1xufTtcblxuY29uc3QgZ2V0Qm91bmRzID0gKHdpbjogV2luZG93LCBzZWxlY3Rpb246IFNpbVNlbGVjdGlvbik6IE9wdGlvbmFsPFJhd1JlY3Q+ID0+IHtcbiAgY29uc3Qgcm5nID0gU2VsZWN0aW9uRGlyZWN0aW9uLmFzTHRyUmFuZ2Uod2luLCBzZWxlY3Rpb24pO1xuICByZXR1cm4gTmF0aXZlUmFuZ2UuZ2V0Qm91bmRzKHJuZyk7XG59O1xuXG5jb25zdCBnZXRBdFBvaW50ID0gKHdpbjogV2luZG93LCB4OiBudW1iZXIsIHk6IG51bWJlcik6IE9wdGlvbmFsPFNpbVJhbmdlPiA9PlxuICBDYXJldFJhbmdlLmZyb21Qb2ludCh3aW4sIHgsIHkpO1xuXG5jb25zdCBnZXRBc1N0cmluZyA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBybmcgPSBTZWxlY3Rpb25EaXJlY3Rpb24uYXNMdHJSYW5nZSh3aW4sIHNlbGVjdGlvbik7XG4gIHJldHVybiBOYXRpdmVSYW5nZS50b1N0cmluZyhybmcpO1xufTtcblxuY29uc3QgY2xlYXIgPSAod2luOiBXaW5kb3cpOiB2b2lkID0+IHtcbiAgZ2V0TmF0aXZlU2VsZWN0aW9uKHdpbikuZWFjaCgoc2VsZWN0aW9uKSA9PiBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCkpO1xufTtcblxuY29uc3QgY2xvbmUgPSAod2luOiBXaW5kb3csIHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogU3VnYXJFbGVtZW50PERvY3VtZW50RnJhZ21lbnQ+ID0+IHtcbiAgY29uc3Qgcm5nID0gU2VsZWN0aW9uRGlyZWN0aW9uLmFzTHRyUmFuZ2Uod2luLCBzZWxlY3Rpb24pO1xuICByZXR1cm4gTmF0aXZlUmFuZ2UuY2xvbmVGcmFnbWVudChybmcpO1xufTtcblxuY29uc3QgcmVwbGFjZSA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24sIGVsZW1lbnRzOiBTdWdhckVsZW1lbnQ8Tm9kZT5bXSk6IHZvaWQgPT4ge1xuICBjb25zdCBybmcgPSBTZWxlY3Rpb25EaXJlY3Rpb24uYXNMdHJSYW5nZSh3aW4sIHNlbGVjdGlvbik7XG4gIGNvbnN0IGZyYWdtZW50ID0gU3VnYXJGcmFnbWVudC5mcm9tRWxlbWVudHMoZWxlbWVudHMsIHdpbi5kb2N1bWVudCk7XG4gIE5hdGl2ZVJhbmdlLnJlcGxhY2VXaXRoKHJuZywgZnJhZ21lbnQpO1xufTtcblxuY29uc3QgZGVsZXRlQXQgPSAod2luOiBXaW5kb3csIHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogdm9pZCA9PiB7XG4gIGNvbnN0IHJuZyA9IFNlbGVjdGlvbkRpcmVjdGlvbi5hc0x0clJhbmdlKHdpbiwgc2VsZWN0aW9uKTtcbiAgTmF0aXZlUmFuZ2UuZGVsZXRlQ29udGVudHMocm5nKTtcbn07XG5cbmNvbnN0IGlzQ29sbGFwc2VkID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcik6IGJvb2xlYW4gPT5cbiAgQ29tcGFyZS5lcShzdGFydCwgZmluaXNoKSAmJiBzb2Zmc2V0ID09PSBmb2Zmc2V0O1xuXG5leHBvcnQge1xuICBzZXRFeGFjdCxcbiAgZ2V0RXhhY3QsXG4gIGdldCxcbiAgc2V0UmVsYXRpdmUsXG4gIHRvTmF0aXZlLFxuICBzZXRUb0VsZW1lbnQsXG4gIGNsZWFyLFxuICBjbG9uZSxcbiAgcmVwbGFjZSxcbiAgZGVsZXRlQXQsXG4gIGZvckVsZW1lbnQsXG4gIGdldEZpcnN0UmVjdCxcbiAgZ2V0Qm91bmRzLFxuICBnZXRBdFBvaW50LFxuICBmaW5kV2l0aGluLFxuICBnZXRBc1N0cmluZyxcbiAgaXNDb2xsYXBzZWRcbn07XG4iLCJpbXBvcnQgeyBBcnIsIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuY29uc3QgdW5pdHMgPSB7XG4gIC8vIHdlIGRvbid0IHJlYWxseSBzdXBwb3J0IGFsbCBvZiB0aGVzZSBkaWZmZXJlbnQgd2F5cyB0byBleHByZXNzIGEgbGVuZ3RoXG4gIHVuc3VwcG9ydGVkTGVuZ3RoOiBbXG4gICAgJ2VtJyBhcyAnZW0nLFxuICAgICdleCcgYXMgJ2V4JyxcbiAgICAnY2FwJyBhcyAnY2FwJyxcbiAgICAnY2gnIGFzICdjaCcsXG4gICAgJ2ljJyBhcyAnaWMnLFxuICAgICdyZW0nIGFzICdyZW0nLFxuICAgICdsaCcgYXMgJ2xoJyxcbiAgICAncmxoJyBhcyAncmxoJyxcbiAgICAndncnIGFzICd2dycsXG4gICAgJ3ZoJyBhcyAndmgnLFxuICAgICd2aScgYXMgJ3ZpJyxcbiAgICAndmInIGFzICd2YicsXG4gICAgJ3ZtaW4nIGFzICd2bWluJyxcbiAgICAndm1heCcgYXMgJ3ZtYXgnLFxuICAgICdjbScgYXMgJ2NtJyxcbiAgICAnbW0nIGFzICdtbScsXG4gICAgJ1EnIGFzICdRJyxcbiAgICAnaW4nIGFzICdpbicsXG4gICAgJ3BjJyBhcyAncGMnLFxuICAgICdwdCcgYXMgJ3B0JyxcbiAgICAncHgnIGFzICdweCdcbiAgXSxcbiAgLy8gdGhlc2UgYXJlIHRoZSBsZW5ndGggdmFsdWVzIHdlIGRvIHN1cHBvcnRcbiAgZml4ZWQ6IFsgJ3B4JyBhcyAncHgnLCAncHQnIGFzICdwdCcgXSxcbiAgcmVsYXRpdmU6IFsgJyUnIGFzICclJyBdLFxuICBlbXB0eTogWyAnJyBhcyAnJyBdXG59O1xuXG50eXBlIFVuaXRzID0ge1xuICBbSyBpbiBrZXlvZiB0eXBlb2YgdW5pdHNdOiB0eXBlb2YgdW5pdHNbS11bbnVtYmVyXTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9uPFUgZXh0ZW5kcyBrZXlvZiBVbml0cz4ge1xuICByZWFkb25seSB2YWx1ZTogbnVtYmVyO1xuICByZWFkb25seSB1bml0OiBVbml0c1tVXTtcbn1cblxuLy8gQnVpbHQgZnJvbSBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jcHJvZC1TdHJEZWNpbWFsTGl0ZXJhbFxuLy8gTWF0Y2hlcyBhIGZsb2F0IGZvbGxvd2VkIGJ5IGEgdHJhaWxpbmcgc2V0IG9mIGNoYXJhY3RlcnNcbmNvbnN0IHBhdHRlcm46IFJlZ0V4cCA9ICgoKSA9PiB7XG4gIGNvbnN0IGRlY2ltYWxEaWdpdHMgPSAnWzAtOV0rJztcbiAgY29uc3Qgc2lnbmVkSW50ZWdlciA9ICdbKy1dPycgKyBkZWNpbWFsRGlnaXRzO1xuICBjb25zdCBleHBvbmVudFBhcnQgPSAnW2VFXScgKyBzaWduZWRJbnRlZ2VyO1xuICBjb25zdCBkb3QgPSAnXFxcXC4nO1xuXG4gIGNvbnN0IG9wdCA9IChpbnB1dDogc3RyaW5nKSA9PiBgKD86JHtpbnB1dH0pP2A7XG5cbiAgY29uc3QgdW5zaWduZWREZWNpbWFsTGl0ZXJhbCA9IFtcbiAgICAnSW5maW5pdHknLFxuICAgIGRlY2ltYWxEaWdpdHMgKyBkb3QgKyBvcHQoZGVjaW1hbERpZ2l0cykgKyBvcHQoZXhwb25lbnRQYXJ0KSxcbiAgICBkb3QgKyBkZWNpbWFsRGlnaXRzICsgb3B0KGV4cG9uZW50UGFydCksXG4gICAgZGVjaW1hbERpZ2l0cyArIG9wdChleHBvbmVudFBhcnQpXG4gIF0uam9pbignfCcpO1xuXG4gIGNvbnN0IGZsb2F0ID0gYFsrLV0/KD86JHt1bnNpZ25lZERlY2ltYWxMaXRlcmFsfSlgO1xuXG4gIHJldHVybiBuZXcgUmVnRXhwKGBeKCR7ZmxvYXR9KSguKikkYCk7XG59KSgpO1xuXG5jb25zdCBpc1VuaXQgPSA8VCBleHRlbmRzIGtleW9mIFVuaXRzPih1bml0OiBzdHJpbmcsIGFjY2VwdGVkOiBUW10pOiB1bml0IGlzIFVuaXRzW1RdID0+XG4gIEFyci5leGlzdHMoYWNjZXB0ZWQsIChhY2M6IFQpID0+XG4gICAgQXJyLmV4aXN0cyh1bml0c1thY2NdLCAoY2hlY2spID0+IHVuaXQgPT09IGNoZWNrKVxuICApO1xuXG5leHBvcnQgY29uc3QgcGFyc2UgPSA8VCBleHRlbmRzIGtleW9mIFVuaXRzPihpbnB1dDogc3RyaW5nLCBhY2NlcHRlZDogVFtdKTogT3B0aW9uYWw8RGltZW5zaW9uPFQ+PiA9PiB7XG4gIGNvbnN0IG1hdGNoID0gT3B0aW9uYWwuZnJvbShwYXR0ZXJuLmV4ZWMoaW5wdXQpKTtcbiAgcmV0dXJuIG1hdGNoLmJpbmQoKGFycmF5KSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoYXJyYXlbMV0pO1xuICAgIGNvbnN0IHVuaXRSYXcgPSBhcnJheVsyXTtcblxuICAgIGlmIChpc1VuaXQodW5pdFJhdywgYWNjZXB0ZWQpKSB7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZSh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB1bml0OiB1bml0UmF3XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG5vcm1hbGlzZSA9IDxUIGV4dGVuZHMga2V5b2YgVW5pdHM+KGlucHV0OiBzdHJpbmcsIGFjY2VwdGVkOiBUW10pOiBPcHRpb25hbDxzdHJpbmc+ID0+XG4gIHBhcnNlKGlucHV0LCBhY2NlcHRlZCkubWFwKCh7IHZhbHVlLCB1bml0IH0pID0+IHZhbHVlICsgdW5pdCk7XG4iLCJpbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tICcuLi8uLi9pbXBsL0RpbWVuc2lvbic7XG5pbXBvcnQgKiBhcyBSdW50aW1lU2l6ZSBmcm9tICcuLi8uLi9pbXBsL1J1bnRpbWVTaXplJztcbmltcG9ydCAqIGFzIFN1Z2FyQm9keSBmcm9tICcuLi9ub2RlL1N1Z2FyQm9keSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIENzcyBmcm9tICcuLi9wcm9wZXJ0aWVzL0Nzcyc7XG5cbmNvbnN0IGFwaSA9IERpbWVuc2lvbignaGVpZ2h0JywgKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IHtcbiAgLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGdpdmVzIGJldHRlciByZXN1bHRzIHRoYW4gb2Zmc2V0SGVpZ2h0IGZvciB0YWJsZXMgd2l0aCBjYXB0aW9ucyBvbiBGaXJlZm94XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICByZXR1cm4gU3VnYXJCb2R5LmluQm9keShlbGVtZW50KSA/IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgOiBkb20ub2Zmc2V0SGVpZ2h0O1xufSk7XG5cbmNvbnN0IHNldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBoOiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkID0+IGFwaS5zZXQoZWxlbWVudCwgaCk7XG5cbmNvbnN0IGdldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+IGFwaS5nZXQoZWxlbWVudCk7XG5cbmNvbnN0IGdldE91dGVyID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT4gYXBpLmdldE91dGVyKGVsZW1lbnQpO1xuXG5jb25zdCBnZXRJbm5lciA9IFJ1bnRpbWVTaXplLmdldElubmVySGVpZ2h0O1xuXG5jb25zdCBnZXRSdW50aW1lID0gUnVudGltZVNpemUuZ2V0SGVpZ2h0O1xuXG5jb25zdCBzZXRNYXggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgdmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xuICAvLyBUaGVzZSBwcm9wZXJ0aWVzIGFmZmVjdCB0aGUgYWJzb2x1dGUgbWF4LWhlaWdodCwgdGhleSBhcmUgbm90IGNvdW50ZWQgbmF0aXZlbHksIHdlIHdhbnQgdG8gaW5jbHVkZSB0aGVzZSBwcm9wZXJ0aWVzLlxuICBjb25zdCBpbmNsdXNpb25zID0gWyAnbWFyZ2luLXRvcCcsICdib3JkZXItdG9wLXdpZHRoJywgJ3BhZGRpbmctdG9wJywgJ3BhZGRpbmctYm90dG9tJywgJ2JvcmRlci1ib3R0b20td2lkdGgnLCAnbWFyZ2luLWJvdHRvbScgXTtcbiAgY29uc3QgYWJzTWF4ID0gYXBpLm1heChlbGVtZW50LCB2YWx1ZSwgaW5jbHVzaW9ucyk7XG4gIENzcy5zZXQoZWxlbWVudCwgJ21heC1oZWlnaHQnLCBhYnNNYXggKyAncHgnKTtcbn07XG5cbmV4cG9ydCB7XG4gIHNldCxcbiAgZ2V0LFxuICBnZXRJbm5lcixcbiAgZ2V0T3V0ZXIsXG4gIGdldFJ1bnRpbWUsXG4gIHNldE1heFxufTtcbiIsImltcG9ydCB7IE9wdGlvbmFsLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFBsYXRmb3JtRGV0ZWN0aW9uIH0gZnJvbSAnQGVwaG94L3NhbmQnO1xuXG5pbXBvcnQgKiBhcyBJbnNlcnQgZnJvbSAnLi4vZG9tL0luc2VydCc7XG5pbXBvcnQgKiBhcyBSZW1vdmUgZnJvbSAnLi4vZG9tL1JlbW92ZSc7XG5pbXBvcnQgKiBhcyBTdWdhckJvZHkgZnJvbSAnLi4vbm9kZS9TdWdhckJvZHknO1xuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgKiBhcyBTdWdhckxvY2F0aW9uIGZyb20gJy4vU3VnYXJMb2NhdGlvbic7XG5pbXBvcnQgeyBTdWdhclBvc2l0aW9uIH0gZnJvbSAnLi9TdWdhclBvc2l0aW9uJztcblxuaW50ZXJmYWNlIFNjcm9sbENhcHR1cmUge1xuICByZWFkb25seSBzYXZlOiAoKSA9PiB2b2lkO1xuICByZWFkb25seSByZXN0b3JlOiAoKSA9PiB2b2lkO1xufVxuXG4vLyBnZXQgc2Nyb2xsIHBvc2l0aW9uICh4LHkpIHJlbGF0aXZlIHRvIGRvY3VtZW50IF9kb2MgKG9yIGdsb2JhbCBpZiBub3Qgc3VwcGxpZWQpXG5jb25zdCBnZXQgPSAoX0RPQz86IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pOiBTdWdhclBvc2l0aW9uID0+IHtcbiAgY29uc3QgZG9jID0gX0RPQyAhPT0gdW5kZWZpbmVkID8gX0RPQy5kb20gOiBkb2N1bWVudDtcblxuICAvLyBBU1NVTVBUSU9OOiBUaGlzIGlzIGZvciBjcm9zcy1icm93c2VyIHN1cHBvcnQsIGJvZHkgd29ya3MgZm9yIFNhZmFyaSAmIEVER0UsIGFuZCB3aGVuIHdlIGhhdmUgYW4gaWZyYW1lIGJvZHkgc2Nyb2xsZXJcbiAgY29uc3QgeCA9IGRvYy5ib2R5LnNjcm9sbExlZnQgfHwgZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICBjb25zdCB5ID0gZG9jLmJvZHkuc2Nyb2xsVG9wIHx8IGRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICByZXR1cm4gU3VnYXJQb3NpdGlvbih4LCB5KTtcbn07XG5cbi8vIFNjcm9sbCBjb250ZW50IHRvICh4LHkpIHJlbGF0aXZlIHRvIGRvY3VtZW50IF9kb2MgKG9yIGdsb2JhbCBpZiBub3Qgc3VwcGxpZWQpXG5jb25zdCB0byA9ICh4OiBudW1iZXIsIHk6IG51bWJlciwgX0RPQz86IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pOiB2b2lkID0+IHtcbiAgY29uc3QgZG9jID0gX0RPQyAhPT0gdW5kZWZpbmVkID8gX0RPQy5kb20gOiBkb2N1bWVudDtcbiAgY29uc3Qgd2luID0gZG9jLmRlZmF1bHRWaWV3O1xuICBpZiAod2luKSB7XG4gICAgd2luLnNjcm9sbFRvKHgsIHkpO1xuICB9XG59O1xuXG4vLyBTY3JvbGwgY29udGVudCBieSAoeCx5KSByZWxhdGl2ZSB0byBkb2N1bWVudCBfZG9jIChvciBnbG9iYWwgaWYgbm90IHN1cHBsaWVkKVxuY29uc3QgYnkgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIF9ET0M/OiBTdWdhckVsZW1lbnQ8RG9jdW1lbnQ+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGRvYyA9IF9ET0MgIT09IHVuZGVmaW5lZCA/IF9ET0MuZG9tIDogZG9jdW1lbnQ7XG4gIGNvbnN0IHdpbiA9IGRvYy5kZWZhdWx0VmlldztcbiAgaWYgKHdpbikge1xuICAgIHdpbi5zY3JvbGxCeSh4LCB5KTtcbiAgfVxufTtcblxuLy8gU2V0IHRoZSB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIHRvIHRoZSBlbGVtZW50XG5jb25zdCBzZXRUb0VsZW1lbnQgPSAod2luOiBXaW5kb3csIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBjb25zdCBwb3MgPSBTdWdhckxvY2F0aW9uLmFic29sdXRlKGVsZW1lbnQpO1xuICBjb25zdCBkb2MgPSBTdWdhckVsZW1lbnQuZnJvbURvbSh3aW4uZG9jdW1lbnQpO1xuICB0byhwb3MubGVmdCwgcG9zLnRvcCwgZG9jKTtcbn07XG5cbi8vIGNhbGwgZigpIHByZXNlcnZpbmcgdGhlIG9yaWdpbmFsIHNjcm9sbCBwb3NpdGlvbiByZWxhdGl2ZSB0byBkb2N1bWVudCBkb2NcbmNvbnN0IHByZXNlcnZlID0gKGRvYzogU3VnYXJFbGVtZW50PERvY3VtZW50PiwgZjogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICBjb25zdCBiZWZvcmUgPSBnZXQoZG9jKTtcbiAgZigpO1xuICBjb25zdCBhZnRlciA9IGdldChkb2MpO1xuICBpZiAoYmVmb3JlLnRvcCAhPT0gYWZ0ZXIudG9wIHx8IGJlZm9yZS5sZWZ0ICE9PSBhZnRlci5sZWZ0KSB7XG4gICAgdG8oYmVmb3JlLmxlZnQsIGJlZm9yZS50b3AsIGRvYyk7XG4gIH1cbn07XG5cbi8vIGNhcHR1cmUgdGhlIGN1cnJlbnQgc2Nyb2xsIGxvY2F0aW9uIGFuZCBwcm92aWRlIHNhdmUgYW5kIHJlc3RvcmUgbWV0aG9kc1xuY29uc3QgY2FwdHVyZSA9IChkb2M6IFN1Z2FyRWxlbWVudDxEb2N1bWVudD4pOiBTY3JvbGxDYXB0dXJlID0+IHtcbiAgbGV0IHByZXZpb3VzID0gT3B0aW9uYWwubm9uZTxTdWdhclBvc2l0aW9uPigpO1xuXG4gIGNvbnN0IHNhdmUgPSAoKSA9PiB7XG4gICAgcHJldmlvdXMgPSBPcHRpb25hbC5zb21lKGdldChkb2MpKTtcbiAgfTtcblxuICAvLyBUT0RPOiB0aGlzIGlzIHF1aXRlIHNpbWlsYXIgdG8gdGhlIGNvZGUgaW4gbm9tYWQuXG4gIGNvbnN0IHJlc3RvcmUgPSAoKSA9PiB7XG4gICAgcHJldmlvdXMuZWFjaCgocCkgPT4ge1xuICAgICAgdG8ocC5sZWZ0LCBwLnRvcCwgZG9jKTtcbiAgICB9KTtcbiAgfTtcblxuICBzYXZlKCk7XG4gIHJldHVybiB7XG4gICAgc2F2ZSwgICAgICAvKiBTYXZlcyB0aGUgY3VycmVudCBwYWdlIHNjcm9sbCBwb3NpdGlvbiAqL1xuICAgIHJlc3RvcmUgLyogUmVzdG9yZXMgdGhlIHBhZ2Ugc2Nyb2xsIHRvIGl0cyBmb3JtZXIgcG9zaXRpb24gd2hlbiBpbnZva2VkICovXG4gIH07XG59O1xuXG4vLyBUQklPLTQ0NzIgU2FmYXJpIDEwIC0gU2Nyb2xsaW5nIHR5cGVhaGVhZCB3aXRoIGtleWJvYXJkIHNjcm9sbHMgcGFnZVxuY29uc3QgaW50b1ZpZXcgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBhbGlnblRvVG9wOiBib29sZWFuKTogdm9pZCA9PiB7XG4gIGNvbnN0IGlzU2FmYXJpID0gUGxhdGZvcm1EZXRlY3Rpb24uZGV0ZWN0KCkuYnJvd3Nlci5pc1NhZmFyaSgpO1xuICAvLyB0aGlzIG1ldGhvZCBpc24ndCBpbiBUeXBlU2NyaXB0XG4gIGlmIChpc1NhZmFyaSAmJiBUeXBlLmlzRnVuY3Rpb24oKGVsZW1lbnQuZG9tIGFzIGFueSkuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCkpIHtcbiAgICAoZWxlbWVudC5kb20gYXMgYW55KS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKGZhbHNlKTsgLy8gZmFsc2U9YWxpZ24gdG8gbmVhcmVzdCBlZGdlXG4gIH0gZWxzZSB7XG4gICAgZWxlbWVudC5kb20uc2Nyb2xsSW50b1ZpZXcoYWxpZ25Ub1RvcCk7IC8vIHRydWU9dG8gdG9wLCBmYWxzZT10byBib3R0b21cbiAgfVxufTtcblxuLy8gSWYgdGhlIGVsZW1lbnQgaXMgYWJvdmUgdGhlIGNvbnRhaW5lciwgb3IgYmVsb3cgdGhlIGNvbnRhaW5lciwgdGhlbiBzY3JvbGwgdG8gdGhlIHRvcCBvciBib3R0b21cbmNvbnN0IGludG9WaWV3SWZOZWVkZWQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBjb250YWluZXI6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBjb25zdCBjb250YWluZXJCb3ggPSBjb250YWluZXIuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCBlbGVtZW50Qm94ID0gZWxlbWVudC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGlmIChlbGVtZW50Qm94LnRvcCA8IGNvbnRhaW5lckJveC50b3ApIHtcbiAgICAvLyBlbGVtZW50IHRvcCBpcyBhYm92ZSB0aGUgdmlld3BvcnQgdG9wLCBzY3JvbGwgc28gaXQncyBhdCB0aGUgdG9wXG4gICAgaW50b1ZpZXcoZWxlbWVudCwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAoZWxlbWVudEJveC5ib3R0b20gPiBjb250YWluZXJCb3guYm90dG9tKSB7XG4gICAgLy8gZWxlbWVudCBib3R0b20gaXMgYmVsb3cgdGhlIHZpZXdwb3J0IGJvdHRvbSwgc2Nyb2xsIHNvIGl0J3MgYXQgdGhlIGJvdHRvbVxuICAgIGludG9WaWV3KGVsZW1lbnQsIGZhbHNlKTtcbiAgfVxufTtcblxuLy8gUmV0dXJuIHRoZSBzY3JvbGwgYmFyIHdpZHRoIChjYWxjdWxhdGVkIGJ5IHRlbXBvcmFyaWx5IGluc2VydGluZyBhbiBlbGVtZW50IGludG8gdGhlIGRvbSlcbmNvbnN0IHNjcm9sbEJhcldpZHRoID0gKCk6IG51bWJlciA9PiB7XG4gIC8vIEZyb20gaHR0cHM6Ly9kYXZpZHdhbHNoLm5hbWUvZGV0ZWN0LXNjcm9sbGJhci13aWR0aFxuICBjb25zdCBzY3JvbGxEaXYgPSBTdWdhckVsZW1lbnQuZnJvbUh0bWw8SFRNTERpdkVsZW1lbnQ+KCc8ZGl2IHN0eWxlPVwid2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDEwMHB4OyBvdmVyZmxvdzogc2Nyb2xsOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTk5OTlweDtcIj48L2Rpdj4nKTtcbiAgSW5zZXJ0LmFmdGVyKFN1Z2FyQm9keS5ib2R5KCksIHNjcm9sbERpdik7XG4gIGNvbnN0IHcgPSBzY3JvbGxEaXYuZG9tLm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmRvbS5jbGllbnRXaWR0aDtcbiAgUmVtb3ZlLnJlbW92ZShzY3JvbGxEaXYpO1xuICByZXR1cm4gdztcbn07XG5cbmV4cG9ydCB7IGdldCwgdG8sIGJ5LCBwcmVzZXJ2ZSwgY2FwdHVyZSwgaW50b1ZpZXcsIGludG9WaWV3SWZOZWVkZWQsIHNldFRvRWxlbWVudCwgc2Nyb2xsQmFyV2lkdGggfTtcbiIsImltcG9ydCB7IGluQm9keSB9IGZyb20gJy4uL25vZGUvU3VnYXJCb2R5JztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5pbXBvcnQgeyBTdWdhclBvc2l0aW9uIH0gZnJvbSAnLi9TdWdhclBvc2l0aW9uJztcblxuY29uc3QgYm94UG9zaXRpb24gPSAoZG9tOiBFbGVtZW50KTogU3VnYXJQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IGJveCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFN1Z2FyUG9zaXRpb24oYm94LmxlZnQsIGJveC50b3ApO1xufTtcblxuLy8gQXZvaWRzIGZhbHN5IGZhbHNlIGZhbGx0aHJvdWdoXG5jb25zdCBmaXJzdERlZmluZWRPclplcm8gPSAoYT86IG51bWJlciwgYj86IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmIChhICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYiAhPT0gdW5kZWZpbmVkID8gYiA6IDA7XG4gIH1cbn07XG5cbmNvbnN0IGFic29sdXRlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IFN1Z2FyUG9zaXRpb24gPT4ge1xuICBjb25zdCBkb2MgPSBlbGVtZW50LmRvbS5vd25lckRvY3VtZW50O1xuICBjb25zdCBib2R5ID0gZG9jLmJvZHk7XG4gIGNvbnN0IHdpbiA9IGRvYy5kZWZhdWx0VmlldztcbiAgY29uc3QgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgaWYgKGJvZHkgPT09IGVsZW1lbnQuZG9tKSB7XG4gICAgcmV0dXJuIFN1Z2FyUG9zaXRpb24oYm9keS5vZmZzZXRMZWZ0LCBib2R5Lm9mZnNldFRvcCk7XG4gIH1cblxuICBjb25zdCBzY3JvbGxUb3AgPSBmaXJzdERlZmluZWRPclplcm8od2luPy5wYWdlWU9mZnNldCwgaHRtbC5zY3JvbGxUb3ApO1xuICBjb25zdCBzY3JvbGxMZWZ0ID0gZmlyc3REZWZpbmVkT3JaZXJvKHdpbj8ucGFnZVhPZmZzZXQsIGh0bWwuc2Nyb2xsTGVmdCk7XG5cbiAgY29uc3QgY2xpZW50VG9wID0gZmlyc3REZWZpbmVkT3JaZXJvKGh0bWwuY2xpZW50VG9wLCBib2R5LmNsaWVudFRvcCk7XG4gIGNvbnN0IGNsaWVudExlZnQgPSBmaXJzdERlZmluZWRPclplcm8oaHRtbC5jbGllbnRMZWZ0LCBib2R5LmNsaWVudExlZnQpO1xuXG4gIHJldHVybiB2aWV3cG9ydChlbGVtZW50KS50cmFuc2xhdGUoXG4gICAgc2Nyb2xsTGVmdCAtIGNsaWVudExlZnQsXG4gICAgc2Nyb2xsVG9wIC0gY2xpZW50VG9wKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIG9sZCAkLnBvc2l0aW9uKCksIGJ1dCBKUXVlcnkgZG9lcyBub25zZW5zZSBjYWxjdWxhdGlvbnMuXG4vLyBXZSdyZSBvbmx5IDEgPC0+IDEgd2l0aCB0aGUgb2xkIHZhbHVlIGluIHRoZSBzaW5nbGUgcGxhY2Ugd2UgdXNlIHRoaXMgZnVuY3Rpb25cbi8vIChlZ28uYXBpLkRyYWdnaW5nKSBzbyB0aGUgcmVzdCBjYW4gYml0ZSBtZS5cbmNvbnN0IHJlbGF0aXZlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBTdWdhclBvc2l0aW9uID0+IHtcbiAgY29uc3QgZG9tID0gZWxlbWVudC5kb207XG4gIC8vIGpxdWVyeS1pc206IHdoZW4gc3R5bGU9XCJwb3NpdGlvbjogZml4ZWRcIiwgdGhpcyA9PT0gYm94UG9zaXRpb24oKVxuICAvLyBidXQgdGVzdHMgcmV2ZWFsIGl0IHJldHVybnMgdGhlIHNhbWUgdGhpbmcgYW55d2F5XG4gIHJldHVybiBTdWdhclBvc2l0aW9uKGRvbS5vZmZzZXRMZWZ0LCBkb20ub2Zmc2V0VG9wKTtcbn07XG5cbmNvbnN0IHZpZXdwb3J0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50Pik6IFN1Z2FyUG9zaXRpb24gPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcblxuICBjb25zdCBkb2MgPSBkb20ub3duZXJEb2N1bWVudDtcbiAgY29uc3QgYm9keSA9IGRvYy5ib2R5O1xuXG4gIGlmIChib2R5ID09PSBkb20pIHtcbiAgICByZXR1cm4gU3VnYXJQb3NpdGlvbihib2R5Lm9mZnNldExlZnQsIGJvZHkub2Zmc2V0VG9wKTtcbiAgfVxuXG4gIGlmICghaW5Cb2R5KGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIFN1Z2FyUG9zaXRpb24oMCwgMCk7XG4gIH1cblxuICByZXR1cm4gYm94UG9zaXRpb24oZG9tKTtcbn07XG5cbmV4cG9ydCB7XG4gIGFic29sdXRlLFxuICByZWxhdGl2ZSxcbiAgdmlld3BvcnRcbn07XG4iLCJleHBvcnQgaW50ZXJmYWNlIFN1Z2FyUG9zaXRpb24ge1xuICByZWFkb25seSBsZWZ0OiBudW1iZXI7XG4gIHJlYWRvbmx5IHRvcDogbnVtYmVyO1xuICByZWFkb25seSB0cmFuc2xhdGU6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gU3VnYXJQb3NpdGlvbjtcbn1cblxuY29uc3QgciA9IChsZWZ0OiBudW1iZXIsIHRvcDogbnVtYmVyKTogU3VnYXJQb3NpdGlvbiA9PiB7XG4gIGNvbnN0IHRyYW5zbGF0ZSA9ICh4OiBudW1iZXIsIHk6IG51bWJlcik6IFN1Z2FyUG9zaXRpb24gPT4gcihsZWZ0ICsgeCwgdG9wICsgeSk7XG5cbiAgcmV0dXJuIHtcbiAgICBsZWZ0LFxuICAgIHRvcCxcbiAgICB0cmFuc2xhdGVcbiAgfTtcbn07XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG5leHBvcnQgY29uc3QgU3VnYXJQb3NpdGlvbiA9IHI7XG4iLCJpbXBvcnQgeyBEaW1lbnNpb24gfSBmcm9tICcuLi8uLi9pbXBsL0RpbWVuc2lvbic7XG5pbXBvcnQgKiBhcyBSdW50aW1lU2l6ZSBmcm9tICcuLi8uLi9pbXBsL1J1bnRpbWVTaXplJztcbmltcG9ydCAqIGFzIFN1Z2FyQm9keSBmcm9tICcuLi9ub2RlL1N1Z2FyQm9keSc7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCAqIGFzIENzcyBmcm9tICcuLi9wcm9wZXJ0aWVzL0Nzcyc7XG5cbmNvbnN0IGFwaSA9IERpbWVuc2lvbignd2lkdGgnLCAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgcmV0dXJuIFN1Z2FyQm9keS5pbkJvZHkoZWxlbWVudCkgPyBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggOiBkb20ub2Zmc2V0V2lkdGg7XG59KTtcblxuY29uc3Qgc2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4sIGg6IHN0cmluZyB8IG51bWJlcik6IHZvaWQgPT4gYXBpLnNldChlbGVtZW50LCBoKTtcblxuY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT4gYXBpLmdldChlbGVtZW50KTtcblxuY29uc3QgZ2V0T3V0ZXIgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Pik6IG51bWJlciA9PiBhcGkuZ2V0T3V0ZXIoZWxlbWVudCk7XG5cbmNvbnN0IGdldElubmVyID0gUnVudGltZVNpemUuZ2V0SW5uZXJXaWR0aDtcblxuY29uc3QgZ2V0UnVudGltZSA9IFJ1bnRpbWVTaXplLmdldFdpZHRoO1xuXG5jb25zdCBzZXRNYXggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgdmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xuICAvLyBUaGVzZSBwcm9wZXJ0aWVzIGFmZmVjdCB0aGUgYWJzb2x1dGUgbWF4LWhlaWdodCwgdGhleSBhcmUgbm90IGNvdW50ZWQgbmF0aXZlbHksIHdlIHdhbnQgdG8gaW5jbHVkZSB0aGVzZSBwcm9wZXJ0aWVzLlxuICBjb25zdCBpbmNsdXNpb25zID0gWyAnbWFyZ2luLWxlZnQnLCAnYm9yZGVyLWxlZnQtd2lkdGgnLCAncGFkZGluZy1sZWZ0JywgJ3BhZGRpbmctcmlnaHQnLCAnYm9yZGVyLXJpZ2h0LXdpZHRoJywgJ21hcmdpbi1yaWdodCcgXTtcbiAgY29uc3QgYWJzTWF4ID0gYXBpLm1heChlbGVtZW50LCB2YWx1ZSwgaW5jbHVzaW9ucyk7XG4gIENzcy5zZXQoZWxlbWVudCwgJ21heC13aWR0aCcsIGFic01heCArICdweCcpO1xufTtcblxuZXhwb3J0IHtcbiAgc2V0LFxuICBnZXQsXG4gIGdldElubmVyLFxuICBnZXRPdXRlcixcbiAgZ2V0UnVudGltZSxcbiAgc2V0TWF4XG59O1xuIiwiaW1wb3J0IHsgQXJyIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9hcGkvbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgQXR0ckxpc3QgZnJvbSAnLi4vYXBpL3Byb3BlcnRpZXMvQXR0ckxpc3QnO1xuXG4vLyBJRTExIENhbiByZXR1cm4gdW5kZWZpbmVkIGZvciBhIGNsYXNzTGlzdCBvbiBlbGVtZW50cyBzdWNoIGFzIG1hdGgsIHNvIHdlIG1ha2Ugc3VyZSBpdCdzIG5vdCB1bmRlZmluZWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gdXNlIGl0LlxuY29uc3Qgc3VwcG9ydHMgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+KTogZWxlbWVudCBpcyBTdWdhckVsZW1lbnQ8RWxlbWVudD4gPT4gKGVsZW1lbnQuZG9tIGFzIEVsZW1lbnQpLmNsYXNzTGlzdCAhPT0gdW5kZWZpbmVkO1xuXG5jb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+KTogc3RyaW5nW10gPT4gQXR0ckxpc3QucmVhZChlbGVtZW50LCAnY2xhc3MnKTtcblxuY29uc3QgYWRkID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgY2xheno6IHN0cmluZyk6IGJvb2xlYW4gPT4gQXR0ckxpc3QuYWRkKGVsZW1lbnQsICdjbGFzcycsIGNsYXp6KTtcblxuY29uc3QgcmVtb3ZlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgY2xheno6IHN0cmluZyk6IGJvb2xlYW4gPT4gQXR0ckxpc3QucmVtb3ZlKGVsZW1lbnQsICdjbGFzcycsIGNsYXp6KTtcblxuY29uc3QgdG9nZ2xlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgY2xheno6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBpZiAoQXJyLmNvbnRhaW5zKGdldChlbGVtZW50KSwgY2xhenopKSB7XG4gICAgcmV0dXJuIHJlbW92ZShlbGVtZW50LCBjbGF6eik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFkZChlbGVtZW50LCBjbGF6eik7XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIGdldCxcbiAgYWRkLFxuICByZW1vdmUsXG4gIHRvZ2dsZSxcbiAgc3VwcG9ydHNcbn07XG4iLCJpbXBvcnQgeyBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcblxudHlwZSBUZXN0Rm4gPSAoZTogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuO1xudHlwZSBTY29wZVRlc3RGbjxULCBSIGV4dGVuZHMgTm9kZT4gPSAoc2NvcGU6IFN1Z2FyRWxlbWVudDxOb2RlPiwgYTogVCkgPT4gc2NvcGUgaXMgU3VnYXJFbGVtZW50PFI+O1xudHlwZSBBbmNlc3RvckZuPFQsIFIgZXh0ZW5kcyBOb2RlPiA9IChzY29wZTogU3VnYXJFbGVtZW50PE5vZGU+LCBwcmVkaWNhdGU6IFQsIGlzUm9vdD86IFRlc3RGbikgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PFI+PjtcblxuZXhwb3J0IGRlZmF1bHQgPFQsIFIgZXh0ZW5kcyBOb2RlID0gTm9kZT4gKGlzOiBTY29wZVRlc3RGbjxULCBSPiwgYW5jZXN0b3I6IEFuY2VzdG9yRm48VCwgUj4sIHNjb3BlOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGE6IFQsIGlzUm9vdD86IFRlc3RGbik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxSPj4gPT4ge1xuICBpZiAoaXMoc2NvcGUsIGEpKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoc2NvcGUpO1xuICB9IGVsc2UgaWYgKFR5cGUuaXNGdW5jdGlvbihpc1Jvb3QpICYmIGlzUm9vdChzY29wZSkpIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZTxTdWdhckVsZW1lbnQ8Uj4+KCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFuY2VzdG9yKHNjb3BlLCBhLCBpc1Jvb3QpO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgQXJyLCBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9hcGkvbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgQ3NzIGZyb20gJy4uL2FwaS9wcm9wZXJ0aWVzL0Nzcyc7XG5cbmltcG9ydCAqIGFzIFN0eWxlIGZyb20gJy4vU3R5bGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpbWVuc2lvbiB7XG4gIHJlYWRvbmx5IGdldDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgc2V0OiAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nKSA9PiB2b2lkO1xuICByZWFkb25seSBnZXRPdXRlcjogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pID0+IG51bWJlcjtcbiAgcmVhZG9ubHkgYWdncmVnYXRlOiAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCBwcm9wZXJ0aWVzOiBzdHJpbmdbXSkgPT4gbnVtYmVyO1xuICByZWFkb25seSBtYXg6IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIHZhbHVlOiBudW1iZXIsIHByb3BlcnRpZXM6IHN0cmluZ1tdKSA9PiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBEaW1lbnNpb24gPSAobmFtZTogc3RyaW5nLCBnZXRPZmZzZXQ6IChlOiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiBudW1iZXIpOiBEaW1lbnNpb24gPT4ge1xuICBjb25zdCBzZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PE5vZGU+LCBoOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcbiAgICBpZiAoIVR5cGUuaXNOdW1iZXIoaCkgJiYgIWgubWF0Y2goL15bMC05XSskLykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihuYW1lICsgJy5zZXQgYWNjZXB0cyBvbmx5IHBvc2l0aXZlIGludGVnZXIgdmFsdWVzLiBWYWx1ZSB3YXMgJyArIGgpO1xuICAgIH1cbiAgICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgICBpZiAoU3R5bGUuaXNTdXBwb3J0ZWQoZG9tKSkge1xuICAgICAgZG9tLnN0eWxlW25hbWUgYXMgYW55XSA9IGggKyAncHgnO1xuICAgIH1cbiAgfTtcblxuICAvKlxuICAgKiBqUXVlcnkgc3VwcG9ydHMgcXVlcnlpbmcgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgZG9jdW1lbnQgYW5kIHdpbmRvdyBvYmplY3RzLlxuICAgKlxuICAgKiBUQklPIGRvZXNuJ3QgZG8gdGhpcywgc28gdGhlIGNvZGUgaXMgcmVtb3ZlZCB0byBzYXZlIHNwYWNlLCBidXQgbGVmdCBoZXJlIGp1c3QgaW4gY2FzZS5cbiAgICovXG4gIC8qXG4gIHZhciBnZXREb2N1bWVudFdpZHRoID0gKGVsZW1lbnQpID0+IHtcbiAgICB2YXIgZG9tID0gZWxlbWVudC5kb207XG4gICAgaWYgKE5vZGUuaXNEb2N1bWVudChlbGVtZW50KSkge1xuICAgICAgdmFyIGJvZHkgPSBkb20uYm9keTtcbiAgICAgIHZhciBkb2MgPSBkb20uZG9jdW1lbnRFbGVtZW50O1xuICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICBib2R5LnNjcm9sbEhlaWdodCxcbiAgICAgICAgZG9jLnNjcm9sbEhlaWdodCxcbiAgICAgICAgYm9keS5vZmZzZXRIZWlnaHQsXG4gICAgICAgIGRvYy5vZmZzZXRIZWlnaHQsXG4gICAgICAgIGRvYy5jbGllbnRIZWlnaHRcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnZXRXaW5kb3dXaWR0aCA9IChlbGVtZW50KSA9PiB7XG4gICAgdmFyIGRvbSA9IGVsZW1lbnQuZG9tO1xuICAgIGlmIChkb20ud2luZG93ID09PSBkb20pIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIG9mZnNldEhlaWdodCBvbiBhIHdpbmRvdywgc28gdXNlIHRoZSBjbGllbnRIZWlnaHQgb2YgdGhlIGRvY3VtZW50XG4gICAgICByZXR1cm4gZG9tLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICB9O1xuKi9cblxuICBjb25zdCBnZXQgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHIgPSBnZXRPZmZzZXQoZWxlbWVudCk7XG5cbiAgICAvLyB6ZXJvIG9yIG51bGwgbWVhbnMgbm9uLXN0YW5kYXJkIG9yIGRpc2Nvbm5lY3RlZCwgZmFsbCBiYWNrIHRvIENTU1xuICAgIGlmICggciA8PSAwIHx8IHIgPT09IG51bGwgKSB7XG4gICAgICBjb25zdCBjc3MgPSBDc3MuZ2V0KGVsZW1lbnQsIG5hbWUpO1xuICAgICAgLy8gdWdoIHRoaXMgZmVlbHMgZGlydHksIGJ1dCBpdCBzYXZlcyBjeWNsZXNcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGNzcykgfHwgMDtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgLy8gaW4galF1ZXJ5LCBnZXRPdXRlciByZXBsaWNhdGVzIChvciB1c2VzKSBib3gtc2l6aW5nOiBib3JkZXItYm94IGNhbGN1bGF0aW9uc1xuICAvLyBhbHRob3VnaCB0aGVzZSBjYWxjdWxhdGlvbnMgb25seSBzZWVtIHJlbGV2YW50IGZvciBxdWlya3MgbW9kZSwgYW5kIGVkZ2UgY2FzZXMgVEJJTyBkb2Vzbid0IHJlbHkgb25cbiAgY29uc3QgZ2V0T3V0ZXIgPSBnZXQ7XG5cbiAgY29uc3QgYWdncmVnYXRlID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFbGVtZW50PiwgcHJvcGVydGllczogc3RyaW5nW10pID0+IEFyci5mb2xkbChwcm9wZXJ0aWVzLCAoYWNjLCBwcm9wZXJ0eSkgPT4ge1xuICAgIGNvbnN0IHZhbCA9IENzcy5nZXQoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsID09PSB1bmRlZmluZWQgPyAwIDogcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgcmV0dXJuIGlzTmFOKHZhbHVlKSA/IGFjYyA6IGFjYyArIHZhbHVlO1xuICB9LCAwKTtcblxuICBjb25zdCBtYXggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEVsZW1lbnQ+LCB2YWx1ZTogbnVtYmVyLCBwcm9wZXJ0aWVzOiBzdHJpbmdbXSkgPT4ge1xuICAgIGNvbnN0IGN1bXVsYXRpdmVJbmNsdXNpb25zID0gYWdncmVnYXRlKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIC8vIGlmIG1heC1oZWlnaHQgaXMgMTAwcHggYW5kIHlvdXIgY3VtdWxhdGl2ZUluY2x1c2lvbnMgaXMgMTUwcHgsIHRoZXJlIGlzIG5vIHdheSBtYXgtaGVpZ2h0IGNhbiBiZSAxMDBweCwgc28gd2UgcmV0dXJuIDAuXG4gICAgY29uc3QgYWJzb2x1dGVNYXggPSB2YWx1ZSA+IGN1bXVsYXRpdmVJbmNsdXNpb25zID8gdmFsdWUgLSBjdW11bGF0aXZlSW5jbHVzaW9ucyA6IDA7XG4gICAgcmV0dXJuIGFic29sdXRlTWF4O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0LFxuICAgIGdldCxcbiAgICBnZXRPdXRlcixcbiAgICBhZ2dyZWdhdGUsXG4gICAgbWF4XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgRnVuIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBFdmVudEFyZ3MsIEV2ZW50RmlsdGVyLCBFdmVudEhhbmRsZXIsIEV2ZW50VW5iaW5kZXIgfSBmcm9tICcuLi9hcGkvZXZlbnRzL1R5cGVzJztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL2FwaS9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhclNoYWRvd0RvbSBmcm9tICcuLi9hcGkvbm9kZS9TdWdhclNoYWRvd0RvbSc7XG5cbnR5cGUgV3JhcHBlZEhhbmRsZXI8VD4gPSAocmF3RXZlbnQ6IFQpID0+IHZvaWQ7XG5cbmNvbnN0IG1rRXZlbnQgPSA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdz4oXG4gIHRhcmdldDogU3VnYXJFbGVtZW50PFQ+LFxuICB4OiBFIGV4dGVuZHMgeyBjbGllbnRYOiBudW1iZXIgfSA/IG51bWJlciA6IHVuZGVmaW5lZCxcbiAgeTogRSBleHRlbmRzIHsgY2xpZW50WTogbnVtYmVyIH0gPyBudW1iZXIgOiB1bmRlZmluZWQsXG4gIHN0b3A6ICgpID0+IHZvaWQsXG4gIHByZXZlbnQ6ICgpID0+IHZvaWQsXG4gIGtpbGw6ICgpID0+IHZvaWQsXG4gIHJhdzogRVxuKTogRXZlbnRBcmdzPEUsIFQ+ID0+ICh7XG4gIHRhcmdldCxcbiAgeCxcbiAgeSxcbiAgc3RvcCxcbiAgcHJldmVudCxcbiAga2lsbCxcbiAgcmF3XG59KTtcblxuLyoqIFdyYXBzIGFuIEV2ZW50IGluIGFuIEV2ZW50QXJncyBzdHJ1Y3R1cmUuXG4gKiBUaGUgcmV0dXJuZWQgRXZlbnRBcmdzIHN0cnVjdHVyZSBoYXMgaXRzIHRhcmdldCBzZXQgdG8gdGhlIFwib3JpZ2luYWxcIiB0YXJnZXQgaWYgcG9zc2libGUuXG4gKiBTZWUgU3VnYXJTaGFkb3dEb20uZ2V0T3JpZ2luYWxFdmVudFRhcmdldFxuICovXG5jb25zdCBmcm9tUmF3RXZlbnQgPSA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdyA9IE5vZGU+KHJhd0V2ZW50OiBFKTogRXZlbnRBcmdzPEUsIFQ+ID0+IHtcbiAgY29uc3QgdGFyZ2V0ID0gU3VnYXJFbGVtZW50LmZyb21Eb20oU3VnYXJTaGFkb3dEb20uZ2V0T3JpZ2luYWxFdmVudFRhcmdldChyYXdFdmVudCkuZ2V0T3IocmF3RXZlbnQudGFyZ2V0KSBhcyBUKTtcblxuICBjb25zdCBzdG9wID0gKCkgPT4gcmF3RXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgY29uc3QgcHJldmVudCA9ICgpID0+IHJhd0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qga2lsbCA9IEZ1bi5jb21wb3NlKHByZXZlbnQsIHN0b3ApOyAvLyBtb3JlIG9mIGEgc2VxdWVuY2UgdGhhbiBhIGNvbXBvc2UsIGJ1dCBzYW1lIGVmZmVjdFxuXG4gIC8vIEZJWDogRG9uJ3QganVzdCBleHBvc2UgdGhlIHJhdyBldmVudC4gTmVlZCB0byBpZGVudGlmeSB3aGF0IG5lZWRzIHN0YW5kYXJkaXNhdGlvbi5cbiAgcmV0dXJuIG1rRXZlbnQodGFyZ2V0LCAocmF3RXZlbnQgYXMgYW55KS5jbGllbnRYLCAocmF3RXZlbnQgYXMgYW55KS5jbGllbnRZLCBzdG9wLCBwcmV2ZW50LCBraWxsLCByYXdFdmVudCk7XG59O1xuXG5jb25zdCBoYW5kbGUgPSA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdz4oZmlsdGVyOiBFdmVudEZpbHRlcjxFPiwgaGFuZGxlcjogRXZlbnRIYW5kbGVyPEUsIFQ+KTogV3JhcHBlZEhhbmRsZXI8RT4gPT4gKHJhd0V2ZW50OiBFKSA9PiB7XG4gIGlmIChmaWx0ZXIocmF3RXZlbnQpKSB7XG4gICAgaGFuZGxlcihmcm9tUmF3RXZlbnQ8RSwgVD4ocmF3RXZlbnQpKTtcbiAgfVxufTtcblxuY29uc3QgYmluZGVyID0gPEUgZXh0ZW5kcyBFdmVudCwgVCBleHRlbmRzIE5vZGUgfCBXaW5kb3c+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBzdHJpbmcsIGZpbHRlcjogRXZlbnRGaWx0ZXI8RT4sIGhhbmRsZXI6IEV2ZW50SGFuZGxlcjxFLCBUPiwgdXNlQ2FwdHVyZTogYm9vbGVhbik6IEV2ZW50VW5iaW5kZXIgPT4ge1xuICBjb25zdCB3cmFwcGVkID0gaGFuZGxlPEUsIFQ+KGZpbHRlciwgaGFuZGxlcik7XG4gIC8vIElFOSBtaW5pbXVtXG4gIGVsZW1lbnQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHdyYXBwZWQgYXMgRXZlbnRMaXN0ZW5lciwgdXNlQ2FwdHVyZSk7XG5cbiAgcmV0dXJuIHtcbiAgICB1bmJpbmQ6IEZ1bi5jdXJyeSh1bmJpbmQsIGVsZW1lbnQsIGV2ZW50LCB3cmFwcGVkLCB1c2VDYXB0dXJlKVxuICB9O1xufTtcblxuY29uc3QgYmluZCA9IDxFIGV4dGVuZHMgRXZlbnQsIFQgZXh0ZW5kcyBOb2RlIHwgV2luZG93PihlbGVtZW50OiBTdWdhckVsZW1lbnQ8RXZlbnRUYXJnZXQ+LCBldmVudDogc3RyaW5nLCBmaWx0ZXI6IEV2ZW50RmlsdGVyPEU+LCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8RSwgVD4pOiBFdmVudFVuYmluZGVyID0+XG4gIGJpbmRlcjxFLCBUPihlbGVtZW50LCBldmVudCwgZmlsdGVyLCBoYW5kbGVyLCBmYWxzZSk7XG5cbmNvbnN0IGNhcHR1cmUgPSA8RSBleHRlbmRzIEV2ZW50LCBUIGV4dGVuZHMgTm9kZSB8IFdpbmRvdz4oZWxlbWVudDogU3VnYXJFbGVtZW50PEV2ZW50VGFyZ2V0PiwgZXZlbnQ6IHN0cmluZywgZmlsdGVyOiBFdmVudEZpbHRlcjxFPiwgaGFuZGxlcjogRXZlbnRIYW5kbGVyPEUsIFQ+KTogRXZlbnRVbmJpbmRlciA9PlxuICBiaW5kZXI8RSwgVD4oZWxlbWVudCwgZXZlbnQsIGZpbHRlciwgaGFuZGxlciwgdHJ1ZSk7XG5cbmNvbnN0IHVuYmluZCA9IDxFIGV4dGVuZHMgRXZlbnQ+KGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxFdmVudFRhcmdldD4sIGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IFdyYXBwZWRIYW5kbGVyPEU+LCB1c2VDYXB0dXJlOiBib29sZWFuKSA9PiB7XG4gIC8vIElFOSBtaW5pbXVtXG4gIGVsZW1lbnQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIgYXMgRXZlbnRMaXN0ZW5lciwgdXNlQ2FwdHVyZSk7XG59O1xuXG5leHBvcnQgeyBiaW5kLCBjYXB0dXJlLCBmcm9tUmF3RXZlbnQgfTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi9hcGkvbm9kZS9TdWdhckVsZW1lbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVWYWx1ZSB7XG4gIHJlYWRvbmx5IGdldDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gc3RyaW5nO1xuICByZWFkb25seSBnZXRPcHRpb246IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pID0+IE9wdGlvbmFsPHN0cmluZz47XG4gIHJlYWRvbmx5IHNldDogKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgdmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IE5vZGVWYWx1ZSA9IChpczogKGU6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT4gYm9vbGVhbiwgbmFtZTogc3RyaW5nKTogTm9kZVZhbHVlID0+IHtcbiAgY29uc3QgZ2V0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IHN0cmluZyA9PiB7XG4gICAgaWYgKCFpcyhlbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSBnZXQgJyArIG5hbWUgKyAnIHZhbHVlIG9mIGEgJyArIG5hbWUgKyAnIG5vZGUnKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldE9wdGlvbihlbGVtZW50KS5nZXRPcignJyk7XG4gIH07XG5cbiAgY29uc3QgZ2V0T3B0aW9uID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IE9wdGlvbmFsPHN0cmluZz4gPT5cbiAgICBpcyhlbGVtZW50KSA/IE9wdGlvbmFsLmZyb20oZWxlbWVudC5kb20ubm9kZVZhbHVlKSA6IE9wdGlvbmFsLm5vbmU8c3RyaW5nPigpO1xuXG4gIGNvbnN0IHNldCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHZhbHVlOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICBpZiAoIWlzKGVsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHNldCByYXcgJyArIG5hbWUgKyAnIHZhbHVlIG9mIGEgJyArIG5hbWUgKyAnIG5vZGUnKTtcbiAgICB9XG4gICAgZWxlbWVudC5kb20ubm9kZVZhbHVlID0gdmFsdWU7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQsXG4gICAgZ2V0T3B0aW9uLFxuICAgIHNldFxuICB9O1xufTtcbiIsImltcG9ydCB7IFN0cmluZ3MgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uL2FwaS9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBDc3MgZnJvbSAnLi4vYXBpL3Byb3BlcnRpZXMvQ3NzJztcblxuY29uc3QgdG9OdW1iZXIgPSAocHg6IHN0cmluZywgZmFsbGJhY2s6IG51bWJlcik6IG51bWJlciA9PlxuICBTdHJpbmdzLnRvRmxvYXQocHgpLmdldE9yKGZhbGxiYWNrKTtcblxuY29uc3QgZ2V0UHJvcCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBuYW1lOiBzdHJpbmcsIGZhbGxiYWNrOiBudW1iZXIpOiBudW1iZXIgPT5cbiAgdG9OdW1iZXIoQ3NzLmdldChlbGVtZW50LCBuYW1lKSwgZmFsbGJhY2spO1xuXG5jb25zdCBjYWxjQ29udGVudEJveFNpemUgPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50Piwgc2l6ZTogbnVtYmVyLCB1cHBlcjogJ3RvcCcgfCAnbGVmdCcsIGxvd2VyOiAnYm90dG9tJyB8ICdyaWdodCcpID0+IHtcbiAgY29uc3QgcGFkZGluZ1VwcGVyID0gZ2V0UHJvcChlbGVtZW50LCBgcGFkZGluZy0ke3VwcGVyfWAsIDApO1xuICBjb25zdCBwYWRkaW5nTG93ZXIgPSBnZXRQcm9wKGVsZW1lbnQsIGBwYWRkaW5nLSR7bG93ZXJ9YCwgMCk7XG4gIGNvbnN0IGJvcmRlclVwcGVyID0gZ2V0UHJvcChlbGVtZW50LCBgYm9yZGVyLSR7dXBwZXJ9LXdpZHRoYCwgMCk7XG4gIGNvbnN0IGJvcmRlckxvd2VyID0gZ2V0UHJvcChlbGVtZW50LCBgYm9yZGVyLSR7bG93ZXJ9LXdpZHRoYCwgMCk7XG5cbiAgcmV0dXJuIHNpemUgLSBwYWRkaW5nVXBwZXIgLSBwYWRkaW5nTG93ZXIgLSBib3JkZXJVcHBlciAtIGJvcmRlckxvd2VyO1xufTtcblxuY29uc3QgZ2V0Q2FsY3VsYXRlZEhlaWdodCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+LCBib3hTaXppbmc6IHN0cmluZyk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGRvbSA9IGVsZW1lbnQuZG9tO1xuICBjb25zdCBoZWlnaHQgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IHx8IGRvbS5vZmZzZXRIZWlnaHQ7XG4gIHJldHVybiBib3hTaXppbmcgPT09ICdib3JkZXItYm94JyA/IGhlaWdodCA6IGNhbGNDb250ZW50Qm94U2l6ZShlbGVtZW50LCBoZWlnaHQsICd0b3AnLCAnYm90dG9tJyk7XG59O1xuXG5jb25zdCBnZXRDYWxjdWxhdGVkV2lkdGggPSAoZWxlbWVudDogU3VnYXJFbGVtZW50PEhUTUxFbGVtZW50PiwgYm94U2l6aW5nOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICBjb25zdCBkb20gPSBlbGVtZW50LmRvbTtcbiAgY29uc3Qgd2lkdGggPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfHwgZG9tLm9mZnNldFdpZHRoO1xuICByZXR1cm4gYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCcgPyB3aWR0aCA6IGNhbGNDb250ZW50Qm94U2l6ZShlbGVtZW50LCB3aWR0aCwgJ2xlZnQnLCAncmlnaHQnKTtcbn07XG5cbmNvbnN0IGdldEhlaWdodCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+XG4gIGdldFByb3AoZWxlbWVudCwgJ2hlaWdodCcsIGVsZW1lbnQuZG9tLm9mZnNldEhlaWdodCk7XG5cbmNvbnN0IGdldFdpZHRoID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT5cbiAgZ2V0UHJvcChlbGVtZW50LCAnd2lkdGgnLCBlbGVtZW50LmRvbS5vZmZzZXRXaWR0aCk7XG5cbmNvbnN0IGdldElubmVySGVpZ2h0ID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4pOiBudW1iZXIgPT5cbiAgZ2V0Q2FsY3VsYXRlZEhlaWdodChlbGVtZW50LCAnY29udGVudC1ib3gnKTtcblxuY29uc3QgZ2V0SW5uZXJXaWR0aCA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KTogbnVtYmVyID0+XG4gIGdldENhbGN1bGF0ZWRXaWR0aChlbGVtZW50LCAnY29udGVudC1ib3gnKTtcblxuZXhwb3J0IHtcbiAgZ2V0SW5uZXJIZWlnaHQsXG4gIGdldElubmVyV2lkdGgsXG4gIGdldEhlaWdodCxcbiAgZ2V0V2lkdGhcbn07XG4iLCJpbXBvcnQgeyBUeXBlIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuLy8gc29tZSBlbGVtZW50cywgc3VjaCBhcyBtYXRobWwsIGRvbid0IGhhdmUgc3R5bGUgYXR0cmlidXRlc1xuLy8gb3RoZXJzLCBzdWNoIGFzIGFuZ3VsYXIgZWxlbWVudHMsIGhhdmUgc3R5bGUgYXR0cmlidXRlcyB0aGF0IGFyZW4ndCBhIENTU1N0eWxlRGVjbGFyYXRpb25cbmNvbnN0IGlzU3VwcG9ydGVkID0gPFQgZXh0ZW5kcyBOb2RlPihkb206IFQpOiBkb20gaXMgKFQgJiBFbGVtZW50Q1NTSW5saW5lU3R5bGUpID0+XG5cbiAgKGRvbSBhcyBhbnkpLnN0eWxlICE9PSB1bmRlZmluZWQgJiYgVHlwZS5pc0Z1bmN0aW9uKChkb20gYXMgYW55KS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKTtcblxuZXhwb3J0IHsgaXNTdXBwb3J0ZWQgfTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCB0eXBlIHsgUmF3UmVjdCB9IGZyb20gJy4uLy4uL2FwaS9zZWxlY3Rpb24vUmVjdCc7XG5pbXBvcnQgdHlwZSB7IFNpdHUgfSBmcm9tICcuLi8uLi9hcGkvc2VsZWN0aW9uL1NpdHUnO1xuXG5jb25zdCBzZWxlY3ROb2RlID0gKHdpbjogV2luZG93LCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiBSYW5nZSA9PiB7XG4gIGNvbnN0IHJuZyA9IHdpbi5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICBybmcuc2VsZWN0Tm9kZShlbGVtZW50LmRvbSk7XG4gIHJldHVybiBybmc7XG59O1xuXG5jb25zdCBzZWxlY3ROb2RlQ29udGVudHMgPSAod2luOiBXaW5kb3csIGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IFJhbmdlID0+IHtcbiAgY29uc3Qgcm5nID0gd2luLmRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gIHNlbGVjdE5vZGVDb250ZW50c1VzaW5nKHJuZywgZWxlbWVudCk7XG4gIHJldHVybiBybmc7XG59O1xuXG5jb25zdCBzZWxlY3ROb2RlQ29udGVudHNVc2luZyA9IChybmc6IFJhbmdlLCBlbGVtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+XG4gIHJuZy5zZWxlY3ROb2RlQ29udGVudHMoZWxlbWVudC5kb20pO1xuXG5jb25zdCBpc1dpdGhpbiA9IChvdXRlclJhbmdlOiBSYW5nZSwgaW5uZXJSYW5nZTogUmFuZ2UpOiBib29sZWFuID0+XG4gIC8vIEFkYXB0ZWQgZnJvbTogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjA1NDAxL2luc2VydC1saW5rLWluLWNvbnRlbnRlZGl0YWJsZS1lbGVtZW50XG4gIGlubmVyUmFuZ2UuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKG91dGVyUmFuZ2UuRU5EX1RPX1NUQVJULCBvdXRlclJhbmdlKSA8IDEgJiYgaW5uZXJSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMob3V0ZXJSYW5nZS5TVEFSVF9UT19FTkQsIG91dGVyUmFuZ2UpID4gLTE7XG5cbmNvbnN0IGNyZWF0ZSA9ICh3aW46IFdpbmRvdyk6IFJhbmdlID0+XG4gIHdpbi5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXG4vLyBOT1RFOiBNdXRhdGVzIHRoZSByYW5nZS5cbmNvbnN0IHNldFN0YXJ0ID0gKHJuZzogUmFuZ2UsIHNpdHU6IFNpdHUpOiB2b2lkID0+IHtcbiAgc2l0dS5mb2xkKChlKSA9PiB7XG4gICAgcm5nLnNldFN0YXJ0QmVmb3JlKGUuZG9tKTtcbiAgfSwgKGUsIG8pID0+IHtcbiAgICBybmcuc2V0U3RhcnQoZS5kb20sIG8pO1xuICB9LCAoZSkgPT4ge1xuICAgIHJuZy5zZXRTdGFydEFmdGVyKGUuZG9tKTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZXRGaW5pc2ggPSAocm5nOiBSYW5nZSwgc2l0dTogU2l0dSk6IHZvaWQgPT4ge1xuICBzaXR1LmZvbGQoKGUpID0+IHtcbiAgICBybmcuc2V0RW5kQmVmb3JlKGUuZG9tKTtcbiAgfSwgKGUsIG8pID0+IHtcbiAgICBybmcuc2V0RW5kKGUuZG9tLCBvKTtcbiAgfSwgKGUpID0+IHtcbiAgICBybmcuc2V0RW5kQWZ0ZXIoZS5kb20pO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlcGxhY2VXaXRoID0gKHJuZzogUmFuZ2UsIGZyYWdtZW50OiBTdWdhckVsZW1lbnQ8Tm9kZT4pOiB2b2lkID0+IHtcbiAgLy8gTm90ZTogdGhpcyBkb2N1bWVudCBmcmFnbWVudCBhcHByb2FjaCBtYXkgbm90IHdvcmsgb24gSUU5LlxuICBkZWxldGVDb250ZW50cyhybmcpO1xuICBybmcuaW5zZXJ0Tm9kZShmcmFnbWVudC5kb20pO1xufTtcblxuY29uc3QgcmVsYXRpdmVUb05hdGl2ZSA9ICh3aW46IFdpbmRvdywgc3RhcnRTaXR1OiBTaXR1LCBmaW5pc2hTaXR1OiBTaXR1KTogUmFuZ2UgPT4ge1xuICBjb25zdCByYW5nZSA9IHdpbi5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICBzZXRTdGFydChyYW5nZSwgc3RhcnRTaXR1KTtcbiAgc2V0RmluaXNoKHJhbmdlLCBmaW5pc2hTaXR1KTtcbiAgcmV0dXJuIHJhbmdlO1xufTtcblxuY29uc3QgZXhhY3RUb05hdGl2ZSA9ICh3aW46IFdpbmRvdywgc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKTogUmFuZ2UgPT4ge1xuICBjb25zdCBybmcgPSB3aW4uZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgcm5nLnNldFN0YXJ0KHN0YXJ0LmRvbSwgc29mZnNldCk7XG4gIHJuZy5zZXRFbmQoZmluaXNoLmRvbSwgZm9mZnNldCk7XG4gIHJldHVybiBybmc7XG59O1xuXG5jb25zdCBkZWxldGVDb250ZW50cyA9IChybmc6IFJhbmdlKTogdm9pZCA9PiB7XG4gIHJuZy5kZWxldGVDb250ZW50cygpO1xufTtcblxuY29uc3QgY2xvbmVGcmFnbWVudCA9IChybmc6IFJhbmdlKTogU3VnYXJFbGVtZW50PERvY3VtZW50RnJhZ21lbnQ+ID0+IHtcbiAgY29uc3QgZnJhZ21lbnQgPSBybmcuY2xvbmVDb250ZW50cygpO1xuICByZXR1cm4gU3VnYXJFbGVtZW50LmZyb21Eb20oZnJhZ21lbnQpO1xufTtcblxuY29uc3QgdG9SZWN0ID0gKHJlY3Q6IENsaWVudFJlY3QgfCBET01SZWN0KTogUmF3UmVjdCA9PiAoe1xuICBsZWZ0OiByZWN0LmxlZnQsXG4gIHRvcDogcmVjdC50b3AsXG4gIHJpZ2h0OiByZWN0LnJpZ2h0LFxuICBib3R0b206IHJlY3QuYm90dG9tLFxuICB3aWR0aDogcmVjdC53aWR0aCxcbiAgaGVpZ2h0OiByZWN0LmhlaWdodFxufSk7XG5cbmNvbnN0IGdldEZpcnN0UmVjdCA9IChybmc6IFJhbmdlKTogT3B0aW9uYWw8UmF3UmVjdD4gPT4ge1xuICBjb25zdCByZWN0cyA9IHJuZy5nZXRDbGllbnRSZWN0cygpO1xuICAvLyBBU1NVTVBUSU9OOiBUaGUgZmlyc3QgcmVjdGFuZ2xlIGlzIHRoZSBzdGFydCBvZiB0aGUgc2VsZWN0aW9uXG4gIGNvbnN0IHJlY3QgPSByZWN0cy5sZW5ndGggPiAwID8gcmVjdHNbMF0gOiBybmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiByZWN0LndpZHRoID4gMCB8fCByZWN0LmhlaWdodCA+IDAgPyBPcHRpb25hbC5zb21lKHJlY3QpLm1hcCh0b1JlY3QpIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuY29uc3QgZ2V0Qm91bmRzID0gKHJuZzogUmFuZ2UpOiBPcHRpb25hbDxSYXdSZWN0PiA9PiB7XG4gIGNvbnN0IHJlY3QgPSBybmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiByZWN0LndpZHRoID4gMCB8fCByZWN0LmhlaWdodCA+IDAgPyBPcHRpb25hbC5zb21lKHJlY3QpLm1hcCh0b1JlY3QpIDogT3B0aW9uYWwubm9uZSgpO1xufTtcblxuY29uc3QgdG9TdHJpbmcgPSAocm5nOiBSYW5nZSk6IHN0cmluZyA9PiBybmcudG9TdHJpbmcoKTtcblxuZXhwb3J0IHtcbiAgY3JlYXRlLFxuICByZXBsYWNlV2l0aCxcbiAgc2VsZWN0Tm9kZSxcbiAgc2VsZWN0Tm9kZUNvbnRlbnRzLFxuICBzZWxlY3ROb2RlQ29udGVudHNVc2luZyxcbiAgcmVsYXRpdmVUb05hdGl2ZSxcbiAgZXhhY3RUb05hdGl2ZSxcbiAgZGVsZXRlQ29udGVudHMsXG4gIGNsb25lRnJhZ21lbnQsXG4gIGdldEZpcnN0UmVjdCxcbiAgZ2V0Qm91bmRzLFxuICBpc1dpdGhpbixcbiAgdG9TdHJpbmdcbn07XG4iLCJpbXBvcnQgeyBBZHQsIEZ1biwgT3B0aW9uYWwsIFRodW5rIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCB0eXBlIHsgU2ltU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vYXBpL3NlbGVjdGlvbi9TaW1TZWxlY3Rpb24nO1xuXG5pbXBvcnQgKiBhcyBOYXRpdmVSYW5nZSBmcm9tICcuL05hdGl2ZVJhbmdlJztcblxudHlwZSBTZWxlY3Rpb25EaXJlY3Rpb25IYW5kbGVyPFU+ID0gKHN0YXJ0OiBTdWdhckVsZW1lbnQ8Tm9kZT4sIHNvZmZzZXQ6IG51bWJlciwgZmluaXNoOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGZvZmZzZXQ6IG51bWJlcikgPT4gVTtcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25EaXJlY3Rpb24ge1xuICByZWFkb25seSBmb2xkOiA8VT4gKFxuICAgIGx0cjogU2VsZWN0aW9uRGlyZWN0aW9uSGFuZGxlcjxVPixcbiAgICBydGw6IFNlbGVjdGlvbkRpcmVjdGlvbkhhbmRsZXI8VT5cbiAgKSA9PiBVO1xuICByZWFkb25seSBtYXRjaDogPFU+IChicmFuY2hlczoge1xuICAgIGx0cjogU2VsZWN0aW9uRGlyZWN0aW9uSGFuZGxlcjxVPjtcbiAgICBydGw6IFNlbGVjdGlvbkRpcmVjdGlvbkhhbmRsZXI8VT47XG4gIH0pID0+IFU7XG4gIHJlYWRvbmx5IGxvZzogKGxhYmVsOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbnR5cGUgU2VsZWN0aW9uRGlyZWN0aW9uQ29uc3RydWN0b3IgPSAoc3RhcnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgc29mZnNldDogbnVtYmVyLCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxOb2RlPiwgZm9mZnNldDogbnVtYmVyKSA9PiBTZWxlY3Rpb25EaXJlY3Rpb247XG5cbmludGVyZmFjZSBMdHJSdGxSYW5nZXMge1xuICByZWFkb25seSBsdHI6ICgpID0+IFJhbmdlO1xuICByZWFkb25seSBydGw6ICgpID0+IE9wdGlvbmFsPFJhbmdlPjtcbn1cblxuY29uc3QgYWR0OiB7XG4gIHJlYWRvbmx5IGx0cjogU2VsZWN0aW9uRGlyZWN0aW9uQ29uc3RydWN0b3I7XG4gIHJlYWRvbmx5IHJ0bDogU2VsZWN0aW9uRGlyZWN0aW9uQ29uc3RydWN0b3I7XG59ID0gQWR0LmdlbmVyYXRlKFtcbiAgeyBsdHI6IFsgJ3N0YXJ0JywgJ3NvZmZzZXQnLCAnZmluaXNoJywgJ2ZvZmZzZXQnIF0gfSxcbiAgeyBydGw6IFsgJ3N0YXJ0JywgJ3NvZmZzZXQnLCAnZmluaXNoJywgJ2ZvZmZzZXQnIF0gfVxuXSk7XG5cbmNvbnN0IGZyb21SYW5nZSA9ICh3aW46IFdpbmRvdywgdHlwZTogU2VsZWN0aW9uRGlyZWN0aW9uQ29uc3RydWN0b3IsIHJhbmdlOiBSYW5nZSk6IFNlbGVjdGlvbkRpcmVjdGlvbiA9PlxuICB0eXBlKFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJhbmdlLnN0YXJ0Q29udGFpbmVyKSwgcmFuZ2Uuc3RhcnRPZmZzZXQsIFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJhbmdlLmVuZENvbnRhaW5lciksIHJhbmdlLmVuZE9mZnNldCk7XG5cbmNvbnN0IGdldFJhbmdlcyA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24pOiBMdHJSdGxSYW5nZXMgPT4gc2VsZWN0aW9uLm1hdGNoPEx0clJ0bFJhbmdlcz4oe1xuICBkb21SYW5nZTogKHJuZykgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBsdHI6IEZ1bi5jb25zdGFudChybmcpLFxuICAgICAgcnRsOiBPcHRpb25hbC5ub25lXG4gICAgfTtcbiAgfSxcbiAgcmVsYXRpdmU6IChzdGFydFNpdHUsIGZpbmlzaFNpdHUpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbHRyOiBUaHVuay5jYWNoZWQoKCkgPT4gTmF0aXZlUmFuZ2UucmVsYXRpdmVUb05hdGl2ZSh3aW4sIHN0YXJ0U2l0dSwgZmluaXNoU2l0dSkpLFxuICAgICAgcnRsOiBUaHVuay5jYWNoZWQoKCkgPT4gT3B0aW9uYWwuc29tZShOYXRpdmVSYW5nZS5yZWxhdGl2ZVRvTmF0aXZlKHdpbiwgZmluaXNoU2l0dSwgc3RhcnRTaXR1KSkpXG4gICAgfTtcbiAgfSxcbiAgZXhhY3Q6IChzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBzb2Zmc2V0OiBudW1iZXIsIGZpbmlzaDogU3VnYXJFbGVtZW50PE5vZGU+LCBmb2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbHRyOiBUaHVuay5jYWNoZWQoKCkgPT4gTmF0aXZlUmFuZ2UuZXhhY3RUb05hdGl2ZSh3aW4sIHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpKSxcbiAgICAgIHJ0bDogVGh1bmsuY2FjaGVkKCgpID0+IE9wdGlvbmFsLnNvbWUoTmF0aXZlUmFuZ2UuZXhhY3RUb05hdGl2ZSh3aW4sIGZpbmlzaCwgZm9mZnNldCwgc3RhcnQsIHNvZmZzZXQpKSlcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgZG9EaWFnbm9zZSA9ICh3aW46IFdpbmRvdywgcmFuZ2VzOiBMdHJSdGxSYW5nZXMpOiBTZWxlY3Rpb25EaXJlY3Rpb24gPT4ge1xuICAvLyBJZiB3ZSBjYW5ub3QgY3JlYXRlIGEgcmFuZ2VkIHNlbGVjdGlvbiBmcm9tIHN0YXJ0ID4gZmluaXNoLCBpdCBjb3VsZCBiZSBSVExcbiAgY29uc3Qgcm5nID0gcmFuZ2VzLmx0cigpO1xuICBpZiAocm5nLmNvbGxhcHNlZCkge1xuICAgIC8vIExldCdzIGNoZWNrIGlmIGl0J3MgUlRMIC4uLiBpZiBpdCBpcywgdGhlbiByZXZlcnNpbmcgdGhlIGRpcmVjdGlvbiB3aWxsIG5vdCBiZSBjb2xsYXBzZWRcbiAgICBjb25zdCByZXZlcnNlZCA9IHJhbmdlcy5ydGwoKS5maWx0ZXIoKHJldikgPT4gcmV2LmNvbGxhcHNlZCA9PT0gZmFsc2UpO1xuXG4gICAgcmV0dXJuIHJldmVyc2VkLm1hcCgocmV2KSA9PlxuICAgICAgLy8gV2UgbmVlZCB0byB1c2UgXCJyZXZlcnNlZFwiIGhlcmUsIGJlY2F1c2UgdGhlIG9yaWdpbmFsIG9ubHkgaGFzIG9uZSBwb2ludCAoY29sbGFwc2VkKVxuICAgICAgYWR0LnJ0bChcbiAgICAgICAgU3VnYXJFbGVtZW50LmZyb21Eb20ocmV2LmVuZENvbnRhaW5lciksIHJldi5lbmRPZmZzZXQsXG4gICAgICAgIFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJldi5zdGFydENvbnRhaW5lciksIHJldi5zdGFydE9mZnNldFxuICAgICAgKVxuICAgICkuZ2V0T3JUaHVuaygoKSA9PiBmcm9tUmFuZ2Uod2luLCBhZHQubHRyLCBybmcpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZnJvbVJhbmdlKHdpbiwgYWR0Lmx0ciwgcm5nKTtcbiAgfVxufTtcblxuY29uc3QgZGlhZ25vc2UgPSAod2luOiBXaW5kb3csIHNlbGVjdGlvbjogU2ltU2VsZWN0aW9uKTogU2VsZWN0aW9uRGlyZWN0aW9uID0+IHtcbiAgY29uc3QgcmFuZ2VzID0gZ2V0UmFuZ2VzKHdpbiwgc2VsZWN0aW9uKTtcbiAgcmV0dXJuIGRvRGlhZ25vc2Uod2luLCByYW5nZXMpO1xufTtcblxuY29uc3QgYXNMdHJSYW5nZSA9ICh3aW46IFdpbmRvdywgc2VsZWN0aW9uOiBTaW1TZWxlY3Rpb24pOiBSYW5nZSA9PiB7XG4gIGNvbnN0IGRpYWdub3NpcyA9IGRpYWdub3NlKHdpbiwgc2VsZWN0aW9uKTtcbiAgcmV0dXJuIGRpYWdub3Npcy5tYXRjaCh7XG4gICAgbHRyOiAoc3RhcnQsIHNvZmZzZXQsIGZpbmlzaCwgZm9mZnNldCk6IFJhbmdlID0+IHtcbiAgICAgIGNvbnN0IHJuZyA9IHdpbi5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcm5nLnNldFN0YXJ0KHN0YXJ0LmRvbSwgc29mZnNldCk7XG4gICAgICBybmcuc2V0RW5kKGZpbmlzaC5kb20sIGZvZmZzZXQpO1xuICAgICAgcmV0dXJuIHJuZztcbiAgICB9LFxuICAgIHJ0bDogKHN0YXJ0LCBzb2Zmc2V0LCBmaW5pc2gsIGZvZmZzZXQpID0+IHtcbiAgICAgIC8vIE5PVEU6IFJldmVyc2luZyBzdGFydCBhbmQgZmluaXNoXG4gICAgICBjb25zdCBybmcgPSB3aW4uZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIHJuZy5zZXRTdGFydChmaW5pc2guZG9tLCBmb2Zmc2V0KTtcbiAgICAgIHJuZy5zZXRFbmQoc3RhcnQuZG9tLCBzb2Zmc2V0KTtcbiAgICAgIHJldHVybiBybmc7XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IGx0ciA9IGFkdC5sdHI7XG5jb25zdCBydGwgPSBhZHQucnRsO1xuXG5leHBvcnQgeyBsdHIsIHJ0bCwgZGlhZ25vc2UsIGFzTHRyUmFuZ2UgfTtcbiIsImltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcblxuaW1wb3J0IHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vYXBpL25vZGUvU3VnYXJFbGVtZW50JztcbmltcG9ydCB7IFNpbVJhbmdlIH0gZnJvbSAnLi4vLi4vYXBpL3NlbGVjdGlvbi9TaW1SYW5nZSc7XG5cbmludGVyZmFjZSBDYXJldFBvc2l0aW9uIHtcbiAgcmVhZG9ubHkgb2Zmc2V0Tm9kZTogTm9kZSB8IG51bGw7XG4gIHJlYWRvbmx5IG9mZnNldDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgVmVuZG9yRG9jdW1lbnQge1xuICByZWFkb25seSBjYXJldFBvc2l0aW9uRnJvbVBvaW50PzogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiBDYXJldFBvc2l0aW9uIHwgbnVsbDtcbiAgcmVhZG9ubHkgY2FyZXRSYW5nZUZyb21Qb2ludD86ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gUmFuZ2UgfCBudWxsO1xufVxuXG5jb25zdCBjYXJldFBvc2l0aW9uRnJvbVBvaW50ID0gKGRvYzogRG9jdW1lbnQgJiBWZW5kb3JEb2N1bWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBPcHRpb25hbDxSYW5nZT4gPT5cbiAgT3B0aW9uYWwuZnJvbShkb2MuY2FyZXRQb3NpdGlvbkZyb21Qb2ludD8uKHgsIHkpKVxuICAgIC5iaW5kKChwb3MpID0+IHtcbiAgICAgIC8vIEl0IHR1cm5zIG91dCB0aGF0IEZpcmVmb3ggY2FuIHJldHVybiBudWxsIGZvciBwb3Mub2Zmc2V0Tm9kZVxuICAgICAgaWYgKHBvcy5vZmZzZXROb2RlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBPcHRpb25hbC5ub25lPFJhbmdlPigpO1xuICAgICAgfVxuICAgICAgY29uc3QgciA9IGRvYy5jcmVhdGVSYW5nZSgpO1xuICAgICAgci5zZXRTdGFydChwb3Mub2Zmc2V0Tm9kZSwgcG9zLm9mZnNldCk7XG4gICAgICByLmNvbGxhcHNlKCk7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShyKTtcbiAgICB9KTtcblxuY29uc3QgY2FyZXRSYW5nZUZyb21Qb2ludCA9IChkb2M6IFZlbmRvckRvY3VtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlcik6IE9wdGlvbmFsPFJhbmdlPiA9PlxuICBPcHRpb25hbC5mcm9tKGRvYy5jYXJldFJhbmdlRnJvbVBvaW50Py4oeCwgeSkpO1xuXG5jb25zdCBhdmFpbGFibGVTZWFyY2ggPSAoZG9jOiBWZW5kb3JEb2N1bWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBPcHRpb25hbDxSYW5nZT4gPT4ge1xuICBpZiAoZG9jLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQpIHtcbiAgICByZXR1cm4gY2FyZXRQb3NpdGlvbkZyb21Qb2ludChkb2MgYXMgRG9jdW1lbnQsIHgsIHkpOyAgLy8gZGVmaW5lZCBzdGFuZGFyZCwgZmlyZWZveCBvbmx5XG4gIH0gZWxzZSBpZiAoZG9jLmNhcmV0UmFuZ2VGcm9tUG9pbnQpIHtcbiAgICByZXR1cm4gY2FyZXRSYW5nZUZyb21Qb2ludChkb2MsIHgsIHkpOyAvLyB3ZWJraXQvYmxpbmsgaW1wbGVtZW50YXRpb25cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gT3B0aW9uYWwubm9uZSgpOyAvLyB1bnN1cHBvcnRlZCBicm93c2VyXG4gIH1cbn07XG5cbmNvbnN0IGZyb21Qb2ludCA9ICh3aW46IFdpbmRvdywgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBPcHRpb25hbDxTaW1SYW5nZT4gPT4ge1xuICBjb25zdCBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gIHJldHVybiBhdmFpbGFibGVTZWFyY2goZG9jLCB4LCB5KS5tYXAoKHJuZykgPT4gU2ltUmFuZ2UuY3JlYXRlKFxuICAgIFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJuZy5zdGFydENvbnRhaW5lciksXG4gICAgcm5nLnN0YXJ0T2Zmc2V0LFxuICAgIFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJuZy5lbmRDb250YWluZXIpLFxuICAgIHJuZy5lbmRPZmZzZXRcbiAgKSk7XG59O1xuXG5leHBvcnQge1xuICBmcm9tUG9pbnRcbn07XG4iLCJpbXBvcnQgeyBBcnIgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuXG5pbXBvcnQgeyBTdWdhckVsZW1lbnQgfSBmcm9tICcuLi8uLi9hcGkvbm9kZS9TdWdhckVsZW1lbnQnO1xuaW1wb3J0ICogYXMgTm9kZSBmcm9tICcuLi8uLi9hcGkvbm9kZS9TdWdhck5vZGUnO1xuaW1wb3J0ICogYXMgU2VsZWN0b3JGaWx0ZXIgZnJvbSAnLi4vLi4vYXBpL3NlYXJjaC9TZWxlY3RvckZpbHRlcic7XG5pbXBvcnQgKiBhcyBTZWxlY3RvcnMgZnJvbSAnLi4vLi4vYXBpL3NlYXJjaC9TZWxlY3RvcnMnO1xuaW1wb3J0IHR5cGUgeyBTaW1TZWxlY3Rpb24gfSBmcm9tICcuLi8uLi9hcGkvc2VsZWN0aW9uL1NpbVNlbGVjdGlvbic7XG5pbXBvcnQgKiBhcyBOYXRpdmVSYW5nZSBmcm9tICcuLi9jb3JlL05hdGl2ZVJhbmdlJztcbmltcG9ydCAqIGFzIFNlbGVjdGlvbkRpcmVjdGlvbiBmcm9tICcuLi9jb3JlL1NlbGVjdGlvbkRpcmVjdGlvbic7XG5cbmNvbnN0IHdpdGhpbkNvbnRhaW5lciA9IDxUIGV4dGVuZHMgRWxlbWVudD4od2luOiBXaW5kb3csIGFuY2VzdG9yOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4sIG91dGVyUmFuZ2U6IFJhbmdlLCBzZWxlY3Rvcjogc3RyaW5nKTogU3VnYXJFbGVtZW50PFQ+W10gPT4ge1xuICBjb25zdCBpbm5lclJhbmdlID0gTmF0aXZlUmFuZ2UuY3JlYXRlKHdpbik7XG4gIGNvbnN0IGFuY2VzdG9yQXJyYXkgPSBTZWxlY3RvcnMuaXM8VD4oYW5jZXN0b3IsIHNlbGVjdG9yKSA/IFsgYW5jZXN0b3IgXSA6IFtdO1xuICBjb25zdCBlbGVtZW50cyA9IGFuY2VzdG9yQXJyYXkuY29uY2F0KFNlbGVjdG9yRmlsdGVyLmRlc2NlbmRhbnRzPFQ+KGFuY2VzdG9yLCBzZWxlY3RvcikpO1xuICByZXR1cm4gQXJyLmZpbHRlcihlbGVtZW50cywgKGVsZW0pID0+IHtcbiAgICAvLyBNdXRhdGUgdGhlIHNlbGVjdGlvbiB0byBzYXZlIGNyZWF0aW5nIG5ldyByYW5nZXMgZWFjaCB0aW1lXG4gICAgTmF0aXZlUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzVXNpbmcoaW5uZXJSYW5nZSwgZWxlbSk7XG4gICAgcmV0dXJuIE5hdGl2ZVJhbmdlLmlzV2l0aGluKG91dGVyUmFuZ2UsIGlubmVyUmFuZ2UpO1xuICB9KTtcbn07XG5cbmNvbnN0IGZpbmQgPSA8VCBleHRlbmRzIEVsZW1lbnQ+KHdpbjogV2luZG93LCBzZWxlY3Rpb246IFNpbVNlbGVjdGlvbiwgc2VsZWN0b3I6IHN0cmluZyk6IFN1Z2FyRWxlbWVudDxUPltdID0+IHtcbiAgLy8gUmV2ZXJzZSB0aGUgc2VsZWN0aW9uIGlmIGl0IGlzIFJUTCB3aGVuIGRvaW5nIHRoZSBjb21wYXJpc29uXG4gIGNvbnN0IG91dGVyUmFuZ2UgPSBTZWxlY3Rpb25EaXJlY3Rpb24uYXNMdHJSYW5nZSh3aW4sIHNlbGVjdGlvbik7XG4gIGNvbnN0IGFuY2VzdG9yID0gU3VnYXJFbGVtZW50LmZyb21Eb20ob3V0ZXJSYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcik7XG4gIC8vIE5vdGUsIHRoaXMgbWlnaHQgbmVlZCB0byBjaGFuZ2Ugd2hlbiB3ZSBoYXZlIHRvIHN0YXJ0IGxvb2tpbmcgZm9yIG5vbiBlbGVtZW50cy5cbiAgcmV0dXJuIE5vZGUuaXNFbGVtZW50KGFuY2VzdG9yKSA/XG4gICAgd2l0aGluQ29udGFpbmVyKHdpbiwgYW5jZXN0b3IsIG91dGVyUmFuZ2UsIHNlbGVjdG9yKSA6IFtdO1xufTtcblxuZXhwb3J0IHtcbiAgZmluZFxufTtcbiIsImltcG9ydCB7IEFyciB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5cbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJy4uLy4uL2FwaS9ub2RlL1N1Z2FyRWxlbWVudCc7XG5pbXBvcnQgKiBhcyBTdWdhck5vZGUgZnJvbSAnLi4vLi4vYXBpL25vZGUvU3VnYXJOb2RlJztcbmltcG9ydCB7IFNpbVNlbGVjdGlvbiB9IGZyb20gJy4uLy4uL2FwaS9zZWxlY3Rpb24vU2ltU2VsZWN0aW9uJztcbmltcG9ydCB7IFNpdHUgfSBmcm9tICcuLi8uLi9hcGkvc2VsZWN0aW9uL1NpdHUnO1xuXG5jb25zdCBiZWZvcmVTcGVjaWFsID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPiwgb2Zmc2V0OiBudW1iZXIpOiBTaXR1ID0+IHtcbiAgLy8gRnJvbSBtZW1vcnksIHdlIGRvbid0IHdhbnQgdG8gdXNlIDxicj4gZGlyZWN0bHkgb24gRmlyZWZveCBiZWNhdXNlIGl0IGxvY2tzIHRoZSBrZXlib2FyZCBpbnB1dC5cbiAgLy8gSXQgdHVybnMgb3V0IHRoYXQgPGltZz4gZGlyZWN0bHkgb24gSUUgbG9ja3MgdGhlIGtleWJvYXJkIGFzIHdlbGwuXG4gIC8vIElmIHRoZSBvZmZzZXQgaXMgMCwgdXNlIGJlZm9yZS4gSWYgdGhlIG9mZnNldCBpcyAxLCB1c2UgYWZ0ZXIuXG4gIC8vIFRCSU8tMzg4OTogRmlyZWZveCBTaXR1Lm9uIDxpbnB1dD4gcmVzdWx0cyBpbiBhIGNoaWxkIG9mIHRoZSA8aW5wdXQ+OyBTaXR1LmJlZm9yZSA8aW5wdXQ+IHJlc3VsdHMgaW4gcGxhdGZvcm0gaW5jb25zaXN0ZW5jaWVzXG4gIGNvbnN0IG5hbWUgPSBTdWdhck5vZGUubmFtZShlbGVtZW50KTtcbiAgaWYgKCdpbnB1dCcgPT09IG5hbWUpIHtcbiAgICByZXR1cm4gU2l0dS5hZnRlcihlbGVtZW50KTtcbiAgfSBlbHNlIGlmICghQXJyLmNvbnRhaW5zKFsgJ2JyJywgJ2ltZycgXSwgbmFtZSkpIHtcbiAgICByZXR1cm4gU2l0dS5vbihlbGVtZW50LCBvZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvZmZzZXQgPT09IDAgPyBTaXR1LmJlZm9yZShlbGVtZW50KSA6IFNpdHUuYWZ0ZXIoZWxlbWVudCk7XG4gIH1cbn07XG5cbmNvbnN0IHByZXByb2Nlc3NSZWxhdGl2ZSA9IChzdGFydFNpdHU6IFNpdHUsIGZpbmlzaFNpdHU6IFNpdHUpOiBTaW1TZWxlY3Rpb24gPT4ge1xuICBjb25zdCBzdGFydCA9IHN0YXJ0U2l0dS5mb2xkKFNpdHUuYmVmb3JlLCBiZWZvcmVTcGVjaWFsLCBTaXR1LmFmdGVyKTtcbiAgY29uc3QgZmluaXNoID0gZmluaXNoU2l0dS5mb2xkKFNpdHUuYmVmb3JlLCBiZWZvcmVTcGVjaWFsLCBTaXR1LmFmdGVyKTtcbiAgcmV0dXJuIFNpbVNlbGVjdGlvbi5yZWxhdGl2ZShzdGFydCwgZmluaXNoKTtcbn07XG5cbmNvbnN0IHByZXByb2Nlc3NFeGFjdCA9IChzdGFydDogU3VnYXJFbGVtZW50PE5vZGU+LCBzb2Zmc2V0OiBudW1iZXIsIGZpbmlzaDogU3VnYXJFbGVtZW50PE5vZGU+LCBmb2Zmc2V0OiBudW1iZXIpOiBTaW1TZWxlY3Rpb24gPT4ge1xuICBjb25zdCBzdGFydFNpdHUgPSBiZWZvcmVTcGVjaWFsKHN0YXJ0LCBzb2Zmc2V0KTtcbiAgY29uc3QgZmluaXNoU2l0dSA9IGJlZm9yZVNwZWNpYWwoZmluaXNoLCBmb2Zmc2V0KTtcbiAgcmV0dXJuIFNpbVNlbGVjdGlvbi5yZWxhdGl2ZShzdGFydFNpdHUsIGZpbmlzaFNpdHUpO1xufTtcblxuY29uc3QgcHJlcHJvY2VzcyA9IChzZWxlY3Rpb246IFNpbVNlbGVjdGlvbik6IFNpbVNlbGVjdGlvbiA9PiBzZWxlY3Rpb24ubWF0Y2goe1xuICBkb21SYW5nZTogKHJuZykgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gU3VnYXJFbGVtZW50LmZyb21Eb20ocm5nLnN0YXJ0Q29udGFpbmVyKTtcbiAgICBjb25zdCBmaW5pc2ggPSBTdWdhckVsZW1lbnQuZnJvbURvbShybmcuZW5kQ29udGFpbmVyKTtcbiAgICByZXR1cm4gcHJlcHJvY2Vzc0V4YWN0KHN0YXJ0LCBybmcuc3RhcnRPZmZzZXQsIGZpbmlzaCwgcm5nLmVuZE9mZnNldCk7XG4gIH0sXG4gIHJlbGF0aXZlOiBwcmVwcm9jZXNzUmVsYXRpdmUsXG4gIGV4YWN0OiBwcmVwcm9jZXNzRXhhY3Rcbn0pO1xuXG5leHBvcnQge1xuICBiZWZvcmVTcGVjaWFsLFxuICBwcmVwcm9jZXNzLFxuICBwcmVwcm9jZXNzUmVsYXRpdmUsXG4gIHByZXByb2Nlc3NFeGFjdFxufTtcbiIsImltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgTW9kZWxNYW5hZ2VyLCB7IHR5cGUgTW9kZWwgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL01vZGVsTWFuYWdlcic7XG5cbmltcG9ydCAqIGFzIFRhYmxlIGZyb20gJy4vdGFibGUvVGFibGUnO1xuXG5jb25zdCBEb21Nb2RlbCA9IChlZGl0b3I6IEVkaXRvcik6IE1vZGVsID0+IHtcbiAgY29uc3QgdGFibGUgPSBUYWJsZS5zZXR1cFRhYmxlKGVkaXRvcik7XG5cbiAgcmV0dXJuIHtcbiAgICB0YWJsZVxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgKCk6IHZvaWQgPT4ge1xuICBNb2RlbE1hbmFnZXIuYWRkKCdkb20nLCBEb21Nb2RlbCk7XG59O1xuIiwiaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgTW9kZWwgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL01vZGVsTWFuYWdlcic7XG5cbmltcG9ydCAqIGFzIENsaXBib2FyZCBmcm9tICcuL2FjdGlvbnMvQ2xpcGJvYXJkJztcbmltcG9ydCB7IFRhYmxlQWN0aW9ucyB9IGZyb20gJy4vYWN0aW9ucy9UYWJsZUFjdGlvbnMnO1xuaW1wb3J0ICogYXMgQ29tbWFuZHMgZnJvbSAnLi9hcGkvQ29tbWFuZHMnO1xuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuL2FwaS9PcHRpb25zJztcbmltcG9ydCAqIGFzIFF1ZXJ5Q29tbWFuZHMgZnJvbSAnLi9hcGkvUXVlcnlDb21tYW5kcyc7XG5pbXBvcnQgeyBUYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyIH0gZnJvbSAnLi9hcGkvVGFibGVDZWxsU2VsZWN0aW9uSGFuZGxlcic7XG5pbXBvcnQgeyBUYWJsZVJlc2l6ZUhhbmRsZXIgfSBmcm9tICcuL2FwaS9UYWJsZVJlc2l6ZUhhbmRsZXInO1xuXG5leHBvcnQgdHlwZSBUYWJsZSA9IE1vZGVsWyd0YWJsZSddO1xuXG5jb25zdCBzZXR1cFRhYmxlID0gKGVkaXRvcjogRWRpdG9yKTogVGFibGUgPT4ge1xuICBPcHRpb25zLnJlZ2lzdGVyKGVkaXRvcik7XG4gIGNvbnN0IHJlc2l6ZUhhbmRsZXIgPSBUYWJsZVJlc2l6ZUhhbmRsZXIoZWRpdG9yKTtcbiAgY29uc3QgY2VsbFNlbGVjdGlvbkhhbmRsZXIgPSBUYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyKGVkaXRvciwgcmVzaXplSGFuZGxlcik7XG5cbiAgY29uc3QgYWN0aW9ucyA9IFRhYmxlQWN0aW9ucyhlZGl0b3IsIHJlc2l6ZUhhbmRsZXIsIGNlbGxTZWxlY3Rpb25IYW5kbGVyKTtcbiAgQ29tbWFuZHMucmVnaXN0ZXJDb21tYW5kcyhlZGl0b3IsIGFjdGlvbnMpO1xuICBRdWVyeUNvbW1hbmRzLnJlZ2lzdGVyUXVlcnlDb21tYW5kcyhlZGl0b3IsIGFjdGlvbnMpO1xuICAvLyBUT0RPOiBUSU5ZLTgzODUgTWF5YmUgbW92ZSB0byBjb3JlLiBBbHRob3VnaCwgd2lsbCBuZWVkIFJUQyB0byBoYXZlIHRoYXQgd29ya2luZyBmaXJzdFxuICBDbGlwYm9hcmQucmVnaXN0ZXJFdmVudHMoZWRpdG9yLCBhY3Rpb25zKTtcblxuICByZXR1cm4ge1xuICAgIGdldFNlbGVjdGVkQ2VsbHM6IGNlbGxTZWxlY3Rpb25IYW5kbGVyLmdldFNlbGVjdGVkQ2VsbHMsXG4gICAgY2xlYXJTZWxlY3RlZENlbGxzOiBjZWxsU2VsZWN0aW9uSGFuZGxlci5jbGVhclNlbGVjdGVkQ2VsbHNcbiAgfTtcbn07XG5cbmV4cG9ydCB7XG4gIHNldHVwVGFibGVcbn07XG4iLCJpbXBvcnQgeyBBcnIsIHR5cGUgT3B0aW9uYWwgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQ29weVNlbGVjdGVkLCBUYWJsZUZpbGwsIFRhYmxlTG9va3VwIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDc3MsIEluc2VydCwgSW5zZXJ0QWxsLCBSZW1vdmUsIFN1Z2FyRWxlbWVudCwgU3VnYXJFbGVtZW50cywgU3VnYXJOb2RlLCBTdWdhclNoYWRvd0RvbSB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vY29yZS9UYWJsZVV0aWxzJztcbmltcG9ydCAqIGFzIFRhYmxlVGFyZ2V0cyBmcm9tICcuLi9xdWVyaWVzL1RhYmxlVGFyZ2V0cyc7XG5pbXBvcnQgKiBhcyBFcGhlbWVyYSBmcm9tICcuLi9zZWxlY3Rpb24vRXBoZW1lcmEnO1xuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uJztcblxuaW1wb3J0IHR5cGUgeyBUYWJsZUFjdGlvbnMgfSBmcm9tICcuL1RhYmxlQWN0aW9ucyc7XG5cbmNvbnN0IGV4dHJhY3RTZWxlY3RlZCA9IChjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+W10+ID0+IHtcbiAgLy8gQXNzdW1lIGZvciBub3cgdGhhdCB3ZSBvbmx5IGhhdmUgb25lIHRhYmxlIChhbHNvIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgd2UgbXVsdGkgc2VsZWN0IG91dHNpZGUgYSB0YWJsZSlcbiAgcmV0dXJuIFRhYmxlTG9va3VwLnRhYmxlKGNlbGxzWzBdKS5tYXAoXG4gICAgKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCByZXBsaWNhID0gQ29weVNlbGVjdGVkLmV4dHJhY3QodGFibGUsIEVwaGVtZXJhLmF0dHJpYnV0ZVNlbGVjdG9yKTtcbiAgICAgIFV0aWxzLnJlbW92ZURhdGFTdHlsZShyZXBsaWNhKTtcbiAgICAgIHJldHVybiBbIHJlcGxpY2EgXTtcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBzZXJpYWxpemVFbGVtZW50cyA9IChlZGl0b3I6IEVkaXRvciwgZWxlbWVudHM6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD5bXSk6IHN0cmluZyA9PlxuICBBcnIubWFwKGVsZW1lbnRzLCAoZWxtKSA9PiBlZGl0b3Iuc2VsZWN0aW9uLnNlcmlhbGl6ZXIuc2VyaWFsaXplKGVsbS5kb20sIHt9KSkuam9pbignJyk7XG5cbmNvbnN0IGdldFRleHRDb250ZW50ID0gKGVkaXRvcjogRWRpdG9yLCByZXBsaWNhRWxlbWVudHM6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PltdKTogc3RyaW5nID0+IHtcbiAgY29uc3QgZG9jID0gZWRpdG9yLmdldERvYygpO1xuICBjb25zdCBkb3MgPSBTdWdhclNoYWRvd0RvbS5nZXRSb290Tm9kZShTdWdhckVsZW1lbnQuZnJvbURvbShlZGl0b3IuZ2V0Qm9keSgpKSk7XG5cbiAgLy8gU2V0IHVwIG9mZnNjcmVlbiBkaXYgc28gdGhhdCB0aGUgZXh0cmFjdGVkIHRhYmxlIGVsZW1lbnQgY2FuIGJlIGluc2VydGVkIGludG8gdGhlIERPTVxuICAvLyBUSU5ZLTEwODQ3OiBJZiB0aGUgdGFibGUgZWxlbWVudCBpcyBkZXRhY2hlZCBmcm9tIHRoZSBET00sIGNhbGxpbmcgaW5uZXJUZXh0IGlzIGVxdWl2YWxlbnQgdG8gY2FsbGluZ1xuICAvLyB0ZXh0Q29udGVudCB3aGljaCBkb2VzIG5vdCBpbmNsdWRlICdcXG4nIGFuZCAnXFx0JyBjaGFyYWN0ZXJzIHRvIHNlcGFyYXRlIHJvd3MgYW5kIGNlbGxzIHJlc3BlY3RpdmVseVxuICBjb25zdCBvZmZzY3JlZW5EaXYgPSBTdWdhckVsZW1lbnQuZnJvbVRhZygnZGl2JywgZG9jKTtcbiAgQXR0cmlidXRlLnNldChvZmZzY3JlZW5EaXYsICdkYXRhLW1jZS1ib2d1cycsICdhbGwnKTtcbiAgQ3NzLnNldEFsbChvZmZzY3JlZW5EaXYsIHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICBsZWZ0OiAnLTk5OTk5OTlweCcsXG4gICAgdG9wOiAnMCcsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIG9wYWNpdHk6ICcwJ1xuICB9KTtcbiAgY29uc3Qgcm9vdCA9IFN1Z2FyU2hhZG93RG9tLmdldENvbnRlbnRDb250YWluZXIoZG9zKTtcbiAgSW5zZXJ0QWxsLmFwcGVuZChvZmZzY3JlZW5EaXYsIHJlcGxpY2FFbGVtZW50cyk7XG4gIEluc2VydC5hcHBlbmQocm9vdCwgb2Zmc2NyZWVuRGl2KTtcblxuICBjb25zdCB0ZXh0Q29udGVudCA9IG9mZnNjcmVlbkRpdi5kb20uaW5uZXJUZXh0O1xuXG4gIFJlbW92ZS5yZW1vdmUob2Zmc2NyZWVuRGl2KTtcblxuICByZXR1cm4gdGV4dENvbnRlbnQ7XG59O1xuXG5jb25zdCByZWdpc3RlckV2ZW50cyA9IChlZGl0b3I6IEVkaXRvciwgYWN0aW9uczogVGFibGVBY3Rpb25zKTogdm9pZCA9PiB7XG4gIGVkaXRvci5vbignQmVmb3JlR2V0Q29udGVudCcsIChlKSA9PiB7XG4gICAgY29uc3QgbXVsdGlDZWxsQ29udGV4dCA9IChjZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBleHRyYWN0U2VsZWN0ZWQoY2VsbHMpLmVhY2goKHJlcGxpY2FFbGVtZW50cykgPT4ge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZS5mb3JtYXQgPT09ICd0ZXh0JyA/IGdldFRleHRDb250ZW50KGVkaXRvciwgcmVwbGljYUVsZW1lbnRzKSA6IHNlcmlhbGl6ZUVsZW1lbnRzKGVkaXRvciwgcmVwbGljYUVsZW1lbnRzKTtcbiAgICAgICAgZS5jb250ZW50ID0gY29udGVudDtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoZS5zZWxlY3Rpb24gPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gVGFibGVTZWxlY3Rpb24uZ2V0Q2VsbHNGcm9tRmFrZVNlbGVjdGlvbihlZGl0b3IpO1xuICAgICAgaWYgKGNlbGxzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIG11bHRpQ2VsbENvbnRleHQoY2VsbHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgZWRpdG9yLm9uKCdCZWZvcmVTZXRDb250ZW50JywgKGUpID0+IHtcbiAgICBpZiAoZS5zZWxlY3Rpb24gPT09IHRydWUgJiYgZS5wYXN0ZSA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRDZWxscyA9IFRhYmxlU2VsZWN0aW9uLmdldENlbGxzRnJvbVNlbGVjdGlvbihlZGl0b3IpO1xuICAgICAgQXJyLmhlYWQoc2VsZWN0ZWRDZWxscykuZWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBUYWJsZUxvb2t1cC50YWJsZShjZWxsKS5lYWNoKCh0YWJsZSkgPT4ge1xuXG4gICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnIuZmlsdGVyKFN1Z2FyRWxlbWVudHMuZnJvbUh0bWwoZS5jb250ZW50KSwgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBTdWdhck5vZGUubmFtZShjb250ZW50KSAhPT0gJ21ldGEnO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgaXNUYWJsZSA9IFN1Z2FyTm9kZS5pc1RhZygndGFibGUnKTtcbiAgICAgICAgICBpZiAoT3B0aW9ucy5zaG91bGRNZXJnZUNvbnRlbnRPblBhc3RlKGVkaXRvcikgJiYgZWxlbWVudHMubGVuZ3RoID09PSAxICYmIGlzVGFibGUoZWxlbWVudHNbMF0pKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5nZXREb2MoKSk7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0b3JzID0gVGFibGVGaWxsLnBhc3RlKGRvYyk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gVGFibGVUYXJnZXRzLnBhc3RlKGNlbGwsIGVsZW1lbnRzWzBdLCBnZW5lcmF0b3JzKTtcbiAgICAgICAgICAgIGFjdGlvbnMucGFzdGVDZWxscyh0YWJsZSwgdGFyZ2V0cykuZWFjaCgoKSA9PiB7XG4gICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgeyByZWdpc3RlckV2ZW50cyB9O1xuXG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBUYWJsZVJlbmRlciwgVGFibGVDb252ZXJzaW9ucyB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IEF0dHJpYnV0ZSwgSHRtbCwgU2VsZWN0b3JGaWx0ZXIsIFNlbGVjdG9yRmluZCwgdHlwZSBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBFdmVudHMgZnJvbSAnLi4vYXBpL0V2ZW50cyc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVGFibGVVdGlscyc7XG5cbmNvbnN0IHBsYWNlQ2FyZXRJbkNlbGwgPSAoZWRpdG9yOiBFZGl0b3IsIGNlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pOiB2b2lkID0+IHtcbiAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3QoY2VsbC5kb20sIHRydWUpO1xuICBlZGl0b3Iuc2VsZWN0aW9uLmNvbGxhcHNlKHRydWUpO1xufTtcblxuY29uc3Qgc2VsZWN0Rmlyc3RDZWxsSW5UYWJsZSA9IChlZGl0b3I6IEVkaXRvciwgdGFibGVFbG06IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBTZWxlY3RvckZpbmQuZGVzY2VuZGFudDxIVE1MVGFibGVDZWxsRWxlbWVudD4odGFibGVFbG0sICd0ZCx0aCcpLmVhY2goRnVuLmN1cnJ5KHBsYWNlQ2FyZXRJbkNlbGwsIGVkaXRvcikpO1xufTtcblxuY29uc3QgZmlyZUV2ZW50cyA9IChlZGl0b3I6IEVkaXRvciwgdGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBBcnIuZWFjaChTZWxlY3RvckZpbHRlci5kZXNjZW5kYW50czxIVE1MVGFibGVSb3dFbGVtZW50Pih0YWJsZSwgJ3RyJyksIChyb3cpID0+IHtcbiAgICBFdmVudHMuZmlyZU5ld1JvdyhlZGl0b3IsIHJvdy5kb20pO1xuXG4gICAgQXJyLmVhY2goU2VsZWN0b3JGaWx0ZXIuZGVzY2VuZGFudHM8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KHJvdywgJ3RoLHRkJyksIChjZWxsKSA9PiB7XG4gICAgICBFdmVudHMuZmlyZU5ld0NlbGwoZWRpdG9yLCBjZWxsLmRvbSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgaXNQZXJjZW50YWdlID0gKHdpZHRoOiBzdHJpbmcpOiBib29sZWFuID0+XG4gIFR5cGUuaXNTdHJpbmcod2lkdGgpICYmIHdpZHRoLmluZGV4T2YoJyUnKSAhPT0gLTE7XG5cbmNvbnN0IGluc2VydCA9IChlZGl0b3I6IEVkaXRvciwgY29sdW1uczogbnVtYmVyLCByb3dzOiBudW1iZXIsIGNvbEhlYWRlcnM6IG51bWJlciwgcm93SGVhZGVyczogbnVtYmVyKTogSFRNTFRhYmxlRWxlbWVudCB8IG51bGwgPT4ge1xuICBjb25zdCBkZWZhdWx0U3R5bGVzID0gT3B0aW9ucy5nZXRUYWJsZURlZmF1bHRTdHlsZXMoZWRpdG9yKTtcbiAgY29uc3Qgb3B0aW9uczogVGFibGVSZW5kZXIuUmVuZGVyT3B0aW9ucyA9IHtcbiAgICBzdHlsZXM6IGRlZmF1bHRTdHlsZXMsXG4gICAgYXR0cmlidXRlczogT3B0aW9ucy5nZXRUYWJsZURlZmF1bHRBdHRyaWJ1dGVzKGVkaXRvciksXG4gICAgY29sR3JvdXBzOiBPcHRpb25zLnRhYmxlVXNlQ29sdW1uR3JvdXAoZWRpdG9yKVxuICB9O1xuXG4gIC8vIERvbid0IGNyZWF0ZSBhbiB1bmRvIGxldmVsIHdoZW4gaW5zZXJ0aW5nIHRoZSBiYXNlIHRhYmxlIEhUTUwgb3RoZXJ3aXNlIHdlIGNhbiBlbmQgdXAgd2l0aCAyIHVuZG8gbGV2ZWxzXG4gIGVkaXRvci51bmRvTWFuYWdlci5pZ25vcmUoKCkgPT4ge1xuICAgIGNvbnN0IHRhYmxlID0gVGFibGVSZW5kZXIucmVuZGVyKHJvd3MsIGNvbHVtbnMsIHJvd0hlYWRlcnMsIGNvbEhlYWRlcnMsIE9wdGlvbnMuZ2V0VGFibGVIZWFkZXJUeXBlKGVkaXRvciksIG9wdGlvbnMpO1xuICAgIEF0dHJpYnV0ZS5zZXQodGFibGUsICdkYXRhLW1jZS1pZCcsICdfX21jZScpO1xuXG4gICAgY29uc3QgaHRtbCA9IEh0bWwuZ2V0T3V0ZXIodGFibGUpO1xuICAgIGVkaXRvci5pbnNlcnRDb250ZW50KGh0bWwpO1xuICAgIGVkaXRvci5hZGRWaXN1YWwoKTtcbiAgfSk7XG5cbiAgLy8gRW5mb3JjZSB0aGUgc2l6aW5nIG1vZGUgb2YgdGhlIHRhYmxlXG4gIHJldHVybiBTZWxlY3RvckZpbmQuZGVzY2VuZGFudDxIVE1MVGFibGVFbGVtZW50PihVdGlscy5nZXRCb2R5KGVkaXRvciksICd0YWJsZVtkYXRhLW1jZS1pZD1cIl9fbWNlXCJdJykubWFwKCh0YWJsZSkgPT4ge1xuICAgIGlmIChPcHRpb25zLmlzVGFibGVQaXhlbHNGb3JjZWQoZWRpdG9yKSkge1xuICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QaXhlbFNpemVXaWR0aCh0YWJsZSk7XG4gICAgfSBlbHNlIGlmIChPcHRpb25zLmlzVGFibGVSZXNwb25zaXZlRm9yY2VkKGVkaXRvcikpIHtcbiAgICAgIFRhYmxlQ29udmVyc2lvbnMuY29udmVydFRvTm9uZVNpemVXaWR0aCh0YWJsZSk7XG4gICAgfSBlbHNlIGlmIChPcHRpb25zLmlzVGFibGVQZXJjZW50YWdlc0ZvcmNlZChlZGl0b3IpIHx8IGlzUGVyY2VudGFnZShkZWZhdWx0U3R5bGVzLndpZHRoKSkge1xuICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoKHRhYmxlKTtcbiAgICB9XG4gICAgVXRpbHMucmVtb3ZlRGF0YVN0eWxlKHRhYmxlKTtcbiAgICBBdHRyaWJ1dGUucmVtb3ZlKHRhYmxlLCAnZGF0YS1tY2UtaWQnKTtcbiAgICBmaXJlRXZlbnRzKGVkaXRvciwgdGFibGUpO1xuICAgIHNlbGVjdEZpcnN0Q2VsbEluVGFibGUoZWRpdG9yLCB0YWJsZSk7XG4gICAgcmV0dXJuIHRhYmxlLmRvbTtcbiAgfSkuZ2V0T3JOdWxsKCk7XG59O1xuXG5jb25zdCBpbnNlcnRUYWJsZSA9IChlZGl0b3I6IEVkaXRvciwgcm93czogbnVtYmVyLCBjb2x1bW5zOiBudW1iZXIsIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fSk6IEhUTUxUYWJsZUVsZW1lbnQgfCBudWxsID0+IHtcbiAgY29uc3QgY2hlY2tJbnB1dCA9ICh2YWw6IGFueSkgPT4gVHlwZS5pc051bWJlcih2YWwpICYmIHZhbCA+IDA7XG5cbiAgaWYgKGNoZWNrSW5wdXQocm93cykgJiYgY2hlY2tJbnB1dChjb2x1bW5zKSkge1xuICAgIGNvbnN0IGhlYWRlclJvd3MgPSBvcHRpb25zLmhlYWRlclJvd3MgfHwgMDtcbiAgICBjb25zdCBoZWFkZXJDb2x1bW5zID0gb3B0aW9ucy5oZWFkZXJDb2x1bW5zIHx8IDA7XG4gICAgcmV0dXJuIGluc2VydChlZGl0b3IsIGNvbHVtbnMsIHJvd3MsIGhlYWRlckNvbHVtbnMsIGhlYWRlclJvd3MpO1xuICB9IGVsc2Uge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCB2YWx1ZXMgZm9yIG1jZUluc2VydFRhYmxlIC0gcm93cyBhbmQgY29sdW1ucyB2YWx1ZXMgYXJlIHJlcXVpcmVkIHRvIGluc2VydCBhIHRhYmxlLicpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5leHBvcnQge1xuICBpbnNlcnRUYWJsZVxufTtcbiIsImltcG9ydCB7IEFyciwgRnVuLCBPcHRpb25hbCB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21EZXNjZW50IH0gZnJvbSAnQGVwaG94L3Bob2VuaXgnO1xuaW1wb3J0IHtcbiAgQ2VsbE11dGF0aW9ucywgUmVzaXplQmVoYXZpb3VyLCB0eXBlIFJ1bk9wZXJhdGlvbiwgVGFibGVGaWxsLCBUYWJsZUdyaWRTaXplLCBUYWJsZVNlY3Rpb24sIFRhYmxlT3BlcmF0aW9ucywgVGFibGVMb29rdXBcbn0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBTdWdhckJvZHksIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgVGFibGVFdmVudERhdGEgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0V2ZW50VHlwZXMnO1xuXG5pbXBvcnQgKiBhcyBFdmVudHMgZnJvbSAnLi4vYXBpL0V2ZW50cyc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4uL2FwaS9PcHRpb25zJztcbmltcG9ydCB0eXBlIHsgVGFibGVDZWxsU2VsZWN0aW9uSGFuZGxlciB9IGZyb20gJy4uL2FwaS9UYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyJztcbmltcG9ydCB0eXBlIHsgVGFibGVSZXNpemVIYW5kbGVyIH0gZnJvbSAnLi4vYXBpL1RhYmxlUmVzaXplSGFuZGxlcic7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuLi9jb3JlL1RhYmxlVXRpbHMnO1xuaW1wb3J0ICogYXMgVGFibGVTaXplIGZyb20gJy4uL3F1ZXJpZXMvVGFibGVTaXplJztcblxudHlwZSBUYWJsZUFjdGlvbjxUPiA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFQsIG5vRXZlbnRzPzogYm9vbGVhbikgPT4gT3B0aW9uYWw8VGFibGVBY3Rpb25SZXN1bHQ+O1xuZXhwb3J0IGludGVyZmFjZSBUYWJsZUFjdGlvblJlc3VsdCB7XG4gIHJlYWRvbmx5IHJuZzogUmFuZ2U7XG4gIHJlYWRvbmx5IGVmZmVjdDogVGFibGVFdmVudERhdGE7XG59XG5leHBvcnQgdHlwZSBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbiA9IFRhYmxlQWN0aW9uPFJ1bk9wZXJhdGlvbi5Db21iaW5lZFRhcmdldHM+O1xuZXhwb3J0IHR5cGUgUGFzdGVUYWJsZUFjdGlvbiA9IFRhYmxlQWN0aW9uPFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZT47XG5leHBvcnQgdHlwZSBBZHZhbmNlZFBhc3RlVGFibGVBY3Rpb24gPSBUYWJsZUFjdGlvbjxSdW5PcGVyYXRpb24uVGFyZ2V0UGFzdGVSb3dzPjtcbmV4cG9ydCB0eXBlIExvb2t1cEFjdGlvbiA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCB0YXJnZXQ6IFJ1bk9wZXJhdGlvbi5UYXJnZXRTZWxlY3Rpb24pID0+IHN0cmluZztcblxudHlwZSBHdWFyZEZuID0gKHRhYmxlOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlRWxlbWVudD4pID0+IGJvb2xlYW47XG50eXBlIE11dGF0ZUZuID0gKGUxOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PiwgZTI6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ+KSA9PiB2b2lkO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlQWN0aW9ucyB7XG4gIHJlYWRvbmx5IGRlbGV0ZVJvdzogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IGRlbGV0ZUNvbHVtbjogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IGluc2VydFJvd3NCZWZvcmU6IENvbWJpbmVkVGFyZ2V0c1RhYmxlQWN0aW9uO1xuICByZWFkb25seSBpbnNlcnRSb3dzQWZ0ZXI6IENvbWJpbmVkVGFyZ2V0c1RhYmxlQWN0aW9uO1xuICByZWFkb25seSBpbnNlcnRDb2x1bW5zQmVmb3JlOiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgaW5zZXJ0Q29sdW1uc0FmdGVyOiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgbWVyZ2VDZWxsczogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IHVubWVyZ2VDZWxsczogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IHBhc3RlQ2VsbHM6IFBhc3RlVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IHBhc3RlQ29sc0JlZm9yZTogQWR2YW5jZWRQYXN0ZVRhYmxlQWN0aW9uO1xuICByZWFkb25seSBwYXN0ZUNvbHNBZnRlcjogQWR2YW5jZWRQYXN0ZVRhYmxlQWN0aW9uO1xuICByZWFkb25seSBwYXN0ZVJvd3NCZWZvcmU6IEFkdmFuY2VkUGFzdGVUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgcGFzdGVSb3dzQWZ0ZXI6IEFkdmFuY2VkUGFzdGVUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgbWFrZUNlbGxzSGVhZGVyOiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgdW5tYWtlQ2VsbHNIZWFkZXI6IENvbWJpbmVkVGFyZ2V0c1RhYmxlQWN0aW9uO1xuICByZWFkb25seSBtYWtlQ29sdW1uc0hlYWRlcjogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IHVubWFrZUNvbHVtbnNIZWFkZXI6IENvbWJpbmVkVGFyZ2V0c1RhYmxlQWN0aW9uO1xuICByZWFkb25seSBtYWtlUm93c0hlYWRlcjogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IG1ha2VSb3dzQm9keTogQ29tYmluZWRUYXJnZXRzVGFibGVBY3Rpb247XG4gIHJlYWRvbmx5IG1ha2VSb3dzRm9vdGVyOiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbjtcbiAgcmVhZG9ubHkgZ2V0VGFibGVSb3dUeXBlOiBMb29rdXBBY3Rpb247XG4gIHJlYWRvbmx5IGdldFRhYmxlQ2VsbFR5cGU6IExvb2t1cEFjdGlvbjtcbiAgcmVhZG9ubHkgZ2V0VGFibGVDb2xUeXBlOiBMb29rdXBBY3Rpb247XG59XG5cbmV4cG9ydCBjb25zdCBUYWJsZUFjdGlvbnMgPSAoZWRpdG9yOiBFZGl0b3IsIHJlc2l6ZUhhbmRsZXI6IFRhYmxlUmVzaXplSGFuZGxlciwgY2VsbFNlbGVjdGlvbkhhbmRsZXI6IFRhYmxlQ2VsbFNlbGVjdGlvbkhhbmRsZXIpOiBUYWJsZUFjdGlvbnMgPT4ge1xuICBjb25zdCBpc1RhYmxlQm9keSA9IChlZGl0b3I6IEVkaXRvcik6IGJvb2xlYW4gPT5cbiAgICBTdWdhck5vZGUubmFtZShVdGlscy5nZXRCb2R5KGVkaXRvcikpID09PSAndGFibGUnO1xuXG4gIGNvbnN0IGxhc3RSb3dHdWFyZCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogYm9vbGVhbiA9PlxuICAgICFpc1RhYmxlQm9keShlZGl0b3IpIHx8IFRhYmxlR3JpZFNpemUuZ2V0R3JpZFNpemUodGFibGUpLnJvd3MgPiAxO1xuXG4gIGNvbnN0IGxhc3RDb2x1bW5HdWFyZCA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogYm9vbGVhbiA9PlxuICAgICFpc1RhYmxlQm9keShlZGl0b3IpIHx8IFRhYmxlR3JpZFNpemUuZ2V0R3JpZFNpemUodGFibGUpLmNvbHVtbnMgPiAxO1xuXG4gIC8vIE9wdGlvbmFsLm5vbmUgZ2l2ZXMgdGhlIGRlZmF1bHQgY2xvbmVGb3JtYXRzLlxuICBjb25zdCBjbG9uZUZvcm1hdHMgPSBPcHRpb25zLmdldFRhYmxlQ2xvbmVFbGVtZW50cyhlZGl0b3IpO1xuXG4gIGNvbnN0IGNvbE11dGF0aW9uT3AgPSBPcHRpb25zLmlzUmVzaXplVGFibGVDb2x1bW5SZXNpemluZyhlZGl0b3IpID8gRnVuLm5vb3AgOiBDZWxsTXV0YXRpb25zLmhhbHZlO1xuXG4gIGNvbnN0IGdldFRhYmxlU2VjdGlvblR5cGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PikgPT4ge1xuICAgIHN3aXRjaCAoT3B0aW9ucy5nZXRUYWJsZUhlYWRlclR5cGUoZWRpdG9yKSkge1xuICAgICAgY2FzZSAnc2VjdGlvbic6XG4gICAgICAgIHJldHVybiBUYWJsZVNlY3Rpb24uc2VjdGlvbigpO1xuICAgICAgY2FzZSAnc2VjdGlvbkNlbGxzJzpcbiAgICAgICAgcmV0dXJuIFRhYmxlU2VjdGlvbi5zZWN0aW9uQ2VsbHMoKTtcbiAgICAgIGNhc2UgJ2NlbGxzJzpcbiAgICAgICAgcmV0dXJuIFRhYmxlU2VjdGlvbi5jZWxscygpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IGZpbmQgdGhlIHR5cGUuIElmIGEgdHlwZSBjYW4ndCBiZSBmb3VuZFxuICAgICAgICAvLyB0aGVuIGZhbGxiYWNrIHRvIFwic2VjdGlvblwiIHRvIG1haW50YWluIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAgICAgICByZXR1cm4gVGFibGVTZWN0aW9uLmdldFRhYmxlU2VjdGlvblR5cGUodGFibGUsICdzZWN0aW9uJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNldFNlbGVjdGlvbkZyb21BY3Rpb24gPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgcmVzdWx0OiBSdW5PcGVyYXRpb24uUnVuT3BlcmF0aW9uT3V0cHV0KSA9PlxuICAgIHJlc3VsdC5jdXJzb3IuZm9sZCgoKSA9PiB7XG4gICAgICAvLyBTbm9va2VyIGhhcyByZXBvcnRlZCB3ZSBkb24ndCBoYXZlIGEgZ29vZCBjdXJzb3IgcG9zaXRpb24uIEhvd2V2ZXIsIHdlIG1heSBoYXZlIGEgbG9ja2VkIGNvbHVtblxuICAgICAgLy8gd2l0aCBub25lZGl0YWJsZSBjZWxscywgc28gbGV0cyBjaGVjayBpZiB3ZSBoYXZlIGEgbm9uZWRpdGFibGUgY2VsbCBhbmQgaWYgc28gcGxhY2UgdGhlIHNlbGVjdGlvblxuICAgICAgY29uc3QgY2VsbHMgPSBUYWJsZUxvb2t1cC5jZWxscyh0YWJsZSk7XG4gICAgICByZXR1cm4gQXJyLmhlYWQoY2VsbHMpLmZpbHRlcihTdWdhckJvZHkuaW5Cb2R5KS5tYXAoKGZpcnN0Q2VsbCkgPT4ge1xuICAgICAgICBjZWxsU2VsZWN0aW9uSGFuZGxlci5jbGVhclNlbGVjdGVkQ2VsbHModGFibGUuZG9tKTtcbiAgICAgICAgY29uc3Qgcm5nID0gZWRpdG9yLmRvbS5jcmVhdGVSbmcoKTtcbiAgICAgICAgcm5nLnNlbGVjdE5vZGUoZmlyc3RDZWxsLmRvbSk7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24uc2V0Um5nKHJuZyk7XG4gICAgICAgIEF0dHJpYnV0ZS5zZXQoZmlyc3RDZWxsLCAnZGF0YS1tY2Utc2VsZWN0ZWQnLCAnMScpO1xuICAgICAgICByZXR1cm4gcm5nO1xuICAgICAgfSk7XG4gICAgfSwgKGNlbGwpID0+IHtcbiAgICAgIGNvbnN0IGRlcyA9IERvbURlc2NlbnQuZnJlZWZhbGxSdGwoY2VsbCk7XG4gICAgICBjb25zdCBybmcgPSBlZGl0b3IuZG9tLmNyZWF0ZVJuZygpO1xuICAgICAgcm5nLnNldFN0YXJ0KGRlcy5lbGVtZW50LmRvbSwgZGVzLm9mZnNldCk7XG4gICAgICBybmcuc2V0RW5kKGRlcy5lbGVtZW50LmRvbSwgZGVzLm9mZnNldCk7XG4gICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNldFJuZyhybmcpO1xuICAgICAgY2VsbFNlbGVjdGlvbkhhbmRsZXIuY2xlYXJTZWxlY3RlZENlbGxzKHRhYmxlLmRvbSk7XG4gICAgICByZXR1cm4gT3B0aW9uYWwuc29tZShybmcpO1xuICAgIH0pO1xuXG4gIGNvbnN0IGV4ZWN1dGUgPSA8VD4gKG9wZXJhdGlvbjogUnVuT3BlcmF0aW9uLk9wZXJhdGlvbkNhbGxiYWNrPFQ+LCBndWFyZDogR3VhcmRGbiwgbXV0YXRlOiBNdXRhdGVGbiwgZWZmZWN0OiBUYWJsZUV2ZW50RGF0YSkgPT5cbiAgICAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50PiwgdGFyZ2V0OiBULCBub0V2ZW50czogYm9vbGVhbiA9IGZhbHNlKTogT3B0aW9uYWw8VGFibGVBY3Rpb25SZXN1bHQ+ID0+IHtcbiAgICAgIFV0aWxzLnJlbW92ZURhdGFTdHlsZSh0YWJsZSk7XG4gICAgICBjb25zdCBkb2MgPSBTdWdhckVsZW1lbnQuZnJvbURvbShlZGl0b3IuZ2V0RG9jKCkpO1xuICAgICAgY29uc3QgZ2VuZXJhdG9ycyA9IFRhYmxlRmlsbC5jZWxsT3BlcmF0aW9ucyhtdXRhdGUsIGRvYywgY2xvbmVGb3JtYXRzKTtcbiAgICAgIGNvbnN0IGJlaGF2aW91cnM6IFJ1bk9wZXJhdGlvbi5PcGVyYXRpb25CZWhhdmlvdXJzID0ge1xuICAgICAgICBzaXppbmc6IFRhYmxlU2l6ZS5nZXQoZWRpdG9yLCB0YWJsZSksXG4gICAgICAgIHJlc2l6ZTogT3B0aW9ucy5pc1Jlc2l6ZVRhYmxlQ29sdW1uUmVzaXppbmcoZWRpdG9yKSA/IFJlc2l6ZUJlaGF2aW91ci5yZXNpemVUYWJsZSgpIDogUmVzaXplQmVoYXZpb3VyLnByZXNlcnZlVGFibGUoKSxcbiAgICAgICAgc2VjdGlvbjogZ2V0VGFibGVTZWN0aW9uVHlwZSh0YWJsZSlcbiAgICAgIH07XG4gICAgICByZXR1cm4gZ3VhcmQodGFibGUpID8gb3BlcmF0aW9uKHRhYmxlLCB0YXJnZXQsIGdlbmVyYXRvcnMsIGJlaGF2aW91cnMpLmJpbmQoKHJlc3VsdCkgPT4ge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHJlc2l6ZSBiYXJzIGFmdGVyIHRoZSB0YWJsZSBvcGVyYXRpb25cbiAgICAgICAgcmVzaXplSGFuZGxlci5yZWZyZXNoKHRhYmxlLmRvbSk7XG5cbiAgICAgICAgLy8gSU5WRVNUSUdBVEU6IFNob3VsZCBcIm5vRXZlbnRzXCIgcHJldmVudCB0aGVzZSBmcm9tIGZpcmluZyBhcyB3ZWxsP1xuICAgICAgICBBcnIuZWFjaChyZXN1bHQubmV3Um93cywgKHJvdykgPT4ge1xuICAgICAgICAgIEV2ZW50cy5maXJlTmV3Um93KGVkaXRvciwgcm93LmRvbSk7XG4gICAgICAgIH0pO1xuICAgICAgICBBcnIuZWFjaChyZXN1bHQubmV3Q2VsbHMsIChjZWxsKSA9PiB7XG4gICAgICAgICAgRXZlbnRzLmZpcmVOZXdDZWxsKGVkaXRvciwgY2VsbC5kb20pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByYW5nZSA9IHNldFNlbGVjdGlvbkZyb21BY3Rpb24odGFibGUsIHJlc3VsdCk7XG5cbiAgICAgICAgaWYgKFN1Z2FyQm9keS5pbkJvZHkodGFibGUpKSB7XG4gICAgICAgICAgVXRpbHMucmVtb3ZlRGF0YVN0eWxlKHRhYmxlKTtcbiAgICAgICAgICBpZiAoIW5vRXZlbnRzKSB7XG4gICAgICAgICAgICBFdmVudHMuZmlyZVRhYmxlTW9kaWZpZWQoZWRpdG9yLCB0YWJsZS5kb20sIGVmZmVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJhbmdlLm1hcCgocm5nKSA9PiAoe1xuICAgICAgICAgIHJuZyxcbiAgICAgICAgICBlZmZlY3RcbiAgICAgICAgfSkpO1xuICAgICAgfSkgOiBPcHRpb25hbC5ub25lPFRhYmxlQWN0aW9uUmVzdWx0PigpO1xuICAgIH07XG5cbiAgY29uc3QgZGVsZXRlUm93ID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMuZXJhc2VSb3dzLCBsYXN0Um93R3VhcmQsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IGRlbGV0ZUNvbHVtbiA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLmVyYXNlQ29sdW1ucywgbGFzdENvbHVtbkd1YXJkLCBGdW4ubm9vcCwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcblxuICBjb25zdCBpbnNlcnRSb3dzQmVmb3JlID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMuaW5zZXJ0Um93c0JlZm9yZSwgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG5cbiAgY29uc3QgaW5zZXJ0Um93c0FmdGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMuaW5zZXJ0Um93c0FmdGVyLCBGdW4uYWx3YXlzLCBGdW4ubm9vcCwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcblxuICBjb25zdCBpbnNlcnRDb2x1bW5zQmVmb3JlID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMuaW5zZXJ0Q29sdW1uc0JlZm9yZSwgRnVuLmFsd2F5cywgY29sTXV0YXRpb25PcCwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcblxuICBjb25zdCBpbnNlcnRDb2x1bW5zQWZ0ZXIgPSBleGVjdXRlKFRhYmxlT3BlcmF0aW9ucy5pbnNlcnRDb2x1bW5zQWZ0ZXIsIEZ1bi5hbHdheXMsIGNvbE11dGF0aW9uT3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG5cbiAgY29uc3QgbWVyZ2VDZWxscyA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLm1lcmdlQ2VsbHMsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IHVubWVyZ2VDZWxscyA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLnVubWVyZ2VDZWxscywgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG5cbiAgY29uc3QgcGFzdGVDb2xzQmVmb3JlID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMucGFzdGVDb2xzQmVmb3JlLCBGdW4uYWx3YXlzLCBGdW4ubm9vcCwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcblxuICBjb25zdCBwYXN0ZUNvbHNBZnRlciA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLnBhc3RlQ29sc0FmdGVyLCBGdW4uYWx3YXlzLCBGdW4ubm9vcCwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcblxuICBjb25zdCBwYXN0ZVJvd3NCZWZvcmUgPSBleGVjdXRlKFRhYmxlT3BlcmF0aW9ucy5wYXN0ZVJvd3NCZWZvcmUsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IHBhc3RlUm93c0FmdGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMucGFzdGVSb3dzQWZ0ZXIsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IHBhc3RlQ2VsbHMgPSBleGVjdXRlKFRhYmxlT3BlcmF0aW9ucy5wYXN0ZUNlbGxzLCBGdW4uYWx3YXlzLCBGdW4ubm9vcCwgRXZlbnRzLnN0eWxlQW5kU3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IG1ha2VDZWxsc0hlYWRlciA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLm1ha2VDZWxsc0hlYWRlciwgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG4gIGNvbnN0IHVubWFrZUNlbGxzSGVhZGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMudW5tYWtlQ2VsbHNIZWFkZXIsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IG1ha2VDb2x1bW5zSGVhZGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMubWFrZUNvbHVtbnNIZWFkZXIsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuICBjb25zdCB1bm1ha2VDb2x1bW5zSGVhZGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMudW5tYWtlQ29sdW1uc0hlYWRlciwgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG5cbiAgY29uc3QgbWFrZVJvd3NIZWFkZXIgPSBleGVjdXRlKFRhYmxlT3BlcmF0aW9ucy5tYWtlUm93c0hlYWRlciwgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG4gIGNvbnN0IG1ha2VSb3dzQm9keSA9IGV4ZWN1dGUoVGFibGVPcGVyYXRpb25zLm1ha2VSb3dzQm9keSwgRnVuLmFsd2F5cywgRnVuLm5vb3AsIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG4gIGNvbnN0IG1ha2VSb3dzRm9vdGVyID0gZXhlY3V0ZShUYWJsZU9wZXJhdGlvbnMubWFrZVJvd3NGb290ZXIsIEZ1bi5hbHdheXMsIEZ1bi5ub29wLCBFdmVudHMuc3RydWN0dXJlTW9kaWZpZWQpO1xuXG4gIGNvbnN0IGdldFRhYmxlQ2VsbFR5cGUgPSBUYWJsZU9wZXJhdGlvbnMuZ2V0Q2VsbHNUeXBlO1xuICBjb25zdCBnZXRUYWJsZUNvbFR5cGUgPSBUYWJsZU9wZXJhdGlvbnMuZ2V0Q29sdW1uc1R5cGU7XG4gIGNvbnN0IGdldFRhYmxlUm93VHlwZSA9IFRhYmxlT3BlcmF0aW9ucy5nZXRSb3dzVHlwZTtcblxuICByZXR1cm4ge1xuICAgIGRlbGV0ZVJvdyxcbiAgICBkZWxldGVDb2x1bW4sXG4gICAgaW5zZXJ0Um93c0JlZm9yZSxcbiAgICBpbnNlcnRSb3dzQWZ0ZXIsXG4gICAgaW5zZXJ0Q29sdW1uc0JlZm9yZSxcbiAgICBpbnNlcnRDb2x1bW5zQWZ0ZXIsXG4gICAgbWVyZ2VDZWxscyxcbiAgICB1bm1lcmdlQ2VsbHMsXG4gICAgcGFzdGVDb2xzQmVmb3JlLFxuICAgIHBhc3RlQ29sc0FmdGVyLFxuICAgIHBhc3RlUm93c0JlZm9yZSxcbiAgICBwYXN0ZVJvd3NBZnRlcixcbiAgICBwYXN0ZUNlbGxzLFxuICAgIG1ha2VDZWxsc0hlYWRlcixcbiAgICB1bm1ha2VDZWxsc0hlYWRlcixcbiAgICBtYWtlQ29sdW1uc0hlYWRlcixcbiAgICB1bm1ha2VDb2x1bW5zSGVhZGVyLFxuICAgIG1ha2VSb3dzSGVhZGVyLFxuICAgIG1ha2VSb3dzQm9keSxcbiAgICBtYWtlUm93c0Zvb3RlcixcbiAgICBnZXRUYWJsZVJvd1R5cGUsXG4gICAgZ2V0VGFibGVDZWxsVHlwZSxcbiAgICBnZXRUYWJsZUNvbFR5cGVcbiAgfTtcbn07XG4iLCIvKlxuIE5PVEU6IFRoaXMgZmlsZSBpcyBkdXBsaWNhdGVkIGluIHRoZSBmb2xsb3dpbmcgbG9jYXRpb25zOlxuICAtIHBsdWdpbnMvdGFibGUvYXBpL0NsaXBib2FyZC50c1xuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgeyBBcnIsIE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IEZha2VDbGlwYm9hcmQgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9GYWtlQ2xpcGJvYXJkJztcblxudHlwZSBSb3dFbGVtZW50ID0gSFRNTFRhYmxlUm93RWxlbWVudCB8IEhUTUxUYWJsZUNvbEVsZW1lbnQ7XG5cbmNvbnN0IHRhYmxlVHlwZUJhc2UgPSAneC10aW55bWNlL2RvbS10YWJsZS0nO1xuY29uc3QgdGFibGVUeXBlUm93ID0gdGFibGVUeXBlQmFzZSArICdyb3dzJztcbmNvbnN0IHRhYmxlVHlwZUNvbHVtbiA9IHRhYmxlVHlwZUJhc2UgKyAnY29sdW1ucyc7XG5cbmNvbnN0IHNldERhdGEgPSAoaXRlbXM6IFJlY29yZDxzdHJpbmcsIFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdPikgPT4ge1xuICBjb25zdCBmYWtlQ2xpcGJvYXJkSXRlbSA9IEZha2VDbGlwYm9hcmQuRmFrZUNsaXBib2FyZEl0ZW0oaXRlbXMpO1xuICBGYWtlQ2xpcGJvYXJkLndyaXRlKFsgZmFrZUNsaXBib2FyZEl0ZW0gXSk7XG59O1xuXG5jb25zdCBnZXREYXRhID0gPFQ+KHR5cGU6IHN0cmluZyk6IE9wdGlvbmFsPFRbXT4gPT4ge1xuICBjb25zdCBpdGVtcyA9IEZha2VDbGlwYm9hcmQucmVhZCgpID8/IFtdO1xuICByZXR1cm4gQXJyLmZpbmRNYXAoaXRlbXMsIChpdGVtKSA9PiBPcHRpb25hbC5mcm9tKGl0ZW0uZ2V0VHlwZTxUW10+KHR5cGUpKSk7XG59O1xuXG5jb25zdCBjbGVhckRhdGEgPSAodHlwZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGlmIChnZXREYXRhKHR5cGUpLmlzU29tZSgpKSB7XG4gICAgRmFrZUNsaXBib2FyZC5jbGVhcigpO1xuICB9XG59O1xuXG5jb25zdCBzZXRSb3dzID0gKHJvd3NPcHQ6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxSb3dFbGVtZW50PltdPik6IHZvaWQgPT4ge1xuICByb3dzT3B0LmZvbGQoXG4gICAgY2xlYXJSb3dzLFxuICAgIChyb3dzKSA9PiBzZXREYXRhKHsgW3RhYmxlVHlwZVJvd106IHJvd3MgfSlcbiAgKTtcbn07XG5cbmNvbnN0IGdldFJvd3MgPSAoKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+W10+ID0+XG4gIGdldERhdGEodGFibGVUeXBlUm93KTtcblxuY29uc3QgY2xlYXJSb3dzID0gKCk6IHZvaWQgPT5cbiAgY2xlYXJEYXRhKHRhYmxlVHlwZVJvdyk7XG5cbmNvbnN0IHNldENvbHVtbnMgPSAoY29sdW1uc09wdDogT3B0aW9uYWw8U3VnYXJFbGVtZW50PFJvd0VsZW1lbnQ+W10+KTogdm9pZCA9PiB7XG4gIGNvbHVtbnNPcHQuZm9sZChcbiAgICBjbGVhckNvbHVtbnMsXG4gICAgKGNvbHVtbnMpID0+IHNldERhdGEoeyBbdGFibGVUeXBlQ29sdW1uXTogY29sdW1ucyB9KVxuICApO1xufTtcblxuY29uc3QgZ2V0Q29sdW1ucyA9ICgpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8Um93RWxlbWVudD5bXT4gPT5cbiAgZ2V0RGF0YSh0YWJsZVR5cGVDb2x1bW4pO1xuXG5jb25zdCBjbGVhckNvbHVtbnMgPSAoKTogdm9pZCA9PlxuICBjbGVhckRhdGEodGFibGVUeXBlQ29sdW1uKTtcblxuZXhwb3J0IHtcbiAgc2V0Um93cyxcbiAgZ2V0Um93cyxcbiAgY2xlYXJSb3dzLFxuICBzZXRDb2x1bW5zLFxuICBnZXRDb2x1bW5zLFxuICBjbGVhckNvbHVtbnNcbn07XG4iLCJpbXBvcnQgeyBBcnIsIEZ1biwgT2JqLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBDb3B5Q29scywgQ29weVJvd3MsIFNpemVzLCBUYWJsZUZpbGwsIFRhYmxlTG9va3VwLCBUYWJsZUNvbnZlcnNpb25zIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgSW5zZXJ0LCBSZW1vdmUsIFJlcGxpY2F0aW9uLCBTZWxlY3RvckZpbmQsIFNlbGVjdG9ycywgU3VnYXJFbGVtZW50LCBTdWdhck5vZGUgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgdHlwZSBFZGl0b3IgZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FZGl0b3InO1xuXG5pbXBvcnQgKiBhcyBJbnNlcnRUYWJsZSBmcm9tICcuLi9hY3Rpb25zL0luc2VydFRhYmxlJztcbmltcG9ydCB0eXBlIHsgQWR2YW5jZWRQYXN0ZVRhYmxlQWN0aW9uLCBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbiwgVGFibGVBY3Rpb25SZXN1bHQsIFRhYmxlQWN0aW9ucyB9IGZyb20gJy4uL2FjdGlvbnMvVGFibGVBY3Rpb25zJztcbmltcG9ydCAqIGFzIEV2ZW50cyBmcm9tICcuLi9hcGkvRXZlbnRzJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVGFibGVVdGlscyc7XG5pbXBvcnQgKiBhcyBUYWJsZVRhcmdldHMgZnJvbSAnLi4vcXVlcmllcy9UYWJsZVRhcmdldHMnO1xuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uJztcblxuaW1wb3J0ICogYXMgRmFrZUNsaXBib2FyZCBmcm9tICcuL0NsaXBib2FyZCc7XG5pbXBvcnQgKiBhcyBPcHRpb25zIGZyb20gJy4vT3B0aW9ucyc7XG5cbnR5cGUgRXhlY3V0ZUFjdGlvbjxUPiA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBzdGFydENlbGw6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IFQ7XG5cbmludGVyZmFjZSBJbnNlcnRUYWJsZUFyZ3Mge1xuICByZWFkb25seSByb3dzOiBudW1iZXI7XG4gIHJlYWRvbmx5IGNvbHVtbnM6IG51bWJlcjtcbiAgcmVhZG9ubHkgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmNvbnN0IGdldFNlbGVjdGlvblN0YXJ0Q2VsbE9yQ2FwdGlvbiA9IChlZGl0b3I6IEVkaXRvcik6IE9wdGlvbmFsPFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudCB8IEhUTUxUYWJsZUNhcHRpb25FbGVtZW50Pj4gPT5cbiAgVGFibGVTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uQ2VsbE9yQ2FwdGlvbihVdGlscy5nZXRTZWxlY3Rpb25TdGFydChlZGl0b3IpLCBVdGlscy5nZXRJc1Jvb3QoZWRpdG9yKSkuZmlsdGVyKFV0aWxzLmlzSW5FZGl0YWJsZUNvbnRleHQpO1xuXG5jb25zdCBnZXRTZWxlY3Rpb25TdGFydENlbGwgPSAoZWRpdG9yOiBFZGl0b3IpOiBPcHRpb25hbDxTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+PiA9PlxuICBUYWJsZVNlbGVjdGlvbi5nZXRTZWxlY3Rpb25DZWxsKFV0aWxzLmdldFNlbGVjdGlvblN0YXJ0KGVkaXRvciksIFV0aWxzLmdldElzUm9vdChlZGl0b3IpKS5maWx0ZXIoVXRpbHMuaXNJbkVkaXRhYmxlQ29udGV4dCk7XG5cbmNvbnN0IHJlZ2lzdGVyQ29tbWFuZHMgPSAoZWRpdG9yOiBFZGl0b3IsIGFjdGlvbnM6IFRhYmxlQWN0aW9ucyk6IHZvaWQgPT4ge1xuICBjb25zdCBpc1Jvb3QgPSBVdGlscy5nZXRJc1Jvb3QoZWRpdG9yKTtcbiAgY29uc3QgZXJhc2VUYWJsZSA9ICgpID0+IGdldFNlbGVjdGlvblN0YXJ0Q2VsbE9yQ2FwdGlvbihlZGl0b3IpLmVhY2goKGNlbGxPckNhcHRpb24pID0+IHtcbiAgICBUYWJsZUxvb2t1cC50YWJsZShjZWxsT3JDYXB0aW9uLCBpc1Jvb3QpLmZpbHRlcihGdW4ubm90KGlzUm9vdCkpLmVhY2goKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCBjdXJzb3IgPSBTdWdhckVsZW1lbnQuZnJvbVRleHQoJycpO1xuICAgICAgSW5zZXJ0LmFmdGVyKHRhYmxlLCBjdXJzb3IpO1xuICAgICAgUmVtb3ZlLnJlbW92ZSh0YWJsZSk7XG5cbiAgICAgIGlmIChlZGl0b3IuZG9tLmlzRW1wdHkoZWRpdG9yLmdldEJvZHkoKSkpIHtcbiAgICAgICAgZWRpdG9yLnNldENvbnRlbnQoJycpO1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNldEN1cnNvckxvY2F0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBybmcgPSBlZGl0b3IuZG9tLmNyZWF0ZVJuZygpO1xuICAgICAgICBybmcuc2V0U3RhcnQoY3Vyc29yLmRvbSwgMCk7XG4gICAgICAgIHJuZy5zZXRFbmQoY3Vyc29yLmRvbSwgMCk7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24uc2V0Um5nKHJuZyk7XG4gICAgICAgIGVkaXRvci5ub2RlQ2hhbmdlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBzZXRTaXppbmdNb2RlID0gKHNpemluZzogc3RyaW5nKSA9PiBnZXRTZWxlY3Rpb25TdGFydENlbGxPckNhcHRpb24oZWRpdG9yKS5lYWNoKChjZWxsT3JDYXB0aW9uKSA9PiB7XG4gICAgLy8gRG8gbm90aGluZyBpZiB0YWJsZXMgYXJlIGZvcmNlZCB0byB1c2UgYSBzcGVjaWZpYyBzaXppbmcgbW9kZVxuICAgIGNvbnN0IGlzRm9yY2VkU2l6aW5nID0gT3B0aW9ucy5pc1RhYmxlUmVzcG9uc2l2ZUZvcmNlZChlZGl0b3IpIHx8IE9wdGlvbnMuaXNUYWJsZVBpeGVsc0ZvcmNlZChlZGl0b3IpIHx8IE9wdGlvbnMuaXNUYWJsZVBlcmNlbnRhZ2VzRm9yY2VkKGVkaXRvcik7XG4gICAgaWYgKCFpc0ZvcmNlZFNpemluZykge1xuICAgICAgVGFibGVMb29rdXAudGFibGUoY2VsbE9yQ2FwdGlvbiwgaXNSb290KS5lYWNoKCh0YWJsZSkgPT4ge1xuICAgICAgICBpZiAoc2l6aW5nID09PSAncmVsYXRpdmUnICYmICFTaXplcy5pc1BlcmNlbnRTaXppbmcodGFibGUpKSB7XG4gICAgICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoKHRhYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaXppbmcgPT09ICdmaXhlZCcgJiYgIVNpemVzLmlzUGl4ZWxTaXppbmcodGFibGUpKSB7XG4gICAgICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QaXhlbFNpemVXaWR0aCh0YWJsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2l6aW5nID09PSAncmVzcG9uc2l2ZScgJiYgIVNpemVzLmlzTm9uZVNpemluZyh0YWJsZSkpIHtcbiAgICAgICAgICBUYWJsZUNvbnZlcnNpb25zLmNvbnZlcnRUb05vbmVTaXplV2lkdGgodGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIFV0aWxzLnJlbW92ZURhdGFTdHlsZSh0YWJsZSk7XG4gICAgICAgIEV2ZW50cy5maXJlVGFibGVNb2RpZmllZChlZGl0b3IsIHRhYmxlLmRvbSwgRXZlbnRzLnN0cnVjdHVyZU1vZGlmaWVkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgZ2V0VGFibGVGcm9tQ2VsbCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KSA9PiBUYWJsZUxvb2t1cC50YWJsZShjZWxsLCBpc1Jvb3QpO1xuXG4gIGNvbnN0IHBlcmZvcm1BY3Rpb25PblNlbGVjdGlvbiA9IDxUPihhY3Rpb246IEV4ZWN1dGVBY3Rpb248VD4pOiBPcHRpb25hbDxUPiA9PlxuICAgIGdldFNlbGVjdGlvblN0YXJ0Q2VsbChlZGl0b3IpLmJpbmQoKGNlbGwpID0+XG4gICAgICBnZXRUYWJsZUZyb21DZWxsKGNlbGwpLm1hcCgodGFibGUpID0+IGFjdGlvbih0YWJsZSwgY2VsbCkpXG4gICAgKTtcblxuICBjb25zdCB0b2dnbGVUYWJsZUNsYXNzID0gKF91aTogYm9vbGVhbiwgY2xheno6IHN0cmluZykgPT4ge1xuICAgIHBlcmZvcm1BY3Rpb25PblNlbGVjdGlvbigodGFibGUpID0+IHtcbiAgICAgIGVkaXRvci5mb3JtYXR0ZXIudG9nZ2xlKCd0YWJsZWNsYXNzJywgeyB2YWx1ZTogY2xhenogfSwgdGFibGUuZG9tKTtcbiAgICAgIEV2ZW50cy5maXJlVGFibGVNb2RpZmllZChlZGl0b3IsIHRhYmxlLmRvbSwgRXZlbnRzLnN0eWxlTW9kaWZpZWQpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVRhYmxlQ2VsbENsYXNzID0gKF91aTogYm9vbGVhbiwgY2xheno6IHN0cmluZykgPT4ge1xuICAgIHBlcmZvcm1BY3Rpb25PblNlbGVjdGlvbigodGFibGUpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkQ2VsbHMgPSBUYWJsZVNlbGVjdGlvbi5nZXRDZWxsc0Zyb21TZWxlY3Rpb24oZWRpdG9yKTtcbiAgICAgIGNvbnN0IGFsbEhhdmVDbGFzcyA9IEFyci5mb3JhbGwoc2VsZWN0ZWRDZWxscywgKGNlbGwpID0+IGVkaXRvci5mb3JtYXR0ZXIubWF0Y2goJ3RhYmxlY2VsbGNsYXNzJywgeyB2YWx1ZTogY2xhenogfSwgY2VsbC5kb20pKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlckFjdGlvbiA9IGFsbEhhdmVDbGFzcyA/IGVkaXRvci5mb3JtYXR0ZXIucmVtb3ZlIDogZWRpdG9yLmZvcm1hdHRlci5hcHBseTtcblxuICAgICAgQXJyLmVhY2goc2VsZWN0ZWRDZWxscywgKGNlbGwpID0+XG4gICAgICAgIGZvcm1hdHRlckFjdGlvbigndGFibGVjZWxsY2xhc3MnLCB7IHZhbHVlOiBjbGF6eiB9LCBjZWxsLmRvbSlcbiAgICAgICk7XG4gICAgICBFdmVudHMuZmlyZVRhYmxlTW9kaWZpZWQoZWRpdG9yLCB0YWJsZS5kb20sIEV2ZW50cy5zdHlsZU1vZGlmaWVkKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB0b2dnbGVDYXB0aW9uID0gKCkgPT4ge1xuICAgIGdldFNlbGVjdGlvblN0YXJ0Q2VsbE9yQ2FwdGlvbihlZGl0b3IpLmVhY2goKGNlbGxPckNhcHRpb24pID0+IHtcbiAgICAgIFRhYmxlTG9va3VwLnRhYmxlKGNlbGxPckNhcHRpb24sIGlzUm9vdCkuZWFjaCgodGFibGUpID0+IHtcbiAgICAgICAgU2VsZWN0b3JGaW5kLmNoaWxkKHRhYmxlLCAnY2FwdGlvbicpLmZvbGQoXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FwdGlvbiA9IFN1Z2FyRWxlbWVudC5mcm9tVGFnKCdjYXB0aW9uJyk7XG4gICAgICAgICAgICBJbnNlcnQuYXBwZW5kKGNhcHRpb24sIFN1Z2FyRWxlbWVudC5mcm9tVGV4dCgnQ2FwdGlvbicpKTtcbiAgICAgICAgICAgIEluc2VydC5hcHBlbmRBdCh0YWJsZSwgY2FwdGlvbiwgMCk7XG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNldEN1cnNvckxvY2F0aW9uKGNhcHRpb24uZG9tLCAwKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChjYXB0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoU3VnYXJOb2RlLmlzVGFnKCdjYXB0aW9uJykoY2VsbE9yQ2FwdGlvbikpIHtcbiAgICAgICAgICAgICAgU2VsZWN0b3JzLm9uZSgndGQnLCB0YWJsZSkuZWFjaCgodGQpID0+XG4gICAgICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZXRDdXJzb3JMb2NhdGlvbih0ZC5kb20sIDApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSZW1vdmUucmVtb3ZlKGNhcHRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBFdmVudHMuZmlyZVRhYmxlTW9kaWZpZWQoZWRpdG9yLCB0YWJsZS5kb20sIEV2ZW50cy5zdHJ1Y3R1cmVNb2RpZmllZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBwb3N0RXhlY3V0ZSA9IChfZGF0YTogVGFibGVBY3Rpb25SZXN1bHQpOiB2b2lkID0+IHtcbiAgICBlZGl0b3IuZm9jdXMoKTtcbiAgfTtcblxuICBjb25zdCBhY3RPblNlbGVjdGlvbiA9IChleGVjdXRlOiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbiwgbm9FdmVudHM6IGJvb2xlYW4gPSBmYWxzZSkgPT5cbiAgICBwZXJmb3JtQWN0aW9uT25TZWxlY3Rpb24oKHRhYmxlLCBzdGFydENlbGwpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldHMgPSBUYWJsZVRhcmdldHMuZm9yTWVudShUYWJsZVNlbGVjdGlvbi5nZXRDZWxsc0Zyb21TZWxlY3Rpb24oZWRpdG9yKSwgdGFibGUsIHN0YXJ0Q2VsbCk7XG4gICAgICBleGVjdXRlKHRhYmxlLCB0YXJnZXRzLCBub0V2ZW50cykuZWFjaChwb3N0RXhlY3V0ZSk7XG4gICAgfSk7XG5cbiAgY29uc3QgY29weVJvd1NlbGVjdGlvbiA9ICgpID0+XG4gICAgcGVyZm9ybUFjdGlvbk9uU2VsZWN0aW9uKCh0YWJsZSwgc3RhcnRDZWxsKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRzID0gVGFibGVUYXJnZXRzLmZvck1lbnUoVGFibGVTZWxlY3Rpb24uZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvciksIHRhYmxlLCBzdGFydENlbGwpO1xuICAgICAgY29uc3QgZ2VuZXJhdG9ycyA9IFRhYmxlRmlsbC5jZWxsT3BlcmF0aW9ucyhGdW4ubm9vcCwgU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLmdldERvYygpKSwgT3B0aW9uYWwubm9uZSgpKTtcbiAgICAgIHJldHVybiBDb3B5Um93cy5jb3B5Um93cyh0YWJsZSwgdGFyZ2V0cywgZ2VuZXJhdG9ycyk7XG4gICAgfSk7XG5cbiAgY29uc3QgY29weUNvbFNlbGVjdGlvbiA9ICgpID0+XG4gICAgcGVyZm9ybUFjdGlvbk9uU2VsZWN0aW9uKCh0YWJsZSwgc3RhcnRDZWxsKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRzID0gVGFibGVUYXJnZXRzLmZvck1lbnUoVGFibGVTZWxlY3Rpb24uZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvciksIHRhYmxlLCBzdGFydENlbGwpO1xuICAgICAgcmV0dXJuIENvcHlDb2xzLmNvcHlDb2xzKHRhYmxlLCB0YXJnZXRzKTtcbiAgICB9KTtcblxuICBjb25zdCBwYXN0ZU9uU2VsZWN0aW9uID0gKGV4ZWN1dGU6IEFkdmFuY2VkUGFzdGVUYWJsZUFjdGlvbiwgZ2V0Um93czogKCkgPT4gT3B0aW9uYWw8U3VnYXJFbGVtZW50PEhUTUxUYWJsZVJvd0VsZW1lbnQgfCBIVE1MVGFibGVDb2xFbGVtZW50PltdPikgPT5cbiAgICAvLyBJZiB3ZSBoYXZlIEZha2VDbGlwYm9hcmQgcm93cyB0byBwYXN0ZVxuICAgIGdldFJvd3MoKS5lYWNoKChyb3dzKSA9PiB7XG4gICAgICBjb25zdCBjbG9uZWRSb3dzID0gQXJyLm1hcChyb3dzLCAocm93KSA9PiBSZXBsaWNhdGlvbi5kZWVwPEhUTUxUYWJsZUNvbEVsZW1lbnQgfCBIVE1MVGFibGVSb3dFbGVtZW50Pihyb3cpKTtcbiAgICAgIHBlcmZvcm1BY3Rpb25PblNlbGVjdGlvbigodGFibGUsIHN0YXJ0Q2VsbCkgPT4ge1xuICAgICAgICBjb25zdCBnZW5lcmF0b3JzID0gVGFibGVGaWxsLnBhc3RlKFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5nZXREb2MoKSkpO1xuICAgICAgICBjb25zdCB0YXJnZXRzID0gVGFibGVUYXJnZXRzLnBhc3RlUm93cyhUYWJsZVNlbGVjdGlvbi5nZXRDZWxsc0Zyb21TZWxlY3Rpb24oZWRpdG9yKSwgc3RhcnRDZWxsLCBjbG9uZWRSb3dzLCBnZW5lcmF0b3JzKTtcbiAgICAgICAgZXhlY3V0ZSh0YWJsZSwgdGFyZ2V0cykuZWFjaChwb3N0RXhlY3V0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICBjb25zdCBhY3RPblR5cGUgPSAoZ2V0QWN0aW9uOiAodHlwZTogc3RyaW5nKSA9PiBDb21iaW5lZFRhcmdldHNUYWJsZUFjdGlvbikgPT4gKF91aTogYm9vbGVhbiwgYXJnczogUmVjb3JkPHN0cmluZywgYW55PikgPT5cbiAgICBPYmouZ2V0KGFyZ3MsICd0eXBlJykuZWFjaCgodHlwZSkgPT4ge1xuICAgICAgYWN0T25TZWxlY3Rpb24oZ2V0QWN0aW9uKHR5cGUpLCBhcmdzLm5vX2V2ZW50cyk7XG4gICAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgYWN0aW9uIGNvbW1hbmRzXG4gIE9iai5lYWNoKHtcbiAgICBtY2VUYWJsZVNwbGl0Q2VsbHM6ICgpID0+IGFjdE9uU2VsZWN0aW9uKGFjdGlvbnMudW5tZXJnZUNlbGxzKSxcbiAgICBtY2VUYWJsZU1lcmdlQ2VsbHM6ICgpID0+IGFjdE9uU2VsZWN0aW9uKGFjdGlvbnMubWVyZ2VDZWxscyksXG4gICAgbWNlVGFibGVJbnNlcnRSb3dCZWZvcmU6ICgpID0+IGFjdE9uU2VsZWN0aW9uKGFjdGlvbnMuaW5zZXJ0Um93c0JlZm9yZSksXG4gICAgbWNlVGFibGVJbnNlcnRSb3dBZnRlcjogKCkgPT4gYWN0T25TZWxlY3Rpb24oYWN0aW9ucy5pbnNlcnRSb3dzQWZ0ZXIpLFxuICAgIG1jZVRhYmxlSW5zZXJ0Q29sQmVmb3JlOiAoKSA9PiBhY3RPblNlbGVjdGlvbihhY3Rpb25zLmluc2VydENvbHVtbnNCZWZvcmUpLFxuICAgIG1jZVRhYmxlSW5zZXJ0Q29sQWZ0ZXI6ICgpID0+IGFjdE9uU2VsZWN0aW9uKGFjdGlvbnMuaW5zZXJ0Q29sdW1uc0FmdGVyKSxcbiAgICBtY2VUYWJsZURlbGV0ZUNvbDogKCkgPT4gYWN0T25TZWxlY3Rpb24oYWN0aW9ucy5kZWxldGVDb2x1bW4pLFxuICAgIG1jZVRhYmxlRGVsZXRlUm93OiAoKSA9PiBhY3RPblNlbGVjdGlvbihhY3Rpb25zLmRlbGV0ZVJvdyksXG4gICAgbWNlVGFibGVDdXRDb2w6ICgpID0+IGNvcHlDb2xTZWxlY3Rpb24oKS5lYWNoKChzZWxlY3Rpb24pID0+IHtcbiAgICAgIEZha2VDbGlwYm9hcmQuc2V0Q29sdW1ucyhzZWxlY3Rpb24pO1xuICAgICAgYWN0T25TZWxlY3Rpb24oYWN0aW9ucy5kZWxldGVDb2x1bW4pO1xuICAgIH0pLFxuICAgIG1jZVRhYmxlQ3V0Um93OiAoKSA9PiBjb3B5Um93U2VsZWN0aW9uKCkuZWFjaCgoc2VsZWN0aW9uKSA9PiB7XG4gICAgICBGYWtlQ2xpcGJvYXJkLnNldFJvd3Moc2VsZWN0aW9uKTtcbiAgICAgIGFjdE9uU2VsZWN0aW9uKGFjdGlvbnMuZGVsZXRlUm93KTtcbiAgICB9KSxcbiAgICBtY2VUYWJsZUNvcHlDb2w6ICgpID0+IGNvcHlDb2xTZWxlY3Rpb24oKS5lYWNoKChzZWxlY3Rpb24pID0+IEZha2VDbGlwYm9hcmQuc2V0Q29sdW1ucyhzZWxlY3Rpb24pKSxcbiAgICBtY2VUYWJsZUNvcHlSb3c6ICgpID0+IGNvcHlSb3dTZWxlY3Rpb24oKS5lYWNoKChzZWxlY3Rpb24pID0+IEZha2VDbGlwYm9hcmQuc2V0Um93cyhzZWxlY3Rpb24pKSxcbiAgICBtY2VUYWJsZVBhc3RlQ29sQmVmb3JlOiAoKSA9PiBwYXN0ZU9uU2VsZWN0aW9uKGFjdGlvbnMucGFzdGVDb2xzQmVmb3JlLCBGYWtlQ2xpcGJvYXJkLmdldENvbHVtbnMpLFxuICAgIG1jZVRhYmxlUGFzdGVDb2xBZnRlcjogKCkgPT4gcGFzdGVPblNlbGVjdGlvbihhY3Rpb25zLnBhc3RlQ29sc0FmdGVyLCBGYWtlQ2xpcGJvYXJkLmdldENvbHVtbnMpLFxuICAgIG1jZVRhYmxlUGFzdGVSb3dCZWZvcmU6ICgpID0+IHBhc3RlT25TZWxlY3Rpb24oYWN0aW9ucy5wYXN0ZVJvd3NCZWZvcmUsIEZha2VDbGlwYm9hcmQuZ2V0Um93cyksXG4gICAgbWNlVGFibGVQYXN0ZVJvd0FmdGVyOiAoKSA9PiBwYXN0ZU9uU2VsZWN0aW9uKGFjdGlvbnMucGFzdGVSb3dzQWZ0ZXIsIEZha2VDbGlwYm9hcmQuZ2V0Um93cyksXG4gICAgbWNlVGFibGVEZWxldGU6IGVyYXNlVGFibGUsXG4gICAgbWNlVGFibGVDZWxsVG9nZ2xlQ2xhc3M6IHRvZ2dsZVRhYmxlQ2VsbENsYXNzLFxuICAgIG1jZVRhYmxlVG9nZ2xlQ2xhc3M6IHRvZ2dsZVRhYmxlQ2xhc3MsXG4gICAgbWNlVGFibGVUb2dnbGVDYXB0aW9uOiB0b2dnbGVDYXB0aW9uLFxuICAgIG1jZVRhYmxlU2l6aW5nTW9kZTogKF91aTogYm9vbGVhbiwgc2l6aW5nOiBzdHJpbmcpID0+IHNldFNpemluZ01vZGUoc2l6aW5nKSxcbiAgICBtY2VUYWJsZUNlbGxUeXBlOiBhY3RPblR5cGUoKHR5cGUpID0+IHR5cGUgPT09ICd0aCcgPyBhY3Rpb25zLm1ha2VDZWxsc0hlYWRlciA6IGFjdGlvbnMudW5tYWtlQ2VsbHNIZWFkZXIpLFxuICAgIG1jZVRhYmxlQ29sVHlwZTogYWN0T25UeXBlKCh0eXBlKSA9PiB0eXBlID09PSAndGgnID8gYWN0aW9ucy5tYWtlQ29sdW1uc0hlYWRlciA6IGFjdGlvbnMudW5tYWtlQ29sdW1uc0hlYWRlciksXG4gICAgbWNlVGFibGVSb3dUeXBlOiBhY3RPblR5cGUoKHR5cGUpID0+IHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgICAgIHJldHVybiBhY3Rpb25zLm1ha2VSb3dzSGVhZGVyO1xuICAgICAgICBjYXNlICdmb290ZXInOlxuICAgICAgICAgIHJldHVybiBhY3Rpb25zLm1ha2VSb3dzRm9vdGVyO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBhY3Rpb25zLm1ha2VSb3dzQm9keTtcbiAgICAgIH1cbiAgICB9KVxuICB9LCAoZnVuYywgbmFtZSkgPT4gZWRpdG9yLmFkZENvbW1hbmQobmFtZSwgZnVuYykpO1xuXG4gIGVkaXRvci5hZGRDb21tYW5kKCdtY2VJbnNlcnRUYWJsZScsIChfdWk6IGJvb2xlYW4sIGFyZ3M6IEluc2VydFRhYmxlQXJncykgPT4ge1xuICAgIEluc2VydFRhYmxlLmluc2VydFRhYmxlKGVkaXRvciwgYXJncy5yb3dzLCBhcmdzLmNvbHVtbnMsIGFyZ3Mub3B0aW9ucyk7XG4gIH0pO1xuXG4gIC8vIEFwcGx5IGNlbGwgc3R5bGUgdXNpbmcgY29tbWFuZCAoYmFja2dyb3VuZCBjb2xvciwgYm9yZGVyIGNvbG9yLCBib3JkZXIgc3R5bGUgYW5kIGJvcmRlciB3aWR0aClcbiAgLy8gdGlueU1DRS5hY3RpdmVFZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQXBwbHlDZWxsU3R5bGUnLCBmYWxzZSwgeyBiYWNrZ3JvdW5kQ29sb3I6ICdyZWQnLCBib3JkZXJDb2xvcjogJ2JsdWUnIH0pXG4gIC8vIFJlbW92ZSBjZWxsIHN0eWxlIHVzaW5nIGNvbW1hbmQgKGFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdG8gcmVtb3ZlIHRoZSBzdHlsZSlcbiAgLy8gdGlueU1DRS5hY3RpdmVFZGl0b3IuZXhlY0NvbW1hbmQoJ21jZVRhYmxlQXBwbHlDZWxsU3R5bGUnLCBmYWxzZSwgeyBiYWNrZ3JvdW5kQ29sb3I6ICcnIH0pXG4gIGVkaXRvci5hZGRDb21tYW5kKCdtY2VUYWJsZUFwcGx5Q2VsbFN0eWxlJywgKF91aTogYm9vbGVhbiwgYXJnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikgPT4ge1xuICAgIGNvbnN0IGdldEZvcm1hdE5hbWUgPSAoc3R5bGU6IHN0cmluZykgPT4gJ3RhYmxlY2VsbCcgKyBzdHlsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJy0nLCAnJyk7XG5cbiAgICBpZiAoIVR5cGUuaXNPYmplY3QoYXJncykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2VsbHMgPSBBcnIuZmlsdGVyKFRhYmxlU2VsZWN0aW9uLmdldENlbGxzRnJvbVNlbGVjdGlvbihlZGl0b3IpLCBVdGlscy5pc0luRWRpdGFibGVDb250ZXh0KTtcbiAgICBpZiAoY2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRBcmdzID0gT2JqLmZpbHRlcihhcmdzLCAodmFsdWUsIHN0eWxlKSA9PlxuICAgICAgZWRpdG9yLmZvcm1hdHRlci5oYXMoZ2V0Rm9ybWF0TmFtZShzdHlsZSkpICYmIFR5cGUuaXNTdHJpbmcodmFsdWUpXG4gICAgKTtcbiAgICBpZiAoT2JqLmlzRW1wdHkodmFsaWRBcmdzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIE9iai5lYWNoKHZhbGlkQXJncywgKHZhbHVlLCBzdHlsZSkgPT4ge1xuICAgICAgY29uc3QgZm9ybWF0TmFtZSA9IGdldEZvcm1hdE5hbWUoc3R5bGUpO1xuXG4gICAgICBBcnIuZWFjaChjZWxscywgKGNlbGwpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgIGVkaXRvci5mb3JtYXR0ZXIucmVtb3ZlKGZvcm1hdE5hbWUsIHsgdmFsdWU6IG51bGwgfSwgY2VsbC5kb20sIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVkaXRvci5mb3JtYXR0ZXIuYXBwbHkoZm9ybWF0TmFtZSwgeyB2YWx1ZSB9LCBjZWxsLmRvbSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLypcbiAgICAgIFVzZSB0aGUgZmlyc3QgY2VsbCBpbiB0aGUgc2VsZWN0aW9uIHRvIGdldCB0aGUgdGFibGUgYW5kIGZpcmUgdGhlIFRhYmxlTW9kaWZpZWQgZXZlbnQuXG4gICAgICBJZiB0aGlzIGNvbW1hbmQgaXMgYXBwbGllZCBvdmVyIG11bHRpcGxlIHRhYmxlcywgb25seSB0aGUgZmlyc3QgdGFibGUgc2VsZWN0ZWRcbiAgICAgIHdpbGwgaGF2ZSBhIFRhYmxlTW9kaWZpZWQgZXZlbnQgdGhyb3duLlxuICAgICovXG4gICAgZ2V0VGFibGVGcm9tQ2VsbChjZWxsc1swXSkuZWFjaChcbiAgICAgICh0YWJsZSkgPT4gRXZlbnRzLmZpcmVUYWJsZU1vZGlmaWVkKGVkaXRvciwgdGFibGUuZG9tLCBFdmVudHMuc3R5bGVNb2RpZmllZClcbiAgICApO1xuICB9KTtcblxufTtcblxuZXhwb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9O1xuIiwiLypcbiBOT1RFOiBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBpbiB0aGUgZm9sbG93aW5nIGxvY2F0aW9uczpcbiAgLSBjb3JlL2FwaS9UYWJsZUV2ZW50cy50c1xuICAtIHBsdWdpbnMvdGFibGUvYXBpL0V2ZW50cy50c1xuICAtIGFkdnRhYmxlXG4gTWFrZSBzdXJlIHRoYXQgaWYgbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBmaWxlLCB0aGUgb3RoZXIgZmlsZXMgYXJlIHVwZGF0ZWQgYXMgd2VsbFxuICovXG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IE5ld1RhYmxlQ2VsbEV2ZW50LCBOZXdUYWJsZVJvd0V2ZW50LCBUYWJsZUV2ZW50RGF0YSB9IGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7IEVkaXRvckV2ZW50IH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS91dGlsL0V2ZW50RGlzcGF0Y2hlcic7XG5cbi8vIER1cGxpY2F0ZWQgaW4gbW9kdWxlcy90aW55bWNlL3NyYy90aGVtZXMvc2lsdmVyL21haW4vdHMvdWkvc2VsZWN0b3IvVGFibGVTZWxlY3RvckhhbmRsZXMudHNcbi8vIE5PVEU6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBldmVudCBzbyBub3QgcHVibGljbHkgZXhwb3NpbmcgdGhlIGludGVyZmFjZSBpbiBFdmVudFR5cGVzLnRzXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlU2VsZWN0aW9uQ2hhbmdlRXZlbnQge1xuICByZWFkb25seSBjZWxsczogSFRNTFRhYmxlQ2VsbEVsZW1lbnRbXTtcbiAgcmVhZG9ubHkgc3RhcnQ6IEhUTUxUYWJsZUNlbGxFbGVtZW50O1xuICByZWFkb25seSBmaW5pc2g6IEhUTUxUYWJsZUNlbGxFbGVtZW50O1xuICByZWFkb25seSBvdGhlckNlbGxzPzoge1xuICAgIHJlYWRvbmx5IHVwT3JMZWZ0Q2VsbHM6IEhUTUxUYWJsZUNlbGxFbGVtZW50W107XG4gICAgcmVhZG9ubHkgZG93bk9yUmlnaHRDZWxsczogSFRNTFRhYmxlQ2VsbEVsZW1lbnRbXTtcbiAgfTtcbn1cblxuY29uc3QgZmlyZU5ld1JvdyA9IChlZGl0b3I6IEVkaXRvciwgcm93OiBIVE1MVGFibGVSb3dFbGVtZW50KTogRWRpdG9yRXZlbnQ8TmV3VGFibGVSb3dFdmVudD4gPT5cbiAgZWRpdG9yLmRpc3BhdGNoKCdOZXdSb3cnLCB7IG5vZGU6IHJvdyB9KTtcblxuY29uc3QgZmlyZU5ld0NlbGwgPSAoZWRpdG9yOiBFZGl0b3IsIGNlbGw6IEhUTUxUYWJsZUNlbGxFbGVtZW50KTogRWRpdG9yRXZlbnQ8TmV3VGFibGVDZWxsRXZlbnQ+ID0+XG4gIGVkaXRvci5kaXNwYXRjaCgnTmV3Q2VsbCcsIHsgbm9kZTogY2VsbCB9KTtcblxuY29uc3QgZmlyZVRhYmxlTW9kaWZpZWQgPSAoZWRpdG9yOiBFZGl0b3IsIHRhYmxlOiBIVE1MVGFibGVFbGVtZW50LCBkYXRhOiBUYWJsZUV2ZW50RGF0YSk6IHZvaWQgPT4ge1xuICBlZGl0b3IuZGlzcGF0Y2goJ1RhYmxlTW9kaWZpZWQnLCB7IC4uLmRhdGEsIHRhYmxlIH0pO1xufTtcblxuY29uc3QgZmlyZVRhYmxlU2VsZWN0aW9uQ2hhbmdlID0gKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgY2VsbHM6IEhUTUxUYWJsZUNlbGxFbGVtZW50W10sXG4gIHN0YXJ0OiBIVE1MVGFibGVDZWxsRWxlbWVudCxcbiAgZmluaXNoOiBIVE1MVGFibGVDZWxsRWxlbWVudCxcbiAgb3RoZXJDZWxscz86IFRhYmxlU2VsZWN0aW9uQ2hhbmdlRXZlbnRbJ290aGVyQ2VsbHMnXVxuKTogdm9pZCA9PiB7XG4gIGVkaXRvci5kaXNwYXRjaDwnVGFibGVTZWxlY3Rpb25DaGFuZ2UnLCBUYWJsZVNlbGVjdGlvbkNoYW5nZUV2ZW50PignVGFibGVTZWxlY3Rpb25DaGFuZ2UnLCB7XG4gICAgY2VsbHMsXG4gICAgc3RhcnQsXG4gICAgZmluaXNoLFxuICAgIG90aGVyQ2VsbHNcbiAgfSk7XG59O1xuXG5jb25zdCBmaXJlVGFibGVTZWxlY3Rpb25DbGVhciA9IChlZGl0b3I6IEVkaXRvcik6IHZvaWQgPT4ge1xuICBlZGl0b3IuZGlzcGF0Y2goJ1RhYmxlU2VsZWN0aW9uQ2xlYXInKTtcbn07XG5cbmNvbnN0IGZpcmVPYmplY3RSZXNpemVTdGFydCA9IChlZGl0b3I6IEVkaXRvciwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG9yaWdpbjogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGVkaXRvci5kaXNwYXRjaCgnT2JqZWN0UmVzaXplU3RhcnQnLCB7IHRhcmdldCwgd2lkdGgsIGhlaWdodCwgb3JpZ2luIH0pO1xufTtcblxuY29uc3QgZmlyZU9iamVjdFJlc2l6ZWQgPSAoZWRpdG9yOiBFZGl0b3IsIHRhcmdldDogSFRNTEVsZW1lbnQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBvcmlnaW46IHN0cmluZyk6IHZvaWQgPT4ge1xuICBlZGl0b3IuZGlzcGF0Y2goJ09iamVjdFJlc2l6ZWQnLCB7IHRhcmdldCwgd2lkdGgsIGhlaWdodCwgb3JpZ2luIH0pO1xufTtcblxuY29uc3Qgc3R5bGVNb2RpZmllZDogVGFibGVFdmVudERhdGEgPSB7IHN0cnVjdHVyZTogZmFsc2UsIHN0eWxlOiB0cnVlIH07XG5jb25zdCBzdHJ1Y3R1cmVNb2RpZmllZDogVGFibGVFdmVudERhdGEgPSB7IHN0cnVjdHVyZTogdHJ1ZSwgc3R5bGU6IGZhbHNlIH07XG5jb25zdCBzdHlsZUFuZFN0cnVjdHVyZU1vZGlmaWVkOiBUYWJsZUV2ZW50RGF0YSA9IHsgc3RydWN0dXJlOiB0cnVlLCBzdHlsZTogdHJ1ZSB9O1xuXG5leHBvcnQge1xuICBmaXJlT2JqZWN0UmVzaXplU3RhcnQsXG4gIGZpcmVPYmplY3RSZXNpemVkLFxuICBmaXJlVGFibGVTZWxlY3Rpb25DaGFuZ2UsXG4gIGZpcmVUYWJsZVNlbGVjdGlvbkNsZWFyLFxuICBmaXJlTmV3Um93LFxuICBmaXJlTmV3Q2VsbCxcbiAgZmlyZVRhYmxlTW9kaWZpZWQsXG4gIHN0eWxlTW9kaWZpZWQsXG4gIHN0cnVjdHVyZU1vZGlmaWVkLFxuICBzdHlsZUFuZFN0cnVjdHVyZU1vZGlmaWVkXG59O1xuIiwiaW1wb3J0IHsgQXJyLCBPcHRpb25hbCwgVHlwZSB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBTZWxlY3RvckZpbmQsIFN1Z2FyQm9keSwgU3VnYXJFbGVtZW50LCBXaWR0aCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5pbXBvcnQgdHlwZSB7IEVkaXRvck9wdGlvbnMgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL09wdGlvblR5cGVzJztcblxuZXhwb3J0IHR5cGUgVGFibGVTaXppbmdNb2RlID0gJ2ZpeGVkJyB8ICdyZWxhdGl2ZScgfCAncmVzcG9uc2l2ZScgfCAnYXV0byc7XG5leHBvcnQgdHlwZSBUYWJsZUNvbHVtblJlc2l6aW5nID0gJ3ByZXNlcnZldGFibGUnIHwgJ3Jlc2l6ZXRhYmxlJztcbmV4cG9ydCB0eXBlIFRhYmxlSGVhZGVyVHlwZSA9ICdzZWN0aW9uJyB8ICdjZWxscycgfCAnc2VjdGlvbkNlbGxzJyB8ICdhdXRvJztcblxuY29uc3Qgb3B0aW9uOiB7XG4gIDxLIGV4dGVuZHMga2V5b2YgRWRpdG9yT3B0aW9ucz4obmFtZTogSyk6IChlZGl0b3I6IEVkaXRvcikgPT4gRWRpdG9yT3B0aW9uc1tLXTtcbiAgPFQ+KG5hbWU6IHN0cmluZyk6IChlZGl0b3I6IEVkaXRvcikgPT4gVDtcbn0gPSAobmFtZTogc3RyaW5nKSA9PiAoZWRpdG9yOiBFZGl0b3IpID0+XG4gIGVkaXRvci5vcHRpb25zLmdldChuYW1lKTtcblxuLy8gTm90ZTogVGhpcyBpcyBhbHNvIGNvbnRhaW5lZCBpbiB0aGUgdGFibGUgcGx1Z2luIE9wdGlvbnMudHMgZmlsZVxuY29uc3QgZGVmYXVsdFdpZHRoID0gJzEwMCUnO1xuXG5jb25zdCBnZXRQaXhlbEZvcmNlZFdpZHRoID0gKGVkaXRvcjogRWRpdG9yKSA9PiB7XG4gIC8vIERldGVybWluZSB0aGUgaW5uZXIgc2l6ZSBvZiB0aGUgcGFyZW50IGJsb2NrIGVsZW1lbnQgd2hlcmUgdGhlIHRhYmxlIHdpbGwgYmUgaW5zZXJ0ZWRcbiAgY29uc3QgZG9tID0gZWRpdG9yLmRvbTtcbiAgY29uc3QgcGFyZW50QmxvY2sgPSBkb20uZ2V0UGFyZW50PEhUTUxFbGVtZW50PihlZGl0b3Iuc2VsZWN0aW9uLmdldFN0YXJ0KCksIGRvbS5pc0Jsb2NrKSA/PyBlZGl0b3IuZ2V0Qm9keSgpO1xuICByZXR1cm4gV2lkdGguZ2V0SW5uZXIoU3VnYXJFbGVtZW50LmZyb21Eb20ocGFyZW50QmxvY2spKSArICdweCc7XG59O1xuXG4vLyBOb3RlOiBUaGlzIGlzIGFsc28gY29udGFpbmVkIGluIHRoZSB0YWJsZSBwbHVnaW4gT3B0aW9ucy50cyBmaWxlXG5jb25zdCBkZXRlcm1pbmVEZWZhdWx0VGFibGVTdHlsZXMgPSAoZWRpdG9yOiBFZGl0b3IsIGRlZmF1bHRTdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgaWYgKGlzVGFibGVSZXNwb25zaXZlRm9yY2VkKGVkaXRvcikgfHwgIXNob3VsZFN0eWxlV2l0aENzcyhlZGl0b3IpKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRTdHlsZXM7XG4gIH0gZWxzZSBpZiAoaXNUYWJsZVBpeGVsc0ZvcmNlZChlZGl0b3IpKSB7XG4gICAgcmV0dXJuIHsgLi4uZGVmYXVsdFN0eWxlcywgd2lkdGg6IGdldFBpeGVsRm9yY2VkV2lkdGgoZWRpdG9yKSB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IC4uLmRlZmF1bHRTdHlsZXMsIHdpZHRoOiBkZWZhdWx0V2lkdGggfTtcbiAgfVxufTtcblxuLy8gTm90ZTogVGhpcyBpcyBhbHNvIGNvbnRhaW5lZCBpbiB0aGUgdGFibGUgcGx1Z2luIE9wdGlvbnMudHMgZmlsZVxuY29uc3QgZGV0ZXJtaW5lRGVmYXVsdFRhYmxlQXR0cmlidXRlcyA9IChlZGl0b3I6IEVkaXRvciwgZGVmYXVsdEF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgaWYgKGlzVGFibGVSZXNwb25zaXZlRm9yY2VkKGVkaXRvcikgfHwgc2hvdWxkU3R5bGVXaXRoQ3NzKGVkaXRvcikpIHtcbiAgICByZXR1cm4gZGVmYXVsdEF0dHJpYnV0ZXM7XG4gIH0gZWxzZSBpZiAoaXNUYWJsZVBpeGVsc0ZvcmNlZChlZGl0b3IpKSB7XG4gICAgcmV0dXJuIHsgLi4uZGVmYXVsdEF0dHJpYnV0ZXMsIHdpZHRoOiBnZXRQaXhlbEZvcmNlZFdpZHRoKGVkaXRvcikgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyAuLi5kZWZhdWx0QXR0cmlidXRlcywgd2lkdGg6IGRlZmF1bHRXaWR0aCB9O1xuICB9XG59O1xuXG5jb25zdCByZWdpc3RlciA9IChlZGl0b3I6IEVkaXRvcik6IHZvaWQgPT4ge1xuICBjb25zdCByZWdpc3Rlck9wdGlvbiA9IGVkaXRvci5vcHRpb25zLnJlZ2lzdGVyO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9jbG9uZV9lbGVtZW50cycsIHtcbiAgICBwcm9jZXNzb3I6ICdzdHJpbmdbXSdcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX3VzZV9jb2xncm91cHMnLCB7XG4gICAgcHJvY2Vzc29yOiAnYm9vbGVhbicsXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KTtcblxuICByZWdpc3Rlck9wdGlvbigndGFibGVfaGVhZGVyX3R5cGUnLCB7XG4gICAgcHJvY2Vzc29yOiAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkID0gQXJyLmNvbnRhaW5zKFsgJ3NlY3Rpb24nLCAnY2VsbHMnLCAnc2VjdGlvbkNlbGxzJywgJ2F1dG8nIF0sIHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWxpZCA/IHsgdmFsdWUsIHZhbGlkIH0gOiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogJ011c3QgYmUgb25lIG9mOiBzZWN0aW9uLCBjZWxscywgc2VjdGlvbkNlbGxzIG9yIGF1dG8uJyB9O1xuICAgIH0sXG4gICAgZGVmYXVsdDogJ3NlY3Rpb24nXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9zaXppbmdfbW9kZScsIHtcbiAgICBwcm9jZXNzb3I6ICdzdHJpbmcnLFxuICAgIGRlZmF1bHQ6ICdhdXRvJ1xuICB9KTtcblxuICByZWdpc3Rlck9wdGlvbigndGFibGVfZGVmYXVsdF9hdHRyaWJ1dGVzJywge1xuICAgIHByb2Nlc3NvcjogJ29iamVjdCcsXG4gICAgZGVmYXVsdDoge1xuICAgICAgYm9yZGVyOiAnMSdcbiAgICB9XG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9kZWZhdWx0X3N0eWxlcycsIHtcbiAgICBwcm9jZXNzb3I6ICdvYmplY3QnLFxuICAgIGRlZmF1bHQ6IHtcbiAgICAgICdib3JkZXItY29sbGFwc2UnOiAnY29sbGFwc2UnLFxuICAgIH1cbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX2NvbHVtbl9yZXNpemluZycsIHtcbiAgICBwcm9jZXNzb3I6ICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgdmFsaWQgPSBBcnIuY29udGFpbnMoWyAncHJlc2VydmV0YWJsZScsICdyZXNpemV0YWJsZScgXSwgdmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbGlkID8geyB2YWx1ZSwgdmFsaWQgfSA6IHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiAnTXVzdCBiZSBwcmVzZXJ2ZXRhYmxlLCBvciByZXNpemV0YWJsZS4nIH07XG4gICAgfSxcbiAgICBkZWZhdWx0OiAncHJlc2VydmV0YWJsZSdcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX3Jlc2l6ZV9iYXJzJywge1xuICAgIHByb2Nlc3NvcjogJ2Jvb2xlYW4nLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSk7XG5cbiAgcmVnaXN0ZXJPcHRpb24oJ3RhYmxlX3N0eWxlX2J5X2NzcycsIHtcbiAgICBwcm9jZXNzb3I6ICdib29sZWFuJyxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pO1xuXG4gIHJlZ2lzdGVyT3B0aW9uKCd0YWJsZV9tZXJnZV9jb250ZW50X29uX3Bhc3RlJywge1xuICAgIHByb2Nlc3NvcjogJ2Jvb2xlYW4nLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSk7XG59O1xuXG5jb25zdCBnZXRUYWJsZUNsb25lRWxlbWVudHMgPSAoZWRpdG9yOiBFZGl0b3IpOiBPcHRpb25hbDxzdHJpbmdbXT4gPT4ge1xuICByZXR1cm4gT3B0aW9uYWwuZnJvbShlZGl0b3Iub3B0aW9ucy5nZXQoJ3RhYmxlX2Nsb25lX2VsZW1lbnRzJykpO1xufTtcblxuY29uc3QgaGFzVGFibGVPYmplY3RSZXNpemluZyA9IChlZGl0b3I6IEVkaXRvcik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBvYmplY3RSZXNpemluZyA9IGVkaXRvci5vcHRpb25zLmdldCgnb2JqZWN0X3Jlc2l6aW5nJyk7XG4gIHJldHVybiBBcnIuY29udGFpbnMob2JqZWN0UmVzaXppbmcuc3BsaXQoJywnKSwgJ3RhYmxlJyk7XG59O1xuXG5jb25zdCBnZXRUYWJsZUhlYWRlclR5cGUgPSBvcHRpb248VGFibGVIZWFkZXJUeXBlPigndGFibGVfaGVhZGVyX3R5cGUnKTtcblxuY29uc3QgZ2V0VGFibGVDb2x1bW5SZXNpemluZ0JlaGF2aW91ciA9IG9wdGlvbjxUYWJsZUNvbHVtblJlc2l6aW5nPigndGFibGVfY29sdW1uX3Jlc2l6aW5nJyk7XG5cbmNvbnN0IGlzUHJlc2VydmVUYWJsZUNvbHVtblJlc2l6aW5nID0gKGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiA9PlxuICBnZXRUYWJsZUNvbHVtblJlc2l6aW5nQmVoYXZpb3VyKGVkaXRvcikgPT09ICdwcmVzZXJ2ZXRhYmxlJztcblxuY29uc3QgaXNSZXNpemVUYWJsZUNvbHVtblJlc2l6aW5nID0gKGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiA9PlxuICBnZXRUYWJsZUNvbHVtblJlc2l6aW5nQmVoYXZpb3VyKGVkaXRvcikgPT09ICdyZXNpemV0YWJsZSc7XG5cbmNvbnN0IGdldFRhYmxlU2l6aW5nTW9kZSA9IG9wdGlvbjxUYWJsZVNpemluZ01vZGU+KCd0YWJsZV9zaXppbmdfbW9kZScpO1xuXG5jb25zdCBpc1RhYmxlUGVyY2VudGFnZXNGb3JjZWQgPSAoZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuID0+XG4gIGdldFRhYmxlU2l6aW5nTW9kZShlZGl0b3IpID09PSAncmVsYXRpdmUnO1xuXG5jb25zdCBpc1RhYmxlUGl4ZWxzRm9yY2VkID0gKGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiA9PlxuICBnZXRUYWJsZVNpemluZ01vZGUoZWRpdG9yKSA9PT0gJ2ZpeGVkJztcblxuY29uc3QgaXNUYWJsZVJlc3BvbnNpdmVGb3JjZWQgPSAoZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuID0+XG4gIGdldFRhYmxlU2l6aW5nTW9kZShlZGl0b3IpID09PSAncmVzcG9uc2l2ZSc7XG5cbmNvbnN0IGhhc1RhYmxlUmVzaXplQmFycyA9IG9wdGlvbjxib29sZWFuPigndGFibGVfcmVzaXplX2JhcnMnKTtcblxuY29uc3Qgc2hvdWxkU3R5bGVXaXRoQ3NzID0gb3B0aW9uPGJvb2xlYW4+KCd0YWJsZV9zdHlsZV9ieV9jc3MnKTtcblxuY29uc3Qgc2hvdWxkTWVyZ2VDb250ZW50T25QYXN0ZSA9IG9wdGlvbjxib29sZWFuPigndGFibGVfbWVyZ2VfY29udGVudF9vbl9wYXN0ZScpO1xuXG5jb25zdCBnZXRUYWJsZURlZmF1bHRBdHRyaWJ1dGVzID0gKGVkaXRvcjogRWRpdG9yKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIC8vIE5vdGU6IFRoZSB3ZSBkb24ndCByZWx5IG9uIHRoZSBkZWZhdWx0IGhlcmUgYXMgd2UgbmVlZCB0byBkeW5hbWljYWxseSBsb29rdXAgdGhlIHdpZHRocyBiYXNlZCBvbiB0aGUgY3VycmVudCBlZGl0b3Igc3RhdGVcbiAgY29uc3Qgb3B0aW9ucyA9IGVkaXRvci5vcHRpb25zO1xuICBjb25zdCBkZWZhdWx0QXR0cmlidXRlcyA9IG9wdGlvbnMuZ2V0KCd0YWJsZV9kZWZhdWx0X2F0dHJpYnV0ZXMnKTtcbiAgcmV0dXJuIG9wdGlvbnMuaXNTZXQoJ3RhYmxlX2RlZmF1bHRfYXR0cmlidXRlcycpID8gZGVmYXVsdEF0dHJpYnV0ZXMgOiBkZXRlcm1pbmVEZWZhdWx0VGFibGVBdHRyaWJ1dGVzKGVkaXRvciwgZGVmYXVsdEF0dHJpYnV0ZXMpO1xufTtcblxuY29uc3QgZ2V0VGFibGVEZWZhdWx0U3R5bGVzID0gKGVkaXRvcjogRWRpdG9yKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIC8vIE5vdGU6IFRoZSB3ZSBkb24ndCByZWx5IG9uIHRoZSBkZWZhdWx0IGhlcmUgYXMgd2UgbmVlZCB0byBkeW5hbWljYWxseSBsb29rdXAgdGhlIHdpZHRocyBiYXNlZCBvbiB0aGUgY3VycmVudCBlZGl0b3Igc3RhdGVcbiAgY29uc3Qgb3B0aW9ucyA9IGVkaXRvci5vcHRpb25zO1xuICBjb25zdCBkZWZhdWx0U3R5bGVzID0gb3B0aW9ucy5nZXQoJ3RhYmxlX2RlZmF1bHRfc3R5bGVzJyk7XG4gIHJldHVybiBvcHRpb25zLmlzU2V0KCd0YWJsZV9kZWZhdWx0X3N0eWxlcycpID8gZGVmYXVsdFN0eWxlcyA6IGRldGVybWluZURlZmF1bHRUYWJsZVN0eWxlcyhlZGl0b3IsIGRlZmF1bHRTdHlsZXMpO1xufTtcblxuY29uc3QgdGFibGVVc2VDb2x1bW5Hcm91cCA9IG9wdGlvbjxib29sZWFuPigndGFibGVfdXNlX2NvbGdyb3VwcycpO1xuXG5jb25zdCBmaXhlZENvbnRhaW5lclNlbGVjdG9yID0gb3B0aW9uKCdmaXhlZF90b29sYmFyX2NvbnRhaW5lcicpO1xuY29uc3QgZml4ZWRUb29sYmFyQ29udGFpbmVyVGFyZ2V0ID0gb3B0aW9uKCdmaXhlZF90b29sYmFyX2NvbnRhaW5lcl90YXJnZXQnKTtcbmNvbnN0IGZpeGVkQ29udGFpbmVyVGFyZ2V0ID0gKGVkaXRvcjogRWRpdG9yKTogT3B0aW9uYWw8U3VnYXJFbGVtZW50PiA9PiB7XG4gIGlmICghZWRpdG9yLmlubGluZSkge1xuICAgIHJldHVybiBPcHRpb25hbC5ub25lKCk7XG4gIH1cblxuICBjb25zdCBzZWxlY3RvciA9IGZpeGVkQ29udGFpbmVyU2VsZWN0b3IoZWRpdG9yKSA/PyAnJztcbiAgaWYgKHNlbGVjdG9yLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmRlc2NlbmRhbnQoU3VnYXJCb2R5LmJvZHkoKSwgc2VsZWN0b3IpO1xuICB9XG5cbiAgY29uc3QgZWxlbWVudCA9IGZpeGVkVG9vbGJhckNvbnRhaW5lclRhcmdldChlZGl0b3IpO1xuICBpZiAoVHlwZS5pc05vbk51bGxhYmxlKGVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIE9wdGlvbmFsLnNvbWUoU3VnYXJFbGVtZW50LmZyb21Eb20oZWxlbWVudCkpO1xuICB9XG5cbiAgcmV0dXJuIE9wdGlvbmFsLm5vbmUoKTtcbn07XG5cbmNvbnN0IHVzZUZpeGVkQ29udGFpbmVyID0gKGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiA9PlxuICBlZGl0b3IuaW5saW5lICYmIGZpeGVkQ29udGFpbmVyVGFyZ2V0KGVkaXRvcikuaXNTb21lKCk7XG5jb25zdCBnZXRVaU1vZGUgPSBvcHRpb248c3RyaW5nPigndWlfbW9kZScpO1xuY29uc3QgaXNTcGxpdFVpTW9kZSA9IChlZGl0b3I6IEVkaXRvcik6IGJvb2xlYW4gPT5cbiAgIXVzZUZpeGVkQ29udGFpbmVyKGVkaXRvcikgJiYgZ2V0VWlNb2RlKGVkaXRvcikgPT09ICdzcGxpdCc7XG5cbmV4cG9ydCB7XG4gIHJlZ2lzdGVyLFxuXG4gIGdldFRhYmxlQ2xvbmVFbGVtZW50cyxcbiAgaXNUYWJsZVBlcmNlbnRhZ2VzRm9yY2VkLFxuICBpc1RhYmxlUGl4ZWxzRm9yY2VkLFxuICBpc1RhYmxlUmVzcG9uc2l2ZUZvcmNlZCxcbiAgZ2V0VGFibGVIZWFkZXJUeXBlLFxuICBnZXRUYWJsZUNvbHVtblJlc2l6aW5nQmVoYXZpb3VyLFxuICBpc1ByZXNlcnZlVGFibGVDb2x1bW5SZXNpemluZyxcbiAgaXNSZXNpemVUYWJsZUNvbHVtblJlc2l6aW5nLFxuICBoYXNUYWJsZU9iamVjdFJlc2l6aW5nLFxuICBoYXNUYWJsZVJlc2l6ZUJhcnMsXG4gIGdldFRhYmxlRGVmYXVsdEF0dHJpYnV0ZXMsXG4gIGdldFRhYmxlRGVmYXVsdFN0eWxlcyxcbiAgdGFibGVVc2VDb2x1bW5Hcm91cCxcbiAgc2hvdWxkTWVyZ2VDb250ZW50T25QYXN0ZSxcbiAgaXNTcGxpdFVpTW9kZVxufTtcbiIsImltcG9ydCB7IE9iaiB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBUYWJsZUxvb2t1cCB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcblxuaW1wb3J0IHR5cGUgeyBMb29rdXBBY3Rpb24sIFRhYmxlQWN0aW9ucyB9IGZyb20gJy4uL2FjdGlvbnMvVGFibGVBY3Rpb25zJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4uL2NvcmUvVGFibGVVdGlscyc7XG5pbXBvcnQgKiBhcyBUYWJsZVRhcmdldHMgZnJvbSAnLi4vcXVlcmllcy9UYWJsZVRhcmdldHMnO1xuaW1wb3J0ICogYXMgVGFibGVTZWxlY3Rpb24gZnJvbSAnLi4vc2VsZWN0aW9uL1RhYmxlU2VsZWN0aW9uJztcblxuY29uc3QgcmVnaXN0ZXJRdWVyeUNvbW1hbmRzID0gKGVkaXRvcjogRWRpdG9yLCBhY3Rpb25zOiBUYWJsZUFjdGlvbnMpOiB2b2lkID0+IHtcbiAgY29uc3QgaXNSb290ID0gVXRpbHMuZ2V0SXNSb290KGVkaXRvcik7XG5cbiAgY29uc3QgbG9va3VwT25TZWxlY3Rpb24gPSAoYWN0aW9uOiBMb29rdXBBY3Rpb24pOiBzdHJpbmcgPT5cbiAgICBUYWJsZVNlbGVjdGlvbi5nZXRTZWxlY3Rpb25DZWxsKFV0aWxzLmdldFNlbGVjdGlvblN0YXJ0KGVkaXRvcikpLmJpbmQoKGNlbGwpID0+XG4gICAgICBUYWJsZUxvb2t1cC50YWJsZShjZWxsLCBpc1Jvb3QpLm1hcCgodGFibGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IFRhYmxlVGFyZ2V0cy5mb3JNZW51KFRhYmxlU2VsZWN0aW9uLmdldENlbGxzRnJvbVNlbGVjdGlvbihlZGl0b3IpLCB0YWJsZSwgY2VsbCk7XG4gICAgICAgIHJldHVybiBhY3Rpb24odGFibGUsIHRhcmdldHMpO1xuICAgICAgfSlcbiAgICApLmdldE9yKCcnKTtcblxuICBPYmouZWFjaCh7XG4gICAgbWNlVGFibGVSb3dUeXBlOiAoKSA9PiBsb29rdXBPblNlbGVjdGlvbihhY3Rpb25zLmdldFRhYmxlUm93VHlwZSksXG4gICAgbWNlVGFibGVDZWxsVHlwZTogKCkgPT4gbG9va3VwT25TZWxlY3Rpb24oYWN0aW9ucy5nZXRUYWJsZUNlbGxUeXBlKSxcbiAgICBtY2VUYWJsZUNvbFR5cGU6ICgpID0+IGxvb2t1cE9uU2VsZWN0aW9uKGFjdGlvbnMuZ2V0VGFibGVDb2xUeXBlKVxuICB9LCAoZnVuYywgbmFtZSkgPT4gZWRpdG9yLmFkZFF1ZXJ5VmFsdWVIYW5kbGVyKG5hbWUsIGZ1bmMpKTtcbn07XG5cbmV4cG9ydCB7IHJlZ2lzdGVyUXVlcnlDb21tYW5kcyB9O1xuXG4iLCJpbXBvcnQgeyBJbnB1dEhhbmRsZXJzLCB0eXBlIFJlc3BvbnNlLCBTZWxlY3Rpb25Bbm5vdGF0aW9uLCBTZWxlY3Rpb25LZXlzLCBTZWxlY3Rpb25zLCBTZWxlY3Rpb25UeXBlcyB9IGZyb20gJ0BlcGhveC9kYXJ3aW4nO1xuaW1wb3J0IHsgQXJyLCBDZWxsLCBGdW4sIE9iaiB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBEb21QYXJlbnQgfSBmcm9tICdAZXBob3gvcm9iaW4nO1xuaW1wb3J0IHsgT3RoZXJDZWxscywgVGFibGVGaWxsLCBUYWJsZUxvb2t1cCB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IENsYXNzLCBDb21wYXJlLCBEb21FdmVudCwgdHlwZSBFdmVudEFyZ3MsIFNlbGVjdGlvbkRpcmVjdGlvbiwgU2ltU2VsZWN0aW9uLCBTdWdhckVsZW1lbnQsIFN1Z2FyTm9kZSwgRGlyZWN0aW9uIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgRWRpdG9yRXZlbnQgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3V0aWwvRXZlbnREaXNwYXRjaGVyJztcblxuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vY29yZS9UYWJsZVV0aWxzJztcbmltcG9ydCB7IGVwaGVtZXJhIH0gZnJvbSAnLi4vc2VsZWN0aW9uL0VwaGVtZXJhJztcbmltcG9ydCB7IGdldENlbGxzRnJvbVNlbGVjdGlvbiB9IGZyb20gJy4uL3NlbGVjdGlvbi9UYWJsZVNlbGVjdGlvbic7XG5pbXBvcnQgKiBhcyBUYWJsZVNlbGVjdGlvbiBmcm9tICcuLi9zZWxlY3Rpb24vVGFibGVTZWxlY3Rpb24nO1xuXG5pbXBvcnQgKiBhcyBFdmVudHMgZnJvbSAnLi9FdmVudHMnO1xuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuL09wdGlvbnMnO1xuaW1wb3J0IHR5cGUgeyBUYWJsZVJlc2l6ZUhhbmRsZXIgfSBmcm9tICcuL1RhYmxlUmVzaXplSGFuZGxlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVDZWxsU2VsZWN0aW9uSGFuZGxlciB7XG4gIHJlYWRvbmx5IGdldFNlbGVjdGVkQ2VsbHM6ICgpID0+IEhUTUxUYWJsZUNlbGxFbGVtZW50W107XG4gIHJlYWRvbmx5IGNsZWFyU2VsZWN0ZWRDZWxsczogKGNvbnRhaW5lcjogTm9kZSkgPT4gdm9pZDtcbn1cblxuY29uc3QgaGFzSW50ZXJuYWxUYXJnZXQgPSAoZTogRXZlbnQpOiBib29sZWFuID0+XG4gICFDbGFzcy5oYXMoU3VnYXJFbGVtZW50LmZyb21Eb20oZS50YXJnZXQgYXMgTm9kZSksICdlcGhveC1zbm9va2VyLXJlc2l6ZXItYmFyJyk7XG5cbmV4cG9ydCBjb25zdCBUYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyID0gKGVkaXRvcjogRWRpdG9yLCByZXNpemVIYW5kbGVyOiBUYWJsZVJlc2l6ZUhhbmRsZXIpOiBUYWJsZUNlbGxTZWxlY3Rpb25IYW5kbGVyID0+IHtcbiAgY29uc3QgY2VsbFNlbGVjdGlvbiA9IFNlbGVjdGlvbnMoXG4gICAgKCkgPT4gU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLmdldEJvZHkoKSksXG4gICAgKCkgPT4gVGFibGVTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uQ2VsbChVdGlscy5nZXRTZWxlY3Rpb25TdGFydChlZGl0b3IpLCBVdGlscy5nZXRJc1Jvb3QoZWRpdG9yKSksXG4gICAgZXBoZW1lcmEuc2VsZWN0ZWRTZWxlY3RvclxuICApO1xuXG4gIGNvbnN0IG9uU2VsZWN0aW9uID0gKGNlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIHN0YXJ0OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBmaW5pc2g6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVDZWxsRWxlbWVudD4pID0+IHtcbiAgICBjb25zdCB0YWJsZU9wdCA9IFRhYmxlTG9va3VwLnRhYmxlKHN0YXJ0KTtcbiAgICB0YWJsZU9wdC5lYWNoKCh0YWJsZSkgPT4ge1xuICAgICAgY29uc3QgY2VsbHNEb20gPSBBcnIubWFwKGNlbGxzLCAoY2VsbCkgPT4gY2VsbC5kb20pO1xuICAgICAgY29uc3QgY2xvbmVGb3JtYXRzID0gT3B0aW9ucy5nZXRUYWJsZUNsb25lRWxlbWVudHMoZWRpdG9yKTtcbiAgICAgIGNvbnN0IGdlbmVyYXRvcnMgPSBUYWJsZUZpbGwuY2VsbE9wZXJhdGlvbnMoRnVuLm5vb3AsIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5nZXREb2MoKSksIGNsb25lRm9ybWF0cyk7XG4gICAgICBjb25zdCBzZWxlY3RlZENlbGxzID0gZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICBjb25zdCBvdGhlckNlbGxzRG9tID0gT3RoZXJDZWxscy5nZXRPdGhlckNlbGxzKHRhYmxlLCB7IHNlbGVjdGlvbjogc2VsZWN0ZWRDZWxscyB9LCBnZW5lcmF0b3JzKVxuICAgICAgICAubWFwKChvdGhlckNlbGxzKSA9PiBPYmoubWFwKG90aGVyQ2VsbHMsIChjZWxsQXJyKSA9PiBBcnIubWFwKGNlbGxBcnIsIChjZWxsKSA9PiBjZWxsLmRvbSkpKVxuICAgICAgICAuZ2V0T3JVbmRlZmluZWQoKTtcbiAgICAgIEV2ZW50cy5maXJlVGFibGVTZWxlY3Rpb25DaGFuZ2UoZWRpdG9yLCBjZWxsc0RvbSwgc3RhcnQuZG9tLCBmaW5pc2guZG9tLCBvdGhlckNlbGxzRG9tKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBvbkNsZWFyID0gKCkgPT4gRXZlbnRzLmZpcmVUYWJsZVNlbGVjdGlvbkNsZWFyKGVkaXRvcik7XG5cbiAgY29uc3QgYW5ub3RhdGlvbnMgPSBTZWxlY3Rpb25Bbm5vdGF0aW9uLmJ5QXR0cihlcGhlbWVyYSwgb25TZWxlY3Rpb24sIG9uQ2xlYXIpO1xuXG4gIGVkaXRvci5vbignaW5pdCcsIChfZSkgPT4ge1xuICAgIGNvbnN0IHdpbiA9IGVkaXRvci5nZXRXaW4oKTtcbiAgICBjb25zdCBib2R5ID0gVXRpbHMuZ2V0Qm9keShlZGl0b3IpO1xuICAgIGNvbnN0IGlzUm9vdCA9IFV0aWxzLmdldElzUm9vdChlZGl0b3IpO1xuXG4gICAgLy8gV2hlbiB0aGUgc2VsZWN0aW9uIGNoYW5nZXMgdGhyb3VnaCBlaXRoZXIgdGhlIG1vdXNlIG9yIGtleWJvYXJkLCBhbmQgdGhlIHNlbGVjdGlvbiBpcyBubyBsb25nZXIgd2l0aGluIHRoZSB0YWJsZS5cbiAgICAvLyBSZW1vdmUgdGhlIHNlbGVjdGlvbi5cbiAgICBjb25zdCBzeW5jU2VsZWN0aW9uID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsID0gZWRpdG9yLnNlbGVjdGlvbjtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gU3VnYXJFbGVtZW50LmZyb21Eb20oc2VsLmdldFN0YXJ0KCkpO1xuICAgICAgY29uc3QgZW5kID0gU3VnYXJFbGVtZW50LmZyb21Eb20oc2VsLmdldEVuZCgpKTtcbiAgICAgIGNvbnN0IHNoYXJlZCA9IERvbVBhcmVudC5zaGFyZWRPbmUoVGFibGVMb29rdXAudGFibGUsIFsgc3RhcnQsIGVuZCBdKTtcbiAgICAgIHNoYXJlZC5mb2xkKCgpID0+IGFubm90YXRpb25zLmNsZWFyKGJvZHkpLCBGdW4ubm9vcCk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1vdXNlSGFuZGxlcnMgPSBJbnB1dEhhbmRsZXJzLm1vdXNlKHdpbiwgYm9keSwgaXNSb290LCBhbm5vdGF0aW9ucyk7XG4gICAgY29uc3Qga2V5SGFuZGxlcnMgPSBJbnB1dEhhbmRsZXJzLmtleWJvYXJkKHdpbiwgYm9keSwgaXNSb290LCBhbm5vdGF0aW9ucyk7XG4gICAgY29uc3QgZXh0ZXJuYWwgPSBJbnB1dEhhbmRsZXJzLmV4dGVybmFsKHdpbiwgYm9keSwgaXNSb290LCBhbm5vdGF0aW9ucyk7XG4gICAgY29uc3QgaGFzU2hpZnRLZXkgPSAoZXZlbnQ6IEV2ZW50QXJnczxLZXlib2FyZEV2ZW50PikgPT4gZXZlbnQucmF3LnNoaWZ0S2V5ID09PSB0cnVlO1xuXG4gICAgZWRpdG9yLm9uKCdUYWJsZVNlbGVjdG9yQ2hhbmdlJywgKGUpID0+IGV4dGVybmFsKGUuc3RhcnQsIGUuZmluaXNoKSk7XG5cbiAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IChldmVudDogRXZlbnRBcmdzPEtleWJvYXJkRXZlbnQ+LCByZXNwb25zZTogUmVzcG9uc2UpID0+IHtcbiAgICAgIC8vIE9ubHkgaGFuZGxlIHNoaWZ0IGtleSBub24gc2hpZnRrZXkgY2VsbCBuYXZpZ2F0aW9uIGlzIGhhbmRsZWQgYnkgY29yZVxuICAgICAgaWYgKCFoYXNTaGlmdEtleShldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2Uua2lsbCkge1xuICAgICAgICBldmVudC5raWxsKCk7XG4gICAgICB9XG4gICAgICByZXNwb25zZS5zZWxlY3Rpb24uZWFjaCgobnMpID0+IHtcbiAgICAgICAgY29uc3QgcmVsYXRpdmUgPSBTaW1TZWxlY3Rpb24ucmVsYXRpdmUobnMuc3RhcnQsIG5zLmZpbmlzaCk7XG4gICAgICAgIGNvbnN0IHJuZyA9IFNlbGVjdGlvbkRpcmVjdGlvbi5hc0x0clJhbmdlKHdpbiwgcmVsYXRpdmUpO1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNldFJuZyhybmcpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGtleXVwID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB3cmFwcGVkRXZlbnQgPSBEb21FdmVudC5mcm9tUmF3RXZlbnQoZXZlbnQpO1xuICAgICAgLy8gTm90ZSwgdGhpcyBpcyBhbiBvcHRpbWlzYXRpb24uXG4gICAgICBpZiAod3JhcHBlZEV2ZW50LnJhdy5zaGlmdEtleSAmJiBTZWxlY3Rpb25LZXlzLmlzTmF2aWdhdGlvbih3cmFwcGVkRXZlbnQucmF3LndoaWNoKSkge1xuICAgICAgICBjb25zdCBybmcgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldFJuZygpO1xuICAgICAgICBjb25zdCBzdGFydCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJuZy5zdGFydENvbnRhaW5lcik7XG4gICAgICAgIGNvbnN0IGVuZCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJuZy5lbmRDb250YWluZXIpO1xuICAgICAgICBrZXlIYW5kbGVycy5rZXl1cCh3cmFwcGVkRXZlbnQsIHN0YXJ0LCBybmcuc3RhcnRPZmZzZXQsIGVuZCwgcm5nLmVuZE9mZnNldCkuZWFjaCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBoYW5kbGVSZXNwb25zZSh3cmFwcGVkRXZlbnQsIHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGtleWRvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHdyYXBwZWRFdmVudCA9IERvbUV2ZW50LmZyb21SYXdFdmVudChldmVudCk7XG4gICAgICByZXNpemVIYW5kbGVyLmhpZGUoKTtcblxuICAgICAgY29uc3Qgcm5nID0gZWRpdG9yLnNlbGVjdGlvbi5nZXRSbmcoKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gU3VnYXJFbGVtZW50LmZyb21Eb20ocm5nLnN0YXJ0Q29udGFpbmVyKTtcbiAgICAgIGNvbnN0IGVuZCA9IFN1Z2FyRWxlbWVudC5mcm9tRG9tKHJuZy5lbmRDb250YWluZXIpO1xuICAgICAgY29uc3QgZGlyZWN0aW9uID0gRGlyZWN0aW9uLm9uRGlyZWN0aW9uKFNlbGVjdGlvbktleXMubHRyLCBTZWxlY3Rpb25LZXlzLnJ0bCkoU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLnNlbGVjdGlvbi5nZXRTdGFydCgpKSk7XG4gICAgICBrZXlIYW5kbGVycy5rZXlkb3duKHdyYXBwZWRFdmVudCwgc3RhcnQsIHJuZy5zdGFydE9mZnNldCwgZW5kLCBybmcuZW5kT2Zmc2V0LCBkaXJlY3Rpb24pLmVhY2goKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGhhbmRsZVJlc3BvbnNlKHdyYXBwZWRFdmVudCwgcmVzcG9uc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIHJlc2l6ZUhhbmRsZXIuc2hvdygpO1xuICAgIH07XG5cbiAgICBjb25zdCBpc0xlZnRNb3VzZSA9IChyYXc6IE1vdXNlRXZlbnQpID0+IHJhdy5idXR0b24gPT09IDA7XG5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudC9idXR0b25zXG4gICAgY29uc3QgaXNMZWZ0QnV0dG9uUHJlc3NlZCA9IChyYXc6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIE9ubHkgYWRkZWQgYnkgQ2hyb21lL0ZpcmVmb3ggaW4gSnVuZSAyMDE1LlxuICAgICAgLy8gVGhpcyBpcyBvbmx5IHRvIGZpeCBhIDFweCBidWcgKFRCSU8tMjgzNikgc28gcmV0dXJuIHRydWUgaWYgd2UncmUgb24gYW4gb2xkZXIgYnJvd3NlclxuICAgICAgaWYgKHJhdy5idXR0b25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHVzZSBiaXR3aXNlICYgZm9yIG9wdGltYWwgY29tcGFyaXNvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICAgIHJldHVybiAocmF3LmJ1dHRvbnMgJiAxKSAhPT0gMDtcbiAgICB9O1xuXG4gICAgY29uc3QgZHJhZ1N0YXJ0ID0gKF9lOiBFZGl0b3JFdmVudDxEcmFnRXZlbnQ+KSA9PiB7XG4gICAgICBtb3VzZUhhbmRsZXJzLmNsZWFyc3RhdGUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgbW91c2VEb3duID0gKGU6IEVkaXRvckV2ZW50PE1vdXNlRXZlbnQ+KSA9PiB7XG4gICAgICBpZiAoaXNMZWZ0TW91c2UoZSkgJiYgaGFzSW50ZXJuYWxUYXJnZXQoZSkpIHtcbiAgICAgICAgbW91c2VIYW5kbGVycy5tb3VzZWRvd24oRG9tRXZlbnQuZnJvbVJhd0V2ZW50KGUpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdXNlT3ZlciA9IChlOiBFZGl0b3JFdmVudDxNb3VzZUV2ZW50PikgPT4ge1xuICAgICAgaWYgKGlzTGVmdEJ1dHRvblByZXNzZWQoZSkgJiYgaGFzSW50ZXJuYWxUYXJnZXQoZSkpIHtcbiAgICAgICAgbW91c2VIYW5kbGVycy5tb3VzZW92ZXIoRG9tRXZlbnQuZnJvbVJhd0V2ZW50KGUpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG1vdXNlVXAgPSAoZTogRWRpdG9yRXZlbnQ8TW91c2VFdmVudD4pID0+IHtcbiAgICAgIGlmIChpc0xlZnRNb3VzZShlKSAmJiBoYXNJbnRlcm5hbFRhcmdldChlKSkge1xuICAgICAgICBtb3VzZUhhbmRsZXJzLm1vdXNldXAoRG9tRXZlbnQuZnJvbVJhd0V2ZW50KGUpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0RG91YmxlVGFwID0gKCkgPT4ge1xuICAgICAgY29uc3QgbGFzdFRhcmdldCA9IENlbGw8U3VnYXJFbGVtZW50PihTdWdhckVsZW1lbnQuZnJvbURvbShib2R5IGFzIGFueSkpO1xuICAgICAgY29uc3QgbGFzdFRpbWVTdGFtcCA9IENlbGw8bnVtYmVyPigwKTtcblxuICAgICAgY29uc3QgdG91Y2hFbmQgPSAodDogVG91Y2hFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBTdWdhckVsZW1lbnQuZnJvbURvbSh0LnRhcmdldCBhcyBOb2RlKTtcbiAgICAgICAgaWYgKFN1Z2FyTm9kZS5pc1RhZygndGQnKSh0YXJnZXQpIHx8IFN1Z2FyTm9kZS5pc1RhZygndGgnKSh0YXJnZXQpKSB7XG4gICAgICAgICAgY29uc3QgbFQgPSBsYXN0VGFyZ2V0LmdldCgpO1xuICAgICAgICAgIGNvbnN0IGxUUyA9IGxhc3RUaW1lU3RhbXAuZ2V0KCk7XG4gICAgICAgICAgaWYgKENvbXBhcmUuZXEobFQsIHRhcmdldCkgJiYgKHQudGltZVN0YW1wIC0gbFRTKSA8IDMwMCkge1xuICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXh0ZXJuYWwodGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsYXN0VGFyZ2V0LnNldCh0YXJnZXQpO1xuICAgICAgICBsYXN0VGltZVN0YW1wLnNldCh0LnRpbWVTdGFtcCk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG91Y2hFbmRcbiAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0IGRvdWJsZVRhcCA9IGdldERvdWJsZVRhcCgpO1xuXG4gICAgZWRpdG9yLm9uKCdkcmFnc3RhcnQnLCBkcmFnU3RhcnQpO1xuICAgIGVkaXRvci5vbignbW91c2Vkb3duJywgbW91c2VEb3duKTtcbiAgICBlZGl0b3Iub24oJ21vdXNlb3ZlcicsIG1vdXNlT3Zlcik7XG4gICAgZWRpdG9yLm9uKCdtb3VzZXVwJywgbW91c2VVcCk7XG4gICAgZWRpdG9yLm9uKCd0b3VjaGVuZCcsIGRvdWJsZVRhcC50b3VjaEVuZCk7XG4gICAgZWRpdG9yLm9uKCdrZXl1cCcsIGtleXVwKTtcbiAgICBlZGl0b3Iub24oJ2tleWRvd24nLCBrZXlkb3duKTtcbiAgICBlZGl0b3Iub24oJ05vZGVDaGFuZ2UnLCBzeW5jU2VsZWN0aW9uKTtcbiAgfSk7XG5cbiAgZWRpdG9yLm9uKCdQcmVJbml0JywgKCkgPT4ge1xuICAgIGVkaXRvci5zZXJpYWxpemVyLmFkZFRlbXBBdHRyKGVwaGVtZXJhLmZpcnN0U2VsZWN0ZWQpO1xuICAgIGVkaXRvci5zZXJpYWxpemVyLmFkZFRlbXBBdHRyKGVwaGVtZXJhLmxhc3RTZWxlY3RlZCk7XG4gIH0pO1xuXG4gIGNvbnN0IGNsZWFyU2VsZWN0ZWRDZWxscyA9IChjb250YWluZXI6IE5vZGUpID0+XG4gICAgYW5ub3RhdGlvbnMuY2xlYXIoU3VnYXJFbGVtZW50LmZyb21Eb20oY29udGFpbmVyKSk7XG5cbiAgY29uc3QgZ2V0U2VsZWN0ZWRDZWxscyA9ICgpOiBIVE1MVGFibGVDZWxsRWxlbWVudFtdID0+XG4gICAgU2VsZWN0aW9uVHlwZXMuZm9sZDxIVE1MVGFibGVDZWxsRWxlbWVudFtdPihjZWxsU2VsZWN0aW9uLmdldCgpLFxuICAgICAgLy8gTm8gZmFrZSBzZWxlY3RlZCBjZWxsc1xuICAgICAgRnVuLmNvbnN0YW50KFtdKSxcbiAgICAgIC8vIFRoaXMgcGF0aCBpcyB0YWtlbiB3aGVuZXZlciB0aGVyZSBpcyBmYWtlIGNlbGwgc2VsZWN0aW9uIGV2ZW4gZm9yIGp1c3QgYSBzaW5nbGUgc2VsZWN0ZWQgY2VsbFxuICAgICAgKGNlbGxzKSA9PiB7XG4gICAgICAgIHJldHVybiBBcnIubWFwKGNlbGxzLCAoY2VsbCkgPT4gY2VsbC5kb20pO1xuICAgICAgfSxcbiAgICAgIC8vIEZvciB0aGlzIHBhdGgsIHRoZSBzdGFydCBvZiB0aGUgc2VsZWN0aW9uIHdoZXRoZXIgY29sbGFwc2VkIG9yIHJhbmdlZCBpcyB3aXRoaW4gYSB0YWJsZSBjZWxsXG4gICAgICAoY2VsbCkgPT4gWyBjZWxsLmRvbSBdXG4gICAgKTtcblxuICByZXR1cm4ge1xuICAgIGdldFNlbGVjdGVkQ2VsbHMsXG4gICAgY2xlYXJTZWxlY3RlZENlbGxzXG4gIH07XG59O1xuIiwiaW1wb3J0IHsgQXJyLCBTaW5nbGV0b24sIFN0cmluZ3MsIFR5cGUgfSBmcm9tICdAZXBob3gva2F0YW1hcmknO1xuaW1wb3J0IHsgQWRqdXN0bWVudHMsIFJlc2l6ZUJlaGF2aW91ciwgdHlwZSBSZXNpemVXaXJlLCBTaXplcywgVGFibGVDb252ZXJzaW9ucywgVGFibGVHcmlkU2l6ZSwgVGFibGVMb29rdXAsIFRhYmxlUmVzaXplLCBXYXJlaG91c2UgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgeyBBdHRyaWJ1dGUsIENzcywgU3VnYXJFbGVtZW50IH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcbmltcG9ydCB0eXBlIHsgRGlzYWJsZWRTdGF0ZUNoYW5nZUV2ZW50IH0gZnJvbSAndGlueW1jZS9jb3JlL2FwaS9FdmVudFR5cGVzJztcbmltcG9ydCB0eXBlIHsgRWRpdG9yRXZlbnQgfSBmcm9tICd0aW55bWNlL2NvcmUvYXBpL3V0aWwvRXZlbnREaXNwYXRjaGVyJztcblxuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi4vY29yZS9UYWJsZVV0aWxzJztcbmltcG9ydCAqIGFzIFRhYmxlV2lyZSBmcm9tICcuLi9jb3JlL1RhYmxlV2lyZSc7XG5pbXBvcnQgKiBhcyBUYWJsZVNpemUgZnJvbSAnLi4vcXVlcmllcy9UYWJsZVNpemUnO1xuXG5pbXBvcnQgKiBhcyBFdmVudHMgZnJvbSAnLi9FdmVudHMnO1xuaW1wb3J0ICogYXMgT3B0aW9ucyBmcm9tICcuL09wdGlvbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlUmVzaXplSGFuZGxlciB7XG4gIHJlYWRvbmx5IHJlZnJlc2g6ICh0YWJsZTogSFRNTFRhYmxlRWxlbWVudCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgaGlkZTogKCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgc2hvdzogKCkgPT4gdm9pZDtcbn1cblxudHlwZSBDb3JuZXJMb2NhdGlvbiA9ICdudycgfCAnbmUnIHwgJ3NlJyB8ICdzdyc7XG50eXBlIENvcm5lck9yaWdpbiA9IGBjb3JuZXItJHtDb3JuZXJMb2NhdGlvbn1gO1xuXG5jb25zdCBpc1RhYmxlID0gKG5vZGU6IE5vZGUpID0+IFR5cGUuaXNOb25OdWxsYWJsZShub2RlKSAmJiBub2RlLm5vZGVOYW1lID09PSAnVEFCTEUnO1xuXG5jb25zdCBiYXJSZXNpemVyUHJlZml4ID0gJ2Jhci0nO1xuY29uc3QgaXNSZXNpemFibGUgPSAoZWxtOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4pID0+IEF0dHJpYnV0ZS5nZXQoZWxtLCAnZGF0YS1tY2UtcmVzaXplJykgIT09ICdmYWxzZSc7XG5cbmNvbnN0IHN5bmNUYWJsZUNlbGxQaXhlbHMgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBjb25zdCB3YXJlaG91c2UgPSBXYXJlaG91c2UuZnJvbVRhYmxlKHRhYmxlKTtcbiAgaWYgKCFXYXJlaG91c2UuaGFzQ29sdW1ucyh3YXJlaG91c2UpKSB7XG4gICAgLy8gRW5zdXJlIHRoZSBzcGVjaWZpZWQgd2lkdGggbWF0Y2hlcyB0aGUgYWN0dWFsIGNlbGwgd2lkdGhcbiAgICBBcnIuZWFjaChUYWJsZUxvb2t1cC5jZWxscyh0YWJsZSksIChjZWxsKSA9PiB7XG4gICAgICBjb25zdCBjb21wdXRlZFdpZHRoID0gQ3NzLmdldChjZWxsLCAnd2lkdGgnKTtcbiAgICAgIENzcy5zZXQoY2VsbCwgJ3dpZHRoJywgY29tcHV0ZWRXaWR0aCk7XG4gICAgICBBdHRyaWJ1dGUucmVtb3ZlKGNlbGwsICd3aWR0aCcpO1xuICAgIH0pO1xuICB9XG59O1xuXG5jb25zdCBpc0Nvcm5lclJlc2l6ZSA9IChvcmlnaW46IHN0cmluZyk6IG9yaWdpbiBpcyBDb3JuZXJPcmlnaW4gPT5cbiAgU3RyaW5ncy5zdGFydHNXaXRoKG9yaWdpbiwgJ2Nvcm5lci0nKTtcblxuY29uc3QgZ2V0Q29ybmVyTG9jYXRpb24gPSAob3JpZ2luOiBDb3JuZXJPcmlnaW4pOiBDb3JuZXJMb2NhdGlvbiA9PlxuICBTdHJpbmdzLnJlbW92ZUxlYWRpbmcob3JpZ2luLCAnY29ybmVyLScpIGFzIENvcm5lckxvY2F0aW9uO1xuXG5leHBvcnQgY29uc3QgVGFibGVSZXNpemVIYW5kbGVyID0gKGVkaXRvcjogRWRpdG9yKTogVGFibGVSZXNpemVIYW5kbGVyID0+IHtcbiAgY29uc3Qgc2VsZWN0aW9uUm5nID0gU2luZ2xldG9uLnZhbHVlPFJhbmdlPigpO1xuICBjb25zdCB0YWJsZVJlc2l6ZSA9IFNpbmdsZXRvbi52YWx1ZTxUYWJsZVJlc2l6ZT4oKTtcbiAgY29uc3QgcmVzaXplV2lyZSA9IFNpbmdsZXRvbi52YWx1ZTxSZXNpemVXaXJlPigpO1xuICBsZXQgc3RhcnRXOiBudW1iZXI7XG4gIGxldCBzdGFydFJhd1c6IHN0cmluZztcbiAgbGV0IHN0YXJ0SDogbnVtYmVyO1xuICBsZXQgc3RhcnRSYXdIOiBzdHJpbmc7XG5cbiAgY29uc3QgbGF6eVNpemluZyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PlxuICAgIFRhYmxlU2l6ZS5nZXQoZWRpdG9yLCB0YWJsZSk7XG5cbiAgY29uc3QgbGF6eVJlc2l6aW5nQmVoYXZpb3VyID0gKCkgPT5cbiAgICBPcHRpb25zLmlzUHJlc2VydmVUYWJsZUNvbHVtblJlc2l6aW5nKGVkaXRvcikgPyBSZXNpemVCZWhhdmlvdXIucHJlc2VydmVUYWJsZSgpIDogUmVzaXplQmVoYXZpb3VyLnJlc2l6ZVRhYmxlKCk7XG5cbiAgY29uc3QgZ2V0TnVtQ29sdW1ucyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PlxuICAgIFRhYmxlR3JpZFNpemUuZ2V0R3JpZFNpemUodGFibGUpLmNvbHVtbnM7XG5cbiAgY29uc3QgZ2V0TnVtUm93cyA9ICh0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KSA9PlxuICAgIFRhYmxlR3JpZFNpemUuZ2V0R3JpZFNpemUodGFibGUpLnJvd3M7XG5cbiAgY29uc3QgYWZ0ZXJDb3JuZXJSZXNpemUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Piwgb3JpZ2luOiBDb3JuZXJPcmlnaW4sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgLy8gT3JpZ2luIHdpbGwgdGVsbCB1cyB3aGljaCBoYW5kbGUgd2FzIGNsaWNrZWQsIGVnIGNvcm5lci1zZSBvciBjb3JuZXItbndcbiAgICAvLyBzbyBjaGVjayB0byBzZWUgaWYgaXQgZW5kcyB3aXRoIGBlYCAoZWcgZWFzdCBlZGdlKVxuICAgIGNvbnN0IGxvY2F0aW9uID0gZ2V0Q29ybmVyTG9jYXRpb24ob3JpZ2luKTtcbiAgICBjb25zdCBpc1JpZ2h0RWRnZVJlc2l6ZSA9IFN0cmluZ3MuZW5kc1dpdGgobG9jYXRpb24sICdlJyk7XG4gICAgY29uc3QgaXNOb3J0aEVkZ2VSZXNpemUgPSBTdHJpbmdzLnN0YXJ0c1dpdGgobG9jYXRpb24sICduJyk7XG5cbiAgICAvLyBSZXNwb25zaXZlIHRhYmxlcyBkb24ndCBoYXZlIGEgd2lkdGggc28gd2UgbmVlZCB0byBjb252ZXJ0IGl0IHRvIGEgcmVsYXRpdmUvcGVyY2VudFxuICAgIC8vIHRhYmxlIGluc3RlYWQsIGFzIHRoYXQncyBjbG9zZXIgdG8gcmVzcG9uc2l2ZSBzaXppbmcgdGhhbiBmaXhlZCBzaXppbmdcbiAgICBpZiAoc3RhcnRSYXdXID09PSAnJykge1xuICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoKHRhYmxlKTtcbiAgICB9XG5cbiAgICAvLyBSZXNwb25zaXZlIHRhYmxlcyBkb24ndCBoYXZlIGEgaGVpZ2h0IHNvIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBhIGZpeGVkIHZhbHVlIHRvIGJlIGFibGUgdG8gcmVzaXplIHRoZSB0YWJsZSBoZWlnaHRcbiAgICBpZiAoc3RhcnRSYXdIID09PSAnJykge1xuICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QaXhlbFNpemVIZWlnaHQodGFibGUpO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCB0aGUgY29sdW1uIHNpemVzIGFuZCB1cGRhdGUgdGhlIHRhYmxlIHdpZHRoIHRvIHVzZSB0aGUgcmlnaHQgc2l6aW5nLCBpZiB0aGUgdGFibGUgY2hhbmdlZCBzaXplLlxuICAgIC8vIFRoaXMgaXMgbmVlZGVkIGFzIGNvcmUgd2lsbCBhbHdheXMgdXNlIHBpeGVscyB3aGVuIHNldHRpbmcgdGhlIHdpZHRoLlxuICAgIGlmICh3aWR0aCAhPT0gc3RhcnRXICYmIHN0YXJ0UmF3VyAhPT0gJycpIHtcbiAgICAgIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIHNpemUgYW5kIHRoZW4gbGV0IHNub29rZXIgcmVzaXplIGFwcHJvcHJpYXRlbHlcbiAgICAgIENzcy5zZXQodGFibGUsICd3aWR0aCcsIHN0YXJ0UmF3Vyk7XG5cbiAgICAgIGNvbnN0IHJlc2l6aW5nID0gbGF6eVJlc2l6aW5nQmVoYXZpb3VyKCk7XG4gICAgICBjb25zdCB0YWJsZVNpemUgPSBsYXp5U2l6aW5nKHRhYmxlKTtcblxuICAgICAgLy8gRm9yIHByZXNlcnZlIHRhYmxlIHdlIHdhbnQgdG8gYWx3YXlzIHJlc2l6ZSB0aGUgZW50aXJlIHRhYmxlLiBTbyBwcmV0ZW5kIHRoZSBsYXN0IGNvbHVtbiBpcyBiZWluZyByZXNpemVkXG4gICAgICBjb25zdCBjb2wgPSBPcHRpb25zLmlzUHJlc2VydmVUYWJsZUNvbHVtblJlc2l6aW5nKGVkaXRvcikgfHwgaXNSaWdodEVkZ2VSZXNpemUgPyBnZXROdW1Db2x1bW5zKHRhYmxlKSAtIDEgOiAwO1xuICAgICAgQWRqdXN0bWVudHMuYWRqdXN0V2lkdGgodGFibGUsIHdpZHRoIC0gc3RhcnRXLCBjb2wsIHJlc2l6aW5nLCB0YWJsZVNpemUpO1xuICAgICAgLy8gSGFuZGxlIHRoZSBlZGdlIGNhc2Ugd2hlcmUgc29tZW9uZSBtaWdodCBmaXJlIHRoaXMgZXZlbnQgd2l0aG91dCByZXNpemluZy5cbiAgICAgIC8vIElmIHNvIHRoZW4gd2UgbmVlZCB0byBlbnN1cmUgdGhlIHRhYmxlIGlzIHN0aWxsIHVzaW5nIHBlcmNlbnRcbiAgICB9IGVsc2UgaWYgKFV0aWxzLmlzUGVyY2VudGFnZShzdGFydFJhd1cpKSB7XG4gICAgICBjb25zdCBwZXJjZW50VyA9IHBhcnNlRmxvYXQoc3RhcnRSYXdXLnJlcGxhY2UoJyUnLCAnJykpO1xuICAgICAgY29uc3QgdGFyZ2V0UGVyY2VudFcgPSB3aWR0aCAqIHBlcmNlbnRXIC8gc3RhcnRXO1xuICAgICAgQ3NzLnNldCh0YWJsZSwgJ3dpZHRoJywgdGFyZ2V0UGVyY2VudFcgKyAnJScpO1xuICAgIH1cblxuICAgIC8vIFN5bmMgdGhlIGNlbGwgc2l6ZXMsIGFzIHRoZSBjb3JlIHJlc2l6aW5nIGxvZ2ljIGRvZXNuJ3QgdXBkYXRlIHRoZW0sIGJ1dCBzbm9va2VyIGRvZXNcbiAgICBpZiAoVXRpbHMuaXNQaXhlbChzdGFydFJhd1cpKSB7XG4gICAgICBzeW5jVGFibGVDZWxsUGl4ZWxzKHRhYmxlKTtcbiAgICB9XG5cbiAgICAvLyBOT1RFOiBUaGlzIHdpbGwgb25seSBjaGFuZ2UgdGhlIGhlaWdodCBvZiB0aGUgZmlyc3Qgb3IgbGFzdCB0clxuICAgIGlmIChoZWlnaHQgIT09IHN0YXJ0SCAmJiBzdGFydFJhd0ggIT09ICcnKSB7XG4gICAgICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBzaXplIGFuZCB0aGVuIGxldCBzbm9va2VyIHJlc2l6ZSBhcHByb3ByaWF0ZWx5XG4gICAgICBDc3Muc2V0KHRhYmxlLCAnaGVpZ2h0Jywgc3RhcnRSYXdIKTtcbiAgICAgIGNvbnN0IGlkeCA9IGlzTm9ydGhFZGdlUmVzaXplID8gMCA6IGdldE51bVJvd3ModGFibGUpIC0gMTtcbiAgICAgIEFkanVzdG1lbnRzLmFkanVzdEhlaWdodCh0YWJsZSwgaGVpZ2h0IC0gc3RhcnRILCBpZHgpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xuICAgIHRhYmxlUmVzaXplLm9uKChzeikgPT4ge1xuICAgICAgc3ouZGVzdHJveSgpO1xuICAgIH0pO1xuICB9O1xuXG4gIGVkaXRvci5vbignaW5pdCcsICgpID0+IHtcbiAgICBjb25zdCByYXdXaXJlID0gVGFibGVXaXJlLmdldChlZGl0b3IsIGlzUmVzaXphYmxlKTtcbiAgICByZXNpemVXaXJlLnNldChyYXdXaXJlKTtcbiAgICBpZiAoT3B0aW9ucy5oYXNUYWJsZU9iamVjdFJlc2l6aW5nKGVkaXRvcikgJiYgT3B0aW9ucy5oYXNUYWJsZVJlc2l6ZUJhcnMoZWRpdG9yKSkge1xuICAgICAgY29uc3QgcmVzaXppbmcgPSBsYXp5UmVzaXppbmdCZWhhdmlvdXIoKTtcbiAgICAgIGNvbnN0IHN6ID0gVGFibGVSZXNpemUuY3JlYXRlKHJhd1dpcmUsIHJlc2l6aW5nLCBsYXp5U2l6aW5nKTtcblxuICAgICAgaWYgKCFlZGl0b3IubW9kZS5pc1JlYWRPbmx5KCkpIHtcbiAgICAgICAgc3oub24oKTtcbiAgICAgIH1cblxuICAgICAgc3ouZXZlbnRzLnN0YXJ0RHJhZy5iaW5kKChfZXZlbnQpID0+IHtcbiAgICAgICAgc2VsZWN0aW9uUm5nLnNldChlZGl0b3Iuc2VsZWN0aW9uLmdldFJuZygpKTtcbiAgICAgIH0pO1xuXG4gICAgICBzei5ldmVudHMuYmVmb3JlUmVzaXplLmJpbmQoKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHJhd1RhYmxlID0gZXZlbnQudGFibGUuZG9tO1xuICAgICAgICBFdmVudHMuZmlyZU9iamVjdFJlc2l6ZVN0YXJ0KGVkaXRvciwgcmF3VGFibGUsIFV0aWxzLmdldFBpeGVsV2lkdGgocmF3VGFibGUpLCBVdGlscy5nZXRQaXhlbEhlaWdodChyYXdUYWJsZSksIGJhclJlc2l6ZXJQcmVmaXggKyBldmVudC50eXBlKTtcbiAgICAgIH0pO1xuXG4gICAgICBzei5ldmVudHMuYWZ0ZXJSZXNpemUuYmluZCgoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFibGUgPSBldmVudC50YWJsZTtcbiAgICAgICAgY29uc3QgcmF3VGFibGUgPSB0YWJsZS5kb207XG4gICAgICAgIFV0aWxzLnJlbW92ZURhdGFTdHlsZSh0YWJsZSk7XG5cbiAgICAgICAgc2VsZWN0aW9uUm5nLm9uKChybmcpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNldFJuZyhybmcpO1xuICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBFdmVudHMuZmlyZU9iamVjdFJlc2l6ZWQoZWRpdG9yLCByYXdUYWJsZSwgVXRpbHMuZ2V0UGl4ZWxXaWR0aChyYXdUYWJsZSksIFV0aWxzLmdldFBpeGVsSGVpZ2h0KHJhd1RhYmxlKSwgYmFyUmVzaXplclByZWZpeCArIGV2ZW50LnR5cGUpO1xuICAgICAgICBlZGl0b3IudW5kb01hbmFnZXIuYWRkKCk7XG4gICAgICB9KTtcblxuICAgICAgdGFibGVSZXNpemUuc2V0KHN6KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIElmIHdlJ3JlIHVwZGF0aW5nIHRoZSB0YWJsZSB3aWR0aCB2aWEgdGhlIG9sZCBtZWNoYW5pYywgd2UgbmVlZCB0byB1cGRhdGUgdGhlIGNvbnN0aXR1ZW50IGNlbGxzJyB3aWR0aHMvaGVpZ2h0cyB0b28uXG4gIGVkaXRvci5vbignT2JqZWN0UmVzaXplU3RhcnQnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldEVsbSA9IGUudGFyZ2V0O1xuICAgIGlmIChpc1RhYmxlKHRhcmdldEVsbSkgJiYgIWVkaXRvci5tb2RlLmlzUmVhZE9ubHkoKSkge1xuICAgICAgY29uc3QgdGFibGUgPSBTdWdhckVsZW1lbnQuZnJvbURvbSh0YXJnZXRFbG0pO1xuXG4gICAgICAvLyBBZGQgYSBjbGFzcyBiYXNlZCBvbiB0aGUgcmVzaXppbmcgbW9kZVxuICAgICAgQXJyLmVhY2goZWRpdG9yLmRvbS5zZWxlY3QoJy5tY2UtY2xvbmVkcmVzaXphYmxlJyksIChjbG9uZSkgPT4ge1xuICAgICAgICBlZGl0b3IuZG9tLmFkZENsYXNzKGNsb25lLCAnbWNlLScgKyBPcHRpb25zLmdldFRhYmxlQ29sdW1uUmVzaXppbmdCZWhhdmlvdXIoZWRpdG9yKSArICctY29sdW1ucycpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghU2l6ZXMuaXNQaXhlbFNpemluZyh0YWJsZSkgJiYgT3B0aW9ucy5pc1RhYmxlUGl4ZWxzRm9yY2VkKGVkaXRvcikpIHtcbiAgICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QaXhlbFNpemVXaWR0aCh0YWJsZSk7XG4gICAgICB9IGVsc2UgaWYgKCFTaXplcy5pc1BlcmNlbnRTaXppbmcodGFibGUpICYmIE9wdGlvbnMuaXNUYWJsZVBlcmNlbnRhZ2VzRm9yY2VkKGVkaXRvcikpIHtcbiAgICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoKHRhYmxlKTtcbiAgICAgIH1cblxuICAgICAgLy8gVElOWS02NjAxOiBJZiByZXNpemluZyB1c2luZyBhIGJhciwgdGhlbiBzbm9va2VyIHdpbGwgYmFzZSB0aGUgcmVzaXppbmcgb24gdGhlIGluaXRpYWwgc2l6ZS4gU29cbiAgICAgIC8vIHdoZW4gdXNpbmcgYSByZXNwb25zaXZlIHRhYmxlIHdlIG5lZWQgdG8gZW5zdXJlIHdlIGNvbnZlcnQgdG8gYSByZWxhdGl2ZSB0YWJsZSBiZWZvcmUgcmVzaXppbmdcbiAgICAgIGlmIChTaXplcy5pc05vbmVTaXppbmcodGFibGUpICYmIFN0cmluZ3Muc3RhcnRzV2l0aChlLm9yaWdpbiwgYmFyUmVzaXplclByZWZpeCkpIHtcbiAgICAgICAgVGFibGVDb252ZXJzaW9ucy5jb252ZXJ0VG9QZXJjZW50U2l6ZVdpZHRoKHRhYmxlKTtcbiAgICAgIH1cblxuICAgICAgc3RhcnRXID0gZS53aWR0aDtcbiAgICAgIHN0YXJ0UmF3VyA9IE9wdGlvbnMuaXNUYWJsZVJlc3BvbnNpdmVGb3JjZWQoZWRpdG9yKSA/ICcnIDogVXRpbHMuZ2V0UmF3V2lkdGgoZWRpdG9yLCB0YXJnZXRFbG0pLmdldE9yKCcnKTtcbiAgICAgIHN0YXJ0SCA9IGUuaGVpZ2h0O1xuICAgICAgc3RhcnRSYXdIID0gVXRpbHMuZ2V0UmF3SGVpZ2h0KGVkaXRvciwgdGFyZ2V0RWxtKS5nZXRPcignJyk7XG4gICAgfVxuICB9KTtcblxuICBlZGl0b3Iub24oJ09iamVjdFJlc2l6ZWQnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldEVsbSA9IGUudGFyZ2V0O1xuICAgIGlmIChpc1RhYmxlKHRhcmdldEVsbSkpIHtcbiAgICAgIGNvbnN0IHRhYmxlID0gU3VnYXJFbGVtZW50LmZyb21Eb20odGFyZ2V0RWxtKTtcblxuICAgICAgLy8gUmVzaXplIGJhc2VkIG9uIHRoZSBzbm9va2VyIGxvZ2ljIHRvIGFkanVzdCB0aGUgaW5kaXZpZHVhbCBjb2wvcm93cyBpZiByZXNpemVkIGZyb20gYSBjb3JuZXJcbiAgICAgIGNvbnN0IG9yaWdpbiA9IGUub3JpZ2luO1xuICAgICAgaWYgKGlzQ29ybmVyUmVzaXplKG9yaWdpbikpIHtcbiAgICAgICAgYWZ0ZXJDb3JuZXJSZXNpemUodGFibGUsIG9yaWdpbiwgZS53aWR0aCwgZS5oZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICBVdGlscy5yZW1vdmVEYXRhU3R5bGUodGFibGUpO1xuICAgICAgRXZlbnRzLmZpcmVUYWJsZU1vZGlmaWVkKGVkaXRvciwgdGFibGUuZG9tLCBFdmVudHMuc3R5bGVNb2RpZmllZCk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBzaG93UmVzaXplQmFycyA9ICgpID0+IHtcbiAgICB0YWJsZVJlc2l6ZS5vbigocmVzaXplKSA9PiB7XG4gICAgICByZXNpemUub24oKTtcbiAgICAgIHJlc2l6ZS5zaG93QmFycygpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhpZGVSZXNpemVCYXJzID0gKCkgPT4ge1xuICAgIHRhYmxlUmVzaXplLm9uKChyZXNpemUpID0+IHtcbiAgICAgIHJlc2l6ZS5vZmYoKTtcbiAgICAgIHJlc2l6ZS5oaWRlQmFycygpO1xuICAgIH0pO1xuICB9O1xuXG4gIGVkaXRvci5vbignRGlzYWJsZWRTdGF0ZUNoYW5nZScsIChlOiBFZGl0b3JFdmVudDxEaXNhYmxlZFN0YXRlQ2hhbmdlRXZlbnQ+KSA9PiB7XG4gICAgZS5zdGF0ZSA/IGhpZGVSZXNpemVCYXJzKCkgOiBzaG93UmVzaXplQmFycygpO1xuICB9KTtcblxuICBlZGl0b3Iub24oJ1N3aXRjaE1vZGUnLCAoKSA9PiB7XG4gICAgZWRpdG9yLm1vZGUuaXNSZWFkT25seSgpID8gaGlkZVJlc2l6ZUJhcnMoKSA6IHNob3dSZXNpemVCYXJzKCk7XG4gIH0pO1xuXG4gIGVkaXRvci5vbignZHJhZ3N0YXJ0IGRyYWdlbmQnLCAoZTogRWRpdG9yRXZlbnQ8RHJhZ0V2ZW50PikgPT4ge1xuICAgIGUudHlwZSA9PT0gJ2RyYWdzdGFydCcgPyBoaWRlUmVzaXplQmFycygpIDogc2hvd1Jlc2l6ZUJhcnMoKTtcbiAgfSk7XG5cbiAgZWRpdG9yLm9uKCdyZW1vdmUnLCAoKSA9PiB7XG4gICAgZGVzdHJveSgpO1xuICB9KTtcblxuICBjb25zdCByZWZyZXNoID0gKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50KTogdm9pZCA9PiB7XG4gICAgdGFibGVSZXNpemUub24oKHJlc2l6ZSkgPT4gcmVzaXplLnJlZnJlc2hCYXJzKFN1Z2FyRWxlbWVudC5mcm9tRG9tKHRhYmxlKSkpO1xuICB9O1xuXG4gIGNvbnN0IGhpZGUgPSAoKTogdm9pZCA9PiB7XG4gICAgdGFibGVSZXNpemUub24oKHJlc2l6ZSkgPT4gcmVzaXplLmhpZGVCYXJzKCkpO1xuICB9O1xuXG4gIGNvbnN0IHNob3cgPSAoKTogdm9pZCA9PiB7XG4gICAgdGFibGVSZXNpemUub24oKHJlc2l6ZSkgPT4gcmVzaXplLnNob3dCYXJzKCkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVmcmVzaCxcbiAgICBoaWRlLFxuICAgIHNob3dcbiAgfTtcbn07XG4iLCIvKlxuIE5PVEU6IFRoaXMgZmlsZSBpcyBwYXJ0aWFsbHkgZHVwbGljYXRlZCBpbiB0aGUgZm9sbG93aW5nIGxvY2F0aW9uczpcbiAgLSBwbHVnaW5zL3RhYmxlL2NvcmUvVXRpbHMudHNcbiAgLSBhZHZ0YWJsZVxuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgeyBBcnIsIE9wdGlvbmFsLCBTdHJpbmdzIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB7IFRhYmxlTG9va3VwIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHsgQXR0cmlidXRlLCBDb21wYXJlLCBDb250ZW50RWRpdGFibGUsIFByZWRpY2F0ZUZpbmQsIFN1Z2FyRWxlbWVudCwgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcblxuY29uc3QgZ2V0Qm9keSA9IChlZGl0b3I6IEVkaXRvcik6IFN1Z2FyRWxlbWVudDxIVE1MRWxlbWVudD4gPT5cbiAgU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLmdldEJvZHkoKSk7XG5cbmNvbnN0IGdldElzUm9vdCA9IChlZGl0b3I6IEVkaXRvcikgPT4gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPik6IGJvb2xlYW4gPT5cbiAgQ29tcGFyZS5lcShlbGVtZW50LCBnZXRCb2R5KGVkaXRvcikpO1xuXG5jb25zdCByZW1vdmVEYXRhU3R5bGUgPSAodGFibGU6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVFbGVtZW50Pik6IHZvaWQgPT4ge1xuICBBdHRyaWJ1dGUucmVtb3ZlKHRhYmxlLCAnZGF0YS1tY2Utc3R5bGUnKTtcblxuICBjb25zdCByZW1vdmVTdHlsZUF0dHJpYnV0ZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTEVsZW1lbnQ+KSA9PiBBdHRyaWJ1dGUucmVtb3ZlKGVsZW1lbnQsICdkYXRhLW1jZS1zdHlsZScpO1xuXG4gIEFyci5lYWNoKFRhYmxlTG9va3VwLmNlbGxzKHRhYmxlKSwgcmVtb3ZlU3R5bGVBdHRyaWJ1dGUpO1xuICBBcnIuZWFjaChUYWJsZUxvb2t1cC5jb2x1bW5zKHRhYmxlKSwgcmVtb3ZlU3R5bGVBdHRyaWJ1dGUpO1xuICBBcnIuZWFjaChUYWJsZUxvb2t1cC5yb3dzKHRhYmxlKSwgcmVtb3ZlU3R5bGVBdHRyaWJ1dGUpO1xufTtcblxuY29uc3QgZ2V0U2VsZWN0aW9uU3RhcnQgPSAoZWRpdG9yOiBFZGl0b3IpOiBTdWdhckVsZW1lbnQ8RWxlbWVudD4gPT5cbiAgU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLnNlbGVjdGlvbi5nZXRTdGFydCgpKTtcblxuY29uc3QgZ2V0U2VsZWN0aW9uRW5kID0gKGVkaXRvcjogRWRpdG9yKTogU3VnYXJFbGVtZW50PEVsZW1lbnQ+ID0+XG4gIFN1Z2FyRWxlbWVudC5mcm9tRG9tKGVkaXRvci5zZWxlY3Rpb24uZ2V0RW5kKCkpO1xuXG5jb25zdCBnZXRQaXhlbFdpZHRoID0gKGVsbTogSFRNTEVsZW1lbnQpOiBudW1iZXIgPT5cbiAgZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuXG5jb25zdCBnZXRQaXhlbEhlaWdodCA9IChlbG06IEhUTUxFbGVtZW50KTogbnVtYmVyID0+XG4gIGVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG5cbmNvbnN0IGdldFJhd1ZhbHVlID0gKHByb3A6IHN0cmluZykgPT4gKGVkaXRvcjogRWRpdG9yLCBlbG06IEhUTUxFbGVtZW50KTogT3B0aW9uYWw8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHJhdyA9IGVkaXRvci5kb20uZ2V0U3R5bGUoZWxtLCBwcm9wKSB8fCBlZGl0b3IuZG9tLmdldEF0dHJpYihlbG0sIHByb3ApO1xuICByZXR1cm4gT3B0aW9uYWwuZnJvbShyYXcpLmZpbHRlcihTdHJpbmdzLmlzTm90RW1wdHkpO1xufTtcblxuY29uc3QgZ2V0UmF3V2lkdGggPSBnZXRSYXdWYWx1ZSgnd2lkdGgnKTtcbmNvbnN0IGdldFJhd0hlaWdodCA9IGdldFJhd1ZhbHVlKCdoZWlnaHQnKTtcblxuY29uc3QgaXNQZXJjZW50YWdlID0gKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuID0+IC9eKFxcZCsoXFwuXFxkKyk/KSUkLy50ZXN0KHZhbHVlKTtcbmNvbnN0IGlzUGl4ZWwgPSAodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4gPT4gL14oXFxkKyhcXC5cXGQrKT8pcHgkLy50ZXN0KHZhbHVlKTtcblxuY29uc3QgaXNJbkVkaXRhYmxlQ29udGV4dCA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDYXB0aW9uRWxlbWVudD4pOiBib29sZWFuID0+XG4gIFByZWRpY2F0ZUZpbmQuY2xvc2VzdChjZWxsLCBTdWdhck5vZGUuaXNUYWcoJ3RhYmxlJykpLmV4aXN0cyhDb250ZW50RWRpdGFibGUuaXNFZGl0YWJsZSk7XG5cbmV4cG9ydCB7XG4gIGdldEJvZHksXG4gIGdldElzUm9vdCxcbiAgcmVtb3ZlRGF0YVN0eWxlLFxuICBnZXRTZWxlY3Rpb25TdGFydCxcbiAgZ2V0U2VsZWN0aW9uRW5kLFxuICBpc1BlcmNlbnRhZ2UsXG4gIGlzUGl4ZWwsXG4gIGdldFBpeGVsV2lkdGgsXG4gIGdldFBpeGVsSGVpZ2h0LFxuICBnZXRSYXdXaWR0aCxcbiAgZ2V0UmF3SGVpZ2h0LFxuICBpc0luRWRpdGFibGVDb250ZXh0XG59O1xuIiwiaW1wb3J0IHsgUmVzaXplV2lyZSB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmNvbnN0IGdldCA9IChlZGl0b3I6IEVkaXRvciwgaXNSZXNpemFibGU6IChlbG06IFN1Z2FyRWxlbWVudDxFbGVtZW50PikgPT4gYm9vbGVhbik6IFJlc2l6ZVdpcmUgPT4ge1xuICBjb25zdCBlZGl0b3JCb2R5ID0gU3VnYXJFbGVtZW50LmZyb21Eb20oZWRpdG9yLmdldEJvZHkoKSk7XG5cbiAgcmV0dXJuIFJlc2l6ZVdpcmUuYm9keShlZGl0b3JCb2R5LCBpc1Jlc2l6YWJsZSk7XG59O1xuXG5leHBvcnQge1xuICBnZXRcbn07XG4iLCJpbXBvcnQgeyBUYWJsZVNpemUgfSBmcm9tICdAZXBob3gvc25vb2tlcic7XG5pbXBvcnQgdHlwZSB7IFN1Z2FyRWxlbWVudCB9IGZyb20gJ0BlcGhveC9zdWdhcic7XG5cbmltcG9ydCB0eXBlIEVkaXRvciBmcm9tICd0aW55bWNlL2NvcmUvYXBpL0VkaXRvcic7XG5cbmltcG9ydCAqIGFzIE9wdGlvbnMgZnJvbSAnLi4vYXBpL09wdGlvbnMnO1xuXG5leHBvcnQgY29uc3QgZ2V0ID0gKGVkaXRvcjogRWRpdG9yLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+KTogVGFibGVTaXplID0+IHtcbiAgLy8gTm90ZTogV2UgY2FuJ3QgZW5mb3JjZSBub25lIChyZXNwb25zaXZlKSwgYXMgaWYgc29tZW9uZSBtYW51YWxseSByZXNpemVzIGEgdGFibGVcbiAgLy8gdGhlbiBpdCBtdXN0IHN3aXRjaCB0byBlaXRoZXIgcGl4ZWwgKGZpeGVkKSBvciBwZXJjZW50YWdlIChyZWxhdGl2ZSkgc2l6aW5nXG4gIGlmIChPcHRpb25zLmlzVGFibGVQZXJjZW50YWdlc0ZvcmNlZChlZGl0b3IpKSB7XG4gICAgcmV0dXJuIFRhYmxlU2l6ZS5wZXJjZW50YWdlU2l6ZSh0YWJsZSk7XG4gIH0gZWxzZSBpZiAoT3B0aW9ucy5pc1RhYmxlUGl4ZWxzRm9yY2VkKGVkaXRvcikpIHtcbiAgICByZXR1cm4gVGFibGVTaXplLnBpeGVsU2l6ZSh0YWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gRGV0ZWN0IGJhc2VkIG9uIHRoZSB0YWJsZSB3aWR0aFxuICAgIHJldHVybiBUYWJsZVNpemUuZ2V0VGFibGVTaXplKHRhYmxlKTtcbiAgfVxufTtcbiIsIi8qXG4gTk9URTogVGhpcyBmaWxlIGlzIHBhcnRpYWxseSBkdXBsaWNhdGVkIGluIHRoZSBmb2xsb3dpbmcgbG9jYXRpb25zOlxuICAtIHBsdWdpbnMvdGFibGUvcXVlcmllcy9UYWJsZVRhcmdldHMudHNcbiAgLSBhZHZ0YWJsZVxuIE1ha2Ugc3VyZSB0aGF0IGlmIG1ha2luZyBjaGFuZ2VzIHRvIHRoaXMgZmlsZSwgdGhlIG90aGVyIGZpbGVzIGFyZSB1cGRhdGVkIGFzIHdlbGxcbiAqL1xuXG5pbXBvcnQgeyBDZWxsT3BTZWxlY3Rpb24gfSBmcm9tICdAZXBob3gvZGFyd2luJztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnQGVwaG94L2thdGFtYXJpJztcbmltcG9ydCB0eXBlIHsgUnVuT3BlcmF0aW9uLCBTaW1wbGVHZW5lcmF0b3JzIH0gZnJvbSAnQGVwaG94L3Nub29rZXInO1xuaW1wb3J0IHR5cGUgeyBTdWdhckVsZW1lbnQgfSBmcm9tICdAZXBob3gvc3VnYXInO1xuXG5pbXBvcnQgeyBlcGhlbWVyYSB9IGZyb20gJy4uL3NlbGVjdGlvbi9FcGhlbWVyYSc7XG5cbmNvbnN0IG5vTWVudSA9IChjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDYXB0aW9uRWxlbWVudD4pOiBSdW5PcGVyYXRpb24uQ29tYmluZWRUYXJnZXRzID0+ICh7XG4gIGVsZW1lbnQ6IGNlbGwsXG4gIG1lcmdhYmxlOiBPcHRpb25hbC5ub25lKCksXG4gIHVubWVyZ2FibGU6IE9wdGlvbmFsLm5vbmUoKSxcbiAgc2VsZWN0aW9uOiBbIGNlbGwgXVxufSk7XG5cbmNvbnN0IGZvck1lbnUgPSAoc2VsZWN0ZWRDZWxsczogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdLCB0YWJsZTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBjZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KTogUnVuT3BlcmF0aW9uLkNvbWJpbmVkVGFyZ2V0cyA9PiAoe1xuICBlbGVtZW50OiBjZWxsLFxuICBtZXJnYWJsZTogQ2VsbE9wU2VsZWN0aW9uLm1lcmdhYmxlKHRhYmxlLCBzZWxlY3RlZENlbGxzLCBlcGhlbWVyYSksXG4gIHVubWVyZ2FibGU6IENlbGxPcFNlbGVjdGlvbi51bm1lcmdhYmxlKHNlbGVjdGVkQ2VsbHMpLFxuICBzZWxlY3Rpb246IENlbGxPcFNlbGVjdGlvbi5zZWxlY3Rpb24oc2VsZWN0ZWRDZWxscylcbn0pO1xuXG5jb25zdCBwYXN0ZSA9IChlbGVtZW50OiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDYXB0aW9uRWxlbWVudD4sIGNsaXBib2FyZDogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUVsZW1lbnQ+LCBnZW5lcmF0b3JzOiBTaW1wbGVHZW5lcmF0b3JzKTogUnVuT3BlcmF0aW9uLlRhcmdldFBhc3RlID0+ICh7XG4gIGVsZW1lbnQsXG4gIGNsaXBib2FyZCxcbiAgZ2VuZXJhdG9yc1xufSk7XG5cbmNvbnN0IHBhc3RlUm93cyA9IChzZWxlY3RlZENlbGxzOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10sIF9jZWxsOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+LCBjbGlwYm9hcmQ6IFN1Z2FyRWxlbWVudDxIVE1MVGFibGVSb3dFbGVtZW50IHwgSFRNTFRhYmxlQ29sRWxlbWVudD5bXSwgZ2VuZXJhdG9yczogU2ltcGxlR2VuZXJhdG9ycyk6IFJ1bk9wZXJhdGlvbi5UYXJnZXRQYXN0ZVJvd3MgPT4gKHtcbiAgc2VsZWN0aW9uOiBDZWxsT3BTZWxlY3Rpb24uc2VsZWN0aW9uKHNlbGVjdGVkQ2VsbHMpLFxuICBjbGlwYm9hcmQsXG4gIGdlbmVyYXRvcnNcbn0pO1xuXG5leHBvcnQgeyBub01lbnUsIGZvck1lbnUsIHBhc3RlLCBwYXN0ZVJvd3MgfTtcblxuIiwiLypcbiBOT1RFOiBUaGlzIGZpbGUgaXMgZHVwbGljYXRlZCBpbiB0aGUgZm9sbG93aW5nIGxvY2F0aW9uczpcbiAgLSBwbHVnaW5zL3RhYmxlL3NlbGVjdGlvbi9FcGhlbWVyYS50c1xuICAtIGFkdnRhYmxlXG4gTWFrZSBzdXJlIHRoYXQgaWYgbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBmaWxlLCB0aGUgb3RoZXIgZmlsZXMgYXJlIHVwZGF0ZWQgYXMgd2VsbFxuICovXG5cbmltcG9ydCB0eXBlIHsgRXBoZW1lcmEgYXMgRGFyd2luRXBoZW1lcmEgfSBmcm9tICdAZXBob3gvZGFyd2luJztcblxuY29uc3Qgc3RyU2VsZWN0ZWQgPSAnZGF0YS1tY2Utc2VsZWN0ZWQnO1xuY29uc3Qgc3RyU2VsZWN0ZWRTZWxlY3RvciA9ICd0ZFsnICsgc3RyU2VsZWN0ZWQgKyAnXSx0aFsnICsgc3RyU2VsZWN0ZWQgKyAnXSc7XG4vLyB1c2VkIHdpdGggbm90IHNlbGVjdG9yc1xuY29uc3Qgc3RyQXR0cmlidXRlU2VsZWN0b3IgPSAnWycgKyBzdHJTZWxlY3RlZCArICddJztcbmNvbnN0IHN0ckZpcnN0U2VsZWN0ZWQgPSAnZGF0YS1tY2UtZmlyc3Qtc2VsZWN0ZWQnO1xuY29uc3Qgc3RyRmlyc3RTZWxlY3RlZFNlbGVjdG9yID0gJ3RkWycgKyBzdHJGaXJzdFNlbGVjdGVkICsgJ10sdGhbJyArIHN0ckZpcnN0U2VsZWN0ZWQgKyAnXSc7XG5jb25zdCBzdHJMYXN0U2VsZWN0ZWQgPSAnZGF0YS1tY2UtbGFzdC1zZWxlY3RlZCc7XG5jb25zdCBzdHJMYXN0U2VsZWN0ZWRTZWxlY3RvciA9ICd0ZFsnICsgc3RyTGFzdFNlbGVjdGVkICsgJ10sdGhbJyArIHN0ckxhc3RTZWxlY3RlZCArICddJztcblxuZXhwb3J0IGNvbnN0IGF0dHJpYnV0ZVNlbGVjdG9yID0gc3RyQXR0cmlidXRlU2VsZWN0b3I7XG5cbmV4cG9ydCBjb25zdCBlcGhlbWVyYTogRGFyd2luRXBoZW1lcmEgPSB7XG4gIHNlbGVjdGVkOiBzdHJTZWxlY3RlZCxcbiAgc2VsZWN0ZWRTZWxlY3Rvcjogc3RyU2VsZWN0ZWRTZWxlY3RvcixcbiAgZmlyc3RTZWxlY3RlZDogc3RyRmlyc3RTZWxlY3RlZCxcbiAgZmlyc3RTZWxlY3RlZFNlbGVjdG9yOiBzdHJGaXJzdFNlbGVjdGVkU2VsZWN0b3IsXG4gIGxhc3RTZWxlY3RlZDogc3RyTGFzdFNlbGVjdGVkLFxuICBsYXN0U2VsZWN0ZWRTZWxlY3Rvcjogc3RyTGFzdFNlbGVjdGVkU2VsZWN0b3Jcbn07XG4iLCIvKlxuIE5PVEU6IFRoaXMgZmlsZSBpcyBwYXJ0aWFsbHkgZHVwbGljYXRlZCBpbiB0aGUgZm9sbG93aW5nIGxvY2F0aW9uczpcbiAgLSBwbHVnaW5zL3RhYmxlL3NlbGVjdGlvbi9UYWJsZVNlbGVjdGlvbi50c1xuICAtIGFkdnRhYmxlXG4gTWFrZSBzdXJlIHRoYXQgaWYgbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBmaWxlLCB0aGUgb3RoZXIgZmlsZXMgYXJlIHVwZGF0ZWQgYXMgd2VsbFxuICovXG5cbmltcG9ydCB7IFRhYmxlU2VsZWN0aW9uIH0gZnJvbSAnQGVwaG94L2Rhcndpbic7XG5pbXBvcnQgeyBBcnIsIEZ1biB9IGZyb20gJ0BlcGhveC9rYXRhbWFyaSc7XG5pbXBvcnQgeyBUYWJsZUxvb2t1cCB9IGZyb20gJ0BlcGhveC9zbm9va2VyJztcbmltcG9ydCB7IFNlbGVjdG9yRmluZCwgU2VsZWN0b3JzLCB0eXBlIFN1Z2FyRWxlbWVudCwgU3VnYXJFbGVtZW50cywgU3VnYXJOb2RlIH0gZnJvbSAnQGVwaG94L3N1Z2FyJztcblxuaW1wb3J0IHR5cGUgRWRpdG9yIGZyb20gJ3RpbnltY2UvY29yZS9hcGkvRWRpdG9yJztcblxuaW1wb3J0IHsgZXBoZW1lcmEgfSBmcm9tICcuL0VwaGVtZXJhJztcblxuY29uc3QgZ2V0U2VsZWN0aW9uQ2VsbEZhbGxiYWNrID0gKGVsZW1lbnQ6IFN1Z2FyRWxlbWVudDxOb2RlPikgPT5cbiAgVGFibGVMb29rdXAudGFibGUoZWxlbWVudCkuYmluZCgodGFibGUpID0+XG4gICAgVGFibGVTZWxlY3Rpb24ucmV0cmlldmUodGFibGUsIGVwaGVtZXJhLmZpcnN0U2VsZWN0ZWRTZWxlY3RvcilcbiAgKS5mb2xkKEZ1bi5jb25zdGFudChlbGVtZW50KSwgKGNlbGxzKSA9PiBjZWxsc1swXSk7XG5cbmNvbnN0IGdldFNlbGVjdGlvbkZyb21TZWxlY3RvciA9IDxUIGV4dGVuZHMgRWxlbWVudD4oc2VsZWN0b3I6IHN0cmluZykgPT5cbiAgKGluaXRDZWxsOiBTdWdhckVsZW1lbnQ8Tm9kZT4sIGlzUm9vdD86IChlbDogU3VnYXJFbGVtZW50PE5vZGU+KSA9PiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgY2VsbE5hbWUgPSBTdWdhck5vZGUubmFtZShpbml0Q2VsbCk7XG4gICAgY29uc3QgY2VsbCA9IGNlbGxOYW1lID09PSAnY29sJyB8fCBjZWxsTmFtZSA9PT0gJ2NvbGdyb3VwJyA/IGdldFNlbGVjdGlvbkNlbGxGYWxsYmFjayhpbml0Q2VsbCkgOiBpbml0Q2VsbDtcbiAgICByZXR1cm4gU2VsZWN0b3JGaW5kLmNsb3Nlc3Q8VD4oY2VsbCwgc2VsZWN0b3IsIGlzUm9vdCk7XG4gIH07XG5cbmNvbnN0IGdldFNlbGVjdGlvbkNlbGxPckNhcHRpb24gPSBnZXRTZWxlY3Rpb25Gcm9tU2VsZWN0b3I8SFRNTFRhYmxlQ2VsbEVsZW1lbnQgfCBIVE1MVGFibGVDYXB0aW9uRWxlbWVudD4oJ3RoLHRkLGNhcHRpb24nKTtcblxuY29uc3QgZ2V0U2VsZWN0aW9uQ2VsbCA9IGdldFNlbGVjdGlvbkZyb21TZWxlY3RvcjxIVE1MVGFibGVDZWxsRWxlbWVudD4oJ3RoLHRkJyk7XG5cbi8vIE5vdGU6IEluY2x1ZGVzIHNpbmdsZSBjZWxsIGlmIHRoZSBzdGFydCBvZiB0aGUgc2VsZWN0aW9uIHdoZXRoZXIgY29sbGFwc2VkIG9yIHJhbmdlZCBpcyB3aXRoaW4gYSB0YWJsZSBjZWxsXG5jb25zdCBnZXRDZWxsc0Zyb21TZWxlY3Rpb24gPSAoZWRpdG9yOiBFZGl0b3IpOiBTdWdhckVsZW1lbnQ8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+W10gPT5cbiAgU3VnYXJFbGVtZW50cy5mcm9tRG9tKGVkaXRvci5tb2RlbC50YWJsZS5nZXRTZWxlY3RlZENlbGxzKCkpO1xuXG5jb25zdCBnZXRDZWxsc0Zyb21GYWtlU2VsZWN0aW9uID0gKGVkaXRvcjogRWRpdG9yKTogU3VnYXJFbGVtZW50PEhUTUxUYWJsZUNlbGxFbGVtZW50PltdID0+XG4gIEFyci5maWx0ZXIoZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uKGVkaXRvciksIChjZWxsKSA9PiBTZWxlY3RvcnMuaXMoY2VsbCwgZXBoZW1lcmEuc2VsZWN0ZWRTZWxlY3RvcikpO1xuXG5leHBvcnQge1xuICBnZXRTZWxlY3Rpb25DZWxsLFxuICBnZXRTZWxlY3Rpb25DZWxsT3JDYXB0aW9uLFxuICBnZXRDZWxsc0Zyb21TZWxlY3Rpb24sXG4gIGdldENlbGxzRnJvbUZha2VTZWxlY3Rpb25cbn07XG4iLCJpbXBvcnQgKiBhcyBUeXBlIGZyb20gJy4uL2NvcmUvVHlwZSc7XG5pbXBvcnQgKiBhcyBBcnJheVV0aWwgZnJvbSAnLi4vY29yZS9BcnJheVV0aWwnO1xuXG4vKiogQSB3YXkgb2YgY29tcGFyaW5nIHR3byB2YWx1ZXMgb2YgdGhlIHNhbWUgdHlwZSBmb3IgZXF1YWxpdHkuICovXG5leHBvcnQgaW50ZXJmYWNlIEVxPEE+IHtcbiAgZXE6ICh4OiBBLCB5OiBBKSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgY29udHJhbWFwID0gPEEsIEI+IChlcWE6IEVxPEE+LCBmOiAoYjogQikgPT4gQSk6IEVxPEI+ID0+XG4gIGVxKCh4LCB5KSA9PiBlcWEuZXEoZih4KSwgZih5KSkpO1xuXG5leHBvcnQgY29uc3QgZXEgPSA8QT4gKGY6ICh4OiBBLCB5OiBBKSA9PiBib29sZWFuKTogRXE8QT4gPT5cbiAgKHsgZXE6IGYgfSk7XG5cbmV4cG9ydCBjb25zdCB0cmlwbGVFcTogRXE8YW55PiA9IGVxKCh4LCB5KSA9PiB4ID09PSB5KTtcblxuZXhwb3J0IGNvbnN0IGVxU3RyaW5nOiBFcTxzdHJpbmc+ID0gdHJpcGxlRXE7XG5cbmV4cG9ydCBjb25zdCBlcUJvb2xlYW46IEVxPGJvb2xlYW4+ID0gdHJpcGxlRXE7XG5cbmV4cG9ydCBjb25zdCBlcU51bWJlcjogRXE8bnVtYmVyPiA9IHRyaXBsZUVxO1xuXG5leHBvcnQgY29uc3QgZXFVbmRlZmluZWQ6IEVxPHVuZGVmaW5lZD4gPSB0cmlwbGVFcTtcblxuZXhwb3J0IGNvbnN0IGVxTnVsbDogRXE8bnVsbD4gPSB0cmlwbGVFcTtcblxuZXhwb3J0IGNvbnN0IGVxQXJyYXkgPSA8QT4gKGVxYTogRXE8QT4pOiBFcTxBcnJheUxpa2U8QT4+ID0+IGVxKCh4LCB5KSA9PiB7XG4gIGlmICh4Lmxlbmd0aCAhPT0geS5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgbGVuID0geC5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoIWVxYS5lcSh4W2ldLCB5W2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn0pO1xuXG4vLyBUT0RPOiBNYWtlIGFuIE9yZCB0eXBlY2xhc3NcbmNvbnN0IGVxU29ydGVkQXJyYXkgPSA8QT4oZXFhOiBFcTxBPiwgY29tcGFyZUZuPzogKGE6IEEsIGI6IEEpID0+IG51bWJlcik6IEVxPEFycmF5TGlrZTxBPj4gPT5cbiAgY29udHJhbWFwKGVxQXJyYXkoZXFhKSwgKHhzKSA9PiBBcnJheVV0aWwuc29ydCh4cywgY29tcGFyZUZuKSk7XG5cbmV4cG9ydCBjb25zdCBlcVJlY29yZCA9IDxBPiAoZXFhOiBFcTxBPik6IEVxPFJlY29yZDxzdHJpbmcsIEE+PiA9PiBlcSgoeCwgeSkgPT4ge1xuICBjb25zdCBreCA9IE9iamVjdC5rZXlzKHgpO1xuICBjb25zdCBreSA9IE9iamVjdC5rZXlzKHkpO1xuICBpZiAoIWVxU29ydGVkQXJyYXkoZXFTdHJpbmcpLmVxKGt4LCBreSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgbGVuID0ga3gubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgcSA9IGt4W2ldO1xuICAgIGlmICghZXFhLmVxKHhbcV0sIHlbcV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufSk7XG5cbmV4cG9ydCBjb25zdCBlcUFueTogRXE8YW55PiA9IGVxKCh4LCB5KSA9PiB7XG4gIGlmICh4ID09PSB5KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCB0eCA9IFR5cGUudHlwZU9mKHgpO1xuICBjb25zdCB0eSA9IFR5cGUudHlwZU9mKHkpO1xuICBpZiAodHggIT09IHR5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKFR5cGUuaXNFcXVhdGFibGVUeXBlKHR4KSkge1xuICAgIHJldHVybiB4ID09PSB5O1xuXG4gIH0gZWxzZSBpZiAodHggPT09ICdhcnJheScpIHtcbiAgICByZXR1cm4gZXFBcnJheShlcUFueSkuZXEoeCwgeSk7XG5cbiAgfSBlbHNlIGlmICh0eCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZXFSZWNvcmQoZXFBbnkpLmVxKHgsIHkpO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG4iLCJleHBvcnQgY29uc3QgbWFwID0gPEEsIEI+KHhzOiBBcnJheUxpa2U8QT4sIGY6IChhOiBBKSA9PiBCKTogQltdID0+IHtcbiAgY29uc3QgbGVuID0geHMubGVuZ3RoO1xuICBjb25zdCByID0gbmV3IEFycmF5KGxlbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4ID0geHNbaV07XG4gICAgcltpXSA9IGYoeCk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG4vKiogbWFwIGEgZnVuY3Rpb24gb3ZlciBhbiBhcnJheSwgdGhlbiBtYXAgYW5vdGhlciBmdW5jdGlvbiBvdmVyIGV2ZXJ5IGl0ZW0gZXhjZXB0IHRoZSBsYXN0ICovXG5leHBvcnQgY29uc3QgbWFwRGVsaW1pdCA9IDxBLCBCPiAoeHM6IEFycmF5TGlrZTxBPiwgZjogKGE6IEEpID0+IEIsIGRlbGltaXQ6IChiOiBCKSA9PiBCKTogQltdID0+IHtcbiAgY29uc3QgbGVuID0geHMubGVuZ3RoO1xuICBjb25zdCByID0gbmV3IEFycmF5KGxlbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuIC0gMTsgaSsrKSB7XG4gICAgY29uc3QgeCA9IHhzW2ldO1xuICAgIHJbaV0gPSBkZWxpbWl0KGYoeCkpO1xuICB9XG4gIGlmIChsZW4gPiAwKSB7XG4gICAgcltsZW4gLSAxXSA9IChmKHhzW2xlbiAtIDFdKSk7XG4gIH1cblxuICByZXR1cm4gcjtcbn07XG5cbmV4cG9ydCBjb25zdCBzb3J0ID0gPEE+ICh4czogQXJyYXlMaWtlPEE+LCBjb21wYXJlRm4/OiAoYTogQSwgYjogQSkgPT4gbnVtYmVyKTogQVtdID0+IHtcbiAgY29uc3QgY2xvbmU6IEFbXSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHhzKTtcbiAgcmV0dXJuIGNsb25lLnNvcnQoY29tcGFyZUZuKTtcbn07XG4iLCJleHBvcnQgY29uc3QgdHlwZU9mID0gKHg6IGFueSkgPT4ge1xuICBpZiAoeCA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH1cbiAgaWYgKHggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgfVxuICBjb25zdCB0ID0gdHlwZW9mIHg7XG4gIGlmICh0ID09PSAnb2JqZWN0JyAmJiAoQXJyYXkucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoeCkgfHwgeC5jb25zdHJ1Y3RvciAmJiB4LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdBcnJheScpKSB7XG4gICAgcmV0dXJuICdhcnJheSc7XG4gIH1cbiAgaWYgKHQgPT09ICdvYmplY3QnICYmIChTdHJpbmcucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoeCkgfHwgeC5jb25zdHJ1Y3RvciAmJiB4LmNvbnN0cnVjdG9yLm5hbWUgPT09ICdTdHJpbmcnKSkge1xuICAgIHJldHVybiAnc3RyaW5nJztcbiAgfVxuICByZXR1cm4gdDtcbn07XG5cbmNvbnN0IGlzVHlwZSA9IDxUPih0eXBlOiBzdHJpbmcpID0+ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgVCA9PiB0eXBlT2YodmFsdWUpID09PSB0eXBlO1xuXG5leHBvcnQgY29uc3QgaXNTdHJpbmcgPSBpc1R5cGU8c3RyaW5nPignc3RyaW5nJyk7XG5leHBvcnQgY29uc3QgaXNPYmplY3QgPSBpc1R5cGU8T2JqZWN0Pignb2JqZWN0Jyk7XG5leHBvcnQgY29uc3QgaXNBcnJheSA9IGlzVHlwZTxBcnJheTx1bmtub3duPj4oJ2FycmF5Jyk7XG5leHBvcnQgY29uc3QgaXNOdWxsID0gaXNUeXBlPG51bGw+KCdudWxsJyk7XG5leHBvcnQgY29uc3QgaXNCb29sZWFuID0gaXNUeXBlPGJvb2xlYW4+KCdib29sZWFuJyk7XG5leHBvcnQgY29uc3QgaXNVbmRlZmluZWQgPSBpc1R5cGU8dW5kZWZpbmVkPigndW5kZWZpbmVkJyk7XG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbiA9IGlzVHlwZTxGdW5jdGlvbj4oJ2Z1bmN0aW9uJyk7XG5leHBvcnQgY29uc3QgaXNOdW1iZXIgPSBpc1R5cGU8bnVtYmVyPignbnVtYmVyJyk7XG5cbmV4cG9ydCBjb25zdCBpc0VxdWF0YWJsZVR5cGUgPSAoeDogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBbICd1bmRlZmluZWQnLCAnYm9vbGVhbicsICdudW1iZXInLCAnc3RyaW5nJywgJ2Z1bmN0aW9uJywgJ3htbCcsICdudWxsJyBdLmluZGV4T2YoeCkgIT09IC0xO1xuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuICAgICAgICBpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG4gICAgICAgIH1cbiAgICB9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnJ2ID0gKCkgPT4gKFwiMS41LjJcIikiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnJ1aWQgPSBcImJ1bmRsZXI9cnNwYWNrQDEuNS4yXCI7XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSAnLi9Nb2RlbCc7XG5cbk1vZGVsKCk7XG5cbi8qKiAqKioqKlxuICogRE8gTk9UIEVYUE9SVCBBTllUSElOR1xuICpcbiAqIElGIFlPVSBETyBST0xMVVAgV0lMTCBMRUFWRSBBIEdMT0JBTCBPTiBUSEUgUEFHRVxuICoqKioqKiovXG4iXSwibmFtZXMiOlsiQXJyIiwiRnVuIiwiT3B0aW9uYWwiLCJBdHRyaWJ1dGUiLCJDb21wYXJlIiwiQ3NzIiwiSW5zZXJ0IiwiSW5zZXJ0QWxsIiwiUHJlZGljYXRlRmlsdGVyIiwiUHJlZGljYXRlRmluZCIsIlJlbW92ZSIsIlNlbGVjdG9yRmlsdGVyIiwiU2VsZWN0b3JGaW5kIiwiU3VnYXJFbGVtZW50IiwiU3VnYXJOb2RlIiwiU3VnYXJUZXh0IiwiVHJhdmVyc2UiLCJUYWdCb3VuZGFyaWVzIiwiY2xvbmUiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJpc0JvdW5kYXJ5IiwiaXNFbXB0eVRhZyIsImlzTm9uRWRpdGFibGUiLCJjb21wYXJlUG9zaXRpb24iLCJvdGhlciIsImNvcHlBdHRyaWJ1dGVzVG8iLCJzb3VyY2UiLCJkZXN0aW5hdGlvbiIsImFzIiwiaXNTcGVjaWFsIiwidGFnIiwiZ2V0TGFuZ3VhZ2UiLCJDb250ZW50RWRpdGFibGUiLCJTaXR1IiwiS2V5U2VsZWN0aW9uIiwiVmVydGljYWxNb3ZlbWVudCIsIk1vdXNlU2VsZWN0aW9uIiwiS2V5RGlyZWN0aW9uIiwiQ2VsbFNlbGVjdGlvbiIsIlJlc3BvbnNlIiwiU2VsZWN0aW9uS2V5cyIsIldpbmRvd0JyaWRnZSIsInJjIiwicm93cyIsImNvbHMiLCJtb3VzZSIsIndpbiIsImNvbnRhaW5lciIsImlzUm9vdCIsImFubm90YXRpb25zIiwiYnJpZGdlIiwiaGFuZGxlcnMiLCJpc0VkaXRhYmxlTm9kZSIsIm5vZGUiLCJpc0VkaXRhYmxlU2VsZWN0aW9uIiwic3RhcnQiLCJmaW5pc2giLCJrZXlib2FyZCIsImNsZWFyVG9OYXZpZ2F0ZSIsImtleWRvd24iLCJldmVudCIsInNvZmZzZXQiLCJmb2Zmc2V0IiwiZGlyZWN0aW9uIiwicmVhbEV2ZW50Iiwia2V5Y29kZSIsInNoaWZ0S2V5IiwiaGFuZGxlciIsInNlbGVjdGVkIiwidXBkYXRlIiwiYXR0ZW1wdHMiLCJuYXZpZ2F0aW9uIiwiZGVsdGEiLCJlZGdlcyIsInJlbGF0aXZlIiwiXyIsImtleXVwIiwiZXh0ZXJuYWwiLCJjZWxsU2VsIiwiYm94ZXMiLCJDbGFzcyIsIk9uTm9kZSIsImJ5Q2xhc3MiLCJlcGhlbWVyYSIsImFkZFNlbGVjdGlvbkNsYXNzIiwicmVtb3ZlU2VsZWN0aW9uQ2xhc3NlcyIsImNsZWFyIiwic2VscyIsInNlbGVjdFJhbmdlIiwiY2VsbHMiLCJieUF0dHIiLCJvblNlbGVjdGlvbiIsIm9uQ2xlYXIiLCJyZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGVzIiwiYWRkU2VsZWN0aW9uQXR0cmlidXRlIiwiY2xlYXJCZWZvcmVVcGRhdGUiLCJTZWxlY3Rpb25Bbm5vdGF0aW9uIiwiaXNLZXkiLCJrZXkiLCJpc1VwIiwiaXNEb3duIiwiaXNOYXZpZ2F0aW9uIiwibHRyIiwicnRsIiwiU2VsZWN0aW9uVHlwZVRhZyIsImZvbGQiLCJzdWJqZWN0Iiwib25Ob25lIiwib25NdWx0aXBsZSIsIm9uU2luZ2xlIiwibm9uZSIsIm11bHRpcGxlIiwiZWxlbWVudHMiLCJzaW5nbGUiLCJUYWJsZVBvc2l0aW9ucyIsInJldHJpZXZlIiwic2VsZWN0b3IiLCJyZXRyaWV2ZUJveCIsImZpcnN0U2VsZWN0ZWRTZWxlY3RvciIsImxhc3RTZWxlY3RlZFNlbGVjdG9yIiwiYW5jZXN0b3IiLCJzZWN0aW9uU2VsZWN0b3IiLCJmaXJzdEFuY2VzdG9yIiwibGFzdEFuY2VzdG9yIiwiZkEiLCJsQSIsIlNjcm9sbCIsIlNpbVNlbGVjdGlvbiIsIldpbmRvd1NlbGVjdGlvbiIsIlNpdHVzIiwiVXRpbCIsImVsZW1lbnRGcm9tUG9pbnQiLCJ4IiwieSIsImdldFJlY3QiLCJnZXRSYW5nZWRSZWN0Iiwic2VsIiwiZ2V0U2VsZWN0aW9uIiwiZXhhY3RBZHQiLCJmcm9tU2l0dXMiLCJzaXR1cyIsInNpdHVzRnJvbVBvaW50IiwiZXhhY3QiLCJjbGVhclNlbGVjdGlvbiIsImNvbGxhcHNlU2VsZWN0aW9uIiwidG9TdGFydCIsInJuZyIsInN0YXJ0U2l0dSIsImZpbmlzaFNpdHUiLCJzaXR1Iiwib2Zmc2V0Iiwic2VsZWN0Tm9kZSIsInNlbGVjdENvbnRlbnRzIiwic2V0U2VsZWN0aW9uIiwic2V0UmVsYXRpdmVTZWxlY3Rpb24iLCJnZXRJbm5lckhlaWdodCIsImdldFNjcm9sbFkiLCJwb3MiLCJzY3JvbGxCeSIsIm1vdmVEb3duIiwiY2FyZXQiLCJhbW91bnQiLCJtb3ZlVXAiLCJtb3ZlQm90dG9tVG8iLCJib3R0b20iLCJoZWlnaHQiLCJtb3ZlVG9wVG8iLCJ0b3AiLCJ0cmFuc2xhdGUiLCJ4RGVsdGEiLCJ5RGVsdGEiLCJnZXRUb3AiLCJnZXRCb3R0b20iLCJ0b1N0cmluZyIsIkF3YXJlbmVzcyIsInN5bmMiLCJzIiwiZiIsImRldGVjdCIsImNvbHVtbnMiLCJ1cGRhdGVTZWxlY3Rpb24iLCJuZXdTZWxzIiwiZ2V0UGFydGlhbEJveCIsInRvQ2FyZXQiLCJyZWN0IiwiZ2V0RWxlbUJveCIsImdldEJveEF0IiwiZ2V0RW50aXJlQm94IiwiQWR0IiwiRG9tR2F0aGVyIiwiRG9tU3RydWN0dXJlIiwiQ2FyZXRzIiwiUmVjdGFuZ2xlcyIsIkpVTVBfU0laRSIsIk5VTV9SRVRSSUVTIiwiYWR0IiwiaXNPdXRzaWRlIiwiYm94IiwiTWF0aCIsImluT3V0c2lkZUJsb2NrIiwiY2VsbCIsImFkanVzdERvd24iLCJndWVzc0JveCIsIm9yaWdpbmFsIiwibG93ZXJDYXJldCIsImFkanVzdFVwIiwiaGlnaGVyQ2FyZXQiLCJ1cE1vdmVtZW50IiwiZG93bk1vdmVtZW50IiwiaXNBdFRhYmxlIiwiZWxtIiwiYWRqdXN0Rm9yVGFibGUiLCJtb3ZlbWVudCIsIm51bVJldHJpZXMiLCJhZGp1c3RUaWwiLCJndWVzcyIsIm5ld0NhcmV0IiwiY2hlY2tTY3JvbGwiLCJhZGp1c3RlZCIsInJldHJ5IiwibW92ZWQiLCJSZXRyaWVzIiwiU3BvdCIsIlBsYXRmb3JtRGV0ZWN0aW9uIiwiQmVmb3JlQWZ0ZXIiLCJCclRhZ3MiLCJNQVhfUkVUUklFUyIsImZpbmRTcG90IiwiYnJOZWlnaGJvdXIiLCJyYW5nZSIsImFuYWx5c2lzIiwic2NhbiIsInRyeUN1cnNvciIsInRyeUFnYWluIiwibW92ZSIsInRyeUF0IiwiYnJvd3NlciIsImhhbmRsZSIsInNwb3QiLCJDdXJzb3JQb3NpdGlvbiIsIlByZWRpY2F0ZUV4aXN0cyIsIlRhYmxlS2V5cyIsImluU2FtZVRhYmxlIiwiZWxlbSIsInRhYmxlIiwiZSIsInAiLCJzaW11bGF0ZSIsImluaXRpYWwiLCJhbmNob3IiLCJuYXZpZ2F0ZSIsInByZWNoZWNrIiwiaW5mbyIsImZpcnN0VXBDaGVjayIsInN0YXJ0Um93IiwibGFzdCIsImxhc3RPZmZzZXQiLCJsYXN0RG93bkNoZWNrIiwiZmlyc3QiLCJzZWxlY3QiLCJPcHRpb25hbHMiLCJTaW5nbGV0b24iLCJmaW5kQ2VsbCIsInRhcmdldCIsImlzSW5FZGl0YWJsZUNvbnRleHQiLCJjdXJzb3IiLCJjbGVhcnN0YXRlIiwiYXBwbHlTZWxlY3Rpb24iLCJzaW5nbGVDZWxsIiwiaXNOb25FZGl0YWJsZUNlbGwiLCJpc0NlbGxDbG9zZXN0Q29udGVudEVkaXRhYmxlIiwibW91c2Vkb3duIiwibW91c2VvdmVyIiwibW91c2V1cCIsIkRvbVBhcmVudCIsImlzT3ZlcmxhcHBpbmciLCJiZWZvcmUiLCJhZnRlciIsImJlZm9yZUJvdW5kcyIsImFmdGVyQm91bmRzIiwiaXNSb3ciLCJ2ZXJpZnkiLCJiZWZvcmVPZmZzZXQiLCJhZnRlck9mZnNldCIsImZhaWx1cmUiLCJhZnRlckNlbGwiLCJiZWZvcmVDZWxsIiwiX3NoYXJlZFJvdyIsImNhdGEiLCJvblN1Y2Nlc3MiLCJvbkZhaWxlZFVwIiwib25GYWlsZWREb3duIiwiRWxlbWVudEFkZHJlc3MiLCJpc0JyIiwiZ2F0aGVyZXIiLCJjYW5kIiwiZ2F0aGVyIiwiaGFuZGxlQnIiLCJmaW5kQnIiLCJoYW5kbGVQYXJlbnQiLCJiciIsImFkamFjZW50IiwidHJ5QnIiLCJ0Z3QiLCJwcm9jZXNzIiwiX21lc3NhZ2UiLCJkb3duIiwidXAiLCJUYWJsZVNlbGVjdGlvbiIsInNlbGVjdGlvbiIsInVubWVyZ2FibGUiLCJzZWxlY3RlZENlbGxzIiwiaGFzU3BhbiIsInR5cGUiLCJzcGFuIiwicGFyc2VJbnQiLCJoYXNSb3dPckNvbFNwYW4iLCJtZXJnYWJsZSIsImJvdW5kcyIsIlNlbGVjdG9ycyIsImxvb2t1cFRhYmxlIiwiaWRlbnRpZnkiLCJnZXRJc1Jvb3QiLCJyb290VGFibGUiLCJ1bmRlZmluZWQiLCJzdGFydFRhYmxlIiwiZmluaXNoVGFibGUiLCJhbmNlc3RvckNlbGxzIiwiZmluaXNoQ2VsbCIsInN0YXJ0Q2VsbCIsImxjYSIsImxjYVRhYmxlIiwiZmluaXNoQW5jZXN0b3JDZWxscyIsInN0YXJ0QW5jZXN0b3JDZWxscyIsImdldExhc3QiLCJnZXRFZGdlcyIsImV4cGFuZFRvIiwiaWRlbnRpZmllZCIsInNoaWZ0U2VsZWN0aW9uIiwiZGVsdGFSb3ciLCJkZWx0YUNvbHVtbiIsImNyZWF0ZSIsImtpbGwiLCJTZWxlY3Rpb25UeXBlcyIsIlNlbGVjdGlvbnMiLCJsYXp5Um9vdCIsImdldFN0YXJ0Iiwic2VsZWN0ZWRTZWxlY3RvciIsImdldCIsIlNlbGVjdGlvbkRpcmVjdGlvbiIsIlNpbVJhbmdlIiwiY29udmVydFRvUmFuZ2UiLCJtYWtlU2l0dXMiLCJDb250cmFjdHMiLCJEcmFnTW9kZSIsIkRyYWdTaW5rIiwiRHJhZ0FwaSIsIm1vZGUiLCJzaW5rIiwiYXBpIiwiRHJhZ2dpbmciLCJNb3VzZURyYWciLCJ0cmFuc2Zvcm0iLCJtdXRhdGlvbiIsInNldHRpbmdzIiwiRG9tRXZlbnQiLCJTdWdhclBvc2l0aW9uIiwiQmxvY2tlciIsImNvbXBhcmUiLCJvbGQiLCJudSIsImV4dHJhY3QiLCJtdXRhdGUiLCJkcmFnQXBpIiwiYmxvY2tlciIsIm1kb3duIiwibXVwIiwibW1vdmUiLCJtb3V0IiwiZGVzdHJveSIsInBhcmVudCIsInN0b3AiLCJUaHJvdHRsZXIiLCJFdmVudCIsIkV2ZW50cyIsIk1vdmVtZW50Iiwic2V0dXAiLCJhY3RpdmUiLCJldmVudHMiLCJkcm9wIiwidGhyb3R0bGVkRHJvcCIsImdvIiwibW91c2Vtb3ZlIiwib24iLCJvZmYiLCJpc0FjdGl2ZSIsInJ1bklmQWN0aXZlIiwiYXJncyIsIlN0eWxlcyIsIm9wdGlvbnMiLCJkaXYiLCJJbkRyYWciLCJwcmV2aW91cyIsInJlc2V0IiwicmVzdWx0Iiwib25FdmVudCIsImRhdGFPcHRpb24iLCJkYXRhIiwiZCIsIk5vRHJhZyIsIm5vRHJhZ1N0YXRlIiwiaW5EcmFnU3RhdGUiLCJkcmFnU3RhdGUiLCJpc09uIiwiTmFtZXNwYWNlIiwic3R5bGVzIiwicmVzb2x2ZSIsIk9iaiIsIlR5cGUiLCJnZW5lcmF0ZSIsImNhc2VzIiwiRXJyb3IiLCJjb25zdHJ1Y3RvcnMiLCJhY2FzZSIsImNvdW50Iiwia2V5cyIsInZhbHVlIiwiYXJnTGVuZ3RoIiwibWF0Y2giLCJicmFuY2hlcyIsImJyYW5jaEtleXMiLCJhbGxSZXFkIiwicmVxS2V5IiwiZm9sZEFyZ3MiLCJsYWJlbCIsImNvbnNvbGUiLCJFcSIsIm5hdGl2ZVNsaWNlIiwiQXJyYXkiLCJuYXRpdmVJbmRleE9mIiwibmF0aXZlUHVzaCIsInJhd0luZGV4T2YiLCJ0cyIsInQiLCJpbmRleE9mIiwieHMiLCJyIiwiY29udGFpbnMiLCJleGlzdHMiLCJwcmVkIiwiaSIsImxlbiIsIm51bSIsImNodW5rIiwiYXJyYXkiLCJzaXplIiwibWFwIiwiZWFjaCIsImVhY2hyIiwicGFydGl0aW9uIiwicGFzcyIsImZhaWwiLCJhcnIiLCJmaWx0ZXIiLCJncm91cEJ5Iiwid2FzVHlwZSIsImdyb3VwIiwiZm9sZHIiLCJhY2MiLCJmb2xkbCIsImZpbmRVbnRpbCIsInVudGlsIiwiZmluZCIsImZpbmRJbmRleCIsImZpbmRMYXN0SW5kZXgiLCJmbGF0dGVuIiwiYmluZCIsImZvcmFsbCIsImVxdWFsIiwiYTEiLCJhMiIsImVxIiwicmV2ZXJzZSIsImRpZmZlcmVuY2UiLCJtYXBUb09iamVjdCIsIlN0cmluZyIsInB1cmUiLCJzb3J0IiwiY29tcGFyYXRvciIsImNvcHkiLCJoZWFkIiwiZnJvbSIsImZpbmRNYXAiLCJ1bmlxdWUiLCJpc0R1cGxpY2F0ZWQiLCJDZWxsIiwic2V0IiwidiIsIkJhZ1V0aWxzIiwiYmFzZSIsImhhbmRsZVVuc3VwcG9ydGVkIiwicmVxdWlyZWQiLCJiYXNlV2l0aCIsIm9iaiIsInJlcSIsImludmFsaWRLZXlzIiwiaGFuZGxlRXhhY3QiLCJ1bnN1cHBvcnRlZCIsImFsbG93RXh0cmEiLCJleGFjdGx5IiwiZW5zdXJlIiwiZW5zdXJlV2l0aCIsImNvbmRpdGlvbiIsIm5vb3AiLCJub2FyZyIsImNvbXBvc2UiLCJmYSIsImZiIiwiY29tcG9zZTEiLCJmYmMiLCJmYWIiLCJhIiwiY29uc3RhbnQiLCJpZGVudGl0eSIsInRyaXBsZUVxdWFscyIsImIiLCJjdXJyeSIsImZuIiwiaW5pdGlhbEFyZ3MiLCJyZXN0QXJncyIsImFsbCIsIm5vdCIsImRpZSIsIm1zZyIsImFwcGx5IiwiY2FsbCIsIm5ldmVyIiwiYWx3YXlzIiwid2Vha2VuIiwicGlwZSIsImFiIiwiYmMiLCJjZCIsImRlIiwiZWYiLCJmZyIsImdoIiwiYyIsImciLCJHbG9iYWwiLCJ3aW5kb3ciLCJGdW5jdGlvbiIsImNzcyIsIm5hbWVzcGFjZSIsImRhc2hOYW1lc3BhY2UiLCJzdHIiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3BzIiwiayIsInR1cGxlTWFwIiwidHVwbGUiLCJvYmpBY2MiLCJpbnRlcm5hbEZpbHRlciIsIm9uVHJ1ZSIsIm9uRmFsc2UiLCJiaWZpbHRlciIsIm1hcFRvQXJyYXkiLCJuYW1lIiwidmFsdWVzIiwiaGFzIiwiaGFzTm9uTnVsbGFibGVLZXkiLCJpc0VtcHR5Iiwib25Tb21lIiwibWFwcGVyIiwiYmluZGVyIiwicHJlZGljYXRlIiwicmVwbGFjZW1lbnQiLCJ0aHVuayIsIm1lc3NhZ2UiLCJ3b3JrZXIiLCJpcyIsImxocyIsInJocyIsImxlZnQiLCJlcXVhbHMiLCJsaWZ0MiIsImNhdCIsInB1c2giLCJzZXF1ZW5jZSIsInRyYXZlcnNlIiwib2EiLCJvYiIsImxpZnQzIiwib2MiLCJsaWZ0NCIsIm9kIiwibGlmdDUiLCJvZSIsIm1hcEZyb20iLCJiaW5kRnJvbSIsIm9vdCIsInNvbWVJZiIsInBhdGgiLCJwYXJ0cyIsInNjb3BlIiwibyIsInN0ZXAiLCJwYXJ0IiwiZm9yZ2UiLCJhcHBseUhlbHBlciIsImNvbnN0SGVscGVyIiwib3V0cHV0SGVscGVyIiwib3V0cHV0IiwiX29uRXJyb3IiLCJvblZhbHVlIiwiUmVzdWx0IiwiZXJyb3IiLCJvbkVycm9yIiwiX29uVmFsdWUiLCJmcm9tT3B0aW9uIiwib3B0aW9uYWwiLCJlcnIiLCJzaW5nbGV0b24iLCJkb1Jldm9rZSIsInJldm9rZSIsImlzU2V0IiwicmVwZWF0YWJsZSIsImRlbGF5IiwiaW50ZXJ2YWxJZCIsImlkIiwiY2xlYXJJbnRlcnZhbCIsImZ1bmN0aW9uVG9SZXBlYXQiLCJzZXRJbnRlcnZhbCIsImRlc3Ryb3lhYmxlIiwidW5iaW5kYWJsZSIsInJ1biIsIlN0ckFwcGVuZCIsImNoZWNrUmFuZ2UiLCJzdWJzdHIiLCJzdXBwbGFudCIsImlzU3RyaW5nT3JOdW1iZXIiLCJmdWxsTWF0Y2giLCJyZW1vdmVMZWFkaW5nIiwicHJlZml4Iiwic3RhcnRzV2l0aCIsInJlbW92ZVRyYWlsaW5nIiwic3VmZml4IiwiZW5kc1dpdGgiLCJlbnN1cmVMZWFkaW5nIiwiZW5zdXJlVHJhaWxpbmciLCJlbmQiLCJpZHgiLCJjYXBpdGFsaXplIiwiYmxhbmsiLCJ0cmltIiwibFRyaW0iLCJyVHJpbSIsImlzTm90RW1wdHkiLCJyZXBlYXQiLCJmcm9tQ29kZVBvaW50IiwidG9JbnQiLCJyYWRpeCIsImlzTmFOIiwidG9GbG9hdCIsInBhcnNlRmxvYXQiLCJhZGFwdGFibGUiLCJyYXRlIiwidGltZXIiLCJjYW5jZWwiLCJjbGVhclRpbWVvdXQiLCJ0aHJvdHRsZSIsIm5ld0FyZ3MiLCJzZXRUaW1lb3V0IiwidGVtcEFyZ3MiLCJjYWNoZWQiLCJjYWxsZWQiLCJnZXRQcm90b3R5cGVPZiIsImhhc1Byb3RvIiwiY29uc3RydWN0b3IiLCJ0eXBlT2YiLCJwcm90byIsImlzVHlwZSIsImlzU2ltcGxlVHlwZSIsImlzT2JqZWN0IiwiaXNTdHJpbmciLCJpc1BsYWluT2JqZWN0IiwiaXNBcnJheSIsImlzTnVsbCIsImlzQm9vbGVhbiIsImlzVW5kZWZpbmVkIiwiaXNOdWxsYWJsZSIsImlzTm9uTnVsbGFibGUiLCJpc0Z1bmN0aW9uIiwiaXNOdW1iZXIiLCJpc0FycmF5T2YiLCJpc1Byb21pc2VMaWtlIiwiemVyb1dpZHRoIiwibmJzcCIsInNvZnRIeXBoZW4iLCJlbGxpcHNpcyIsImlzWndzcCIsImNoYXIiLCJyZW1vdmVad3NwIiwiYWRkVG9TdGFydCIsImFkZFRvRW5kIiwicmVtb3ZlRnJvbVN0YXJ0IiwibnVtQ2hhcnMiLCJyZW1vdmVGcm9tRW5kIiwicmVxTWVzc2FnZSIsInVuc3VwcE1lc3NhZ2UiLCJ2YWxpZGF0ZVN0ckFyciIsImludmFsaWRUeXBlTWVzc2FnZSIsImluY29ycmVjdCIsImNoZWNrRHVwZXMiLCJldmVyeXRoaW5nIiwic29ydGVkIiwiZHVwZSIsInBvaW50IiwiZGVsdGFPZmZzZXQiLCJwb2ludHMiLCJiZWdpbiIsInRleHQiLCJEb21Vbml2ZXJzZSIsIkRlc2NlbnQiLCJ1bml2ZXJzZSIsInRvTGVhZiIsImZyZWVmYWxsTHRyIiwiZnJlZWZhbGxSdGwiLCJHYXRoZXIiLCJzZWVrTGVmdCIsInNlZWtSaWdodCIsIndhbGtlcnMiLCJ3YWxrIiwiaXRlbSIsInJ1bGVzIiwiTmF2aWdhdGlvbiIsIlNlZWtlciIsImFkdmFuY2UiLCJiYWNrdHJhY2siLCJzaWRlc3RlcCIsIldhbGtlcnMiLCJpc0xlYWYiLCJXYWxrZXIiLCJob25lIiwibmV4dCIsIm4iLCJyaWdodCIsIl9kaXJlY3Rpb24iLCJ0cmFuc2l0aW9uIiwiY2hpbGRyZW4iLCJzdWNjZXNzb3JzIiwicnVsZU9wdCIsInN1Y2MiLCJydWxlIiwic2libGluZyIsInRvTGFzdCIsInRvTG93ZXIiLCJjYW5kaWRhdGUiLCJ0b0VuZCIsImZpZWxkcyIsInVuYmluZCIsImgiLCJ0cmlnZ2VyIiwidHlwZURlZnMiLCJyZWdpc3RyeSIsIlBhcmVudCIsInNoYXJlZE9uZSIsImxvb2siLCJfdW5pdmVyc2UiLCJzdWJzZXQiLCJhbmNlc3RvcnMiLCJicmVha1RvTGVmdCIsImNoaWxkIiwiYnJlYWtUb1JpZ2h0IiwiYnJlYWtQYXRoIiwiaXNUb3AiLCJicmVha2VyIiwidSIsIlN0cnVjdHVyZSIsImlzQmxvY2siLCJpc0xpc3QiLCJpc0Zvcm1hdHRpbmciLCJpc0hlYWRpbmciLCJpc0NvbnRhaW5lciIsImlzRnJhbWUiLCJpc0lubGluZSIsInhCcmVha1BhdGgiLCJ4QnJlYWtUb0xlZnQiLCJ4QnJlYWtUb1JpZ2h0Iiwib25lQWxsIiwiU3Vic2V0Rm4iLCJibG9ja0xpc3QiLCJ0YWdOYW1lIiwibGVmdFJpZ2h0IiwiYnJva2VuUGF0aCIsInNlY29uZCIsInNwbGl0cyIsImJpc2VjdCIsImluZGV4IiwiaW5kIiwicHJpb3IiLCJmYWxsYmFjayIsImJyZWFrYWdlIiwiZXh0cmEiLCJuZXh0Q2hpbGQiLCJ0YWlsIiwidW5zYWZlT25lIiwiY3VycmVudCIsImNvbW1vbkVsZW1lbnQiLCJ1bnNhZmVTdWJzZXQiLCJjb21tb24iLCJwczEiLCJwczIiLCJmaW5kZXIiLCJwcyIsInRvcERvd24iLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJzSW5kZXgiLCJlSW5kZXgiLCJwcnVuZSIsInBydW5lZDEiLCJwcnVuZWQyIiwic2hhcmVkIiwiYW5jcyIsIlRodW5rIiwibWVkaWFNYXRjaCIsInF1ZXJ5IiwicGxhdGZvcm0iLCJvdmVycmlkZSIsIm92ZXJyaWRlcyIsIlJlc29sdmUiLCJzYW5kSFRNTEVsZW1lbnQiLCJpc1Byb3RvdHlwZU9mIiwiVmVyc2lvbiIsImVkZ2UiLCJjaHJvbWl1bSIsImllIiwib3BlcmEiLCJmaXJlZm94Iiwic2FmYXJpIiwidW5rbm93biIsInZlcnNpb24iLCJpc0Jyb3dzZXIiLCJCcm93c2VyIiwid2luZG93cyIsImlvcyIsImFuZHJvaWQiLCJsaW51eCIsIm1hY29zIiwic29sYXJpcyIsImZyZWVic2QiLCJjaHJvbWVvcyIsImlzT1MiLCJPcGVyYXRpbmdTeXN0ZW0iLCJEZXZpY2VUeXBlIiwiVWFEYXRhIiwiVWFTdHJpbmciLCJQbGF0Zm9ybUluZm8iLCJ1c2VyQWdlbnQiLCJ1c2VyQWdlbnREYXRhT3B0IiwiYnJvd3NlcnMiLCJvc2VzIiwidXNlckFnZW50RGF0YSIsIm9zIiwiZGV2aWNlVHlwZSIsImlzaVBhZCIsImlzaVBob25lIiwiaXNNb2JpbGUiLCJpc1RvdWNoIiwiaXNUYWJsZXQiLCJpc1Bob25lIiwiaU9Td2VidmlldyIsImlzRGVza3RvcCIsImRldGVjdEJyb3dzZXIiLCJ1YUJyYW5kIiwibGNCcmFuZCIsImNhbmRpZGF0ZXMiLCJhZ2VudCIsImRldGVjdE9zIiwiZmlyc3RNYXRjaCIsInJlZ2V4ZXMiLCJOdW1iZXIiLCJ2ZXJzaW9uUmVnZXhlcyIsImNsZWFuZWRBZ2VudCIsIm1ham9yIiwibWlub3IiLCJTdHJpbmdzIiwibm9ybWFsVmVyc2lvblJlZ2V4IiwiY2hlY2tDb250YWlucyIsInVhc3RyaW5nIiwidW5zYWZlIiwiZ2V0T3JEaWUiLCJhY3R1YWwiLCJTaXplcyIsIkNlbGxVdGlscyIsImhhbHZlIiwibWFpbiIsIndpZHRoIiwidyIsIm5ld1dpZHRoIiwiUmVwbGljYXRpb24iLCJvblVubG9ja2VkQ2VsbHMiLCJXYXJlaG91c2UiLCJjb25zdHJhaW5TcGFuIiwicHJvcGVydHkiLCJjdXJyZW50Q29sc3BhbiIsImlzQ29sSW5SYW5nZSIsIm1pbkNvbFJhbmdlIiwibWF4Q29sUmFuZ2UiLCJlbmRDb2wiLCJzdGFydENvbCIsImdlbmVyYXRlQ29sR3JvdXAiLCJob3VzZSIsImNvbHNUb0NvcHkiLCJjb3BpZWRDb2xzIiwiY2xvbmVkQ29sIiwiZmFrZUNvbGdyb3VwIiwiZ2VuZXJhdGVSb3dzIiwicm93IiwiY2VsbHNUb0NvcHkiLCJjb3BpZWRDZWxscyIsImNsb25lZENlbGwiLCJmYWtlVFIiLCJjb3B5Q29scyIsImRldGFpbHMiLCJsYXN0U2VsZWN0ZWRDZWxsIiwiZmFrZUNvbEdyb3VwcyIsImZha2VSb3dzIiwiR3JpZFJvdyIsIm9uQ2VsbHMiLCJ0b0RldGFpbExpc3QiLCJUcmFuc2l0aW9ucyIsIlJlZHJhdyIsImNvcHlSb3dzIiwiZ2VuZXJhdG9ycyIsIndhcmVob3VzZSIsImdyaWQiLCJzbGljZWRHcmlkIiwiZmlsdGVyZWRHcmlkIiwibmV3Q2VsbHMiLCJzbGljZWREZXRhaWxzIiwiRGV0YWlsc0xpc3QiLCJDb2x1bW5TaXplcyIsIkxheWVyU2VsZWN0b3IiLCJMT0NLRURfQ09MX0FUVFIiLCJUYWJsZVNpemUiLCJzdGF0c1N0cnVjdCIsIm1pblJvdyIsIm1pbkNvbCIsIm1heFJvdyIsIm1heENvbCIsImFsbENlbGxzIiwiZmluZFNlbGVjdGVkU3RhdHMiLCJpc1NlbGVjdGVkIiwidG90YWxDb2x1bW5zIiwidG90YWxSb3dzIiwiZGV0YWlsIiwiZW5kUm93IiwibWFrZUNlbGwiLCJsaXN0Iiwic2VlblNlbGVjdGVkIiwicm93SW5kZXgiLCJ0ZCIsImZpbGxJbkdhcHMiLCJzdGF0cyIsImoiLCJuZWVkQ2VsbCIsImNsZWFuIiwicmVwbGljYSIsIndpZHRoRGVsdGEiLCJjb2wiLCJlbXB0eVJvd3MiLCJ0YWJsZVNpemUiLCJnZXRUYWJsZVdpZHRoRGVsdGEiLCJjb2xXaWR0aHMiLCJhbGxDb2xzV2lkdGgiLCJzZWxlY3RlZENvbHNXaWR0aCIsInJlcGxpY2FIb3VzZSIsInJlcGxpY2FTdGF0cyIsInVuc2VsZWN0ZWRDZWxscyIsImdldEF0dHJWYWx1ZSIsImlzQ29sIiwiaXNDb2xncm91cCIsImVsZW1lbnRUb0RhdGEiLCJjb2xzcGFuIiwicm93c3BhbiIsIm1vZGlmaWNhdGlvbiIsInRvRGF0YSIsIm51Q2VsbCIsIm51Um93IiwiYWRkIiwicmVjZW50IiwiZ2V0T3JJbml0IiwibWFrZU5ldyIsImF0dHJzIiwicmVwbGFjZU9ySW5pdCIsImdldFNjb3BlQXR0cmlidXRlIiwiYXR0cmlidXRlIiwibWVyZ2luZyIsInVubWVyZ2UiLCJyYXciLCJtZXJnZSIsImdldFNjb3BlUHJvcGVydHkiLCJzdHJpbmdBdHRyaWJ1dGVzIiwiYmFzZVNjb3BlIiwic2NvcGVzIiwiaXNNaXhlZCIsIkdlbmVyYXRvcnMiLCJnZXRVcE9yTGVmdENlbGxzIiwidXBHcmlkIiwidXBEZXRhaWxzIiwic2xpY2VkQ2VsbHMiLCJnZXREb3duT3JSaWdodENlbGxzIiwiZG93bkdyaWQiLCJkb3duRGV0YWlscyIsImdldE90aGVyQ2VsbHMiLCJ1cE9yTGVmdENlbGxzIiwiZG93bk9yUmlnaHRDZWxscyIsInplcm8iLCJzdXJyb3VuZCIsInNpemVzIiwicmVzdWx0cyIsImNsYW1wRGVsdGFIZWxwZXIiLCJtaW5DZWxsU2l6ZSIsIm5ld1NpemUiLCJkaWZmIiwiY2xhbXBOZWdhdGl2ZURlbHRhIiwiY2xhbXBEZWx0YSIsInJlc2l6ZVRhYmxlIiwiY2FsY0ZpeGVkRGVsdGFzIiwiY2xhbXBlZERlbHRhIiwiY2FsY1JlbGF0aXZlRGVsdGFzIiwicmF0aW8iLCJuZXdUaGlzIiwiY2FsY0xlZnRFZGdlRGVsdGFzIiwiaXNSZWxhdGl2ZSIsImNhbGNNaWRkbGVEZWx0YXMiLCJfcHJldiIsInJlc2l6ZXIiLCJjYWxjUmlnaHRFZGdlRGVsdGFzIiwiY2FsY1JlZGVzdHJpYnV0ZWRXaWR0aHMiLCJ0b3RhbFdpZHRoIiwicGl4ZWxEZWx0YSIsInRhYmxlV2lkdGgiLCJuZXdTaXplcyIsInByZXNlcnZlVGFibGUiLCJpc0xhc3RDb2x1bW4iLCJfaW5kZXgiLCJfbWluQ2VsbFNpemUiLCJjbGFtcFRhYmxlRGVsdGEiLCJtYXhEZWx0YSIsIl90b3RhbFdpZHRoIiwiX3BpeGVsRGVsdGEiLCJfaXNSZWxhdGl2ZSIsIlN1Z2FyTG9jYXRpb24iLCJvbmx5IiwiaXNSZXNpemFibGUiLCJkZXRhY2hlZCIsImVkaXRhYmxlIiwiY2hyb21lIiwib3JpZ2luIiwiYm9keSIsIlJlc2l6ZVdpcmUiLCJIZWlnaHQiLCJXaWR0aCIsIlJlZGlzdHJpYnV0aW9uIiwicmVkaXN0cmlidXRlVG9XIiwibmV3V2lkdGhzIiwidW5pdCIsIndpZHRocyIsInJlZGlzdHJpYnV0ZVRvQ29sdW1ucyIsImNvbHVtbiIsInJlZGlzdHJpYnV0ZVRvSCIsIm5ld0hlaWdodHMiLCJnZXRVbml0IiwicmVkaXN0cmlidXRlIiwib3B0V2lkdGgiLCJvcHRIZWlnaHQiLCJ3aWR0aFVuaXQiLCJvbGRXaWR0aHMiLCJudVdpZHRocyIsIm5ld0hlaWdodCIsInRvdGFsSGVpZ2h0Iiwib2xkSGVpZ2h0cyIsIm51SGVpZ2h0cyIsImlzUGVyY2VudFNpemluZyIsImlzUGl4ZWxTaXppbmciLCJpc05vbmVTaXppbmciLCJnZXRQZXJjZW50VGFibGVXaWR0aCIsImdldFBlcmNlbnRUYWJsZUhlaWdodCIsInZhbGlkU2VjdGlvbkxpc3QiLCJpc1ZhbGlkU2VjdGlvbiIsInBhcmVudE5hbWUiLCJkaW1lbnNpb24iLCJkaW1lbnNpb25zIiwiYWRkcmVzcyIsImNvb3JkcyIsImRldGFpbG5ldyIsImlzTmV3IiwiZXh0ZW5kZWQiLCJpc0xvY2tlZCIsInJvd2RldGFpbCIsInNlY3Rpb24iLCJyb3dkZXRhaWxuZXciLCJlbGVtZW50bmV3Iiwicm93Y2VsbHMiLCJmaW5pc2hSb3ciLCJmaW5pc2hDb2wiLCJjb2x1bW5leHQiLCJjb2xncm91cCIsImFkdmFuY2VkQnIiLCJpc0xpc3RJdGVtIiwiZWwiLCJzaWJsaW5nSXNCbG9jayIsInJpZ2h0U2libGluZyIsIm1hcmtDZWxsIiwicmlnaHRFZGdlIiwicmlnaHRTaWJsaW5nSXNCbG9jayIsIm1hcmtDb250ZW50IiwiY29udGVudCIsImNvbnRlbnRzIiwiVGFibGVMb29rdXAiLCJjbGVhbnVwTGVnYWN5QXR0cmlidXRlcyIsImNvbnZlcnRUb1BlcmNlbnRTaXplV2lkdGgiLCJjb252ZXJ0VG9QaXhlbFNpemVXaWR0aCIsImNvbnZlcnRUb1BpeGVsU2l6ZUhlaWdodCIsImNvbnZlcnRUb05vbmVTaXplV2lkdGgiLCJyb3dFbGVtZW50cyIsInRyYW5zZmVyYWJsZUF0dHJpYnV0ZXMiLCJjcmVhdGVDZWxsIiwiZG9jIiwiY3JlYXRlQ29sIiwiY3JlYXRlQ29sZ3JvdXAiLCJjcmVhdGVSb3ciLCJyZXBsYWNlIiwicGFzdGVSZXBsYWNlIiwiY2xvbmVGb3JtYXRzIiwib2xkQ2VsbCIsIm5ld0NlbGwiLCJmb3JtYXRzIiwiZmlyc3RUZXh0IiwiZm9ybWF0U2VsZWN0b3IiLCJwYXJlbnRzIiwiY2xvbmVkRm9ybWF0IiwiY2xvbmVBcHByb3ByaWF0ZUF0dHJpYnV0ZXMiLCJ2YWxpZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVOYW1lIiwiY2VsbE9wZXJhdGlvbnMiLCJmb3JtYXRzVG9DbG9uZSIsImNsb25lQ3NzIiwicHJldiIsImxhc3ROb2RlIiwibmV3Q29sIiwicGFzdGUiLCJnZXRHcmlkU2l6ZSIsIlN0cnVjdHMiLCJsb29rdXAiLCJ0YWdzIiwiaXNSb290T3JVcHBlclRhYmxlIiwiY29sdW1uR3JvdXBzIiwiY29sdW1uR3JvdXAiLCJub3RDZWxsIiwibmVpZ2hib3VycyIsIm5laWdoYm91ckNlbGxzIiwibmVpZ2hib3VyUm93cyIsImZpcnN0Q2VsbCIsImF0dHIiLCJyb3dQcm9wIiwiY29sUHJvcCIsInJvd3NDb3VudCIsIkJsb2NrcyIsImZpbmRDb21tb25DZWxsVHlwZSIsImZpbmRDb21tb25Sb3dUeXBlIiwiUnVuT3BlcmF0aW9uIiwiVGFibGVNZXJnZSIsIk1lcmdpbmdPcGVyYXRpb25zIiwiTW9kaWZpY2F0aW9uT3BlcmF0aW9ucyIsIlRyYW5zZm9ybU9wZXJhdGlvbnMiLCJBZGp1c3RtZW50cyIsIkNvbFV0aWxzIiwiVGFibGVDb250ZW50IiwiaXNFZGl0YWJsZSIsIm91dGNvbWUiLCJmaW5kRWRpdGFibGVDdXJzb3JQb3NpdGlvbiIsImVsZW1lbnRGcm9tR3JpZCIsImJ1bmRsZSIsImN1cnNvckVsZW1lbnQiLCJ1bmlxdWVSb3dzIiwicm93Q29tcGlsYXRpb24iLCJyZXN0Iiwicm93RXhpc3RzIiwiY3VycmVudERldGFpbCIsImRldGFpbEEiLCJkZXRhaWxCIiwib3BJbnNlcnRSb3dCZWZvcmUiLCJnZW5XcmFwcGVycyIsImV4YW1wbGUiLCJ0YXJnZXRJbmRleCIsIm5ld0dyaWQiLCJvcEluc2VydFJvd3NCZWZvcmUiLCJuZXdHIiwib3BJbnNlcnRSb3dBZnRlciIsIm9wSW5zZXJ0Um93c0FmdGVyIiwib3BJbnNlcnRDb2x1bW5CZWZvcmUiLCJleHRyYWN0RGV0YWlsIiwib3BJbnNlcnRDb2x1bW5zQmVmb3JlIiwib3BJbnNlcnRDb2x1bW5BZnRlciIsIm9wSW5zZXJ0Q29sdW1uc0FmdGVyIiwib3BNYWtlQ29sdW1uSGVhZGVyIiwiaW5pdGlhbEdyaWQiLCJvcE1ha2VDb2x1bW5zSGVhZGVyIiwiY29sdW1uSW5kZXhlcyIsIm9wTWFrZUNlbGxIZWFkZXIiLCJvcE1ha2VDZWxsc0hlYWRlciIsIm9wVW5tYWtlQ29sdW1uSGVhZGVyIiwib3BVbm1ha2VDb2x1bW5zSGVhZGVyIiwib3BVbm1ha2VDZWxsSGVhZGVyIiwib3BVbm1ha2VDZWxsc0hlYWRlciIsIm1ha2VSb3dTZWN0aW9uIiwiYXBwbHlTY29wZSIsInRhYmxlU2VjdGlvbiIsIm1ha2VSb3dzU2VjdGlvbiIsInJvd0luZGV4ZXMiLCJvcE1ha2VSb3dIZWFkZXIiLCJvcE1ha2VSb3dzSGVhZGVyIiwib3BNYWtlUm93Qm9keSIsIm9wTWFrZVJvd3NCb2R5Iiwib3BNYWtlUm93Rm9vdGVyIiwib3BNYWtlUm93c0Zvb3RlciIsIm9wU3BsaXRDZWxsSW50b0NvbHVtbnMiLCJvcFNwbGl0Q2VsbEludG9Sb3dzIiwib3BFcmFzZUNvbHVtbnMiLCJfY29tcGFyYXRvciIsIl9nZW5XcmFwcGVycyIsIm1heENvbEluZGV4Iiwib3BFcmFzZVJvd3MiLCJtYXhSb3dJbmRleCIsIm9wTWVyZ2VDZWxscyIsIm9wVW5tZXJnZUNlbGxzIiwib3BQYXN0ZUNlbGxzIiwicGFzdGVEZXRhaWxzIiwiZ3JpZGlmeSIsIndoIiwiZ3JpZEIiLCJzdGFydEFkZHJlc3MiLCJtZXJnZWRHcmlkIiwiZ3JpZGlmeVJvd3MiLCJjb250ZXh0Iiwib3BQYXN0ZUNvbHNCZWZvcmUiLCJvcFBhc3RlQ29sc0FmdGVyIiwib3BQYXN0ZVJvd3NCZWZvcmUiLCJvcFBhc3RlUm93c0FmdGVyIiwib3BHZXRDb2x1bW5zVHlwZSIsInNlbGVjdGVkQ29sdW1uQ2VsbHMiLCJvcEdldENlbGxzVHlwZSIsIm9wR2V0Um93c1R5cGUiLCJtaW5Sb3dSYW5nZSIsIm1heFJvd1JhbmdlIiwic2VsZWN0ZWRSb3dzIiwicmVzaXplIiwiYmVoYXZpb3VycyIsImFkanVzdEFuZFJlZGlzdHJpYnV0ZVdpZHRocyIsImZpcnN0Q29sdW1uSXNMb2NrZWQiLCJfd2FyZWhvdXNlIiwibGFzdENvbHVtbklzTG9ja2VkIiwiZ2V0Q29sdW1uc1dpZHRoIiwidW5pcXVlQ29scyIsImNvbFdpZHRoIiwiaW5zZXJ0Q29sdW1uRXh0cmFjdG9yIiwiY2hlY2tMb2NrZWQiLCJpbnNlcnRDb2x1bW5zRXh0cmFjdG9yIiwiZXJhc2VDb2x1bW5zRXh0cmFjdG9yIiwicGFzdGVDb2x1bW5zRXh0cmFjdG9yIiwiaGVhZGVyQ2VsbEdlbmVyYXRvciIsImJvZHlDZWxsR2VuZXJhdG9yIiwiaW5zZXJ0Um93QmVmb3JlIiwiaW5zZXJ0Um93c0JlZm9yZSIsImluc2VydFJvd0FmdGVyIiwiaW5zZXJ0Um93c0FmdGVyIiwiaW5zZXJ0Q29sdW1uQmVmb3JlIiwiaW5zZXJ0Q29sdW1uc0JlZm9yZSIsImluc2VydENvbHVtbkFmdGVyIiwiaW5zZXJ0Q29sdW1uc0FmdGVyIiwic3BsaXRDZWxsSW50b0NvbHVtbnMiLCJzcGxpdENlbGxJbnRvUm93cyIsImVyYXNlQ29sdW1ucyIsImVyYXNlUm93cyIsIm1ha2VDb2x1bW5IZWFkZXIiLCJtYWtlQ29sdW1uc0hlYWRlciIsInVubWFrZUNvbHVtbkhlYWRlciIsInVubWFrZUNvbHVtbnNIZWFkZXIiLCJtYWtlUm93SGVhZGVyIiwibWFrZVJvd3NIZWFkZXIiLCJtYWtlUm93Qm9keSIsIm1ha2VSb3dzQm9keSIsIm1ha2VSb3dGb290ZXIiLCJtYWtlUm93c0Zvb3RlciIsIm1ha2VDZWxsSGVhZGVyIiwibWFrZUNlbGxzSGVhZGVyIiwidW5tYWtlQ2VsbEhlYWRlciIsInVubWFrZUNlbGxzSGVhZGVyIiwibWVyZ2VDZWxscyIsInVubWVyZ2VDZWxscyIsInBhc3RlQ2VsbHMiLCJwYXN0ZUNvbHNCZWZvcmUiLCJwYXN0ZUNvbHNBZnRlciIsInBhc3RlUm93c0JlZm9yZSIsInBhc3RlUm93c0FmdGVyIiwiZ2V0Q29sdW1uc1R5cGUiLCJnZXRDZWxsc1R5cGUiLCJnZXRSb3dzVHlwZSIsIkNlbGxGaW5kZXIiLCJDZWxsR3JvdXAiLCJtb3ZlQnkiLCJnZXRXYXJlaG91c2UiLCJpbnRlcmNlcHRzIiwibmVzdGVkSW50ZXJjZXB0cyIsImZpcnN0VGFibGUiLCJsYXN0VGFibGUiLCJvcHRTdGFydENlbGwiLCJvcHRMYXN0Q2VsbCIsImxhc3RDZWxsIiwiZ2V0Qm94IiwiQmFyTWFuYWdlciIsIkJhclBvc2l0aW9ucyIsIndpcmUiLCJyZXNpemluZyIsImxhenlTaXppbmciLCJoZGlyZWN0aW9uIiwidmRpcmVjdGlvbiIsIm1hbmFnZXIiLCJfZXZlbnQiLCJUYWJsZVJlc2l6ZSIsImZpbmRUYWJsZVJvd0hlYWRlclR5cGUiLCJ0cmFuc2Zvcm1DZWxsIiwic3Vic3RpdHV0aW9uIiwidHJhbnNmb3JtUm93IiwiZml4ZWRDZWxsIiwic2VjdGlvbkNlbGxzIiwibmV3U2VjdGlvbiIsImdldFRhYmxlU2VjdGlvblR5cGUiLCJUYWJsZVNlY3Rpb24iLCJTdWdhckJvZHkiLCJ3aWR0aExvb2t1cCIsImdldHRlciIsIm5vbmVTaXplIiwiZ2V0V2lkdGgiLCJnZXRXaWR0aHMiLCJwZXJjZW50YWdlU2l6ZSIsImdldEZsb2F0V2lkdGgiLCJnZXRDZWxsRGVsdGEiLCJzaW5nbGVDb2x1bW5XaWR0aCIsIl9kZWx0YSIsIm1pbkNlbGxXaWR0aCIsImFkanVzdFRhYmxlV2lkdGgiLCJjdXJyZW50V2lkdGgiLCJjaGFuZ2UiLCJwaXhlbFNpemUiLCJuZXdOZXh0IiwiY2hvb3NlU2l6ZSIsInBlcmNlbnRNYXRjaCIsImdldFRhYmxlU2l6ZSIsIkxvY2tlZENvbHVtblV0aWxzIiwiZ2V0QXQiLCJmaW5kSXRlbSIsImZpbHRlcmVkIiwiZmlsdGVySXRlbXMiLCJnZW5lcmF0ZUNvbHVtbnMiLCJyb3dEYXRhIiwiY29sdW1uc0dyb3VwIiwiY29sdW1uSW5kZXgiLCJjb2xJbmRleCIsImFjY2VzcyIsInRhYmxlT3B0IiwibG9ja2VkQ29sdW1ucyIsIm1heFJvd3MiLCJtYXhDb2x1bW5zIiwicm93Q291bnQiLCJjb2xncm91cFJvd3MiLCJjdXJyZW50Um93Iiwicm93Q2VsbCIsIm9jY3VwaWVkQ29sdW1uUG9zaXRpb24iLCJvY2N1cGllZFJvd1Bvc2l0aW9uIiwicm93UG9zaXRpb24iLCJjb2x1bW5Qb3NpdGlvbiIsIm5ld3BvcyIsImNvbGdyb3VwcyIsImZyb21UYWJsZSIsImp1c3RDZWxscyIsImp1c3RDb2x1bW5zIiwiaGFzQ29sdW1ucyIsImdldENvbHVtbkF0IiwiQ29sdW1uQ29udGV4dCIsImlucHV0IiwiZGV0ZXJtaW5lIiwib25Pbmx5Iiwib25MZWZ0Iiwib25NaWRkbGUiLCJvblJpZ2h0IiwiaXNWYWxpZENlbGwiLCJyb3dzQXJyIiwiZ2V0QmxvY2siLCJpc1ZhbGlkIiwiZ2V0RmFsbGJhY2siLCJkZWNpZGUiLCJpbkJsb2NrIiwidmFsaWRJbkJsb2NrIiwiZGV0YWlsT3B0aW9uIiwiaXNTaW5nbGUiLCJpc0hlYWRlckNlbGwiLCJpc0hlYWRlckNlbGxzIiwiZ2V0Um93SGVhZGVyVHlwZSIsImlzSGVhZGVyUm93IiwiZ2V0Um93VHlwZSIsImhlYWRlckNlbGxzIiwicm93VHlwZXMiLCJoYXNIZWFkZXIiLCJoYXNGb290ZXIiLCJoYXNCb2R5Iiwicm93VHlwZSIsImZyb21Sb3dzT3JDb2xHcm91cHMiLCJlbGVtcyIsImdldFNlY3Rpb24iLCJnZXRQYXJlbnRTZWN0aW9uIiwiZnJvbVBhc3RlZFJvd3MiLCJtZWFzdXJlIiwiZ3JpZEEiLCJyb3dSZW1haW5kZXIiLCJjb2xSZW1haW5kZXIiLCJjb2xSZXF1aXJlZCIsInJvd1JlcXVpcmVkIiwibWVhc3VyZVdpZHRoIiwiY29sTGVuZ3RoQSIsImNvbExlbmd0aEIiLCJtZWFzdXJlSGVpZ2h0Iiwicm93TGVuZ3RoQSIsInJvd0xlbmd0aEIiLCJnZW5lcmF0ZUVsZW1lbnRzIiwiZ2VuZXJhdG9yIiwicm93RmlsbCIsImV4YW1wbGVSb3ciLCJjb2xGaWxsIiwibmV3Q2hpbGRyZW4iLCJsb2NrZWRDb2xGaWxsIiwiY29sTnVtIiwibmV3Q2hpbGQiLCJ0YWlsb3IiLCJmaWxsQ29scyIsImZpbGxSb3dzIiwiZ3JpZFdpZHRoIiwiaXNMYXN0Q29sTG9ja2VkIiwibG9ja2VkIiwibW9kaWZpZWRDb2xzIiwibmV3TG9ja2VkQ29sdW1ucyIsImFkZENlbGxzIiwiZ3JpZFJvdyIsImV4aXN0aW5nQ2VsbHMiLCJzZXRDZWxscyIsImFkZENlbGwiLCJtdXRhdGVDZWxsIiwibWFwQ2VsbHMiLCJnZXRDZWxsIiwiZ2V0Q2VsbEVsZW1lbnQiLCJjZWxsTGVuZ3RoIiwiZXh0cmFjdEdyaWREZXRhaWxzIiwiY2xvbmVSb3ciLCJjbG9uZUNlbGwiLCJSZXNpemVCZWhhdmlvdXIiLCJmcm9tV2FyZWhvdXNlIiwiZmluZEluV2FyZWhvdXNlIiwiZXh0cmFjdENlbGxzIiwibGMiLCJvcGVyYXRpb24iLCJhZGp1c3RtZW50IiwicG9zdEFjdGlvbiIsIm1vZGVsIiwib3V0IiwibmV3RWxlbWVudHMiLCJ0YWJsZVNpemluZyIsIm9uQ2VsbCIsIm9uUGFzdGUiLCJvblBhc3RlQnlFZGl0b3IiLCJvbk1lcmdhYmxlIiwib25Vbm1lcmdhYmxlIiwib25VbmxvY2tlZENlbGwiLCJpc1VubG9ja2VkVGFibGVDZWxsIiwiYWxsVW5sb2NrZWQiLCJvblVubG9ja2VkTWVyZ2FibGUiLCJtZXJnZWFibGUiLCJvblVubG9ja2VkVW5tZXJnYWJsZSIsImdldENvbHVtbiIsImdldFJvdyIsImZpbmREaWZmIiwiY29tcCIsInN1YmdyaWQiLCJpc0NvbFJvdyIsIkZpdG1lbnQiLCJpc1NwYW5uaW5nIiwibWF0Y2hpbmciLCJtZXJnZVRhYmxlcyIsImdyaWRCUm93cyIsIm1lcmdlSGVpZ2h0IiwibWVyZ2VXaWR0aCIsImxvY2tlZENvbHVtbk9iaiIsInNraXBwZWRDb2wiLCJncmlkQkNvbEluZGV4IiwibmV3Q2VsbEVsbSIsImdldFZhbGlkU3RhcnRBZGRyZXNzIiwiY3VycmVudFN0YXJ0QWRkcmVzcyIsImdyaWRDb2xMZW5ndGgiLCJhZGp1c3RlZFJvd0FkZHJlc3MiLCJwb3NzaWJsZUNvbEFkZHJlc3NlcyIsInZhbGlkQ29sQWRkcmVzcyIsImdldExvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMiLCJ2YWxpZFN0YXJ0QWRkcmVzcyIsImxvY2tlZENvbHVtbnNXaXRoaW5Cb3VuZHMiLCJmaXR0ZWRHcmlkIiwibmV3TG9ja2VkQ29sdW1uc1dpdGhpbkJvdW5kcyIsImluc2VydENvbHMiLCJmaXR0ZWROZXdHcmlkIiwic2Vjb25kRGVsdGEiLCJmaXR0ZWRPbGRHcmlkIiwiaW5zZXJ0Um93cyIsIm9sZENvbHMiLCJvbGRSb3dzIiwibmV3TG9ja2VkIiwic2Vjb25kRGlmZiIsImZpdHRlZEdyaWRCIiwiVGFibGVHcmlkIiwidG9EZXRhaWxzIiwic2VlbiIsInVwZGF0ZVNlZW4iLCJ0b0dyaWQiLCJjb2xncm91cENvbHMiLCJyb3dDZWxscyIsInJvd0RldGFpbCIsImN1cnJlbnRDZWxsIiwiY3VycmVudENlbGxFbG0iLCJpc1RvUmVwbGFjZSIsInVuaXF1ZUNlbGxzIiwic3BsaXRDb2xzIiwicHJldkNlbGwiLCJzdWJzdGl0dXRlIiwic3BsaXRSb3dzIiwicm93UHJldkNlbGxzIiwic3ViIiwiaW5zZXJ0Um93QXQiLCJuZXdSb3ciLCJleCIsIndpdGhpblNwYW4iLCJyZXQiLCJnZXRFbGVtZW50Rm9yIiwiaW5zZXJ0Q29sdW1uQXQiLCJleGFtcGxlQ29sIiwiaXNUYXJnZXRDZWxsIiwiZGVsZXRlQ29sdW1uc0F0IiwiZGVsZXRlUm93c0F0Iiwic2V0SWZOb3QiLCJpZ25vcmUiLCJpbnNlcnQiLCJnZW5lcmF0ZVNlY3Rpb24iLCJzZWN0aW9uTmFtZSIsInJlbmRlciIsIm5ld1Jvd3MiLCJzeW5jUm93cyIsImdyaWRTZWN0aW9uIiwidHIiLCJzeW5jQ29sR3JvdXAiLCJjb2xHcm91cCIsInJlbmRlclNlY3Rpb24iLCJzZWN0aW9uRWxlbXMiLCJyZW1vdmVTZWN0aW9uIiwicmVuZGVyT3JSZW1vdmVTZWN0aW9uIiwiaGVhZFNlY3Rpb24iLCJib2R5U2VjdGlvbiIsImZvb3RTZWN0aW9uIiwiY29sdW1uR3JvdXBzU2VjdGlvbiIsIkRlZmF1bHRSZW5kZXJPcHRpb25zIiwidGFibGVIZWFkZXJDZWxsIiwidGFibGVDZWxsIiwidGFibGVDb2x1bW4iLCJyb3dIZWFkZXJzIiwiY29sdW1uSGVhZGVycyIsImNyZWF0ZUdyb3VwUm93IiwiY3JlYXRlUm93cyIsImhlYWRlclR5cGUiLCJyZW5kZXJPcHRzIiwicm93SGVhZGVyc0dvSW5UaGVhZCIsImFjdHVhbFJvd0hlYWRlcnMiLCJ0aGVhZCIsInRoZWFkUm93SGVhZGVycyIsInRoZWFkUm93cyIsInRib2R5IiwibnVtUm93cyIsIm51bVJvd0hlYWRlcnMiLCJ0Ym9keVJvd3MiLCJub3RJblN0YXJ0Um93Iiwibm90SW5TdGFydENvbHVtbiIsImlzRHVwbGljYXRlZENlbGwiLCJyb3dSZXBsYWNlclByZWRpY2F0ZSIsInRhcmdldFJvdyIsImVudGlyZVRhYmxlSXNIZWFkZXIiLCJfcm93SW5kZXgiLCJjb2x1bW5SZXBsYWNlUHJlZGljYXRlIiwidGFyZ2V0Q29sdW1uIiwiX2NvbEluZGV4IiwiZGV0ZXJtaW5lU2NvcGUiLCJuZXdTY29wZSIsImlzSW5IZWFkZXIiLCJnZXRTY29wZSIsIm9wcG9zaXRlU2NvcGUiLCJyb3dTY29wZUdlbmVyYXRvciIsImNvbHVtblNjb3BlR2VuZXJhdG9yIiwicmVwbGFjZUluIiwidGFyZ2V0cyIsInJlcGxhY2VyIiwiZ2VuU2NvcGUiLCJzaG91bGRSZXBsYWNlIiwiaXNUYXJnZXQiLCJnZXRDb2x1bW5DZWxscyIsImdldFJvd0NlbGxzIiwicmVwbGFjZUNvbHVtbiIsInJlcGxhY2VDb2x1bW5zIiwiaW5kZXhlcyIsInNob3VsZFJlcGxhY2VDZWxsIiwic2NvcGVHZW5lcmF0b3IiLCJyZXBsYWNlUm93IiwicmVwbGFjZVJvd3MiLCJfY2VsbCIsInJlcGxhY2VDZWxsIiwicmVwbGFjZUNlbGxzIiwidGFyZ2V0Q2VsbHMiLCJEZWx0YXMiLCJSZWNhbGN1bGF0aW9ucyIsInN1bVVwIiwicmVjYWxjdWxhdGUiLCJyZWNhbGN1bGF0ZUFuZEFwcGx5IiwiYWRqdXN0V2lkdGgiLCJjbGFtcGVkU3RlcCIsImRlbHRhcyIsImR4IiwiYWRqdXN0SGVpZ2h0IiwiaGVpZ2h0cyIsImR5IiwibmV3Um93U2l6ZXMiLCJ0b3RhbCIsIl90YWJsZSIsInJlc2l6ZUJlaGF2aW91ciIsInRhYmxlUGl4ZWxXaWR0aCIsImFkanVzdFdpZHRoVG8iLCJfaW5mbyIsImJhciIsIkRyYWdnZXIiLCJCYXJNdXRhdGlvbiIsIkJhcnMiLCJyZXNpemVCYXJEcmFnZ2luZyIsImhvdmVyVGFibGUiLCJnZXRSZXNpemVyIiwiX2RhdGFSb3ciLCJfZGF0YUNvbCIsImN1cnJlbnRDb2wiLCJnZXREZWx0YSIsImRpciIsIm5ld1giLCJvbGRYIiwiZmluZENsb3Nlc3RFZGl0YWJsZVRhYmxlIiwiaXNSZXNpemVyIiwicmVmcmVzaCIsInRibCIsIk11dGF0aW9uIiwiZGVsZWdhdGUiLCJhc3NpZ24iLCJEaXJlY3Rpb24iLCJyb3dJbmZvIiwiY29sSW5mbyIsInJ0bEVkZ2UiLCJsdHJFZGdlIiwiZ2V0TGVmdEVkZ2UiLCJnZXRSaWdodEVkZ2UiLCJnZXRUb3BFZGdlIiwiZ2V0Qm90dG9tRWRnZSIsImZpbmRQb3NpdGlvbnMiLCJnZXRJbm5lckVkZ2UiLCJnZXRPdXRlckVkZ2UiLCJsaW5lcyIsImNlbGxPcHRpb24iLCJsYXN0TGluZSIsIm5lZ2F0ZSIsIm9wdEVsZW1lbnRzIiwiQmFyIiwicmVzaXplQmFyIiwicmVzaXplUm93QmFyIiwicmVzaXplQ29sQmFyIiwiQkFSX1RISUNLTkVTUyIsInJlc2l6YWJsZVJvd3MiLCJyZXNpemFibGVDb2x1bW5zIiwicmVzaXphYmxlQ29scyIsImNvbEVsbU9wdCIsImNvbHVtbkNlbGxzIiwiZHJhd0JhciIsInBvc2l0aW9ucyIsImNwT3B0aW9uIiwiY3AiLCJyZWZyZXNoQ29sIiwiY29sUG9zaXRpb25zIiwicG9zaXRpb24iLCJ0YWJsZUhlaWdodCIsImNvbEJhciIsInJlZnJlc2hSb3ciLCJyb3dQb3NpdGlvbnMiLCJyb3dCYXIiLCJyZWZyZXNoR3JpZCIsIndhcmhvdXNlIiwicmVzaXphYmxlUm93QmFycyIsInJlc2l6YWJsZVJvd1Bvc2l0aW9ucyIsIl9wb3MiLCJiYXJJbmRleCIsInJlc2l6YWJsZUNvbEJhcnMiLCJyZXNpemFibGVDb2xQb3NpdGlvbnMiLCJiYXJzIiwiaGlkZSIsInNob3ciLCJpc1Jvd0JhciIsImlzQ29sQmFyIiwiZ2V0UmF3VyIsImdldFJhd0giLCJqdXN0Q29scyIsImlzVmFsaWRDb2x1bW4iLCJzdXBwb3J0c0NvbFdpZHRocyIsImdldERpbWVuc2lvbiIsImNlbGxPcHQiLCJiYWNrdXBzIiwiZ2V0V2lkdGhGcm9tIiwiY29sRmlsdGVyIiwiZ2V0RGVkdWNlZCIsImRlZHVjZWQiLCJnZXRSYXdXaWR0aHMiLCJnZXRQZXJjZW50YWdlV2lkdGhzIiwiY2VsbFdpZHRoIiwiZ2V0UGl4ZWxXaWR0aHMiLCJnZXRIZWlnaHRGcm9tIiwiZ2V0SGVpZ2h0IiwiZ2V0UGl4ZWxIZWlnaHRzIiwiZ2V0UmF3SGVpZ2h0cyIsIm1lYXN1cmVzIiwicmVjYWxjdWxhdGVXaWR0aEZvckNlbGxzIiwicmVjYWxjdWxhdGVXaWR0aEZvckNvbHVtbnMiLCJncm91cHMiLCJyZWNhbGN1bGF0ZUhlaWdodEZvckNlbGxzIiwibWF0Y2hSb3dIZWlnaHQiLCJTaXplIiwicmVkaXN0cmlidXRlVG9QZXJjZW50IiwiY29sVHlwZSIsInB4IiwicGMiLCJyZWRpc3RyaWJ1dGVUb1B4IiwibmV3VG90YWxXaWR0aCIsInNjYWxlIiwicmVkaXN0cmlidXRlRW1wdHkiLCJuZXdXaWR0aFR5cGUiLCJwaXhlbHMiLCJyZWRpc3RyaWJ1dGVWYWx1ZXMiLCJfcGMiLCJuZXdUeXBlIiwiZmxvYXRzIiwibm9ybWFsaXplIiwic3VtIiwicm91bmREb3duIiwiZmxvb3JlZCIsInZhbGlkYXRlIiwidmFsaWRhdGVGb3IiLCJyYXdBbW91bnQiLCJEaW1lbnNpb24iLCJnZXRTcGFuIiwiclBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCIsInJQaXhlbEJhc2VkU2l6ZVJlZ2V4IiwiZ2V0UGVyY2VudFNpemUiLCJvdXRlckdldHRlciIsImlubmVyR2V0dGVyIiwicmVsYXRpdmVQYXJlbnQiLCJzZXRQaXhlbFdpZHRoIiwic2V0UGVyY2VudGFnZVdpZHRoIiwic2V0SGVpZ2h0IiwicmVtb3ZlSGVpZ2h0IiwiZ2V0SGVpZ2h0VmFsdWUiLCJjb252ZXJ0IiwibnVtYmVyIiwic2V0dGVyIiwibm9ybWFsaXplUGl4ZWxTaXplIiwiZ2V0VG90YWxIZWlnaHQiLCJnZXRSYXciLCJwcm9wIiwidmFsIiwiZ2V0UmF3V2lkdGgiLCJnZXRSYXdIZWlnaHQiLCJnZXRQZXJjZW50YWdlV2lkdGgiLCJnZXRQaXhlbFdpZHRoIiwiZ2V0R2VuZXJpY1dpZHRoIiwic2V0R2VuZXJpY1dpZHRoIiwiZ2V0UGl4ZWxUYWJsZVdpZHRoIiwiZ2V0UGl4ZWxUYWJsZUhlaWdodCIsInBlcmNlbnRhZ2VCYXNlZFNpemVSZWdleCIsInBpeGVsQmFzZWRTaXplUmVnZXgiLCJpblNlbGVjdGlvbiIsImxlZnRFZGdlIiwidG9wRWRnZSIsImJvdHRvbUVkZ2UiLCJpc1dpdGhpbiIsImlzUmVjdGFuZ3VsYXIiLCJpc1JlY3QiLCJkZXRhaWxJc1dpdGhpbiIsIkNlbGxCb3VuZHMiLCJkZXN0IiwiaW5zaWRlIiwicGFyZW50Q2VsbCIsImlubmVyQ2VsbCIsImlzQ29udGFpbmVkQnkiLCJjMSIsImMyIiwiZ2V0Qm91bmRzIiwiZ2V0QW55Qm94Iiwic3RhcnRDb29yZHMiLCJmaW5pc2hDb29yZHMiLCJzYyIsImZjIiwiaGFzQ29sc3BhbiIsImNlbGxPckNvbCIsImhhc1Jvd3NwYW4iLCJnZXRDc3NWYWx1ZSIsIm1pbldpZHRoIiwibWluSGVpZ2h0IiwidW5pcXVlQ29sdW1ucyIsInVuaXF1ZUNoZWNrIiwiY29sdW1uRXhpc3RzIiwiZmlyc3RMYXllciIsImZpbHRlckZpcnN0TGF5ZXIiLCJnZXRMb2NrZWRDb2x1bW5zRnJvbVRhYmxlIiwibG9ja2VkQ29sU3RyIiwibG9ja2VkQ29scyIsImdldExvY2tlZENvbHVtbnNGcm9tR3JpZCIsImxvY2tlZEFyciIsIl92YWwiLCJkZWR1Y2UiLCJhYSIsImV4dHJhcyIsInRvQXJyYXkiLCJyZWN1cnNlIiwiY3VyIiwiZTEiLCJlMiIsImlzRXF1YWxOb2RlIiwibWVtYmVyIiwiZDEiLCJkMiIsIm1ha2VSYW5nZSIsImNvbW1vbkFuY2VzdG9yQ29udGFpbmVyIiwic2FtZSIsIm1hcmtlciIsImFwcGVuZCIsInByZXBlbmQiLCJmaXJzdENoaWxkIiwiYXBwZW5kQXQiLCJ3cmFwIiwid3JhcHBlciIsImVtcHR5Iiwicm9ndWUiLCJyZW1vdmUiLCJkb20iLCJ1bndyYXAiLCJpc0RlZXAiLCJzaGFsbG93IiwiZGVlcCIsInNoYWxsb3dBcyIsImF0dHJpYnV0ZXMiLCJjbG9uZUNoaWxkcmVuIiwiRmlsdGVyZWRFdmVudCIsImNhcHR1cmUiLCJmcm9tUmF3RXZlbnQiLCJBVFRSSUJVVEUiLCJDREFUQV9TRUNUSU9OIiwiQ09NTUVOVCIsIkRPQ1VNRU5UIiwiRE9DVU1FTlRfVFlQRSIsIkRPQ1VNRU5UX0ZSQUdNRU5UIiwiRUxFTUVOVCIsIlRFWFQiLCJQUk9DRVNTSU5HX0lOU1RSVUNUSU9OIiwiRU5USVRZX1JFRkVSRU5DRSIsIkVOVElUWSIsIk5PVEFUSU9OIiwiZ2V0U2hhZG93SG9zdCIsImdldFNoYWRvd1Jvb3QiLCJpbkJvZHkiLCJnZXRCb2R5IiwiZnJvbUh0bWwiLCJodG1sIiwiZnJvbURvbSIsImZyb21UYWciLCJmcm9tVGV4dCIsImZyb21Qb2ludCIsImRvY0VsbSIsImZyb21UYWdzIiwidGV4dHMiLCJub2RlcyIsImZyb21FbGVtZW50cyIsImZyYWdtZW50IiwiZ2V0SGVhZCIsIlNhbmRIVE1MRWxlbWVudCIsIk5vZGVUeXBlcyIsImlzQ29tbWVudCIsImlzSFRNTEVsZW1lbnQiLCJpc0VsZW1lbnQiLCJpc1RleHQiLCJpc0RvY3VtZW50IiwiaXNEb2N1bWVudEZyYWdtZW50IiwiaXNUYWciLCJTdWdhckhlYWQiLCJpc1NoYWRvd1Jvb3QiLCJkb3MiLCJnZXRSb290Tm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJnZXRTdHlsZUNvbnRhaW5lciIsImdldENvbnRlbnRDb250YWluZXIiLCJpc0luU2hhZG93Um9vdCIsImdldE9yaWdpbmFsRXZlbnRUYXJnZXQiLCJpc09wZW5TaGFkb3dIb3N0IiwiY29tcG9zZWRQYXRoIiwiaXNPcGVuU2hhZG93Um9vdCIsInNyIiwiaXNDbG9zZWRTaGFkb3dSb290IiwiTm9kZVZhbHVlIiwiZ2V0T3B0aW9uIiwicmVhZCIsInJhd1NldCIsInNldEFsbCIsInNldE9wdGlvbnMiLCJnZXRPcHQiLCJoYXNOb25lIiwidHJhbnNmZXJPbmUiLCJzcmNWYWx1ZSIsInRyYW5zZmVyIiwiQ2xhc3NMaXN0IiwiVG9nZ2xlciIsImNsYXp6IiwiY2xlYW5DbGFzcyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRvZ2dsZXIiLCJoYXNDbGFzc2xpc3QiLCJjbGFzc2VzIiwiaGFzQWxsIiwiaGFzQW55IiwiZ2V0TmF0aXZlIiwiY2xvc2VzdCIsImFzc3VtZUVkaXRhYmxlIiwiU3R5bGUiLCJpbnRlcm5hbFNldCIsImludGVybmFsUmVtb3ZlIiwiZ2V0VW5zYWZlUHJvcGVydHkiLCJnZXRBbGxSYXciLCJydWxlTmFtZSIsImlzVmFsaWRWYWx1ZSIsInN0eWxlIiwicHJlc2VydmUiLCJvbGRTdHlsZXMiLCJzb3VyY2VEb20iLCJ0YXJnZXREb20iLCJyZWZsb3ciLCJvbkRpcmVjdGlvbiIsImlzTHRyIiwiaXNSdGwiLCJnZXREaXJlY3Rpb24iLCJTdWdhckVsZW1lbnRzIiwib3duZXIiLCJkb2NEb20iLCJjb250ZW50RWxlbWVudHMiLCJnZXRPdXRlciIsIkNsYXNzZXMiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVtb3ZlQ2xhc3NlcyIsImhhc0NsYXNzIiwidHVybk9mZiIsInR1cm5PbiIsImluQW5jZXN0b3IiLCJkZXNjZW5kYW50cyIsImluUGFyZW50IiwiY2hpbGRPZiIsImluZGV4SW5QYXJlbnQiLCJzZWxlY3RvcnNJblBhcmVudCIsImRlc2NlbmRhbnRzSW5BbmNlc3RvciIsImFuY2VzdG9yU2VsZWN0b3IiLCJkZXNjZW5kYW50U2VsZWN0b3IiLCJhbnkiLCJkZXNjZW5kYW50Iiwic2libGluZ3MiLCJDbG9zZXN0T3JBbmNlc3RvciIsInRlc3QiLCJkZXNjZW5kIiwicmVzIiwiYnlwYXNzU2VsZWN0b3IiLCJvbmUiLCJSZWN1cnNlIiwiZG9jdW1lbnRPck93bmVyIiwiZG9jdW1lbnRFbGVtZW50IiwiZGVmYXVsdFZpZXciLCJwYXJlbnROb2RlIiwicGFyZW50RWxlbWVudCIsImtpbiIsInJhd1BhcmVudCIsImZpbHRlclNlbGYiLCJvZmZzZXRQYXJlbnQiLCJwcmV2U2libGluZyIsIm5leHRTaWJsaW5nIiwicHJldlNpYmxpbmdzIiwibmV4dFNpYmxpbmdzIiwiY3MiLCJsYXN0Q2hpbGQiLCJjaGlsZE5vZGVzQ291bnQiLCJoYXNDaGlsZE5vZGVzIiwibGVhZiIsIlVuaWNvZGUiLCJnZXRFbmQiLCJpc0VuZCIsImlzU3RhcnQiLCJpc1RleHROb2RlV2l0aEN1cnNvclBvc2l0aW9uIiwiaXNDb250ZW50RWRpdGFibGVGYWxzZSIsImVsZW1lbnRzV2l0aEN1cnNvclBvc2l0aW9uIiwiaXNDdXJzb3JQb3NpdGlvbiIsImhhc0N1cnNvclBvc2l0aW9uIiwiZGVzY2VuZGFudFJ0bCIsImV4YWN0RnJvbVJhbmdlIiwic2ltUmFuZ2UiLCJfZmluaXNoU2l0dSIsIl9zb2Zmc2V0IiwiX2ZpbmlzaCIsIl9mb2Zmc2V0IiwiZG9tUmFuZ2UiLCJnZXRXaW4iLCJvbkJlZm9yZSIsIm9uT24iLCJvbkFmdGVyIiwiTmF0aXZlUmFuZ2UiLCJDYXJldFJhbmdlIiwiV2l0aGluIiwiUHJlZmlsdGVyIiwiRG9jdW1lbnRQb3NpdGlvbiIsIlN1Z2FyRnJhZ21lbnQiLCJnZXROYXRpdmVTZWxlY3Rpb24iLCJkb1NldE5hdGl2ZVJhbmdlIiwiZG9TZXRSYW5nZSIsImZpbmRXaXRoaW4iLCJzZXRMZWdhY3lSdGxSYW5nZSIsInNldFJhbmdlRnJvbVJlbGF0aXZlIiwic2V0RXhhY3QiLCJzZXRSZWxhdGl2ZSIsInRvTmF0aXZlIiwiZ2V0RG9tUmFuZ2UiLCJyZWFkUmFuZ2UiLCJmaXJzdFJuZyIsImxhc3RSbmciLCJkb0dldEV4YWN0IiwiZm9jdXMiLCJzZXRUb0VsZW1lbnQiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJybmdHZXR0ZXIiLCJmb3JFbGVtZW50IiwiZ2V0RXhhY3QiLCJnZXRGaXJzdFJlY3QiLCJnZXRBdFBvaW50IiwiZ2V0QXNTdHJpbmciLCJkZWxldGVBdCIsImlzQ29sbGFwc2VkIiwidW5pdHMiLCJwYXR0ZXJuIiwiZGVjaW1hbERpZ2l0cyIsInNpZ25lZEludGVnZXIiLCJleHBvbmVudFBhcnQiLCJkb3QiLCJvcHQiLCJ1bnNpZ25lZERlY2ltYWxMaXRlcmFsIiwiZmxvYXQiLCJSZWdFeHAiLCJpc1VuaXQiLCJhY2NlcHRlZCIsImNoZWNrIiwicGFyc2UiLCJ1bml0UmF3Iiwibm9ybWFsaXNlIiwiUnVudGltZVNpemUiLCJnZXRJbm5lciIsImdldFJ1bnRpbWUiLCJzZXRNYXgiLCJpbmNsdXNpb25zIiwiYWJzTWF4IiwiX0RPQyIsInRvIiwiYnkiLCJzYXZlIiwicmVzdG9yZSIsImludG9WaWV3IiwiYWxpZ25Ub1RvcCIsImlzU2FmYXJpIiwiaW50b1ZpZXdJZk5lZWRlZCIsImNvbnRhaW5lckJveCIsImVsZW1lbnRCb3giLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImJveFBvc2l0aW9uIiwiZmlyc3REZWZpbmVkT3JaZXJvIiwiYWJzb2x1dGUiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiY2xpZW50VG9wIiwiY2xpZW50TGVmdCIsInZpZXdwb3J0IiwiQXR0ckxpc3QiLCJzdXBwb3J0cyIsImdldE9mZnNldCIsImFnZ3JlZ2F0ZSIsInByb3BlcnRpZXMiLCJtYXgiLCJjdW11bGF0aXZlSW5jbHVzaW9ucyIsImFic29sdXRlTWF4IiwiU3VnYXJTaGFkb3dEb20iLCJta0V2ZW50IiwicHJldmVudCIsInJhd0V2ZW50IiwidXNlQ2FwdHVyZSIsIndyYXBwZWQiLCJ0b051bWJlciIsImdldFByb3AiLCJjYWxjQ29udGVudEJveFNpemUiLCJ1cHBlciIsImxvd2VyIiwicGFkZGluZ1VwcGVyIiwicGFkZGluZ0xvd2VyIiwiYm9yZGVyVXBwZXIiLCJib3JkZXJMb3dlciIsImdldENhbGN1bGF0ZWRIZWlnaHQiLCJib3hTaXppbmciLCJnZXRDYWxjdWxhdGVkV2lkdGgiLCJnZXRJbm5lcldpZHRoIiwiaXNTdXBwb3J0ZWQiLCJzZWxlY3ROb2RlQ29udGVudHNVc2luZyIsIm91dGVyUmFuZ2UiLCJpbm5lclJhbmdlIiwic2V0U3RhcnQiLCJzZXRGaW5pc2giLCJyZXBsYWNlV2l0aCIsImRlbGV0ZUNvbnRlbnRzIiwicmVsYXRpdmVUb05hdGl2ZSIsImV4YWN0VG9OYXRpdmUiLCJjbG9uZUZyYWdtZW50IiwidG9SZWN0IiwicmVjdHMiLCJmcm9tUmFuZ2UiLCJnZXRSYW5nZXMiLCJkb0RpYWdub3NlIiwicmFuZ2VzIiwicmV2ZXJzZWQiLCJyZXYiLCJkaWFnbm9zZSIsImFzTHRyUmFuZ2UiLCJkaWFnbm9zaXMiLCJjYXJldFBvc2l0aW9uRnJvbVBvaW50IiwiY2FyZXRSYW5nZUZyb21Qb2ludCIsImF2YWlsYWJsZVNlYXJjaCIsIk5vZGUiLCJ3aXRoaW5Db250YWluZXIiLCJhbmNlc3RvckFycmF5IiwiYmVmb3JlU3BlY2lhbCIsInByZXByb2Nlc3NSZWxhdGl2ZSIsInByZXByb2Nlc3NFeGFjdCIsInByZXByb2Nlc3MiLCJNb2RlbE1hbmFnZXIiLCJUYWJsZSIsIkRvbU1vZGVsIiwiZWRpdG9yIiwiQ2xpcGJvYXJkIiwiVGFibGVBY3Rpb25zIiwiQ29tbWFuZHMiLCJPcHRpb25zIiwiUXVlcnlDb21tYW5kcyIsIlRhYmxlQ2VsbFNlbGVjdGlvbkhhbmRsZXIiLCJUYWJsZVJlc2l6ZUhhbmRsZXIiLCJzZXR1cFRhYmxlIiwicmVzaXplSGFuZGxlciIsImNlbGxTZWxlY3Rpb25IYW5kbGVyIiwiYWN0aW9ucyIsIkNvcHlTZWxlY3RlZCIsIlRhYmxlRmlsbCIsIlV0aWxzIiwiVGFibGVUYXJnZXRzIiwiRXBoZW1lcmEiLCJleHRyYWN0U2VsZWN0ZWQiLCJzZXJpYWxpemVFbGVtZW50cyIsImdldFRleHRDb250ZW50IiwicmVwbGljYUVsZW1lbnRzIiwib2Zmc2NyZWVuRGl2Iiwicm9vdCIsInRleHRDb250ZW50IiwicmVnaXN0ZXJFdmVudHMiLCJtdWx0aUNlbGxDb250ZXh0IiwiaXNUYWJsZSIsIlRhYmxlUmVuZGVyIiwiVGFibGVDb252ZXJzaW9ucyIsIkh0bWwiLCJwbGFjZUNhcmV0SW5DZWxsIiwic2VsZWN0Rmlyc3RDZWxsSW5UYWJsZSIsInRhYmxlRWxtIiwiZmlyZUV2ZW50cyIsImlzUGVyY2VudGFnZSIsImNvbEhlYWRlcnMiLCJkZWZhdWx0U3R5bGVzIiwiaW5zZXJ0VGFibGUiLCJjaGVja0lucHV0IiwiaGVhZGVyUm93cyIsImhlYWRlckNvbHVtbnMiLCJEb21EZXNjZW50IiwiQ2VsbE11dGF0aW9ucyIsIlRhYmxlR3JpZFNpemUiLCJUYWJsZU9wZXJhdGlvbnMiLCJpc1RhYmxlQm9keSIsImxhc3RSb3dHdWFyZCIsImxhc3RDb2x1bW5HdWFyZCIsImNvbE11dGF0aW9uT3AiLCJzZXRTZWxlY3Rpb25Gcm9tQWN0aW9uIiwiZGVzIiwiZXhlY3V0ZSIsImd1YXJkIiwiZWZmZWN0Iiwibm9FdmVudHMiLCJkZWxldGVSb3ciLCJkZWxldGVDb2x1bW4iLCJnZXRUYWJsZUNlbGxUeXBlIiwiZ2V0VGFibGVDb2xUeXBlIiwiZ2V0VGFibGVSb3dUeXBlIiwiRmFrZUNsaXBib2FyZCIsInRhYmxlVHlwZUJhc2UiLCJ0YWJsZVR5cGVSb3ciLCJ0YWJsZVR5cGVDb2x1bW4iLCJzZXREYXRhIiwiaXRlbXMiLCJmYWtlQ2xpcGJvYXJkSXRlbSIsImdldERhdGEiLCJjbGVhckRhdGEiLCJzZXRSb3dzIiwicm93c09wdCIsImNsZWFyUm93cyIsImdldFJvd3MiLCJzZXRDb2x1bW5zIiwiY29sdW1uc09wdCIsImNsZWFyQ29sdW1ucyIsImdldENvbHVtbnMiLCJDb3B5Q29scyIsIkNvcHlSb3dzIiwiSW5zZXJ0VGFibGUiLCJnZXRTZWxlY3Rpb25TdGFydENlbGxPckNhcHRpb24iLCJnZXRTZWxlY3Rpb25TdGFydENlbGwiLCJyZWdpc3RlckNvbW1hbmRzIiwiZXJhc2VUYWJsZSIsImNlbGxPckNhcHRpb24iLCJzZXRTaXppbmdNb2RlIiwic2l6aW5nIiwiaXNGb3JjZWRTaXppbmciLCJnZXRUYWJsZUZyb21DZWxsIiwicGVyZm9ybUFjdGlvbk9uU2VsZWN0aW9uIiwiYWN0aW9uIiwidG9nZ2xlVGFibGVDbGFzcyIsIl91aSIsInRvZ2dsZVRhYmxlQ2VsbENsYXNzIiwiYWxsSGF2ZUNsYXNzIiwiZm9ybWF0dGVyQWN0aW9uIiwidG9nZ2xlQ2FwdGlvbiIsImNhcHRpb24iLCJwb3N0RXhlY3V0ZSIsIl9kYXRhIiwiYWN0T25TZWxlY3Rpb24iLCJjb3B5Um93U2VsZWN0aW9uIiwiY29weUNvbFNlbGVjdGlvbiIsInBhc3RlT25TZWxlY3Rpb24iLCJjbG9uZWRSb3dzIiwiYWN0T25UeXBlIiwiZ2V0QWN0aW9uIiwiZnVuYyIsImdldEZvcm1hdE5hbWUiLCJ2YWxpZEFyZ3MiLCJmb3JtYXROYW1lIiwiZmlyZU5ld1JvdyIsImZpcmVOZXdDZWxsIiwiZmlyZVRhYmxlTW9kaWZpZWQiLCJmaXJlVGFibGVTZWxlY3Rpb25DaGFuZ2UiLCJvdGhlckNlbGxzIiwiZmlyZVRhYmxlU2VsZWN0aW9uQ2xlYXIiLCJmaXJlT2JqZWN0UmVzaXplU3RhcnQiLCJmaXJlT2JqZWN0UmVzaXplZCIsInN0eWxlTW9kaWZpZWQiLCJzdHJ1Y3R1cmVNb2RpZmllZCIsInN0eWxlQW5kU3RydWN0dXJlTW9kaWZpZWQiLCJvcHRpb24iLCJkZWZhdWx0V2lkdGgiLCJnZXRQaXhlbEZvcmNlZFdpZHRoIiwicGFyZW50QmxvY2siLCJkZXRlcm1pbmVEZWZhdWx0VGFibGVTdHlsZXMiLCJpc1RhYmxlUmVzcG9uc2l2ZUZvcmNlZCIsInNob3VsZFN0eWxlV2l0aENzcyIsImlzVGFibGVQaXhlbHNGb3JjZWQiLCJkZXRlcm1pbmVEZWZhdWx0VGFibGVBdHRyaWJ1dGVzIiwiZGVmYXVsdEF0dHJpYnV0ZXMiLCJyZWdpc3RlciIsInJlZ2lzdGVyT3B0aW9uIiwidmFsaWQiLCJnZXRUYWJsZUNsb25lRWxlbWVudHMiLCJoYXNUYWJsZU9iamVjdFJlc2l6aW5nIiwib2JqZWN0UmVzaXppbmciLCJnZXRUYWJsZUhlYWRlclR5cGUiLCJnZXRUYWJsZUNvbHVtblJlc2l6aW5nQmVoYXZpb3VyIiwiaXNQcmVzZXJ2ZVRhYmxlQ29sdW1uUmVzaXppbmciLCJpc1Jlc2l6ZVRhYmxlQ29sdW1uUmVzaXppbmciLCJnZXRUYWJsZVNpemluZ01vZGUiLCJpc1RhYmxlUGVyY2VudGFnZXNGb3JjZWQiLCJoYXNUYWJsZVJlc2l6ZUJhcnMiLCJzaG91bGRNZXJnZUNvbnRlbnRPblBhc3RlIiwiZ2V0VGFibGVEZWZhdWx0QXR0cmlidXRlcyIsImdldFRhYmxlRGVmYXVsdFN0eWxlcyIsInRhYmxlVXNlQ29sdW1uR3JvdXAiLCJmaXhlZENvbnRhaW5lclNlbGVjdG9yIiwiZml4ZWRUb29sYmFyQ29udGFpbmVyVGFyZ2V0IiwiZml4ZWRDb250YWluZXJUYXJnZXQiLCJ1c2VGaXhlZENvbnRhaW5lciIsImdldFVpTW9kZSIsImlzU3BsaXRVaU1vZGUiLCJyZWdpc3RlclF1ZXJ5Q29tbWFuZHMiLCJsb29rdXBPblNlbGVjdGlvbiIsIklucHV0SGFuZGxlcnMiLCJPdGhlckNlbGxzIiwiZ2V0Q2VsbHNGcm9tU2VsZWN0aW9uIiwiaGFzSW50ZXJuYWxUYXJnZXQiLCJjZWxsU2VsZWN0aW9uIiwiY2VsbHNEb20iLCJvdGhlckNlbGxzRG9tIiwiY2VsbEFyciIsIl9lIiwic3luY1NlbGVjdGlvbiIsIm1vdXNlSGFuZGxlcnMiLCJrZXlIYW5kbGVycyIsImhhc1NoaWZ0S2V5IiwiaGFuZGxlUmVzcG9uc2UiLCJyZXNwb25zZSIsIm5zIiwid3JhcHBlZEV2ZW50IiwiaXNMZWZ0TW91c2UiLCJpc0xlZnRCdXR0b25QcmVzc2VkIiwiZHJhZ1N0YXJ0IiwibW91c2VEb3duIiwibW91c2VPdmVyIiwibW91c2VVcCIsImdldERvdWJsZVRhcCIsImxhc3RUYXJnZXQiLCJsYXN0VGltZVN0YW1wIiwidG91Y2hFbmQiLCJsVCIsImxUUyIsImRvdWJsZVRhcCIsImNsZWFyU2VsZWN0ZWRDZWxscyIsImdldFNlbGVjdGVkQ2VsbHMiLCJUYWJsZVdpcmUiLCJiYXJSZXNpemVyUHJlZml4Iiwic3luY1RhYmxlQ2VsbFBpeGVscyIsImNvbXB1dGVkV2lkdGgiLCJpc0Nvcm5lclJlc2l6ZSIsImdldENvcm5lckxvY2F0aW9uIiwic2VsZWN0aW9uUm5nIiwidGFibGVSZXNpemUiLCJyZXNpemVXaXJlIiwic3RhcnRXIiwic3RhcnRSYXdXIiwic3RhcnRIIiwic3RhcnRSYXdIIiwibGF6eVJlc2l6aW5nQmVoYXZpb3VyIiwiZ2V0TnVtQ29sdW1ucyIsImdldE51bVJvd3MiLCJhZnRlckNvcm5lclJlc2l6ZSIsImxvY2F0aW9uIiwiaXNSaWdodEVkZ2VSZXNpemUiLCJpc05vcnRoRWRnZVJlc2l6ZSIsInBlcmNlbnRXIiwidGFyZ2V0UGVyY2VudFciLCJzeiIsInJhd1dpcmUiLCJyYXdUYWJsZSIsInRhcmdldEVsbSIsInNob3dSZXNpemVCYXJzIiwiaGlkZVJlc2l6ZUJhcnMiLCJyZW1vdmVEYXRhU3R5bGUiLCJyZW1vdmVTdHlsZUF0dHJpYnV0ZSIsImdldFNlbGVjdGlvblN0YXJ0IiwiZ2V0U2VsZWN0aW9uRW5kIiwiZ2V0UGl4ZWxIZWlnaHQiLCJnZXRSYXdWYWx1ZSIsImlzUGl4ZWwiLCJlZGl0b3JCb2R5IiwiQ2VsbE9wU2VsZWN0aW9uIiwibm9NZW51IiwiZm9yTWVudSIsImNsaXBib2FyZCIsInBhc3RlUm93cyIsInN0clNlbGVjdGVkIiwic3RyU2VsZWN0ZWRTZWxlY3RvciIsInN0ckF0dHJpYnV0ZVNlbGVjdG9yIiwic3RyRmlyc3RTZWxlY3RlZCIsInN0ckZpcnN0U2VsZWN0ZWRTZWxlY3RvciIsInN0ckxhc3RTZWxlY3RlZCIsInN0ckxhc3RTZWxlY3RlZFNlbGVjdG9yIiwiYXR0cmlidXRlU2VsZWN0b3IiLCJnZXRTZWxlY3Rpb25DZWxsRmFsbGJhY2siLCJnZXRTZWxlY3Rpb25Gcm9tU2VsZWN0b3IiLCJpbml0Q2VsbCIsImNlbGxOYW1lIiwiZ2V0U2VsZWN0aW9uQ2VsbE9yQ2FwdGlvbiIsImdldFNlbGVjdGlvbkNlbGwiLCJnZXRDZWxsc0Zyb21GYWtlU2VsZWN0aW9uIiwiTW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQSw2REFBZSxNQUFNLEVBQUM7QUFDZjs7Ozs7Ozs7Ozs7Ozs7QUNIUDs7QUFFQSw2REFBZSxNQUFNLEVBQUM7QUFDZjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0g4QztBQUkvQjtBQUU4QjtBQUlwRCw2REFBZ0I7SUFDZCxNQUFNa0IsUUFBUSxDQUFDQztRQUNiLE9BQU9OLDhEQUFvQixDQUFDTSxRQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUM7SUFDcEQ7SUFFQSxNQUFNQyxXQUFXLENBQUNELFVBQWdDSCx5REFBd0IsQ0FBQ0csU0FBUyxHQUFHO0lBRXZGLE1BQU1FLGFBQWEsQ0FBQ0Y7UUFDbEIsSUFBSSxDQUFDTCxtREFBbUIsQ0FBQ0ssVUFBVTtZQUNqQyxPQUFPO1FBQ1Q7UUFDQSxJQUFJTCw4Q0FBYyxDQUFDSyxhQUFhLFFBQVE7WUFDdEMsT0FBTztRQUNUO1FBQ0EsT0FBT25CLHFEQUFZLENBQUNpQiw2REFBYUEsRUFBRUgsOENBQWMsQ0FBQ0s7SUFDcEQ7SUFFQSxNQUFNRyxhQUFhLENBQUNIO1FBQ2xCLElBQUksQ0FBQ0wsbURBQW1CLENBQUNLLFVBQVU7WUFDakMsT0FBTztRQUNUO1FBQ0EsT0FBT25CLHFEQUFZLENBQUM7WUFBRTtZQUFNO1lBQU87WUFBTTtTQUFTLEVBQUVjLDhDQUFjLENBQUNLO0lBQ3JFO0lBRUEsTUFBTUksZ0JBQWdCLENBQUNKLFVBQTBCTCxtREFBbUIsQ0FBQ0ssWUFBWWhCLDZDQUFhLENBQUNnQixTQUFTLHVCQUF1QjtJQUUvSCxNQUFNSyxrQkFBa0IsQ0FBQ0wsU0FBNkJNO1FBQ3BELE9BQU9OLFFBQVEsR0FBRyxDQUFDLHVCQUF1QixDQUFDTSxNQUFNLEdBQUc7SUFDdEQ7SUFFQSxNQUFNQyxtQkFBbUIsQ0FBQ0MsUUFBc0JDO1FBQzlDLE1BQU1D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